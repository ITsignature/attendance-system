[2025-10-23T05:03:28.082Z] [INFO] 🚀 Payroll calculation logging started for run: 9d1f43b3-53c6-4089-8675-7e37ba3dd149
[2025-10-23T05:03:28.082Z] [INFO] 📁 Log file: E:\smart_attendance_system\BackEnd\logs\payroll-run-9d1f43b3-53c6-4089-8675-7e37ba3dd149-2025-10-23T05-03-28-082Z.txt
[2025-10-23T05:03:28.082Z] [INFO] ⏰ Started at: 2025-10-23T05:03:28.082Z
[2025-10-23T05:03:28.082Z] [INFO] ================================================================================
[2025-10-23T05:03:28.083Z] [LOG] 🚀 Starting payroll calculation for run: 9d1f43b3-53c6-4089-8675-7e37ba3dd149
[2025-10-23T05:03:28.083Z] [LOG] 👤 Client ID: it-signature, User ID: 059304ea-24a5-4d78-a290-cf09b9e53c4c
[2025-10-23T05:03:28.756Z] [LOG] ✅ Payroll run verified: October (MONTHLY_2025_10_REGULAR)
[2025-10-23T05:03:29.217Z] [LOG] 📊 Status updated to 'calculating'
[2025-10-23T05:03:29.965Z] [LOG] 👥 Processing 34 employee records:
[2025-10-23T05:03:29.965Z] [LOG] ============================================================
[2025-10-23T05:03:29.965Z] [LOG] 
🧮 Processing: Anoj null (EMP000014)
[2025-10-23T05:03:29.965Z] [LOG] 📋 Record ID: 01ebcddd-4cf4-4af3-bec4-87d0b51017e1
[2025-10-23T05:03:29.966Z] [LOG] 
======================================================================
[2025-10-23T05:03:29.967Z] [LOG] 🧮 CALCULATING PAYROLL: Anoj null (EMP000014)
[2025-10-23T05:03:29.967Z] [LOG] ======================================================================
[2025-10-23T05:03:32.008Z] [LOG] 🔍 Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-23T05:03:32.009Z] [LOG]    Total components: 11
[2025-10-23T05:03:32.009Z] [LOG]    Applicable components: 11
[2025-10-23T05:03:32.009Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T05:03:34.911Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:03:34.912Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:03:35.603Z] [LOG] 📊 Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:36.100Z] [LOG] 📊 Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:36.561Z] [LOG] 📊 Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:36.562Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:03:36.563Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:03:37.357Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:03:37.358Z] [LOG]    Employee ID: 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:37.358Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:03:37.359Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:03:37.359Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T05:03:37.946Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:03:37.947Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T05:03:37.947Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T05:03:37.947Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T05:03:37.948Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:03:37.948Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:03:37.948Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:03:39.437Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:03:39.437Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:03:39.963Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:03:39.964Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:03:39.964Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:03:39.964Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:03:39.965Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:03:39.965Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:03:39.966Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:03:39.966Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:03:40.380Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:03:40.380Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:03:40.380Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:03:40.381Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:03:40.814Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:03:40.814Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:03:40.815Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:03:40.816Z] [LOG]       Current Time: 10:33:40
[2025-10-23T05:03:40.816Z] [LOG]       Expected Hours (scheduled → now): 2.06h
[2025-10-23T05:03:40.817Z] [LOG]       Actual Hours (check-in → now): 2.06h
[2025-10-23T05:03:40.817Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:03:40.817Z] [LOG]       Weekday: 121.06h
[2025-10-23T05:03:40.818Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:03:40.818Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:03:40.819Z] [LOG]       Total Expected: 134.56h
[2025-10-23T05:03:40.819Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:03:40.820Z] [LOG]       Weekday: 27.56h (includes 2.06h live)
[2025-10-23T05:03:40.820Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:03:40.820Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:03:40.821Z] [LOG]       Total Actual: 32.06h
[2025-10-23T05:03:40.821Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:03:40.822Z] [LOG]       Weekday: 121.06h × Rs.235.29 = Rs.28484.52
[2025-10-23T05:03:40.822Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T05:03:40.822Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:03:40.823Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:03:40.823Z] [LOG]       Total Expected Earned: Rs.34484.46
[2025-10-23T05:03:40.823Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:03:40.824Z] [LOG]       Weekday: 27.56h × Rs.235.29 = Rs.6484.91
[2025-10-23T05:03:40.824Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T05:03:40.824Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:03:40.825Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:03:40.825Z] [LOG]       Total Actual Earned: Rs.8484.89
[2025-10-23T05:03:40.826Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:03:40.826Z] [LOG]       Calculated At: Oct 23, 2025, 10:33:40
[2025-10-23T05:03:40.827Z] [LOG]       Expected Earned (until NOW): Rs.34484.46
[2025-10-23T05:03:40.827Z] [LOG]       Actual Earned (until NOW): Rs.8484.89
[2025-10-23T05:03:40.828Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:03:40.828Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T05:03:40.828Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:03:40.829Z] [LOG]       📉 Shortfall: 102.50 hours (75.40% of expected)
[2025-10-23T05:03:40.830Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:03:40.830Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:03:40.832Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:03:40.832Z] [LOG]    Actual Earned Base: Rs.8484.89
[2025-10-23T05:03:40.832Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:03:40.833Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:03:40.834Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:03:40.834Z] [LOG]    Gross Salary: 8484.887035016665
[2025-10-23T05:03:40.835Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T05:03:40.835Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:03:40.836Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:40.836Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:03:40.836Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:40.836Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:03:40.836Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:40.837Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:03:40.837Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:40.837Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:03:40.838Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:40.838Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:03:40.838Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:40.839Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:03:40.839Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:40.840Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:03:40.840Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:40.841Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:03:40.841Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:40.842Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:03:40.843Z] [LOG]    EPF/ETF calculated on: Rs.8484.89
[2025-10-23T05:03:40.843Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:03:40.844Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:03:40.845Z] [LOG] 💰 GROSS CALCULATION for Anoj null:
[2025-10-23T05:03:40.845Z] [LOG]    Base Salary: 50000
[2025-10-23T05:03:40.846Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T05:03:40.846Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:03:40.846Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:40.846Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:03:40.847Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:41.248Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:03:41.249Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:03:41.250Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:03:41.250Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:03:41.250Z] [LOG]    Actual Earned Base: Rs.8484.89
[2025-10-23T05:03:41.251Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:03:41.251Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:03:41.252Z] [LOG]    = Gross Salary: Rs.8484.89
[2025-10-23T05:03:41.252Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:03:41.252Z] [LOG]    Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:03:41.253Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:03:41.253Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:03:41.254Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:03:41.254Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:03:41.254Z] [LOG]    Gross Salary: Rs.8484.89
[2025-10-23T05:03:41.254Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:03:41.255Z] [LOG]    = NET SALARY: Rs.8484.89
[2025-10-23T05:03:41.698Z] [LOG] 
📝 Components to save:
[2025-10-23T05:03:41.698Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:03:41.699Z] [LOG]    Deduction components: 1
[2025-10-23T05:03:41.700Z] [LOG] Creating components for record 01ebcddd-4cf4-4af3-bec4-87d0b51017e1: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:03:41.701Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 8484.887035016665
}
[2025-10-23T05:03:42.564Z] [LOG] Created new component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:03:42.991Z] [LOG] Created payroll_record_component: 6301905c-0b63-46e3-88f2-99d7249d6e2c for Base Salary
[2025-10-23T05:03:42.991Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 25999.575
}
[2025-10-23T05:03:43.410Z] [LOG] Created new component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:03:43.608Z] [LOG] Created payroll_record_component: d0932c08-ec26-41c2-8760-e870cdfcfe85 for Attendance Shortfall (Info)
[2025-10-23T05:03:44.009Z] [LOG] ✅ Financial balances updated successfully for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:44.009Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:03:44.009Z] [LOG] 
======================================================================
[2025-10-23T05:03:44.010Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Anoj null
[2025-10-23T05:03:44.010Z] [LOG] ======================================================================
[2025-10-23T05:03:44.011Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:03:44.011Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8484.89
[2025-10-23T05:03:44.011Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:03:44.012Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:03:44.012Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:03:44.012Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:03:44.013Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:03:44.013Z] [LOG]    GROSS SALARY: Rs.8484.89
[2025-10-23T05:03:44.013Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:03:44.014Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:03:44.014Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:03:44.014Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:03:44.015Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:03:44.015Z] [LOG]       - Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:03:44.015Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:03:44.016Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:03:44.016Z] [LOG]    NET SALARY: Rs.8484.89
[2025-10-23T05:03:44.016Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:03:44.017Z] [LOG] ======================================================================

[2025-10-23T05:03:44.017Z] [LOG] ✅ Anoj null: Calculation completed successfully
[2025-10-23T05:03:44.017Z] [LOG] 📊 Progress: 1/34 (2.9%)
[2025-10-23T05:03:44.018Z] [LOG] 
🧮 Processing: Jessie null (EMP000013)
[2025-10-23T05:03:44.018Z] [LOG] 📋 Record ID: 063de8e3-8a51-438a-8c68-6d4062e3e948
[2025-10-23T05:03:44.018Z] [LOG] 
======================================================================
[2025-10-23T05:03:44.018Z] [LOG] 🧮 CALCULATING PAYROLL: Jessie null (EMP000013)
[2025-10-23T05:03:44.019Z] [LOG] ======================================================================
[2025-10-23T05:03:44.842Z] [LOG] 🔍 Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-23T05:03:44.843Z] [LOG]    Total components: 13
[2025-10-23T05:03:44.843Z] [LOG]    Applicable components: 13
[2025-10-23T05:03:44.843Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T05:03:46.095Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:03:46.095Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:03:46.330Z] [LOG] 📊 Found 0 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:46.527Z] [LOG] 📊 Found 0 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:46.735Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:46.735Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:03:46.736Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:03:46.963Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:03:46.963Z] [LOG]    Employee ID: 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:46.963Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:03:46.964Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:03:46.964Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-23T05:03:47.159Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:03:47.160Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-23T05:03:47.160Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-23T05:03:47.161Z] [LOG]       Saturday Hourly Rate: Rs.533.33
[2025-10-23T05:03:47.161Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:03:47.162Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:03:47.162Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:03:47.798Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:03:47.799Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:03:48.029Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:03:48.029Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:03:48.029Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:03:48.030Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:03:48.030Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:03:48.030Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:03:48.031Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:03:48.031Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:03:48.250Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:03:48.250Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:03:48.251Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:03:48.251Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:03:48.462Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:03:48.463Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:03:48.463Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:03:48.464Z] [LOG]       Current Time: 10:33:48
[2025-10-23T05:03:48.464Z] [LOG]       Expected Hours (scheduled → now): 2.06h
[2025-10-23T05:03:48.465Z] [LOG]       Actual Hours (check-in → now): 2.06h
[2025-10-23T05:03:48.465Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:03:48.465Z] [LOG]       Weekday: 121.06h
[2025-10-23T05:03:48.466Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:03:48.466Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:03:48.467Z] [LOG]       Total Expected: 134.56h
[2025-10-23T05:03:48.467Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:03:48.467Z] [LOG]       Weekday: 27.56h (includes 2.06h live)
[2025-10-23T05:03:48.468Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:03:48.468Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:03:48.469Z] [LOG]       Total Actual: 32.06h
[2025-10-23T05:03:48.469Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:03:48.470Z] [LOG]       Weekday: 121.06h × Rs.282.35 = Rs.34182.27
[2025-10-23T05:03:48.470Z] [LOG]       Saturday: 13.50h × Rs.533.33 = Rs.7199.96
[2025-10-23T05:03:48.471Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:03:48.471Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:03:48.471Z] [LOG]       Total Expected Earned: Rs.41382.22
[2025-10-23T05:03:48.472Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:03:48.472Z] [LOG]       Weekday: 27.56h × Rs.282.35 = Rs.7782.54
[2025-10-23T05:03:48.472Z] [LOG]       Saturday: 4.50h × Rs.533.33 = Rs.2399.99
[2025-10-23T05:03:48.473Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:03:48.473Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:03:48.474Z] [LOG]       Total Actual Earned: Rs.10182.53
[2025-10-23T05:03:48.475Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:03:48.475Z] [LOG]       Calculated At: Oct 23, 2025, 10:33:48
[2025-10-23T05:03:48.476Z] [LOG]       Expected Earned (until NOW): Rs.41382.22
[2025-10-23T05:03:48.476Z] [LOG]       Actual Earned (until NOW): Rs.10182.53
[2025-10-23T05:03:48.477Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:03:48.477Z] [LOG]       Attendance Deduction: Rs.31199.70
[2025-10-23T05:03:48.478Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:03:48.478Z] [LOG]       📉 Shortfall: 102.50 hours (75.39% of expected)
[2025-10-23T05:03:48.479Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:03:48.479Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:03:48.480Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-23T05:03:48.480Z] [LOG]    Actual Earned Base: Rs.10182.53
[2025-10-23T05:03:48.481Z] [LOG]    Attendance Shortfall: Rs.31199.70
[2025-10-23T05:03:48.481Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:03:48.481Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:03:48.482Z] [LOG]    Gross Salary: 10182.528401583333
[2025-10-23T05:03:48.482Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:03:48.482Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:03:48.483Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:48.483Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:03:48.483Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:48.484Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:03:48.484Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:48.485Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:03:48.485Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:48.485Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:03:48.486Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:48.486Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:03:48.486Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:48.486Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:03:48.487Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:48.487Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:03:48.487Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:48.487Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:03:48.488Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:48.488Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:03:48.488Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:48.489Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:03:48.489Z] [LOG]    EPF/ETF calculated on: Rs.10182.53
[2025-10-23T05:03:48.490Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:03:48.490Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:03:48.490Z] [LOG] 💰 GROSS CALCULATION for Jessie null:
[2025-10-23T05:03:48.490Z] [LOG]    Base Salary: 60000
[2025-10-23T05:03:48.491Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:03:48.491Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:03:48.491Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:48.492Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:03:48.492Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:48.493Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:03:48.493Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:48.688Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:03:48.689Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:03:48.689Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:03:48.689Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:03:48.690Z] [LOG]    Actual Earned Base: Rs.10182.53
[2025-10-23T05:03:48.690Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:03:48.690Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:03:48.691Z] [LOG]    = Gross Salary: Rs.10182.53
[2025-10-23T05:03:48.691Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:03:48.692Z] [LOG]    Attendance Shortfall (Info): Rs.31199.70
[2025-10-23T05:03:48.692Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:03:48.692Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:03:48.693Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:03:48.693Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:03:48.693Z] [LOG]    Gross Salary: Rs.10182.53
[2025-10-23T05:03:48.694Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:03:48.694Z] [LOG]    = NET SALARY: Rs.10182.53
[2025-10-23T05:03:48.909Z] [LOG] 
📝 Components to save:
[2025-10-23T05:03:48.910Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:03:48.910Z] [LOG]    Deduction components: 1
[2025-10-23T05:03:48.911Z] [LOG] Creating components for record 063de8e3-8a51-438a-8c68-6d4062e3e948: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:03:48.911Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 10182.528401583333
}
[2025-10-23T05:03:49.112Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:03:49.354Z] [LOG] Created payroll_record_component: 38c7b58c-0383-4b06-bf54-0f95b6f54f6f for Base Salary
[2025-10-23T05:03:49.355Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 31199.695000000007
}
[2025-10-23T05:03:49.555Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:03:49.757Z] [LOG] Created payroll_record_component: eba41d2b-80b1-4e16-bfe6-38dd9f9694fb for Attendance Shortfall (Info)
[2025-10-23T05:03:50.204Z] [LOG] ✅ Financial balances updated successfully for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:50.205Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:03:50.205Z] [LOG] 
======================================================================
[2025-10-23T05:03:50.206Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Jessie null
[2025-10-23T05:03:50.206Z] [LOG] ======================================================================
[2025-10-23T05:03:50.207Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-23T05:03:50.207Z] [LOG]    Actual Earned Base (Attendance-based): Rs.10182.53
[2025-10-23T05:03:50.207Z] [LOG]    Attendance Shortfall: Rs.31199.70
[2025-10-23T05:03:50.208Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:03:50.208Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:03:50.209Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:03:50.209Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:03:50.209Z] [LOG]    GROSS SALARY: Rs.10182.53
[2025-10-23T05:03:50.210Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:03:50.210Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:03:50.210Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:03:50.210Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:03:50.211Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:03:50.211Z] [LOG]       - Attendance Shortfall (Info): Rs.31199.70
[2025-10-23T05:03:50.212Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:03:50.212Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:03:50.212Z] [LOG]    NET SALARY: Rs.10182.53
[2025-10-23T05:03:50.213Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:03:50.213Z] [LOG] ======================================================================

[2025-10-23T05:03:50.213Z] [LOG] ✅ Jessie null: Calculation completed successfully
[2025-10-23T05:03:50.214Z] [LOG] 📊 Progress: 2/34 (5.9%)
[2025-10-23T05:03:50.214Z] [LOG] 
🧮 Processing: Sithira null (EMP000039)
[2025-10-23T05:03:50.214Z] [LOG] 📋 Record ID: 081a6a83-d97b-4f91-bb4a-76620b032779
[2025-10-23T05:03:50.215Z] [LOG] 
======================================================================
[2025-10-23T05:03:50.215Z] [LOG] 🧮 CALCULATING PAYROLL: Sithira null (EMP000039)
[2025-10-23T05:03:50.216Z] [LOG] ======================================================================
[2025-10-23T05:03:51.067Z] [LOG] 🔍 Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-23T05:03:51.068Z] [LOG]    Total components: 13
[2025-10-23T05:03:51.068Z] [LOG]    Applicable components: 13
[2025-10-23T05:03:51.069Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-23T05:03:52.291Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:03:52.291Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:03:52.491Z] [LOG] 📊 Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:52.694Z] [LOG] 📊 Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:52.892Z] [LOG] 📊 Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:52.893Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:03:52.893Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:03:53.104Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:03:53.105Z] [LOG]    Employee ID: 01441e19-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:53.105Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:03:53.106Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:03:53.106Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-23T05:03:53.373Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:03:53.374Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-23T05:03:53.374Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-23T05:03:53.375Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-23T05:03:53.375Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:03:53.375Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:03:53.376Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:03:53.987Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:03:53.987Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:03:54.191Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:03:54.191Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:03:54.192Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:03:54.192Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:03:54.192Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:03:54.193Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:03:54.193Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:03:54.193Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:03:54.402Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:03:54.403Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:03:54.403Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:03:54.403Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:03:54.634Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:03:54.635Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:03:54.635Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:03:54.636Z] [LOG]       Current Time: 10:33:54
[2025-10-23T05:03:54.637Z] [LOG]       Expected Hours (scheduled → now): 2.07h
[2025-10-23T05:03:54.637Z] [LOG]       Actual Hours (check-in → now): 2.07h
[2025-10-23T05:03:54.638Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:03:54.638Z] [LOG]       Weekday: 121.07h
[2025-10-23T05:03:54.638Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:03:54.639Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:03:54.639Z] [LOG]       Total Expected: 134.57h
[2025-10-23T05:03:54.639Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:03:54.640Z] [LOG]       Weekday: 27.57h (includes 2.07h live)
[2025-10-23T05:03:54.640Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:03:54.640Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:03:54.641Z] [LOG]       Total Actual: 32.07h
[2025-10-23T05:03:54.641Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:03:54.641Z] [LOG]       Weekday: 121.07h × Rs.188.24 = Rs.22789.31
[2025-10-23T05:03:54.642Z] [LOG]       Saturday: 13.50h × Rs.355.56 = Rs.4800.06
[2025-10-23T05:03:54.642Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:03:54.643Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:03:54.643Z] [LOG]       Total Expected Earned: Rs.27589.37
[2025-10-23T05:03:54.643Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:03:54.643Z] [LOG]       Weekday: 27.57h × Rs.188.24 = Rs.5188.87
[2025-10-23T05:03:54.644Z] [LOG]       Saturday: 4.50h × Rs.355.56 = Rs.1600.02
[2025-10-23T05:03:54.644Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:03:54.644Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:03:54.645Z] [LOG]       Total Actual Earned: Rs.6788.89
[2025-10-23T05:03:54.646Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:03:54.646Z] [LOG]       Calculated At: Oct 23, 2025, 10:33:54
[2025-10-23T05:03:54.647Z] [LOG]       Expected Earned (until NOW): Rs.27589.37
[2025-10-23T05:03:54.647Z] [LOG]       Actual Earned (until NOW): Rs.6788.89
[2025-10-23T05:03:54.647Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:03:54.648Z] [LOG]       Attendance Deduction: Rs.20800.48
[2025-10-23T05:03:54.648Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:03:54.648Z] [LOG]       📉 Shortfall: 102.50 hours (75.39% of expected)
[2025-10-23T05:03:54.649Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:03:54.649Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:03:54.650Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-23T05:03:54.651Z] [LOG]    Actual Earned Base: Rs.6788.89
[2025-10-23T05:03:54.651Z] [LOG]    Attendance Shortfall: Rs.20800.48
[2025-10-23T05:03:54.651Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:03:54.652Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:03:54.652Z] [LOG]    Gross Salary: 6788.888751155555
[2025-10-23T05:03:54.652Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:03:54.653Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:03:54.653Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:54.653Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:03:54.653Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:54.654Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:03:54.654Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:54.654Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:03:54.654Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:54.655Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:03:54.655Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:54.655Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:03:54.655Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:54.656Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:03:54.656Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:54.656Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:03:54.657Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:54.657Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:03:54.658Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:54.658Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:03:54.658Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:54.659Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:03:54.660Z] [LOG]    EPF/ETF calculated on: Rs.6788.89
[2025-10-23T05:03:54.660Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:03:54.660Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:03:54.661Z] [LOG] 💰 GROSS CALCULATION for Sithira null:
[2025-10-23T05:03:54.661Z] [LOG]    Base Salary: 40000
[2025-10-23T05:03:54.661Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:03:54.662Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:03:54.662Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:54.662Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:03:54.663Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:54.663Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:03:54.663Z] [LOG]    Fixed amount: 0
[2025-10-23T05:03:54.858Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:03:54.858Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:03:54.859Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:03:54.859Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:03:54.859Z] [LOG]    Actual Earned Base: Rs.6788.89
[2025-10-23T05:03:54.860Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:03:54.860Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:03:54.860Z] [LOG]    = Gross Salary: Rs.6788.89
[2025-10-23T05:03:54.861Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:03:54.861Z] [LOG]    Attendance Shortfall (Info): Rs.20800.48
[2025-10-23T05:03:54.862Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:03:54.862Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:03:54.862Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:03:54.862Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:03:54.863Z] [LOG]    Gross Salary: Rs.6788.89
[2025-10-23T05:03:54.863Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:03:54.863Z] [LOG]    = NET SALARY: Rs.6788.89
[2025-10-23T05:03:55.061Z] [LOG] 
📝 Components to save:
[2025-10-23T05:03:55.062Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:03:55.062Z] [LOG]    Deduction components: 1
[2025-10-23T05:03:55.063Z] [LOG] Creating components for record 081a6a83-d97b-4f91-bb4a-76620b032779: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:03:55.063Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 6788.888751155555
}
[2025-10-23T05:03:55.261Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:03:55.462Z] [LOG] Created payroll_record_component: ec44a60d-c5c8-499d-8b4d-e5da8e986199 for Base Salary
[2025-10-23T05:03:55.462Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 20800.480000000003
}
[2025-10-23T05:03:55.659Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:03:55.879Z] [LOG] Created payroll_record_component: 3d3ea4bd-d88f-45a4-be09-6dfff3b1e86c for Attendance Shortfall (Info)
[2025-10-23T05:03:56.287Z] [LOG] ✅ Financial balances updated successfully for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:56.287Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:03:56.288Z] [LOG] 
======================================================================
[2025-10-23T05:03:56.288Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sithira null
[2025-10-23T05:03:56.288Z] [LOG] ======================================================================
[2025-10-23T05:03:56.289Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-23T05:03:56.289Z] [LOG]    Actual Earned Base (Attendance-based): Rs.6788.89
[2025-10-23T05:03:56.289Z] [LOG]    Attendance Shortfall: Rs.20800.48
[2025-10-23T05:03:56.290Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:03:56.290Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:03:56.290Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:03:56.291Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:03:56.291Z] [LOG]    GROSS SALARY: Rs.6788.89
[2025-10-23T05:03:56.291Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:03:56.292Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:03:56.292Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:03:56.292Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:03:56.293Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:03:56.293Z] [LOG]       - Attendance Shortfall (Info): Rs.20800.48
[2025-10-23T05:03:56.293Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:03:56.294Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:03:56.294Z] [LOG]    NET SALARY: Rs.6788.89
[2025-10-23T05:03:56.294Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:03:56.295Z] [LOG] ======================================================================

[2025-10-23T05:03:56.295Z] [LOG] ✅ Sithira null: Calculation completed successfully
[2025-10-23T05:03:56.295Z] [LOG] 📊 Progress: 3/34 (8.8%)
[2025-10-23T05:03:56.296Z] [LOG] 
🧮 Processing: customer null (EMP000036)
[2025-10-23T05:03:56.296Z] [LOG] 📋 Record ID: 08e7e623-30c0-4721-b2de-123851d6ddff
[2025-10-23T05:03:56.297Z] [LOG] 
======================================================================
[2025-10-23T05:03:56.297Z] [LOG] 🧮 CALCULATING PAYROLL: customer null (EMP000036)
[2025-10-23T05:03:56.297Z] [LOG] ======================================================================
[2025-10-23T05:03:57.260Z] [LOG] 🔍 Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-23T05:03:57.260Z] [LOG]    Total components: 13
[2025-10-23T05:03:57.261Z] [LOG]    Applicable components: 13
[2025-10-23T05:03:57.261Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T05:03:58.759Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:03:58.760Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:03:58.967Z] [LOG] 📊 Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:59.181Z] [LOG] 📊 Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:59.388Z] [LOG] 📊 Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:59.389Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:03:59.390Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:03:59.593Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:03:59.593Z] [LOG]    Employee ID: 014409a2-7105-11f0-a50f-98e743540430
[2025-10-23T05:03:59.594Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:03:59.594Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:03:59.594Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-23T05:03:59.793Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:03:59.794Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-23T05:03:59.794Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-23T05:03:59.795Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-23T05:03:59.795Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:03:59.795Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:03:59.795Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:04:00.647Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:04:00.648Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:04:00.850Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:04:00.850Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:04:00.851Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:04:00.851Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:04:00.852Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:04:00.853Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:04:00.853Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:04:00.854Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:04:01.061Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:04:01.062Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:04:01.062Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:04:01.062Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:04:01.254Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:04:01.254Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:04:01.254Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:04:01.255Z] [LOG]       Current Time: 10:34:01
[2025-10-23T05:04:01.255Z] [LOG]       Expected Hours (scheduled → now): 2.07h
[2025-10-23T05:04:01.256Z] [LOG]       Actual Hours (check-in → now): 2.07h
[2025-10-23T05:04:01.256Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:04:01.257Z] [LOG]       Weekday: 121.07h
[2025-10-23T05:04:01.257Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:04:01.257Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:01.257Z] [LOG]       Total Expected: 134.57h
[2025-10-23T05:04:01.258Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:04:01.258Z] [LOG]       Weekday: 27.57h (includes 2.07h live)
[2025-10-23T05:04:01.258Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:04:01.259Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:01.259Z] [LOG]       Total Actual: 32.07h
[2025-10-23T05:04:01.259Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:04:01.260Z] [LOG]       Weekday: 121.07h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:01.260Z] [LOG]       Saturday: 13.50h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:01.260Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:01.261Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:01.261Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-23T05:04:01.261Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:04:01.261Z] [LOG]       Weekday: 27.57h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:01.261Z] [LOG]       Saturday: 4.50h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:01.262Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:01.262Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:01.262Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-23T05:04:01.263Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:04:01.263Z] [LOG]       Calculated At: Oct 23, 2025, 10:34:01
[2025-10-23T05:04:01.263Z] [LOG]       Expected Earned (until NOW): Rs.0.00
[2025-10-23T05:04:01.263Z] [LOG]       Actual Earned (until NOW): Rs.0.00
[2025-10-23T05:04:01.264Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:01.264Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-23T05:04:01.264Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:04:01.264Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-23T05:04:01.265Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:04:01.265Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:04:01.265Z] [LOG]    Base Salary (Full): Rs.NaN
[2025-10-23T05:04:01.266Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T05:04:01.266Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T05:04:01.266Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:04:01.267Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:04:01.267Z] [LOG]    Gross Salary: 0
[2025-10-23T05:04:01.267Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:04:01.268Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:04:01.269Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:01.270Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:04:01.270Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:01.270Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:04:01.270Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:01.271Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:04:01.271Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:01.271Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:04:01.271Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:01.271Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:04:01.272Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:01.272Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:04:01.272Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:01.273Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:04:01.273Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:01.273Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:04:01.273Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:01.273Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:04:01.274Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:01.274Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:04:01.275Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-23T05:04:01.275Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:04:01.276Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:04:01.276Z] [LOG] 💰 GROSS CALCULATION for customer null:
[2025-10-23T05:04:01.276Z] [LOG]    Base Salary: 0
[2025-10-23T05:04:01.276Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:04:01.277Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:04:01.277Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:01.277Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:04:01.277Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:01.278Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:04:01.278Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:01.494Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:04:01.494Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:01.495Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:04:01.495Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:04:01.495Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T05:04:01.496Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:04:01.496Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:04:01.496Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-23T05:04:01.497Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:04:01.497Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:04:01.497Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:01.497Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:04:01.498Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:04:01.498Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-23T05:04:01.498Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:04:01.499Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-23T05:04:01.702Z] [LOG] 
📝 Components to save:
[2025-10-23T05:04:01.703Z] [LOG]    Gross/Earnings components: 0
[2025-10-23T05:04:01.703Z] [LOG]    Deduction components: 0
[2025-10-23T05:04:01.704Z] [LOG] Creating components for record 08e7e623-30c0-4721-b2de-123851d6ddff: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T05:04:02.113Z] [LOG] ✅ Financial balances updated successfully for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:02.113Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:04:02.113Z] [LOG] 
======================================================================
[2025-10-23T05:04:02.114Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: customer null
[2025-10-23T05:04:02.114Z] [LOG] ======================================================================
[2025-10-23T05:04:02.114Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-23T05:04:02.115Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-23T05:04:02.115Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T05:04:02.117Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:02.117Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:02.118Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:04:02.118Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:02.118Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-23T05:04:02.119Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:02.119Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:04:02.120Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:04:02.120Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:04:02.120Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:04:02.121Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-23T05:04:02.121Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:02.121Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:02.122Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-23T05:04:02.122Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:04:02.122Z] [LOG] ======================================================================

[2025-10-23T05:04:02.123Z] [LOG] ✅ customer null: Calculation completed successfully
[2025-10-23T05:04:02.123Z] [LOG] 📊 Progress: 4/34 (11.8%)
[2025-10-23T05:04:02.124Z] [LOG] 
🧮 Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-23T05:04:02.124Z] [LOG] 📋 Record ID: 0e059ba6-c18c-4321-ad8f-33a84f9c10c8
[2025-10-23T05:04:02.124Z] [LOG] 
======================================================================
[2025-10-23T05:04:02.125Z] [LOG] 🧮 CALCULATING PAYROLL: P.D.P Dilini Madushani null (EMP000043)
[2025-10-23T05:04:02.125Z] [LOG] ======================================================================
[2025-10-23T05:04:02.980Z] [LOG] 🔍 Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-23T05:04:02.981Z] [LOG]    Total components: 13
[2025-10-23T05:04:02.981Z] [LOG]    Applicable components: 13
[2025-10-23T05:04:02.982Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T05:04:04.270Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:04:04.270Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:04:04.470Z] [LOG] 📊 Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:04.669Z] [LOG] 📊 Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:04.864Z] [LOG] 📊 Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:04.865Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:04:04.866Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:04:05.064Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:04:05.065Z] [LOG]    Employee ID: 014435dc-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:05.065Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:04:05.066Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:04:05.066Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T05:04:05.276Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:04:05.276Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T05:04:05.277Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T05:04:05.277Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T05:04:05.278Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:04:05.278Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:04:05.278Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:04:05.868Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:04:05.868Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:04:06.074Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:04:06.075Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:04:06.075Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:04:06.076Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:04:06.076Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:04:06.077Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:04:06.077Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:04:06.077Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:04:06.282Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:04:06.283Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:04:06.283Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:04:06.283Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:04:06.489Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:04:06.489Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:04:06.490Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:04:06.491Z] [LOG]       Current Time: 10:34:06
[2025-10-23T05:04:06.491Z] [LOG]       Expected Hours (scheduled → now): 2.07h
[2025-10-23T05:04:06.492Z] [LOG]       Actual Hours (check-in → now): 2.07h
[2025-10-23T05:04:06.492Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:04:06.492Z] [LOG]       Weekday: 121.07h
[2025-10-23T05:04:06.493Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:04:06.493Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:06.493Z] [LOG]       Total Expected: 134.57h
[2025-10-23T05:04:06.494Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:04:06.494Z] [LOG]       Weekday: 27.57h (includes 2.07h live)
[2025-10-23T05:04:06.494Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:04:06.495Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:06.495Z] [LOG]       Total Actual: 32.07h
[2025-10-23T05:04:06.495Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:04:06.496Z] [LOG]       Weekday: 121.07h × Rs.235.29 = Rs.28486.20
[2025-10-23T05:04:06.496Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T05:04:06.497Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:06.497Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:06.497Z] [LOG]       Total Expected Earned: Rs.34486.14
[2025-10-23T05:04:06.498Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:04:06.498Z] [LOG]       Weekday: 27.57h × Rs.235.29 = Rs.6486.59
[2025-10-23T05:04:06.498Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T05:04:06.499Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:06.499Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:06.499Z] [LOG]       Total Actual Earned: Rs.8486.57
[2025-10-23T05:04:06.500Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:04:06.501Z] [LOG]       Calculated At: Oct 23, 2025, 10:34:06
[2025-10-23T05:04:06.502Z] [LOG]       Expected Earned (until NOW): Rs.34486.14
[2025-10-23T05:04:06.503Z] [LOG]       Actual Earned (until NOW): Rs.8486.57
[2025-10-23T05:04:06.504Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:06.505Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T05:04:06.505Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:04:06.505Z] [LOG]       📉 Shortfall: 102.50 hours (75.39% of expected)
[2025-10-23T05:04:06.506Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:04:06.506Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:04:06.506Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:04:06.507Z] [LOG]    Actual Earned Base: Rs.8486.57
[2025-10-23T05:04:06.507Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T05:04:06.507Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:04:06.508Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:04:06.508Z] [LOG]    Gross Salary: 8486.565110225
[2025-10-23T05:04:06.508Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:04:06.509Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:04:06.509Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:06.509Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:04:06.510Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:06.510Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:04:06.510Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:06.511Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:04:06.511Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:06.512Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:04:06.512Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:06.512Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:04:06.513Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:06.513Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:04:06.513Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:06.514Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:04:06.514Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:06.515Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:04:06.515Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:06.515Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:04:06.515Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:06.516Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:04:06.516Z] [LOG]    EPF/ETF calculated on: Rs.8486.57
[2025-10-23T05:04:06.517Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:04:06.517Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:04:06.517Z] [LOG] 💰 GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-23T05:04:06.517Z] [LOG]    Base Salary: 50000
[2025-10-23T05:04:06.518Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:04:06.518Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:04:06.519Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:06.519Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:04:06.520Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:06.521Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:04:06.522Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:06.856Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:04:06.857Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:06.857Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:04:06.858Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:04:06.858Z] [LOG]    Actual Earned Base: Rs.8486.57
[2025-10-23T05:04:06.859Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:04:06.859Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:04:06.859Z] [LOG]    = Gross Salary: Rs.8486.57
[2025-10-23T05:04:06.859Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:04:06.860Z] [LOG]    Attendance Shortfall (Info): Rs.25999.57
[2025-10-23T05:04:06.860Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:04:06.860Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:06.861Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:04:06.861Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:04:06.862Z] [LOG]    Gross Salary: Rs.8486.57
[2025-10-23T05:04:06.862Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:04:06.862Z] [LOG]    = NET SALARY: Rs.8486.57
[2025-10-23T05:04:07.106Z] [LOG] 
📝 Components to save:
[2025-10-23T05:04:07.107Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:04:07.108Z] [LOG]    Deduction components: 1
[2025-10-23T05:04:07.108Z] [LOG] Creating components for record 0e059ba6-c18c-4321-ad8f-33a84f9c10c8: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:04:07.109Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 8486.565110225
}
[2025-10-23T05:04:07.301Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:04:07.508Z] [LOG] Created payroll_record_component: c35ac350-f799-4128-a9a2-ecb68756b527 for Base Salary
[2025-10-23T05:04:07.508Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 25999.574999999997
}
[2025-10-23T05:04:07.709Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:04:07.913Z] [LOG] Created payroll_record_component: f74cc73c-72cc-4a0c-894c-5f7cc5168429 for Attendance Shortfall (Info)
[2025-10-23T05:04:08.353Z] [LOG] ✅ Financial balances updated successfully for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:08.353Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:04:08.354Z] [LOG] 
======================================================================
[2025-10-23T05:04:08.354Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: P.D.P Dilini Madushani null
[2025-10-23T05:04:08.354Z] [LOG] ======================================================================
[2025-10-23T05:04:08.355Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:04:08.355Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8486.57
[2025-10-23T05:04:08.356Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T05:04:08.356Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:08.356Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:08.357Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:04:08.357Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:08.357Z] [LOG]    GROSS SALARY: Rs.8486.57
[2025-10-23T05:04:08.357Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:08.358Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:04:08.358Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:04:08.358Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:04:08.358Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:04:08.359Z] [LOG]       - Attendance Shortfall (Info): Rs.25999.57
[2025-10-23T05:04:08.359Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:08.359Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:08.360Z] [LOG]    NET SALARY: Rs.8486.57
[2025-10-23T05:04:08.360Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:04:08.360Z] [LOG] ======================================================================

[2025-10-23T05:04:08.361Z] [LOG] ✅ P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-23T05:04:08.361Z] [LOG] 📊 Progress: 5/34 (14.7%)
[2025-10-23T05:04:08.361Z] [LOG] 
🧮 Processing: Saru null (EMP000022)
[2025-10-23T05:04:08.362Z] [LOG] 📋 Record ID: 1a11365a-1ba3-4238-ad87-7f7e6b943c83
[2025-10-23T05:04:08.362Z] [LOG] 
======================================================================
[2025-10-23T05:04:08.362Z] [LOG] 🧮 CALCULATING PAYROLL: Saru null (EMP000022)
[2025-10-23T05:04:08.363Z] [LOG] ======================================================================
[2025-10-23T05:04:09.278Z] [LOG] 🔍 Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-23T05:04:09.278Z] [LOG]    Total components: 13
[2025-10-23T05:04:09.278Z] [LOG]    Applicable components: 13
[2025-10-23T05:04:09.279Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T05:04:10.575Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:04:10.575Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:04:10.807Z] [LOG] 📊 Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:11.053Z] [LOG] 📊 Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:11.258Z] [LOG] 📊 Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:11.259Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:04:11.259Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:04:11.459Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:04:11.460Z] [LOG]    Employee ID: 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:11.460Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:04:11.461Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:04:11.461Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T05:04:11.653Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:04:11.654Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T05:04:11.654Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T05:04:11.654Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T05:04:11.655Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:04:11.655Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:04:11.655Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:04:12.340Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:04:12.340Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:04:12.579Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:04:12.580Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:04:12.580Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:04:12.580Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:04:12.581Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:04:12.581Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:04:12.581Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:04:12.581Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:04:12.773Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:04:12.774Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:04:12.774Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:04:12.774Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:04:12.973Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:04:12.974Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:04:12.974Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:04:12.975Z] [LOG]       Current Time: 10:34:12
[2025-10-23T05:04:12.975Z] [LOG]       Expected Hours (scheduled → now): 2.07h
[2025-10-23T05:04:12.976Z] [LOG]       Actual Hours (check-in → now): 2.07h
[2025-10-23T05:04:12.976Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:04:12.976Z] [LOG]       Weekday: 121.07h
[2025-10-23T05:04:12.977Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:04:12.977Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:12.977Z] [LOG]       Total Expected: 134.57h
[2025-10-23T05:04:12.978Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:04:12.978Z] [LOG]       Weekday: 27.57h (includes 2.07h live)
[2025-10-23T05:04:12.979Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:04:12.979Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:12.979Z] [LOG]       Total Actual: 32.07h
[2025-10-23T05:04:12.980Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:04:12.980Z] [LOG]       Weekday: 121.07h × Rs.235.29 = Rs.28486.62
[2025-10-23T05:04:12.981Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T05:04:12.981Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:12.981Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:12.982Z] [LOG]       Total Expected Earned: Rs.34486.56
[2025-10-23T05:04:12.982Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:04:12.982Z] [LOG]       Weekday: 27.57h × Rs.235.29 = Rs.6487.01
[2025-10-23T05:04:12.983Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T05:04:12.983Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:12.983Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:12.984Z] [LOG]       Total Actual Earned: Rs.8486.99
[2025-10-23T05:04:12.985Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:04:12.986Z] [LOG]       Calculated At: Oct 23, 2025, 10:34:12
[2025-10-23T05:04:12.986Z] [LOG]       Expected Earned (until NOW): Rs.34486.56
[2025-10-23T05:04:12.986Z] [LOG]       Actual Earned (until NOW): Rs.8486.99
[2025-10-23T05:04:12.987Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:12.987Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T05:04:12.988Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:04:12.988Z] [LOG]       📉 Shortfall: 102.50 hours (75.39% of expected)
[2025-10-23T05:04:12.989Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:04:12.989Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:04:12.990Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:04:12.990Z] [LOG]    Actual Earned Base: Rs.8486.99
[2025-10-23T05:04:12.990Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:04:12.990Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:04:12.991Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:04:12.991Z] [LOG]    Gross Salary: 8486.988893658332
[2025-10-23T05:04:12.991Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:04:12.991Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:04:12.992Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:12.992Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:04:12.992Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:12.992Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:04:12.993Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:12.993Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:04:12.993Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:12.994Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:04:12.994Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:12.994Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:04:12.995Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:12.995Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:04:12.995Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:12.996Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:04:12.996Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:12.996Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:04:12.997Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:12.997Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:04:12.997Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:12.997Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:04:12.998Z] [LOG]    EPF/ETF calculated on: Rs.8486.99
[2025-10-23T05:04:12.998Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:04:12.998Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:04:12.999Z] [LOG] 💰 GROSS CALCULATION for Saru null:
[2025-10-23T05:04:12.999Z] [LOG]    Base Salary: 50000
[2025-10-23T05:04:12.999Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:04:12.999Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:04:13.000Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:13.000Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:04:13.000Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:13.001Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:04:13.001Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:13.217Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:04:13.218Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:13.218Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:04:13.219Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:04:13.219Z] [LOG]    Actual Earned Base: Rs.8486.99
[2025-10-23T05:04:13.219Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:04:13.220Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:04:13.220Z] [LOG]    = Gross Salary: Rs.8486.99
[2025-10-23T05:04:13.220Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:04:13.221Z] [LOG]    Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:04:13.221Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:04:13.221Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:13.221Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:04:13.221Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:04:13.222Z] [LOG]    Gross Salary: Rs.8486.99
[2025-10-23T05:04:13.222Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:04:13.222Z] [LOG]    = NET SALARY: Rs.8486.99
[2025-10-23T05:04:13.451Z] [LOG] 
📝 Components to save:
[2025-10-23T05:04:13.451Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:04:13.452Z] [LOG]    Deduction components: 1
[2025-10-23T05:04:13.452Z] [LOG] Creating components for record 1a11365a-1ba3-4238-ad87-7f7e6b943c83: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:04:13.453Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 8486.988893658332
}
[2025-10-23T05:04:13.661Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:04:13.856Z] [LOG] Created payroll_record_component: 0e1a1da5-1e15-4ce5-87d3-a73e440fb310 for Base Salary
[2025-10-23T05:04:13.856Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 25999.575000000004
}
[2025-10-23T05:04:14.064Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:04:14.295Z] [LOG] Created payroll_record_component: 1e31d253-d204-46ef-800b-f80c4d0bd937 for Attendance Shortfall (Info)
[2025-10-23T05:04:14.704Z] [LOG] ✅ Financial balances updated successfully for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:14.705Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:04:14.705Z] [LOG] 
======================================================================
[2025-10-23T05:04:14.705Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saru null
[2025-10-23T05:04:14.706Z] [LOG] ======================================================================
[2025-10-23T05:04:14.706Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:04:14.706Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8486.99
[2025-10-23T05:04:14.706Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:04:14.707Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:14.707Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:14.708Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:04:14.708Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:14.708Z] [LOG]    GROSS SALARY: Rs.8486.99
[2025-10-23T05:04:14.709Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:14.709Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:04:14.709Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:04:14.709Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:04:14.710Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:04:14.710Z] [LOG]       - Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:04:14.710Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:14.711Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:14.711Z] [LOG]    NET SALARY: Rs.8486.99
[2025-10-23T05:04:14.711Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:04:14.712Z] [LOG] ======================================================================

[2025-10-23T05:04:14.712Z] [LOG] ✅ Saru null: Calculation completed successfully
[2025-10-23T05:04:14.712Z] [LOG] 📊 Progress: 6/34 (17.6%)
[2025-10-23T05:04:14.713Z] [LOG] 
🧮 Processing: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-23T05:04:14.713Z] [LOG] 📋 Record ID: 1fd382d5-a472-402c-bd6d-e2d98a18104f
[2025-10-23T05:04:14.713Z] [LOG] 
======================================================================
[2025-10-23T05:04:14.714Z] [LOG] 🧮 CALCULATING PAYROLL: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-23T05:04:14.714Z] [LOG] ======================================================================
[2025-10-23T05:04:15.549Z] [LOG] 🔍 Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-23T05:04:15.550Z] [LOG]    Total components: 13
[2025-10-23T05:04:15.550Z] [LOG]    Applicable components: 13
[2025-10-23T05:04:15.551Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T05:04:16.847Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:04:16.848Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:04:17.053Z] [LOG] 📊 Found 0 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:17.494Z] [LOG] 📊 Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:17.806Z] [LOG] 📊 Found 0 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:17.806Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:04:17.807Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:04:18.016Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:04:18.017Z] [LOG]    Employee ID: 0144461e-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:18.017Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:04:18.018Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:04:18.018Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T05:04:18.249Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:04:18.250Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T05:04:18.250Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T05:04:18.250Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T05:04:18.251Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:04:18.251Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:04:18.252Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:04:18.867Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:04:18.867Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:04:19.075Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:04:19.076Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:04:19.076Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:04:19.077Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:04:19.077Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:04:19.077Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:04:19.078Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:04:19.078Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:04:19.283Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:04:19.283Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:04:19.284Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:04:19.284Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:04:19.510Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:04:19.510Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:04:19.510Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:04:19.511Z] [LOG]       Current Time: 10:34:19
[2025-10-23T05:04:19.511Z] [LOG]       Expected Hours (scheduled → now): 2.07h
[2025-10-23T05:04:19.512Z] [LOG]       Actual Hours (check-in → now): 2.07h
[2025-10-23T05:04:19.512Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:04:19.513Z] [LOG]       Weekday: 121.07h
[2025-10-23T05:04:19.513Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:04:19.513Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:19.514Z] [LOG]       Total Expected: 134.57h
[2025-10-23T05:04:19.514Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:04:19.514Z] [LOG]       Weekday: 27.57h (includes 2.07h live)
[2025-10-23T05:04:19.514Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:04:19.515Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:19.515Z] [LOG]       Total Actual: 32.07h
[2025-10-23T05:04:19.515Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:04:19.516Z] [LOG]       Weekday: 121.07h × Rs.235.29 = Rs.28487.05
[2025-10-23T05:04:19.516Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T05:04:19.517Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:19.517Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:19.517Z] [LOG]       Total Expected Earned: Rs.34486.99
[2025-10-23T05:04:19.518Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:04:19.518Z] [LOG]       Weekday: 27.57h × Rs.235.29 = Rs.6487.44
[2025-10-23T05:04:19.519Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T05:04:19.519Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:19.520Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:19.520Z] [LOG]       Total Actual Earned: Rs.8487.42
[2025-10-23T05:04:19.521Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:04:19.521Z] [LOG]       Calculated At: Oct 23, 2025, 10:34:19
[2025-10-23T05:04:19.522Z] [LOG]       Expected Earned (until NOW): Rs.34486.99
[2025-10-23T05:04:19.522Z] [LOG]       Actual Earned (until NOW): Rs.8487.42
[2025-10-23T05:04:19.523Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:19.523Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T05:04:19.523Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:04:19.524Z] [LOG]       📉 Shortfall: 102.50 hours (75.39% of expected)
[2025-10-23T05:04:19.524Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:04:19.524Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:04:19.525Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:04:19.525Z] [LOG]    Actual Earned Base: Rs.8487.42
[2025-10-23T05:04:19.525Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T05:04:19.526Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:04:19.526Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:04:19.526Z] [LOG]    Gross Salary: 8487.416141083333
[2025-10-23T05:04:19.527Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:04:19.527Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:04:19.527Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:19.528Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:04:19.528Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:19.528Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:04:19.529Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:19.529Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:04:19.529Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:19.530Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:04:19.530Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:19.530Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:04:19.531Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:19.531Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:04:19.531Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:19.531Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:04:19.532Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:19.532Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:04:19.532Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:19.533Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:04:19.533Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:19.533Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:04:19.534Z] [LOG]    EPF/ETF calculated on: Rs.8487.42
[2025-10-23T05:04:19.534Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:04:19.534Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:04:19.534Z] [LOG] 💰 GROSS CALCULATION for Ashen Nirmal Wadugodapitiya null:
[2025-10-23T05:04:19.535Z] [LOG]    Base Salary: 50000
[2025-10-23T05:04:19.535Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:04:19.536Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:04:19.536Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:19.537Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:04:19.537Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:19.537Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:04:19.537Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:19.755Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:04:19.755Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:19.756Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:04:19.756Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:04:19.756Z] [LOG]    Actual Earned Base: Rs.8487.42
[2025-10-23T05:04:19.756Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:04:19.756Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:04:19.756Z] [LOG]    = Gross Salary: Rs.8487.42
[2025-10-23T05:04:19.757Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:04:19.757Z] [LOG]    Attendance Shortfall (Info): Rs.25999.57
[2025-10-23T05:04:19.757Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:04:19.757Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:19.757Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:04:19.758Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:04:19.758Z] [LOG]    Gross Salary: Rs.8487.42
[2025-10-23T05:04:19.758Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:04:19.758Z] [LOG]    = NET SALARY: Rs.8487.42
[2025-10-23T05:04:19.973Z] [LOG] 
📝 Components to save:
[2025-10-23T05:04:19.975Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:04:19.975Z] [LOG]    Deduction components: 1
[2025-10-23T05:04:19.975Z] [LOG] Creating components for record 1fd382d5-a472-402c-bd6d-e2d98a18104f: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:04:19.976Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 8487.416141083333
}
[2025-10-23T05:04:20.182Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:04:20.378Z] [LOG] Created payroll_record_component: 0faab048-5d04-4e5e-9b67-4c0e679ee9c0 for Base Salary
[2025-10-23T05:04:20.379Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 25999.574999999997
}
[2025-10-23T05:04:20.599Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:04:20.795Z] [LOG] Created payroll_record_component: 47449521-6cc3-4963-9d00-2453e315241f for Attendance Shortfall (Info)
[2025-10-23T05:04:21.208Z] [LOG] ✅ Financial balances updated successfully for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:21.208Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:04:21.209Z] [LOG] 
======================================================================
[2025-10-23T05:04:21.209Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ashen Nirmal Wadugodapitiya null
[2025-10-23T05:04:21.209Z] [LOG] ======================================================================
[2025-10-23T05:04:21.210Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:04:21.210Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8487.42
[2025-10-23T05:04:21.210Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T05:04:21.211Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:21.211Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:21.212Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:04:21.212Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:21.212Z] [LOG]    GROSS SALARY: Rs.8487.42
[2025-10-23T05:04:21.213Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:21.213Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:04:21.213Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:04:21.214Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:04:21.214Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:04:21.214Z] [LOG]       - Attendance Shortfall (Info): Rs.25999.57
[2025-10-23T05:04:21.215Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:21.215Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:21.215Z] [LOG]    NET SALARY: Rs.8487.42
[2025-10-23T05:04:21.216Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:04:21.216Z] [LOG] ======================================================================

[2025-10-23T05:04:21.216Z] [LOG] ✅ Ashen Nirmal Wadugodapitiya null: Calculation completed successfully
[2025-10-23T05:04:21.217Z] [LOG] 📊 Progress: 7/34 (20.6%)
[2025-10-23T05:04:21.217Z] [LOG] 
🧮 Processing: Safna Nawas null (EMP000021)
[2025-10-23T05:04:21.217Z] [LOG] 📋 Record ID: 2103395b-1d09-45cf-9f0d-c4d627ce98f8
[2025-10-23T05:04:21.218Z] [LOG] 
======================================================================
[2025-10-23T05:04:21.219Z] [LOG] 🧮 CALCULATING PAYROLL: Safna Nawas null (EMP000021)
[2025-10-23T05:04:21.220Z] [LOG] ======================================================================
[2025-10-23T05:04:22.059Z] [LOG] 🔍 Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-23T05:04:22.060Z] [LOG]    Total components: 13
[2025-10-23T05:04:22.060Z] [LOG]    Applicable components: 13
[2025-10-23T05:04:22.060Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T05:04:23.374Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:04:23.375Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:04:23.581Z] [LOG] 📊 Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:23.790Z] [LOG] 📊 Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:23.991Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:23.991Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:04:23.991Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:04:24.186Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:04:24.187Z] [LOG]    Employee ID: 0143c977-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:24.187Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:04:24.187Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:04:24.188Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T05:04:24.417Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:04:24.418Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T05:04:24.418Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T05:04:24.419Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T05:04:24.419Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:04:24.419Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:04:24.420Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:04:25.059Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:04:25.060Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:04:25.263Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:04:25.264Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:04:25.264Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:04:25.264Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:04:25.265Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:04:25.265Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:04:25.266Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:04:25.266Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:04:25.473Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:04:25.473Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:04:25.474Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:04:25.474Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:04:25.672Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:04:25.673Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:04:25.673Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:04:25.674Z] [LOG]       Current Time: 10:34:25
[2025-10-23T05:04:25.674Z] [LOG]       Expected Hours (scheduled → now): 2.07h
[2025-10-23T05:04:25.674Z] [LOG]       Actual Hours (check-in → now): 2.07h
[2025-10-23T05:04:25.674Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:04:25.675Z] [LOG]       Weekday: 121.07h
[2025-10-23T05:04:25.675Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:04:25.675Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:25.676Z] [LOG]       Total Expected: 134.57h
[2025-10-23T05:04:25.676Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:04:25.676Z] [LOG]       Weekday: 27.57h (includes 2.07h live)
[2025-10-23T05:04:25.676Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:04:25.677Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:25.677Z] [LOG]       Total Actual: 32.07h
[2025-10-23T05:04:25.677Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:04:25.678Z] [LOG]       Weekday: 121.07h × Rs.235.29 = Rs.28487.45
[2025-10-23T05:04:25.678Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T05:04:25.678Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:25.679Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:25.679Z] [LOG]       Total Expected Earned: Rs.34487.39
[2025-10-23T05:04:25.679Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:04:25.679Z] [LOG]       Weekday: 27.57h × Rs.235.29 = Rs.6487.84
[2025-10-23T05:04:25.680Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T05:04:25.680Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:25.680Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:25.681Z] [LOG]       Total Actual Earned: Rs.8487.82
[2025-10-23T05:04:25.681Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:04:25.682Z] [LOG]       Calculated At: Oct 23, 2025, 10:34:25
[2025-10-23T05:04:25.682Z] [LOG]       Expected Earned (until NOW): Rs.34487.39
[2025-10-23T05:04:25.682Z] [LOG]       Actual Earned (until NOW): Rs.8487.82
[2025-10-23T05:04:25.683Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:25.683Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T05:04:25.683Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:04:25.684Z] [LOG]       📉 Shortfall: 102.50 hours (75.39% of expected)
[2025-10-23T05:04:25.684Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:04:25.684Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:04:25.685Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:04:25.686Z] [LOG]    Actual Earned Base: Rs.8487.82
[2025-10-23T05:04:25.687Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:04:25.687Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:04:25.688Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:04:25.688Z] [LOG]    Gross Salary: 8487.818879133332
[2025-10-23T05:04:25.688Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:04:25.689Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:04:25.689Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:25.689Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:04:25.689Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:25.690Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:04:25.690Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:25.690Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:04:25.691Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:25.691Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:04:25.691Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:25.691Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:04:25.691Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:25.692Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:04:25.692Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:25.693Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:04:25.693Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:25.693Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:04:25.693Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:25.694Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:04:25.694Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:25.694Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:04:25.694Z] [LOG]    EPF/ETF calculated on: Rs.8487.82
[2025-10-23T05:04:25.694Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:04:25.694Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:04:25.694Z] [LOG] 💰 GROSS CALCULATION for Safna Nawas null:
[2025-10-23T05:04:25.695Z] [LOG]    Base Salary: 50000
[2025-10-23T05:04:25.695Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:04:25.695Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:04:25.696Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:25.696Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:04:25.696Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:25.696Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:04:25.697Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:25.939Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:04:25.940Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:25.940Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:04:25.940Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:04:25.941Z] [LOG]    Actual Earned Base: Rs.8487.82
[2025-10-23T05:04:25.941Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:04:25.941Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:04:25.942Z] [LOG]    = Gross Salary: Rs.8487.82
[2025-10-23T05:04:25.942Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:04:25.943Z] [LOG]    Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:04:25.943Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:04:25.943Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:25.944Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:04:25.944Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:04:25.944Z] [LOG]    Gross Salary: Rs.8487.82
[2025-10-23T05:04:25.945Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:04:25.945Z] [LOG]    = NET SALARY: Rs.8487.82
[2025-10-23T05:04:26.179Z] [LOG] 
📝 Components to save:
[2025-10-23T05:04:26.180Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:04:26.180Z] [LOG]    Deduction components: 1
[2025-10-23T05:04:26.181Z] [LOG] Creating components for record 2103395b-1d09-45cf-9f0d-c4d627ce98f8: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:04:26.181Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 8487.818879133332
}
[2025-10-23T05:04:26.441Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:04:26.658Z] [LOG] Created payroll_record_component: 8eaeb65c-09c2-42f3-8d47-f94a5df510de for Base Salary
[2025-10-23T05:04:26.658Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 25999.575000000004
}
[2025-10-23T05:04:26.855Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:04:27.066Z] [LOG] Created payroll_record_component: c00c1ed3-1d2a-4a83-a9cd-abbc5e51af66 for Attendance Shortfall (Info)
[2025-10-23T05:04:27.466Z] [LOG] ✅ Financial balances updated successfully for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:27.467Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:04:27.467Z] [LOG] 
======================================================================
[2025-10-23T05:04:27.467Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Safna Nawas null
[2025-10-23T05:04:27.468Z] [LOG] ======================================================================
[2025-10-23T05:04:27.468Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:04:27.469Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8487.82
[2025-10-23T05:04:27.469Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:04:27.469Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:27.470Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:27.470Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:04:27.470Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:27.471Z] [LOG]    GROSS SALARY: Rs.8487.82
[2025-10-23T05:04:27.471Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:27.471Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:04:27.472Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:04:27.472Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:04:27.473Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:04:27.473Z] [LOG]       - Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:04:27.473Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:27.474Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:27.474Z] [LOG]    NET SALARY: Rs.8487.82
[2025-10-23T05:04:27.474Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:04:27.475Z] [LOG] ======================================================================

[2025-10-23T05:04:27.475Z] [LOG] ✅ Safna Nawas null: Calculation completed successfully
[2025-10-23T05:04:27.475Z] [LOG] 📊 Progress: 8/34 (23.5%)
[2025-10-23T05:04:27.476Z] [LOG] 
🧮 Processing: Kaushal Thambi (EMP465256103)
[2025-10-23T05:04:27.476Z] [LOG] 📋 Record ID: 21f4ee08-8518-4d9b-848b-aa7528975739
[2025-10-23T05:04:27.476Z] [LOG] 
======================================================================
[2025-10-23T05:04:27.477Z] [LOG] 🧮 CALCULATING PAYROLL: Kaushal Thambi (EMP465256103)
[2025-10-23T05:04:27.477Z] [LOG] ======================================================================
[2025-10-23T05:04:28.491Z] [LOG] 🔍 Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-23T05:04:28.491Z] [LOG]    Total components: 13
[2025-10-23T05:04:28.491Z] [LOG]    Applicable components: 13
[2025-10-23T05:04:28.491Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-23T05:04:29.740Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:04:29.740Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:04:29.961Z] [LOG] 📊 Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-23T05:04:30.182Z] [LOG] 📊 Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-23T05:04:30.383Z] [LOG] 📊 Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-23T05:04:30.384Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:04:30.385Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:04:30.579Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:04:30.580Z] [LOG]    Employee ID: 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-23T05:04:30.580Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:04:30.580Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:04:30.581Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T05:04:30.793Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:04:30.794Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T05:04:30.794Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T05:04:30.794Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T05:04:30.794Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:04:30.795Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:04:30.795Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:04:31.564Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:04:31.565Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:04:31.767Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:04:31.767Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:04:31.768Z] [LOG]       Total completed sessions found: 2
[2025-10-23T05:04:31.768Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:04:31.768Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:04:31.769Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:04:31.993Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:04:31.993Z] [LOG]          Weekday: 8.50h
[2025-10-23T05:04:31.994Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:04:31.994Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:04:32.190Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:04:32.191Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:04:32.191Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:04:32.192Z] [LOG]       Current Time: 10:34:32
[2025-10-23T05:04:32.192Z] [LOG]       Expected Hours (scheduled → now): 2.08h
[2025-10-23T05:04:32.192Z] [LOG]       Actual Hours (check-in → now): 2.08h
[2025-10-23T05:04:32.192Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:04:32.192Z] [LOG]       Weekday: 121.08h
[2025-10-23T05:04:32.193Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:04:32.193Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:32.193Z] [LOG]       Total Expected: 134.58h
[2025-10-23T05:04:32.193Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:04:32.194Z] [LOG]       Weekday: 10.58h (includes 2.08h live)
[2025-10-23T05:04:32.194Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:04:32.194Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:32.194Z] [LOG]       Total Actual: 15.08h
[2025-10-23T05:04:32.195Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:04:32.195Z] [LOG]       Weekday: 121.08h × Rs.235.29 = Rs.28487.88
[2025-10-23T05:04:32.195Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T05:04:32.195Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:32.195Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:32.196Z] [LOG]       Total Expected Earned: Rs.34487.82
[2025-10-23T05:04:32.196Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:04:32.196Z] [LOG]       Weekday: 10.58h × Rs.235.29 = Rs.2488.33
[2025-10-23T05:04:32.196Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T05:04:32.197Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:32.197Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:32.197Z] [LOG]       Total Actual Earned: Rs.4488.31
[2025-10-23T05:04:32.198Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:04:32.199Z] [LOG]       Calculated At: Oct 23, 2025, 10:34:32
[2025-10-23T05:04:32.199Z] [LOG]       Expected Earned (until NOW): Rs.34487.82
[2025-10-23T05:04:32.199Z] [LOG]       Actual Earned (until NOW): Rs.4488.31
[2025-10-23T05:04:32.199Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:32.199Z] [LOG]       Attendance Deduction: Rs.29999.51
[2025-10-23T05:04:32.200Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:04:32.200Z] [LOG]       📉 Shortfall: 119.50 hours (86.99% of expected)
[2025-10-23T05:04:32.200Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:04:32.200Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:04:32.202Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:04:32.202Z] [LOG]    Actual Earned Base: Rs.4488.31
[2025-10-23T05:04:32.202Z] [LOG]    Attendance Shortfall: Rs.29999.51
[2025-10-23T05:04:32.203Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:04:32.203Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:04:32.203Z] [LOG]    Gross Salary: 4488.31488475
[2025-10-23T05:04:32.203Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:04:32.204Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:04:32.204Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:32.204Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:04:32.205Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:32.205Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:04:32.206Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:32.206Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:04:32.206Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:32.206Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:04:32.206Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:32.206Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:04:32.206Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:32.207Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:04:32.207Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:32.207Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:04:32.207Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:32.207Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:04:32.207Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:32.207Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:04:32.208Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:32.208Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:04:32.208Z] [LOG]    EPF/ETF calculated on: Rs.4488.31
[2025-10-23T05:04:32.208Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:04:32.208Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:04:32.208Z] [LOG] 💰 GROSS CALCULATION for Kaushal Thambi:
[2025-10-23T05:04:32.208Z] [LOG]    Base Salary: 50000
[2025-10-23T05:04:32.208Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:04:32.209Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:04:32.209Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:32.209Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:04:32.209Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:32.210Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:04:32.210Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:32.487Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:04:32.487Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:32.487Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:04:32.487Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:04:32.488Z] [LOG]    Actual Earned Base: Rs.4488.31
[2025-10-23T05:04:32.488Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:04:32.488Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:04:32.488Z] [LOG]    = Gross Salary: Rs.4488.31
[2025-10-23T05:04:32.489Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:04:32.489Z] [LOG]    Attendance Shortfall (Info): Rs.29999.51
[2025-10-23T05:04:32.489Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:04:32.490Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:32.490Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:04:32.490Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:04:32.490Z] [LOG]    Gross Salary: Rs.4488.31
[2025-10-23T05:04:32.491Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:04:32.491Z] [LOG]    = NET SALARY: Rs.4488.31
[2025-10-23T05:04:32.713Z] [LOG] 
📝 Components to save:
[2025-10-23T05:04:32.713Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:04:32.713Z] [LOG]    Deduction components: 1
[2025-10-23T05:04:32.714Z] [LOG] Creating components for record 21f4ee08-8518-4d9b-848b-aa7528975739: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:04:32.714Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 4488.31488475
}
[2025-10-23T05:04:32.913Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:04:33.171Z] [LOG] Created payroll_record_component: c1fb1eea-ae12-47a1-b490-989c71e8bd9a for Base Salary
[2025-10-23T05:04:33.172Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 29999.505000000005
}
[2025-10-23T05:04:33.457Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:04:33.660Z] [LOG] Created payroll_record_component: 4bde7a9e-9815-4b89-887c-eb8a01eac243 for Attendance Shortfall (Info)
[2025-10-23T05:04:34.173Z] [LOG] ✅ Financial balances updated successfully for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-23T05:04:34.173Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:04:34.174Z] [LOG] 
======================================================================
[2025-10-23T05:04:34.174Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Kaushal Thambi
[2025-10-23T05:04:34.174Z] [LOG] ======================================================================
[2025-10-23T05:04:34.175Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:04:34.175Z] [LOG]    Actual Earned Base (Attendance-based): Rs.4488.31
[2025-10-23T05:04:34.175Z] [LOG]    Attendance Shortfall: Rs.29999.51
[2025-10-23T05:04:34.175Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:34.176Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:34.176Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:04:34.176Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:34.176Z] [LOG]    GROSS SALARY: Rs.4488.31
[2025-10-23T05:04:34.176Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:34.176Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:04:34.177Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:04:34.177Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:04:34.177Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:04:34.177Z] [LOG]       - Attendance Shortfall (Info): Rs.29999.51
[2025-10-23T05:04:34.177Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:34.177Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:34.178Z] [LOG]    NET SALARY: Rs.4488.31
[2025-10-23T05:04:34.178Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:04:34.178Z] [LOG] ======================================================================

[2025-10-23T05:04:34.179Z] [LOG] ✅ Kaushal Thambi: Calculation completed successfully
[2025-10-23T05:04:34.179Z] [LOG] 📊 Progress: 9/34 (26.5%)
[2025-10-23T05:04:34.179Z] [LOG] 
🧮 Processing: Faizan Faizan (EMP000003)
[2025-10-23T05:04:34.179Z] [LOG] 📋 Record ID: 44d1e2b7-4865-48c0-9da0-2c5b4119ce5c
[2025-10-23T05:04:34.180Z] [LOG] 
======================================================================
[2025-10-23T05:04:34.180Z] [LOG] 🧮 CALCULATING PAYROLL: Faizan Faizan (EMP000003)
[2025-10-23T05:04:34.180Z] [LOG] ======================================================================
[2025-10-23T05:04:35.107Z] [LOG] 🔍 Component filtering for employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-23T05:04:35.108Z] [LOG]    Total components: 13
[2025-10-23T05:04:35.108Z] [LOG]    Applicable components: 13
[2025-10-23T05:04:35.108Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-23T05:04:36.933Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:04:36.933Z] [LOG] 🔄 Processing financial records for employee 0143a057-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:04:37.181Z] [LOG] 📊 Found 0 active loans for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:37.378Z] [LOG] 📊 Found 0 active advances for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:37.574Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:37.575Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:04:37.576Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:04:37.778Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:04:37.778Z] [LOG]    Employee ID: 0143a057-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:37.778Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:04:37.778Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:04:37.779Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T05:04:38.053Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:04:38.054Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T05:04:38.054Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T05:04:38.054Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T05:04:38.054Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:04:38.054Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:04:38.055Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:04:38.950Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:04:38.951Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:04:39.161Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:04:39.161Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:04:39.162Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:04:39.162Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:04:39.162Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:04:39.163Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:04:39.163Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:04:39.163Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:04:39.366Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:04:39.367Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:04:39.367Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:04:39.367Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:04:39.565Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:04:39.565Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:04:39.565Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:04:39.566Z] [LOG]       Current Time: 10:34:39
[2025-10-23T05:04:39.567Z] [LOG]       Expected Hours (scheduled → now): 2.08h
[2025-10-23T05:04:39.567Z] [LOG]       Actual Hours (check-in → now): 2.08h
[2025-10-23T05:04:39.567Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:04:39.568Z] [LOG]       Weekday: 121.08h
[2025-10-23T05:04:39.568Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:04:39.568Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:39.569Z] [LOG]       Total Expected: 134.58h
[2025-10-23T05:04:39.569Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:04:39.569Z] [LOG]       Weekday: 27.58h (includes 2.08h live)
[2025-10-23T05:04:39.569Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:04:39.569Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:39.569Z] [LOG]       Total Actual: 32.08h
[2025-10-23T05:04:39.569Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:04:39.569Z] [LOG]       Weekday: 121.08h × Rs.235.29 = Rs.28488.36
[2025-10-23T05:04:39.570Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T05:04:39.570Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:39.570Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:39.570Z] [LOG]       Total Expected Earned: Rs.34488.30
[2025-10-23T05:04:39.570Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:04:39.570Z] [LOG]       Weekday: 27.58h × Rs.235.29 = Rs.6488.75
[2025-10-23T05:04:39.570Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T05:04:39.570Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:39.571Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:39.571Z] [LOG]       Total Actual Earned: Rs.8488.73
[2025-10-23T05:04:39.571Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:04:39.571Z] [LOG]       Calculated At: Oct 23, 2025, 10:34:39
[2025-10-23T05:04:39.572Z] [LOG]       Expected Earned (until NOW): Rs.34488.30
[2025-10-23T05:04:39.572Z] [LOG]       Actual Earned (until NOW): Rs.8488.73
[2025-10-23T05:04:39.572Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:39.573Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T05:04:39.573Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:04:39.573Z] [LOG]       📉 Shortfall: 102.50 hours (75.39% of expected)
[2025-10-23T05:04:39.574Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:04:39.574Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:04:39.575Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:04:39.575Z] [LOG]    Actual Earned Base: Rs.8488.73
[2025-10-23T05:04:39.575Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:04:39.576Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:04:39.576Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:04:39.576Z] [LOG]    Gross Salary: 8488.7268371
[2025-10-23T05:04:39.576Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:04:39.576Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:04:39.577Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:39.577Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:04:39.577Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:39.577Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:04:39.577Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:39.580Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:04:39.580Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:39.581Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:04:39.581Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:39.583Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:04:39.583Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:39.583Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:04:39.583Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:39.583Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:04:39.583Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:39.583Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:04:39.583Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:39.584Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:04:39.584Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:39.584Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:04:39.585Z] [LOG]    EPF/ETF calculated on: Rs.8488.73
[2025-10-23T05:04:39.585Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:04:39.585Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:04:39.586Z] [LOG] 💰 GROSS CALCULATION for Faizan Faizan:
[2025-10-23T05:04:39.586Z] [LOG]    Base Salary: 50000
[2025-10-23T05:04:39.586Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:04:39.586Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:04:39.586Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:39.586Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:04:39.587Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:39.587Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:04:39.587Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:39.800Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:04:39.801Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:39.801Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:04:39.801Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:04:39.801Z] [LOG]    Actual Earned Base: Rs.8488.73
[2025-10-23T05:04:39.802Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:04:39.802Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:04:39.802Z] [LOG]    = Gross Salary: Rs.8488.73
[2025-10-23T05:04:39.802Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:04:39.802Z] [LOG]    Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:04:39.803Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:04:39.803Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:39.803Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:04:39.803Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:04:39.804Z] [LOG]    Gross Salary: Rs.8488.73
[2025-10-23T05:04:39.804Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:04:39.804Z] [LOG]    = NET SALARY: Rs.8488.73
[2025-10-23T05:04:40.001Z] [LOG] 
📝 Components to save:
[2025-10-23T05:04:40.002Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:04:40.002Z] [LOG]    Deduction components: 1
[2025-10-23T05:04:40.002Z] [LOG] Creating components for record 44d1e2b7-4865-48c0-9da0-2c5b4119ce5c: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:04:40.003Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 8488.7268371
}
[2025-10-23T05:04:40.200Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:04:40.396Z] [LOG] Created payroll_record_component: 94ff1754-7de9-414d-a4c6-4a8f740c1ca0 for Base Salary
[2025-10-23T05:04:40.397Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 25999.575
}
[2025-10-23T05:04:40.601Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:04:40.818Z] [LOG] Created payroll_record_component: 052d9c7b-64db-4db2-a6a5-c5ec23005cc1 for Attendance Shortfall (Info)
[2025-10-23T05:04:41.219Z] [LOG] ✅ Financial balances updated successfully for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:41.219Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:04:41.220Z] [LOG] 
======================================================================
[2025-10-23T05:04:41.220Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Faizan Faizan
[2025-10-23T05:04:41.221Z] [LOG] ======================================================================
[2025-10-23T05:04:41.221Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:04:41.221Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8488.73
[2025-10-23T05:04:41.222Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:04:41.222Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:41.222Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:41.223Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:04:41.223Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:41.223Z] [LOG]    GROSS SALARY: Rs.8488.73
[2025-10-23T05:04:41.224Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:41.224Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:04:41.224Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:04:41.225Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:04:41.225Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:04:41.225Z] [LOG]       - Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:04:41.226Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:41.226Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:41.226Z] [LOG]    NET SALARY: Rs.8488.73
[2025-10-23T05:04:41.226Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:04:41.227Z] [LOG] ======================================================================

[2025-10-23T05:04:41.227Z] [LOG] ✅ Faizan Faizan: Calculation completed successfully
[2025-10-23T05:04:41.227Z] [LOG] 📊 Progress: 10/34 (29.4%)
[2025-10-23T05:04:41.228Z] [LOG] 
🧮 Processing: Maryam null (EMP000035)
[2025-10-23T05:04:41.228Z] [LOG] 📋 Record ID: 515f4c17-7a99-4d55-9d2c-c6bb49be29a3
[2025-10-23T05:04:41.228Z] [LOG] 
======================================================================
[2025-10-23T05:04:41.229Z] [LOG] 🧮 CALCULATING PAYROLL: Maryam null (EMP000035)
[2025-10-23T05:04:41.229Z] [LOG] ======================================================================
[2025-10-23T05:04:42.095Z] [LOG] 🔍 Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-23T05:04:42.095Z] [LOG]    Total components: 13
[2025-10-23T05:04:42.095Z] [LOG]    Applicable components: 13
[2025-10-23T05:04:42.096Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-23T05:04:43.378Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:04:43.378Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:04:43.579Z] [LOG] 📊 Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:43.779Z] [LOG] 📊 Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:44.054Z] [LOG] 📊 Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:44.055Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:04:44.055Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:04:44.256Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:04:44.257Z] [LOG]    Employee ID: 01440221-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:44.257Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:04:44.257Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:04:44.257Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-23T05:04:44.462Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:04:44.462Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-23T05:04:44.462Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-23T05:04:44.462Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-23T05:04:44.462Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:04:44.462Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:04:44.463Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:04:45.138Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:04:45.139Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:04:45.383Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:04:45.383Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:04:45.383Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:04:45.383Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:04:45.384Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:04:45.384Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:04:45.384Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:04:45.384Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:04:45.579Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:04:45.579Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:04:45.579Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:04:45.579Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:04:45.781Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:04:45.781Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:04:45.781Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:04:45.782Z] [LOG]       Current Time: 10:34:45
[2025-10-23T05:04:45.782Z] [LOG]       Expected Hours (scheduled → now): 2.08h
[2025-10-23T05:04:45.782Z] [LOG]       Actual Hours (check-in → now): 2.08h
[2025-10-23T05:04:45.782Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:04:45.782Z] [LOG]       Weekday: 121.08h
[2025-10-23T05:04:45.783Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:04:45.783Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:45.783Z] [LOG]       Total Expected: 134.58h
[2025-10-23T05:04:45.783Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:04:45.783Z] [LOG]       Weekday: 27.58h (includes 2.08h live)
[2025-10-23T05:04:45.783Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:04:45.784Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:45.784Z] [LOG]       Total Actual: 32.08h
[2025-10-23T05:04:45.784Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:04:45.784Z] [LOG]       Weekday: 121.08h × Rs.188.24 = Rs.22791.98
[2025-10-23T05:04:45.785Z] [LOG]       Saturday: 13.50h × Rs.355.56 = Rs.4800.06
[2025-10-23T05:04:45.785Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:45.785Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:45.785Z] [LOG]       Total Expected Earned: Rs.27592.04
[2025-10-23T05:04:45.785Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:04:45.785Z] [LOG]       Weekday: 27.58h × Rs.188.24 = Rs.5191.54
[2025-10-23T05:04:45.785Z] [LOG]       Saturday: 4.50h × Rs.355.56 = Rs.1600.02
[2025-10-23T05:04:45.785Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:45.786Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:45.786Z] [LOG]       Total Actual Earned: Rs.6791.56
[2025-10-23T05:04:45.786Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:04:45.786Z] [LOG]       Calculated At: Oct 23, 2025, 10:34:45
[2025-10-23T05:04:45.786Z] [LOG]       Expected Earned (until NOW): Rs.27592.04
[2025-10-23T05:04:45.786Z] [LOG]       Actual Earned (until NOW): Rs.6791.56
[2025-10-23T05:04:45.787Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:45.787Z] [LOG]       Attendance Deduction: Rs.20800.48
[2025-10-23T05:04:45.787Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:04:45.787Z] [LOG]       📉 Shortfall: 102.50 hours (75.39% of expected)
[2025-10-23T05:04:45.787Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:04:45.788Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:04:45.788Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-23T05:04:45.788Z] [LOG]    Actual Earned Base: Rs.6791.56
[2025-10-23T05:04:45.788Z] [LOG]    Attendance Shortfall: Rs.20800.48
[2025-10-23T05:04:45.788Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:04:45.789Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:04:45.789Z] [LOG]    Gross Salary: 6791.563170955556
[2025-10-23T05:04:45.789Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:04:45.789Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:04:45.789Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:45.790Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:04:45.790Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:45.790Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:04:45.790Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:45.791Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:04:45.791Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:45.791Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:04:45.791Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:45.791Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:04:45.791Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:45.793Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:04:45.793Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:45.794Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:04:45.794Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:45.794Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:04:45.794Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:45.794Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:04:45.795Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:45.795Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:04:45.795Z] [LOG]    EPF/ETF calculated on: Rs.6791.56
[2025-10-23T05:04:45.796Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:04:45.796Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:04:45.796Z] [LOG] 💰 GROSS CALCULATION for Maryam null:
[2025-10-23T05:04:45.797Z] [LOG]    Base Salary: 40000
[2025-10-23T05:04:45.797Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:04:45.797Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:04:45.797Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:45.798Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:04:45.798Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:45.798Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:04:45.798Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:46.012Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:04:46.013Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:46.013Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:04:46.013Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:04:46.013Z] [LOG]    Actual Earned Base: Rs.6791.56
[2025-10-23T05:04:46.013Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:04:46.014Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:04:46.014Z] [LOG]    = Gross Salary: Rs.6791.56
[2025-10-23T05:04:46.014Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:04:46.014Z] [LOG]    Attendance Shortfall (Info): Rs.20800.48
[2025-10-23T05:04:46.015Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:04:46.015Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:46.015Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:04:46.015Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:04:46.016Z] [LOG]    Gross Salary: Rs.6791.56
[2025-10-23T05:04:46.016Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:04:46.016Z] [LOG]    = NET SALARY: Rs.6791.56
[2025-10-23T05:04:46.236Z] [LOG] 
📝 Components to save:
[2025-10-23T05:04:46.237Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:04:46.237Z] [LOG]    Deduction components: 1
[2025-10-23T05:04:46.237Z] [LOG] Creating components for record 515f4c17-7a99-4d55-9d2c-c6bb49be29a3: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:04:46.238Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 6791.563170955556
}
[2025-10-23T05:04:46.457Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:04:46.666Z] [LOG] Created payroll_record_component: 0884b583-c254-4162-971a-7fdfff375b9a for Base Salary
[2025-10-23T05:04:46.666Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 20800.480000000003
}
[2025-10-23T05:04:46.859Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:04:47.056Z] [LOG] Created payroll_record_component: 109f448c-2c2a-4fc9-abac-0f71d12e5a26 for Attendance Shortfall (Info)
[2025-10-23T05:04:47.464Z] [LOG] ✅ Financial balances updated successfully for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:47.465Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:04:47.465Z] [LOG] 
======================================================================
[2025-10-23T05:04:47.465Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Maryam null
[2025-10-23T05:04:47.465Z] [LOG] ======================================================================
[2025-10-23T05:04:47.466Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-23T05:04:47.466Z] [LOG]    Actual Earned Base (Attendance-based): Rs.6791.56
[2025-10-23T05:04:47.466Z] [LOG]    Attendance Shortfall: Rs.20800.48
[2025-10-23T05:04:47.467Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:47.467Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:47.467Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:04:47.468Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:47.468Z] [LOG]    GROSS SALARY: Rs.6791.56
[2025-10-23T05:04:47.468Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:47.469Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:04:47.469Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:04:47.469Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:04:47.469Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:04:47.469Z] [LOG]       - Attendance Shortfall (Info): Rs.20800.48
[2025-10-23T05:04:47.470Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:47.470Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:47.470Z] [LOG]    NET SALARY: Rs.6791.56
[2025-10-23T05:04:47.470Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:04:47.471Z] [LOG] ======================================================================

[2025-10-23T05:04:47.471Z] [LOG] ✅ Maryam null: Calculation completed successfully
[2025-10-23T05:04:47.471Z] [LOG] 📊 Progress: 11/34 (32.4%)
[2025-10-23T05:04:47.471Z] [LOG] 
🧮 Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-23T05:04:47.472Z] [LOG] 📋 Record ID: 56a19b59-d751-4cb5-8420-535dbf0200e4
[2025-10-23T05:04:47.472Z] [LOG] 
======================================================================
[2025-10-23T05:04:47.472Z] [LOG] 🧮 CALCULATING PAYROLL: Viruna Damsiha Cooray null (EMP000038)
[2025-10-23T05:04:47.473Z] [LOG] ======================================================================
[2025-10-23T05:04:48.340Z] [LOG] 🔍 Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-23T05:04:48.340Z] [LOG]    Total components: 13
[2025-10-23T05:04:48.340Z] [LOG]    Applicable components: 13
[2025-10-23T05:04:48.340Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T05:04:49.787Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:04:49.788Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:04:49.991Z] [LOG] 📊 Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:50.220Z] [LOG] 📊 Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:50.416Z] [LOG] 📊 Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:50.416Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:04:50.417Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:04:50.609Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:04:50.609Z] [LOG]    Employee ID: 01441633-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:50.609Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:04:50.610Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:04:50.610Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T05:04:50.810Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:04:50.810Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T05:04:50.811Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T05:04:50.811Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T05:04:50.811Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:04:50.811Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:04:50.812Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:04:51.425Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:04:51.426Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:04:51.619Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:04:51.619Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:04:51.620Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:04:51.620Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:04:51.620Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:04:51.621Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:04:51.621Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:04:51.621Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:04:51.854Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:04:51.854Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:04:51.854Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:04:51.855Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:04:52.098Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:04:52.098Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:04:52.099Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:04:52.100Z] [LOG]       Current Time: 10:34:52
[2025-10-23T05:04:52.100Z] [LOG]       Expected Hours (scheduled → now): 2.08h
[2025-10-23T05:04:52.100Z] [LOG]       Actual Hours (check-in → now): 2.08h
[2025-10-23T05:04:52.101Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:04:52.101Z] [LOG]       Weekday: 121.08h
[2025-10-23T05:04:52.101Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:04:52.102Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:52.102Z] [LOG]       Total Expected: 134.58h
[2025-10-23T05:04:52.102Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:04:52.102Z] [LOG]       Weekday: 27.58h (includes 2.08h live)
[2025-10-23T05:04:52.102Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:04:52.103Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:52.103Z] [LOG]       Total Actual: 32.08h
[2025-10-23T05:04:52.103Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:04:52.103Z] [LOG]       Weekday: 121.08h × Rs.235.29 = Rs.28489.18
[2025-10-23T05:04:52.103Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T05:04:52.103Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:52.104Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:52.104Z] [LOG]       Total Expected Earned: Rs.34489.12
[2025-10-23T05:04:52.104Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:04:52.104Z] [LOG]       Weekday: 27.58h × Rs.235.29 = Rs.6489.57
[2025-10-23T05:04:52.105Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T05:04:52.105Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:52.105Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:52.106Z] [LOG]       Total Actual Earned: Rs.8489.55
[2025-10-23T05:04:52.106Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:04:52.107Z] [LOG]       Calculated At: Oct 23, 2025, 10:34:52
[2025-10-23T05:04:52.107Z] [LOG]       Expected Earned (until NOW): Rs.34489.12
[2025-10-23T05:04:52.107Z] [LOG]       Actual Earned (until NOW): Rs.8489.55
[2025-10-23T05:04:52.108Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:52.108Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T05:04:52.108Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:04:52.108Z] [LOG]       📉 Shortfall: 102.50 hours (75.38% of expected)
[2025-10-23T05:04:52.109Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:04:52.109Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:04:52.109Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:04:52.110Z] [LOG]    Actual Earned Base: Rs.8489.55
[2025-10-23T05:04:52.110Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:04:52.111Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:04:52.111Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:04:52.112Z] [LOG]    Gross Salary: 8489.54603845
[2025-10-23T05:04:52.112Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:04:52.112Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:04:52.113Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:52.113Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:04:52.113Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:52.113Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:04:52.114Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:52.114Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:04:52.114Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:52.114Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:04:52.115Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:52.115Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:04:52.115Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:52.115Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:04:52.116Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:52.116Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:04:52.116Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:52.117Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:04:52.117Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:52.117Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:04:52.118Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:52.118Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:04:52.118Z] [LOG]    EPF/ETF calculated on: Rs.8489.55
[2025-10-23T05:04:52.118Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:04:52.119Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:04:52.119Z] [LOG] 💰 GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-23T05:04:52.119Z] [LOG]    Base Salary: 50000
[2025-10-23T05:04:52.119Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:04:52.119Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:04:52.119Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:52.120Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:04:52.120Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:52.120Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:04:52.120Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:52.360Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:04:52.361Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:52.361Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:04:52.362Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:04:52.362Z] [LOG]    Actual Earned Base: Rs.8489.55
[2025-10-23T05:04:52.362Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:04:52.362Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:04:52.363Z] [LOG]    = Gross Salary: Rs.8489.55
[2025-10-23T05:04:52.363Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:04:52.363Z] [LOG]    Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:04:52.364Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:04:52.364Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:52.364Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:04:52.364Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:04:52.365Z] [LOG]    Gross Salary: Rs.8489.55
[2025-10-23T05:04:52.365Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:04:52.365Z] [LOG]    = NET SALARY: Rs.8489.55
[2025-10-23T05:04:52.590Z] [LOG] 
📝 Components to save:
[2025-10-23T05:04:52.591Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:04:52.591Z] [LOG]    Deduction components: 1
[2025-10-23T05:04:52.591Z] [LOG] Creating components for record 56a19b59-d751-4cb5-8420-535dbf0200e4: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:04:52.592Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 8489.54603845
}
[2025-10-23T05:04:52.822Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:04:53.063Z] [LOG] Created payroll_record_component: 3189b698-d100-4b90-a8b8-31661aa61914 for Base Salary
[2025-10-23T05:04:53.063Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 25999.575
}
[2025-10-23T05:04:53.256Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:04:53.460Z] [LOG] Created payroll_record_component: 13bdddb4-5451-4c3b-979f-1a45d5594e3c for Attendance Shortfall (Info)
[2025-10-23T05:04:53.958Z] [LOG] ✅ Financial balances updated successfully for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:53.959Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:04:53.959Z] [LOG] 
======================================================================
[2025-10-23T05:04:53.959Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Viruna Damsiha Cooray null
[2025-10-23T05:04:53.960Z] [LOG] ======================================================================
[2025-10-23T05:04:53.960Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:04:53.960Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8489.55
[2025-10-23T05:04:53.960Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:04:53.961Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:53.961Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:53.961Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:04:53.961Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:53.962Z] [LOG]    GROSS SALARY: Rs.8489.55
[2025-10-23T05:04:53.962Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:53.962Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:04:53.963Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:04:53.963Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:04:53.963Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:04:53.964Z] [LOG]       - Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:04:53.964Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:53.964Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:04:53.965Z] [LOG]    NET SALARY: Rs.8489.55
[2025-10-23T05:04:53.965Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:04:53.965Z] [LOG] ======================================================================

[2025-10-23T05:04:53.965Z] [LOG] ✅ Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-23T05:04:53.966Z] [LOG] 📊 Progress: 12/34 (35.3%)
[2025-10-23T05:04:53.966Z] [LOG] 
🧮 Processing: Shandeep null (EMP000034)
[2025-10-23T05:04:53.966Z] [LOG] 📋 Record ID: 5f370ea9-d6cf-4783-b058-e3a546ba637c
[2025-10-23T05:04:53.967Z] [LOG] 
======================================================================
[2025-10-23T05:04:53.967Z] [LOG] 🧮 CALCULATING PAYROLL: Shandeep null (EMP000034)
[2025-10-23T05:04:53.967Z] [LOG] ======================================================================
[2025-10-23T05:04:54.909Z] [LOG] 🔍 Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-23T05:04:54.909Z] [LOG]    Total components: 13
[2025-10-23T05:04:54.910Z] [LOG]    Applicable components: 13
[2025-10-23T05:04:54.910Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T05:04:56.392Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:04:56.393Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:04:56.660Z] [LOG] 📊 Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:56.864Z] [LOG] 📊 Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:57.060Z] [LOG] 📊 Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:57.061Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:04:57.061Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:04:57.317Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:04:57.318Z] [LOG]    Employee ID: 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-23T05:04:57.319Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:04:57.319Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:04:57.319Z] [LOG]    Base Salary (Full Month): Rs.80000.00
[2025-10-23T05:04:57.557Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:04:57.557Z] [LOG]       Daily Salary: Rs.3200.00
[2025-10-23T05:04:57.557Z] [LOG]       Weekday Hourly Rate: Rs.376.47
[2025-10-23T05:04:57.558Z] [LOG]       Saturday Hourly Rate: Rs.711.11
[2025-10-23T05:04:57.558Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:04:57.558Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:04:57.559Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:04:58.461Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:04:58.462Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:04:58.751Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:04:58.752Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:04:58.752Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:04:58.752Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:04:58.752Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:04:58.752Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:04:58.752Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:04:58.752Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:04:59.425Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:04:59.425Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:04:59.425Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:04:59.426Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:04:59.708Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:04:59.709Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:04:59.709Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:04:59.710Z] [LOG]       Current Time: 10:34:59
[2025-10-23T05:04:59.710Z] [LOG]       Expected Hours (scheduled → now): 2.08h
[2025-10-23T05:04:59.711Z] [LOG]       Actual Hours (check-in → now): 2.08h
[2025-10-23T05:04:59.711Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:04:59.711Z] [LOG]       Weekday: 121.08h
[2025-10-23T05:04:59.712Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:04:59.712Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:59.712Z] [LOG]       Total Expected: 134.58h
[2025-10-23T05:04:59.713Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:04:59.713Z] [LOG]       Weekday: 27.58h (includes 2.08h live)
[2025-10-23T05:04:59.713Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:04:59.713Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:04:59.714Z] [LOG]       Total Actual: 32.08h
[2025-10-23T05:04:59.714Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:04:59.714Z] [LOG]       Weekday: 121.08h × Rs.376.47 = Rs.45584.21
[2025-10-23T05:04:59.715Z] [LOG]       Saturday: 13.50h × Rs.711.11 = Rs.9599.99
[2025-10-23T05:04:59.715Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:59.715Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:59.715Z] [LOG]       Total Expected Earned: Rs.55184.20
[2025-10-23T05:04:59.716Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:04:59.716Z] [LOG]       Weekday: 27.58h × Rs.376.47 = Rs.10384.27
[2025-10-23T05:04:59.716Z] [LOG]       Saturday: 4.50h × Rs.711.11 = Rs.3199.99
[2025-10-23T05:04:59.716Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:04:59.717Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:59.717Z] [LOG]       Total Actual Earned: Rs.13584.26
[2025-10-23T05:04:59.717Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:04:59.718Z] [LOG]       Calculated At: Oct 23, 2025, 10:34:59
[2025-10-23T05:04:59.718Z] [LOG]       Expected Earned (until NOW): Rs.55184.20
[2025-10-23T05:04:59.718Z] [LOG]       Actual Earned (until NOW): Rs.13584.26
[2025-10-23T05:04:59.719Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:04:59.719Z] [LOG]       Attendance Deduction: Rs.41599.93
[2025-10-23T05:04:59.719Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:04:59.719Z] [LOG]       📉 Shortfall: 102.50 hours (75.38% of expected)
[2025-10-23T05:04:59.719Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:04:59.719Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:04:59.720Z] [LOG]    Base Salary (Full): Rs.80000.00
[2025-10-23T05:04:59.720Z] [LOG]    Actual Earned Base: Rs.13584.26
[2025-10-23T05:04:59.720Z] [LOG]    Attendance Shortfall: Rs.41599.93
[2025-10-23T05:04:59.720Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:04:59.720Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:04:59.720Z] [LOG]    Gross Salary: 13584.261964100002
[2025-10-23T05:04:59.721Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:04:59.721Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:04:59.721Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:59.721Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:04:59.721Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:59.722Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:04:59.722Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:59.722Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:04:59.722Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:59.722Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:04:59.723Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:59.723Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:04:59.723Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:59.724Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:04:59.724Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:59.724Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:04:59.725Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:59.725Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:04:59.725Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:59.725Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:04:59.726Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:59.726Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:04:59.726Z] [LOG]    EPF/ETF calculated on: Rs.13584.26
[2025-10-23T05:04:59.726Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:04:59.727Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:04:59.727Z] [LOG] 💰 GROSS CALCULATION for Shandeep null:
[2025-10-23T05:04:59.727Z] [LOG]    Base Salary: 80000
[2025-10-23T05:04:59.728Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:04:59.728Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:04:59.728Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:59.729Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:04:59.729Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:59.729Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:04:59.730Z] [LOG]    Fixed amount: 0
[2025-10-23T05:04:59.956Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:04:59.957Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:04:59.957Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:04:59.957Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:04:59.958Z] [LOG]    Actual Earned Base: Rs.13584.26
[2025-10-23T05:04:59.958Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:04:59.958Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:04:59.959Z] [LOG]    = Gross Salary: Rs.13584.26
[2025-10-23T05:04:59.959Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:04:59.959Z] [LOG]    Attendance Shortfall (Info): Rs.41599.93
[2025-10-23T05:04:59.959Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:04:59.960Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:04:59.960Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:04:59.960Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:04:59.961Z] [LOG]    Gross Salary: Rs.13584.26
[2025-10-23T05:04:59.961Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:04:59.961Z] [LOG]    = NET SALARY: Rs.13584.26
[2025-10-23T05:05:00.168Z] [LOG] 
📝 Components to save:
[2025-10-23T05:05:00.169Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:05:00.169Z] [LOG]    Deduction components: 1
[2025-10-23T05:05:00.169Z] [LOG] Creating components for record 5f370ea9-d6cf-4783-b058-e3a546ba637c: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:05:00.170Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 13584.261964100002
}
[2025-10-23T05:05:00.365Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:05:00.566Z] [LOG] Created payroll_record_component: fc32a0d6-4f53-44a5-be13-a5974631d7e4 for Base Salary
[2025-10-23T05:05:00.566Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 41599.935
}
[2025-10-23T05:05:00.771Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:05:00.975Z] [LOG] Created payroll_record_component: 7ab663a8-ef48-4b5f-b72c-3775e1c214b7 for Attendance Shortfall (Info)
[2025-10-23T05:05:01.360Z] [LOG] ✅ Financial balances updated successfully for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:01.361Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:05:01.361Z] [LOG] 
======================================================================
[2025-10-23T05:05:01.361Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Shandeep null
[2025-10-23T05:05:01.361Z] [LOG] ======================================================================
[2025-10-23T05:05:01.362Z] [LOG]    Base Salary (Full): Rs.80000.00
[2025-10-23T05:05:01.362Z] [LOG]    Actual Earned Base (Attendance-based): Rs.13584.26
[2025-10-23T05:05:01.362Z] [LOG]    Attendance Shortfall: Rs.41599.93
[2025-10-23T05:05:01.363Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:01.363Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:05:01.363Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:05:01.363Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:01.364Z] [LOG]    GROSS SALARY: Rs.13584.26
[2025-10-23T05:05:01.364Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:01.364Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:05:01.365Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:05:01.365Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:05:01.365Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:05:01.366Z] [LOG]       - Attendance Shortfall (Info): Rs.41599.93
[2025-10-23T05:05:01.366Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:05:01.366Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:01.366Z] [LOG]    NET SALARY: Rs.13584.26
[2025-10-23T05:05:01.367Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:05:01.367Z] [LOG] ======================================================================

[2025-10-23T05:05:01.367Z] [LOG] ✅ Shandeep null: Calculation completed successfully
[2025-10-23T05:05:01.368Z] [LOG] 📊 Progress: 13/34 (38.2%)
[2025-10-23T05:05:01.368Z] [LOG] 
🧮 Processing: Saruban null (EMP000007)
[2025-10-23T05:05:01.368Z] [LOG] 📋 Record ID: 60066d2a-9185-418f-8894-d793c35e66fa
[2025-10-23T05:05:01.369Z] [LOG] 
======================================================================
[2025-10-23T05:05:01.369Z] [LOG] 🧮 CALCULATING PAYROLL: Saruban null (EMP000007)
[2025-10-23T05:05:01.369Z] [LOG] ======================================================================
[2025-10-23T05:05:02.264Z] [LOG] 🔍 Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-23T05:05:02.265Z] [LOG]    Total components: 13
[2025-10-23T05:05:02.265Z] [LOG]    Applicable components: 13
[2025-10-23T05:05:02.265Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T05:05:03.859Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:05:03.860Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:05:04.107Z] [LOG] 📊 Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:04.347Z] [LOG] 📊 Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:04.579Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:04.579Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:05:04.580Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:05:04.827Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:05:04.827Z] [LOG]    Employee ID: 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:04.828Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:05:04.828Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:05:04.828Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-23T05:05:05.060Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:05:05.060Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-23T05:05:05.061Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-23T05:05:05.061Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-23T05:05:05.061Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:05:05.061Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:05:05.062Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:05:05.833Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:05:05.834Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:05:06.099Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:05:06.099Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:05:06.100Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:05:06.100Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:05:06.100Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:05:06.101Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:05:06.101Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:05:06.101Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:05:06.313Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:05:06.314Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:05:06.314Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:05:06.314Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:05:06.552Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:05:06.552Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:05:06.553Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:05:06.553Z] [LOG]       Current Time: 10:35:06
[2025-10-23T05:05:06.554Z] [LOG]       Expected Hours (scheduled → now): 2.09h
[2025-10-23T05:05:06.554Z] [LOG]       Actual Hours (check-in → now): 2.09h
[2025-10-23T05:05:06.554Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:05:06.554Z] [LOG]       Weekday: 121.09h
[2025-10-23T05:05:06.555Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:05:06.555Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:05:06.555Z] [LOG]       Total Expected: 134.59h
[2025-10-23T05:05:06.555Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:05:06.556Z] [LOG]       Weekday: 27.59h (includes 2.09h live)
[2025-10-23T05:05:06.556Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:05:06.556Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:05:06.556Z] [LOG]       Total Actual: 32.09h
[2025-10-23T05:05:06.557Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:05:06.557Z] [LOG]       Weekday: 121.09h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:06.557Z] [LOG]       Saturday: 13.50h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:06.557Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:06.558Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:06.558Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-23T05:05:06.558Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:05:06.558Z] [LOG]       Weekday: 27.59h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:06.559Z] [LOG]       Saturday: 4.50h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:06.559Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:06.559Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:06.560Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-23T05:05:06.560Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:05:06.561Z] [LOG]       Calculated At: Oct 23, 2025, 10:35:06
[2025-10-23T05:05:06.561Z] [LOG]       Expected Earned (until NOW): Rs.0.00
[2025-10-23T05:05:06.562Z] [LOG]       Actual Earned (until NOW): Rs.0.00
[2025-10-23T05:05:06.562Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:06.562Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-23T05:05:06.562Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:05:06.563Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-23T05:05:06.563Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:05:06.563Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:05:06.564Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-23T05:05:06.564Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T05:05:06.564Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T05:05:06.564Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:05:06.565Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:05:06.565Z] [LOG]    Gross Salary: 0
[2025-10-23T05:05:06.566Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:05:06.566Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:05:06.567Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:06.567Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:05:06.567Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:06.568Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:05:06.568Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:06.568Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:05:06.569Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:06.569Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:05:06.569Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:06.569Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:05:06.569Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:06.570Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:05:06.570Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:06.570Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:05:06.570Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:06.571Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:05:06.571Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:06.571Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:05:06.572Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:06.572Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:05:06.572Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-23T05:05:06.573Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:05:06.573Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:05:06.573Z] [LOG] 💰 GROSS CALCULATION for Saruban null:
[2025-10-23T05:05:06.574Z] [LOG]    Base Salary: 0
[2025-10-23T05:05:06.574Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:05:06.574Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:05:06.575Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:06.575Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:05:06.576Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:06.576Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:05:06.576Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:07.102Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:05:07.103Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:05:07.103Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:05:07.103Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:05:07.103Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T05:05:07.104Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:05:07.104Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:05:07.104Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-23T05:05:07.104Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:05:07.105Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:05:07.105Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:05:07.105Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:05:07.105Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:05:07.106Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-23T05:05:07.106Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:05:07.107Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-23T05:05:07.324Z] [LOG] 
📝 Components to save:
[2025-10-23T05:05:07.324Z] [LOG]    Gross/Earnings components: 0
[2025-10-23T05:05:07.325Z] [LOG]    Deduction components: 0
[2025-10-23T05:05:07.325Z] [LOG] Creating components for record 60066d2a-9185-418f-8894-d793c35e66fa: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T05:05:07.772Z] [LOG] ✅ Financial balances updated successfully for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:07.773Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:05:07.773Z] [LOG] 
======================================================================
[2025-10-23T05:05:07.773Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saruban null
[2025-10-23T05:05:07.774Z] [LOG] ======================================================================
[2025-10-23T05:05:07.774Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-23T05:05:07.774Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-23T05:05:07.775Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T05:05:07.775Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:07.775Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:05:07.775Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:05:07.776Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:07.776Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-23T05:05:07.776Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:07.777Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:05:07.777Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:05:07.777Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:05:07.778Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:05:07.778Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-23T05:05:07.778Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:05:07.778Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:07.779Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-23T05:05:07.779Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:05:07.779Z] [LOG] ======================================================================

[2025-10-23T05:05:07.780Z] [LOG] ✅ Saruban null: Calculation completed successfully
[2025-10-23T05:05:07.780Z] [LOG] 📊 Progress: 14/34 (41.2%)
[2025-10-23T05:05:07.780Z] [LOG] 
🧮 Processing: Ishara null (EMP000011)
[2025-10-23T05:05:07.781Z] [LOG] 📋 Record ID: 6ea61512-993d-4f79-b56f-c6342b913715
[2025-10-23T05:05:07.781Z] [LOG] 
======================================================================
[2025-10-23T05:05:07.781Z] [LOG] 🧮 CALCULATING PAYROLL: Ishara null (EMP000011)
[2025-10-23T05:05:07.782Z] [LOG] ======================================================================
[2025-10-23T05:05:08.826Z] [LOG] 🔍 Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-23T05:05:08.827Z] [LOG]    Total components: 13
[2025-10-23T05:05:08.827Z] [LOG]    Applicable components: 13
[2025-10-23T05:05:08.828Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-23T05:05:10.701Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:05:10.701Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:05:10.958Z] [LOG] 📊 Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:11.243Z] [LOG] 📊 Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:11.538Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:11.539Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:05:11.539Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:05:11.771Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:05:11.772Z] [LOG]    Employee ID: 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:11.772Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:05:11.773Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:05:11.773Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T05:05:12.254Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:05:12.255Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T05:05:12.255Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T05:05:12.256Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T05:05:12.256Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:05:12.256Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:05:12.257Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:05:12.981Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:05:12.981Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:05:13.191Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:05:13.192Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:05:13.192Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:05:13.192Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:05:13.193Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:05:13.193Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:05:13.193Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:05:13.193Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:05:13.459Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:05:13.459Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:05:13.460Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:05:13.460Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:05:13.673Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:05:13.673Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:05:13.674Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:05:13.674Z] [LOG]       Current Time: 10:35:13
[2025-10-23T05:05:13.675Z] [LOG]       Expected Hours (scheduled → now): 2.09h
[2025-10-23T05:05:13.675Z] [LOG]       Actual Hours (check-in → now): 2.09h
[2025-10-23T05:05:13.675Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:05:13.676Z] [LOG]       Weekday: 121.09h
[2025-10-23T05:05:13.676Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:05:13.676Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:05:13.677Z] [LOG]       Total Expected: 134.59h
[2025-10-23T05:05:13.677Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:05:13.677Z] [LOG]       Weekday: 27.59h (includes 2.09h live)
[2025-10-23T05:05:13.678Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:05:13.678Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:05:13.678Z] [LOG]       Total Actual: 32.09h
[2025-10-23T05:05:13.679Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:05:13.679Z] [LOG]       Weekday: 121.09h × Rs.235.29 = Rs.28490.59
[2025-10-23T05:05:13.679Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T05:05:13.680Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:13.680Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:13.680Z] [LOG]       Total Expected Earned: Rs.34490.53
[2025-10-23T05:05:13.681Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:05:13.681Z] [LOG]       Weekday: 27.59h × Rs.235.29 = Rs.6490.98
[2025-10-23T05:05:13.681Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T05:05:13.681Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:13.682Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:13.682Z] [LOG]       Total Actual Earned: Rs.8490.96
[2025-10-23T05:05:13.683Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:05:13.683Z] [LOG]       Calculated At: Oct 23, 2025, 10:35:13
[2025-10-23T05:05:13.684Z] [LOG]       Expected Earned (until NOW): Rs.34490.53
[2025-10-23T05:05:13.684Z] [LOG]       Actual Earned (until NOW): Rs.8490.96
[2025-10-23T05:05:13.685Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:13.686Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T05:05:13.686Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:05:13.687Z] [LOG]       📉 Shortfall: 102.50 hours (75.38% of expected)
[2025-10-23T05:05:13.687Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:05:13.688Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:05:13.688Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:05:13.689Z] [LOG]    Actual Earned Base: Rs.8490.96
[2025-10-23T05:05:13.689Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T05:05:13.689Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:05:13.690Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:05:13.690Z] [LOG]    Gross Salary: 8490.956144491667
[2025-10-23T05:05:13.690Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:05:13.690Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:05:13.691Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:13.691Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:05:13.692Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:13.692Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:05:13.692Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:13.693Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:05:13.693Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:13.693Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:05:13.694Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:13.694Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:05:13.694Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:13.694Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:05:13.695Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:13.695Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:05:13.695Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:13.696Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:05:13.696Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:13.696Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:05:13.697Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:13.697Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:05:13.697Z] [LOG]    EPF/ETF calculated on: Rs.8490.96
[2025-10-23T05:05:13.698Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:05:13.698Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:05:13.698Z] [LOG] 💰 GROSS CALCULATION for Ishara null:
[2025-10-23T05:05:13.698Z] [LOG]    Base Salary: 50000
[2025-10-23T05:05:13.699Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:05:13.699Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:05:13.699Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:13.700Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:05:13.700Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:13.700Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:05:13.700Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:13.953Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:05:13.954Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:05:13.954Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:05:13.954Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:05:13.955Z] [LOG]    Actual Earned Base: Rs.8490.96
[2025-10-23T05:05:13.955Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:05:13.955Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:05:13.956Z] [LOG]    = Gross Salary: Rs.8490.96
[2025-10-23T05:05:13.956Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:05:13.956Z] [LOG]    Attendance Shortfall (Info): Rs.25999.57
[2025-10-23T05:05:13.957Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:05:13.957Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:05:13.957Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:05:13.957Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:05:13.958Z] [LOG]    Gross Salary: Rs.8490.96
[2025-10-23T05:05:13.958Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:05:13.958Z] [LOG]    = NET SALARY: Rs.8490.96
[2025-10-23T05:05:14.181Z] [LOG] 
📝 Components to save:
[2025-10-23T05:05:14.182Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:05:14.182Z] [LOG]    Deduction components: 1
[2025-10-23T05:05:14.183Z] [LOG] Creating components for record 6ea61512-993d-4f79-b56f-c6342b913715: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:05:14.184Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 8490.956144491667
}
[2025-10-23T05:05:14.418Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:05:14.678Z] [LOG] Created payroll_record_component: c0afc79a-b9e2-4c6a-8e2a-ebebe768cf5f for Base Salary
[2025-10-23T05:05:14.679Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 25999.574999999997
}
[2025-10-23T05:05:14.885Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:05:15.084Z] [LOG] Created payroll_record_component: 407e1fbd-1e9d-4265-a1b1-d4f4affc6015 for Attendance Shortfall (Info)
[2025-10-23T05:05:15.555Z] [LOG] ✅ Financial balances updated successfully for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:15.555Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:05:15.556Z] [LOG] 
======================================================================
[2025-10-23T05:05:15.556Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ishara null
[2025-10-23T05:05:15.556Z] [LOG] ======================================================================
[2025-10-23T05:05:15.556Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:05:15.557Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8490.96
[2025-10-23T05:05:15.557Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T05:05:15.557Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:15.558Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:05:15.558Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:05:15.558Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:15.558Z] [LOG]    GROSS SALARY: Rs.8490.96
[2025-10-23T05:05:15.559Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:15.559Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:05:15.559Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:05:15.560Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:05:15.560Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:05:15.560Z] [LOG]       - Attendance Shortfall (Info): Rs.25999.57
[2025-10-23T05:05:15.561Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:05:15.561Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:15.561Z] [LOG]    NET SALARY: Rs.8490.96
[2025-10-23T05:05:15.562Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:05:15.562Z] [LOG] ======================================================================

[2025-10-23T05:05:15.562Z] [LOG] ✅ Ishara null: Calculation completed successfully
[2025-10-23T05:05:15.563Z] [LOG] 📊 Progress: 15/34 (44.1%)
[2025-10-23T05:05:15.563Z] [LOG] 
🧮 Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-23T05:05:15.563Z] [LOG] 📋 Record ID: 6ff82100-48d8-4afb-9b63-39ddcb409b88
[2025-10-23T05:05:15.564Z] [LOG] 
======================================================================
[2025-10-23T05:05:15.564Z] [LOG] 🧮 CALCULATING PAYROLL: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-23T05:05:15.564Z] [LOG] ======================================================================
[2025-10-23T05:05:16.453Z] [LOG] 🔍 Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-23T05:05:16.453Z] [LOG]    Total components: 13
[2025-10-23T05:05:16.454Z] [LOG]    Applicable components: 13
[2025-10-23T05:05:16.454Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-23T05:05:18.202Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:05:18.203Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:05:18.399Z] [LOG] 📊 Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:18.616Z] [LOG] 📊 Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:18.824Z] [LOG] 📊 Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:18.825Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:05:18.825Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:05:19.025Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:05:19.026Z] [LOG]    Employee ID: 0144315c-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:19.026Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:05:19.027Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:05:19.027Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T05:05:19.219Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:05:19.220Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T05:05:19.220Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T05:05:19.220Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T05:05:19.221Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:05:19.221Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:05:19.221Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:05:19.903Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:05:19.903Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:05:20.114Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:05:20.115Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:05:20.115Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:05:20.115Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:05:20.116Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:05:20.116Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:05:20.116Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:05:20.116Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:05:20.358Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:05:20.359Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:05:20.359Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:05:20.359Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:05:20.561Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:05:20.561Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:05:20.562Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:05:20.563Z] [LOG]       Current Time: 10:35:20
[2025-10-23T05:05:20.563Z] [LOG]       Expected Hours (scheduled → now): 2.09h
[2025-10-23T05:05:20.563Z] [LOG]       Actual Hours (check-in → now): 2.09h
[2025-10-23T05:05:20.564Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:05:20.564Z] [LOG]       Weekday: 121.09h
[2025-10-23T05:05:20.564Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:05:20.565Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:05:20.565Z] [LOG]       Total Expected: 134.59h
[2025-10-23T05:05:20.565Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:05:20.565Z] [LOG]       Weekday: 27.59h (includes 2.09h live)
[2025-10-23T05:05:20.566Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:05:20.566Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:05:20.566Z] [LOG]       Total Actual: 32.09h
[2025-10-23T05:05:20.566Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:05:20.567Z] [LOG]       Weekday: 121.09h × Rs.235.29 = Rs.28491.04
[2025-10-23T05:05:20.567Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T05:05:20.567Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:20.568Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:20.569Z] [LOG]       Total Expected Earned: Rs.34490.98
[2025-10-23T05:05:20.569Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:05:20.569Z] [LOG]       Weekday: 27.59h × Rs.235.29 = Rs.6491.43
[2025-10-23T05:05:20.569Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T05:05:20.570Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:20.570Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:20.570Z] [LOG]       Total Actual Earned: Rs.8491.41
[2025-10-23T05:05:20.571Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:05:20.571Z] [LOG]       Calculated At: Oct 23, 2025, 10:35:20
[2025-10-23T05:05:20.571Z] [LOG]       Expected Earned (until NOW): Rs.34490.98
[2025-10-23T05:05:20.572Z] [LOG]       Actual Earned (until NOW): Rs.8491.41
[2025-10-23T05:05:20.572Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:20.572Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T05:05:20.572Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:05:20.573Z] [LOG]       📉 Shortfall: 102.50 hours (75.38% of expected)
[2025-10-23T05:05:20.573Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:05:20.573Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:05:20.574Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:05:20.574Z] [LOG]    Actual Earned Base: Rs.8491.41
[2025-10-23T05:05:20.574Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:05:20.575Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:05:20.575Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:05:20.575Z] [LOG]    Gross Salary: 8491.406332691666
[2025-10-23T05:05:20.575Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:05:20.576Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:05:20.576Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:20.576Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:05:20.577Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:20.577Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:05:20.577Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:20.577Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:05:20.578Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:20.578Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:05:20.578Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:20.578Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:05:20.579Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:20.579Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:05:20.579Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:20.580Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:05:20.580Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:20.580Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:05:20.581Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:20.581Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:05:20.581Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:20.581Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:05:20.582Z] [LOG]    EPF/ETF calculated on: Rs.8491.41
[2025-10-23T05:05:20.582Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:05:20.582Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:05:20.583Z] [LOG] 💰 GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-23T05:05:20.583Z] [LOG]    Base Salary: 50000
[2025-10-23T05:05:20.583Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:05:20.584Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:05:20.584Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:20.584Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:05:20.584Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:20.585Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:05:20.585Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:20.853Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:05:20.854Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:05:20.854Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:05:20.855Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:05:20.855Z] [LOG]    Actual Earned Base: Rs.8491.41
[2025-10-23T05:05:20.856Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:05:20.856Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:05:20.856Z] [LOG]    = Gross Salary: Rs.8491.41
[2025-10-23T05:05:20.857Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:05:20.857Z] [LOG]    Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:05:20.857Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:05:20.857Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:05:20.858Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:05:20.858Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:05:20.858Z] [LOG]    Gross Salary: Rs.8491.41
[2025-10-23T05:05:20.859Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:05:20.859Z] [LOG]    = NET SALARY: Rs.8491.41
[2025-10-23T05:05:21.075Z] [LOG] 
📝 Components to save:
[2025-10-23T05:05:21.075Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:05:21.077Z] [LOG]    Deduction components: 1
[2025-10-23T05:05:21.078Z] [LOG] Creating components for record 6ff82100-48d8-4afb-9b63-39ddcb409b88: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:05:21.078Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 8491.406332691666
}
[2025-10-23T05:05:21.281Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:05:21.482Z] [LOG] Created payroll_record_component: 643bf81e-d1bd-4186-b20a-6a6a60f9b957 for Base Salary
[2025-10-23T05:05:21.483Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 25999.575000000004
}
[2025-10-23T05:05:21.692Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:05:21.900Z] [LOG] Created payroll_record_component: ba75dc03-bb1a-4d67-9a7a-df05bdc941b4 for Attendance Shortfall (Info)
[2025-10-23T05:05:22.408Z] [LOG] ✅ Financial balances updated successfully for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:22.409Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:05:22.409Z] [LOG] 
======================================================================
[2025-10-23T05:05:22.410Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: G.M Supathala Sadaru Madhushan null
[2025-10-23T05:05:22.410Z] [LOG] ======================================================================
[2025-10-23T05:05:22.410Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:05:22.411Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8491.41
[2025-10-23T05:05:22.411Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:05:22.411Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:22.412Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:05:22.412Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:05:22.412Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:22.413Z] [LOG]    GROSS SALARY: Rs.8491.41
[2025-10-23T05:05:22.413Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:22.413Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:05:22.413Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:05:22.414Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:05:22.414Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:05:22.414Z] [LOG]       - Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:05:22.415Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:05:22.415Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:22.415Z] [LOG]    NET SALARY: Rs.8491.41
[2025-10-23T05:05:22.416Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:05:22.416Z] [LOG] ======================================================================

[2025-10-23T05:05:22.416Z] [LOG] ✅ G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-23T05:05:22.417Z] [LOG] 📊 Progress: 16/34 (47.1%)
[2025-10-23T05:05:22.417Z] [LOG] 
🧮 Processing: Ammaar Ilham (EMP000023)
[2025-10-23T05:05:22.418Z] [LOG] 📋 Record ID: 7238872b-1038-4dd8-a87b-d34ac03541b9
[2025-10-23T05:05:22.418Z] [LOG] 
======================================================================
[2025-10-23T05:05:22.419Z] [LOG] 🧮 CALCULATING PAYROLL: Ammaar Ilham (EMP000023)
[2025-10-23T05:05:22.419Z] [LOG] ======================================================================
[2025-10-23T05:05:23.306Z] [LOG] 🔍 Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-23T05:05:23.307Z] [LOG]    Total components: 13
[2025-10-23T05:05:23.307Z] [LOG]    Applicable components: 13
[2025-10-23T05:05:23.307Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T05:05:24.660Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:05:24.660Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:05:24.910Z] [LOG] 📊 Found 0 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:25.117Z] [LOG] 📊 Found 0 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:25.332Z] [LOG] 📊 Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:25.333Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:05:25.333Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:05:25.530Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:05:25.531Z] [LOG]    Employee ID: 0143de00-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:25.531Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:05:25.531Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:05:25.532Z] [LOG]    Base Salary (Full Month): Rs.70000.00
[2025-10-23T05:05:25.762Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:05:25.762Z] [LOG]       Daily Salary: Rs.2800.00
[2025-10-23T05:05:25.763Z] [LOG]       Weekday Hourly Rate: Rs.329.41
[2025-10-23T05:05:25.763Z] [LOG]       Saturday Hourly Rate: Rs.622.22
[2025-10-23T05:05:25.763Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:05:25.764Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:05:25.764Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:05:26.420Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:05:26.420Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:05:26.659Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:05:26.659Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:05:26.660Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:05:26.660Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:05:26.660Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:05:26.660Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:05:26.661Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:05:26.661Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:05:26.879Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:05:26.880Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:05:26.880Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:05:26.880Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:05:27.081Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:05:27.082Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:05:27.082Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:05:27.083Z] [LOG]       Current Time: 10:35:27
[2025-10-23T05:05:27.083Z] [LOG]       Expected Hours (scheduled → now): 2.09h
[2025-10-23T05:05:27.083Z] [LOG]       Actual Hours (check-in → now): 2.09h
[2025-10-23T05:05:27.084Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:05:27.084Z] [LOG]       Weekday: 121.09h
[2025-10-23T05:05:27.084Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:05:27.085Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:05:27.085Z] [LOG]       Total Expected: 134.59h
[2025-10-23T05:05:27.085Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:05:27.086Z] [LOG]       Weekday: 27.59h (includes 2.09h live)
[2025-10-23T05:05:27.086Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:05:27.086Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:05:27.087Z] [LOG]       Total Actual: 32.09h
[2025-10-23T05:05:27.087Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:05:27.087Z] [LOG]       Weekday: 121.09h × Rs.329.41 = Rs.39888.54
[2025-10-23T05:05:27.088Z] [LOG]       Saturday: 13.50h × Rs.622.22 = Rs.8399.97
[2025-10-23T05:05:27.088Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:27.089Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:27.089Z] [LOG]       Total Expected Earned: Rs.48288.51
[2025-10-23T05:05:27.089Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:05:27.090Z] [LOG]       Weekday: 27.59h × Rs.329.41 = Rs.9088.70
[2025-10-23T05:05:27.090Z] [LOG]       Saturday: 4.50h × Rs.622.22 = Rs.2799.99
[2025-10-23T05:05:27.090Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:27.091Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:27.091Z] [LOG]       Total Actual Earned: Rs.11888.69
[2025-10-23T05:05:27.092Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:05:27.092Z] [LOG]       Calculated At: Oct 23, 2025, 10:35:27
[2025-10-23T05:05:27.092Z] [LOG]       Expected Earned (until NOW): Rs.48288.51
[2025-10-23T05:05:27.092Z] [LOG]       Actual Earned (until NOW): Rs.11888.69
[2025-10-23T05:05:27.093Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:27.093Z] [LOG]       Attendance Deduction: Rs.36399.82
[2025-10-23T05:05:27.093Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:05:27.093Z] [LOG]       📉 Shortfall: 102.50 hours (75.38% of expected)
[2025-10-23T05:05:27.094Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:05:27.094Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:05:27.094Z] [LOG]    Base Salary (Full): Rs.70000.00
[2025-10-23T05:05:27.095Z] [LOG]    Actual Earned Base: Rs.11888.69
[2025-10-23T05:05:27.095Z] [LOG]    Attendance Shortfall: Rs.36399.82
[2025-10-23T05:05:27.095Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:05:27.096Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:05:27.097Z] [LOG]    Gross Salary: 11888.693820058334
[2025-10-23T05:05:27.097Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:05:27.098Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:05:27.098Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:27.098Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:05:27.099Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:27.099Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:05:27.099Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:27.099Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:05:27.100Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:27.100Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:05:27.100Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:27.101Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:05:27.101Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:27.101Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:05:27.102Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:27.102Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:05:27.102Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:27.102Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:05:27.102Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:27.103Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:05:27.103Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:27.103Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:05:27.103Z] [LOG]    EPF/ETF calculated on: Rs.11888.69
[2025-10-23T05:05:27.104Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:05:27.104Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:05:27.104Z] [LOG] 💰 GROSS CALCULATION for Ammaar Ilham:
[2025-10-23T05:05:27.105Z] [LOG]    Base Salary: 70000
[2025-10-23T05:05:27.105Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:05:27.105Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:05:27.106Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:27.106Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:05:27.106Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:27.107Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:05:27.107Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:27.496Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:05:27.497Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:05:27.497Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:05:27.498Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:05:27.498Z] [LOG]    Actual Earned Base: Rs.11888.69
[2025-10-23T05:05:27.498Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:05:27.499Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:05:27.499Z] [LOG]    = Gross Salary: Rs.11888.69
[2025-10-23T05:05:27.499Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:05:27.500Z] [LOG]    Attendance Shortfall (Info): Rs.36399.82
[2025-10-23T05:05:27.500Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:05:27.500Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:05:27.501Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:05:27.501Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:05:27.502Z] [LOG]    Gross Salary: Rs.11888.69
[2025-10-23T05:05:27.502Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:05:27.503Z] [LOG]    = NET SALARY: Rs.11888.69
[2025-10-23T05:05:27.728Z] [LOG] 
📝 Components to save:
[2025-10-23T05:05:27.729Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:05:27.729Z] [LOG]    Deduction components: 1
[2025-10-23T05:05:27.729Z] [LOG] Creating components for record 7238872b-1038-4dd8-a87b-d34ac03541b9: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:05:27.730Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11888.693820058334
}
[2025-10-23T05:05:27.940Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:05:28.178Z] [LOG] Created payroll_record_component: a7be09fe-ffee-46af-9089-a7dc83938e4c for Base Salary
[2025-10-23T05:05:28.179Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 36399.81500000001
}
[2025-10-23T05:05:28.449Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:05:28.819Z] [LOG] Created payroll_record_component: 8353a816-3e7b-4826-8a1f-22eb490ddbfd for Attendance Shortfall (Info)
[2025-10-23T05:05:29.267Z] [LOG] ✅ Financial balances updated successfully for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:29.268Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:05:29.269Z] [LOG] 
======================================================================
[2025-10-23T05:05:29.269Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ammaar Ilham
[2025-10-23T05:05:29.269Z] [LOG] ======================================================================
[2025-10-23T05:05:29.270Z] [LOG]    Base Salary (Full): Rs.70000.00
[2025-10-23T05:05:29.270Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11888.69
[2025-10-23T05:05:29.270Z] [LOG]    Attendance Shortfall: Rs.36399.82
[2025-10-23T05:05:29.271Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:29.271Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:05:29.271Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:05:29.272Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:29.272Z] [LOG]    GROSS SALARY: Rs.11888.69
[2025-10-23T05:05:29.272Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:29.273Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:05:29.273Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:05:29.273Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:05:29.274Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:05:29.274Z] [LOG]       - Attendance Shortfall (Info): Rs.36399.82
[2025-10-23T05:05:29.275Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:05:29.275Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:29.275Z] [LOG]    NET SALARY: Rs.11888.69
[2025-10-23T05:05:29.276Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:05:29.276Z] [LOG] ======================================================================

[2025-10-23T05:05:29.276Z] [LOG] ✅ Ammaar Ilham: Calculation completed successfully
[2025-10-23T05:05:29.277Z] [LOG] 📊 Progress: 17/34 (50.0%)
[2025-10-23T05:05:29.277Z] [LOG] 
🧮 Processing: Uthpala null (EMP000006)
[2025-10-23T05:05:29.277Z] [LOG] 📋 Record ID: 77bcdb26-d543-4224-8856-dcd469fb848b
[2025-10-23T05:05:29.278Z] [LOG] 
======================================================================
[2025-10-23T05:05:29.278Z] [LOG] 🧮 CALCULATING PAYROLL: Uthpala null (EMP000006)
[2025-10-23T05:05:29.278Z] [LOG] ======================================================================
[2025-10-23T05:05:30.387Z] [LOG] 🔍 Component filtering for employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-23T05:05:30.387Z] [LOG]    Total components: 13
[2025-10-23T05:05:30.387Z] [LOG]    Applicable components: 13
[2025-10-23T05:05:30.388Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-23T05:05:33.552Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:05:33.553Z] [LOG] 🔄 Processing financial records for employee 0143a539-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:05:34.336Z] [LOG] 📊 Found 0 active loans for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:34.594Z] [LOG] 📊 Found 0 active advances for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:34.861Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:34.861Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:05:34.861Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:05:35.069Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:05:35.069Z] [LOG]    Employee ID: 0143a539-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:35.069Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:05:35.070Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:05:35.070Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-23T05:05:35.313Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:05:35.314Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-23T05:05:35.314Z] [LOG]       Weekday Hourly Rate: Rs.500.00
[2025-10-23T05:05:35.314Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-23T05:05:35.315Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:05:35.315Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:05:35.315Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:05:35.991Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:05:35.991Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:05:36.185Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:05:36.186Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:05:36.186Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:05:36.186Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:05:36.186Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:05:36.186Z] [LOG]          2. 2025-10-15 (Weekday): 7.50h
[2025-10-23T05:05:36.187Z] [LOG]          3. 2025-10-16 (Weekday): 7.50h
[2025-10-23T05:05:36.187Z] [LOG]          4. 2025-10-22 (Weekday): 7.50h
[2025-10-23T05:05:36.385Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:05:36.385Z] [LOG]          Weekday: 22.50h
[2025-10-23T05:05:36.385Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:05:36.385Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:05:36.592Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:05:36.592Z] [LOG]       Scheduled Start: 09:30:00
[2025-10-23T05:05:36.592Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:05:36.593Z] [LOG]       Current Time: 10:35:36
[2025-10-23T05:05:36.593Z] [LOG]       Expected Hours (scheduled → now): 1.09h
[2025-10-23T05:05:36.593Z] [LOG]       Actual Hours (check-in → now): 2.09h
[2025-10-23T05:05:36.593Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:05:36.594Z] [LOG]       Weekday: 113.09h
[2025-10-23T05:05:36.594Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:05:36.594Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:05:36.594Z] [LOG]       Total Expected: 126.59h
[2025-10-23T05:05:36.594Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:05:36.594Z] [LOG]       Weekday: 24.59h (includes 2.09h live)
[2025-10-23T05:05:36.594Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:05:36.595Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:05:36.595Z] [LOG]       Total Actual: 29.09h
[2025-10-23T05:05:36.595Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:05:36.595Z] [LOG]       Weekday: 113.09h × Rs.500.00 = Rs.56546.75
[2025-10-23T05:05:36.595Z] [LOG]       Saturday: 13.50h × Rs.888.89 = Rs.12000.01
[2025-10-23T05:05:36.595Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:36.595Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:36.596Z] [LOG]       Total Expected Earned: Rs.68546.76
[2025-10-23T05:05:36.596Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:05:36.596Z] [LOG]       Weekday: 24.59h × Rs.500.00 = Rs.12296.75
[2025-10-23T05:05:36.596Z] [LOG]       Saturday: 4.50h × Rs.888.89 = Rs.4000.01
[2025-10-23T05:05:36.596Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:36.597Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:36.597Z] [LOG]       Total Actual Earned: Rs.16296.75
[2025-10-23T05:05:36.597Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:05:36.598Z] [LOG]       Calculated At: Oct 23, 2025, 10:35:36
[2025-10-23T05:05:36.598Z] [LOG]       Expected Earned (until NOW): Rs.68546.76
[2025-10-23T05:05:36.598Z] [LOG]       Actual Earned (until NOW): Rs.16296.75
[2025-10-23T05:05:36.598Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:36.599Z] [LOG]       Attendance Deduction: Rs.52250.01
[2025-10-23T05:05:36.599Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:05:36.599Z] [LOG]       📉 Shortfall: 97.50 hours (76.23% of expected)
[2025-10-23T05:05:36.600Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:05:36.600Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:05:36.600Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-23T05:05:36.600Z] [LOG]    Actual Earned Base: Rs.16296.75
[2025-10-23T05:05:36.601Z] [LOG]    Attendance Shortfall: Rs.52250.01
[2025-10-23T05:05:36.601Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:05:36.601Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:05:36.602Z] [LOG]    Gross Salary: 16296.753888888888
[2025-10-23T05:05:36.602Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:05:36.602Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:05:36.602Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:36.602Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:05:36.602Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:36.603Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:05:36.603Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:36.603Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:05:36.603Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:36.603Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:05:36.603Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:36.603Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:05:36.603Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:36.604Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:05:36.604Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:36.604Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:05:36.604Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:36.604Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:05:36.605Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:36.605Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:05:36.606Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:36.606Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:05:36.606Z] [LOG]    EPF/ETF calculated on: Rs.16296.75
[2025-10-23T05:05:36.606Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:05:36.607Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:05:36.607Z] [LOG] 💰 GROSS CALCULATION for Uthpala null:
[2025-10-23T05:05:36.607Z] [LOG]    Base Salary: 100000
[2025-10-23T05:05:36.607Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:05:36.607Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:05:36.607Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:36.608Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:05:36.608Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:36.608Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:05:36.608Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:36.856Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:05:36.856Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:05:36.856Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:05:36.857Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:05:36.857Z] [LOG]    Actual Earned Base: Rs.16296.75
[2025-10-23T05:05:36.857Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:05:36.857Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:05:36.857Z] [LOG]    = Gross Salary: Rs.16296.75
[2025-10-23T05:05:36.857Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:05:36.857Z] [LOG]    Attendance Shortfall (Info): Rs.52250.01
[2025-10-23T05:05:36.858Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:05:36.858Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:05:36.858Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:05:36.858Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:05:36.858Z] [LOG]    Gross Salary: Rs.16296.75
[2025-10-23T05:05:36.859Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:05:36.859Z] [LOG]    = NET SALARY: Rs.16296.75
[2025-10-23T05:05:37.053Z] [LOG] 
📝 Components to save:
[2025-10-23T05:05:37.053Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:05:37.053Z] [LOG]    Deduction components: 1
[2025-10-23T05:05:37.053Z] [LOG] Creating components for record 77bcdb26-d543-4224-8856-dcd469fb848b: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:05:37.054Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 16296.753888888888
}
[2025-10-23T05:05:37.306Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:05:37.619Z] [LOG] Created payroll_record_component: a0159995-6c46-48ae-82b4-1a85cfd63987 for Base Salary
[2025-10-23T05:05:37.619Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 52250.01
}
[2025-10-23T05:05:37.870Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:05:38.128Z] [LOG] Created payroll_record_component: 4b94727b-f6ed-405d-9712-04e8da842890 for Attendance Shortfall (Info)
[2025-10-23T05:05:38.592Z] [LOG] ✅ Financial balances updated successfully for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:38.592Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:05:38.592Z] [LOG] 
======================================================================
[2025-10-23T05:05:38.593Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Uthpala null
[2025-10-23T05:05:38.593Z] [LOG] ======================================================================
[2025-10-23T05:05:38.593Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-23T05:05:38.593Z] [LOG]    Actual Earned Base (Attendance-based): Rs.16296.75
[2025-10-23T05:05:38.594Z] [LOG]    Attendance Shortfall: Rs.52250.01
[2025-10-23T05:05:38.594Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:38.594Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:05:38.594Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:05:38.594Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:38.595Z] [LOG]    GROSS SALARY: Rs.16296.75
[2025-10-23T05:05:38.595Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:38.595Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:05:38.596Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:05:38.596Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:05:38.596Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:05:38.597Z] [LOG]       - Attendance Shortfall (Info): Rs.52250.01
[2025-10-23T05:05:38.597Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:05:38.597Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:38.598Z] [LOG]    NET SALARY: Rs.16296.75
[2025-10-23T05:05:38.598Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:05:38.598Z] [LOG] ======================================================================

[2025-10-23T05:05:38.598Z] [LOG] ✅ Uthpala null: Calculation completed successfully
[2025-10-23T05:05:38.599Z] [LOG] 📊 Progress: 18/34 (52.9%)
[2025-10-23T05:05:38.599Z] [LOG] 
🧮 Processing: Hari null (EMP000017)
[2025-10-23T05:05:38.600Z] [LOG] 📋 Record ID: 797a8d70-6591-4a5a-8aea-452a05c51749
[2025-10-23T05:05:38.600Z] [LOG] 
======================================================================
[2025-10-23T05:05:38.600Z] [LOG] 🧮 CALCULATING PAYROLL: Hari null (EMP000017)
[2025-10-23T05:05:38.601Z] [LOG] ======================================================================
[2025-10-23T05:05:40.174Z] [LOG] 🔍 Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-23T05:05:40.175Z] [LOG]    Total components: 13
[2025-10-23T05:05:40.175Z] [LOG]    Applicable components: 13
[2025-10-23T05:05:40.175Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T05:05:41.552Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:05:41.553Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:05:41.836Z] [LOG] 📊 Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:42.035Z] [LOG] 📊 Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:42.259Z] [LOG] 📊 Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:42.259Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:05:42.259Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:05:42.502Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:05:42.503Z] [LOG]    Employee ID: 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:42.503Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:05:42.503Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:05:42.503Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T05:05:42.742Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:05:42.742Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T05:05:42.742Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T05:05:42.742Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T05:05:42.743Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:05:42.743Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:05:42.743Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:05:43.461Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:05:43.461Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:05:43.704Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:05:43.704Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:05:43.704Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:05:43.705Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:05:43.705Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:05:43.705Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:05:43.706Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:05:43.706Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:05:43.914Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:05:43.914Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:05:43.915Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:05:43.915Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:05:44.119Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:05:44.120Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:05:44.120Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:05:44.121Z] [LOG]       Current Time: 10:35:44
[2025-10-23T05:05:44.121Z] [LOG]       Expected Hours (scheduled → now): 2.10h
[2025-10-23T05:05:44.121Z] [LOG]       Actual Hours (check-in → now): 2.10h
[2025-10-23T05:05:44.121Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:05:44.122Z] [LOG]       Weekday: 121.10h
[2025-10-23T05:05:44.122Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:05:44.122Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:05:44.123Z] [LOG]       Total Expected: 134.60h
[2025-10-23T05:05:44.123Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:05:44.123Z] [LOG]       Weekday: 27.60h (includes 2.10h live)
[2025-10-23T05:05:44.123Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:05:44.124Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:05:44.124Z] [LOG]       Total Actual: 32.10h
[2025-10-23T05:05:44.124Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:05:44.125Z] [LOG]       Weekday: 121.10h × Rs.235.29 = Rs.28492.58
[2025-10-23T05:05:44.125Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T05:05:44.125Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:44.125Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:44.126Z] [LOG]       Total Expected Earned: Rs.34492.52
[2025-10-23T05:05:44.126Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:05:44.126Z] [LOG]       Weekday: 27.60h × Rs.235.29 = Rs.6492.97
[2025-10-23T05:05:44.126Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T05:05:44.127Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:44.127Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:44.127Z] [LOG]       Total Actual Earned: Rs.8492.95
[2025-10-23T05:05:44.128Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:05:44.128Z] [LOG]       Calculated At: Oct 23, 2025, 10:35:44
[2025-10-23T05:05:44.128Z] [LOG]       Expected Earned (until NOW): Rs.34492.52
[2025-10-23T05:05:44.128Z] [LOG]       Actual Earned (until NOW): Rs.8492.95
[2025-10-23T05:05:44.129Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:44.129Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T05:05:44.129Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:05:44.129Z] [LOG]       📉 Shortfall: 102.50 hours (75.38% of expected)
[2025-10-23T05:05:44.129Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:05:44.130Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:05:44.130Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:05:44.131Z] [LOG]    Actual Earned Base: Rs.8492.95
[2025-10-23T05:05:44.131Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:05:44.131Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:05:44.131Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:05:44.132Z] [LOG]    Gross Salary: 8492.946044308334
[2025-10-23T05:05:44.132Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:05:44.133Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:05:44.133Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:44.134Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:05:44.134Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:44.134Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:05:44.135Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:44.135Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:05:44.136Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:44.136Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:05:44.136Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:44.136Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:05:44.137Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:44.137Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:05:44.137Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:44.137Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:05:44.137Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:44.138Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:05:44.138Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:44.138Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:05:44.139Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:44.139Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:05:44.139Z] [LOG]    EPF/ETF calculated on: Rs.8492.95
[2025-10-23T05:05:44.140Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:05:44.140Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:05:44.140Z] [LOG] 💰 GROSS CALCULATION for Hari null:
[2025-10-23T05:05:44.140Z] [LOG]    Base Salary: 50000
[2025-10-23T05:05:44.141Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:05:44.141Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:05:44.141Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:44.142Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:05:44.142Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:44.142Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:05:44.142Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:44.457Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:05:44.457Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:05:44.457Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:05:44.458Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:05:44.458Z] [LOG]    Actual Earned Base: Rs.8492.95
[2025-10-23T05:05:44.458Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:05:44.458Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:05:44.458Z] [LOG]    = Gross Salary: Rs.8492.95
[2025-10-23T05:05:44.459Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:05:44.459Z] [LOG]    Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:05:44.459Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:05:44.459Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:05:44.459Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:05:44.459Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:05:44.460Z] [LOG]    Gross Salary: Rs.8492.95
[2025-10-23T05:05:44.460Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:05:44.460Z] [LOG]    = NET SALARY: Rs.8492.95
[2025-10-23T05:05:44.675Z] [LOG] 
📝 Components to save:
[2025-10-23T05:05:44.676Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:05:44.676Z] [LOG]    Deduction components: 1
[2025-10-23T05:05:44.677Z] [LOG] Creating components for record 797a8d70-6591-4a5a-8aea-452a05c51749: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:05:44.677Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 8492.946044308334
}
[2025-10-23T05:05:44.887Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:05:45.096Z] [LOG] Created payroll_record_component: 4a4fb92b-ad9a-4d27-8c2d-a06853ddf361 for Base Salary
[2025-10-23T05:05:45.097Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 25999.575
}
[2025-10-23T05:05:45.310Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:05:45.551Z] [LOG] Created payroll_record_component: aca05bfc-c938-45eb-bcea-c76f284e3d71 for Attendance Shortfall (Info)
[2025-10-23T05:05:45.961Z] [LOG] ✅ Financial balances updated successfully for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:45.961Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:05:45.962Z] [LOG] 
======================================================================
[2025-10-23T05:05:45.962Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Hari null
[2025-10-23T05:05:45.962Z] [LOG] ======================================================================
[2025-10-23T05:05:45.962Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:05:45.963Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8492.95
[2025-10-23T05:05:45.963Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:05:45.963Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:45.963Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:05:45.964Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:05:45.964Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:45.964Z] [LOG]    GROSS SALARY: Rs.8492.95
[2025-10-23T05:05:45.965Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:45.965Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:05:45.965Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:05:45.965Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:05:45.966Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:05:45.966Z] [LOG]       - Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:05:45.966Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:05:45.967Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:45.967Z] [LOG]    NET SALARY: Rs.8492.95
[2025-10-23T05:05:45.967Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:05:45.967Z] [LOG] ======================================================================

[2025-10-23T05:05:45.968Z] [LOG] ✅ Hari null: Calculation completed successfully
[2025-10-23T05:05:45.968Z] [LOG] 📊 Progress: 19/34 (55.9%)
[2025-10-23T05:05:45.968Z] [LOG] 
🧮 Processing: Chemil null (EMP000040)
[2025-10-23T05:05:45.968Z] [LOG] 📋 Record ID: 7a45dbec-d09a-47ff-af22-eb1b2510edc2
[2025-10-23T05:05:45.969Z] [LOG] 
======================================================================
[2025-10-23T05:05:45.969Z] [LOG] 🧮 CALCULATING PAYROLL: Chemil null (EMP000040)
[2025-10-23T05:05:45.969Z] [LOG] ======================================================================
[2025-10-23T05:05:46.932Z] [LOG] 🔍 Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-23T05:05:46.932Z] [LOG]    Total components: 13
[2025-10-23T05:05:46.933Z] [LOG]    Applicable components: 13
[2025-10-23T05:05:46.933Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T05:05:48.261Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:05:48.261Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:05:48.516Z] [LOG] 📊 Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:48.734Z] [LOG] 📊 Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:48.986Z] [LOG] 📊 Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:48.987Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:05:48.987Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:05:49.220Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:05:49.220Z] [LOG]    Employee ID: 01442599-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:49.220Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:05:49.221Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:05:49.221Z] [LOG]    Base Salary (Full Month): Rs.250000.00
[2025-10-23T05:05:49.494Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:05:49.495Z] [LOG]       Daily Salary: Rs.10000.00
[2025-10-23T05:05:49.495Z] [LOG]       Weekday Hourly Rate: Rs.1176.47
[2025-10-23T05:05:49.495Z] [LOG]       Saturday Hourly Rate: Rs.2222.22
[2025-10-23T05:05:49.495Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:05:49.495Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:05:49.495Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:05:50.351Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:05:50.351Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:05:50.578Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:05:50.579Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:05:50.579Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:05:50.579Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:05:50.579Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:05:50.579Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:05:50.580Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:05:50.580Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:05:50.781Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:05:50.781Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:05:50.782Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:05:50.782Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:05:50.990Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:05:50.990Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:05:50.991Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:05:50.991Z] [LOG]       Current Time: 10:35:50
[2025-10-23T05:05:50.992Z] [LOG]       Expected Hours (scheduled → now): 2.10h
[2025-10-23T05:05:50.992Z] [LOG]       Actual Hours (check-in → now): 2.10h
[2025-10-23T05:05:50.992Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:05:50.993Z] [LOG]       Weekday: 121.10h
[2025-10-23T05:05:50.993Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:05:50.993Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:05:50.993Z] [LOG]       Total Expected: 134.60h
[2025-10-23T05:05:50.993Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:05:50.994Z] [LOG]       Weekday: 27.60h (includes 2.10h live)
[2025-10-23T05:05:50.994Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:05:50.994Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:05:50.994Z] [LOG]       Total Actual: 32.10h
[2025-10-23T05:05:50.995Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:05:50.995Z] [LOG]       Weekday: 121.10h × Rs.1176.47 = Rs.142467.57
[2025-10-23T05:05:50.995Z] [LOG]       Saturday: 13.50h × Rs.2222.22 = Rs.29999.97
[2025-10-23T05:05:50.995Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:50.995Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:50.996Z] [LOG]       Total Expected Earned: Rs.172467.54
[2025-10-23T05:05:50.996Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:05:50.996Z] [LOG]       Weekday: 27.60h × Rs.1176.47 = Rs.32467.63
[2025-10-23T05:05:50.996Z] [LOG]       Saturday: 4.50h × Rs.2222.22 = Rs.9999.99
[2025-10-23T05:05:50.997Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:50.997Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:50.997Z] [LOG]       Total Actual Earned: Rs.42467.62
[2025-10-23T05:05:50.998Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:05:50.998Z] [LOG]       Calculated At: Oct 23, 2025, 10:35:50
[2025-10-23T05:05:50.999Z] [LOG]       Expected Earned (until NOW): Rs.172467.54
[2025-10-23T05:05:50.999Z] [LOG]       Actual Earned (until NOW): Rs.42467.62
[2025-10-23T05:05:50.999Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:50.999Z] [LOG]       Attendance Deduction: Rs.129999.92
[2025-10-23T05:05:50.999Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:05:51.000Z] [LOG]       📉 Shortfall: 102.50 hours (75.38% of expected)
[2025-10-23T05:05:51.000Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:05:51.000Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:05:51.001Z] [LOG]    Base Salary (Full): Rs.250000.00
[2025-10-23T05:05:51.001Z] [LOG]    Actual Earned Base: Rs.42467.62
[2025-10-23T05:05:51.002Z] [LOG]    Attendance Shortfall: Rs.129999.92
[2025-10-23T05:05:51.002Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:05:51.003Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:05:51.003Z] [LOG]    Gross Salary: 42467.61755702778
[2025-10-23T05:05:51.003Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:05:51.004Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:05:51.004Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:51.005Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:05:51.005Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:51.006Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:05:51.007Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:51.007Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:05:51.007Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:51.007Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:05:51.007Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:51.008Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:05:51.008Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:51.008Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:05:51.009Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:51.009Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:05:51.009Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:51.010Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:05:51.010Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:51.010Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:05:51.010Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:51.011Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:05:51.011Z] [LOG]    EPF/ETF calculated on: Rs.42467.62
[2025-10-23T05:05:51.011Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:05:51.011Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:05:51.011Z] [LOG] 💰 GROSS CALCULATION for Chemil null:
[2025-10-23T05:05:51.011Z] [LOG]    Base Salary: 250000
[2025-10-23T05:05:51.012Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:05:51.012Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:05:51.012Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:51.012Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:05:51.013Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:51.013Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:05:51.013Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:51.252Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:05:51.252Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:05:51.253Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:05:51.253Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:05:51.253Z] [LOG]    Actual Earned Base: Rs.42467.62
[2025-10-23T05:05:51.253Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:05:51.253Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:05:51.254Z] [LOG]    = Gross Salary: Rs.42467.62
[2025-10-23T05:05:51.254Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:05:51.254Z] [LOG]    Attendance Shortfall (Info): Rs.129999.92
[2025-10-23T05:05:51.254Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:05:51.254Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:05:51.254Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:05:51.254Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:05:51.255Z] [LOG]    Gross Salary: Rs.42467.62
[2025-10-23T05:05:51.255Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:05:51.255Z] [LOG]    = NET SALARY: Rs.42467.62
[2025-10-23T05:05:51.482Z] [LOG] 
📝 Components to save:
[2025-10-23T05:05:51.482Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:05:51.483Z] [LOG]    Deduction components: 1
[2025-10-23T05:05:51.483Z] [LOG] Creating components for record 7a45dbec-d09a-47ff-af22-eb1b2510edc2: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:05:51.483Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 42467.61755702778
}
[2025-10-23T05:05:51.698Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:05:51.898Z] [LOG] Created payroll_record_component: 57b456d3-b07f-41fa-85e0-54f041e077c4 for Base Salary
[2025-10-23T05:05:51.899Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 129999.92499999999
}
[2025-10-23T05:05:52.103Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:05:52.341Z] [LOG] Created payroll_record_component: 6cc36d1c-063e-4cd5-be34-0739759f5a16 for Attendance Shortfall (Info)
[2025-10-23T05:05:52.819Z] [LOG] ✅ Financial balances updated successfully for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:52.819Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:05:52.819Z] [LOG] 
======================================================================
[2025-10-23T05:05:52.820Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chemil null
[2025-10-23T05:05:52.820Z] [LOG] ======================================================================
[2025-10-23T05:05:52.820Z] [LOG]    Base Salary (Full): Rs.250000.00
[2025-10-23T05:05:52.821Z] [LOG]    Actual Earned Base (Attendance-based): Rs.42467.62
[2025-10-23T05:05:52.821Z] [LOG]    Attendance Shortfall: Rs.129999.92
[2025-10-23T05:05:52.821Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:52.821Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:05:52.822Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:05:52.822Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:52.822Z] [LOG]    GROSS SALARY: Rs.42467.62
[2025-10-23T05:05:52.822Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:52.823Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:05:52.823Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:05:52.823Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:05:52.824Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:05:52.824Z] [LOG]       - Attendance Shortfall (Info): Rs.129999.92
[2025-10-23T05:05:52.824Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:05:52.824Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:05:52.825Z] [LOG]    NET SALARY: Rs.42467.62
[2025-10-23T05:05:52.825Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:05:52.825Z] [LOG] ======================================================================

[2025-10-23T05:05:52.826Z] [LOG] ✅ Chemil null: Calculation completed successfully
[2025-10-23T05:05:52.826Z] [LOG] 📊 Progress: 20/34 (58.8%)
[2025-10-23T05:05:52.826Z] [LOG] 
🧮 Processing: Rasanga null (EMP000028)
[2025-10-23T05:05:52.827Z] [LOG] 📋 Record ID: 7c2fd7e7-5d17-41d5-9171-e7099dbae74b
[2025-10-23T05:05:52.827Z] [LOG] 
======================================================================
[2025-10-23T05:05:52.827Z] [LOG] 🧮 CALCULATING PAYROLL: Rasanga null (EMP000028)
[2025-10-23T05:05:52.828Z] [LOG] ======================================================================
[2025-10-23T05:05:53.710Z] [LOG] 🔍 Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-23T05:05:53.710Z] [LOG]    Total components: 13
[2025-10-23T05:05:53.710Z] [LOG]    Applicable components: 13
[2025-10-23T05:05:53.711Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-23T05:05:55.889Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:05:55.889Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:05:56.096Z] [LOG] 📊 Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:56.353Z] [LOG] 📊 Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:56.579Z] [LOG] 📊 Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:56.580Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:05:56.580Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:05:56.781Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:05:56.781Z] [LOG]    Employee ID: 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-23T05:05:56.782Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:05:56.782Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:05:56.782Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T05:05:56.976Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:05:56.977Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T05:05:56.977Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T05:05:56.977Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T05:05:56.977Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:05:56.978Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:05:56.978Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:05:57.950Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:05:57.950Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:05:58.261Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:05:58.262Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:05:58.262Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:05:58.262Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:05:58.263Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:05:58.263Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:05:58.263Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:05:58.263Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:05:58.515Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:05:58.515Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:05:58.515Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:05:58.516Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:05:58.755Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:05:58.755Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:05:58.755Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:05:58.756Z] [LOG]       Current Time: 10:35:58
[2025-10-23T05:05:58.756Z] [LOG]       Expected Hours (scheduled → now): 2.10h
[2025-10-23T05:05:58.757Z] [LOG]       Actual Hours (check-in → now): 2.10h
[2025-10-23T05:05:58.757Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:05:58.757Z] [LOG]       Weekday: 121.10h
[2025-10-23T05:05:58.758Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:05:58.758Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:05:58.758Z] [LOG]       Total Expected: 134.60h
[2025-10-23T05:05:58.758Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:05:58.759Z] [LOG]       Weekday: 27.60h (includes 2.10h live)
[2025-10-23T05:05:58.759Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:05:58.759Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:05:58.760Z] [LOG]       Total Actual: 32.10h
[2025-10-23T05:05:58.760Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:05:58.761Z] [LOG]       Weekday: 121.10h × Rs.235.29 = Rs.28493.54
[2025-10-23T05:05:58.761Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T05:05:58.761Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:58.762Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:58.762Z] [LOG]       Total Expected Earned: Rs.34493.48
[2025-10-23T05:05:58.762Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:05:58.763Z] [LOG]       Weekday: 27.60h × Rs.235.29 = Rs.6493.92
[2025-10-23T05:05:58.763Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T05:05:58.763Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:05:58.763Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:58.764Z] [LOG]       Total Actual Earned: Rs.8493.90
[2025-10-23T05:05:58.765Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:05:58.765Z] [LOG]       Calculated At: Oct 23, 2025, 10:35:58
[2025-10-23T05:05:58.765Z] [LOG]       Expected Earned (until NOW): Rs.34493.48
[2025-10-23T05:05:58.766Z] [LOG]       Actual Earned (until NOW): Rs.8493.90
[2025-10-23T05:05:58.766Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:05:58.766Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T05:05:58.766Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:05:58.767Z] [LOG]       📉 Shortfall: 102.50 hours (75.38% of expected)
[2025-10-23T05:05:58.767Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:05:58.767Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:05:58.768Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:05:58.768Z] [LOG]    Actual Earned Base: Rs.8493.90
[2025-10-23T05:05:58.770Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:05:58.771Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:05:58.771Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:05:58.771Z] [LOG]    Gross Salary: 8493.902628875
[2025-10-23T05:05:58.771Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:05:58.771Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:05:58.772Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:58.772Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:05:58.772Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:58.772Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:05:58.772Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:58.772Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:05:58.773Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:58.773Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:05:58.773Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:58.774Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:05:58.774Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:58.774Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:05:58.775Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:58.775Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:05:58.775Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:58.776Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:05:58.776Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:58.776Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:05:58.777Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:58.777Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:05:58.777Z] [LOG]    EPF/ETF calculated on: Rs.8493.90
[2025-10-23T05:05:58.778Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:05:58.778Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:05:58.778Z] [LOG] 💰 GROSS CALCULATION for Rasanga null:
[2025-10-23T05:05:58.778Z] [LOG]    Base Salary: 50000
[2025-10-23T05:05:58.779Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:05:58.779Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:05:58.779Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:58.780Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:05:58.780Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:58.780Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:05:58.780Z] [LOG]    Fixed amount: 0
[2025-10-23T05:05:59.065Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:05:59.065Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:05:59.065Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:05:59.066Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:05:59.066Z] [LOG]    Actual Earned Base: Rs.8493.90
[2025-10-23T05:05:59.066Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:05:59.067Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:05:59.067Z] [LOG]    = Gross Salary: Rs.8493.90
[2025-10-23T05:05:59.067Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:05:59.068Z] [LOG]    Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:05:59.068Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:05:59.069Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:05:59.069Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:05:59.069Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:05:59.070Z] [LOG]    Gross Salary: Rs.8493.90
[2025-10-23T05:05:59.070Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:05:59.070Z] [LOG]    = NET SALARY: Rs.8493.90
[2025-10-23T05:05:59.378Z] [LOG] 
📝 Components to save:
[2025-10-23T05:05:59.379Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:05:59.379Z] [LOG]    Deduction components: 1
[2025-10-23T05:05:59.379Z] [LOG] Creating components for record 7c2fd7e7-5d17-41d5-9171-e7099dbae74b: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:05:59.380Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 8493.902628875
}
[2025-10-23T05:05:59.740Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:06:00.204Z] [LOG] Created payroll_record_component: f0814c8d-fceb-4383-8859-402c76ffb96e for Base Salary
[2025-10-23T05:06:00.205Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 25999.575
}
[2025-10-23T05:06:00.408Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:06:00.652Z] [LOG] Created payroll_record_component: 16748d1e-c628-4b81-b93e-35220738109d for Attendance Shortfall (Info)
[2025-10-23T05:06:01.069Z] [LOG] ✅ Financial balances updated successfully for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:01.069Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:06:01.070Z] [LOG] 
======================================================================
[2025-10-23T05:06:01.070Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Rasanga null
[2025-10-23T05:06:01.070Z] [LOG] ======================================================================
[2025-10-23T05:06:01.071Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:06:01.071Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8493.90
[2025-10-23T05:06:01.071Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:06:01.072Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:01.072Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:06:01.072Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:06:01.073Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:01.073Z] [LOG]    GROSS SALARY: Rs.8493.90
[2025-10-23T05:06:01.073Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:01.074Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:06:01.074Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:06:01.074Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:06:01.075Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:06:01.075Z] [LOG]       - Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:06:01.075Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:06:01.076Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:01.076Z] [LOG]    NET SALARY: Rs.8493.90
[2025-10-23T05:06:01.076Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:06:01.077Z] [LOG] ======================================================================

[2025-10-23T05:06:01.077Z] [LOG] ✅ Rasanga null: Calculation completed successfully
[2025-10-23T05:06:01.077Z] [LOG] 📊 Progress: 21/34 (61.8%)
[2025-10-23T05:06:01.078Z] [LOG] 
🧮 Processing: Sumaiya null (EMP000016)
[2025-10-23T05:06:01.078Z] [LOG] 📋 Record ID: 8f064687-de27-4482-80f3-a16a74e94876
[2025-10-23T05:06:01.078Z] [LOG] 
======================================================================
[2025-10-23T05:06:01.079Z] [LOG] 🧮 CALCULATING PAYROLL: Sumaiya null (EMP000016)
[2025-10-23T05:06:01.079Z] [LOG] ======================================================================
[2025-10-23T05:06:02.070Z] [LOG] 🔍 Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-23T05:06:02.071Z] [LOG]    Total components: 13
[2025-10-23T05:06:02.071Z] [LOG]    Applicable components: 13
[2025-10-23T05:06:02.071Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T05:06:03.780Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:06:03.780Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:06:03.978Z] [LOG] 📊 Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:04.183Z] [LOG] 📊 Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:04.496Z] [LOG] 📊 Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:04.496Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:06:04.496Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:06:04.753Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:06:04.754Z] [LOG]    Employee ID: 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:04.754Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:06:04.754Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:06:04.755Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-23T05:06:04.980Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:06:04.981Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-23T05:06:04.981Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-23T05:06:04.981Z] [LOG]       Saturday Hourly Rate: Rs.533.33
[2025-10-23T05:06:04.982Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:06:04.982Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:06:04.982Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:06:05.677Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:06:05.678Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:06:05.876Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:06:05.876Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:06:05.876Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:06:05.877Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:06:05.877Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:06:05.878Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:06:05.878Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:06:05.878Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:06:06.129Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:06:06.129Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:06:06.130Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:06:06.130Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:06:06.591Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:06:06.591Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:06:06.592Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:06:06.593Z] [LOG]       Current Time: 10:36:06
[2025-10-23T05:06:06.593Z] [LOG]       Expected Hours (scheduled → now): 2.10h
[2025-10-23T05:06:06.593Z] [LOG]       Actual Hours (check-in → now): 2.10h
[2025-10-23T05:06:06.594Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:06:06.594Z] [LOG]       Weekday: 121.10h
[2025-10-23T05:06:06.594Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:06:06.594Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:06:06.595Z] [LOG]       Total Expected: 134.60h
[2025-10-23T05:06:06.595Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:06:06.595Z] [LOG]       Weekday: 27.60h (includes 2.10h live)
[2025-10-23T05:06:06.596Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:06:06.596Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:06:06.596Z] [LOG]       Total Actual: 32.10h
[2025-10-23T05:06:06.596Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:06:06.597Z] [LOG]       Weekday: 121.10h × Rs.282.35 = Rs.34193.10
[2025-10-23T05:06:06.597Z] [LOG]       Saturday: 13.50h × Rs.533.33 = Rs.7199.96
[2025-10-23T05:06:06.598Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:06.598Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:06.598Z] [LOG]       Total Expected Earned: Rs.41393.06
[2025-10-23T05:06:06.598Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:06:06.599Z] [LOG]       Weekday: 27.60h × Rs.282.35 = Rs.7793.38
[2025-10-23T05:06:06.599Z] [LOG]       Saturday: 4.50h × Rs.533.33 = Rs.2399.99
[2025-10-23T05:06:06.600Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:06.600Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:06.600Z] [LOG]       Total Actual Earned: Rs.10193.36
[2025-10-23T05:06:06.601Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:06:06.601Z] [LOG]       Calculated At: Oct 23, 2025, 10:36:06
[2025-10-23T05:06:06.602Z] [LOG]       Expected Earned (until NOW): Rs.41393.06
[2025-10-23T05:06:06.603Z] [LOG]       Actual Earned (until NOW): Rs.10193.36
[2025-10-23T05:06:06.603Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:06.603Z] [LOG]       Attendance Deduction: Rs.31199.70
[2025-10-23T05:06:06.604Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:06:06.604Z] [LOG]       📉 Shortfall: 102.50 hours (75.37% of expected)
[2025-10-23T05:06:06.604Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:06:06.605Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:06:06.605Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-23T05:06:06.606Z] [LOG]    Actual Earned Base: Rs.10193.36
[2025-10-23T05:06:06.606Z] [LOG]    Attendance Shortfall: Rs.31199.70
[2025-10-23T05:06:06.606Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:06:06.607Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:06:06.607Z] [LOG]    Gross Salary: 10193.361935791667
[2025-10-23T05:06:06.607Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:06:06.608Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:06:06.608Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:06.608Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:06:06.608Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:06.609Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:06:06.609Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:06.609Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:06:06.609Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:06.610Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:06:06.610Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:06.610Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:06:06.611Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:06.611Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:06:06.611Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:06.611Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:06:06.611Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:06.612Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:06:06.612Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:06.612Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:06:06.613Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:06.613Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:06:06.613Z] [LOG]    EPF/ETF calculated on: Rs.10193.36
[2025-10-23T05:06:06.613Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:06:06.614Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:06:06.614Z] [LOG] 💰 GROSS CALCULATION for Sumaiya null:
[2025-10-23T05:06:06.614Z] [LOG]    Base Salary: 60000
[2025-10-23T05:06:06.615Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:06:06.615Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:06:06.615Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:06.616Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:06:06.616Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:06.616Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:06:06.617Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:06.900Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:06:06.901Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:06:06.901Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:06:06.902Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:06:06.902Z] [LOG]    Actual Earned Base: Rs.10193.36
[2025-10-23T05:06:06.902Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:06:06.902Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:06:06.903Z] [LOG]    = Gross Salary: Rs.10193.36
[2025-10-23T05:06:06.903Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:06:06.903Z] [LOG]    Attendance Shortfall (Info): Rs.31199.70
[2025-10-23T05:06:06.903Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:06:06.903Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:06:06.904Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:06:06.904Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:06:06.904Z] [LOG]    Gross Salary: Rs.10193.36
[2025-10-23T05:06:06.905Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:06:06.905Z] [LOG]    = NET SALARY: Rs.10193.36
[2025-10-23T05:06:07.192Z] [LOG] 
📝 Components to save:
[2025-10-23T05:06:07.193Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:06:07.193Z] [LOG]    Deduction components: 1
[2025-10-23T05:06:07.193Z] [LOG] Creating components for record 8f064687-de27-4482-80f3-a16a74e94876: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:06:07.194Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 10193.361935791667
}
[2025-10-23T05:06:07.462Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:06:07.756Z] [LOG] Created payroll_record_component: 3580b5e7-e3cc-419f-b66e-464849f53e88 for Base Salary
[2025-10-23T05:06:07.756Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 31199.695000000007
}
[2025-10-23T05:06:08.081Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:06:08.386Z] [LOG] Created payroll_record_component: ef50b1c0-b18c-4d3a-966b-c1f509bac418 for Attendance Shortfall (Info)
[2025-10-23T05:06:09.061Z] [LOG] ✅ Financial balances updated successfully for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:09.062Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:06:09.062Z] [LOG] 
======================================================================
[2025-10-23T05:06:09.063Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sumaiya null
[2025-10-23T05:06:09.063Z] [LOG] ======================================================================
[2025-10-23T05:06:09.063Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-23T05:06:09.063Z] [LOG]    Actual Earned Base (Attendance-based): Rs.10193.36
[2025-10-23T05:06:09.064Z] [LOG]    Attendance Shortfall: Rs.31199.70
[2025-10-23T05:06:09.064Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:09.064Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:06:09.065Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:06:09.065Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:09.065Z] [LOG]    GROSS SALARY: Rs.10193.36
[2025-10-23T05:06:09.065Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:09.066Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:06:09.066Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:06:09.066Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:06:09.067Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:06:09.067Z] [LOG]       - Attendance Shortfall (Info): Rs.31199.70
[2025-10-23T05:06:09.067Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:06:09.068Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:09.068Z] [LOG]    NET SALARY: Rs.10193.36
[2025-10-23T05:06:09.069Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:06:09.069Z] [LOG] ======================================================================

[2025-10-23T05:06:09.069Z] [LOG] ✅ Sumaiya null: Calculation completed successfully
[2025-10-23T05:06:09.069Z] [LOG] 📊 Progress: 22/34 (64.7%)
[2025-10-23T05:06:09.069Z] [LOG] 
🧮 Processing: Piyumi null (EMP000025)
[2025-10-23T05:06:09.070Z] [LOG] 📋 Record ID: 8fca627f-432c-408a-a5be-8dabac371dee
[2025-10-23T05:06:09.070Z] [LOG] 
======================================================================
[2025-10-23T05:06:09.070Z] [LOG] 🧮 CALCULATING PAYROLL: Piyumi null (EMP000025)
[2025-10-23T05:06:09.071Z] [LOG] ======================================================================
[2025-10-23T05:06:10.028Z] [LOG] 🔍 Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-23T05:06:10.029Z] [LOG]    Total components: 13
[2025-10-23T05:06:10.029Z] [LOG]    Applicable components: 13
[2025-10-23T05:06:10.029Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T05:06:11.461Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:06:11.461Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:06:11.675Z] [LOG] 📊 Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:11.882Z] [LOG] 📊 Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:12.120Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:12.121Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:06:12.121Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:06:12.339Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:06:12.340Z] [LOG]    Employee ID: 0143e565-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:12.340Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:06:12.340Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:06:12.340Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T05:06:12.557Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:06:12.558Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T05:06:12.558Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T05:06:12.558Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T05:06:12.558Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:06:12.559Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:06:12.559Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:06:13.294Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:06:13.294Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:06:13.539Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:06:13.540Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:06:13.540Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:06:13.540Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:06:13.541Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:06:13.541Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:06:13.541Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:06:13.542Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:06:13.761Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:06:13.761Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:06:13.761Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:06:13.761Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:06:14.019Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:06:14.020Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:06:14.020Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:06:14.021Z] [LOG]       Current Time: 10:36:14
[2025-10-23T05:06:14.021Z] [LOG]       Expected Hours (scheduled → now): 2.10h
[2025-10-23T05:06:14.022Z] [LOG]       Actual Hours (check-in → now): 2.10h
[2025-10-23T05:06:14.022Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:06:14.022Z] [LOG]       Weekday: 121.10h
[2025-10-23T05:06:14.023Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:06:14.023Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:06:14.023Z] [LOG]       Total Expected: 134.60h
[2025-10-23T05:06:14.023Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:06:14.024Z] [LOG]       Weekday: 27.60h (includes 2.10h live)
[2025-10-23T05:06:14.024Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:06:14.025Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:06:14.025Z] [LOG]       Total Actual: 32.10h
[2025-10-23T05:06:14.025Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:06:14.025Z] [LOG]       Weekday: 121.10h × Rs.235.29 = Rs.28494.54
[2025-10-23T05:06:14.025Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T05:06:14.026Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:14.026Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:14.026Z] [LOG]       Total Expected Earned: Rs.34494.48
[2025-10-23T05:06:14.027Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:06:14.027Z] [LOG]       Weekday: 27.60h × Rs.235.29 = Rs.6494.92
[2025-10-23T05:06:14.027Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T05:06:14.028Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:14.028Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:14.028Z] [LOG]       Total Actual Earned: Rs.8494.90
[2025-10-23T05:06:14.029Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:06:14.030Z] [LOG]       Calculated At: Oct 23, 2025, 10:36:14
[2025-10-23T05:06:14.030Z] [LOG]       Expected Earned (until NOW): Rs.34494.48
[2025-10-23T05:06:14.030Z] [LOG]       Actual Earned (until NOW): Rs.8494.90
[2025-10-23T05:06:14.030Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:14.031Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T05:06:14.031Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:06:14.031Z] [LOG]       📉 Shortfall: 102.50 hours (75.37% of expected)
[2025-10-23T05:06:14.032Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:06:14.032Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:06:14.032Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:06:14.033Z] [LOG]    Actual Earned Base: Rs.8494.90
[2025-10-23T05:06:14.033Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:06:14.033Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:06:14.034Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:06:14.034Z] [LOG]    Gross Salary: 8494.900258475
[2025-10-23T05:06:14.034Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:06:14.035Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:06:14.036Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:14.036Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:06:14.036Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:14.037Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:06:14.037Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:14.037Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:06:14.037Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:14.038Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:06:14.038Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:14.038Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:06:14.039Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:14.039Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:06:14.039Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:14.040Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:06:14.040Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:14.040Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:06:14.041Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:14.041Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:06:14.042Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:14.042Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:06:14.042Z] [LOG]    EPF/ETF calculated on: Rs.8494.90
[2025-10-23T05:06:14.043Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:06:14.043Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:06:14.044Z] [LOG] 💰 GROSS CALCULATION for Piyumi null:
[2025-10-23T05:06:14.044Z] [LOG]    Base Salary: 50000
[2025-10-23T05:06:14.044Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:06:14.044Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:06:14.045Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:14.045Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:06:14.045Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:14.046Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:06:14.046Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:14.276Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:06:14.276Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:06:14.276Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:06:14.277Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:06:14.277Z] [LOG]    Actual Earned Base: Rs.8494.90
[2025-10-23T05:06:14.277Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:06:14.277Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:06:14.277Z] [LOG]    = Gross Salary: Rs.8494.90
[2025-10-23T05:06:14.278Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:06:14.278Z] [LOG]    Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:06:14.278Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:06:14.278Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:06:14.279Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:06:14.279Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:06:14.279Z] [LOG]    Gross Salary: Rs.8494.90
[2025-10-23T05:06:14.280Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:06:14.280Z] [LOG]    = NET SALARY: Rs.8494.90
[2025-10-23T05:06:14.529Z] [LOG] 
📝 Components to save:
[2025-10-23T05:06:14.529Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:06:14.529Z] [LOG]    Deduction components: 1
[2025-10-23T05:06:14.530Z] [LOG] Creating components for record 8fca627f-432c-408a-a5be-8dabac371dee: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:06:14.530Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 8494.900258475
}
[2025-10-23T05:06:14.900Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:06:15.143Z] [LOG] Created payroll_record_component: 6576a173-f8c8-4f17-a6a3-3fb2f1f698ea for Base Salary
[2025-10-23T05:06:15.144Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 25999.575000000004
}
[2025-10-23T05:06:15.350Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:06:15.554Z] [LOG] Created payroll_record_component: 339c6bf3-e906-4bf0-a007-a0afdb237361 for Attendance Shortfall (Info)
[2025-10-23T05:06:16.179Z] [LOG] ✅ Financial balances updated successfully for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:16.179Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:06:16.180Z] [LOG] 
======================================================================
[2025-10-23T05:06:16.180Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Piyumi null
[2025-10-23T05:06:16.180Z] [LOG] ======================================================================
[2025-10-23T05:06:16.181Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:06:16.181Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8494.90
[2025-10-23T05:06:16.181Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:06:16.181Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:16.182Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:06:16.182Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:06:16.182Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:16.183Z] [LOG]    GROSS SALARY: Rs.8494.90
[2025-10-23T05:06:16.183Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:16.183Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:06:16.183Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:06:16.184Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:06:16.184Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:06:16.184Z] [LOG]       - Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:06:16.185Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:06:16.185Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:16.186Z] [LOG]    NET SALARY: Rs.8494.90
[2025-10-23T05:06:16.186Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:06:16.186Z] [LOG] ======================================================================

[2025-10-23T05:06:16.187Z] [LOG] ✅ Piyumi null: Calculation completed successfully
[2025-10-23T05:06:16.187Z] [LOG] 📊 Progress: 23/34 (67.6%)
[2025-10-23T05:06:16.187Z] [LOG] 
🧮 Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-23T05:06:16.188Z] [LOG] 📋 Record ID: 9e171bdc-f6cb-41eb-bacc-5108a102b1c0
[2025-10-23T05:06:16.188Z] [LOG] 
======================================================================
[2025-10-23T05:06:16.188Z] [LOG] 🧮 CALCULATING PAYROLL: Sujevan Selvaratnam null (EMP000026)
[2025-10-23T05:06:16.188Z] [LOG] ======================================================================
[2025-10-23T05:06:17.072Z] [LOG] 🔍 Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-23T05:06:17.072Z] [LOG]    Total components: 13
[2025-10-23T05:06:17.072Z] [LOG]    Applicable components: 13
[2025-10-23T05:06:17.073Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T05:06:19.157Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:06:19.158Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:06:19.393Z] [LOG] 📊 Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:19.620Z] [LOG] 📊 Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:19.904Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:19.905Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:06:19.905Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:06:20.183Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:06:20.184Z] [LOG]    Employee ID: 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:20.184Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:06:20.184Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:06:20.184Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-23T05:06:20.420Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:06:20.421Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-23T05:06:20.421Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-23T05:06:20.421Z] [LOG]       Saturday Hourly Rate: Rs.0.01
[2025-10-23T05:06:20.422Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:06:20.422Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:06:20.422Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:06:21.145Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:06:21.145Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:06:21.387Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:06:21.388Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:06:21.388Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:06:21.388Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:06:21.389Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:06:21.389Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:06:21.389Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:06:21.390Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:06:21.595Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:06:21.595Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:06:21.596Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:06:21.596Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:06:21.797Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:06:21.797Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:06:21.798Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:06:21.798Z] [LOG]       Current Time: 10:36:21
[2025-10-23T05:06:21.799Z] [LOG]       Expected Hours (scheduled → now): 2.11h
[2025-10-23T05:06:21.799Z] [LOG]       Actual Hours (check-in → now): 2.11h
[2025-10-23T05:06:21.799Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:06:21.799Z] [LOG]       Weekday: 121.11h
[2025-10-23T05:06:21.800Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:06:21.800Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:06:21.800Z] [LOG]       Total Expected: 134.61h
[2025-10-23T05:06:21.801Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:06:21.801Z] [LOG]       Weekday: 27.61h (includes 2.11h live)
[2025-10-23T05:06:21.801Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:06:21.802Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:06:21.802Z] [LOG]       Total Actual: 32.11h
[2025-10-23T05:06:21.802Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:06:21.803Z] [LOG]       Weekday: 121.11h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:21.803Z] [LOG]       Saturday: 13.50h × Rs.0.01 = Rs.0.14
[2025-10-23T05:06:21.804Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:21.804Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:21.804Z] [LOG]       Total Expected Earned: Rs.0.14
[2025-10-23T05:06:21.805Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:06:21.805Z] [LOG]       Weekday: 27.61h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:21.805Z] [LOG]       Saturday: 4.50h × Rs.0.01 = Rs.0.04
[2025-10-23T05:06:21.806Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:21.806Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:21.806Z] [LOG]       Total Actual Earned: Rs.0.04
[2025-10-23T05:06:21.807Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:06:21.807Z] [LOG]       Calculated At: Oct 23, 2025, 10:36:21
[2025-10-23T05:06:21.808Z] [LOG]       Expected Earned (until NOW): Rs.0.14
[2025-10-23T05:06:21.808Z] [LOG]       Actual Earned (until NOW): Rs.0.04
[2025-10-23T05:06:21.808Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:21.809Z] [LOG]       Attendance Deduction: Rs.0.09
[2025-10-23T05:06:21.809Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:06:21.809Z] [LOG]       📉 Shortfall: 102.50 hours (66.67% of expected)
[2025-10-23T05:06:21.810Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:06:21.810Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:06:21.810Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-23T05:06:21.811Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-23T05:06:21.811Z] [LOG]    Attendance Shortfall: Rs.0.09
[2025-10-23T05:06:21.811Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:06:21.812Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:06:21.812Z] [LOG]    Gross Salary: 0.045
[2025-10-23T05:06:21.812Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:06:21.813Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:06:21.813Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:21.813Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:06:21.814Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:21.814Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:06:21.814Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:21.815Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:06:21.815Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:21.815Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:06:21.815Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:21.816Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:06:21.816Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:21.816Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:06:21.817Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:21.817Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:06:21.817Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:21.818Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:06:21.818Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:21.818Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:06:21.819Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:21.819Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:06:21.819Z] [LOG]    EPF/ETF calculated on: Rs.0.04
[2025-10-23T05:06:21.820Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:06:21.820Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:06:21.820Z] [LOG] 💰 GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-23T05:06:21.821Z] [LOG]    Base Salary: 1
[2025-10-23T05:06:21.821Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:06:21.821Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:06:21.822Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:21.822Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:06:21.822Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:21.823Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:06:21.823Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:22.059Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:06:22.060Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:06:22.060Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:06:22.061Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:06:22.061Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-23T05:06:22.061Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:06:22.061Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:06:22.061Z] [LOG]    = Gross Salary: Rs.0.04
[2025-10-23T05:06:22.062Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:06:22.062Z] [LOG]    Attendance Shortfall (Info): Rs.0.09
[2025-10-23T05:06:22.062Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:06:22.062Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:06:22.062Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:06:22.063Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:06:22.063Z] [LOG]    Gross Salary: Rs.0.04
[2025-10-23T05:06:22.063Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:06:22.064Z] [LOG]    = NET SALARY: Rs.0.04
[2025-10-23T05:06:22.259Z] [LOG] 
📝 Components to save:
[2025-10-23T05:06:22.260Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:06:22.260Z] [LOG]    Deduction components: 1
[2025-10-23T05:06:22.260Z] [LOG] Creating components for record 9e171bdc-f6cb-41eb-bacc-5108a102b1c0: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:06:22.261Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 0.045
}
[2025-10-23T05:06:22.513Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:06:22.773Z] [LOG] Created payroll_record_component: 69d796ce-d5eb-4c6d-9b59-9114ac7f3c1b for Base Salary
[2025-10-23T05:06:22.774Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 0.09000000000000001
}
[2025-10-23T05:06:23.219Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:06:23.421Z] [LOG] Created payroll_record_component: b8880592-ac9d-4681-925b-4487a5cbaa03 for Attendance Shortfall (Info)
[2025-10-23T05:06:24.013Z] [LOG] ✅ Financial balances updated successfully for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:24.014Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:06:24.014Z] [LOG] 
======================================================================
[2025-10-23T05:06:24.014Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sujevan Selvaratnam null
[2025-10-23T05:06:24.015Z] [LOG] ======================================================================
[2025-10-23T05:06:24.015Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-23T05:06:24.015Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.04
[2025-10-23T05:06:24.015Z] [LOG]    Attendance Shortfall: Rs.0.09
[2025-10-23T05:06:24.016Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:24.016Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:06:24.016Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:06:24.017Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:24.017Z] [LOG]    GROSS SALARY: Rs.0.04
[2025-10-23T05:06:24.017Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:24.017Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:06:24.017Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:06:24.018Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:06:24.018Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:06:24.019Z] [LOG]       - Attendance Shortfall (Info): Rs.0.09
[2025-10-23T05:06:24.019Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:06:24.019Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:24.019Z] [LOG]    NET SALARY: Rs.0.04
[2025-10-23T05:06:24.020Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:06:24.020Z] [LOG] ======================================================================

[2025-10-23T05:06:24.020Z] [LOG] ✅ Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-23T05:06:24.021Z] [LOG] 📊 Progress: 24/34 (70.6%)
[2025-10-23T05:06:24.021Z] [LOG] 
🧮 Processing: Dharshika null (EMP000009)
[2025-10-23T05:06:24.021Z] [LOG] 📋 Record ID: ace9551d-048e-4c58-8d8f-9dcafbed9818
[2025-10-23T05:06:24.022Z] [LOG] 
======================================================================
[2025-10-23T05:06:24.022Z] [LOG] 🧮 CALCULATING PAYROLL: Dharshika null (EMP000009)
[2025-10-23T05:06:24.022Z] [LOG] ======================================================================
[2025-10-23T05:06:24.974Z] [LOG] 🔍 Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-23T05:06:24.975Z] [LOG]    Total components: 13
[2025-10-23T05:06:24.975Z] [LOG]    Applicable components: 13
[2025-10-23T05:06:24.975Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T05:06:26.419Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:06:26.419Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:06:26.611Z] [LOG] 📊 Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:26.827Z] [LOG] 📊 Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:27.020Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:27.021Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:06:27.021Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:06:27.262Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:06:27.263Z] [LOG]    Employee ID: 0143a994-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:27.263Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:06:27.263Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:06:27.264Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-23T05:06:27.730Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:06:27.730Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-23T05:06:27.730Z] [LOG]       Weekday Hourly Rate: Rs.470.59
[2025-10-23T05:06:27.731Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-23T05:06:27.731Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:06:27.731Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:06:27.731Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:06:28.414Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:06:28.415Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:06:28.758Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:06:28.758Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:06:28.759Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:06:28.759Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:06:28.759Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:06:28.759Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:06:28.760Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:06:28.760Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:06:28.989Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:06:28.989Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:06:28.989Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:06:28.990Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:06:29.233Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:06:29.233Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:06:29.234Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:06:29.234Z] [LOG]       Current Time: 10:36:29
[2025-10-23T05:06:29.234Z] [LOG]       Expected Hours (scheduled → now): 2.11h
[2025-10-23T05:06:29.235Z] [LOG]       Actual Hours (check-in → now): 2.11h
[2025-10-23T05:06:29.235Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:06:29.235Z] [LOG]       Weekday: 121.11h
[2025-10-23T05:06:29.236Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:06:29.236Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:06:29.236Z] [LOG]       Total Expected: 134.61h
[2025-10-23T05:06:29.237Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:06:29.237Z] [LOG]       Weekday: 27.61h (includes 2.11h live)
[2025-10-23T05:06:29.237Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:06:29.238Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:06:29.238Z] [LOG]       Total Actual: 32.11h
[2025-10-23T05:06:29.238Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:06:29.239Z] [LOG]       Weekday: 121.11h × Rs.470.59 = Rs.56992.27
[2025-10-23T05:06:29.239Z] [LOG]       Saturday: 13.50h × Rs.888.89 = Rs.12000.01
[2025-10-23T05:06:29.240Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:29.240Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:29.240Z] [LOG]       Total Expected Earned: Rs.68992.29
[2025-10-23T05:06:29.241Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:06:29.241Z] [LOG]       Weekday: 27.61h × Rs.470.59 = Rs.12992.11
[2025-10-23T05:06:29.241Z] [LOG]       Saturday: 4.50h × Rs.888.89 = Rs.4000.01
[2025-10-23T05:06:29.242Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:29.242Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:29.242Z] [LOG]       Total Actual Earned: Rs.16992.11
[2025-10-23T05:06:29.243Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:06:29.243Z] [LOG]       Calculated At: Oct 23, 2025, 10:36:29
[2025-10-23T05:06:29.244Z] [LOG]       Expected Earned (until NOW): Rs.68992.29
[2025-10-23T05:06:29.244Z] [LOG]       Actual Earned (until NOW): Rs.16992.11
[2025-10-23T05:06:29.244Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:29.245Z] [LOG]       Attendance Deduction: Rs.52000.18
[2025-10-23T05:06:29.245Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:06:29.245Z] [LOG]       📉 Shortfall: 102.50 hours (75.37% of expected)
[2025-10-23T05:06:29.246Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:06:29.246Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:06:29.247Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-23T05:06:29.247Z] [LOG]    Actual Earned Base: Rs.16992.11
[2025-10-23T05:06:29.247Z] [LOG]    Attendance Shortfall: Rs.52000.18
[2025-10-23T05:06:29.248Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:06:29.248Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:06:29.249Z] [LOG]    Gross Salary: 16992.110321519445
[2025-10-23T05:06:29.249Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:06:29.249Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:06:29.249Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:29.250Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:06:29.250Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:29.250Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:06:29.250Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:29.251Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:06:29.251Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:29.251Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:06:29.251Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:29.252Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:06:29.252Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:29.252Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:06:29.253Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:29.253Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:06:29.253Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:29.254Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:06:29.254Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:29.254Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:06:29.254Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:29.254Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:06:29.254Z] [LOG]    EPF/ETF calculated on: Rs.16992.11
[2025-10-23T05:06:29.255Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:06:29.255Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:06:29.255Z] [LOG] 💰 GROSS CALCULATION for Dharshika null:
[2025-10-23T05:06:29.256Z] [LOG]    Base Salary: 100000
[2025-10-23T05:06:29.256Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:06:29.257Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:06:29.257Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:29.257Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:06:29.258Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:29.258Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:06:29.258Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:29.478Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:06:29.479Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:06:29.479Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:06:29.479Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:06:29.480Z] [LOG]    Actual Earned Base: Rs.16992.11
[2025-10-23T05:06:29.480Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:06:29.480Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:06:29.480Z] [LOG]    = Gross Salary: Rs.16992.11
[2025-10-23T05:06:29.481Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:06:29.481Z] [LOG]    Attendance Shortfall (Info): Rs.52000.18
[2025-10-23T05:06:29.481Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:06:29.482Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:06:29.482Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:06:29.482Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:06:29.483Z] [LOG]    Gross Salary: Rs.16992.11
[2025-10-23T05:06:29.483Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:06:29.483Z] [LOG]    = NET SALARY: Rs.16992.11
[2025-10-23T05:06:29.733Z] [LOG] 
📝 Components to save:
[2025-10-23T05:06:29.734Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:06:29.734Z] [LOG]    Deduction components: 1
[2025-10-23T05:06:29.734Z] [LOG] Creating components for record ace9551d-048e-4c58-8d8f-9dcafbed9818: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:06:29.735Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 16992.110321519445
}
[2025-10-23T05:06:29.957Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:06:30.264Z] [LOG] Created payroll_record_component: 495123b6-b80d-42b6-a935-7fefe118fb25 for Base Salary
[2025-10-23T05:06:30.265Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 52000.175
}
[2025-10-23T05:06:30.507Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:06:30.720Z] [LOG] Created payroll_record_component: f36bcb2f-c1e8-46db-95a3-fca8d49e2109 for Attendance Shortfall (Info)
[2025-10-23T05:06:31.115Z] [LOG] ✅ Financial balances updated successfully for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:31.116Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:06:31.116Z] [LOG] 
======================================================================
[2025-10-23T05:06:31.117Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Dharshika null
[2025-10-23T05:06:31.117Z] [LOG] ======================================================================
[2025-10-23T05:06:31.117Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-23T05:06:31.118Z] [LOG]    Actual Earned Base (Attendance-based): Rs.16992.11
[2025-10-23T05:06:31.118Z] [LOG]    Attendance Shortfall: Rs.52000.18
[2025-10-23T05:06:31.118Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:31.118Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:06:31.119Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:06:31.119Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:31.119Z] [LOG]    GROSS SALARY: Rs.16992.11
[2025-10-23T05:06:31.120Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:31.120Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:06:31.120Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:06:31.121Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:06:31.121Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:06:31.121Z] [LOG]       - Attendance Shortfall (Info): Rs.52000.18
[2025-10-23T05:06:31.122Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:06:31.122Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:31.122Z] [LOG]    NET SALARY: Rs.16992.11
[2025-10-23T05:06:31.123Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:06:31.123Z] [LOG] ======================================================================

[2025-10-23T05:06:31.123Z] [LOG] ✅ Dharshika null: Calculation completed successfully
[2025-10-23T05:06:31.124Z] [LOG] 📊 Progress: 25/34 (73.5%)
[2025-10-23T05:06:31.124Z] [LOG] 
🧮 Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-23T05:06:31.124Z] [LOG] 📋 Record ID: b5626993-36dd-4689-ae1e-6103bc4ac0d0
[2025-10-23T05:06:31.125Z] [LOG] 
======================================================================
[2025-10-23T05:06:31.125Z] [LOG] 🧮 CALCULATING PAYROLL: Nimdiya Ranasinghe null (EMP000045)
[2025-10-23T05:06:31.125Z] [LOG] ======================================================================
[2025-10-23T05:06:32.084Z] [LOG] 🔍 Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-23T05:06:32.084Z] [LOG]    Total components: 13
[2025-10-23T05:06:32.085Z] [LOG]    Applicable components: 13
[2025-10-23T05:06:32.085Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T05:06:33.685Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:06:33.686Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:06:33.941Z] [LOG] 📊 Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:34.191Z] [LOG] 📊 Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:34.452Z] [LOG] 📊 Found 0 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:34.453Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:06:34.453Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:06:34.669Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:06:34.670Z] [LOG]    Employee ID: 01444074-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:34.670Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:06:34.670Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:06:34.671Z] [LOG]    Base Salary (Full Month): Rs.35000.00
[2025-10-23T05:06:34.918Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:06:34.919Z] [LOG]       Daily Salary: Rs.1400.00
[2025-10-23T05:06:34.919Z] [LOG]       Weekday Hourly Rate: Rs.164.71
[2025-10-23T05:06:34.920Z] [LOG]       Saturday Hourly Rate: Rs.311.11
[2025-10-23T05:06:34.920Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:06:34.921Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:06:34.921Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:06:35.570Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:06:35.570Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:06:35.787Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:06:35.788Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:06:35.788Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:06:35.788Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:06:35.789Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:06:35.789Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:06:35.789Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:06:35.789Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:06:36.031Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:06:36.032Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:06:36.032Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:06:36.032Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:06:36.316Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:06:36.317Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:06:36.317Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:06:36.318Z] [LOG]       Current Time: 10:36:36
[2025-10-23T05:06:36.318Z] [LOG]       Expected Hours (scheduled → now): 2.11h
[2025-10-23T05:06:36.318Z] [LOG]       Actual Hours (check-in → now): 2.11h
[2025-10-23T05:06:36.319Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:06:36.319Z] [LOG]       Weekday: 121.11h
[2025-10-23T05:06:36.319Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:06:36.320Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:06:36.320Z] [LOG]       Total Expected: 134.61h
[2025-10-23T05:06:36.320Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:06:36.321Z] [LOG]       Weekday: 27.61h (includes 2.11h live)
[2025-10-23T05:06:36.321Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:06:36.321Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:06:36.322Z] [LOG]       Total Actual: 32.11h
[2025-10-23T05:06:36.322Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:06:36.322Z] [LOG]       Weekday: 121.11h × Rs.164.71 = Rs.19948.04
[2025-10-23T05:06:36.322Z] [LOG]       Saturday: 13.50h × Rs.311.11 = Rs.4199.99
[2025-10-23T05:06:36.323Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:36.323Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:36.323Z] [LOG]       Total Expected Earned: Rs.24148.03
[2025-10-23T05:06:36.324Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:06:36.324Z] [LOG]       Weekday: 27.61h × Rs.164.71 = Rs.4547.66
[2025-10-23T05:06:36.324Z] [LOG]       Saturday: 4.50h × Rs.311.11 = Rs.1400.00
[2025-10-23T05:06:36.324Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:36.325Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:36.325Z] [LOG]       Total Actual Earned: Rs.5947.65
[2025-10-23T05:06:36.326Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:06:36.326Z] [LOG]       Calculated At: Oct 23, 2025, 10:36:36
[2025-10-23T05:06:36.326Z] [LOG]       Expected Earned (until NOW): Rs.24148.03
[2025-10-23T05:06:36.327Z] [LOG]       Actual Earned (until NOW): Rs.5947.65
[2025-10-23T05:06:36.327Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:36.327Z] [LOG]       Attendance Deduction: Rs.18200.38
[2025-10-23T05:06:36.328Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:06:36.328Z] [LOG]       📉 Shortfall: 102.50 hours (75.37% of expected)
[2025-10-23T05:06:36.329Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:06:36.329Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:06:36.329Z] [LOG]    Base Salary (Full): Rs.35000.00
[2025-10-23T05:06:36.330Z] [LOG]    Actual Earned Base: Rs.5947.65
[2025-10-23T05:06:36.330Z] [LOG]    Attendance Shortfall: Rs.18200.38
[2025-10-23T05:06:36.330Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:06:36.331Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:06:36.331Z] [LOG]    Gross Salary: 5947.652557877778
[2025-10-23T05:06:36.332Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:06:36.332Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:06:36.332Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:36.333Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:06:36.333Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:36.333Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:06:36.333Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:36.334Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:06:36.334Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:36.334Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:06:36.335Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:36.335Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:06:36.335Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:36.335Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:06:36.336Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:36.337Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:06:36.337Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:36.337Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:06:36.337Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:36.337Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:06:36.338Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:36.338Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:06:36.338Z] [LOG]    EPF/ETF calculated on: Rs.5947.65
[2025-10-23T05:06:36.338Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:06:36.339Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:06:36.339Z] [LOG] 💰 GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-23T05:06:36.339Z] [LOG]    Base Salary: 35000
[2025-10-23T05:06:36.340Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:06:36.340Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:06:36.340Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:36.341Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:06:36.341Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:36.341Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:06:36.344Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:36.596Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:06:36.596Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:06:36.597Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:06:36.597Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:06:36.597Z] [LOG]    Actual Earned Base: Rs.5947.65
[2025-10-23T05:06:36.598Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:06:36.598Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:06:36.598Z] [LOG]    = Gross Salary: Rs.5947.65
[2025-10-23T05:06:36.598Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:06:36.599Z] [LOG]    Attendance Shortfall (Info): Rs.18200.38
[2025-10-23T05:06:36.599Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:06:36.599Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:06:36.599Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:06:36.600Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:06:36.600Z] [LOG]    Gross Salary: Rs.5947.65
[2025-10-23T05:06:36.600Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:06:36.600Z] [LOG]    = NET SALARY: Rs.5947.65
[2025-10-23T05:06:36.902Z] [LOG] 
📝 Components to save:
[2025-10-23T05:06:36.902Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:06:36.903Z] [LOG]    Deduction components: 1
[2025-10-23T05:06:36.903Z] [LOG] Creating components for record b5626993-36dd-4689-ae1e-6103bc4ac0d0: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:06:36.904Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 5947.652557877778
}
[2025-10-23T05:06:37.111Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:06:37.316Z] [LOG] Created payroll_record_component: b0212a42-7ca6-4415-b6cc-c4288adab6d4 for Base Salary
[2025-10-23T05:06:37.316Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 18200.375
}
[2025-10-23T05:06:37.628Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:06:37.877Z] [LOG] Created payroll_record_component: 6804b9f2-046b-4ccb-84f1-1593fab1ae2b for Attendance Shortfall (Info)
[2025-10-23T05:06:38.258Z] [LOG] ✅ Financial balances updated successfully for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:38.259Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:06:38.259Z] [LOG] 
======================================================================
[2025-10-23T05:06:38.259Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Nimdiya Ranasinghe null
[2025-10-23T05:06:38.259Z] [LOG] ======================================================================
[2025-10-23T05:06:38.260Z] [LOG]    Base Salary (Full): Rs.35000.00
[2025-10-23T05:06:38.260Z] [LOG]    Actual Earned Base (Attendance-based): Rs.5947.65
[2025-10-23T05:06:38.260Z] [LOG]    Attendance Shortfall: Rs.18200.38
[2025-10-23T05:06:38.260Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:38.261Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:06:38.261Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:06:38.261Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:38.262Z] [LOG]    GROSS SALARY: Rs.5947.65
[2025-10-23T05:06:38.262Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:38.262Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:06:38.262Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:06:38.262Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:06:38.263Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:06:38.263Z] [LOG]       - Attendance Shortfall (Info): Rs.18200.38
[2025-10-23T05:06:38.263Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:06:38.264Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:38.264Z] [LOG]    NET SALARY: Rs.5947.65
[2025-10-23T05:06:38.264Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:06:38.265Z] [LOG] ======================================================================

[2025-10-23T05:06:38.265Z] [LOG] ✅ Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-23T05:06:38.265Z] [LOG] 📊 Progress: 26/34 (76.5%)
[2025-10-23T05:06:38.266Z] [LOG] 
🧮 Processing: Chamodi null (EMP000032)
[2025-10-23T05:06:38.266Z] [LOG] 📋 Record ID: bac17524-dc62-4446-ac5b-3ee961b1e23b
[2025-10-23T05:06:38.266Z] [LOG] 
======================================================================
[2025-10-23T05:06:38.266Z] [LOG] 🧮 CALCULATING PAYROLL: Chamodi null (EMP000032)
[2025-10-23T05:06:38.267Z] [LOG] ======================================================================
[2025-10-23T05:06:39.280Z] [LOG] 🔍 Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-23T05:06:39.280Z] [LOG]    Total components: 13
[2025-10-23T05:06:39.281Z] [LOG]    Applicable components: 13
[2025-10-23T05:06:39.281Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T05:06:40.799Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:06:40.800Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:06:41.055Z] [LOG] 📊 Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:41.269Z] [LOG] 📊 Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:41.490Z] [LOG] 📊 Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:41.491Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:06:41.491Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:06:41.699Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:06:41.699Z] [LOG]    Employee ID: 0143f302-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:41.699Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:06:41.699Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:06:41.700Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T05:06:41.958Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:06:41.959Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T05:06:41.959Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T05:06:41.959Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T05:06:41.959Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:06:41.959Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:06:41.959Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:06:42.753Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:06:42.753Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:06:43.102Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:06:43.103Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:06:43.103Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:06:43.103Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:06:43.104Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:06:43.104Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:06:43.104Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:06:43.105Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:06:43.382Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:06:43.383Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:06:43.383Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:06:43.383Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:06:43.622Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:06:43.622Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:06:43.622Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:06:43.623Z] [LOG]       Current Time: 10:36:43
[2025-10-23T05:06:43.624Z] [LOG]       Expected Hours (scheduled → now): 2.11h
[2025-10-23T05:06:43.624Z] [LOG]       Actual Hours (check-in → now): 2.11h
[2025-10-23T05:06:43.624Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:06:43.624Z] [LOG]       Weekday: 121.11h
[2025-10-23T05:06:43.625Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:06:43.625Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:06:43.625Z] [LOG]       Total Expected: 134.61h
[2025-10-23T05:06:43.626Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:06:43.626Z] [LOG]       Weekday: 27.61h (includes 2.11h live)
[2025-10-23T05:06:43.627Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:06:43.627Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:06:43.627Z] [LOG]       Total Actual: 32.11h
[2025-10-23T05:06:43.628Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:06:43.628Z] [LOG]       Weekday: 121.11h × Rs.235.29 = Rs.28496.47
[2025-10-23T05:06:43.629Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T05:06:43.629Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:43.629Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:43.630Z] [LOG]       Total Expected Earned: Rs.34496.41
[2025-10-23T05:06:43.630Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:06:43.631Z] [LOG]       Weekday: 27.61h × Rs.235.29 = Rs.6496.86
[2025-10-23T05:06:43.631Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T05:06:43.631Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:43.631Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:43.631Z] [LOG]       Total Actual Earned: Rs.8496.84
[2025-10-23T05:06:43.632Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:06:43.632Z] [LOG]       Calculated At: Oct 23, 2025, 10:36:43
[2025-10-23T05:06:43.633Z] [LOG]       Expected Earned (until NOW): Rs.34496.41
[2025-10-23T05:06:43.633Z] [LOG]       Actual Earned (until NOW): Rs.8496.84
[2025-10-23T05:06:43.633Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:43.634Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T05:06:43.634Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:06:43.634Z] [LOG]       📉 Shortfall: 102.50 hours (75.37% of expected)
[2025-10-23T05:06:43.635Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:06:43.635Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:06:43.635Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:06:43.636Z] [LOG]    Actual Earned Base: Rs.8496.84
[2025-10-23T05:06:43.637Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T05:06:43.637Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:06:43.638Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:06:43.638Z] [LOG]    Gross Salary: 8496.835061216667
[2025-10-23T05:06:43.638Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:06:43.638Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:06:43.639Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:43.639Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:06:43.639Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:43.639Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:06:43.640Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:43.640Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:06:43.640Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:43.641Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:06:43.641Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:43.641Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:06:43.642Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:43.642Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:06:43.642Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:43.643Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:06:43.643Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:43.643Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:06:43.644Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:43.645Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:06:43.645Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:43.646Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:06:43.646Z] [LOG]    EPF/ETF calculated on: Rs.8496.84
[2025-10-23T05:06:43.646Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:06:43.646Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:06:43.646Z] [LOG] 💰 GROSS CALCULATION for Chamodi null:
[2025-10-23T05:06:43.646Z] [LOG]    Base Salary: 50000
[2025-10-23T05:06:43.646Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:06:43.646Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:06:43.647Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:43.647Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:06:43.647Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:43.648Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:06:43.648Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:43.953Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:06:43.954Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:06:43.954Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:06:43.955Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:06:43.955Z] [LOG]    Actual Earned Base: Rs.8496.84
[2025-10-23T05:06:43.955Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:06:43.956Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:06:43.956Z] [LOG]    = Gross Salary: Rs.8496.84
[2025-10-23T05:06:43.956Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:06:43.956Z] [LOG]    Attendance Shortfall (Info): Rs.25999.57
[2025-10-23T05:06:43.957Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:06:43.957Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:06:43.957Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:06:43.958Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:06:43.958Z] [LOG]    Gross Salary: Rs.8496.84
[2025-10-23T05:06:43.958Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:06:43.958Z] [LOG]    = NET SALARY: Rs.8496.84
[2025-10-23T05:06:44.189Z] [LOG] 
📝 Components to save:
[2025-10-23T05:06:44.189Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:06:44.190Z] [LOG]    Deduction components: 1
[2025-10-23T05:06:44.190Z] [LOG] Creating components for record bac17524-dc62-4446-ac5b-3ee961b1e23b: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:06:44.190Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 8496.835061216667
}
[2025-10-23T05:06:44.431Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:06:44.710Z] [LOG] Created payroll_record_component: bca4e513-8378-480c-8048-1cff364a445f for Base Salary
[2025-10-23T05:06:44.710Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 25999.574999999997
}
[2025-10-23T05:06:44.997Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:06:45.256Z] [LOG] Created payroll_record_component: 2e00da47-9bb4-4950-ab74-bfec7ac5b0e2 for Attendance Shortfall (Info)
[2025-10-23T05:06:45.680Z] [LOG] ✅ Financial balances updated successfully for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:45.680Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:06:45.681Z] [LOG] 
======================================================================
[2025-10-23T05:06:45.681Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chamodi null
[2025-10-23T05:06:45.681Z] [LOG] ======================================================================
[2025-10-23T05:06:45.681Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:06:45.682Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8496.84
[2025-10-23T05:06:45.682Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T05:06:45.682Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:45.683Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:06:45.683Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:06:45.683Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:45.684Z] [LOG]    GROSS SALARY: Rs.8496.84
[2025-10-23T05:06:45.684Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:45.684Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:06:45.685Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:06:45.685Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:06:45.685Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:06:45.685Z] [LOG]       - Attendance Shortfall (Info): Rs.25999.57
[2025-10-23T05:06:45.686Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:06:45.687Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:45.687Z] [LOG]    NET SALARY: Rs.8496.84
[2025-10-23T05:06:45.687Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:06:45.688Z] [LOG] ======================================================================

[2025-10-23T05:06:45.688Z] [LOG] ✅ Chamodi null: Calculation completed successfully
[2025-10-23T05:06:45.688Z] [LOG] 📊 Progress: 27/34 (79.4%)
[2025-10-23T05:06:45.689Z] [LOG] 
🧮 Processing: Ratheeshanan null (EMP000047)
[2025-10-23T05:06:45.689Z] [LOG] 📋 Record ID: bf1ade65-b8ab-47ec-ab3d-5c31cc53880d
[2025-10-23T05:06:45.689Z] [LOG] 
======================================================================
[2025-10-23T05:06:45.690Z] [LOG] 🧮 CALCULATING PAYROLL: Ratheeshanan null (EMP000047)
[2025-10-23T05:06:45.690Z] [LOG] ======================================================================
[2025-10-23T05:06:46.792Z] [LOG] 🔍 Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-23T05:06:46.793Z] [LOG]    Total components: 13
[2025-10-23T05:06:46.793Z] [LOG]    Applicable components: 13
[2025-10-23T05:06:46.793Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T05:06:48.375Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:06:48.376Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:06:48.577Z] [LOG] 📊 Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:48.888Z] [LOG] 📊 Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:49.155Z] [LOG] 📊 Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:49.156Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:06:49.156Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:06:49.381Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:06:49.382Z] [LOG]    Employee ID: 01444966-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:49.382Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:06:49.382Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:06:49.383Z] [LOG]    Base Salary (Full Month): Rs.25000.00
[2025-10-23T05:06:49.653Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:06:49.654Z] [LOG]       Daily Salary: Rs.1000.00
[2025-10-23T05:06:49.654Z] [LOG]       Weekday Hourly Rate: Rs.117.65
[2025-10-23T05:06:49.655Z] [LOG]       Saturday Hourly Rate: Rs.222.22
[2025-10-23T05:06:49.655Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:06:49.655Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:06:49.656Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:06:50.546Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:06:50.546Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:06:50.779Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:06:50.780Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:06:50.780Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:06:50.780Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:06:50.781Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:06:50.781Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:06:50.781Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:06:50.782Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:06:51.591Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:06:51.591Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:06:51.591Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:06:51.592Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:06:51.878Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:06:51.878Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:06:51.878Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:06:51.879Z] [LOG]       Current Time: 10:36:51
[2025-10-23T05:06:51.879Z] [LOG]       Expected Hours (scheduled → now): 2.11h
[2025-10-23T05:06:51.880Z] [LOG]       Actual Hours (check-in → now): 2.11h
[2025-10-23T05:06:51.880Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:06:51.880Z] [LOG]       Weekday: 121.11h
[2025-10-23T05:06:51.881Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:06:51.881Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:06:51.881Z] [LOG]       Total Expected: 134.61h
[2025-10-23T05:06:51.881Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:06:51.882Z] [LOG]       Weekday: 27.61h (includes 2.11h live)
[2025-10-23T05:06:51.882Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:06:51.882Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:06:51.883Z] [LOG]       Total Actual: 32.11h
[2025-10-23T05:06:51.883Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:06:51.883Z] [LOG]       Weekday: 121.11h × Rs.117.65 = Rs.14249.11
[2025-10-23T05:06:51.883Z] [LOG]       Saturday: 13.50h × Rs.222.22 = Rs.2999.97
[2025-10-23T05:06:51.884Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:51.884Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:51.884Z] [LOG]       Total Expected Earned: Rs.17249.08
[2025-10-23T05:06:51.885Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:06:51.885Z] [LOG]       Weekday: 27.61h × Rs.117.65 = Rs.3248.84
[2025-10-23T05:06:51.885Z] [LOG]       Saturday: 4.50h × Rs.222.22 = Rs.999.99
[2025-10-23T05:06:51.886Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:51.886Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:51.887Z] [LOG]       Total Actual Earned: Rs.4248.83
[2025-10-23T05:06:51.888Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:06:51.888Z] [LOG]       Calculated At: Oct 23, 2025, 10:36:51
[2025-10-23T05:06:51.888Z] [LOG]       Expected Earned (until NOW): Rs.17249.08
[2025-10-23T05:06:51.889Z] [LOG]       Actual Earned (until NOW): Rs.4248.83
[2025-10-23T05:06:51.889Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:51.889Z] [LOG]       Attendance Deduction: Rs.13000.26
[2025-10-23T05:06:51.890Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:06:51.890Z] [LOG]       📉 Shortfall: 102.50 hours (75.37% of expected)
[2025-10-23T05:06:51.890Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:06:51.891Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:06:51.891Z] [LOG]    Base Salary (Full): Rs.25000.00
[2025-10-23T05:06:51.891Z] [LOG]    Actual Earned Base: Rs.4248.83
[2025-10-23T05:06:51.892Z] [LOG]    Attendance Shortfall: Rs.13000.26
[2025-10-23T05:06:51.892Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:06:51.892Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:06:51.893Z] [LOG]    Gross Salary: 4248.8254018611115
[2025-10-23T05:06:51.893Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:06:51.894Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:06:51.894Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:51.895Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:06:51.895Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:51.895Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:06:51.896Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:51.896Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:06:51.896Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:51.897Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:06:51.897Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:51.897Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:06:51.897Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:51.898Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:06:51.898Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:51.898Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:06:51.898Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:51.899Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:06:51.899Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:51.899Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:06:51.900Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:51.900Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:06:51.900Z] [LOG]    EPF/ETF calculated on: Rs.4248.83
[2025-10-23T05:06:51.901Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:06:51.901Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:06:51.901Z] [LOG] 💰 GROSS CALCULATION for Ratheeshanan null:
[2025-10-23T05:06:51.902Z] [LOG]    Base Salary: 25000
[2025-10-23T05:06:51.902Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:06:51.902Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:06:51.903Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:51.903Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:06:51.903Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:51.904Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:06:51.904Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:52.102Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:06:52.102Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:06:52.103Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:06:52.103Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:06:52.103Z] [LOG]    Actual Earned Base: Rs.4248.83
[2025-10-23T05:06:52.104Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:06:52.104Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:06:52.104Z] [LOG]    = Gross Salary: Rs.4248.83
[2025-10-23T05:06:52.105Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:06:52.105Z] [LOG]    Attendance Shortfall (Info): Rs.13000.26
[2025-10-23T05:06:52.105Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:06:52.105Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:06:52.106Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:06:52.106Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:06:52.106Z] [LOG]    Gross Salary: Rs.4248.83
[2025-10-23T05:06:52.107Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:06:52.107Z] [LOG]    = NET SALARY: Rs.4248.83
[2025-10-23T05:06:52.374Z] [LOG] 
📝 Components to save:
[2025-10-23T05:06:52.374Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:06:52.374Z] [LOG]    Deduction components: 1
[2025-10-23T05:06:52.375Z] [LOG] Creating components for record bf1ade65-b8ab-47ec-ab3d-5c31cc53880d: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:06:52.375Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 4248.8254018611115
}
[2025-10-23T05:06:52.678Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:06:52.981Z] [LOG] Created payroll_record_component: 7f8f3b51-9d71-44fc-bc54-43a6056742ce for Base Salary
[2025-10-23T05:06:52.981Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 13000.255000000001
}
[2025-10-23T05:06:53.234Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:06:53.455Z] [LOG] Created payroll_record_component: 376a5983-4c7c-46f1-b4c2-a48afed762d2 for Attendance Shortfall (Info)
[2025-10-23T05:06:53.957Z] [LOG] ✅ Financial balances updated successfully for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:53.958Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:06:53.958Z] [LOG] 
======================================================================
[2025-10-23T05:06:53.958Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ratheeshanan null
[2025-10-23T05:06:53.959Z] [LOG] ======================================================================
[2025-10-23T05:06:53.959Z] [LOG]    Base Salary (Full): Rs.25000.00
[2025-10-23T05:06:53.959Z] [LOG]    Actual Earned Base (Attendance-based): Rs.4248.83
[2025-10-23T05:06:53.960Z] [LOG]    Attendance Shortfall: Rs.13000.26
[2025-10-23T05:06:53.960Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:53.960Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:06:53.961Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:06:53.961Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:53.961Z] [LOG]    GROSS SALARY: Rs.4248.83
[2025-10-23T05:06:53.962Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:53.962Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:06:53.962Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:06:53.963Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:06:53.963Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:06:53.963Z] [LOG]       - Attendance Shortfall (Info): Rs.13000.26
[2025-10-23T05:06:53.964Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:06:53.964Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:06:53.964Z] [LOG]    NET SALARY: Rs.4248.83
[2025-10-23T05:06:53.965Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:06:53.965Z] [LOG] ======================================================================

[2025-10-23T05:06:53.965Z] [LOG] ✅ Ratheeshanan null: Calculation completed successfully
[2025-10-23T05:06:53.966Z] [LOG] 📊 Progress: 28/34 (82.4%)
[2025-10-23T05:06:53.966Z] [LOG] 
🧮 Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-23T05:06:53.967Z] [LOG] 📋 Record ID: cc0b080b-c317-431a-ac81-77e46d86730e
[2025-10-23T05:06:53.967Z] [LOG] 
======================================================================
[2025-10-23T05:06:53.967Z] [LOG] 🧮 CALCULATING PAYROLL: Ruvindu Hewabandu null (EMP000027)
[2025-10-23T05:06:53.967Z] [LOG] ======================================================================
[2025-10-23T05:06:54.940Z] [LOG] 🔍 Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-23T05:06:54.941Z] [LOG]    Total components: 13
[2025-10-23T05:06:54.941Z] [LOG]    Applicable components: 13
[2025-10-23T05:06:54.941Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T05:06:56.306Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:06:56.307Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:06:56.524Z] [LOG] 📊 Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:56.732Z] [LOG] 📊 Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:56.975Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:56.975Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:06:56.976Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:06:57.260Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:06:57.261Z] [LOG]    Employee ID: 0143e915-7105-11f0-a50f-98e743540430
[2025-10-23T05:06:57.261Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:06:57.262Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:06:57.262Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-23T05:06:57.742Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:06:57.742Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-23T05:06:57.743Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-23T05:06:57.743Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-23T05:06:57.743Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:06:57.744Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:06:57.744Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:06:58.457Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:06:58.457Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:06:58.678Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:06:58.679Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:06:58.679Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:06:58.679Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:06:58.679Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:06:58.680Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:06:58.680Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:06:58.680Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:06:58.918Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:06:58.918Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:06:58.918Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:06:58.919Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:06:59.175Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:06:59.176Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:06:59.176Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:06:59.177Z] [LOG]       Current Time: 10:36:59
[2025-10-23T05:06:59.177Z] [LOG]       Expected Hours (scheduled → now): 2.12h
[2025-10-23T05:06:59.177Z] [LOG]       Actual Hours (check-in → now): 2.12h
[2025-10-23T05:06:59.178Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:06:59.178Z] [LOG]       Weekday: 121.12h
[2025-10-23T05:06:59.178Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:06:59.179Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:06:59.179Z] [LOG]       Total Expected: 134.62h
[2025-10-23T05:06:59.179Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:06:59.180Z] [LOG]       Weekday: 27.62h (includes 2.12h live)
[2025-10-23T05:06:59.180Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:06:59.180Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:06:59.180Z] [LOG]       Total Actual: 32.12h
[2025-10-23T05:06:59.181Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:06:59.181Z] [LOG]       Weekday: 121.12h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:59.181Z] [LOG]       Saturday: 13.50h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:59.182Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:59.182Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:59.182Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-23T05:06:59.183Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:06:59.183Z] [LOG]       Weekday: 27.62h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:59.183Z] [LOG]       Saturday: 4.50h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:59.184Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:06:59.184Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:59.184Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-23T05:06:59.185Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:06:59.185Z] [LOG]       Calculated At: Oct 23, 2025, 10:36:59
[2025-10-23T05:06:59.186Z] [LOG]       Expected Earned (until NOW): Rs.0.00
[2025-10-23T05:06:59.186Z] [LOG]       Actual Earned (until NOW): Rs.0.00
[2025-10-23T05:06:59.187Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:06:59.187Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-23T05:06:59.187Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:06:59.188Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-23T05:06:59.188Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:06:59.188Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:06:59.188Z] [LOG]    Base Salary (Full): Rs.NaN
[2025-10-23T05:06:59.189Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T05:06:59.189Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T05:06:59.189Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:06:59.190Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:06:59.190Z] [LOG]    Gross Salary: 0
[2025-10-23T05:06:59.191Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:06:59.192Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:06:59.192Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:59.192Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:06:59.193Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:59.193Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:06:59.193Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:59.193Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:06:59.194Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:59.194Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:06:59.194Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:59.194Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:06:59.195Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:59.195Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:06:59.195Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:59.196Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:06:59.196Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:59.196Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:06:59.197Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:59.197Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:06:59.197Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:59.197Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:06:59.198Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-23T05:06:59.198Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:06:59.198Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:06:59.199Z] [LOG] 💰 GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-23T05:06:59.199Z] [LOG]    Base Salary: 0
[2025-10-23T05:06:59.199Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:06:59.200Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:06:59.200Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:59.200Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:06:59.201Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:59.201Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:06:59.201Z] [LOG]    Fixed amount: 0
[2025-10-23T05:06:59.434Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:06:59.435Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:06:59.435Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:06:59.435Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:06:59.435Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T05:06:59.436Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:06:59.436Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:06:59.436Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-23T05:06:59.437Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:06:59.437Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:06:59.438Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:06:59.438Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:06:59.438Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:06:59.438Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-23T05:06:59.439Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:06:59.439Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-23T05:06:59.701Z] [LOG] 
📝 Components to save:
[2025-10-23T05:06:59.701Z] [LOG]    Gross/Earnings components: 0
[2025-10-23T05:06:59.702Z] [LOG]    Deduction components: 0
[2025-10-23T05:06:59.702Z] [LOG] Creating components for record cc0b080b-c317-431a-ac81-77e46d86730e: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T05:07:00.154Z] [LOG] ✅ Financial balances updated successfully for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:00.155Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:07:00.155Z] [LOG] 
======================================================================
[2025-10-23T05:07:00.155Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ruvindu Hewabandu null
[2025-10-23T05:07:00.155Z] [LOG] ======================================================================
[2025-10-23T05:07:00.156Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-23T05:07:00.156Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-23T05:07:00.156Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T05:07:00.156Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:00.156Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:07:00.157Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:07:00.157Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:00.157Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-23T05:07:00.157Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:00.158Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:07:00.158Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:07:00.158Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:07:00.158Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:07:00.159Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-23T05:07:00.159Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:07:00.159Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:00.159Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-23T05:07:00.160Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:07:00.160Z] [LOG] ======================================================================

[2025-10-23T05:07:00.160Z] [LOG] ✅ Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-23T05:07:00.160Z] [LOG] 📊 Progress: 29/34 (85.3%)
[2025-10-23T05:07:00.161Z] [LOG] 
🧮 Processing: Office Team null (EMP000041)
[2025-10-23T05:07:00.161Z] [LOG] 📋 Record ID: d080697e-46de-4424-8487-3add5766c14c
[2025-10-23T05:07:00.161Z] [LOG] 
======================================================================
[2025-10-23T05:07:00.161Z] [LOG] 🧮 CALCULATING PAYROLL: Office Team null (EMP000041)
[2025-10-23T05:07:00.161Z] [LOG] ======================================================================
[2025-10-23T05:07:01.010Z] [LOG] 🔍 Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-23T05:07:01.010Z] [LOG]    Total components: 13
[2025-10-23T05:07:01.010Z] [LOG]    Applicable components: 13
[2025-10-23T05:07:01.011Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T05:07:02.533Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:07:02.533Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:07:02.759Z] [LOG] 📊 Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:03.027Z] [LOG] 📊 Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:03.270Z] [LOG] 📊 Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:03.271Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:07:03.271Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:07:03.494Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:07:03.495Z] [LOG]    Employee ID: 01442b21-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:03.495Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:07:03.495Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:07:03.495Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-23T05:07:03.736Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:07:03.736Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-23T05:07:03.736Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-23T05:07:03.737Z] [LOG]       Saturday Hourly Rate: Rs.0.01
[2025-10-23T05:07:03.737Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:07:03.737Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:07:03.737Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:07:04.457Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:07:04.458Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:07:04.778Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:07:04.779Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:07:04.779Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:07:04.779Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:07:04.779Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:07:04.779Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:07:04.780Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:07:04.780Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:07:04.978Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:07:04.979Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:07:04.979Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:07:04.979Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:07:05.224Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:07:05.225Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:07:05.225Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:07:05.226Z] [LOG]       Current Time: 10:37:05
[2025-10-23T05:07:05.226Z] [LOG]       Expected Hours (scheduled → now): 2.12h
[2025-10-23T05:07:05.226Z] [LOG]       Actual Hours (check-in → now): 2.12h
[2025-10-23T05:07:05.226Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:07:05.227Z] [LOG]       Weekday: 121.12h
[2025-10-23T05:07:05.227Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:07:05.227Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:07:05.227Z] [LOG]       Total Expected: 134.62h
[2025-10-23T05:07:05.227Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:07:05.228Z] [LOG]       Weekday: 27.62h (includes 2.12h live)
[2025-10-23T05:07:05.228Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:07:05.228Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:07:05.228Z] [LOG]       Total Actual: 32.12h
[2025-10-23T05:07:05.229Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:07:05.229Z] [LOG]       Weekday: 121.12h × Rs.0.00 = Rs.0.00
[2025-10-23T05:07:05.229Z] [LOG]       Saturday: 13.50h × Rs.0.01 = Rs.0.14
[2025-10-23T05:07:05.229Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:07:05.229Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:07:05.230Z] [LOG]       Total Expected Earned: Rs.0.14
[2025-10-23T05:07:05.230Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:07:05.230Z] [LOG]       Weekday: 27.62h × Rs.0.00 = Rs.0.00
[2025-10-23T05:07:05.230Z] [LOG]       Saturday: 4.50h × Rs.0.01 = Rs.0.04
[2025-10-23T05:07:05.230Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:07:05.230Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:07:05.231Z] [LOG]       Total Actual Earned: Rs.0.04
[2025-10-23T05:07:05.231Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:07:05.232Z] [LOG]       Calculated At: Oct 23, 2025, 10:37:05
[2025-10-23T05:07:05.232Z] [LOG]       Expected Earned (until NOW): Rs.0.14
[2025-10-23T05:07:05.232Z] [LOG]       Actual Earned (until NOW): Rs.0.04
[2025-10-23T05:07:05.232Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:07:05.232Z] [LOG]       Attendance Deduction: Rs.0.09
[2025-10-23T05:07:05.233Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:07:05.233Z] [LOG]       📉 Shortfall: 102.50 hours (66.67% of expected)
[2025-10-23T05:07:05.233Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:07:05.233Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:07:05.233Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-23T05:07:05.234Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-23T05:07:05.234Z] [LOG]    Attendance Shortfall: Rs.0.09
[2025-10-23T05:07:05.234Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:07:05.234Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:07:05.235Z] [LOG]    Gross Salary: 0.045
[2025-10-23T05:07:05.235Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:07:05.235Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:07:05.235Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:05.236Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:07:05.237Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:05.237Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:07:05.237Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:05.237Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:07:05.238Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:05.238Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:07:05.239Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:05.239Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:07:05.239Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:05.239Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:07:05.240Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:05.240Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:07:05.240Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:05.240Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:07:05.240Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:05.241Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:07:05.241Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:05.241Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:07:05.241Z] [LOG]    EPF/ETF calculated on: Rs.0.04
[2025-10-23T05:07:05.241Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:07:05.242Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:07:05.242Z] [LOG] 💰 GROSS CALCULATION for Office Team null:
[2025-10-23T05:07:05.242Z] [LOG]    Base Salary: 1
[2025-10-23T05:07:05.242Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:07:05.243Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:07:05.243Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:05.243Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:07:05.244Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:05.244Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:07:05.244Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:05.471Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:07:05.471Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:07:05.472Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:07:05.472Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:07:05.472Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-23T05:07:05.472Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:07:05.473Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:07:05.473Z] [LOG]    = Gross Salary: Rs.0.04
[2025-10-23T05:07:05.473Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:07:05.473Z] [LOG]    Attendance Shortfall (Info): Rs.0.09
[2025-10-23T05:07:05.473Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:07:05.474Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:07:05.474Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:07:05.474Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:07:05.475Z] [LOG]    Gross Salary: Rs.0.04
[2025-10-23T05:07:05.475Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:07:05.475Z] [LOG]    = NET SALARY: Rs.0.04
[2025-10-23T05:07:05.780Z] [LOG] 
📝 Components to save:
[2025-10-23T05:07:05.781Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:07:05.781Z] [LOG]    Deduction components: 1
[2025-10-23T05:07:05.781Z] [LOG] Creating components for record d080697e-46de-4424-8487-3add5766c14c: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:07:05.782Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 0.045
}
[2025-10-23T05:07:06.036Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:07:06.272Z] [LOG] Created payroll_record_component: 00909c59-dcc8-4a97-9ca4-1ce84aaa057b for Base Salary
[2025-10-23T05:07:06.273Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 0.09000000000000001
}
[2025-10-23T05:07:06.559Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:07:06.804Z] [LOG] Created payroll_record_component: 9aa8b5ce-3508-49f4-918f-d545995df98b for Attendance Shortfall (Info)
[2025-10-23T05:07:07.220Z] [LOG] ✅ Financial balances updated successfully for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:07.220Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:07:07.220Z] [LOG] 
======================================================================
[2025-10-23T05:07:07.220Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Office Team null
[2025-10-23T05:07:07.221Z] [LOG] ======================================================================
[2025-10-23T05:07:07.221Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-23T05:07:07.221Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.04
[2025-10-23T05:07:07.222Z] [LOG]    Attendance Shortfall: Rs.0.09
[2025-10-23T05:07:07.222Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:07.222Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:07:07.222Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:07:07.223Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:07.223Z] [LOG]    GROSS SALARY: Rs.0.04
[2025-10-23T05:07:07.223Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:07.223Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:07:07.223Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:07:07.223Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:07:07.224Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:07:07.224Z] [LOG]       - Attendance Shortfall (Info): Rs.0.09
[2025-10-23T05:07:07.224Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:07:07.224Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:07.224Z] [LOG]    NET SALARY: Rs.0.04
[2025-10-23T05:07:07.225Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:07:07.225Z] [LOG] ======================================================================

[2025-10-23T05:07:07.225Z] [LOG] ✅ Office Team null: Calculation completed successfully
[2025-10-23T05:07:07.225Z] [LOG] 📊 Progress: 30/34 (88.2%)
[2025-10-23T05:07:07.226Z] [LOG] 
🧮 Processing: Prasanthan null (EMP000001)
[2025-10-23T05:07:07.226Z] [LOG] 📋 Record ID: d8d769b4-70f1-4da4-b9a0-b6253af23b83
[2025-10-23T05:07:07.226Z] [LOG] 
======================================================================
[2025-10-23T05:07:07.226Z] [LOG] 🧮 CALCULATING PAYROLL: Prasanthan null (EMP000001)
[2025-10-23T05:07:07.227Z] [LOG] ======================================================================
[2025-10-23T05:07:08.100Z] [LOG] 🔍 Component filtering for employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-23T05:07:08.101Z] [LOG]    Total components: 13
[2025-10-23T05:07:08.101Z] [LOG]    Applicable components: 13
[2025-10-23T05:07:08.102Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T05:07:09.468Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:07:09.469Z] [LOG] 🔄 Processing financial records for employee 014397c7-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:07:09.701Z] [LOG] 📊 Found 0 active loans for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:09.941Z] [LOG] 📊 Found 0 active advances for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:10.184Z] [LOG] 📊 Found 0 approved bonuses for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:10.184Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:07:10.185Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:07:10.460Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:07:10.460Z] [LOG]    Employee ID: 014397c7-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:10.460Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:07:10.461Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:07:10.461Z] [LOG]    Base Salary (Full Month): Rs.150000.00
[2025-10-23T05:07:10.656Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:07:10.657Z] [LOG]       Daily Salary: Rs.6000.00
[2025-10-23T05:07:10.657Z] [LOG]       Weekday Hourly Rate: Rs.705.88
[2025-10-23T05:07:10.657Z] [LOG]       Saturday Hourly Rate: Rs.1333.33
[2025-10-23T05:07:10.658Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:07:10.658Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:07:10.658Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:07:11.306Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:07:11.307Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:07:11.499Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:07:11.499Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:07:11.500Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:07:11.500Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:07:11.500Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:07:11.501Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:07:11.501Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:07:11.501Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:07:11.747Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:07:11.747Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:07:11.748Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:07:11.748Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:07:11.938Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:07:11.939Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:07:11.939Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:07:11.939Z] [LOG]       Current Time: 10:37:11
[2025-10-23T05:07:11.939Z] [LOG]       Expected Hours (scheduled → now): 2.12h
[2025-10-23T05:07:11.940Z] [LOG]       Actual Hours (check-in → now): 2.12h
[2025-10-23T05:07:11.940Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:07:11.940Z] [LOG]       Weekday: 121.12h
[2025-10-23T05:07:11.940Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:07:11.940Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:07:11.940Z] [LOG]       Total Expected: 134.62h
[2025-10-23T05:07:11.940Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:07:11.940Z] [LOG]       Weekday: 27.62h (includes 2.12h live)
[2025-10-23T05:07:11.940Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:07:11.941Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:07:11.941Z] [LOG]       Total Actual: 32.12h
[2025-10-23T05:07:11.941Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:07:11.941Z] [LOG]       Weekday: 121.12h × Rs.705.88 = Rs.85496.17
[2025-10-23T05:07:11.941Z] [LOG]       Saturday: 13.50h × Rs.1333.33 = Rs.17999.95
[2025-10-23T05:07:11.941Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:07:11.941Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:07:11.942Z] [LOG]       Total Expected Earned: Rs.103496.13
[2025-10-23T05:07:11.942Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:07:11.942Z] [LOG]       Weekday: 27.62h × Rs.705.88 = Rs.19496.39
[2025-10-23T05:07:11.942Z] [LOG]       Saturday: 4.50h × Rs.1333.33 = Rs.5999.98
[2025-10-23T05:07:11.942Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:07:11.943Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:07:11.943Z] [LOG]       Total Actual Earned: Rs.25496.38
[2025-10-23T05:07:11.944Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:07:11.944Z] [LOG]       Calculated At: Oct 23, 2025, 10:37:11
[2025-10-23T05:07:11.945Z] [LOG]       Expected Earned (until NOW): Rs.103496.13
[2025-10-23T05:07:11.945Z] [LOG]       Actual Earned (until NOW): Rs.25496.38
[2025-10-23T05:07:11.945Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:07:11.945Z] [LOG]       Attendance Deduction: Rs.77999.75
[2025-10-23T05:07:11.945Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:07:11.945Z] [LOG]       📉 Shortfall: 102.50 hours (75.36% of expected)
[2025-10-23T05:07:11.945Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:07:11.946Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:07:11.946Z] [LOG]    Base Salary (Full): Rs.150000.00
[2025-10-23T05:07:11.946Z] [LOG]    Actual Earned Base: Rs.25496.38
[2025-10-23T05:07:11.946Z] [LOG]    Attendance Shortfall: Rs.77999.75
[2025-10-23T05:07:11.947Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:07:11.947Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:07:11.947Z] [LOG]    Gross Salary: 25496.37844317778
[2025-10-23T05:07:11.947Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:07:11.947Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:07:11.947Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:11.948Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:07:11.948Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:11.948Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:07:11.948Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:11.948Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:07:11.948Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:11.948Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:07:11.948Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:11.948Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:07:11.948Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:11.949Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:07:11.949Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:11.949Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:07:11.949Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:11.949Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:07:11.949Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:11.949Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:07:11.949Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:11.949Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:07:11.950Z] [LOG]    EPF/ETF calculated on: Rs.25496.38
[2025-10-23T05:07:11.950Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:07:11.950Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:07:11.950Z] [LOG] 💰 GROSS CALCULATION for Prasanthan null:
[2025-10-23T05:07:11.950Z] [LOG]    Base Salary: 150000
[2025-10-23T05:07:11.950Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:07:11.951Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:07:11.954Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:11.957Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:07:11.958Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:11.959Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:07:11.959Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:12.168Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:07:12.168Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:07:12.169Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:07:12.169Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:07:12.169Z] [LOG]    Actual Earned Base: Rs.25496.38
[2025-10-23T05:07:12.169Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:07:12.169Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:07:12.170Z] [LOG]    = Gross Salary: Rs.25496.38
[2025-10-23T05:07:12.170Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:07:12.170Z] [LOG]    Attendance Shortfall (Info): Rs.77999.75
[2025-10-23T05:07:12.170Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:07:12.170Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:07:12.170Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:07:12.171Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:07:12.171Z] [LOG]    Gross Salary: Rs.25496.38
[2025-10-23T05:07:12.171Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:07:12.171Z] [LOG]    = NET SALARY: Rs.25496.38
[2025-10-23T05:07:12.384Z] [LOG] 
📝 Components to save:
[2025-10-23T05:07:12.384Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:07:12.384Z] [LOG]    Deduction components: 1
[2025-10-23T05:07:12.384Z] [LOG] Creating components for record d8d769b4-70f1-4da4-b9a0-b6253af23b83: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:07:12.384Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 25496.37844317778
}
[2025-10-23T05:07:12.594Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:07:12.793Z] [LOG] Created payroll_record_component: ab342c3d-92af-4327-add7-cc701d5bc6ae for Base Salary
[2025-10-23T05:07:12.793Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 77999.75
}
[2025-10-23T05:07:13.000Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:07:13.198Z] [LOG] Created payroll_record_component: a7bdaf8e-e4aa-48fc-b1df-96821d51897e for Attendance Shortfall (Info)
[2025-10-23T05:07:13.643Z] [LOG] ✅ Financial balances updated successfully for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:13.644Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:07:13.644Z] [LOG] 
======================================================================
[2025-10-23T05:07:13.644Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Prasanthan null
[2025-10-23T05:07:13.644Z] [LOG] ======================================================================
[2025-10-23T05:07:13.645Z] [LOG]    Base Salary (Full): Rs.150000.00
[2025-10-23T05:07:13.645Z] [LOG]    Actual Earned Base (Attendance-based): Rs.25496.38
[2025-10-23T05:07:13.645Z] [LOG]    Attendance Shortfall: Rs.77999.75
[2025-10-23T05:07:13.645Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:13.645Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:07:13.645Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:07:13.646Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:13.646Z] [LOG]    GROSS SALARY: Rs.25496.38
[2025-10-23T05:07:13.646Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:13.647Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:07:13.647Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:07:13.647Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:07:13.647Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:07:13.648Z] [LOG]       - Attendance Shortfall (Info): Rs.77999.75
[2025-10-23T05:07:13.648Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:07:13.648Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:13.649Z] [LOG]    NET SALARY: Rs.25496.38
[2025-10-23T05:07:13.649Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:07:13.649Z] [LOG] ======================================================================

[2025-10-23T05:07:13.649Z] [LOG] ✅ Prasanthan null: Calculation completed successfully
[2025-10-23T05:07:13.650Z] [LOG] 📊 Progress: 31/34 (91.2%)
[2025-10-23T05:07:13.650Z] [LOG] 
🧮 Processing: Waruni null (EMP000024)
[2025-10-23T05:07:13.650Z] [LOG] 📋 Record ID: df5a103e-7ac7-4195-a58f-306aea4d1cdf
[2025-10-23T05:07:13.651Z] [LOG] 
======================================================================
[2025-10-23T05:07:13.651Z] [LOG] 🧮 CALCULATING PAYROLL: Waruni null (EMP000024)
[2025-10-23T05:07:13.651Z] [LOG] ======================================================================
[2025-10-23T05:07:14.585Z] [LOG] 🔍 Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-23T05:07:14.585Z] [LOG]    Total components: 13
[2025-10-23T05:07:14.585Z] [LOG]    Applicable components: 13
[2025-10-23T05:07:14.585Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T05:07:15.858Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:07:15.858Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:07:16.058Z] [LOG] 📊 Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:16.256Z] [LOG] 📊 Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:16.512Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:16.513Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:07:16.513Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:07:16.741Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:07:16.742Z] [LOG]    Employee ID: 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:16.742Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:07:16.742Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:07:16.743Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T05:07:16.988Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:07:16.989Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T05:07:16.989Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T05:07:16.989Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T05:07:16.990Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:07:16.990Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:07:16.990Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:07:17.711Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:07:17.711Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:07:17.943Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:07:17.943Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:07:17.943Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:07:17.943Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:07:17.944Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:07:17.944Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:07:17.944Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:07:17.944Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:07:18.180Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:07:18.181Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:07:18.181Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:07:18.181Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:07:18.425Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:07:18.425Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:07:18.425Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:07:18.425Z] [LOG]       Current Time: 10:37:18
[2025-10-23T05:07:18.425Z] [LOG]       Expected Hours (scheduled → now): 2.12h
[2025-10-23T05:07:18.425Z] [LOG]       Actual Hours (check-in → now): 2.12h
[2025-10-23T05:07:18.426Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:07:18.426Z] [LOG]       Weekday: 121.12h
[2025-10-23T05:07:18.426Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:07:18.426Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:07:18.426Z] [LOG]       Total Expected: 134.62h
[2025-10-23T05:07:18.426Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:07:18.426Z] [LOG]       Weekday: 27.62h (includes 2.12h live)
[2025-10-23T05:07:18.426Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:07:18.426Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:07:18.427Z] [LOG]       Total Actual: 32.12h
[2025-10-23T05:07:18.427Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:07:18.427Z] [LOG]       Weekday: 121.12h × Rs.235.29 = Rs.28498.74
[2025-10-23T05:07:18.427Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T05:07:18.427Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:07:18.427Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:07:18.427Z] [LOG]       Total Expected Earned: Rs.34498.68
[2025-10-23T05:07:18.427Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:07:18.427Z] [LOG]       Weekday: 27.62h × Rs.235.29 = Rs.6499.13
[2025-10-23T05:07:18.427Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T05:07:18.427Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:07:18.428Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:07:18.428Z] [LOG]       Total Actual Earned: Rs.8499.11
[2025-10-23T05:07:18.428Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:07:18.428Z] [LOG]       Calculated At: Oct 23, 2025, 10:37:18
[2025-10-23T05:07:18.428Z] [LOG]       Expected Earned (until NOW): Rs.34498.68
[2025-10-23T05:07:18.428Z] [LOG]       Actual Earned (until NOW): Rs.8499.11
[2025-10-23T05:07:18.429Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:07:18.429Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T05:07:18.429Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:07:18.429Z] [LOG]       📉 Shortfall: 102.50 hours (75.36% of expected)
[2025-10-23T05:07:18.429Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:07:18.429Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:07:18.429Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:07:18.429Z] [LOG]    Actual Earned Base: Rs.8499.11
[2025-10-23T05:07:18.429Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T05:07:18.429Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:07:18.430Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:07:18.430Z] [LOG]    Gross Salary: 8499.109727291667
[2025-10-23T05:07:18.430Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:07:18.430Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:07:18.430Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:18.430Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:07:18.430Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:18.430Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:07:18.430Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:18.431Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:07:18.431Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:18.431Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:07:18.431Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:18.431Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:07:18.431Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:18.431Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:07:18.431Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:18.432Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:07:18.432Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:18.432Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:07:18.432Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:18.432Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:07:18.432Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:18.432Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:07:18.433Z] [LOG]    EPF/ETF calculated on: Rs.8499.11
[2025-10-23T05:07:18.433Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:07:18.433Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:07:18.433Z] [LOG] 💰 GROSS CALCULATION for Waruni null:
[2025-10-23T05:07:18.433Z] [LOG]    Base Salary: 50000
[2025-10-23T05:07:18.433Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:07:18.433Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:07:18.433Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:18.434Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:07:18.434Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:18.434Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:07:18.435Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:18.753Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:07:18.753Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:07:18.754Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:07:18.754Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:07:18.754Z] [LOG]    Actual Earned Base: Rs.8499.11
[2025-10-23T05:07:18.754Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:07:18.755Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:07:18.755Z] [LOG]    = Gross Salary: Rs.8499.11
[2025-10-23T05:07:18.755Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:07:18.755Z] [LOG]    Attendance Shortfall (Info): Rs.25999.57
[2025-10-23T05:07:18.756Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:07:18.756Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:07:18.756Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:07:18.757Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:07:18.757Z] [LOG]    Gross Salary: Rs.8499.11
[2025-10-23T05:07:18.757Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:07:18.757Z] [LOG]    = NET SALARY: Rs.8499.11
[2025-10-23T05:07:18.952Z] [LOG] 
📝 Components to save:
[2025-10-23T05:07:18.952Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:07:18.953Z] [LOG]    Deduction components: 1
[2025-10-23T05:07:18.953Z] [LOG] Creating components for record df5a103e-7ac7-4195-a58f-306aea4d1cdf: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:07:18.953Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 8499.109727291667
}
[2025-10-23T05:07:19.149Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:07:19.380Z] [LOG] Created payroll_record_component: f260b311-75f0-4686-8d16-2362a7d2ba73 for Base Salary
[2025-10-23T05:07:19.381Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 25999.574999999997
}
[2025-10-23T05:07:19.620Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:07:19.861Z] [LOG] Created payroll_record_component: 838ef31d-7158-4979-acfd-b1c24c5abe52 for Attendance Shortfall (Info)
[2025-10-23T05:07:20.491Z] [LOG] ✅ Financial balances updated successfully for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:20.492Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:07:20.492Z] [LOG] 
======================================================================
[2025-10-23T05:07:20.492Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Waruni null
[2025-10-23T05:07:20.492Z] [LOG] ======================================================================
[2025-10-23T05:07:20.493Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:07:20.493Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8499.11
[2025-10-23T05:07:20.493Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T05:07:20.493Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:20.493Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:07:20.493Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:07:20.493Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:20.493Z] [LOG]    GROSS SALARY: Rs.8499.11
[2025-10-23T05:07:20.494Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:20.494Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:07:20.494Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:07:20.494Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:07:20.494Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:07:20.494Z] [LOG]       - Attendance Shortfall (Info): Rs.25999.57
[2025-10-23T05:07:20.494Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:07:20.494Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:20.494Z] [LOG]    NET SALARY: Rs.8499.11
[2025-10-23T05:07:20.494Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:07:20.494Z] [LOG] ======================================================================

[2025-10-23T05:07:20.495Z] [LOG] ✅ Waruni null: Calculation completed successfully
[2025-10-23T05:07:20.495Z] [LOG] 📊 Progress: 32/34 (94.1%)
[2025-10-23T05:07:20.495Z] [LOG] 
🧮 Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-23T05:07:20.495Z] [LOG] 📋 Record ID: e063159b-20b8-4c00-8fb6-bb1a25564501
[2025-10-23T05:07:20.495Z] [LOG] 
======================================================================
[2025-10-23T05:07:20.495Z] [LOG] 🧮 CALCULATING PAYROLL: R. D.A Kaushalya null (EMP000044)
[2025-10-23T05:07:20.495Z] [LOG] ======================================================================
[2025-10-23T05:07:21.511Z] [LOG] 🔍 Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-23T05:07:21.511Z] [LOG]    Total components: 13
[2025-10-23T05:07:21.511Z] [LOG]    Applicable components: 13
[2025-10-23T05:07:21.511Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T05:07:22.902Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:07:22.902Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:07:23.141Z] [LOG] 📊 Found 0 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:23.332Z] [LOG] 📊 Found 0 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:23.531Z] [LOG] 📊 Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:23.532Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:07:23.532Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:07:23.781Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:07:23.781Z] [LOG]    Employee ID: 01443963-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:23.781Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:07:23.782Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:07:23.782Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T05:07:24.029Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:07:24.029Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T05:07:24.029Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T05:07:24.029Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T05:07:24.030Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:07:24.030Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:07:24.030Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:07:24.771Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:07:24.771Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:07:25.082Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:07:25.082Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:07:25.082Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:07:25.082Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:07:25.083Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:07:25.083Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:07:25.083Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:07:25.083Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:07:25.296Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:07:25.296Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:07:25.296Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:07:25.297Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:07:25.495Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:07:25.495Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:07:25.495Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:07:25.496Z] [LOG]       Current Time: 10:37:25
[2025-10-23T05:07:25.497Z] [LOG]       Expected Hours (scheduled → now): 2.12h
[2025-10-23T05:07:25.497Z] [LOG]       Actual Hours (check-in → now): 2.12h
[2025-10-23T05:07:25.497Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:07:25.497Z] [LOG]       Weekday: 121.12h
[2025-10-23T05:07:25.498Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:07:25.498Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:07:25.498Z] [LOG]       Total Expected: 134.62h
[2025-10-23T05:07:25.498Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:07:25.499Z] [LOG]       Weekday: 27.62h (includes 2.12h live)
[2025-10-23T05:07:25.499Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:07:25.499Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:07:25.499Z] [LOG]       Total Actual: 32.12h
[2025-10-23T05:07:25.500Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:07:25.500Z] [LOG]       Weekday: 121.12h × Rs.235.29 = Rs.28499.21
[2025-10-23T05:07:25.500Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T05:07:25.500Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:07:25.500Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:07:25.500Z] [LOG]       Total Expected Earned: Rs.34499.15
[2025-10-23T05:07:25.500Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:07:25.500Z] [LOG]       Weekday: 27.62h × Rs.235.29 = Rs.6499.59
[2025-10-23T05:07:25.501Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T05:07:25.501Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:07:25.501Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:07:25.501Z] [LOG]       Total Actual Earned: Rs.8499.57
[2025-10-23T05:07:25.501Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:07:25.502Z] [LOG]       Calculated At: Oct 23, 2025, 10:37:25
[2025-10-23T05:07:25.502Z] [LOG]       Expected Earned (until NOW): Rs.34499.15
[2025-10-23T05:07:25.502Z] [LOG]       Actual Earned (until NOW): Rs.8499.57
[2025-10-23T05:07:25.502Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:07:25.502Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T05:07:25.502Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:07:25.502Z] [LOG]       📉 Shortfall: 102.50 hours (75.36% of expected)
[2025-10-23T05:07:25.503Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:07:25.503Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:07:25.503Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:07:25.503Z] [LOG]    Actual Earned Base: Rs.8499.57
[2025-10-23T05:07:25.503Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:07:25.504Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:07:25.504Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:07:25.505Z] [LOG]    Gross Salary: 8499.571810708334
[2025-10-23T05:07:25.505Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:07:25.505Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:07:25.505Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:25.505Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:07:25.506Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:25.506Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:07:25.507Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:25.507Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:07:25.508Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:25.508Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:07:25.508Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:25.508Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:07:25.508Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:25.508Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:07:25.509Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:25.509Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:07:25.509Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:25.509Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:07:25.509Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:25.509Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:07:25.510Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:25.510Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:07:25.510Z] [LOG]    EPF/ETF calculated on: Rs.8499.57
[2025-10-23T05:07:25.510Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:07:25.510Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:07:25.511Z] [LOG] 💰 GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-23T05:07:25.511Z] [LOG]    Base Salary: 50000
[2025-10-23T05:07:25.511Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:07:25.511Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:07:25.511Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:25.511Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:07:25.512Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:25.512Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:07:25.512Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:25.802Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:07:25.802Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:07:25.802Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:07:25.803Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:07:25.803Z] [LOG]    Actual Earned Base: Rs.8499.57
[2025-10-23T05:07:25.803Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:07:25.803Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:07:25.804Z] [LOG]    = Gross Salary: Rs.8499.57
[2025-10-23T05:07:25.804Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:07:25.804Z] [LOG]    Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:07:25.804Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:07:25.804Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:07:25.804Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:07:25.805Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:07:25.805Z] [LOG]    Gross Salary: Rs.8499.57
[2025-10-23T05:07:25.805Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:07:25.805Z] [LOG]    = NET SALARY: Rs.8499.57
[2025-10-23T05:07:26.016Z] [LOG] 
📝 Components to save:
[2025-10-23T05:07:26.016Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:07:26.016Z] [LOG]    Deduction components: 1
[2025-10-23T05:07:26.016Z] [LOG] Creating components for record e063159b-20b8-4c00-8fb6-bb1a25564501: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:07:26.017Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 8499.571810708334
}
[2025-10-23T05:07:26.213Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:07:26.505Z] [LOG] Created payroll_record_component: c14c813a-ff5f-4d8a-90d6-0da6836d7720 for Base Salary
[2025-10-23T05:07:26.505Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 25999.575
}
[2025-10-23T05:07:26.776Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:07:27.232Z] [LOG] Created payroll_record_component: 708eb864-dd99-4ab6-8c67-5ac9932e0124 for Attendance Shortfall (Info)
[2025-10-23T05:07:27.665Z] [LOG] ✅ Financial balances updated successfully for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:27.665Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:07:27.666Z] [LOG] 
======================================================================
[2025-10-23T05:07:27.666Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: R. D.A Kaushalya null
[2025-10-23T05:07:27.666Z] [LOG] ======================================================================
[2025-10-23T05:07:27.667Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:07:27.667Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8499.57
[2025-10-23T05:07:27.667Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T05:07:27.668Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:27.668Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:07:27.668Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:07:27.669Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:27.669Z] [LOG]    GROSS SALARY: Rs.8499.57
[2025-10-23T05:07:27.669Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:27.669Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:07:27.670Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:07:27.670Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:07:27.670Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:07:27.671Z] [LOG]       - Attendance Shortfall (Info): Rs.25999.58
[2025-10-23T05:07:27.671Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:07:27.671Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:27.672Z] [LOG]    NET SALARY: Rs.8499.57
[2025-10-23T05:07:27.672Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:07:27.672Z] [LOG] ======================================================================

[2025-10-23T05:07:27.673Z] [LOG] ✅ R. D.A Kaushalya null: Calculation completed successfully
[2025-10-23T05:07:27.673Z] [LOG] 📊 Progress: 33/34 (97.1%)
[2025-10-23T05:07:27.673Z] [LOG] 
🧮 Processing: Franklin null (EMP000018)
[2025-10-23T05:07:27.673Z] [LOG] 📋 Record ID: eaf3a25c-f203-4d37-a6f9-883182e3f0fe
[2025-10-23T05:07:27.673Z] [LOG] 
======================================================================
[2025-10-23T05:07:27.673Z] [LOG] 🧮 CALCULATING PAYROLL: Franklin null (EMP000018)
[2025-10-23T05:07:27.674Z] [LOG] ======================================================================
[2025-10-23T05:07:28.839Z] [LOG] 🔍 Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-23T05:07:28.840Z] [LOG]    Total components: 13
[2025-10-23T05:07:28.840Z] [LOG]    Applicable components: 13
[2025-10-23T05:07:28.840Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-23T05:07:30.260Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T05:07:30.260Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T05:07:30.456Z] [LOG] 📊 Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:30.694Z] [LOG] 📊 Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:30.889Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:30.890Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T05:07:30.890Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T05:07:31.085Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T05:07:31.085Z] [LOG]    Employee ID: 0143c037-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:31.086Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T05:07:31.086Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T05:07:31.086Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T05:07:31.293Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T05:07:31.294Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T05:07:31.294Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T05:07:31.294Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T05:07:31.295Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T05:07:31.295Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T05:07:31.295Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T05:07:32.150Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T05:07:32.151Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T05:07:32.356Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T05:07:32.357Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T05:07:32.357Z] [LOG]       Total completed sessions found: 4
[2025-10-23T05:07:32.357Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T05:07:32.358Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T05:07:32.358Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T05:07:32.358Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T05:07:32.358Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T05:07:32.584Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T05:07:32.584Z] [LOG]          Weekday: 25.50h
[2025-10-23T05:07:32.584Z] [LOG]          Saturday: 4.50h
[2025-10-23T05:07:32.585Z] [LOG]          Sunday: 0.00h
[2025-10-23T05:07:32.820Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T05:07:32.820Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T05:07:32.820Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T05:07:32.821Z] [LOG]       Current Time: 10:37:32
[2025-10-23T05:07:32.821Z] [LOG]       Expected Hours (scheduled → now): 2.13h
[2025-10-23T05:07:32.822Z] [LOG]       Actual Hours (check-in → now): 2.13h
[2025-10-23T05:07:32.822Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T05:07:32.822Z] [LOG]       Weekday: 121.13h
[2025-10-23T05:07:32.823Z] [LOG]       Saturday: 13.50h
[2025-10-23T05:07:32.823Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:07:32.823Z] [LOG]       Total Expected: 134.63h
[2025-10-23T05:07:32.823Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T05:07:32.824Z] [LOG]       Weekday: 27.63h (includes 2.13h live)
[2025-10-23T05:07:32.824Z] [LOG]       Saturday: 4.50h
[2025-10-23T05:07:32.824Z] [LOG]       Sunday: 0.00h
[2025-10-23T05:07:32.824Z] [LOG]       Total Actual: 32.13h
[2025-10-23T05:07:32.824Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T05:07:32.825Z] [LOG]       Weekday: 121.13h × Rs.235.29 = Rs.28499.69
[2025-10-23T05:07:32.825Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T05:07:32.825Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:07:32.825Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:07:32.825Z] [LOG]       Total Expected Earned: Rs.34499.63
[2025-10-23T05:07:32.825Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T05:07:32.826Z] [LOG]       Weekday: 27.63h × Rs.235.29 = Rs.6500.07
[2025-10-23T05:07:32.826Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T05:07:32.826Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T05:07:32.826Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:07:32.826Z] [LOG]       Total Actual Earned: Rs.8500.05
[2025-10-23T05:07:32.827Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T05:07:32.827Z] [LOG]       Calculated At: Oct 23, 2025, 10:37:32
[2025-10-23T05:07:32.827Z] [LOG]       Expected Earned (until NOW): Rs.34499.63
[2025-10-23T05:07:32.827Z] [LOG]       Actual Earned (until NOW): Rs.8500.05
[2025-10-23T05:07:32.827Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T05:07:32.827Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T05:07:32.828Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T05:07:32.828Z] [LOG]       📉 Shortfall: 102.50 hours (75.36% of expected)
[2025-10-23T05:07:32.828Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T05:07:32.828Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T05:07:32.828Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:07:32.828Z] [LOG]    Actual Earned Base: Rs.8500.05
[2025-10-23T05:07:32.829Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T05:07:32.829Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T05:07:32.829Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T05:07:32.829Z] [LOG]    Gross Salary: 8500.0505605
[2025-10-23T05:07:32.829Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-23T05:07:32.830Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T05:07:32.830Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:32.830Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T05:07:32.830Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:32.830Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T05:07:32.831Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:32.831Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T05:07:32.831Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:32.831Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T05:07:32.831Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:32.831Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T05:07:32.831Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:32.831Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T05:07:32.831Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:32.831Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T05:07:32.831Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:32.832Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T05:07:32.832Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:32.832Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-23T05:07:32.832Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:32.832Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T05:07:32.832Z] [LOG]    EPF/ETF calculated on: Rs.8500.05
[2025-10-23T05:07:32.832Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T05:07:32.832Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T05:07:32.832Z] [LOG] 💰 GROSS CALCULATION for Franklin null:
[2025-10-23T05:07:32.832Z] [LOG]    Base Salary: 50000
[2025-10-23T05:07:32.832Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-23T05:07:32.833Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T05:07:32.833Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:32.833Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T05:07:32.833Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:32.833Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-23T05:07:32.833Z] [LOG]    Fixed amount: 0
[2025-10-23T05:07:33.067Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T05:07:33.068Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:07:33.068Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T05:07:33.068Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T05:07:33.068Z] [LOG]    Actual Earned Base: Rs.8500.05
[2025-10-23T05:07:33.068Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T05:07:33.068Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T05:07:33.069Z] [LOG]    = Gross Salary: Rs.8500.05
[2025-10-23T05:07:33.069Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T05:07:33.069Z] [LOG]    Attendance Shortfall (Info): Rs.25999.57
[2025-10-23T05:07:33.069Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-23T05:07:33.069Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-23T05:07:33.069Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-23T05:07:33.069Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T05:07:33.069Z] [LOG]    Gross Salary: Rs.8500.05
[2025-10-23T05:07:33.069Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T05:07:33.069Z] [LOG]    = NET SALARY: Rs.8500.05
[2025-10-23T05:07:33.337Z] [LOG] 
📝 Components to save:
[2025-10-23T05:07:33.338Z] [LOG]    Gross/Earnings components: 1
[2025-10-23T05:07:33.338Z] [LOG]    Deduction components: 1
[2025-10-23T05:07:33.338Z] [LOG] Creating components for record eaf3a25c-f203-4d37-a6f9-883182e3f0fe: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-23T05:07:33.339Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 8500.0505605
}
[2025-10-23T05:07:33.588Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-23T05:07:33.788Z] [LOG] Created payroll_record_component: 4652596f-47f3-46f9-b5fc-2bd4d154c7a6 for Base Salary
[2025-10-23T05:07:33.789Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 25999.574999999997
}
[2025-10-23T05:07:34.089Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-23T05:07:34.405Z] [LOG] Created payroll_record_component: 3a5b391b-2a28-4f23-9159-0ef2bf7374cd for Attendance Shortfall (Info)
[2025-10-23T05:07:34.916Z] [LOG] ✅ Financial balances updated successfully for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-23T05:07:34.916Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T05:07:34.916Z] [LOG] 
======================================================================
[2025-10-23T05:07:34.917Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Franklin null
[2025-10-23T05:07:34.917Z] [LOG] ======================================================================
[2025-10-23T05:07:34.917Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T05:07:34.918Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8500.05
[2025-10-23T05:07:34.918Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T05:07:34.918Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:34.919Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T05:07:34.919Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T05:07:34.919Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:34.919Z] [LOG]    GROSS SALARY: Rs.8500.05
[2025-10-23T05:07:34.920Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:34.920Z] [LOG]    Deductions Breakdown:
[2025-10-23T05:07:34.920Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T05:07:34.921Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T05:07:34.921Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T05:07:34.921Z] [LOG]       - Attendance Shortfall (Info): Rs.25999.57
[2025-10-23T05:07:34.922Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-23T05:07:34.922Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T05:07:34.922Z] [LOG]    NET SALARY: Rs.8500.05
[2025-10-23T05:07:34.922Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-23T05:07:34.923Z] [LOG] ======================================================================

[2025-10-23T05:07:34.923Z] [LOG] ✅ Franklin null: Calculation completed successfully
[2025-10-23T05:07:34.923Z] [LOG] 📊 Progress: 34/34 (100.0%)
[2025-10-23T05:07:34.924Z] [LOG] 
============================================================
[2025-10-23T05:07:34.924Z] [LOG] 📈 Processing Summary: 34 successful, 0 failed
[2025-10-23T05:07:36.931Z] [LOG] 🎉 Payroll calculation completed successfully!
[2025-10-23T05:07:36.932Z] [LOG] 📊 Final Summary: 34 processed, 0 errors
[2025-10-23T05:07:36.932Z] [INFO] ================================================================================
[2025-10-23T05:07:36.933Z] [INFO] ⏰ Completed at: 2025-10-23T05:07:36.933Z
[2025-10-23T05:07:36.933Z] [INFO] 📊 Total log entries: 5871