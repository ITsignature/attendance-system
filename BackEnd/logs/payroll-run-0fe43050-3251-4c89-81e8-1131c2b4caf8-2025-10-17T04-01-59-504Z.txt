[2025-10-17T04:01:59.505Z] [INFO] 🚀 Payroll calculation logging started for run: 0fe43050-3251-4c89-81e8-1131c2b4caf8
[2025-10-17T04:01:59.505Z] [INFO] 📁 Log file: D:\attendance-system\BackEnd\logs\payroll-run-0fe43050-3251-4c89-81e8-1131c2b4caf8-2025-10-17T04-01-59-504Z.txt
[2025-10-17T04:01:59.505Z] [INFO] ⏰ Started at: 2025-10-17T04:01:59.505Z
[2025-10-17T04:01:59.505Z] [INFO] ================================================================================
[2025-10-17T04:01:59.505Z] [LOG] 🚀 Starting payroll calculation for run: 0fe43050-3251-4c89-81e8-1131c2b4caf8
[2025-10-17T04:01:59.506Z] [LOG] 👤 Client ID: it-signature, User ID: 059304ea-24a5-4d78-a290-cf09b9e53c4c
[2025-10-17T04:02:00.189Z] [LOG] ✅ Payroll run verified: august (MONTHLY_2025_08_REGULAR)
[2025-10-17T04:02:00.645Z] [LOG] 📊 Status updated to 'calculating'
[2025-10-17T04:02:01.328Z] [LOG] 👥 Processing 34 employee records:
[2025-10-17T04:02:01.329Z] [LOG] ============================================================
[2025-10-17T04:02:01.330Z] [LOG] 
🧮 Processing: Prasanthan null (EMP000001)
[2025-10-17T04:02:01.331Z] [LOG] 📋 Record ID: 185fd07a-929c-4e13-ab74-2586d195e2d7
[2025-10-17T04:02:01.333Z] [LOG] 
======================================================================
[2025-10-17T04:02:01.337Z] [LOG] 🧮 CALCULATING PAYROLL: Prasanthan null (EMP000001)
[2025-10-17T04:02:01.338Z] [LOG] ======================================================================
[2025-10-17T04:02:03.159Z] [LOG] 🔍 Component filtering for employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-17T04:02:03.160Z] [LOG]    Total components: 9
[2025-10-17T04:02:03.161Z] [LOG]    Applicable components: 9
[2025-10-17T04:02:03.161Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T04:02:05.021Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:02:05.022Z] [LOG] 🔄 Processing financial records for employee 014397c7-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:02:05.480Z] [LOG] 📊 Found 0 active loans for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:05.939Z] [LOG] 📊 Found 0 active advances for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:06.402Z] [LOG] 📊 Found 0 approved bonuses for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:06.404Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:02:06.405Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:02:06.407Z] [LOG] 💰 GROSS CALCULATION for Prasanthan null:
[2025-10-17T04:02:06.408Z] [LOG]    Base Salary: 150000
[2025-10-17T04:02:06.410Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:02:06.866Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:02:07.320Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:02:07.321Z] [LOG]    Employee ID: 014397c7-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:07.321Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:02:07.321Z] [LOG]    Base Salary: Rs.150000.00
[2025-10-17T04:02:07.777Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:02:07.778Z] [LOG]       Daily Salary: Rs.6000.00
[2025-10-17T04:02:07.779Z] [LOG]       Weekday Hourly Rate: Rs.705.88
[2025-10-17T04:02:07.779Z] [LOG]       Saturday Hourly Rate: Rs.705.88
[2025-10-17T04:02:07.780Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:02:08.238Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:02:08.239Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-17T04:02:08.239Z] [LOG]       Saturday: 0.00h
[2025-10-17T04:02:08.239Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:02:08.240Z] [LOG]       Total Worked: 0.00h
[2025-10-17T04:02:08.240Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:02:08.240Z] [LOG]       Weekday: 0.00h × Rs.705.88 = Rs.0.00
[2025-10-17T04:02:08.241Z] [LOG]       Saturday: 0.00h × Rs.705.88 = Rs.0.00
[2025-10-17T04:02:08.241Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:02:08.242Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:02:08.243Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T04:02:08.243Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:02:08.244Z] [LOG]       Base Salary: Rs.150000.00
[2025-10-17T04:02:08.244Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T04:02:08.245Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:02:08.245Z] [LOG]       Attendance Deduction: Rs.150000.00
[2025-10-17T04:02:08.245Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-17T04:02:08.247Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:02:08.247Z] [LOG]    Gross Salary: 150000
[2025-10-17T04:02:08.247Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:02:08.248Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:02:08.248Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:08.249Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:02:08.249Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:08.250Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:02:08.250Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:08.250Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:02:08.251Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:08.251Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:02:08.252Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:08.252Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:02:08.252Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:08.253Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:02:08.253Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:08.254Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:02:08.254Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:08.255Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:02:08.255Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:08.255Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:02:08.256Z] [LOG] Regular deductions for Prasanthan null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:02:08.256Z] [LOG] Combined deductions for Prasanthan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 150000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 150000
}
[2025-10-17T04:02:08.718Z] [LOG] Creating components for record 185fd07a-929c-4e13-ab74-2586d195e2d7: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 1
}
[2025-10-17T04:02:08.720Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 150000
}
[2025-10-17T04:02:09.184Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:02:09.648Z] [LOG] Created payroll_record_component: 1eface2b-267c-4633-9f99-918d9fc45051 for Attendance Deduction
[2025-10-17T04:02:09.649Z] [LOG] Processing component: {
  "name": "Income Tax",
  "type": "tax",
  "amount": 3000
}
[2025-10-17T04:02:09.877Z] [LOG] Using existing component ID: 72f98b53-4bd5-4713-98d0-e3a641ad8d0f
[2025-10-17T04:02:10.106Z] [LOG] Created payroll_record_component: 7b6a7ec3-c017-4b96-bdbf-43d2f3836477 for Income Tax
[2025-10-17T04:02:10.563Z] [LOG] ✅ Financial balances updated successfully for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:10.564Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:02:10.564Z] [LOG] 
======================================================================
[2025-10-17T04:02:10.565Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Prasanthan null
[2025-10-17T04:02:10.566Z] [LOG] ======================================================================
[2025-10-17T04:02:10.567Z] [LOG]    Gross Salary: Rs.150000.00
[2025-10-17T04:02:10.567Z] [LOG]    Total Deductions: Rs.150000.00
[2025-10-17T04:02:10.568Z] [LOG]       - Attendance Deduction: Rs.150000.00
[2025-10-17T04:02:10.568Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:02:10.569Z] [LOG]    Total Taxes: Rs.3000.00
[2025-10-17T04:02:10.570Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:02:10.571Z] [LOG]    NET SALARY: Rs.-3000.00
[2025-10-17T04:02:10.571Z] [LOG] ======================================================================

[2025-10-17T04:02:10.572Z] [LOG] ✅ Prasanthan null: Calculation completed successfully
[2025-10-17T04:02:10.573Z] [LOG] 📊 Progress: 1/34 (2.9%)
[2025-10-17T04:02:10.574Z] [LOG] 
🧮 Processing: Faizan Faizan (EMP000003)
[2025-10-17T04:02:10.578Z] [LOG] 📋 Record ID: 041fc4ac-53b6-4220-9017-a9d0f3f438da
[2025-10-17T04:02:10.579Z] [LOG] 
======================================================================
[2025-10-17T04:02:10.580Z] [LOG] 🧮 CALCULATING PAYROLL: Faizan Faizan (EMP000003)
[2025-10-17T04:02:10.580Z] [LOG] ======================================================================
[2025-10-17T04:02:11.504Z] [LOG] 🔍 Component filtering for employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-17T04:02:11.508Z] [LOG]    Total components: 9
[2025-10-17T04:02:11.509Z] [LOG]    Applicable components: 9
[2025-10-17T04:02:11.510Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-17T04:02:12.441Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:02:12.442Z] [LOG] 🔄 Processing financial records for employee 0143a057-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:02:12.672Z] [LOG] 📊 Found 0 active loans for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:12.900Z] [LOG] 📊 Found 0 active advances for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:13.133Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:13.133Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:02:13.135Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:02:13.136Z] [LOG] 💰 GROSS CALCULATION for Faizan Faizan:
[2025-10-17T04:02:13.136Z] [LOG]    Base Salary: 50000
[2025-10-17T04:02:13.137Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:02:13.369Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:02:13.599Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:02:13.600Z] [LOG]    Employee ID: 0143a057-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:13.600Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:02:13.601Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T04:02:13.836Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:02:13.837Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T04:02:13.838Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T04:02:13.838Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T04:02:13.839Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:02:14.075Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:02:14.089Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-17T04:02:14.089Z] [LOG]       Saturday: 0.00h
[2025-10-17T04:02:14.089Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:02:14.090Z] [LOG]       Total Worked: 0.00h
[2025-10-17T04:02:14.090Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:02:14.090Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T04:02:14.091Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T04:02:14.091Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:02:14.092Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:02:14.092Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T04:02:14.092Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:02:14.093Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T04:02:14.093Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T04:02:14.093Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:02:14.094Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-17T04:02:14.094Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-17T04:02:14.095Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:02:14.095Z] [LOG]    Gross Salary: 50000
[2025-10-17T04:02:14.095Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:02:14.096Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:02:14.096Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:14.096Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:02:14.097Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:14.097Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:02:14.097Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:14.097Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:02:14.097Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:14.098Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:02:14.098Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:14.098Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:02:14.099Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:14.099Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:02:14.099Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:14.099Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:02:14.100Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:14.100Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:02:14.100Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:14.100Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:02:14.101Z] [LOG] Regular deductions for Faizan Faizan: {
  "components": [],
  "total": 0
}
[2025-10-17T04:02:14.115Z] [LOG] Combined deductions for Faizan Faizan: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-17T04:02:14.345Z] [LOG] Creating components for record 041fc4ac-53b6-4220-9017-a9d0f3f438da: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:02:14.346Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-17T04:02:14.575Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:02:14.804Z] [LOG] Created payroll_record_component: bdfcd031-4b04-4aa3-b8ff-0bc251550c54 for Attendance Deduction
[2025-10-17T04:02:15.258Z] [LOG] ✅ Financial balances updated successfully for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:15.258Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:02:15.258Z] [LOG] 
======================================================================
[2025-10-17T04:02:15.259Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Faizan Faizan
[2025-10-17T04:02:15.259Z] [LOG] ======================================================================
[2025-10-17T04:02:15.259Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T04:02:15.260Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-17T04:02:15.260Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-17T04:02:15.260Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:02:15.261Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:02:15.261Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:02:15.261Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T04:02:15.261Z] [LOG] ======================================================================

[2025-10-17T04:02:15.262Z] [LOG] ✅ Faizan Faizan: Calculation completed successfully
[2025-10-17T04:02:15.262Z] [LOG] 📊 Progress: 2/34 (5.9%)
[2025-10-17T04:02:15.262Z] [LOG] 
🧮 Processing: Uthpala null (EMP000006)
[2025-10-17T04:02:15.263Z] [LOG] 📋 Record ID: 5f3dab19-4c6f-414e-a318-271c68a1ecf9
[2025-10-17T04:02:15.263Z] [LOG] 
======================================================================
[2025-10-17T04:02:15.263Z] [LOG] 🧮 CALCULATING PAYROLL: Uthpala null (EMP000006)
[2025-10-17T04:02:15.263Z] [LOG] ======================================================================
[2025-10-17T04:02:16.177Z] [LOG] 🔍 Component filtering for employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-17T04:02:16.177Z] [LOG]    Total components: 9
[2025-10-17T04:02:16.178Z] [LOG]    Applicable components: 9
[2025-10-17T04:02:16.179Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-17T04:02:25.342Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:02:25.343Z] [LOG] 🔄 Processing financial records for employee 0143a539-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:02:25.577Z] [LOG] 📊 Found 0 active loans for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:25.806Z] [LOG] 📊 Found 0 active advances for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:26.037Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:26.037Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:02:26.039Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:02:26.039Z] [LOG] 💰 GROSS CALCULATION for Uthpala null:
[2025-10-17T04:02:26.040Z] [LOG]    Base Salary: 100000
[2025-10-17T04:02:26.041Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:02:26.272Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:02:26.500Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:02:26.501Z] [LOG]    Employee ID: 0143a539-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:26.502Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:02:26.502Z] [LOG]    Base Salary: Rs.100000.00
[2025-10-17T04:02:26.739Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:02:26.740Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-17T04:02:26.741Z] [LOG]       Weekday Hourly Rate: Rs.500.00
[2025-10-17T04:02:26.741Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-17T04:02:26.742Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:02:26.985Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:02:26.986Z] [LOG]       Weekday (Mon-Fri): 135.72h
[2025-10-17T04:02:26.987Z] [LOG]       Saturday: 15.82h
[2025-10-17T04:02:26.987Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:02:26.988Z] [LOG]       Total Worked: 151.54h
[2025-10-17T04:02:26.989Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:02:26.990Z] [LOG]       Weekday: 135.72h × Rs.500.00 = Rs.67860.00
[2025-10-17T04:02:26.990Z] [LOG]       Saturday: 15.82h × Rs.888.89 = Rs.14062.24
[2025-10-17T04:02:26.991Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:02:26.992Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:02:26.993Z] [LOG]       Total Earned Salary: Rs.81922.24
[2025-10-17T04:02:26.994Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:02:26.995Z] [LOG]       Base Salary: Rs.100000.00
[2025-10-17T04:02:26.995Z] [LOG]       Earned Salary: Rs.81922.24
[2025-10-17T04:02:26.996Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:02:26.997Z] [LOG]       Attendance Deduction: Rs.18077.76
[2025-10-17T04:02:26.997Z] [LOG]       📉 Deduction is 18.08% of base salary
[2025-10-17T04:02:26.998Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:02:26.999Z] [LOG]    Gross Salary: 100000
[2025-10-17T04:02:26.999Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:02:27.000Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:02:27.001Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:27.001Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:02:27.002Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:27.003Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:02:27.003Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:27.004Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:02:27.005Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:27.005Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:02:27.006Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:27.007Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:02:27.007Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:27.008Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:02:27.009Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:27.009Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:02:27.010Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:27.011Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:02:27.011Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:27.012Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:02:27.013Z] [LOG] Regular deductions for Uthpala null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:02:27.014Z] [LOG] Combined deductions for Uthpala null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 18077.760200000004,
      "details": "Based on worked hours (151.54h total)"
    }
  ],
  "total": 18077.760200000004
}
[2025-10-17T04:02:27.248Z] [LOG] Creating components for record 5f3dab19-4c6f-414e-a318-271c68a1ecf9: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:02:27.250Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 18077.760200000004
}
[2025-10-17T04:02:27.479Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:02:27.714Z] [LOG] Created payroll_record_component: 1b653947-e651-483c-99a5-0b10743337df for Attendance Deduction
[2025-10-17T04:02:28.182Z] [LOG] ✅ Financial balances updated successfully for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:28.183Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:02:28.183Z] [LOG] 
======================================================================
[2025-10-17T04:02:28.184Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Uthpala null
[2025-10-17T04:02:28.184Z] [LOG] ======================================================================
[2025-10-17T04:02:28.185Z] [LOG]    Gross Salary: Rs.100000.00
[2025-10-17T04:02:28.185Z] [LOG]    Total Deductions: Rs.18077.76
[2025-10-17T04:02:28.186Z] [LOG]       - Attendance Deduction: Rs.18077.76
[2025-10-17T04:02:28.186Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:02:28.187Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:02:28.187Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:02:28.187Z] [LOG]    NET SALARY: Rs.81922.24
[2025-10-17T04:02:28.188Z] [LOG] ======================================================================

[2025-10-17T04:02:28.188Z] [LOG] ✅ Uthpala null: Calculation completed successfully
[2025-10-17T04:02:28.189Z] [LOG] 📊 Progress: 3/34 (8.8%)
[2025-10-17T04:02:28.190Z] [LOG] 
🧮 Processing: Saruban null (EMP000007)
[2025-10-17T04:02:28.190Z] [LOG] 📋 Record ID: 426bd1f8-d8f3-46ad-83ac-628cac3ea3e8
[2025-10-17T04:02:28.191Z] [LOG] 
======================================================================
[2025-10-17T04:02:28.192Z] [LOG] 🧮 CALCULATING PAYROLL: Saruban null (EMP000007)
[2025-10-17T04:02:28.192Z] [LOG] ======================================================================
[2025-10-17T04:02:29.162Z] [LOG] 🔍 Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-17T04:02:29.162Z] [LOG]    Total components: 9
[2025-10-17T04:02:29.163Z] [LOG]    Applicable components: 9
[2025-10-17T04:02:29.164Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T04:02:30.080Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:02:30.081Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:02:30.312Z] [LOG] 📊 Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:30.541Z] [LOG] 📊 Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:30.771Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:30.772Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:02:30.773Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:02:30.774Z] [LOG] 💰 GROSS CALCULATION for Saruban null:
[2025-10-17T04:02:30.774Z] [LOG]    Base Salary: 0
[2025-10-17T04:02:30.775Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:02:31.002Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:02:31.231Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:02:31.232Z] [LOG]    Employee ID: 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:31.232Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:02:31.233Z] [LOG]    Base Salary: Rs.0.00
[2025-10-17T04:02:31.465Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:02:31.466Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-17T04:02:31.467Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-17T04:02:31.468Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-17T04:02:31.468Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:02:31.699Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:02:31.700Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-17T04:02:31.701Z] [LOG]       Saturday: 0.00h
[2025-10-17T04:02:31.701Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:02:31.702Z] [LOG]       Total Worked: 0.00h
[2025-10-17T04:02:31.702Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:02:31.703Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:02:31.704Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:02:31.705Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:02:31.705Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:02:31.706Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T04:02:31.707Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:02:31.709Z] [LOG]       Base Salary: Rs.0.00
[2025-10-17T04:02:31.709Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T04:02:31.710Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:02:31.711Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-17T04:02:31.711Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-17T04:02:31.712Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:02:31.713Z] [LOG]    Gross Salary: 0
[2025-10-17T04:02:31.713Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:02:31.714Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:02:31.715Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:31.715Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:02:31.716Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:31.717Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:02:31.718Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:31.718Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:02:31.719Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:31.720Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:02:31.720Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:31.721Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:02:31.722Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:31.722Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:02:31.723Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:31.724Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:02:31.724Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:31.725Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:02:31.726Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:31.727Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:02:31.727Z] [LOG] Regular deductions for Saruban null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:02:31.728Z] [LOG] Combined deductions for Saruban null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 0
}
[2025-10-17T04:02:31.963Z] [LOG] Creating components for record 426bd1f8-d8f3-46ad-83ac-628cac3ea3e8: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:02:31.965Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-17T04:02:32.198Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:02:32.428Z] [LOG] Created payroll_record_component: 16dd819c-dc52-4b1d-8290-918085caf314 for Attendance Deduction
[2025-10-17T04:02:32.897Z] [LOG] ✅ Financial balances updated successfully for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:32.898Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:02:32.899Z] [LOG] 
======================================================================
[2025-10-17T04:02:32.900Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saruban null
[2025-10-17T04:02:32.900Z] [LOG] ======================================================================
[2025-10-17T04:02:32.901Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-17T04:02:32.902Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-17T04:02:32.902Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-17T04:02:32.903Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:02:32.904Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:02:32.905Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:02:32.906Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T04:02:32.907Z] [LOG] ======================================================================

[2025-10-17T04:02:32.908Z] [LOG] ✅ Saruban null: Calculation completed successfully
[2025-10-17T04:02:32.908Z] [LOG] 📊 Progress: 4/34 (11.8%)
[2025-10-17T04:02:32.909Z] [LOG] 
🧮 Processing: Dharshika null (EMP000009)
[2025-10-17T04:02:32.910Z] [LOG] 📋 Record ID: 8c5941f8-1bce-4334-b4e9-2d6edf3ae86d
[2025-10-17T04:02:32.911Z] [LOG] 
======================================================================
[2025-10-17T04:02:32.911Z] [LOG] 🧮 CALCULATING PAYROLL: Dharshika null (EMP000009)
[2025-10-17T04:02:32.912Z] [LOG] ======================================================================
[2025-10-17T04:02:33.830Z] [LOG] 🔍 Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-17T04:02:33.830Z] [LOG]    Total components: 9
[2025-10-17T04:02:33.831Z] [LOG]    Applicable components: 9
[2025-10-17T04:02:33.832Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T04:02:41.675Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:02:41.676Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:02:41.907Z] [LOG] 📊 Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:42.141Z] [LOG] 📊 Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:42.370Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:42.371Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:02:42.372Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:02:42.373Z] [LOG] 💰 GROSS CALCULATION for Dharshika null:
[2025-10-17T04:02:42.374Z] [LOG]    Base Salary: 100000
[2025-10-17T04:02:42.374Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:02:42.603Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:02:42.832Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:02:42.833Z] [LOG]    Employee ID: 0143a994-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:42.834Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:02:42.834Z] [LOG]    Base Salary: Rs.100000.00
[2025-10-17T04:02:43.066Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:02:43.067Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-17T04:02:43.067Z] [LOG]       Weekday Hourly Rate: Rs.470.59
[2025-10-17T04:02:43.068Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-17T04:02:43.069Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:02:43.298Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:02:43.299Z] [LOG]       Weekday (Mon-Fri): 138.73h
[2025-10-17T04:02:43.300Z] [LOG]       Saturday: 11.06h
[2025-10-17T04:02:43.300Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:02:43.301Z] [LOG]       Total Worked: 149.79h
[2025-10-17T04:02:43.302Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:02:43.303Z] [LOG]       Weekday: 138.73h × Rs.470.59 = Rs.65284.95
[2025-10-17T04:02:43.303Z] [LOG]       Saturday: 11.06h × Rs.888.89 = Rs.9831.12
[2025-10-17T04:02:43.304Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:02:43.305Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:02:43.306Z] [LOG]       Total Earned Salary: Rs.75116.07
[2025-10-17T04:02:43.308Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:02:43.308Z] [LOG]       Base Salary: Rs.100000.00
[2025-10-17T04:02:43.308Z] [LOG]       Earned Salary: Rs.75116.07
[2025-10-17T04:02:43.309Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:02:43.309Z] [LOG]       Attendance Deduction: Rs.24883.93
[2025-10-17T04:02:43.309Z] [LOG]       📉 Deduction is 24.88% of base salary
[2025-10-17T04:02:43.310Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:02:43.310Z] [LOG]    Gross Salary: 100000
[2025-10-17T04:02:43.311Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:02:43.312Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:02:43.312Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:43.312Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:02:43.313Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:43.313Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:02:43.313Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:43.314Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:02:43.314Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:43.314Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:02:43.315Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:43.315Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:02:43.316Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:43.316Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:02:43.316Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:43.317Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:02:43.317Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:43.317Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:02:43.318Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:43.318Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:02:43.318Z] [LOG] Regular deductions for Dharshika null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:02:43.319Z] [LOG] Combined deductions for Dharshika null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 24883.925900000002,
      "details": "Based on worked hours (149.79h total)"
    }
  ],
  "total": 24883.925900000002
}
[2025-10-17T04:02:43.551Z] [LOG] Creating components for record 8c5941f8-1bce-4334-b4e9-2d6edf3ae86d: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:02:43.556Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 24883.925900000002
}
[2025-10-17T04:02:43.786Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:02:44.021Z] [LOG] Created payroll_record_component: bb7ac532-e0cd-44a9-a061-6c5699b1222d for Attendance Deduction
[2025-10-17T04:02:44.478Z] [LOG] ✅ Financial balances updated successfully for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:44.479Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:02:44.479Z] [LOG] 
======================================================================
[2025-10-17T04:02:44.479Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Dharshika null
[2025-10-17T04:02:44.479Z] [LOG] ======================================================================
[2025-10-17T04:02:44.479Z] [LOG]    Gross Salary: Rs.100000.00
[2025-10-17T04:02:44.480Z] [LOG]    Total Deductions: Rs.24883.93
[2025-10-17T04:02:44.480Z] [LOG]       - Attendance Deduction: Rs.24883.93
[2025-10-17T04:02:44.480Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:02:44.480Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:02:44.480Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:02:44.481Z] [LOG]    NET SALARY: Rs.75116.07
[2025-10-17T04:02:44.481Z] [LOG] ======================================================================

[2025-10-17T04:02:44.481Z] [LOG] ✅ Dharshika null: Calculation completed successfully
[2025-10-17T04:02:44.481Z] [LOG] 📊 Progress: 5/34 (14.7%)
[2025-10-17T04:02:44.481Z] [LOG] 
🧮 Processing: Ishara null (EMP000011)
[2025-10-17T04:02:44.482Z] [LOG] 📋 Record ID: 8cb286aa-ed62-4c02-989a-b386aecc9eb5
[2025-10-17T04:02:44.482Z] [LOG] 
======================================================================
[2025-10-17T04:02:44.482Z] [LOG] 🧮 CALCULATING PAYROLL: Ishara null (EMP000011)
[2025-10-17T04:02:44.482Z] [LOG] ======================================================================
[2025-10-17T04:02:45.395Z] [LOG] 🔍 Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-17T04:02:45.395Z] [LOG]    Total components: 9
[2025-10-17T04:02:45.395Z] [LOG]    Applicable components: 9
[2025-10-17T04:02:45.395Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-17T04:02:46.312Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:02:46.312Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:02:46.544Z] [LOG] 📊 Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:46.773Z] [LOG] 📊 Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:47.001Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:47.001Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:02:47.002Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:02:47.002Z] [LOG] 💰 GROSS CALCULATION for Ishara null:
[2025-10-17T04:02:47.002Z] [LOG]    Base Salary: 50000
[2025-10-17T04:02:47.002Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:02:47.232Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:02:47.462Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:02:47.462Z] [LOG]    Employee ID: 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:47.462Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:02:47.463Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T04:02:47.696Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:02:47.696Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T04:02:47.696Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T04:02:47.696Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T04:02:47.697Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:02:47.927Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:02:47.927Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-17T04:02:47.927Z] [LOG]       Saturday: 0.00h
[2025-10-17T04:02:47.928Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:02:47.928Z] [LOG]       Total Worked: 0.00h
[2025-10-17T04:02:47.928Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:02:47.928Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T04:02:47.929Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T04:02:47.929Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:02:47.929Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:02:47.929Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T04:02:47.930Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:02:47.930Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T04:02:47.930Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T04:02:47.930Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:02:47.930Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-17T04:02:47.931Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-17T04:02:47.931Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:02:47.931Z] [LOG]    Gross Salary: 50000
[2025-10-17T04:02:47.931Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:02:47.932Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:02:47.932Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:47.932Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:02:47.932Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:47.933Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:02:47.933Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:47.933Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:02:47.933Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:47.934Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:02:47.934Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:47.934Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:02:47.934Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:47.935Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:02:47.935Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:47.935Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:02:47.935Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:47.935Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:02:47.936Z] [LOG]    Fixed amount: 0
[2025-10-17T04:02:47.936Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:02:47.936Z] [LOG] Regular deductions for Ishara null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:02:47.936Z] [LOG] Combined deductions for Ishara null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-17T04:02:48.171Z] [LOG] Creating components for record 8cb286aa-ed62-4c02-989a-b386aecc9eb5: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:02:48.172Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-17T04:02:48.399Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:02:48.633Z] [LOG] Created payroll_record_component: 02ad9133-a2d1-4471-925f-05a850142e0e for Attendance Deduction
[2025-10-17T04:02:49.094Z] [LOG] ✅ Financial balances updated successfully for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:49.094Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:02:49.094Z] [LOG] 
======================================================================
[2025-10-17T04:02:49.095Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ishara null
[2025-10-17T04:02:49.095Z] [LOG] ======================================================================
[2025-10-17T04:02:49.095Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T04:02:49.096Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-17T04:02:49.096Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-17T04:02:49.096Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:02:49.097Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:02:49.097Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:02:49.097Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T04:02:49.097Z] [LOG] ======================================================================

[2025-10-17T04:02:49.098Z] [LOG] ✅ Ishara null: Calculation completed successfully
[2025-10-17T04:02:49.098Z] [LOG] 📊 Progress: 6/34 (17.6%)
[2025-10-17T04:02:49.098Z] [LOG] 
🧮 Processing: Jessie null (EMP000013)
[2025-10-17T04:02:49.099Z] [LOG] 📋 Record ID: 4e78d76e-ba5d-481c-b197-d5aaa4c4a146
[2025-10-17T04:02:49.099Z] [LOG] 
======================================================================
[2025-10-17T04:02:49.099Z] [LOG] 🧮 CALCULATING PAYROLL: Jessie null (EMP000013)
[2025-10-17T04:02:49.100Z] [LOG] ======================================================================
[2025-10-17T04:02:50.049Z] [LOG] 🔍 Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-17T04:02:50.049Z] [LOG]    Total components: 9
[2025-10-17T04:02:50.049Z] [LOG]    Applicable components: 9
[2025-10-17T04:02:50.050Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T04:02:58.754Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:02:58.755Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:02:58.985Z] [LOG] 📊 Found 1 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:59.213Z] [LOG] 📊 Found 0 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:59.440Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:59.441Z] [LOG] 💰 Loan a1a98b74-8565-4201-b0f7-d445d0c0f69b: Deducting LKR 100000 (Remaining: LKR 100000)
[2025-10-17T04:02:59.442Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 100000,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": -100000
}
[2025-10-17T04:02:59.443Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:02:59.444Z] [LOG] 💰 GROSS CALCULATION for Jessie null:
[2025-10-17T04:02:59.445Z] [LOG]    Base Salary: 60000
[2025-10-17T04:02:59.445Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:02:59.672Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:02:59.900Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:02:59.901Z] [LOG]    Employee ID: 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-17T04:02:59.901Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:02:59.902Z] [LOG]    Base Salary: Rs.60000.00
[2025-10-17T04:03:00.135Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:03:00.135Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-17T04:03:00.136Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-17T04:03:00.137Z] [LOG]       Saturday Hourly Rate: Rs.282.35
[2025-10-17T04:03:00.137Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:03:00.364Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:03:00.365Z] [LOG]       Weekday (Mon-Fri): 136.18h
[2025-10-17T04:03:00.366Z] [LOG]       Saturday: 0.00h
[2025-10-17T04:03:00.367Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:03:00.367Z] [LOG]       Total Worked: 136.18h
[2025-10-17T04:03:00.368Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:03:00.369Z] [LOG]       Weekday: 136.18h × Rs.282.35 = Rs.38450.42
[2025-10-17T04:03:00.369Z] [LOG]       Saturday: 0.00h × Rs.282.35 = Rs.0.00
[2025-10-17T04:03:00.370Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:03:00.371Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:03:00.372Z] [LOG]       Total Earned Salary: Rs.38450.42
[2025-10-17T04:03:00.372Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:03:00.373Z] [LOG]       Base Salary: Rs.60000.00
[2025-10-17T04:03:00.374Z] [LOG]       Earned Salary: Rs.38450.42
[2025-10-17T04:03:00.375Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:03:00.375Z] [LOG]       Attendance Deduction: Rs.21549.58
[2025-10-17T04:03:00.376Z] [LOG]       📉 Deduction is 35.92% of base salary
[2025-10-17T04:03:00.377Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:03:00.377Z] [LOG]    Gross Salary: 60000
[2025-10-17T04:03:00.378Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:03:00.378Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:03:00.379Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:00.380Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:03:00.380Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:00.381Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:03:00.382Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:00.382Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:03:00.383Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:00.384Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:03:00.384Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:00.385Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:03:00.386Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:00.386Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:03:00.387Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:00.387Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:03:00.388Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:00.389Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:03:00.389Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:00.390Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:03:00.390Z] [LOG] Regular deductions for Jessie null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:03:00.391Z] [LOG] Combined deductions for Jessie null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 21549.576999999997,
      "details": "Based on worked hours (136.18h total)"
    },
    {
      "code": "LOAN_DED",
      "name": "Loan Deductions",
      "type": "deduction",
      "category": "loan",
      "amount": 100000,
      "details": "1 loan(s)"
    }
  ],
  "total": 121549.57699999999
}
[2025-10-17T04:03:00.629Z] [LOG] Creating components for record 4e78d76e-ba5d-481c-b197-d5aaa4c4a146: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-17T04:03:00.631Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 21549.576999999997
}
[2025-10-17T04:03:00.858Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:03:01.089Z] [LOG] Created payroll_record_component: f43c4e24-3037-4b1a-9662-ffce654b1ae4 for Attendance Deduction
[2025-10-17T04:03:01.090Z] [LOG] Processing component: {
  "name": "Loan Deductions",
  "type": "deduction",
  "amount": 100000
}
[2025-10-17T04:03:01.319Z] [LOG] Using existing component ID: 64a0d7d8-8fdb-4968-a7a2-057590b481c7
[2025-10-17T04:03:01.552Z] [LOG] Created payroll_record_component: c762be8f-7852-47e3-8d5f-9b0834b17f82 for Loan Deductions
[2025-10-17T04:03:02.237Z] [LOG] ✅ Updated loan a1a98b74-8565-4201-b0f7-d445d0c0f69b: Remaining LKR 0, Status: completed
[2025-10-17T04:03:02.465Z] [LOG] ✅ Financial balances updated successfully for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:02.466Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:03:02.467Z] [LOG] 
======================================================================
[2025-10-17T04:03:02.467Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Jessie null
[2025-10-17T04:03:02.468Z] [LOG] ======================================================================
[2025-10-17T04:03:02.469Z] [LOG]    Gross Salary: Rs.60000.00
[2025-10-17T04:03:02.469Z] [LOG]    Total Deductions: Rs.121549.58
[2025-10-17T04:03:02.470Z] [LOG]       - Attendance Deduction: Rs.21549.58
[2025-10-17T04:03:02.471Z] [LOG]       - Other Deductions: Rs.100000.00
[2025-10-17T04:03:02.471Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:03:02.472Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:03:02.473Z] [LOG]    NET SALARY: Rs.-61549.58
[2025-10-17T04:03:02.474Z] [LOG] ======================================================================

[2025-10-17T04:03:02.475Z] [LOG] ✅ Jessie null: Calculation completed successfully
[2025-10-17T04:03:02.476Z] [LOG] 📊 Progress: 7/34 (20.6%)
[2025-10-17T04:03:02.476Z] [LOG] 
🧮 Processing: Anoj null (EMP000014)
[2025-10-17T04:03:02.478Z] [LOG] 📋 Record ID: 022b77fc-049e-4dfa-9bd8-e813fee9b681
[2025-10-17T04:03:02.479Z] [LOG] 
======================================================================
[2025-10-17T04:03:02.480Z] [LOG] 🧮 CALCULATING PAYROLL: Anoj null (EMP000014)
[2025-10-17T04:03:02.480Z] [LOG] ======================================================================
[2025-10-17T04:03:03.398Z] [LOG] 🔍 Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-17T04:03:03.398Z] [LOG]    Total components: 9
[2025-10-17T04:03:03.399Z] [LOG]    Applicable components: 9
[2025-10-17T04:03:03.400Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T04:03:11.172Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:03:11.173Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:03:11.402Z] [LOG] 📊 Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:11.632Z] [LOG] 📊 Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:11.860Z] [LOG] 📊 Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:11.861Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:03:11.862Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:03:11.863Z] [LOG] 💰 GROSS CALCULATION for Anoj null:
[2025-10-17T04:03:11.864Z] [LOG]    Base Salary: 50000
[2025-10-17T04:03:11.865Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:03:12.093Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:03:12.322Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:03:12.323Z] [LOG]    Employee ID: 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:12.324Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:03:12.325Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T04:03:12.557Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:03:12.558Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T04:03:12.558Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T04:03:12.559Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-17T04:03:12.560Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:03:12.788Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:03:12.789Z] [LOG]       Weekday (Mon-Fri): 108.53h
[2025-10-17T04:03:12.790Z] [LOG]       Saturday: 16.72h
[2025-10-17T04:03:12.790Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:03:12.791Z] [LOG]       Total Worked: 125.25h
[2025-10-17T04:03:12.792Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:03:12.792Z] [LOG]       Weekday: 108.53h × Rs.235.29 = Rs.25536.02
[2025-10-17T04:03:12.793Z] [LOG]       Saturday: 16.72h × Rs.444.44 = Rs.7431.04
[2025-10-17T04:03:12.794Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:03:12.794Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:03:12.795Z] [LOG]       Total Earned Salary: Rs.32967.06
[2025-10-17T04:03:12.796Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:03:12.797Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T04:03:12.798Z] [LOG]       Earned Salary: Rs.32967.06
[2025-10-17T04:03:12.799Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:03:12.799Z] [LOG]       Attendance Deduction: Rs.17032.94
[2025-10-17T04:03:12.800Z] [LOG]       📉 Deduction is 34.07% of base salary
[2025-10-17T04:03:12.801Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:03:12.802Z] [LOG]    Gross Salary: 50000
[2025-10-17T04:03:12.802Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:03:12.803Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:03:12.804Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:12.804Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:03:12.805Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:12.805Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:03:12.807Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:12.807Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:03:12.808Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:12.809Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:03:12.809Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:12.810Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:03:12.811Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:12.811Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:03:12.812Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:12.813Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:03:12.813Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:12.814Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:03:12.814Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:12.815Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:03:12.816Z] [LOG] Regular deductions for Anoj null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:03:12.817Z] [LOG] Combined deductions for Anoj null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 17032.9395,
      "details": "Based on worked hours (125.25h total)"
    }
  ],
  "total": 17032.9395
}
[2025-10-17T04:03:13.049Z] [LOG] Creating components for record 022b77fc-049e-4dfa-9bd8-e813fee9b681: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:03:13.051Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 17032.9395
}
[2025-10-17T04:03:13.281Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:03:13.514Z] [LOG] Created payroll_record_component: 29e8df9a-a197-4078-a007-d98f087e4e1a for Attendance Deduction
[2025-10-17T04:03:13.971Z] [LOG] ✅ Financial balances updated successfully for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:13.972Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:03:13.972Z] [LOG] 
======================================================================
[2025-10-17T04:03:13.973Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Anoj null
[2025-10-17T04:03:13.974Z] [LOG] ======================================================================
[2025-10-17T04:03:13.975Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T04:03:13.975Z] [LOG]    Total Deductions: Rs.17032.94
[2025-10-17T04:03:13.976Z] [LOG]       - Attendance Deduction: Rs.17032.94
[2025-10-17T04:03:13.977Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:03:13.977Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:03:13.978Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:03:13.979Z] [LOG]    NET SALARY: Rs.32967.06
[2025-10-17T04:03:13.980Z] [LOG] ======================================================================

[2025-10-17T04:03:13.981Z] [LOG] ✅ Anoj null: Calculation completed successfully
[2025-10-17T04:03:13.982Z] [LOG] 📊 Progress: 8/34 (23.5%)
[2025-10-17T04:03:13.982Z] [LOG] 
🧮 Processing: Sumaiya null (EMP000016)
[2025-10-17T04:03:13.984Z] [LOG] 📋 Record ID: cd912065-94b4-4649-a30b-ebb97bf2b53f
[2025-10-17T04:03:13.984Z] [LOG] 
======================================================================
[2025-10-17T04:03:13.985Z] [LOG] 🧮 CALCULATING PAYROLL: Sumaiya null (EMP000016)
[2025-10-17T04:03:13.986Z] [LOG] ======================================================================
[2025-10-17T04:03:14.954Z] [LOG] 🔍 Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-17T04:03:14.955Z] [LOG]    Total components: 9
[2025-10-17T04:03:14.956Z] [LOG]    Applicable components: 9
[2025-10-17T04:03:14.956Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T04:03:23.753Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:03:23.754Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:03:23.981Z] [LOG] 📊 Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:24.207Z] [LOG] 📊 Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:24.436Z] [LOG] 📊 Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:24.438Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:03:24.439Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:03:24.440Z] [LOG] 💰 GROSS CALCULATION for Sumaiya null:
[2025-10-17T04:03:24.440Z] [LOG]    Base Salary: 60000
[2025-10-17T04:03:24.441Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:03:24.667Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:03:24.897Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:03:24.898Z] [LOG]    Employee ID: 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:24.899Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:03:24.899Z] [LOG]    Base Salary: Rs.60000.00
[2025-10-17T04:03:25.130Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:03:25.131Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-17T04:03:25.131Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-17T04:03:25.132Z] [LOG]       Saturday Hourly Rate: Rs.533.33
[2025-10-17T04:03:25.132Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:03:25.363Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:03:25.364Z] [LOG]       Weekday (Mon-Fri): 162.15h
[2025-10-17T04:03:25.364Z] [LOG]       Saturday: 22.50h
[2025-10-17T04:03:25.365Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:03:25.365Z] [LOG]       Total Worked: 184.65h
[2025-10-17T04:03:25.366Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:03:25.366Z] [LOG]       Weekday: 162.15h × Rs.282.35 = Rs.45783.05
[2025-10-17T04:03:25.367Z] [LOG]       Saturday: 22.50h × Rs.533.33 = Rs.11999.93
[2025-10-17T04:03:25.368Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:03:25.368Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:03:25.369Z] [LOG]       Total Earned Salary: Rs.57782.98
[2025-10-17T04:03:25.370Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:03:25.371Z] [LOG]       Base Salary: Rs.60000.00
[2025-10-17T04:03:25.372Z] [LOG]       Earned Salary: Rs.57782.98
[2025-10-17T04:03:25.372Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:03:25.373Z] [LOG]       Attendance Deduction: Rs.2217.02
[2025-10-17T04:03:25.374Z] [LOG]       📉 Deduction is 3.70% of base salary
[2025-10-17T04:03:25.375Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:03:25.376Z] [LOG]    Gross Salary: 60000
[2025-10-17T04:03:25.377Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:03:25.377Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:03:25.378Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:25.379Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:03:25.379Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:25.380Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:03:25.381Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:25.381Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:03:25.382Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:25.383Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:03:25.383Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:25.384Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:03:25.385Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:25.386Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:03:25.386Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:25.387Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:03:25.387Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:25.388Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:03:25.389Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:25.389Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:03:25.391Z] [LOG] Regular deductions for Sumaiya null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:03:25.392Z] [LOG] Combined deductions for Sumaiya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 2217.022499999992,
      "details": "Based on worked hours (184.65h total)"
    }
  ],
  "total": 2217.022499999992
}
[2025-10-17T04:03:25.625Z] [LOG] Creating components for record cd912065-94b4-4649-a30b-ebb97bf2b53f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:03:25.627Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 2217.022499999992
}
[2025-10-17T04:03:25.855Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:03:26.084Z] [LOG] Created payroll_record_component: f90bf84a-6553-4fa6-8bf6-077dc839827e for Attendance Deduction
[2025-10-17T04:03:26.540Z] [LOG] ✅ Financial balances updated successfully for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:26.541Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:03:26.541Z] [LOG] 
======================================================================
[2025-10-17T04:03:26.543Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sumaiya null
[2025-10-17T04:03:26.544Z] [LOG] ======================================================================
[2025-10-17T04:03:26.544Z] [LOG]    Gross Salary: Rs.60000.00
[2025-10-17T04:03:26.544Z] [LOG]    Total Deductions: Rs.2217.02
[2025-10-17T04:03:26.545Z] [LOG]       - Attendance Deduction: Rs.2217.02
[2025-10-17T04:03:26.545Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:03:26.545Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:03:26.546Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:03:26.546Z] [LOG]    NET SALARY: Rs.57782.98
[2025-10-17T04:03:26.547Z] [LOG] ======================================================================

[2025-10-17T04:03:26.547Z] [LOG] ✅ Sumaiya null: Calculation completed successfully
[2025-10-17T04:03:26.547Z] [LOG] 📊 Progress: 9/34 (26.5%)
[2025-10-17T04:03:26.548Z] [LOG] 
🧮 Processing: Hari null (EMP000017)
[2025-10-17T04:03:26.548Z] [LOG] 📋 Record ID: 2182ad5b-0a88-4b59-9349-cecdefebeb10
[2025-10-17T04:03:26.548Z] [LOG] 
======================================================================
[2025-10-17T04:03:26.549Z] [LOG] 🧮 CALCULATING PAYROLL: Hari null (EMP000017)
[2025-10-17T04:03:26.549Z] [LOG] ======================================================================
[2025-10-17T04:03:27.526Z] [LOG] 🔍 Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-17T04:03:27.527Z] [LOG]    Total components: 9
[2025-10-17T04:03:27.528Z] [LOG]    Applicable components: 9
[2025-10-17T04:03:27.529Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T04:03:31.661Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:03:31.661Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:03:31.889Z] [LOG] 📊 Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:32.119Z] [LOG] 📊 Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:32.347Z] [LOG] 📊 Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:32.348Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:03:32.349Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:03:32.350Z] [LOG] 💰 GROSS CALCULATION for Hari null:
[2025-10-17T04:03:32.351Z] [LOG]    Base Salary: 50000
[2025-10-17T04:03:32.351Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:03:32.578Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:03:32.806Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:03:32.807Z] [LOG]    Employee ID: 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:32.807Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:03:32.809Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T04:03:33.038Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:03:33.038Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T04:03:33.039Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T04:03:33.039Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-17T04:03:33.039Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:03:33.266Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:03:33.266Z] [LOG]       Weekday (Mon-Fri): 114.85h
[2025-10-17T04:03:33.266Z] [LOG]       Saturday: 16.84h
[2025-10-17T04:03:33.266Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:03:33.267Z] [LOG]       Total Worked: 131.69h
[2025-10-17T04:03:33.267Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:03:33.267Z] [LOG]       Weekday: 114.85h × Rs.235.29 = Rs.27023.06
[2025-10-17T04:03:33.267Z] [LOG]       Saturday: 16.84h × Rs.444.44 = Rs.7484.37
[2025-10-17T04:03:33.268Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:03:33.268Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:03:33.268Z] [LOG]       Total Earned Salary: Rs.34507.43
[2025-10-17T04:03:33.268Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:03:33.268Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T04:03:33.269Z] [LOG]       Earned Salary: Rs.34507.43
[2025-10-17T04:03:33.269Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:03:33.269Z] [LOG]       Attendance Deduction: Rs.15492.57
[2025-10-17T04:03:33.269Z] [LOG]       📉 Deduction is 30.99% of base salary
[2025-10-17T04:03:33.270Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:03:33.270Z] [LOG]    Gross Salary: 50000
[2025-10-17T04:03:33.270Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:03:33.270Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:03:33.270Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:33.271Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:03:33.271Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:33.271Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:03:33.271Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:33.271Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:03:33.272Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:33.272Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:03:33.272Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:33.272Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:03:33.273Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:33.273Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:03:33.273Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:33.273Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:03:33.273Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:33.274Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:03:33.274Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:33.274Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:03:33.275Z] [LOG] Regular deductions for Hari null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:03:33.276Z] [LOG] Combined deductions for Hari null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 15492.573900000003,
      "details": "Based on worked hours (131.69h total)"
    }
  ],
  "total": 15492.573900000003
}
[2025-10-17T04:03:33.508Z] [LOG] Creating components for record 2182ad5b-0a88-4b59-9349-cecdefebeb10: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:03:33.512Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 15492.573900000003
}
[2025-10-17T04:03:33.694Z] [ERROR] Authentication error: {
  "message": "read ECONNRESET",
  "code": "ECONNRESET",
  "errno": -4077
}
[2025-10-17T04:03:33.697Z] [LOG] GET /auth/me - 401 - 19ms
[2025-10-17T04:03:33.718Z] [ERROR] Database error (attempt 1): ECONNRESET
[2025-10-17T04:03:33.740Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:03:33.856Z] [LOG] session eka meka {
  "id": "35664f16-ab0c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "23bbf77b-168f-48e5-bf4a-b0cfebec8954",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 03:48:59",
  "is_active": 1,
  "created_at": "2025-10-17 09:18:57",
  "user_active": 1
}
[2025-10-17T04:03:33.968Z] [LOG] Created payroll_record_component: 465ebcab-ba32-43b7-bbd8-584e95551870 for Attendance Deduction
[2025-10-17T04:03:34.457Z] [LOG] ✅ Financial balances updated successfully for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:34.457Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:03:34.459Z] [LOG] 
======================================================================
[2025-10-17T04:03:34.460Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Hari null
[2025-10-17T04:03:34.461Z] [LOG] ======================================================================
[2025-10-17T04:03:34.461Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T04:03:34.462Z] [LOG]    Total Deductions: Rs.15492.57
[2025-10-17T04:03:34.463Z] [LOG]       - Attendance Deduction: Rs.15492.57
[2025-10-17T04:03:34.463Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:03:34.464Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:03:34.465Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:03:34.466Z] [LOG]    NET SALARY: Rs.34507.43
[2025-10-17T04:03:34.466Z] [LOG] ======================================================================

[2025-10-17T04:03:34.467Z] [LOG] ✅ Hari null: Calculation completed successfully
[2025-10-17T04:03:34.468Z] [LOG] 📊 Progress: 10/34 (29.4%)
[2025-10-17T04:03:34.468Z] [LOG] 
🧮 Processing: Franklin null (EMP000018)
[2025-10-17T04:03:34.469Z] [LOG] 📋 Record ID: 3c2e93df-de28-428f-a200-cb89335e462d
[2025-10-17T04:03:34.470Z] [LOG] 
======================================================================
[2025-10-17T04:03:34.471Z] [LOG] 🧮 CALCULATING PAYROLL: Franklin null (EMP000018)
[2025-10-17T04:03:34.471Z] [LOG] ======================================================================
[2025-10-17T04:03:34.769Z] [LOG] GET /api/rbac/roles - 304 - 1140ms
[2025-10-17T04:03:35.412Z] [LOG] 🔍 Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-17T04:03:35.413Z] [LOG]    Total components: 9
[2025-10-17T04:03:35.413Z] [LOG]    Applicable components: 9
[2025-10-17T04:03:35.414Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-17T04:03:36.184Z] [LOG] decoded {
  "userId": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "jti": "23bbf77b-168f-48e5-bf4a-b0cfebec8954",
  "type": "refresh",
  "iat": 1760672939,
  "exp": 1761277739,
  "aud": "hrms-client",
  "iss": "hrms-api"
}
[2025-10-17T04:03:36.186Z] [LOG] sessions: [
  {
    "id": "35664f16-ab0c-11f0-93ca-0050565d0e2b",
    "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
    "client_id": "it-signature",
    "token_jti": "23bbf77b-168f-48e5-bf4a-b0cfebec8954",
    "ip_address": "::1",
    "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
    "expires_at": "2025-10-18 03:48:59",
    "is_active": 1,
    "created_at": "2025-10-17 09:18:57",
    "user_active": 1
  }
]
[2025-10-17T04:03:36.644Z] [LOG] 🔍 === TOKEN GENERATION DEBUG ===
[2025-10-17T04:03:36.647Z] [LOG] 🔍 JWT_EXPIRES_IN: 24h
[2025-10-17T04:03:36.653Z] [LOG] 🔍 Token issued at: "2025-10-17T04:03:36.000Z"
[2025-10-17T04:03:36.654Z] [LOG] 🔍 Token expires at: "2025-10-18T04:03:36.000Z"
[2025-10-17T04:03:36.655Z] [LOG] 🔍 Token valid for: 1440 minutes
[2025-10-17T04:03:36.655Z] [LOG] 🔍 === END TOKEN GENERATION DEBUG ===
[2025-10-17T04:03:37.114Z] [LOG] POST /auth/refresh - 200 - 3410ms
[2025-10-17T04:03:37.362Z] [LOG] session eka meka {
  "id": "35664f16-ab0c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "2b1bfede-3a1f-4ad1-bacb-025d046c014d",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 09:33:34",
  "is_active": 1,
  "created_at": "2025-10-17 09:18:57",
  "user_active": 1
}
[2025-10-17T04:03:38.775Z] [LOG] GET /auth/me - 200 - 1643ms
[2025-10-17T04:03:39.028Z] [LOG] session eka meka {
  "id": "35664f16-ab0c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "2b1bfede-3a1f-4ad1-bacb-025d046c014d",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 09:33:34",
  "is_active": 1,
  "created_at": "2025-10-17 09:18:57",
  "user_active": 1
}
[2025-10-17T04:03:39.709Z] [LOG] GET /api/rbac/roles - 304 - 911ms
[2025-10-17T04:03:39.944Z] [LOG] session eka meka {
  "id": "35664f16-ab0c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "2b1bfede-3a1f-4ad1-bacb-025d046c014d",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 09:33:34",
  "is_active": 1,
  "created_at": "2025-10-17 09:18:57",
  "user_active": 1
}
[2025-10-17T04:03:40.428Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:03:40.429Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:03:40.628Z] [LOG] GET /api/rbac/roles - 304 - 916ms
[2025-10-17T04:03:40.657Z] [LOG] 📊 Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:40.886Z] [LOG] 📊 Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:41.124Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:41.124Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:03:41.125Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:03:41.126Z] [LOG] 💰 GROSS CALCULATION for Franklin null:
[2025-10-17T04:03:41.127Z] [LOG]    Base Salary: 50000
[2025-10-17T04:03:41.127Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:03:41.341Z] [LOG] session eka meka {
  "id": "35664f16-ab0c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "2b1bfede-3a1f-4ad1-bacb-025d046c014d",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 09:33:34",
  "is_active": 1,
  "created_at": "2025-10-17 09:18:57",
  "user_active": 1
}
[2025-10-17T04:03:41.353Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:03:41.580Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:03:41.580Z] [LOG]    Employee ID: 0143c037-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:41.581Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:03:41.582Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T04:03:41.719Z] [LOG] session eka meka {
  "id": "35664f16-ab0c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "2b1bfede-3a1f-4ad1-bacb-025d046c014d",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 09:33:34",
  "is_active": 1,
  "created_at": "2025-10-17 09:18:57",
  "user_active": 1
}
[2025-10-17T04:03:41.724Z] [LOG] session eka meka {
  "id": "35664f16-ab0c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "2b1bfede-3a1f-4ad1-bacb-025d046c014d",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 09:33:34",
  "is_active": 1,
  "created_at": "2025-10-17 09:18:57",
  "user_active": 1
}
[2025-10-17T04:03:41.811Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:03:41.813Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T04:03:41.813Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T04:03:41.813Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-17T04:03:41.814Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:03:42.039Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:03:42.040Z] [LOG]       Weekday (Mon-Fri): 121.77h
[2025-10-17T04:03:42.040Z] [LOG]       Saturday: 11.61h
[2025-10-17T04:03:42.041Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:03:42.042Z] [LOG]       Total Worked: 133.38h
[2025-10-17T04:03:42.042Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:03:42.043Z] [LOG]       Weekday: 121.77h × Rs.235.29 = Rs.28651.26
[2025-10-17T04:03:42.044Z] [LOG]       Saturday: 11.61h × Rs.444.44 = Rs.5159.95
[2025-10-17T04:03:42.045Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:03:42.045Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:03:42.047Z] [LOG]       Total Earned Salary: Rs.33811.21
[2025-10-17T04:03:42.047Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:03:42.048Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T04:03:42.048Z] [LOG]       Earned Salary: Rs.33811.21
[2025-10-17T04:03:42.049Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:03:42.049Z] [LOG]       Attendance Deduction: Rs.16188.79
[2025-10-17T04:03:42.050Z] [LOG]       📉 Deduction is 32.38% of base salary
[2025-10-17T04:03:42.050Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:03:42.051Z] [LOG]    Gross Salary: 50000
[2025-10-17T04:03:42.051Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:03:42.052Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:03:42.052Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:42.053Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:03:42.053Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:42.054Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:03:42.054Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:42.055Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:03:42.055Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:42.056Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:03:42.057Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:42.057Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:03:42.057Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:42.059Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:03:42.060Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:42.061Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:03:42.061Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:42.062Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:03:42.062Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:42.063Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:03:42.063Z] [LOG] Regular deductions for Franklin null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:03:42.064Z] [LOG] Combined deductions for Franklin null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 16188.7883,
      "details": "Based on worked hours (133.38h total)"
    }
  ],
  "total": 16188.7883
}
[2025-10-17T04:03:42.294Z] [LOG] Creating components for record 3c2e93df-de28-428f-a200-cb89335e462d: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:03:42.296Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 16188.7883
}
[2025-10-17T04:03:42.525Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:03:42.710Z] [LOG] GET /api/attendance?page=1&limit=50&sortBy=date&sortOrder=DESC&startDate=2025-10-17&endDate=2025-10-17 - 304 - 1597ms
[2025-10-17T04:03:42.755Z] [LOG] Created payroll_record_component: 415b834d-e13a-4583-9913-417732890845 for Attendance Deduction
[2025-10-17T04:03:43.063Z] [LOG] session eka meka {
  "id": "35664f16-ab0c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "2b1bfede-3a1f-4ad1-bacb-025d046c014d",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 09:33:34",
  "is_active": 1,
  "created_at": "2025-10-17 09:18:57",
  "user_active": 1
}
[2025-10-17T04:03:43.140Z] [LOG] GET /api/payroll-runs/periods/available - 304 - 3989ms
[2025-10-17T04:03:43.208Z] [LOG] ✅ Financial balances updated successfully for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:43.209Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:03:43.209Z] [LOG] 
======================================================================
[2025-10-17T04:03:43.210Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Franklin null
[2025-10-17T04:03:43.210Z] [LOG] ======================================================================
[2025-10-17T04:03:43.210Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T04:03:43.211Z] [LOG]    Total Deductions: Rs.16188.79
[2025-10-17T04:03:43.211Z] [LOG]       - Attendance Deduction: Rs.16188.79
[2025-10-17T04:03:43.211Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:03:43.212Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:03:43.212Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:03:43.212Z] [LOG]    NET SALARY: Rs.33811.21
[2025-10-17T04:03:43.213Z] [LOG] ======================================================================

[2025-10-17T04:03:43.213Z] [LOG] ✅ Franklin null: Calculation completed successfully
[2025-10-17T04:03:43.213Z] [LOG] 📊 Progress: 11/34 (32.4%)
[2025-10-17T04:03:43.213Z] [LOG] 
🧮 Processing: Safna Nawas null (EMP000021)
[2025-10-17T04:03:43.214Z] [LOG] 📋 Record ID: 19aa7383-9bad-4b43-9732-8ade31d13dbe
[2025-10-17T04:03:43.214Z] [LOG] 
======================================================================
[2025-10-17T04:03:43.216Z] [LOG] 🧮 CALCULATING PAYROLL: Safna Nawas null (EMP000021)
[2025-10-17T04:03:43.216Z] [LOG] ======================================================================
[2025-10-17T04:03:43.611Z] [LOG] GET /api/payroll-runs?limit=20&offset=0 - 200 - 4463ms
[2025-10-17T04:03:44.130Z] [LOG] 🔍 Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-17T04:03:44.130Z] [LOG]    Total components: 9
[2025-10-17T04:03:44.131Z] [LOG]    Applicable components: 9
[2025-10-17T04:03:44.131Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T04:03:44.172Z] [LOG] session eka meka {
  "id": "35664f16-ab0c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "2b1bfede-3a1f-4ad1-bacb-025d046c014d",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 09:33:34",
  "is_active": 1,
  "created_at": "2025-10-17 09:18:57",
  "user_active": 1
}
[2025-10-17T04:03:44.484Z] [LOG] GET /api/employees - 304 - 3366ms
[2025-10-17T04:03:45.727Z] [LOG] GET /api/employees?limit=10000&page=1 - 304 - 3493ms
[2025-10-17T04:03:51.869Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:03:51.870Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:03:52.099Z] [LOG] 📊 Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:52.329Z] [LOG] 📊 Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:52.561Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:52.561Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:03:52.563Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:03:52.563Z] [LOG] 💰 GROSS CALCULATION for Safna Nawas null:
[2025-10-17T04:03:52.564Z] [LOG]    Base Salary: 50000
[2025-10-17T04:03:52.565Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:03:52.792Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:03:53.027Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:03:53.027Z] [LOG]    Employee ID: 0143c977-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:53.028Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:03:53.029Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T04:03:53.257Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:03:53.258Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T04:03:53.259Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T04:03:53.260Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-17T04:03:53.260Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:03:53.487Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:03:53.488Z] [LOG]       Weekday (Mon-Fri): 141.03h
[2025-10-17T04:03:53.489Z] [LOG]       Saturday: 17.47h
[2025-10-17T04:03:53.489Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:03:53.490Z] [LOG]       Total Worked: 158.50h
[2025-10-17T04:03:53.491Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:03:53.491Z] [LOG]       Weekday: 141.03h × Rs.235.29 = Rs.33182.95
[2025-10-17T04:03:53.492Z] [LOG]       Saturday: 17.47h × Rs.444.44 = Rs.7764.37
[2025-10-17T04:03:53.493Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:03:53.493Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:03:53.494Z] [LOG]       Total Earned Salary: Rs.40947.32
[2025-10-17T04:03:53.495Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:03:53.496Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T04:03:53.496Z] [LOG]       Earned Salary: Rs.40947.32
[2025-10-17T04:03:53.497Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:03:53.498Z] [LOG]       Attendance Deduction: Rs.9052.68
[2025-10-17T04:03:53.498Z] [LOG]       📉 Deduction is 18.11% of base salary
[2025-10-17T04:03:53.499Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:03:53.500Z] [LOG]    Gross Salary: 50000
[2025-10-17T04:03:53.500Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:03:53.501Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:03:53.502Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:53.502Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:03:53.503Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:53.503Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:03:53.504Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:53.505Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:03:53.505Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:53.507Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:03:53.508Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:53.509Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:03:53.510Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:53.511Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:03:53.512Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:53.512Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:03:53.512Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:53.512Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:03:53.513Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:53.513Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:03:53.513Z] [LOG] Regular deductions for Safna Nawas null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:03:53.514Z] [LOG] Combined deductions for Safna Nawas null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 9052.684500000003,
      "details": "Based on worked hours (158.5h total)"
    }
  ],
  "total": 9052.684500000003
}
[2025-10-17T04:03:53.744Z] [LOG] Creating components for record 19aa7383-9bad-4b43-9732-8ade31d13dbe: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:03:53.745Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 9052.684500000003
}
[2025-10-17T04:03:53.971Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:03:54.206Z] [LOG] Created payroll_record_component: b1186adb-6dd5-43eb-8ab8-8c3095dd23b1 for Attendance Deduction
[2025-10-17T04:03:54.664Z] [LOG] ✅ Financial balances updated successfully for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:54.665Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:03:54.665Z] [LOG] 
======================================================================
[2025-10-17T04:03:54.666Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Safna Nawas null
[2025-10-17T04:03:54.667Z] [LOG] ======================================================================
[2025-10-17T04:03:54.668Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T04:03:54.668Z] [LOG]    Total Deductions: Rs.9052.68
[2025-10-17T04:03:54.669Z] [LOG]       - Attendance Deduction: Rs.9052.68
[2025-10-17T04:03:54.670Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:03:54.671Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:03:54.672Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:03:54.673Z] [LOG]    NET SALARY: Rs.40947.32
[2025-10-17T04:03:54.674Z] [LOG] ======================================================================

[2025-10-17T04:03:54.677Z] [LOG] ✅ Safna Nawas null: Calculation completed successfully
[2025-10-17T04:03:54.680Z] [LOG] 📊 Progress: 12/34 (35.3%)
[2025-10-17T04:03:54.681Z] [LOG] 
🧮 Processing: Saru null (EMP000022)
[2025-10-17T04:03:54.682Z] [LOG] 📋 Record ID: d07d6acf-e721-4087-9712-715c62d9db13
[2025-10-17T04:03:54.682Z] [LOG] 
======================================================================
[2025-10-17T04:03:54.683Z] [LOG] 🧮 CALCULATING PAYROLL: Saru null (EMP000022)
[2025-10-17T04:03:54.683Z] [LOG] ======================================================================
[2025-10-17T04:03:55.601Z] [LOG] 🔍 Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-17T04:03:55.601Z] [LOG]    Total components: 9
[2025-10-17T04:03:55.602Z] [LOG]    Applicable components: 9
[2025-10-17T04:03:55.602Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T04:03:56.988Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:03:56.989Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:03:57.237Z] [LOG] 📊 Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:57.466Z] [LOG] 📊 Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:57.694Z] [LOG] 📊 Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:57.695Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:03:57.696Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:03:57.697Z] [LOG] 💰 GROSS CALCULATION for Saru null:
[2025-10-17T04:03:57.698Z] [LOG]    Base Salary: 50000
[2025-10-17T04:03:57.698Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:03:57.927Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:03:58.160Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:03:58.161Z] [LOG]    Employee ID: 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:58.162Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:03:58.163Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T04:03:58.406Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:03:58.406Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T04:03:58.406Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T04:03:58.407Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-17T04:03:58.407Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:03:58.637Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:03:58.637Z] [LOG]       Weekday (Mon-Fri): 160.87h
[2025-10-17T04:03:58.638Z] [LOG]       Saturday: 21.25h
[2025-10-17T04:03:58.638Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:03:58.638Z] [LOG]       Total Worked: 182.12h
[2025-10-17T04:03:58.639Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:03:58.639Z] [LOG]       Weekday: 160.87h × Rs.235.29 = Rs.37851.10
[2025-10-17T04:03:58.639Z] [LOG]       Saturday: 21.25h × Rs.444.44 = Rs.9444.35
[2025-10-17T04:03:58.640Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:03:58.640Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:03:58.640Z] [LOG]       Total Earned Salary: Rs.47295.45
[2025-10-17T04:03:58.641Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:03:58.642Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T04:03:58.642Z] [LOG]       Earned Salary: Rs.47295.45
[2025-10-17T04:03:58.642Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:03:58.643Z] [LOG]       Attendance Deduction: Rs.2704.55
[2025-10-17T04:03:58.643Z] [LOG]       📉 Deduction is 5.41% of base salary
[2025-10-17T04:03:58.643Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:03:58.643Z] [LOG]    Gross Salary: 50000
[2025-10-17T04:03:58.643Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:03:58.644Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:03:58.644Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:58.644Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:03:58.644Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:58.645Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:03:58.645Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:58.645Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:03:58.645Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:58.646Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:03:58.646Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:58.646Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:03:58.646Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:58.646Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:03:58.647Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:58.647Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:03:58.647Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:58.647Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:03:58.648Z] [LOG]    Fixed amount: 0
[2025-10-17T04:03:58.648Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:03:58.648Z] [LOG] Regular deductions for Saru null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:03:58.649Z] [LOG] Combined deductions for Saru null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 2704.547700000003,
      "details": "Based on worked hours (182.12h total)"
    }
  ],
  "total": 2704.547700000003
}
[2025-10-17T04:03:58.881Z] [LOG] Creating components for record d07d6acf-e721-4087-9712-715c62d9db13: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:03:58.883Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 2704.547700000003
}
[2025-10-17T04:03:59.114Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:03:59.344Z] [LOG] Created payroll_record_component: e3600d3c-3a04-457e-933e-fa2bc6d22e90 for Attendance Deduction
[2025-10-17T04:03:59.800Z] [LOG] ✅ Financial balances updated successfully for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-17T04:03:59.800Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:03:59.801Z] [LOG] 
======================================================================
[2025-10-17T04:03:59.802Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saru null
[2025-10-17T04:03:59.802Z] [LOG] ======================================================================
[2025-10-17T04:03:59.803Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T04:03:59.804Z] [LOG]    Total Deductions: Rs.2704.55
[2025-10-17T04:03:59.804Z] [LOG]       - Attendance Deduction: Rs.2704.55
[2025-10-17T04:03:59.805Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:03:59.806Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:03:59.806Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:03:59.808Z] [LOG]    NET SALARY: Rs.47295.45
[2025-10-17T04:03:59.808Z] [LOG] ======================================================================

[2025-10-17T04:03:59.809Z] [LOG] ✅ Saru null: Calculation completed successfully
[2025-10-17T04:03:59.810Z] [LOG] 📊 Progress: 13/34 (38.2%)
[2025-10-17T04:03:59.811Z] [LOG] 
🧮 Processing: Ammaar Ilham (EMP000023)
[2025-10-17T04:03:59.812Z] [LOG] 📋 Record ID: 12cba317-6227-49fd-bc0d-50b3758a85f4
[2025-10-17T04:03:59.813Z] [LOG] 
======================================================================
[2025-10-17T04:03:59.814Z] [LOG] 🧮 CALCULATING PAYROLL: Ammaar Ilham (EMP000023)
[2025-10-17T04:03:59.814Z] [LOG] ======================================================================
[2025-10-17T04:04:00.733Z] [LOG] 🔍 Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-17T04:04:00.733Z] [LOG]    Total components: 9
[2025-10-17T04:04:00.733Z] [LOG]    Applicable components: 9
[2025-10-17T04:04:00.733Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T04:04:08.105Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:04:08.105Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:04:08.335Z] [LOG] 📊 Found 1 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:08.561Z] [LOG] 📊 Found 0 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:08.789Z] [LOG] 📊 Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:08.790Z] [LOG] 💰 Loan a7952829-136b-4e54-9391-303963425436: Deducting LKR 5000 (Remaining: LKR 10000)
[2025-10-17T04:04:08.790Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 5000,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": -5000
}
[2025-10-17T04:04:08.794Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:04:08.804Z] [LOG] 💰 GROSS CALCULATION for Ammaar Ilham:
[2025-10-17T04:04:08.805Z] [LOG]    Base Salary: 70000
[2025-10-17T04:04:08.806Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:04:09.037Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:04:09.266Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:04:09.266Z] [LOG]    Employee ID: 0143de00-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:09.267Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:04:09.268Z] [LOG]    Base Salary: Rs.70000.00
[2025-10-17T04:04:09.495Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:04:09.496Z] [LOG]       Daily Salary: Rs.2800.00
[2025-10-17T04:04:09.497Z] [LOG]       Weekday Hourly Rate: Rs.329.41
[2025-10-17T04:04:09.497Z] [LOG]       Saturday Hourly Rate: Rs.622.22
[2025-10-17T04:04:09.498Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:04:09.724Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:04:09.725Z] [LOG]       Weekday (Mon-Fri): 157.19h
[2025-10-17T04:04:09.726Z] [LOG]       Saturday: 21.33h
[2025-10-17T04:04:09.726Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:04:09.726Z] [LOG]       Total Worked: 178.52h
[2025-10-17T04:04:09.726Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:04:09.728Z] [LOG]       Weekday: 157.19h × Rs.329.41 = Rs.51779.96
[2025-10-17T04:04:09.728Z] [LOG]       Saturday: 21.33h × Rs.622.22 = Rs.13271.95
[2025-10-17T04:04:09.729Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:04:09.729Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:04:09.729Z] [LOG]       Total Earned Salary: Rs.65051.91
[2025-10-17T04:04:09.729Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:04:09.729Z] [LOG]       Base Salary: Rs.70000.00
[2025-10-17T04:04:09.730Z] [LOG]       Earned Salary: Rs.65051.91
[2025-10-17T04:04:09.730Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:04:09.730Z] [LOG]       Attendance Deduction: Rs.4948.09
[2025-10-17T04:04:09.730Z] [LOG]       📉 Deduction is 7.07% of base salary
[2025-10-17T04:04:09.730Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:04:09.731Z] [LOG]    Gross Salary: 70000
[2025-10-17T04:04:09.731Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:04:09.731Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:04:09.731Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:09.732Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:04:09.733Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:09.733Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:04:09.734Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:09.737Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:04:09.737Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:09.737Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:04:09.738Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:09.738Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:04:09.743Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:09.745Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:04:09.746Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:09.746Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:04:09.746Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:09.747Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:04:09.747Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:09.747Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:04:09.748Z] [LOG] Regular deductions for Ammaar Ilham: {
  "components": [],
  "total": 0
}
[2025-10-17T04:04:09.748Z] [LOG] Combined deductions for Ammaar Ilham: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 4948.089500000002,
      "details": "Based on worked hours (178.51999999999998h total)"
    },
    {
      "code": "LOAN_DED",
      "name": "Loan Deductions",
      "type": "deduction",
      "category": "loan",
      "amount": 5000,
      "details": "1 loan(s)"
    }
  ],
  "total": 9948.089500000002
}
[2025-10-17T04:04:09.978Z] [LOG] Creating components for record 12cba317-6227-49fd-bc0d-50b3758a85f4: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-17T04:04:09.980Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 4948.089500000002
}
[2025-10-17T04:04:10.044Z] [LOG] session eka meka {
  "id": "35664f16-ab0c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "2b1bfede-3a1f-4ad1-bacb-025d046c014d",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 09:33:34",
  "is_active": 1,
  "created_at": "2025-10-17 09:18:57",
  "user_active": 1
}
[2025-10-17T04:04:10.049Z] [LOG] session eka meka {
  "id": "35664f16-ab0c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "2b1bfede-3a1f-4ad1-bacb-025d046c014d",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 09:33:34",
  "is_active": 1,
  "created_at": "2025-10-17 09:18:57",
  "user_active": 1
}
[2025-10-17T04:04:10.106Z] [LOG] session eka meka {
  "id": "35664f16-ab0c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "2b1bfede-3a1f-4ad1-bacb-025d046c014d",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 09:33:34",
  "is_active": 1,
  "created_at": "2025-10-17 09:18:57",
  "user_active": 1
}
[2025-10-17T04:04:10.111Z] [LOG] session eka meka {
  "id": "35664f16-ab0c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "2b1bfede-3a1f-4ad1-bacb-025d046c014d",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 09:33:34",
  "is_active": 1,
  "created_at": "2025-10-17 09:18:57",
  "user_active": 1
}
[2025-10-17T04:04:10.210Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:04:10.440Z] [LOG] Created payroll_record_component: 3e8d2bb7-e566-4087-9177-f4daad0d290d for Attendance Deduction
[2025-10-17T04:04:10.441Z] [LOG] Processing component: {
  "name": "Loan Deductions",
  "type": "deduction",
  "amount": 5000
}
[2025-10-17T04:04:10.670Z] [LOG] Using existing component ID: 64a0d7d8-8fdb-4968-a7a2-057590b481c7
[2025-10-17T04:04:10.746Z] [LOG] GET /api/departments - 200 - 879ms
[2025-10-17T04:04:10.773Z] [LOG] GET /api/designations - 200 - 904ms
[2025-10-17T04:04:10.904Z] [LOG] Created payroll_record_component: 3de97905-1d5f-4c78-b9ef-daf1653ca797 for Loan Deductions
[2025-10-17T04:04:11.048Z] [LOG] GET /api/employees/managers - 200 - 1177ms
[2025-10-17T04:04:11.048Z] [LOG] [
  {
    "id": "0143de00-7105-11f0-a50f-98e743540430",
    "full_name": "Ammaar Ilham",
    "employee_code": "EMP000023",
    "department_name": "IT department",
    "designation_title": "Web Developer"
  },
  {
    "id": "0143afc6-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000014",
    "department_name": "IT department",
    "designation_title": "Web Developer"
  },
  {
    "id": "0144461e-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000046",
    "department_name": "IT department",
    "designation_title": "Web Developer"
  },
  {
    "id": "0143f302-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000032",
    "department_name": "Call Centre department",
    "designation_title": "Customer Executive"
  },
  {
    "id": "01442599-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000040",
    "department_name": "IT department",
    "designation_title": "Web Developer"
  },
  {
    "id": "014409a2-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000036",
    "department_name": null,
    "designation_title": null
  },
  {
    "id": "0143a994-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000009",
    "department_name": "Call Centre department",
    "designation_title": "Customer Executive"
  },
  {
    "id": "0143a057-7105-11f0-a50f-98e743540430",
    "full_name": "Faizan Faizan",
    "employee_code": "EMP000003",
    "department_name": "Sales department",
    "designation_title": "Sales Executive"
  },
  {
    "id": "0143c037-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000018",
    "department_name": "Designing department",
    "designation_title": "Designer"
  },
  {
    "id": "0144315c-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000042",
    "department_name": "Sales department",
    "designation_title": "Sales Executive"
  },
  {
    "id": "0143bc58-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000017",
    "department_name": "Call Centre department",
    "designation_title": "Customer Executive"
  },
  {
    "id": "0143ac0c-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000011",
    "department_name": "Sales department",
    "designation_title": "Sales Executive"
  },
  {
    "id": "0143ae6e-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000013",
    "department_name": "Call Centre department",
    "designation_title": "Customer Executive"
  },
  {
    "id": "9e8125c4-ce58-411a-b617-9f75d481c613",
    "full_name": "Kaushal Thambi",
    "employee_code": "EMP465256103",
    "department_name": "Designing department",
    "designation_title": "Designer"
  },
  {
    "id": "01440221-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000035",
    "department_name": "Designing department",
    "designation_title": "Designer"
  },
  {
    "id": "01444074-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000045",
    "department_name": "IT department",
    "designation_title": "Web Developer"
  },
  {
    "id": "01442b21-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000041",
    "department_name": null,
    "designation_title": null
  },
  {
    "id": "014435dc-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000043",
    "department_name": null,
    "designation_title": null
  },
  {
    "id": "0143e565-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000025",
    "department_name": "Call Centre department",
    "designation_title": "Customer Executive"
  },
  {
    "id": "014397c7-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000001",
    "department_name": null,
    "designation_title": null
  },
  {
    "id": "01443963-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000044",
    "department_name": "IT department",
    "designation_title": "Web Developer"
  },
  {
    "id": "0143eaec-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000028",
    "department_name": "Sales department",
    "designation_title": "Sales Executive"
  },
  {
    "id": "01444966-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000047",
    "department_name": "IT department",
    "designation_title": "Web Developer"
  },
  {
    "id": "0143e915-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000027",
    "department_name": null,
    "designation_title": null
  },
  {
    "id": "0143c977-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000021",
    "department_name": "Call Centre department",
    "designation_title": "Customer Executive"
  },
  {
    "id": "0143cc7e-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000022",
    "department_name": "IT department",
    "designation_title": "Web Developer"
  },
  {
    "id": "0143a6e3-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000007",
    "department_name": null,
    "designation_title": null
  },
  {
    "id": "0143fc5a-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000034",
    "department_name": "IT department",
    "designation_title": "Web Developer"
  },
  {
    "id": "01441e19-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000039",
    "department_name": "Designing department",
    "designation_title": "Designer"
  },
  {
    "id": "0143e6c3-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000026",
    "department_name": null,
    "designation_title": null
  },
  {
    "id": "0143b22f-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000016",
    "department_name": "Call Centre department",
    "designation_title": "Customer Executive"
  },
  {
    "id": "0143a539-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000006",
    "department_name": "Sales department",
    "designation_title": "Sales Executive"
  },
  {
    "id": "01441633-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000038",
    "department_name": "Call Centre department",
    "designation_title": "Customer Executive"
  },
  {
    "id": "0143e40c-7105-11f0-a50f-98e743540430",
    "full_name": null,
    "employee_code": "EMP000024",
    "department_name": "Call Centre department",
    "designation_title": "Customer Executive"
  }
]
[2025-10-17T04:04:11.100Z] [LOG] GET /api/settings - 304 - 1227ms
[2025-10-17T04:04:11.356Z] [LOG] ✅ Updated loan a7952829-136b-4e54-9391-303963425436: Remaining LKR 5000, Status: active
[2025-10-17T04:04:11.589Z] [LOG] ✅ Financial balances updated successfully for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:11.589Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:04:11.590Z] [LOG] 
======================================================================
[2025-10-17T04:04:11.592Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ammaar Ilham
[2025-10-17T04:04:11.593Z] [LOG] ======================================================================
[2025-10-17T04:04:11.593Z] [LOG]    Gross Salary: Rs.70000.00
[2025-10-17T04:04:11.594Z] [LOG]    Total Deductions: Rs.9948.09
[2025-10-17T04:04:11.594Z] [LOG]       - Attendance Deduction: Rs.4948.09
[2025-10-17T04:04:11.595Z] [LOG]       - Other Deductions: Rs.5000.00
[2025-10-17T04:04:11.596Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:04:11.597Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:04:11.597Z] [LOG]    NET SALARY: Rs.60051.91
[2025-10-17T04:04:11.598Z] [LOG] ======================================================================

[2025-10-17T04:04:11.602Z] [LOG] ✅ Ammaar Ilham: Calculation completed successfully
[2025-10-17T04:04:11.603Z] [LOG] 📊 Progress: 14/34 (41.2%)
[2025-10-17T04:04:11.603Z] [LOG] 
🧮 Processing: Waruni null (EMP000024)
[2025-10-17T04:04:11.604Z] [LOG] 📋 Record ID: 84e99f6a-b361-4665-b753-e0f68a0860d4
[2025-10-17T04:04:11.605Z] [LOG] 
======================================================================
[2025-10-17T04:04:11.607Z] [LOG] 🧮 CALCULATING PAYROLL: Waruni null (EMP000024)
[2025-10-17T04:04:11.608Z] [LOG] ======================================================================
[2025-10-17T04:04:12.521Z] [LOG] 🔍 Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-17T04:04:12.522Z] [LOG]    Total components: 9
[2025-10-17T04:04:12.522Z] [LOG]    Applicable components: 9
[2025-10-17T04:04:12.523Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T04:04:21.208Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:04:21.209Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:04:21.437Z] [LOG] 📊 Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:21.665Z] [LOG] 📊 Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:21.890Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:21.890Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:04:21.892Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:04:21.893Z] [LOG] 💰 GROSS CALCULATION for Waruni null:
[2025-10-17T04:04:21.894Z] [LOG]    Base Salary: 50000
[2025-10-17T04:04:21.895Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:04:22.122Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:04:22.364Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:04:22.365Z] [LOG]    Employee ID: 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:22.365Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:04:22.366Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T04:04:22.602Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:04:22.603Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T04:04:22.603Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T04:04:22.604Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-17T04:04:22.604Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:04:22.831Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:04:22.832Z] [LOG]       Weekday (Mon-Fri): 169.52h
[2025-10-17T04:04:22.832Z] [LOG]       Saturday: 22.39h
[2025-10-17T04:04:22.833Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:04:22.833Z] [LOG]       Total Worked: 191.91h
[2025-10-17T04:04:22.834Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:04:22.835Z] [LOG]       Weekday: 169.52h × Rs.235.29 = Rs.39886.36
[2025-10-17T04:04:22.835Z] [LOG]       Saturday: 22.39h × Rs.444.44 = Rs.9951.01
[2025-10-17T04:04:22.836Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:04:22.837Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:04:22.837Z] [LOG]       Total Earned Salary: Rs.49837.37
[2025-10-17T04:04:22.838Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:04:22.839Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T04:04:22.840Z] [LOG]       Earned Salary: Rs.49837.37
[2025-10-17T04:04:22.841Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:04:22.842Z] [LOG]       Attendance Deduction: Rs.162.63
[2025-10-17T04:04:22.844Z] [LOG]       📉 Deduction is 0.33% of base salary
[2025-10-17T04:04:22.846Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:04:22.846Z] [LOG]    Gross Salary: 50000
[2025-10-17T04:04:22.847Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:04:22.848Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:04:22.848Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:22.849Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:04:22.850Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:22.850Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:04:22.851Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:22.852Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:04:22.852Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:22.852Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:04:22.853Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:22.853Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:04:22.853Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:22.854Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:04:22.854Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:22.854Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:04:22.855Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:22.855Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:04:22.855Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:22.856Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:04:22.856Z] [LOG] Regular deductions for Waruni null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:04:22.857Z] [LOG] Combined deductions for Waruni null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 162.6275999999998,
      "details": "Based on worked hours (191.91000000000003h total)"
    }
  ],
  "total": 162.6275999999998
}
[2025-10-17T04:04:23.086Z] [LOG] Creating components for record 84e99f6a-b361-4665-b753-e0f68a0860d4: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:04:23.088Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 162.6275999999998
}
[2025-10-17T04:04:23.316Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:04:23.543Z] [LOG] Created payroll_record_component: 25f038dd-c1e9-42d0-8dcd-dc9fd08179b8 for Attendance Deduction
[2025-10-17T04:04:24.001Z] [LOG] ✅ Financial balances updated successfully for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:24.001Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:04:24.002Z] [LOG] 
======================================================================
[2025-10-17T04:04:24.003Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Waruni null
[2025-10-17T04:04:24.003Z] [LOG] ======================================================================
[2025-10-17T04:04:24.004Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T04:04:24.005Z] [LOG]    Total Deductions: Rs.162.63
[2025-10-17T04:04:24.005Z] [LOG]       - Attendance Deduction: Rs.162.63
[2025-10-17T04:04:24.006Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:04:24.006Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:04:24.007Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:04:24.007Z] [LOG]    NET SALARY: Rs.49837.37
[2025-10-17T04:04:24.008Z] [LOG] ======================================================================

[2025-10-17T04:04:24.009Z] [LOG] ✅ Waruni null: Calculation completed successfully
[2025-10-17T04:04:24.010Z] [LOG] 📊 Progress: 15/34 (44.1%)
[2025-10-17T04:04:24.011Z] [LOG] 
🧮 Processing: Piyumi null (EMP000025)
[2025-10-17T04:04:24.012Z] [LOG] 📋 Record ID: 0ccde625-5dbb-4766-9ebb-14d19963b9a2
[2025-10-17T04:04:24.013Z] [LOG] 
======================================================================
[2025-10-17T04:04:24.015Z] [LOG] 🧮 CALCULATING PAYROLL: Piyumi null (EMP000025)
[2025-10-17T04:04:24.016Z] [LOG] ======================================================================
[2025-10-17T04:04:24.926Z] [LOG] 🔍 Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-17T04:04:24.926Z] [LOG]    Total components: 9
[2025-10-17T04:04:24.927Z] [LOG]    Applicable components: 9
[2025-10-17T04:04:24.927Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T04:04:26.347Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:04:26.348Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:04:26.578Z] [LOG] 📊 Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:26.806Z] [LOG] 📊 Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:27.038Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:27.039Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:04:27.040Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:04:27.041Z] [LOG] 💰 GROSS CALCULATION for Piyumi null:
[2025-10-17T04:04:27.042Z] [LOG]    Base Salary: 50000
[2025-10-17T04:04:27.042Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:04:27.271Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:04:27.501Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:04:27.505Z] [LOG]    Employee ID: 0143e565-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:27.506Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:04:27.506Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T04:04:27.735Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:04:27.736Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T04:04:27.736Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T04:04:27.737Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-17T04:04:27.737Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:04:27.967Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:04:27.967Z] [LOG]       Weekday (Mon-Fri): 139.96h
[2025-10-17T04:04:27.968Z] [LOG]       Saturday: 16.11h
[2025-10-17T04:04:27.969Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:04:27.969Z] [LOG]       Total Worked: 156.07h
[2025-10-17T04:04:27.970Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:04:27.970Z] [LOG]       Weekday: 139.96h × Rs.235.29 = Rs.32931.19
[2025-10-17T04:04:27.971Z] [LOG]       Saturday: 16.11h × Rs.444.44 = Rs.7159.93
[2025-10-17T04:04:27.972Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:04:27.972Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:04:27.973Z] [LOG]       Total Earned Salary: Rs.40091.12
[2025-10-17T04:04:27.973Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:04:27.977Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T04:04:27.978Z] [LOG]       Earned Salary: Rs.40091.12
[2025-10-17T04:04:27.978Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:04:27.979Z] [LOG]       Attendance Deduction: Rs.9908.88
[2025-10-17T04:04:27.980Z] [LOG]       📉 Deduction is 19.82% of base salary
[2025-10-17T04:04:27.983Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:04:27.984Z] [LOG]    Gross Salary: 50000
[2025-10-17T04:04:27.984Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:04:27.985Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:04:27.985Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:27.986Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:04:27.987Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:27.987Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:04:27.988Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:27.991Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:04:27.994Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:27.995Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:04:27.996Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:28.000Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:04:28.002Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:28.003Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:04:28.004Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:28.005Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:04:28.005Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:28.006Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:04:28.007Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:28.009Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:04:28.010Z] [LOG] Regular deductions for Piyumi null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:04:28.011Z] [LOG] Combined deductions for Piyumi null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 9908.883200000004,
      "details": "Based on worked hours (156.07h total)"
    }
  ],
  "total": 9908.883200000004
}
[2025-10-17T04:04:28.243Z] [LOG] Creating components for record 0ccde625-5dbb-4766-9ebb-14d19963b9a2: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:04:28.244Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 9908.883200000004
}
[2025-10-17T04:04:28.472Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:04:28.711Z] [LOG] Created payroll_record_component: 83576cc1-9aee-4f39-a4a0-778eaae85446 for Attendance Deduction
[2025-10-17T04:04:29.172Z] [LOG] ✅ Financial balances updated successfully for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:29.173Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:04:29.173Z] [LOG] 
======================================================================
[2025-10-17T04:04:29.173Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Piyumi null
[2025-10-17T04:04:29.174Z] [LOG] ======================================================================
[2025-10-17T04:04:29.174Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T04:04:29.175Z] [LOG]    Total Deductions: Rs.9908.88
[2025-10-17T04:04:29.175Z] [LOG]       - Attendance Deduction: Rs.9908.88
[2025-10-17T04:04:29.176Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:04:29.176Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:04:29.177Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:04:29.177Z] [LOG]    NET SALARY: Rs.40091.12
[2025-10-17T04:04:29.178Z] [LOG] ======================================================================

[2025-10-17T04:04:29.178Z] [LOG] ✅ Piyumi null: Calculation completed successfully
[2025-10-17T04:04:29.179Z] [LOG] 📊 Progress: 16/34 (47.1%)
[2025-10-17T04:04:29.179Z] [LOG] 
🧮 Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-17T04:04:29.180Z] [LOG] 📋 Record ID: a26ef3bc-e342-4132-9c2f-15b50e775948
[2025-10-17T04:04:29.180Z] [LOG] 
======================================================================
[2025-10-17T04:04:29.181Z] [LOG] 🧮 CALCULATING PAYROLL: Sujevan Selvaratnam null (EMP000026)
[2025-10-17T04:04:29.182Z] [LOG] ======================================================================
[2025-10-17T04:04:30.094Z] [LOG] 🔍 Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-17T04:04:30.095Z] [LOG]    Total components: 9
[2025-10-17T04:04:30.095Z] [LOG]    Applicable components: 9
[2025-10-17T04:04:30.096Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T04:04:31.010Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:04:31.011Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:04:31.240Z] [LOG] 📊 Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:31.473Z] [LOG] 📊 Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:31.699Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:31.699Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:04:31.699Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:04:31.700Z] [LOG] 💰 GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-17T04:04:31.700Z] [LOG]    Base Salary: 1
[2025-10-17T04:04:31.700Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:04:31.927Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:04:32.156Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:04:32.157Z] [LOG]    Employee ID: 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:32.158Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:04:32.158Z] [LOG]    Base Salary: Rs.1.00
[2025-10-17T04:04:32.386Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:04:32.386Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-17T04:04:32.386Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-17T04:04:32.387Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-17T04:04:32.387Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:04:32.616Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:04:32.617Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-17T04:04:32.617Z] [LOG]       Saturday: 0.00h
[2025-10-17T04:04:32.617Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:04:32.618Z] [LOG]       Total Worked: 0.00h
[2025-10-17T04:04:32.618Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:04:32.619Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:04:32.619Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:04:32.620Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:04:32.620Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:04:32.620Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T04:04:32.621Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:04:32.621Z] [LOG]       Base Salary: Rs.1.00
[2025-10-17T04:04:32.622Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T04:04:32.622Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:04:32.623Z] [LOG]       Attendance Deduction: Rs.1.00
[2025-10-17T04:04:32.623Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-17T04:04:32.624Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:04:32.624Z] [LOG]    Gross Salary: 1
[2025-10-17T04:04:32.627Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:04:32.628Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:04:32.629Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:32.629Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:04:32.630Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:32.630Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:04:32.630Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:32.631Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:04:32.631Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:32.632Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:04:32.632Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:32.633Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:04:32.633Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:32.633Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:04:32.634Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:32.634Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:04:32.635Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:32.635Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:04:32.636Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:32.636Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:04:32.636Z] [LOG] Regular deductions for Sujevan Selvaratnam null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:04:32.637Z] [LOG] Combined deductions for Sujevan Selvaratnam null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 1
}
[2025-10-17T04:04:32.872Z] [LOG] Creating components for record a26ef3bc-e342-4132-9c2f-15b50e775948: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:04:32.873Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1
}
[2025-10-17T04:04:33.101Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:04:33.331Z] [LOG] Created payroll_record_component: 6637a37c-e43f-4412-9322-cf695f9a42c1 for Attendance Deduction
[2025-10-17T04:04:33.784Z] [LOG] ✅ Financial balances updated successfully for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:33.785Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:04:33.786Z] [LOG] 
======================================================================
[2025-10-17T04:04:33.786Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sujevan Selvaratnam null
[2025-10-17T04:04:33.787Z] [LOG] ======================================================================
[2025-10-17T04:04:33.787Z] [LOG]    Gross Salary: Rs.1.00
[2025-10-17T04:04:33.788Z] [LOG]    Total Deductions: Rs.1.00
[2025-10-17T04:04:33.789Z] [LOG]       - Attendance Deduction: Rs.1.00
[2025-10-17T04:04:33.789Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:04:33.790Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:04:33.790Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:04:33.791Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T04:04:33.792Z] [LOG] ======================================================================

[2025-10-17T04:04:33.793Z] [LOG] ✅ Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-17T04:04:33.793Z] [LOG] 📊 Progress: 17/34 (50.0%)
[2025-10-17T04:04:33.794Z] [LOG] 
🧮 Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-17T04:04:33.795Z] [LOG] 📋 Record ID: f7082cbf-25e8-4c0b-899d-3fb847c9ae40
[2025-10-17T04:04:33.796Z] [LOG] 
======================================================================
[2025-10-17T04:04:33.798Z] [LOG] 🧮 CALCULATING PAYROLL: Ruvindu Hewabandu null (EMP000027)
[2025-10-17T04:04:33.799Z] [LOG] ======================================================================
[2025-10-17T04:04:34.725Z] [LOG] 🔍 Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-17T04:04:34.726Z] [LOG]    Total components: 9
[2025-10-17T04:04:34.727Z] [LOG]    Applicable components: 9
[2025-10-17T04:04:34.728Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T04:04:35.639Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:04:35.640Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:04:35.869Z] [LOG] 📊 Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:36.103Z] [LOG] 📊 Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:36.331Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:36.332Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:04:36.333Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:04:36.334Z] [LOG] 💰 GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-17T04:04:36.335Z] [LOG]    Base Salary: 0
[2025-10-17T04:04:36.336Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:04:36.564Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:04:36.789Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:04:36.790Z] [LOG]    Employee ID: 0143e915-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:36.791Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:04:36.791Z] [LOG]    Base Salary: Rs.0.00
[2025-10-17T04:04:37.028Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:04:37.029Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-17T04:04:37.029Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-17T04:04:37.029Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-17T04:04:37.029Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:04:37.260Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:04:37.260Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-17T04:04:37.261Z] [LOG]       Saturday: 0.00h
[2025-10-17T04:04:37.261Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:04:37.262Z] [LOG]       Total Worked: 0.00h
[2025-10-17T04:04:37.262Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:04:37.263Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:04:37.263Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:04:37.264Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:04:37.264Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:04:37.265Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T04:04:37.265Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:04:37.266Z] [LOG]       Base Salary: Rs.0.00
[2025-10-17T04:04:37.267Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T04:04:37.267Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:04:37.268Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-17T04:04:37.268Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-17T04:04:37.269Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:04:37.270Z] [LOG]    Gross Salary: 0
[2025-10-17T04:04:37.271Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:04:37.272Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:04:37.273Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:37.273Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:04:37.274Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:37.274Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:04:37.276Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:37.276Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:04:37.277Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:37.279Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:04:37.280Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:37.280Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:04:37.281Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:37.281Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:04:37.282Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:37.282Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:04:37.283Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:37.283Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:04:37.283Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:37.283Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:04:37.284Z] [LOG] Regular deductions for Ruvindu Hewabandu null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:04:37.284Z] [LOG] Combined deductions for Ruvindu Hewabandu null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 0
}
[2025-10-17T04:04:37.518Z] [LOG] Creating components for record f7082cbf-25e8-4c0b-899d-3fb847c9ae40: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:04:37.520Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-17T04:04:37.750Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:04:37.981Z] [LOG] Created payroll_record_component: 2e990ecf-8f49-41ce-ade3-5c60396a727e for Attendance Deduction
[2025-10-17T04:04:38.446Z] [LOG] ✅ Financial balances updated successfully for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:38.447Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:04:38.448Z] [LOG] 
======================================================================
[2025-10-17T04:04:38.450Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ruvindu Hewabandu null
[2025-10-17T04:04:38.452Z] [LOG] ======================================================================
[2025-10-17T04:04:38.452Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-17T04:04:38.453Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-17T04:04:38.454Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-17T04:04:38.454Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:04:38.455Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:04:38.456Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:04:38.456Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T04:04:38.457Z] [LOG] ======================================================================

[2025-10-17T04:04:38.459Z] [LOG] ✅ Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-17T04:04:38.461Z] [LOG] 📊 Progress: 18/34 (52.9%)
[2025-10-17T04:04:38.462Z] [LOG] 
🧮 Processing: Rasanga null (EMP000028)
[2025-10-17T04:04:38.463Z] [LOG] 📋 Record ID: ace863c5-d1fe-4096-b8d6-87c7b8b986fe
[2025-10-17T04:04:38.464Z] [LOG] 
======================================================================
[2025-10-17T04:04:38.464Z] [LOG] 🧮 CALCULATING PAYROLL: Rasanga null (EMP000028)
[2025-10-17T04:04:38.465Z] [LOG] ======================================================================
[2025-10-17T04:04:39.369Z] [LOG] 🔍 Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-17T04:04:39.369Z] [LOG]    Total components: 9
[2025-10-17T04:04:39.370Z] [LOG]    Applicable components: 9
[2025-10-17T04:04:39.371Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-17T04:04:40.283Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:04:40.283Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:04:40.591Z] [LOG] 📊 Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:40.908Z] [LOG] 📊 Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:41.206Z] [LOG] 📊 Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:41.206Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:04:41.207Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:04:41.208Z] [LOG] 💰 GROSS CALCULATION for Rasanga null:
[2025-10-17T04:04:41.209Z] [LOG]    Base Salary: 50000
[2025-10-17T04:04:41.209Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:04:41.481Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:04:41.785Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:04:41.786Z] [LOG]    Employee ID: 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:41.787Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:04:41.787Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T04:04:42.113Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:04:42.114Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T04:04:42.115Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T04:04:42.115Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T04:04:42.116Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:04:42.354Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:04:42.354Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-17T04:04:42.355Z] [LOG]       Saturday: 0.00h
[2025-10-17T04:04:42.356Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:04:42.356Z] [LOG]       Total Worked: 0.00h
[2025-10-17T04:04:42.357Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:04:42.358Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T04:04:42.358Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T04:04:42.359Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:04:42.360Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:04:42.361Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T04:04:42.361Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:04:42.362Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T04:04:42.363Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T04:04:42.363Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:04:42.364Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-17T04:04:42.365Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-17T04:04:42.367Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:04:42.368Z] [LOG]    Gross Salary: 50000
[2025-10-17T04:04:42.368Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:04:42.369Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:04:42.369Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:42.370Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:04:42.371Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:42.371Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:04:42.372Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:42.373Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:04:42.373Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:42.374Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:04:42.375Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:42.376Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:04:42.376Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:42.377Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:04:42.378Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:42.380Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:04:42.381Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:42.382Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:04:42.382Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:42.383Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:04:42.383Z] [LOG] Regular deductions for Rasanga null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:04:42.383Z] [LOG] Combined deductions for Rasanga null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-17T04:04:42.612Z] [LOG] Creating components for record ace863c5-d1fe-4096-b8d6-87c7b8b986fe: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:04:42.614Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-17T04:04:42.843Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:04:43.072Z] [LOG] Created payroll_record_component: ff9ed3f9-355b-4a67-8404-85d3c365d3ec for Attendance Deduction
[2025-10-17T04:04:43.536Z] [LOG] ✅ Financial balances updated successfully for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:43.537Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:04:43.539Z] [LOG] 
======================================================================
[2025-10-17T04:04:43.540Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Rasanga null
[2025-10-17T04:04:43.541Z] [LOG] ======================================================================
[2025-10-17T04:04:43.542Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T04:04:43.542Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-17T04:04:43.543Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-17T04:04:43.544Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:04:43.545Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:04:43.545Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:04:43.546Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T04:04:43.547Z] [LOG] ======================================================================

[2025-10-17T04:04:43.551Z] [LOG] ✅ Rasanga null: Calculation completed successfully
[2025-10-17T04:04:43.552Z] [LOG] 📊 Progress: 19/34 (55.9%)
[2025-10-17T04:04:43.553Z] [LOG] 
🧮 Processing: Chamodi null (EMP000032)
[2025-10-17T04:04:43.553Z] [LOG] 📋 Record ID: 261dbd4e-041c-45b0-b030-9056dbaffdbf
[2025-10-17T04:04:43.554Z] [LOG] 
======================================================================
[2025-10-17T04:04:43.554Z] [LOG] 🧮 CALCULATING PAYROLL: Chamodi null (EMP000032)
[2025-10-17T04:04:43.555Z] [LOG] ======================================================================
[2025-10-17T04:04:44.464Z] [LOG] 🔍 Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-17T04:04:44.466Z] [LOG]    Total components: 9
[2025-10-17T04:04:44.467Z] [LOG]    Applicable components: 9
[2025-10-17T04:04:44.467Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T04:04:50.599Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:04:50.600Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:04:50.830Z] [LOG] 📊 Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:51.055Z] [LOG] 📊 Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:51.281Z] [LOG] 📊 Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:51.281Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:04:51.281Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:04:51.282Z] [LOG] 💰 GROSS CALCULATION for Chamodi null:
[2025-10-17T04:04:51.282Z] [LOG]    Base Salary: 50000
[2025-10-17T04:04:51.282Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:04:51.509Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:04:51.735Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:04:51.735Z] [LOG]    Employee ID: 0143f302-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:51.736Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:04:51.736Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T04:04:51.963Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:04:51.963Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T04:04:51.964Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T04:04:51.964Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-17T04:04:51.964Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:04:52.189Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:04:52.190Z] [LOG]       Weekday (Mon-Fri): 150.11h
[2025-10-17T04:04:52.190Z] [LOG]       Saturday: 18.09h
[2025-10-17T04:04:52.190Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:04:52.190Z] [LOG]       Total Worked: 168.20h
[2025-10-17T04:04:52.191Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:04:52.191Z] [LOG]       Weekday: 150.11h × Rs.235.29 = Rs.35319.38
[2025-10-17T04:04:52.191Z] [LOG]       Saturday: 18.09h × Rs.444.44 = Rs.8039.92
[2025-10-17T04:04:52.191Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:04:52.191Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:04:52.192Z] [LOG]       Total Earned Salary: Rs.43359.30
[2025-10-17T04:04:52.192Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:04:52.192Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T04:04:52.192Z] [LOG]       Earned Salary: Rs.43359.30
[2025-10-17T04:04:52.192Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:04:52.193Z] [LOG]       Attendance Deduction: Rs.6640.70
[2025-10-17T04:04:52.193Z] [LOG]       📉 Deduction is 13.28% of base salary
[2025-10-17T04:04:52.193Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:04:52.193Z] [LOG]    Gross Salary: 50000
[2025-10-17T04:04:52.194Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:04:52.194Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:04:52.194Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:52.194Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:04:52.194Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:52.195Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:04:52.195Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:52.195Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:04:52.195Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:52.195Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:04:52.195Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:52.195Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:04:52.196Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:52.196Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:04:52.196Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:52.196Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:04:52.197Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:52.197Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:04:52.197Z] [LOG]    Fixed amount: 0
[2025-10-17T04:04:52.197Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:04:52.198Z] [LOG] Regular deductions for Chamodi null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:04:52.198Z] [LOG] Combined deductions for Chamodi null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 6640.698499999999,
      "details": "Based on worked hours (168.20000000000002h total)"
    }
  ],
  "total": 6640.698499999999
}
[2025-10-17T04:04:52.430Z] [LOG] Creating components for record 261dbd4e-041c-45b0-b030-9056dbaffdbf: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:04:52.431Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 6640.698499999999
}
[2025-10-17T04:04:52.659Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:04:52.885Z] [LOG] Created payroll_record_component: 78f277ed-358c-4ebf-9d83-350a9d8da13d for Attendance Deduction
[2025-10-17T04:04:53.340Z] [LOG] ✅ Financial balances updated successfully for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-17T04:04:53.340Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:04:53.340Z] [LOG] 
======================================================================
[2025-10-17T04:04:53.341Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chamodi null
[2025-10-17T04:04:53.341Z] [LOG] ======================================================================
[2025-10-17T04:04:53.341Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T04:04:53.341Z] [LOG]    Total Deductions: Rs.6640.70
[2025-10-17T04:04:53.341Z] [LOG]       - Attendance Deduction: Rs.6640.70
[2025-10-17T04:04:53.342Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:04:53.342Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:04:53.342Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:04:53.342Z] [LOG]    NET SALARY: Rs.43359.30
[2025-10-17T04:04:53.343Z] [LOG] ======================================================================

[2025-10-17T04:04:53.343Z] [LOG] ✅ Chamodi null: Calculation completed successfully
[2025-10-17T04:04:53.343Z] [LOG] 📊 Progress: 20/34 (58.8%)
[2025-10-17T04:04:53.343Z] [LOG] 
🧮 Processing: Shandeep null (EMP000034)
[2025-10-17T04:04:53.344Z] [LOG] 📋 Record ID: 59a135e0-cb63-4aec-9972-2a11b4f1b0b4
[2025-10-17T04:04:53.344Z] [LOG] 
======================================================================
[2025-10-17T04:04:53.344Z] [LOG] 🧮 CALCULATING PAYROLL: Shandeep null (EMP000034)
[2025-10-17T04:04:53.344Z] [LOG] ======================================================================
[2025-10-17T04:04:54.253Z] [LOG] 🔍 Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-17T04:04:54.254Z] [LOG]    Total components: 9
[2025-10-17T04:04:54.254Z] [LOG]    Applicable components: 9
[2025-10-17T04:04:54.255Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T04:05:00.681Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:05:00.684Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:05:00.919Z] [LOG] 📊 Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:01.147Z] [LOG] 📊 Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:01.383Z] [LOG] 📊 Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:01.384Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:05:01.385Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:05:01.385Z] [LOG] 💰 GROSS CALCULATION for Shandeep null:
[2025-10-17T04:05:01.386Z] [LOG]    Base Salary: 80000
[2025-10-17T04:05:01.386Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:05:01.625Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:05:01.855Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:05:01.856Z] [LOG]    Employee ID: 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:01.857Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:05:01.857Z] [LOG]    Base Salary: Rs.80000.00
[2025-10-17T04:05:02.090Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:05:02.091Z] [LOG]       Daily Salary: Rs.3200.00
[2025-10-17T04:05:02.092Z] [LOG]       Weekday Hourly Rate: Rs.376.47
[2025-10-17T04:05:02.092Z] [LOG]       Saturday Hourly Rate: Rs.711.11
[2025-10-17T04:05:02.093Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:05:02.323Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:05:02.323Z] [LOG]       Weekday (Mon-Fri): 139.35h
[2025-10-17T04:05:02.324Z] [LOG]       Saturday: 22.50h
[2025-10-17T04:05:02.324Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:05:02.325Z] [LOG]       Total Worked: 161.85h
[2025-10-17T04:05:02.325Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:05:02.325Z] [LOG]       Weekday: 139.35h × Rs.376.47 = Rs.52461.09
[2025-10-17T04:05:02.326Z] [LOG]       Saturday: 22.50h × Rs.711.11 = Rs.15999.98
[2025-10-17T04:05:02.326Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:05:02.327Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:05:02.327Z] [LOG]       Total Earned Salary: Rs.68461.07
[2025-10-17T04:05:02.327Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:05:02.328Z] [LOG]       Base Salary: Rs.80000.00
[2025-10-17T04:05:02.328Z] [LOG]       Earned Salary: Rs.68461.07
[2025-10-17T04:05:02.329Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:05:02.329Z] [LOG]       Attendance Deduction: Rs.11538.93
[2025-10-17T04:05:02.330Z] [LOG]       📉 Deduction is 14.42% of base salary
[2025-10-17T04:05:02.330Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:05:02.330Z] [LOG]    Gross Salary: 80000
[2025-10-17T04:05:02.331Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:05:02.331Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:05:02.332Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:02.332Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:05:02.332Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:02.333Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:05:02.333Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:02.334Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:05:02.334Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:02.334Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:05:02.335Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:02.335Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:05:02.335Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:02.336Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:05:02.336Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:02.336Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:05:02.337Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:02.337Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:05:02.337Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:02.338Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:05:02.338Z] [LOG] Regular deductions for Shandeep null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:05:02.339Z] [LOG] Combined deductions for Shandeep null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 11538.930500000002,
      "details": "Based on worked hours (161.85h total)"
    }
  ],
  "total": 11538.930500000002
}
[2025-10-17T04:05:02.576Z] [LOG] Creating components for record 59a135e0-cb63-4aec-9972-2a11b4f1b0b4: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:05:02.578Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 11538.930500000002
}
[2025-10-17T04:05:02.811Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:05:03.043Z] [LOG] Created payroll_record_component: 1d787cf8-2188-4084-8b1d-3fb58263dc38 for Attendance Deduction
[2025-10-17T04:05:03.499Z] [LOG] ✅ Financial balances updated successfully for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:03.500Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:05:03.500Z] [LOG] 
======================================================================
[2025-10-17T04:05:03.501Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Shandeep null
[2025-10-17T04:05:03.502Z] [LOG] ======================================================================
[2025-10-17T04:05:03.502Z] [LOG]    Gross Salary: Rs.80000.00
[2025-10-17T04:05:03.503Z] [LOG]    Total Deductions: Rs.11538.93
[2025-10-17T04:05:03.504Z] [LOG]       - Attendance Deduction: Rs.11538.93
[2025-10-17T04:05:03.504Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:05:03.505Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:05:03.505Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:05:03.506Z] [LOG]    NET SALARY: Rs.68461.07
[2025-10-17T04:05:03.507Z] [LOG] ======================================================================

[2025-10-17T04:05:03.508Z] [LOG] ✅ Shandeep null: Calculation completed successfully
[2025-10-17T04:05:03.509Z] [LOG] 📊 Progress: 21/34 (61.8%)
[2025-10-17T04:05:03.509Z] [LOG] 
🧮 Processing: Maryam null (EMP000035)
[2025-10-17T04:05:03.510Z] [LOG] 📋 Record ID: baf35d14-91e4-4b48-8797-fe7370184182
[2025-10-17T04:05:03.511Z] [LOG] 
======================================================================
[2025-10-17T04:05:03.511Z] [LOG] 🧮 CALCULATING PAYROLL: Maryam null (EMP000035)
[2025-10-17T04:05:03.512Z] [LOG] ======================================================================
[2025-10-17T04:05:04.426Z] [LOG] 🔍 Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-17T04:05:04.427Z] [LOG]    Total components: 9
[2025-10-17T04:05:04.428Z] [LOG]    Applicable components: 9
[2025-10-17T04:05:04.428Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-17T04:05:12.492Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:05:12.493Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:05:12.723Z] [LOG] 📊 Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:12.951Z] [LOG] 📊 Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:13.180Z] [LOG] 📊 Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:13.182Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:05:13.183Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:05:13.184Z] [LOG] 💰 GROSS CALCULATION for Maryam null:
[2025-10-17T04:05:13.185Z] [LOG]    Base Salary: 40000
[2025-10-17T04:05:13.185Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:05:13.412Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:05:13.641Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:05:13.642Z] [LOG]    Employee ID: 01440221-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:13.642Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:05:13.643Z] [LOG]    Base Salary: Rs.40000.00
[2025-10-17T04:05:13.872Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:05:13.873Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-17T04:05:13.874Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-17T04:05:13.874Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-17T04:05:13.875Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:05:14.106Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:05:14.107Z] [LOG]       Weekday (Mon-Fri): 148.07h
[2025-10-17T04:05:14.108Z] [LOG]       Saturday: 21.75h
[2025-10-17T04:05:14.108Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:05:14.109Z] [LOG]       Total Worked: 169.82h
[2025-10-17T04:05:14.109Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:05:14.110Z] [LOG]       Weekday: 148.07h × Rs.188.24 = Rs.27872.70
[2025-10-17T04:05:14.111Z] [LOG]       Saturday: 21.75h × Rs.355.56 = Rs.7733.43
[2025-10-17T04:05:14.111Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:05:14.112Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:05:14.113Z] [LOG]       Total Earned Salary: Rs.35606.13
[2025-10-17T04:05:14.114Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:05:14.115Z] [LOG]       Base Salary: Rs.40000.00
[2025-10-17T04:05:14.115Z] [LOG]       Earned Salary: Rs.35606.13
[2025-10-17T04:05:14.116Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:05:14.117Z] [LOG]       Attendance Deduction: Rs.4393.87
[2025-10-17T04:05:14.117Z] [LOG]       📉 Deduction is 10.98% of base salary
[2025-10-17T04:05:14.118Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:05:14.118Z] [LOG]    Gross Salary: 40000
[2025-10-17T04:05:14.119Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:05:14.120Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:05:14.120Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:14.121Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:05:14.122Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:14.122Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:05:14.123Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:14.124Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:05:14.124Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:14.125Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:05:14.126Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:14.127Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:05:14.127Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:14.128Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:05:14.128Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:14.129Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:05:14.129Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:14.130Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:05:14.131Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:14.131Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:05:14.132Z] [LOG] Regular deductions for Maryam null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:05:14.133Z] [LOG] Combined deductions for Maryam null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 4393.873200000002,
      "details": "Based on worked hours (169.82h total)"
    }
  ],
  "total": 4393.873200000002
}
[2025-10-17T04:05:14.365Z] [LOG] Creating components for record baf35d14-91e4-4b48-8797-fe7370184182: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:05:14.366Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 4393.873200000002
}
[2025-10-17T04:05:14.599Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:05:14.837Z] [LOG] Created payroll_record_component: 855851fd-7b3b-4e35-9e58-7944b3080b5d for Attendance Deduction
[2025-10-17T04:05:15.293Z] [LOG] ✅ Financial balances updated successfully for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:15.293Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:05:15.294Z] [LOG] 
======================================================================
[2025-10-17T04:05:15.294Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Maryam null
[2025-10-17T04:05:15.295Z] [LOG] ======================================================================
[2025-10-17T04:05:15.296Z] [LOG]    Gross Salary: Rs.40000.00
[2025-10-17T04:05:15.296Z] [LOG]    Total Deductions: Rs.4393.87
[2025-10-17T04:05:15.297Z] [LOG]       - Attendance Deduction: Rs.4393.87
[2025-10-17T04:05:15.297Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:05:15.298Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:05:15.299Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:05:15.300Z] [LOG]    NET SALARY: Rs.35606.13
[2025-10-17T04:05:15.300Z] [LOG] ======================================================================

[2025-10-17T04:05:15.301Z] [LOG] ✅ Maryam null: Calculation completed successfully
[2025-10-17T04:05:15.302Z] [LOG] 📊 Progress: 22/34 (64.7%)
[2025-10-17T04:05:15.302Z] [LOG] 
🧮 Processing: customer null (EMP000036)
[2025-10-17T04:05:15.303Z] [LOG] 📋 Record ID: 0f5f1390-de26-4c0a-9d5e-947e886b8ec0
[2025-10-17T04:05:15.304Z] [LOG] 
======================================================================
[2025-10-17T04:05:15.305Z] [LOG] 🧮 CALCULATING PAYROLL: customer null (EMP000036)
[2025-10-17T04:05:15.305Z] [LOG] ======================================================================
[2025-10-17T04:05:16.219Z] [LOG] 🔍 Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-17T04:05:16.219Z] [LOG]    Total components: 9
[2025-10-17T04:05:16.220Z] [LOG]    Applicable components: 9
[2025-10-17T04:05:16.220Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T04:05:17.133Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:05:17.133Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:05:17.361Z] [LOG] 📊 Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:17.588Z] [LOG] 📊 Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:17.817Z] [LOG] 📊 Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:17.818Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:05:17.819Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:05:17.820Z] [LOG] 💰 GROSS CALCULATION for customer null:
[2025-10-17T04:05:17.820Z] [LOG]    Base Salary: 0
[2025-10-17T04:05:17.821Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:05:18.051Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:05:18.278Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:05:18.279Z] [LOG]    Employee ID: 014409a2-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:18.280Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:05:18.280Z] [LOG]    Base Salary: Rs.0.00
[2025-10-17T04:05:18.509Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:05:18.510Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-17T04:05:18.510Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-17T04:05:18.510Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-17T04:05:18.510Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:05:18.738Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:05:18.739Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-17T04:05:18.740Z] [LOG]       Saturday: 0.00h
[2025-10-17T04:05:18.740Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:05:18.741Z] [LOG]       Total Worked: 0.00h
[2025-10-17T04:05:18.741Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:05:18.742Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:05:18.743Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:05:18.743Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:05:18.744Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:05:18.745Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T04:05:18.746Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:05:18.747Z] [LOG]       Base Salary: Rs.0.00
[2025-10-17T04:05:18.747Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T04:05:18.748Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:05:18.748Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-17T04:05:18.749Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-17T04:05:18.751Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:05:18.751Z] [LOG]    Gross Salary: 0
[2025-10-17T04:05:18.752Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:05:18.753Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:05:18.753Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:18.754Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:05:18.755Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:18.755Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:05:18.756Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:18.757Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:05:18.757Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:18.758Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:05:18.759Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:18.759Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:05:18.760Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:18.761Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:05:18.761Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:18.762Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:05:18.762Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:18.762Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:05:18.763Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:18.763Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:05:18.763Z] [LOG] Regular deductions for customer null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:05:18.764Z] [LOG] Combined deductions for customer null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 0
}
[2025-10-17T04:05:18.999Z] [LOG] Creating components for record 0f5f1390-de26-4c0a-9d5e-947e886b8ec0: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:05:19.002Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-17T04:05:19.233Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:05:19.465Z] [LOG] Created payroll_record_component: 88b4e96d-f1af-4305-8829-532710372521 for Attendance Deduction
[2025-10-17T04:05:19.922Z] [LOG] ✅ Financial balances updated successfully for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:19.923Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:05:19.923Z] [LOG] 
======================================================================
[2025-10-17T04:05:19.924Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: customer null
[2025-10-17T04:05:19.925Z] [LOG] ======================================================================
[2025-10-17T04:05:19.925Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-17T04:05:19.926Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-17T04:05:19.926Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-17T04:05:19.927Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:05:19.928Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:05:19.928Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:05:19.929Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T04:05:19.930Z] [LOG] ======================================================================

[2025-10-17T04:05:19.931Z] [LOG] ✅ customer null: Calculation completed successfully
[2025-10-17T04:05:19.932Z] [LOG] 📊 Progress: 23/34 (67.6%)
[2025-10-17T04:05:19.933Z] [LOG] 
🧮 Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-17T04:05:19.933Z] [LOG] 📋 Record ID: a9b368b3-95f1-4d99-8bee-e72c634dc14f
[2025-10-17T04:05:19.935Z] [LOG] 
======================================================================
[2025-10-17T04:05:19.935Z] [LOG] 🧮 CALCULATING PAYROLL: Viruna Damsiha Cooray null (EMP000038)
[2025-10-17T04:05:19.936Z] [LOG] ======================================================================
[2025-10-17T04:05:20.851Z] [LOG] 🔍 Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-17T04:05:20.852Z] [LOG]    Total components: 9
[2025-10-17T04:05:20.852Z] [LOG]    Applicable components: 9
[2025-10-17T04:05:20.853Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T04:05:30.923Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:05:30.924Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:05:31.152Z] [LOG] 📊 Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:31.383Z] [LOG] 📊 Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:31.613Z] [LOG] 📊 Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:31.613Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:05:31.614Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:05:31.615Z] [LOG] 💰 GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-17T04:05:31.616Z] [LOG]    Base Salary: 50000
[2025-10-17T04:05:31.616Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:05:31.845Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:05:32.072Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:05:32.073Z] [LOG]    Employee ID: 01441633-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:32.074Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:05:32.074Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T04:05:32.302Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:05:32.303Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T04:05:32.304Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T04:05:32.305Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-17T04:05:32.305Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:05:32.534Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:05:32.535Z] [LOG]       Weekday (Mon-Fri): 165.42h
[2025-10-17T04:05:32.535Z] [LOG]       Saturday: 21.57h
[2025-10-17T04:05:32.536Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:05:32.536Z] [LOG]       Total Worked: 186.99h
[2025-10-17T04:05:32.537Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:05:32.538Z] [LOG]       Weekday: 165.42h × Rs.235.29 = Rs.38921.67
[2025-10-17T04:05:32.539Z] [LOG]       Saturday: 21.57h × Rs.444.44 = Rs.9586.57
[2025-10-17T04:05:32.539Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:05:32.540Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:05:32.540Z] [LOG]       Total Earned Salary: Rs.48508.24
[2025-10-17T04:05:32.541Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:05:32.542Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T04:05:32.543Z] [LOG]       Earned Salary: Rs.48508.24
[2025-10-17T04:05:32.544Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:05:32.544Z] [LOG]       Attendance Deduction: Rs.1491.76
[2025-10-17T04:05:32.545Z] [LOG]       📉 Deduction is 2.98% of base salary
[2025-10-17T04:05:32.545Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:05:32.546Z] [LOG]    Gross Salary: 50000
[2025-10-17T04:05:32.547Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:05:32.547Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:05:32.548Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:32.549Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:05:32.549Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:32.550Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:05:32.550Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:32.551Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:05:32.552Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:32.553Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:05:32.553Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:32.554Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:05:32.554Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:32.555Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:05:32.556Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:32.556Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:05:32.557Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:32.557Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:05:32.558Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:32.559Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:05:32.559Z] [LOG] Regular deductions for Viruna Damsiha Cooray null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:05:32.560Z] [LOG] Combined deductions for Viruna Damsiha Cooray null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1491.7574000000022,
      "details": "Based on worked hours (186.98999999999998h total)"
    }
  ],
  "total": 1491.7574000000022
}
[2025-10-17T04:05:32.791Z] [LOG] Creating components for record a9b368b3-95f1-4d99-8bee-e72c634dc14f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:05:32.793Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1491.7574000000022
}
[2025-10-17T04:05:33.022Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:05:33.251Z] [LOG] Created payroll_record_component: 530658db-6bee-4698-9ed1-27780c3f2bde for Attendance Deduction
[2025-10-17T04:05:33.706Z] [LOG] ✅ Financial balances updated successfully for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:33.707Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:05:33.708Z] [LOG] 
======================================================================
[2025-10-17T04:05:33.709Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Viruna Damsiha Cooray null
[2025-10-17T04:05:33.710Z] [LOG] ======================================================================
[2025-10-17T04:05:33.711Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T04:05:33.711Z] [LOG]    Total Deductions: Rs.1491.76
[2025-10-17T04:05:33.712Z] [LOG]       - Attendance Deduction: Rs.1491.76
[2025-10-17T04:05:33.713Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:05:33.714Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:05:33.715Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:05:33.715Z] [LOG]    NET SALARY: Rs.48508.24
[2025-10-17T04:05:33.716Z] [LOG] ======================================================================

[2025-10-17T04:05:33.717Z] [LOG] ✅ Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-17T04:05:33.717Z] [LOG] 📊 Progress: 24/34 (70.6%)
[2025-10-17T04:05:33.718Z] [LOG] 
🧮 Processing: Sithira null (EMP000039)
[2025-10-17T04:05:33.719Z] [LOG] 📋 Record ID: 90d944c6-3618-4448-bc45-9ddb0d272a21
[2025-10-17T04:05:33.719Z] [LOG] 
======================================================================
[2025-10-17T04:05:33.720Z] [LOG] 🧮 CALCULATING PAYROLL: Sithira null (EMP000039)
[2025-10-17T04:05:33.721Z] [LOG] ======================================================================
[2025-10-17T04:05:34.626Z] [LOG] 🔍 Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-17T04:05:34.627Z] [LOG]    Total components: 9
[2025-10-17T04:05:34.627Z] [LOG]    Applicable components: 9
[2025-10-17T04:05:34.628Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-17T04:05:40.128Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:05:40.128Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:05:40.359Z] [LOG] 📊 Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:40.590Z] [LOG] 📊 Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:40.820Z] [LOG] 📊 Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:40.821Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:05:40.821Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:05:40.822Z] [LOG] 💰 GROSS CALCULATION for Sithira null:
[2025-10-17T04:05:40.823Z] [LOG]    Base Salary: 40000
[2025-10-17T04:05:40.823Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:05:41.051Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:05:41.276Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:05:41.277Z] [LOG]    Employee ID: 01441e19-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:41.278Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:05:41.279Z] [LOG]    Base Salary: Rs.40000.00
[2025-10-17T04:05:41.509Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:05:41.510Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-17T04:05:41.511Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-17T04:05:41.511Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-17T04:05:41.512Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:05:41.739Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:05:41.740Z] [LOG]       Weekday (Mon-Fri): 153.71h
[2025-10-17T04:05:41.741Z] [LOG]       Saturday: 8.53h
[2025-10-17T04:05:41.741Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:05:41.742Z] [LOG]       Total Worked: 162.24h
[2025-10-17T04:05:41.743Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:05:41.743Z] [LOG]       Weekday: 153.71h × Rs.188.24 = Rs.28934.37
[2025-10-17T04:05:41.744Z] [LOG]       Saturday: 8.53h × Rs.355.56 = Rs.3032.93
[2025-10-17T04:05:41.745Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:05:41.745Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:05:41.746Z] [LOG]       Total Earned Salary: Rs.31967.30
[2025-10-17T04:05:41.747Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:05:41.748Z] [LOG]       Base Salary: Rs.40000.00
[2025-10-17T04:05:41.748Z] [LOG]       Earned Salary: Rs.31967.30
[2025-10-17T04:05:41.749Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:05:41.750Z] [LOG]       Attendance Deduction: Rs.8032.70
[2025-10-17T04:05:41.750Z] [LOG]       📉 Deduction is 20.08% of base salary
[2025-10-17T04:05:41.752Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:05:41.753Z] [LOG]    Gross Salary: 40000
[2025-10-17T04:05:41.754Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:05:41.754Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:05:41.755Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:41.756Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:05:41.756Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:41.757Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:05:41.758Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:41.759Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:05:41.759Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:41.760Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:05:41.760Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:41.760Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:05:41.761Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:41.761Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:05:41.762Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:41.762Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:05:41.762Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:41.763Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:05:41.763Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:41.763Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:05:41.764Z] [LOG] Regular deductions for Sithira null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:05:41.764Z] [LOG] Combined deductions for Sithira null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 8032.7027999999955,
      "details": "Based on worked hours (162.24h total)"
    }
  ],
  "total": 8032.7027999999955
}
[2025-10-17T04:05:41.996Z] [LOG] Creating components for record 90d944c6-3618-4448-bc45-9ddb0d272a21: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:05:41.997Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 8032.7027999999955
}
[2025-10-17T04:05:42.224Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:05:42.458Z] [LOG] Created payroll_record_component: 01c0c265-966a-49c4-b5bc-c5165437dc54 for Attendance Deduction
[2025-10-17T04:05:42.910Z] [LOG] ✅ Financial balances updated successfully for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:42.911Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:05:42.911Z] [LOG] 
======================================================================
[2025-10-17T04:05:42.912Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sithira null
[2025-10-17T04:05:42.913Z] [LOG] ======================================================================
[2025-10-17T04:05:42.913Z] [LOG]    Gross Salary: Rs.40000.00
[2025-10-17T04:05:42.914Z] [LOG]    Total Deductions: Rs.8032.70
[2025-10-17T04:05:42.915Z] [LOG]       - Attendance Deduction: Rs.8032.70
[2025-10-17T04:05:42.915Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:05:42.916Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:05:42.916Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:05:42.917Z] [LOG]    NET SALARY: Rs.31967.30
[2025-10-17T04:05:42.918Z] [LOG] ======================================================================

[2025-10-17T04:05:42.919Z] [LOG] ✅ Sithira null: Calculation completed successfully
[2025-10-17T04:05:42.920Z] [LOG] 📊 Progress: 25/34 (73.5%)
[2025-10-17T04:05:42.920Z] [LOG] 
🧮 Processing: Chemil null (EMP000040)
[2025-10-17T04:05:42.921Z] [LOG] 📋 Record ID: 674b376a-e44d-421e-8c84-e6820ce994d2
[2025-10-17T04:05:42.922Z] [LOG] 
======================================================================
[2025-10-17T04:05:42.923Z] [LOG] 🧮 CALCULATING PAYROLL: Chemil null (EMP000040)
[2025-10-17T04:05:42.923Z] [LOG] ======================================================================
[2025-10-17T04:05:43.847Z] [LOG] 🔍 Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-17T04:05:43.848Z] [LOG]    Total components: 9
[2025-10-17T04:05:43.848Z] [LOG]    Applicable components: 9
[2025-10-17T04:05:43.849Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T04:05:49.003Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:05:49.004Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:05:49.236Z] [LOG] 📊 Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:49.464Z] [LOG] 📊 Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:49.696Z] [LOG] 📊 Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:49.696Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:05:49.697Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:05:49.698Z] [LOG] 💰 GROSS CALCULATION for Chemil null:
[2025-10-17T04:05:49.699Z] [LOG]    Base Salary: 250000
[2025-10-17T04:05:49.699Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:05:49.937Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:05:50.164Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:05:50.165Z] [LOG]    Employee ID: 01442599-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:50.166Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:05:50.166Z] [LOG]    Base Salary: Rs.250000.00
[2025-10-17T04:05:50.395Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:05:50.396Z] [LOG]       Daily Salary: Rs.10000.00
[2025-10-17T04:05:50.397Z] [LOG]       Weekday Hourly Rate: Rs.1176.47
[2025-10-17T04:05:50.397Z] [LOG]       Saturday Hourly Rate: Rs.2222.22
[2025-10-17T04:05:50.398Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:05:50.635Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:05:50.636Z] [LOG]       Weekday (Mon-Fri): 148.35h
[2025-10-17T04:05:50.637Z] [LOG]       Saturday: 9.00h
[2025-10-17T04:05:50.637Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:05:50.638Z] [LOG]       Total Worked: 157.35h
[2025-10-17T04:05:50.638Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:05:50.639Z] [LOG]       Weekday: 148.35h × Rs.1176.47 = Rs.174529.32
[2025-10-17T04:05:50.640Z] [LOG]       Saturday: 9.00h × Rs.2222.22 = Rs.19999.98
[2025-10-17T04:05:50.640Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:05:50.641Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:05:50.642Z] [LOG]       Total Earned Salary: Rs.194529.30
[2025-10-17T04:05:50.642Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:05:50.644Z] [LOG]       Base Salary: Rs.250000.00
[2025-10-17T04:05:50.644Z] [LOG]       Earned Salary: Rs.194529.30
[2025-10-17T04:05:50.645Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:05:50.646Z] [LOG]       Attendance Deduction: Rs.55470.70
[2025-10-17T04:05:50.646Z] [LOG]       📉 Deduction is 22.19% of base salary
[2025-10-17T04:05:50.647Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:05:50.647Z] [LOG]    Gross Salary: 250000
[2025-10-17T04:05:50.648Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:05:50.649Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:05:50.649Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:50.650Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:05:50.651Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:50.651Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:05:50.652Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:50.652Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:05:50.653Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:50.654Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:05:50.654Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:50.655Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:05:50.655Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:50.656Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:05:50.657Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:50.657Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:05:50.658Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:50.658Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:05:50.659Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:50.659Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:05:50.659Z] [LOG] Regular deductions for Chemil null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:05:50.660Z] [LOG] Combined deductions for Chemil null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 55470.6955,
      "details": "Based on worked hours (157.35h total)"
    }
  ],
  "total": 55470.6955
}
[2025-10-17T04:05:50.893Z] [LOG] Creating components for record 674b376a-e44d-421e-8c84-e6820ce994d2: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 1
}
[2025-10-17T04:05:50.894Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 55470.6955
}
[2025-10-17T04:05:51.123Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:05:51.354Z] [LOG] Created payroll_record_component: 75616f85-b592-46ad-9bcb-f6c1a51642db for Attendance Deduction
[2025-10-17T04:05:51.354Z] [LOG] Processing component: {
  "name": "Income Tax",
  "type": "tax",
  "amount": 12000
}
[2025-10-17T04:05:51.585Z] [LOG] Using existing component ID: 72f98b53-4bd5-4713-98d0-e3a641ad8d0f
[2025-10-17T04:05:51.815Z] [LOG] Created payroll_record_component: ecf6d539-db42-425a-af0e-ba7bbcd7a621 for Income Tax
[2025-10-17T04:05:52.271Z] [LOG] ✅ Financial balances updated successfully for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:52.271Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:05:52.272Z] [LOG] 
======================================================================
[2025-10-17T04:05:52.273Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chemil null
[2025-10-17T04:05:52.273Z] [LOG] ======================================================================
[2025-10-17T04:05:52.274Z] [LOG]    Gross Salary: Rs.250000.00
[2025-10-17T04:05:52.274Z] [LOG]    Total Deductions: Rs.55470.70
[2025-10-17T04:05:52.275Z] [LOG]       - Attendance Deduction: Rs.55470.70
[2025-10-17T04:05:52.276Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:05:52.276Z] [LOG]    Total Taxes: Rs.12000.00
[2025-10-17T04:05:52.277Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:05:52.278Z] [LOG]    NET SALARY: Rs.182529.30
[2025-10-17T04:05:52.279Z] [LOG] ======================================================================

[2025-10-17T04:05:52.280Z] [LOG] ✅ Chemil null: Calculation completed successfully
[2025-10-17T04:05:52.280Z] [LOG] 📊 Progress: 26/34 (76.5%)
[2025-10-17T04:05:52.281Z] [LOG] 
🧮 Processing: Office Team null (EMP000041)
[2025-10-17T04:05:52.281Z] [LOG] 📋 Record ID: 7b735c71-d253-4c0e-af2e-b0d58735ec88
[2025-10-17T04:05:52.282Z] [LOG] 
======================================================================
[2025-10-17T04:05:52.283Z] [LOG] 🧮 CALCULATING PAYROLL: Office Team null (EMP000041)
[2025-10-17T04:05:52.284Z] [LOG] ======================================================================
[2025-10-17T04:05:53.235Z] [LOG] 🔍 Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-17T04:05:53.236Z] [LOG]    Total components: 9
[2025-10-17T04:05:53.237Z] [LOG]    Applicable components: 9
[2025-10-17T04:05:53.237Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T04:05:54.263Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:05:54.264Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:05:54.496Z] [LOG] 📊 Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:54.730Z] [LOG] 📊 Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:54.960Z] [LOG] 📊 Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:54.961Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:05:54.962Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:05:54.962Z] [LOG] 💰 GROSS CALCULATION for Office Team null:
[2025-10-17T04:05:54.963Z] [LOG]    Base Salary: 1
[2025-10-17T04:05:54.964Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:05:55.195Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:05:55.441Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:05:55.442Z] [LOG]    Employee ID: 01442b21-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:55.442Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:05:55.443Z] [LOG]    Base Salary: Rs.1.00
[2025-10-17T04:05:55.669Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:05:55.670Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-17T04:05:55.671Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-17T04:05:55.671Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-17T04:05:55.672Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:05:56.111Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:05:56.112Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-17T04:05:56.112Z] [LOG]       Saturday: 0.00h
[2025-10-17T04:05:56.113Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:05:56.113Z] [LOG]       Total Worked: 0.00h
[2025-10-17T04:05:56.114Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:05:56.115Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:05:56.115Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:05:56.116Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:05:56.117Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:05:56.117Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T04:05:56.118Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:05:56.119Z] [LOG]       Base Salary: Rs.1.00
[2025-10-17T04:05:56.120Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T04:05:56.120Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:05:56.121Z] [LOG]       Attendance Deduction: Rs.1.00
[2025-10-17T04:05:56.122Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-17T04:05:56.122Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:05:56.123Z] [LOG]    Gross Salary: 1
[2025-10-17T04:05:56.124Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:05:56.124Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:05:56.125Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:56.126Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:05:56.126Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:56.127Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:05:56.127Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:56.128Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:05:56.129Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:56.129Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:05:56.130Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:56.130Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:05:56.131Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:56.132Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:05:56.132Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:56.133Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:05:56.134Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:56.134Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:05:56.135Z] [LOG]    Fixed amount: 0
[2025-10-17T04:05:56.136Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:05:56.136Z] [LOG] Regular deductions for Office Team null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:05:56.137Z] [LOG] Combined deductions for Office Team null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 1
}
[2025-10-17T04:05:56.373Z] [LOG] Creating components for record 7b735c71-d253-4c0e-af2e-b0d58735ec88: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:05:56.375Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1
}
[2025-10-17T04:05:56.603Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:05:56.831Z] [LOG] Created payroll_record_component: 95fd1d04-1bf6-440a-a459-d19af8966f05 for Attendance Deduction
[2025-10-17T04:05:57.294Z] [LOG] ✅ Financial balances updated successfully for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-17T04:05:57.295Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:05:57.295Z] [LOG] 
======================================================================
[2025-10-17T04:05:57.296Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Office Team null
[2025-10-17T04:05:57.297Z] [LOG] ======================================================================
[2025-10-17T04:05:57.297Z] [LOG]    Gross Salary: Rs.1.00
[2025-10-17T04:05:57.298Z] [LOG]    Total Deductions: Rs.1.00
[2025-10-17T04:05:57.299Z] [LOG]       - Attendance Deduction: Rs.1.00
[2025-10-17T04:05:57.299Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:05:57.300Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:05:57.300Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:05:57.301Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T04:05:57.302Z] [LOG] ======================================================================

[2025-10-17T04:05:57.303Z] [LOG] ✅ Office Team null: Calculation completed successfully
[2025-10-17T04:05:57.304Z] [LOG] 📊 Progress: 27/34 (79.4%)
[2025-10-17T04:05:57.304Z] [LOG] 
🧮 Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-17T04:05:57.305Z] [LOG] 📋 Record ID: fde763c2-b768-4ab3-a436-6ea34cbdf4ab
[2025-10-17T04:05:57.306Z] [LOG] 
======================================================================
[2025-10-17T04:05:57.307Z] [LOG] 🧮 CALCULATING PAYROLL: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-17T04:05:57.307Z] [LOG] ======================================================================
[2025-10-17T04:05:58.534Z] [LOG] 🔍 Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-17T04:05:58.535Z] [LOG]    Total components: 9
[2025-10-17T04:05:58.536Z] [LOG]    Applicable components: 9
[2025-10-17T04:05:58.536Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-17T04:05:59.494Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:05:59.495Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:05:59.955Z] [LOG] 📊 Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:00.362Z] [LOG] 📊 Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:00.743Z] [LOG] 📊 Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:00.744Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:06:00.745Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:06:00.746Z] [LOG] 💰 GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-17T04:06:00.746Z] [LOG]    Base Salary: 50000
[2025-10-17T04:06:00.747Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:06:00.994Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:06:01.425Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:06:01.426Z] [LOG]    Employee ID: 0144315c-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:01.426Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:06:01.427Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T04:06:01.701Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:06:01.702Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T04:06:01.703Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T04:06:01.703Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T04:06:01.704Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:06:02.115Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:06:02.116Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-17T04:06:02.116Z] [LOG]       Saturday: 0.00h
[2025-10-17T04:06:02.117Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:06:02.118Z] [LOG]       Total Worked: 0.00h
[2025-10-17T04:06:02.118Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:06:02.119Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T04:06:02.119Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T04:06:02.120Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:06:02.121Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:06:02.121Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T04:06:02.122Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:06:02.123Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T04:06:02.124Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T04:06:02.125Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:06:02.126Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-17T04:06:02.126Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-17T04:06:02.127Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:06:02.128Z] [LOG]    Gross Salary: 50000
[2025-10-17T04:06:02.128Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:06:02.129Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:06:02.130Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:02.130Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:06:02.131Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:02.131Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:06:02.132Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:02.133Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:06:02.134Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:02.134Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:06:02.135Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:02.135Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:06:02.136Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:02.137Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:06:02.137Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:02.138Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:06:02.139Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:02.139Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:06:02.140Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:02.140Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:06:02.141Z] [LOG] Regular deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:06:02.142Z] [LOG] Combined deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-17T04:06:02.374Z] [LOG] Creating components for record fde763c2-b768-4ab3-a436-6ea34cbdf4ab: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:06:02.376Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-17T04:06:02.606Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:06:03.074Z] [LOG] Created payroll_record_component: 9219b965-720b-47a4-8219-1b288235ec2c for Attendance Deduction
[2025-10-17T04:06:03.654Z] [LOG] ✅ Financial balances updated successfully for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:03.655Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:06:03.656Z] [LOG] 
======================================================================
[2025-10-17T04:06:03.656Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: G.M Supathala Sadaru Madhushan null
[2025-10-17T04:06:03.657Z] [LOG] ======================================================================
[2025-10-17T04:06:03.657Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T04:06:03.658Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-17T04:06:03.659Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-17T04:06:03.659Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:06:03.660Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:06:03.660Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:06:03.661Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T04:06:03.662Z] [LOG] ======================================================================

[2025-10-17T04:06:03.663Z] [LOG] ✅ G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-17T04:06:03.664Z] [LOG] 📊 Progress: 28/34 (82.4%)
[2025-10-17T04:06:03.664Z] [LOG] 
🧮 Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-17T04:06:03.665Z] [LOG] 📋 Record ID: b480a89c-4f5c-4b87-8b28-5a05b2e46edd
[2025-10-17T04:06:03.666Z] [LOG] 
======================================================================
[2025-10-17T04:06:03.667Z] [LOG] 🧮 CALCULATING PAYROLL: P.D.P Dilini Madushani null (EMP000043)
[2025-10-17T04:06:03.667Z] [LOG] ======================================================================
[2025-10-17T04:06:05.184Z] [LOG] 🔍 Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-17T04:06:05.185Z] [LOG]    Total components: 9
[2025-10-17T04:06:05.186Z] [LOG]    Applicable components: 9
[2025-10-17T04:06:05.186Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T04:06:06.200Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:06:06.201Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:06:06.453Z] [LOG] 📊 Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:06.683Z] [LOG] 📊 Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:06.920Z] [LOG] 📊 Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:06.921Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:06:06.922Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:06:06.923Z] [LOG] 💰 GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-17T04:06:06.923Z] [LOG]    Base Salary: 50000
[2025-10-17T04:06:06.924Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:06:07.157Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:06:07.401Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:06:07.402Z] [LOG]    Employee ID: 014435dc-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:07.402Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:06:07.403Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T04:06:07.642Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:06:07.643Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T04:06:07.643Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T04:06:07.644Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T04:06:07.644Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:06:07.876Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:06:07.877Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-17T04:06:07.877Z] [LOG]       Saturday: 0.00h
[2025-10-17T04:06:07.878Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:06:07.878Z] [LOG]       Total Worked: 0.00h
[2025-10-17T04:06:07.879Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:06:07.880Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T04:06:07.880Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T04:06:07.881Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:06:07.881Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:06:07.882Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T04:06:07.883Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:06:07.885Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T04:06:07.886Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T04:06:07.886Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:06:07.887Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-17T04:06:07.887Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-17T04:06:07.888Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:06:07.889Z] [LOG]    Gross Salary: 50000
[2025-10-17T04:06:07.890Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:06:07.890Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:06:07.891Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:07.892Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:06:07.892Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:07.893Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:06:07.894Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:07.895Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:06:07.895Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:07.896Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:06:07.896Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:07.897Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:06:07.898Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:07.898Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:06:07.899Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:07.900Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:06:07.901Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:07.901Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:06:07.902Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:07.902Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:06:07.903Z] [LOG] Regular deductions for P.D.P Dilini Madushani null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:06:07.904Z] [LOG] Combined deductions for P.D.P Dilini Madushani null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-17T04:06:08.179Z] [LOG] Creating components for record b480a89c-4f5c-4b87-8b28-5a05b2e46edd: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:06:08.180Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-17T04:06:08.412Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:06:08.645Z] [LOG] Created payroll_record_component: 0bb0502a-ab32-4963-b45a-a8bbd6f087c1 for Attendance Deduction
[2025-10-17T04:06:09.108Z] [LOG] ✅ Financial balances updated successfully for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:09.109Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:06:09.109Z] [LOG] 
======================================================================
[2025-10-17T04:06:09.110Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: P.D.P Dilini Madushani null
[2025-10-17T04:06:09.111Z] [LOG] ======================================================================
[2025-10-17T04:06:09.111Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T04:06:09.112Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-17T04:06:09.119Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-17T04:06:09.119Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:06:09.120Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:06:09.121Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:06:09.121Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T04:06:09.123Z] [LOG] ======================================================================

[2025-10-17T04:06:09.128Z] [LOG] ✅ P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-17T04:06:09.129Z] [LOG] 📊 Progress: 29/34 (85.3%)
[2025-10-17T04:06:09.130Z] [LOG] 
🧮 Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-17T04:06:09.131Z] [LOG] 📋 Record ID: 0f86de3f-eaf2-46d8-a820-6bb036f8dbab
[2025-10-17T04:06:09.131Z] [LOG] 
======================================================================
[2025-10-17T04:06:09.132Z] [LOG] 🧮 CALCULATING PAYROLL: R. D.A Kaushalya null (EMP000044)
[2025-10-17T04:06:09.133Z] [LOG] ======================================================================
[2025-10-17T04:06:10.427Z] [LOG] 🔍 Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-17T04:06:10.427Z] [LOG]    Total components: 9
[2025-10-17T04:06:10.428Z] [LOG]    Applicable components: 9
[2025-10-17T04:06:10.429Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T04:06:18.425Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:06:18.425Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:06:18.654Z] [LOG] 📊 Found 0 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:18.882Z] [LOG] 📊 Found 0 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:19.110Z] [LOG] 📊 Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:19.110Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:06:19.110Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:06:19.111Z] [LOG] 💰 GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-17T04:06:19.111Z] [LOG]    Base Salary: 50000
[2025-10-17T04:06:19.111Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:06:19.337Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:06:19.566Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:06:19.567Z] [LOG]    Employee ID: 01443963-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:19.567Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:06:19.567Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T04:06:19.796Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:06:19.796Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T04:06:19.796Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T04:06:19.796Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-17T04:06:19.797Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:06:20.029Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:06:20.029Z] [LOG]       Weekday (Mon-Fri): 162.20h
[2025-10-17T04:06:20.029Z] [LOG]       Saturday: 22.50h
[2025-10-17T04:06:20.030Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:06:20.030Z] [LOG]       Total Worked: 184.70h
[2025-10-17T04:06:20.030Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:06:20.030Z] [LOG]       Weekday: 162.20h × Rs.235.29 = Rs.38164.04
[2025-10-17T04:06:20.030Z] [LOG]       Saturday: 22.50h × Rs.444.44 = Rs.9999.90
[2025-10-17T04:06:20.031Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:06:20.031Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:06:20.031Z] [LOG]       Total Earned Salary: Rs.48163.94
[2025-10-17T04:06:20.031Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:06:20.032Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T04:06:20.032Z] [LOG]       Earned Salary: Rs.48163.94
[2025-10-17T04:06:20.032Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:06:20.032Z] [LOG]       Attendance Deduction: Rs.1836.06
[2025-10-17T04:06:20.032Z] [LOG]       📉 Deduction is 3.67% of base salary
[2025-10-17T04:06:20.033Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:06:20.033Z] [LOG]    Gross Salary: 50000
[2025-10-17T04:06:20.033Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:06:20.033Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:06:20.033Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:20.033Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:06:20.034Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:20.034Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:06:20.034Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:20.034Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:06:20.034Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:20.035Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:06:20.035Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:20.035Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:06:20.035Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:20.035Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:06:20.036Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:20.036Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:06:20.036Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:20.036Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:06:20.037Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:20.037Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:06:20.037Z] [LOG] Regular deductions for R. D.A Kaushalya null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:06:20.037Z] [LOG] Combined deductions for R. D.A Kaushalya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1836.0620000000054,
      "details": "Based on worked hours (184.7h total)"
    }
  ],
  "total": 1836.0620000000054
}
[2025-10-17T04:06:20.267Z] [LOG] Creating components for record 0f86de3f-eaf2-46d8-a820-6bb036f8dbab: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:06:20.268Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1836.0620000000054
}
[2025-10-17T04:06:20.495Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:06:20.817Z] [LOG] Created payroll_record_component: 9a82c5d5-ee1f-4bf3-affd-277b80d0cf55 for Attendance Deduction
[2025-10-17T04:06:21.369Z] [LOG] ✅ Financial balances updated successfully for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:21.369Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:06:21.369Z] [LOG] 
======================================================================
[2025-10-17T04:06:21.369Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: R. D.A Kaushalya null
[2025-10-17T04:06:21.370Z] [LOG] ======================================================================
[2025-10-17T04:06:21.370Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T04:06:21.370Z] [LOG]    Total Deductions: Rs.1836.06
[2025-10-17T04:06:21.370Z] [LOG]       - Attendance Deduction: Rs.1836.06
[2025-10-17T04:06:21.370Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:06:21.370Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:06:21.370Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:06:21.371Z] [LOG]    NET SALARY: Rs.48163.94
[2025-10-17T04:06:21.371Z] [LOG] ======================================================================

[2025-10-17T04:06:21.371Z] [LOG] ✅ R. D.A Kaushalya null: Calculation completed successfully
[2025-10-17T04:06:21.371Z] [LOG] 📊 Progress: 30/34 (88.2%)
[2025-10-17T04:06:21.372Z] [LOG] 
🧮 Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-17T04:06:21.372Z] [LOG] 📋 Record ID: b3f1ac1a-ad9f-4f24-8bf5-59d10a16d67c
[2025-10-17T04:06:21.372Z] [LOG] 
======================================================================
[2025-10-17T04:06:21.372Z] [LOG] 🧮 CALCULATING PAYROLL: Nimdiya Ranasinghe null (EMP000045)
[2025-10-17T04:06:21.373Z] [LOG] ======================================================================
[2025-10-17T04:06:22.300Z] [LOG] 🔍 Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-17T04:06:22.300Z] [LOG]    Total components: 9
[2025-10-17T04:06:22.300Z] [LOG]    Applicable components: 9
[2025-10-17T04:06:22.301Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T04:06:29.652Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:06:29.653Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:06:29.883Z] [LOG] 📊 Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:30.112Z] [LOG] 📊 Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:30.339Z] [LOG] 📊 Found 0 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:30.339Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:06:30.341Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:06:30.341Z] [LOG] 💰 GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-17T04:06:30.342Z] [LOG]    Base Salary: 35000
[2025-10-17T04:06:30.343Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:06:30.577Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:06:30.812Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:06:30.813Z] [LOG]    Employee ID: 01444074-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:30.813Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:06:30.814Z] [LOG]    Base Salary: Rs.35000.00
[2025-10-17T04:06:31.051Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:06:31.052Z] [LOG]       Daily Salary: Rs.1400.00
[2025-10-17T04:06:31.053Z] [LOG]       Weekday Hourly Rate: Rs.164.71
[2025-10-17T04:06:31.053Z] [LOG]       Saturday Hourly Rate: Rs.311.11
[2025-10-17T04:06:31.054Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:06:31.411Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:06:31.412Z] [LOG]       Weekday (Mon-Fri): 147.82h
[2025-10-17T04:06:31.413Z] [LOG]       Saturday: 22.50h
[2025-10-17T04:06:31.413Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:06:31.414Z] [LOG]       Total Worked: 170.32h
[2025-10-17T04:06:31.414Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:06:31.415Z] [LOG]       Weekday: 147.82h × Rs.164.71 = Rs.24347.43
[2025-10-17T04:06:31.416Z] [LOG]       Saturday: 22.50h × Rs.311.11 = Rs.6999.98
[2025-10-17T04:06:31.416Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:06:31.417Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:06:31.417Z] [LOG]       Total Earned Salary: Rs.31347.41
[2025-10-17T04:06:31.418Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:06:31.419Z] [LOG]       Base Salary: Rs.35000.00
[2025-10-17T04:06:31.420Z] [LOG]       Earned Salary: Rs.31347.41
[2025-10-17T04:06:31.421Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:06:31.421Z] [LOG]       Attendance Deduction: Rs.3652.59
[2025-10-17T04:06:31.422Z] [LOG]       📉 Deduction is 10.44% of base salary
[2025-10-17T04:06:31.422Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:06:31.423Z] [LOG]    Gross Salary: 35000
[2025-10-17T04:06:31.424Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:06:31.424Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:06:31.425Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:31.426Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:06:31.426Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:31.427Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:06:31.427Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:31.428Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:06:31.429Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:31.429Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:06:31.430Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:31.431Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:06:31.431Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:31.432Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:06:31.432Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:31.433Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:06:31.434Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:31.434Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:06:31.435Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:31.435Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:06:31.436Z] [LOG] Regular deductions for Nimdiya Ranasinghe null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:06:31.437Z] [LOG] Combined deductions for Nimdiya Ranasinghe null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 3652.5927999999985,
      "details": "Based on worked hours (170.32h total)"
    }
  ],
  "total": 3652.5927999999985
}
[2025-10-17T04:06:31.673Z] [LOG] Creating components for record b3f1ac1a-ad9f-4f24-8bf5-59d10a16d67c: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:06:31.675Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 3652.5927999999985
}
[2025-10-17T04:06:31.905Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:06:32.143Z] [LOG] Created payroll_record_component: 753e6174-879a-49fe-9985-f9dab84dc1b8 for Attendance Deduction
[2025-10-17T04:06:32.658Z] [LOG] ✅ Financial balances updated successfully for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:32.659Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:06:32.660Z] [LOG] 
======================================================================
[2025-10-17T04:06:32.660Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Nimdiya Ranasinghe null
[2025-10-17T04:06:32.661Z] [LOG] ======================================================================
[2025-10-17T04:06:32.661Z] [LOG]    Gross Salary: Rs.35000.00
[2025-10-17T04:06:32.662Z] [LOG]    Total Deductions: Rs.3652.59
[2025-10-17T04:06:32.663Z] [LOG]       - Attendance Deduction: Rs.3652.59
[2025-10-17T04:06:32.663Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:06:32.664Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:06:32.664Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:06:32.665Z] [LOG]    NET SALARY: Rs.31347.41
[2025-10-17T04:06:32.666Z] [LOG] ======================================================================

[2025-10-17T04:06:32.668Z] [LOG] ✅ Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-17T04:06:32.669Z] [LOG] 📊 Progress: 31/34 (91.2%)
[2025-10-17T04:06:32.671Z] [LOG] 
🧮 Processing: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-17T04:06:32.673Z] [LOG] 📋 Record ID: 38212747-d386-4593-aa48-0a13fa9b7ae9
[2025-10-17T04:06:32.674Z] [LOG] 
======================================================================
[2025-10-17T04:06:32.676Z] [LOG] 🧮 CALCULATING PAYROLL: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-17T04:06:32.677Z] [LOG] ======================================================================
[2025-10-17T04:06:34.224Z] [LOG] 🔍 Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-17T04:06:34.225Z] [LOG]    Total components: 9
[2025-10-17T04:06:34.226Z] [LOG]    Applicable components: 9
[2025-10-17T04:06:34.226Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T04:06:44.936Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:06:44.936Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:06:45.249Z] [LOG] 📊 Found 0 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:45.535Z] [LOG] 📊 Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:45.763Z] [LOG] 📊 Found 0 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:45.764Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:06:45.764Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:06:45.764Z] [LOG] 💰 GROSS CALCULATION for Ashen Nirmal Wadugodapitiya null:
[2025-10-17T04:06:45.764Z] [LOG]    Base Salary: 50000
[2025-10-17T04:06:45.765Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:06:45.995Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:06:46.223Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:06:46.224Z] [LOG]    Employee ID: 0144461e-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:46.224Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:06:46.225Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T04:06:46.454Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:06:46.454Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T04:06:46.455Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T04:06:46.455Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-17T04:06:46.455Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:06:46.688Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:06:46.689Z] [LOG]       Weekday (Mon-Fri): 152.20h
[2025-10-17T04:06:46.690Z] [LOG]       Saturday: 22.50h
[2025-10-17T04:06:46.690Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:06:46.691Z] [LOG]       Total Worked: 174.70h
[2025-10-17T04:06:46.692Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:06:46.692Z] [LOG]       Weekday: 152.20h × Rs.235.29 = Rs.35811.14
[2025-10-17T04:06:46.693Z] [LOG]       Saturday: 22.50h × Rs.444.44 = Rs.9999.90
[2025-10-17T04:06:46.693Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:06:46.694Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:06:46.695Z] [LOG]       Total Earned Salary: Rs.45811.04
[2025-10-17T04:06:46.696Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:06:46.697Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T04:06:46.697Z] [LOG]       Earned Salary: Rs.45811.04
[2025-10-17T04:06:46.698Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:06:46.699Z] [LOG]       Attendance Deduction: Rs.4188.96
[2025-10-17T04:06:46.699Z] [LOG]       📉 Deduction is 8.38% of base salary
[2025-10-17T04:06:46.700Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:06:46.701Z] [LOG]    Gross Salary: 50000
[2025-10-17T04:06:46.701Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:06:46.702Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:06:46.702Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:46.703Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:06:46.703Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:46.704Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:06:46.704Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:46.705Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:06:46.706Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:46.706Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:06:46.707Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:46.707Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:06:46.708Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:46.709Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:06:46.709Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:46.709Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:06:46.709Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:46.710Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:06:46.710Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:46.711Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:06:46.711Z] [LOG] Regular deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:06:46.711Z] [LOG] Combined deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 4188.9619999999995,
      "details": "Based on worked hours (174.7h total)"
    }
  ],
  "total": 4188.9619999999995
}
[2025-10-17T04:06:46.943Z] [LOG] Creating components for record 38212747-d386-4593-aa48-0a13fa9b7ae9: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:06:46.944Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 4188.9619999999995
}
[2025-10-17T04:06:47.176Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:06:47.408Z] [LOG] Created payroll_record_component: 4f1f6ee0-93a9-41f8-ba4c-83b7fc6bfe53 for Attendance Deduction
[2025-10-17T04:06:47.863Z] [LOG] ✅ Financial balances updated successfully for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:47.864Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:06:47.864Z] [LOG] 
======================================================================
[2025-10-17T04:06:47.865Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ashen Nirmal Wadugodapitiya null
[2025-10-17T04:06:47.866Z] [LOG] ======================================================================
[2025-10-17T04:06:47.866Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T04:06:47.867Z] [LOG]    Total Deductions: Rs.4188.96
[2025-10-17T04:06:47.868Z] [LOG]       - Attendance Deduction: Rs.4188.96
[2025-10-17T04:06:47.868Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:06:47.869Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:06:47.869Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:06:47.870Z] [LOG]    NET SALARY: Rs.45811.04
[2025-10-17T04:06:47.871Z] [LOG] ======================================================================

[2025-10-17T04:06:47.872Z] [LOG] ✅ Ashen Nirmal Wadugodapitiya null: Calculation completed successfully
[2025-10-17T04:06:47.872Z] [LOG] 📊 Progress: 32/34 (94.1%)
[2025-10-17T04:06:47.873Z] [LOG] 
🧮 Processing: Ratheeshanan null (EMP000047)
[2025-10-17T04:06:47.874Z] [LOG] 📋 Record ID: 2308c1c6-96df-45ab-8e33-d03cf08fb3c2
[2025-10-17T04:06:47.874Z] [LOG] 
======================================================================
[2025-10-17T04:06:47.875Z] [LOG] 🧮 CALCULATING PAYROLL: Ratheeshanan null (EMP000047)
[2025-10-17T04:06:47.876Z] [LOG] ======================================================================
[2025-10-17T04:06:48.796Z] [LOG] 🔍 Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-17T04:06:48.796Z] [LOG]    Total components: 9
[2025-10-17T04:06:48.797Z] [LOG]    Applicable components: 9
[2025-10-17T04:06:48.798Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T04:06:52.515Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:06:52.516Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:06:53.283Z] [LOG] 📊 Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:53.519Z] [LOG] 📊 Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:53.749Z] [LOG] 📊 Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:53.749Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:06:53.750Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:06:53.750Z] [LOG] 💰 GROSS CALCULATION for Ratheeshanan null:
[2025-10-17T04:06:53.750Z] [LOG]    Base Salary: 25000
[2025-10-17T04:06:53.751Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:06:54.058Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:06:54.288Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:06:54.288Z] [LOG]    Employee ID: 01444966-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:54.289Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:06:54.289Z] [LOG]    Base Salary: Rs.25000.00
[2025-10-17T04:06:54.518Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:06:54.519Z] [LOG]       Daily Salary: Rs.1000.00
[2025-10-17T04:06:54.520Z] [LOG]       Weekday Hourly Rate: Rs.117.65
[2025-10-17T04:06:54.521Z] [LOG]       Saturday Hourly Rate: Rs.222.22
[2025-10-17T04:06:54.521Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:06:54.752Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:06:54.753Z] [LOG]       Weekday (Mon-Fri): 139.86h
[2025-10-17T04:06:54.754Z] [LOG]       Saturday: 22.50h
[2025-10-17T04:06:54.754Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:06:54.755Z] [LOG]       Total Worked: 162.36h
[2025-10-17T04:06:54.756Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:06:54.756Z] [LOG]       Weekday: 139.86h × Rs.117.65 = Rs.16454.53
[2025-10-17T04:06:54.757Z] [LOG]       Saturday: 22.50h × Rs.222.22 = Rs.4999.95
[2025-10-17T04:06:54.758Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:06:54.758Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:06:54.759Z] [LOG]       Total Earned Salary: Rs.21454.48
[2025-10-17T04:06:54.760Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:06:54.761Z] [LOG]       Base Salary: Rs.25000.00
[2025-10-17T04:06:54.761Z] [LOG]       Earned Salary: Rs.21454.48
[2025-10-17T04:06:54.762Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:06:54.763Z] [LOG]       Attendance Deduction: Rs.3545.52
[2025-10-17T04:06:54.763Z] [LOG]       📉 Deduction is 14.18% of base salary
[2025-10-17T04:06:54.765Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:06:54.766Z] [LOG]    Gross Salary: 25000
[2025-10-17T04:06:54.766Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:06:54.767Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:06:54.767Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:54.768Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:06:54.768Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:54.769Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:06:54.770Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:54.770Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:06:54.771Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:54.772Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:06:54.772Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:54.773Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:06:54.773Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:54.774Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:06:54.774Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:54.775Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:06:54.776Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:54.777Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:06:54.777Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:54.778Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:06:54.778Z] [LOG] Regular deductions for Ratheeshanan null: {
  "components": [],
  "total": 0
}
[2025-10-17T04:06:54.779Z] [LOG] Combined deductions for Ratheeshanan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 3545.520999999997,
      "details": "Based on worked hours (162.36h total)"
    }
  ],
  "total": 3545.520999999997
}
[2025-10-17T04:06:55.010Z] [LOG] Creating components for record 2308c1c6-96df-45ab-8e33-d03cf08fb3c2: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:06:55.011Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 3545.520999999997
}
[2025-10-17T04:06:55.244Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:06:55.479Z] [LOG] Created payroll_record_component: 99074f4a-562a-446c-986d-8226ad8f4014 for Attendance Deduction
[2025-10-17T04:06:56.008Z] [LOG] ✅ Financial balances updated successfully for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-17T04:06:56.008Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:06:56.008Z] [LOG] 
======================================================================
[2025-10-17T04:06:56.009Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ratheeshanan null
[2025-10-17T04:06:56.009Z] [LOG] ======================================================================
[2025-10-17T04:06:56.010Z] [LOG]    Gross Salary: Rs.25000.00
[2025-10-17T04:06:56.010Z] [LOG]    Total Deductions: Rs.3545.52
[2025-10-17T04:06:56.011Z] [LOG]       - Attendance Deduction: Rs.3545.52
[2025-10-17T04:06:56.011Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:06:56.012Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:06:56.012Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:06:56.013Z] [LOG]    NET SALARY: Rs.21454.48
[2025-10-17T04:06:56.014Z] [LOG] ======================================================================

[2025-10-17T04:06:56.015Z] [LOG] ✅ Ratheeshanan null: Calculation completed successfully
[2025-10-17T04:06:56.015Z] [LOG] 📊 Progress: 33/34 (97.1%)
[2025-10-17T04:06:56.016Z] [LOG] 
🧮 Processing: Kaushal Thambi (EMP465256103)
[2025-10-17T04:06:56.017Z] [LOG] 📋 Record ID: 3f578c74-3141-4807-b0ba-9a5eedae4ed5
[2025-10-17T04:06:56.017Z] [LOG] 
======================================================================
[2025-10-17T04:06:56.018Z] [LOG] 🧮 CALCULATING PAYROLL: Kaushal Thambi (EMP465256103)
[2025-10-17T04:06:56.019Z] [LOG] ======================================================================
[2025-10-17T04:06:56.937Z] [LOG] 🔍 Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-17T04:06:56.938Z] [LOG]    Total components: 9
[2025-10-17T04:06:56.938Z] [LOG]    Applicable components: 9
[2025-10-17T04:06:56.939Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-17T04:06:57.851Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T04:06:57.852Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-08-01 to 2025-08-31
[2025-10-17T04:06:58.087Z] [LOG] 📊 Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-17T04:06:58.498Z] [LOG] 📊 Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-17T04:06:58.731Z] [LOG] 📊 Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-17T04:06:58.732Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T04:06:58.732Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T04:06:58.733Z] [LOG] 💰 GROSS CALCULATION for Kaushal Thambi:
[2025-10-17T04:06:58.733Z] [LOG]    Base Salary: 50000
[2025-10-17T04:06:58.734Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T04:06:58.965Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T04:06:59.192Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T04:06:59.193Z] [LOG]    Employee ID: 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-17T04:06:59.193Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-17T04:06:59.194Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T04:06:59.435Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T04:06:59.436Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T04:06:59.437Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T04:06:59.437Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T04:06:59.438Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T04:06:59.670Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T04:06:59.671Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-17T04:06:59.671Z] [LOG]       Saturday: 0.00h
[2025-10-17T04:06:59.671Z] [LOG]       Sunday: 0.00h
[2025-10-17T04:06:59.672Z] [LOG]       Total Worked: 0.00h
[2025-10-17T04:06:59.672Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T04:06:59.673Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T04:06:59.673Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T04:06:59.673Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T04:06:59.674Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:06:59.674Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T04:06:59.674Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T04:06:59.675Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T04:06:59.675Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T04:06:59.676Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T04:06:59.676Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-17T04:06:59.677Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-17T04:06:59.677Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T04:06:59.677Z] [LOG]    Gross Salary: 50000
[2025-10-17T04:06:59.678Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T04:06:59.678Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T04:06:59.678Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:59.679Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T04:06:59.679Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:59.679Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T04:06:59.680Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:59.680Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T04:06:59.680Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:59.681Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T04:06:59.681Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:59.681Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T04:06:59.682Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:59.682Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T04:06:59.682Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:59.683Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T04:06:59.683Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:59.683Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T04:06:59.684Z] [LOG]    Fixed amount: 0
[2025-10-17T04:06:59.684Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T04:06:59.684Z] [LOG] Regular deductions for Kaushal Thambi: {
  "components": [],
  "total": 0
}
[2025-10-17T04:06:59.685Z] [LOG] Combined deductions for Kaushal Thambi: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-17T04:06:59.933Z] [LOG] Creating components for record 3f578c74-3141-4807-b0ba-9a5eedae4ed5: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T04:06:59.935Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-17T04:07:00.214Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T04:07:00.888Z] [LOG] Created payroll_record_component: d79965dc-6317-405c-a30c-9933200bb523 for Attendance Deduction
[2025-10-17T04:07:01.364Z] [LOG] ✅ Financial balances updated successfully for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-17T04:07:01.365Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T04:07:01.365Z] [LOG] 
======================================================================
[2025-10-17T04:07:01.366Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Kaushal Thambi
[2025-10-17T04:07:01.367Z] [LOG] ======================================================================
[2025-10-17T04:07:01.367Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T04:07:01.368Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-17T04:07:01.368Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-17T04:07:01.369Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T04:07:01.370Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T04:07:01.370Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T04:07:01.371Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T04:07:01.372Z] [LOG] ======================================================================

[2025-10-17T04:07:01.373Z] [LOG] ✅ Kaushal Thambi: Calculation completed successfully
[2025-10-17T04:07:01.373Z] [LOG] 📊 Progress: 34/34 (100.0%)
[2025-10-17T04:07:01.375Z] [LOG] 
============================================================
[2025-10-17T04:07:01.375Z] [LOG] 📈 Processing Summary: 34 successful, 0 failed
[2025-10-17T04:07:04.203Z] [LOG] 🎉 Payroll calculation completed successfully!
[2025-10-17T04:07:04.204Z] [LOG] 📊 Final Summary: 34 processed, 0 errors
[2025-10-17T04:07:04.205Z] [INFO] ================================================================================
[2025-10-17T04:07:04.205Z] [INFO] ⏰ Completed at: 2025-10-17T04:07:04.205Z
[2025-10-17T04:07:04.205Z] [INFO] 📊 Total log entries: 3097