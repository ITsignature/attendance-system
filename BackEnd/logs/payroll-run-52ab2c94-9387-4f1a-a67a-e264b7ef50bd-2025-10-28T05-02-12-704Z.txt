[2025-10-28T05:02:12.704Z] [INFO] 🚀 Payroll calculation logging started for run: 52ab2c94-9387-4f1a-a67a-e264b7ef50bd
[2025-10-28T05:02:12.704Z] [INFO] 📁 Log file: D:\attendance-system\BackEnd\logs\payroll-run-52ab2c94-9387-4f1a-a67a-e264b7ef50bd-2025-10-28T05-02-12-704Z.txt
[2025-10-28T05:02:12.704Z] [INFO] ⏰ Started at: 2025-10-28T05:02:12.704Z
[2025-10-28T05:02:12.704Z] [INFO] ================================================================================
[2025-10-28T05:02:12.704Z] [LOG] 🚀 Starting payroll calculation for run: 52ab2c94-9387-4f1a-a67a-e264b7ef50bd
[2025-10-28T05:02:12.704Z] [LOG] 👤 Client ID: it-signature, User ID: 059304ea-24a5-4d78-a290-cf09b9e53c4c
[2025-10-28T05:02:13.594Z] [LOG] ✅ Payroll run verified: September (MONTHLY_2025_09_REGULAR)
[2025-10-28T05:02:14.012Z] [LOG] 📊 Status updated to 'calculating'
[2025-10-28T05:02:14.659Z] [LOG] 👥 Processing 34 employee records:
[2025-10-28T05:02:14.660Z] [LOG] ============================================================
[2025-10-28T05:02:14.661Z] [LOG] 
🧮 Processing: Dharshika null (EMP000009)
[2025-10-28T05:02:14.665Z] [LOG] 📋 Record ID: 03d4ae95-f7a0-4758-8bc1-243deb8987e7
[2025-10-28T05:02:14.669Z] [LOG] 
======================================================================
[2025-10-28T05:02:14.670Z] [LOG] 🧮 CALCULATING PAYROLL: Dharshika null (EMP000009)
[2025-10-28T05:02:14.671Z] [LOG] ======================================================================
[2025-10-28T05:02:16.546Z] [LOG] 🔍 Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-28T05:02:16.547Z] [LOG]    Total components: 13
[2025-10-28T05:02:16.548Z] [LOG]    Applicable components: 13
[2025-10-28T05:02:16.548Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T05:02:23.107Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:02:23.108Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:02:23.585Z] [LOG] 📊 Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:24.060Z] [LOG] 📊 Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:24.550Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:24.552Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:02:24.553Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:02:25.484Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:02:25.485Z] [LOG]    👤 Employee: Dharshika null (EMP000009)
[2025-10-28T05:02:25.486Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:02:25.486Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:02:25.487Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-28T05:02:25.488Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:02:25.955Z] [LOG] 
   💵 Pre-calculated Rates for Dharshika null (EMP000009):
[2025-10-28T05:02:25.956Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-28T05:02:25.956Z] [LOG]       Weekday Hourly Rate: Rs.470.59
[2025-10-28T05:02:25.957Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-28T05:02:25.958Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:02:25.958Z] [LOG] 
   📊 Full Period Working Days for Dharshika null (EMP000009):
[2025-10-28T05:02:25.959Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:02:25.960Z] [LOG] 
   📊 Working Days for Expected Calculation for Dharshika null (EMP000009):
[2025-10-28T05:02:25.961Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:02:25.962Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:02:26.433Z] [LOG] 
   ⏰ Calculating Completed Hours for Dharshika null (EMP000009) - All completed sessions:
[2025-10-28T05:02:26.434Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:02:26.435Z] [LOG]       Total completed sessions found: 20
[2025-10-28T05:02:26.435Z] [LOG] 
      📋 Attendance Breakdown for Dharshika null (EMP000009):
[2025-10-28T05:02:26.436Z] [LOG]          1. 2025-09-01 (Weekday): 4.50h
[2025-10-28T05:02:26.437Z] [LOG]          2. 2025-09-02 (Weekday): 6.04h
[2025-10-28T05:02:26.437Z] [LOG]          3. 2025-09-03 (Weekday): 7.33h
[2025-10-28T05:02:26.438Z] [LOG]          4. 2025-09-04 (Weekday): 6.99h
[2025-10-28T05:02:26.439Z] [LOG]          5. 2025-09-12 (Weekday): 5.57h
[2025-10-28T05:02:26.439Z] [LOG]          6. 2025-09-13 (Saturday): 3.61h
[2025-10-28T05:02:26.441Z] [LOG]          7. 2025-09-15 (Weekday): 7.61h
[2025-10-28T05:02:26.441Z] [LOG]          8. 2025-09-16 (Weekday): 7.61h
[2025-10-28T05:02:26.442Z] [LOG]          9. 2025-09-17 (Weekday): 7.80h
[2025-10-28T05:02:26.443Z] [LOG]          10. 2025-09-18 (Weekday): 7.08h
[2025-10-28T05:02:26.443Z] [LOG]          11. 2025-09-19 (Weekday): 6.90h
[2025-10-28T05:02:26.448Z] [LOG]          12. 2025-09-20 (Saturday): 3.38h
[2025-10-28T05:02:26.449Z] [LOG]          13. 2025-09-22 (Weekday): 7.68h
[2025-10-28T05:02:26.450Z] [LOG]          14. 2025-09-23 (Weekday): 7.14h
[2025-10-28T05:02:26.450Z] [LOG]          15. 2025-09-24 (Weekday): 7.32h
[2025-10-28T05:02:26.451Z] [LOG]          16. 2025-09-25 (Weekday): 7.25h
[2025-10-28T05:02:26.451Z] [LOG]          17. 2025-09-26 (Weekday): 7.03h
[2025-10-28T05:02:26.452Z] [LOG]          18. 2025-09-27 (Saturday): 3.09h
[2025-10-28T05:02:26.453Z] [LOG]          19. 2025-09-29 (Weekday): 7.41h
[2025-10-28T05:02:26.454Z] [LOG]          20. 2025-09-30 (Weekday): 7.34h
[2025-10-28T05:02:26.923Z] [LOG] 
      📊 Aggregated Totals for Dharshika null (EMP000009):
[2025-10-28T05:02:26.924Z] [LOG]          Weekday: 118.60h
[2025-10-28T05:02:26.925Z] [LOG]          Saturday: 10.08h
[2025-10-28T05:02:26.925Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:02:26.926Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:02:26.927Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Dharshika null (EMP000009) - completed sessions only:
[2025-10-28T05:02:26.931Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:02:26.931Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:02:26.932Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:02:26.933Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:02:26.933Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Dharshika null (EMP000009) - completed sessions only:
[2025-10-28T05:02:26.934Z] [LOG]       Weekday: 118.60h
[2025-10-28T05:02:26.935Z] [LOG]       Saturday: 10.08h
[2025-10-28T05:02:26.935Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:02:26.936Z] [LOG]       Total Actual: 128.68h
[2025-10-28T05:02:26.937Z] [LOG] 
   💵 EXPECTED Earned Salary for Dharshika null (EMP000009) - until NOW:
[2025-10-28T05:02:26.938Z] [LOG]       Weekday: 178.50h × Rs.470.59 = Rs.84000.32
[2025-10-28T05:02:26.938Z] [LOG]       Saturday: 18.00h × Rs.888.89 = Rs.16000.02
[2025-10-28T05:02:26.940Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:26.940Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:26.941Z] [LOG]       Total Expected Earned: Rs.100000.34
[2025-10-28T05:02:26.942Z] [LOG] 
   💵 ACTUAL Earned Salary for Dharshika null (EMP000009) - including live session:
[2025-10-28T05:02:26.943Z] [LOG]       Weekday: 118.60h × Rs.470.59 = Rs.55811.97
[2025-10-28T05:02:26.943Z] [LOG]       Saturday: 10.08h × Rs.888.89 = Rs.8960.01
[2025-10-28T05:02:26.944Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:26.946Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:26.946Z] [LOG]       Total Actual Earned: Rs.64771.99
[2025-10-28T05:02:26.947Z] [LOG] 
   📊 FINAL CALCULATION for Dharshika null (EMP000009):
[2025-10-28T05:02:26.947Z] [LOG]       Calculated At: Oct 28, 2025, 10:32:26
[2025-10-28T05:02:26.948Z] [LOG]       Expected Earned: Rs.100000.34
[2025-10-28T05:02:26.948Z] [LOG]       Actual Earned: Rs.64771.99
[2025-10-28T05:02:26.948Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:26.949Z] [LOG]       Attendance Deduction: Rs.35228.35
[2025-10-28T05:02:26.949Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:02:26.949Z] [LOG]       📉 Shortfall for Dharshika null: 67.82 hours (35.23% of expected)
[2025-10-28T05:02:26.950Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:02:26.950Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-28T05:02:26.950Z] [LOG]    Actual Earned Base: Rs.64771.99
[2025-10-28T05:02:26.951Z] [LOG]    Attendance Shortfall: Rs.35228.35
[2025-10-28T05:02:26.951Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:02:26.952Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:02:26.952Z] [LOG]    Gross Salary: 64771.985199999996
[2025-10-28T05:02:26.952Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:02:26.953Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:02:26.953Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:26.954Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:02:26.954Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:26.954Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:02:26.954Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:26.955Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:02:26.955Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:26.955Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:02:26.955Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:26.956Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:02:26.956Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:26.956Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:02:26.956Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:26.957Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:02:26.957Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:26.957Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:02:26.958Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:26.958Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:02:26.958Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:26.959Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:02:26.959Z] [LOG]    EPF/ETF calculated on: Rs.64771.99
[2025-10-28T05:02:26.959Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:02:26.959Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:02:26.960Z] [LOG] 💰 GROSS CALCULATION for Dharshika null:
[2025-10-28T05:02:26.962Z] [LOG]    Base Salary: 100000
[2025-10-28T05:02:26.962Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:02:26.963Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:02:26.963Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:26.963Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:02:26.963Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:26.964Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:02:26.964Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:27.426Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:02:27.427Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:02:27.429Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:02:27.430Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:02:27.431Z] [LOG]    Actual Earned Base: Rs.64771.99
[2025-10-28T05:02:27.432Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:02:27.432Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:02:27.433Z] [LOG]    = Gross Salary: Rs.64771.99
[2025-10-28T05:02:27.434Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:02:27.435Z] [LOG]    Attendance Shortfall (Info): Rs.35228.35
[2025-10-28T05:02:27.435Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:02:27.436Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:02:27.436Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:02:27.437Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:02:27.438Z] [LOG]    Gross Salary: Rs.64771.99
[2025-10-28T05:02:27.439Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:02:27.439Z] [LOG]    = NET SALARY: Rs.64771.99
[2025-10-28T05:02:27.440Z] [LOG] 
💾 Database Update:
[2025-10-28T05:02:27.441Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:02:27.441Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:02:27.949Z] [LOG] 
📝 Components to save:
[2025-10-28T05:02:27.950Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:02:27.950Z] [LOG]    Deduction components: 1
[2025-10-28T05:02:27.952Z] [LOG] Creating components for record 03d4ae95-f7a0-4758-8bc1-243deb8987e7: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:02:27.955Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 64771.985199999996
}
[2025-10-28T05:02:28.444Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:02:28.914Z] [LOG] Created payroll_record_component: 37e022b8-c4a1-43d1-aa7a-ae32691252c9 for Base Salary
[2025-10-28T05:02:28.915Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 35228.34980000001
}
[2025-10-28T05:02:29.147Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:02:29.385Z] [LOG] Created payroll_record_component: 790ffa9c-bfb3-4bc4-a2c9-42c699a84711 for Attendance Shortfall (Info)
[2025-10-28T05:02:30.070Z] [LOG] ✅ Financial balances updated successfully for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:30.070Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:02:30.071Z] [LOG] 
======================================================================
[2025-10-28T05:02:30.072Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Dharshika null
[2025-10-28T05:02:30.072Z] [LOG] ======================================================================
[2025-10-28T05:02:30.073Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-28T05:02:30.074Z] [LOG]    Actual Earned Base (Attendance-based): Rs.64771.99
[2025-10-28T05:02:30.074Z] [LOG]    Attendance Shortfall: Rs.35228.35
[2025-10-28T05:02:30.075Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:30.075Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:02:30.076Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:02:30.078Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:30.079Z] [LOG]    GROSS SALARY: Rs.64771.99
[2025-10-28T05:02:30.080Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:30.080Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:02:30.081Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:02:30.082Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:02:30.083Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:02:30.083Z] [LOG]       - Attendance Shortfall (Info): Rs.35228.35
[2025-10-28T05:02:30.084Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:02:30.084Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:30.085Z] [LOG]    NET SALARY: Rs.64771.99
[2025-10-28T05:02:30.086Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:02:30.086Z] [LOG] ======================================================================

[2025-10-28T05:02:30.087Z] [LOG] ✅ Dharshika null: Calculation completed successfully
[2025-10-28T05:02:30.088Z] [LOG] 📊 Progress: 1/34 (2.9%)
[2025-10-28T05:02:30.089Z] [LOG] 
🧮 Processing: Saruban null (EMP000007)
[2025-10-28T05:02:30.090Z] [LOG] 📋 Record ID: 0555dc28-daec-4e86-b23a-5c5fab35d681
[2025-10-28T05:02:30.090Z] [LOG] 
======================================================================
[2025-10-28T05:02:30.091Z] [LOG] 🧮 CALCULATING PAYROLL: Saruban null (EMP000007)
[2025-10-28T05:02:30.092Z] [LOG] ======================================================================
[2025-10-28T05:02:31.004Z] [LOG] 🔍 Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-28T05:02:31.005Z] [LOG]    Total components: 13
[2025-10-28T05:02:31.006Z] [LOG]    Applicable components: 13
[2025-10-28T05:02:31.006Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-28T05:02:31.909Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:02:31.909Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:02:32.134Z] [LOG] 📊 Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:32.357Z] [LOG] 📊 Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:32.576Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:32.577Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:02:32.579Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:02:33.045Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:02:33.046Z] [LOG]    👤 Employee: Saruban null (EMP000007)
[2025-10-28T05:02:33.047Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:02:33.048Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:02:33.049Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-28T05:02:33.049Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:02:33.288Z] [LOG] 
   💵 Pre-calculated Rates for Saruban null (EMP000007):
[2025-10-28T05:02:33.289Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-28T05:02:33.289Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-28T05:02:33.290Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-28T05:02:33.291Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:02:33.291Z] [LOG] 
   📊 Full Period Working Days for Saruban null (EMP000007):
[2025-10-28T05:02:33.292Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:02:33.293Z] [LOG] 
   📊 Working Days for Expected Calculation for Saruban null (EMP000007):
[2025-10-28T05:02:33.293Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:02:33.294Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:02:33.522Z] [LOG] 
   ⏰ Calculating Completed Hours for Saruban null (EMP000007) - All completed sessions:
[2025-10-28T05:02:33.523Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:02:33.524Z] [LOG]       Total completed sessions found: 0
[2025-10-28T05:02:33.755Z] [LOG] 
      📊 Aggregated Totals for Saruban null (EMP000007):
[2025-10-28T05:02:33.755Z] [LOG]          Weekday: 0.00h
[2025-10-28T05:02:33.756Z] [LOG]          Saturday: 0.00h
[2025-10-28T05:02:33.757Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:02:33.757Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:02:33.758Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Saruban null (EMP000007) - completed sessions only:
[2025-10-28T05:02:33.759Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:02:33.760Z] [LOG]       Saturday: 34.00h
[2025-10-28T05:02:33.760Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:02:33.762Z] [LOG]       Total Expected: 212.50h
[2025-10-28T05:02:33.764Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Saruban null (EMP000007) - completed sessions only:
[2025-10-28T05:02:33.765Z] [LOG]       Weekday: 0.00h
[2025-10-28T05:02:33.765Z] [LOG]       Saturday: 0.00h
[2025-10-28T05:02:33.766Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:02:33.767Z] [LOG]       Total Actual: 0.00h
[2025-10-28T05:02:33.767Z] [LOG] 
   💵 EXPECTED Earned Salary for Saruban null (EMP000007) - until NOW:
[2025-10-28T05:02:33.768Z] [LOG]       Weekday: 178.50h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:33.769Z] [LOG]       Saturday: 34.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:33.769Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:33.770Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:33.771Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-28T05:02:33.771Z] [LOG] 
   💵 ACTUAL Earned Salary for Saruban null (EMP000007) - including live session:
[2025-10-28T05:02:33.772Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:33.773Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:33.773Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:33.774Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:33.775Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T05:02:33.776Z] [LOG] 
   📊 FINAL CALCULATION for Saruban null (EMP000007):
[2025-10-28T05:02:33.777Z] [LOG]       Calculated At: Oct 28, 2025, 10:32:33
[2025-10-28T05:02:33.778Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-28T05:02:33.780Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T05:02:33.781Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:33.781Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-28T05:02:33.782Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:02:33.783Z] [LOG]       ✅ No deduction - Saruban null worked all expected hours!
[2025-10-28T05:02:33.783Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:02:33.784Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-28T05:02:33.785Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:02:33.785Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T05:02:33.785Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:02:33.786Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:02:33.786Z] [LOG]    Gross Salary: 0
[2025-10-28T05:02:33.787Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:02:33.787Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:02:33.787Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:33.788Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:02:33.788Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:33.788Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:02:33.789Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:33.789Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:02:33.789Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:33.790Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:02:33.790Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:33.790Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:02:33.790Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:33.791Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:02:33.791Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:33.791Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:02:33.792Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:33.792Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:02:33.792Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:33.792Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:02:33.793Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:33.793Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:02:33.793Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T05:02:33.794Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:02:33.794Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:02:33.795Z] [LOG] 💰 GROSS CALCULATION for Saruban null:
[2025-10-28T05:02:33.796Z] [LOG]    Base Salary: 0
[2025-10-28T05:02:33.796Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:02:33.797Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:02:33.797Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:33.797Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:02:33.797Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:33.798Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:02:33.798Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:34.026Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:02:34.026Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:02:34.027Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:02:34.027Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:02:34.029Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:02:34.030Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:02:34.030Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:02:34.031Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T05:02:34.031Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:02:34.032Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:02:34.032Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:02:34.033Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:02:34.033Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:02:34.033Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T05:02:34.034Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:02:34.034Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T05:02:34.035Z] [LOG] 
💾 Database Update:
[2025-10-28T05:02:34.035Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:02:34.035Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:02:34.261Z] [LOG] 
📝 Components to save:
[2025-10-28T05:02:34.263Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T05:02:34.263Z] [LOG]    Deduction components: 0
[2025-10-28T05:02:34.263Z] [LOG] Creating components for record 0555dc28-daec-4e86-b23a-5c5fab35d681: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-28T05:02:34.698Z] [LOG] ✅ Financial balances updated successfully for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:34.699Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:02:34.699Z] [LOG] 
======================================================================
[2025-10-28T05:02:34.700Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saruban null
[2025-10-28T05:02:34.701Z] [LOG] ======================================================================
[2025-10-28T05:02:34.701Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-28T05:02:34.702Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T05:02:34.702Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T05:02:34.703Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:34.704Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:02:34.705Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:02:34.706Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:34.707Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T05:02:34.707Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:34.708Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:02:34.709Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:02:34.709Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:02:34.710Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:02:34.713Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-28T05:02:34.713Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:02:34.714Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:34.715Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T05:02:34.715Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:02:34.715Z] [LOG] ======================================================================

[2025-10-28T05:02:34.716Z] [LOG] ✅ Saruban null: Calculation completed successfully
[2025-10-28T05:02:34.716Z] [LOG] 📊 Progress: 2/34 (5.9%)
[2025-10-28T05:02:34.717Z] [LOG] 
🧮 Processing: Saru null (EMP000022)
[2025-10-28T05:02:34.717Z] [LOG] 📋 Record ID: 0820ab70-af69-485d-bc29-e8d7fcafc6b9
[2025-10-28T05:02:34.717Z] [LOG] 
======================================================================
[2025-10-28T05:02:34.718Z] [LOG] 🧮 CALCULATING PAYROLL: Saru null (EMP000022)
[2025-10-28T05:02:34.718Z] [LOG] ======================================================================
[2025-10-28T05:02:35.639Z] [LOG] 🔍 Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-28T05:02:35.640Z] [LOG]    Total components: 13
[2025-10-28T05:02:35.641Z] [LOG]    Applicable components: 13
[2025-10-28T05:02:35.641Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T05:02:37.434Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:02:37.435Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:02:37.659Z] [LOG] 📊 Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:37.883Z] [LOG] 📊 Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:38.113Z] [LOG] 📊 Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:38.114Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:02:38.115Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:02:38.571Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:02:38.571Z] [LOG]    👤 Employee: Saru null (EMP000022)
[2025-10-28T05:02:38.572Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:02:38.573Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:02:38.573Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T05:02:38.574Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:02:38.795Z] [LOG] 
   💵 Pre-calculated Rates for Saru null (EMP000022):
[2025-10-28T05:02:38.796Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-28T05:02:38.797Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-28T05:02:38.798Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-28T05:02:38.798Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:02:38.799Z] [LOG] 
   📊 Full Period Working Days for Saru null (EMP000022):
[2025-10-28T05:02:38.800Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:02:38.800Z] [LOG] 
   📊 Working Days for Expected Calculation for Saru null (EMP000022):
[2025-10-28T05:02:38.803Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:02:38.804Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:02:39.340Z] [LOG] 
   ⏰ Calculating Completed Hours for Saru null (EMP000022) - All completed sessions:
[2025-10-28T05:02:39.340Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:02:39.341Z] [LOG]       Total completed sessions found: 23
[2025-10-28T05:02:39.342Z] [LOG] 
      📋 Attendance Breakdown for Saru null (EMP000022):
[2025-10-28T05:02:39.343Z] [LOG]          1. 2025-09-01 (Weekday): 8.50h
[2025-10-28T05:02:39.344Z] [LOG]          2. 2025-09-02 (Weekday): 8.50h
[2025-10-28T05:02:39.349Z] [LOG]          3. 2025-09-03 (Weekday): 8.50h
[2025-10-28T05:02:39.350Z] [LOG]          4. 2025-09-04 (Weekday): 8.25h
[2025-10-28T05:02:39.350Z] [LOG]          5. 2025-09-06 (Saturday): 4.50h
[2025-10-28T05:02:39.351Z] [LOG]          6. 2025-09-08 (Weekday): 8.50h
[2025-10-28T05:02:39.351Z] [LOG]          7. 2025-09-09 (Weekday): 8.50h
[2025-10-28T05:02:39.352Z] [LOG]          8. 2025-09-10 (Weekday): 8.50h
[2025-10-28T05:02:39.353Z] [LOG]          9. 2025-09-11 (Weekday): 8.50h
[2025-10-28T05:02:39.353Z] [LOG]          10. 2025-09-12 (Weekday): 8.50h
[2025-10-28T05:02:39.354Z] [LOG]          11. 2025-09-13 (Saturday): 4.50h
[2025-10-28T05:02:39.355Z] [LOG]          12. 2025-09-15 (Weekday): 8.50h
[2025-10-28T05:02:39.355Z] [LOG]          13. 2025-09-16 (Weekday): 8.25h
[2025-10-28T05:02:39.356Z] [LOG]          14. 2025-09-17 (Weekday): 8.50h
[2025-10-28T05:02:39.356Z] [LOG]          15. 2025-09-18 (Weekday): 8.50h
[2025-10-28T05:02:39.357Z] [LOG]          16. 2025-09-19 (Weekday): 7.95h
[2025-10-28T05:02:39.358Z] [LOG]          17. 2025-09-20 (Saturday): 4.50h
[2025-10-28T05:02:39.358Z] [LOG]          18. 2025-09-22 (Weekday): 8.50h
[2025-10-28T05:02:39.359Z] [LOG]          19. 2025-09-24 (Weekday): 8.50h
[2025-10-28T05:02:39.359Z] [LOG]          20. 2025-09-25 (Weekday): 8.50h
[2025-10-28T05:02:39.360Z] [LOG]          21. 2025-09-26 (Weekday): 7.80h
[2025-10-28T05:02:39.363Z] [LOG]          22. 2025-09-27 (Saturday): 4.50h
[2025-10-28T05:02:39.364Z] [LOG]          23. 2025-09-29 (Weekday): 8.50h
[2025-10-28T05:02:39.585Z] [LOG] 
      📊 Aggregated Totals for Saru null (EMP000022):
[2025-10-28T05:02:39.586Z] [LOG]          Weekday: 159.75h
[2025-10-28T05:02:39.586Z] [LOG]          Saturday: 18.00h
[2025-10-28T05:02:39.587Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:02:39.588Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:02:39.588Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Saru null (EMP000022) - completed sessions only:
[2025-10-28T05:02:39.589Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:02:39.590Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:02:39.590Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:02:39.591Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:02:39.592Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Saru null (EMP000022) - completed sessions only:
[2025-10-28T05:02:39.592Z] [LOG]       Weekday: 159.75h
[2025-10-28T05:02:39.593Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:02:39.594Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:02:39.596Z] [LOG]       Total Actual: 177.75h
[2025-10-28T05:02:39.598Z] [LOG] 
   💵 EXPECTED Earned Salary for Saru null (EMP000022) - until NOW:
[2025-10-28T05:02:39.600Z] [LOG]       Weekday: 178.50h × Rs.235.29 = Rs.41999.26
[2025-10-28T05:02:39.600Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-28T05:02:39.601Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:39.602Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:39.602Z] [LOG]       Total Expected Earned: Rs.49999.18
[2025-10-28T05:02:39.603Z] [LOG] 
   💵 ACTUAL Earned Salary for Saru null (EMP000022) - including live session:
[2025-10-28T05:02:39.604Z] [LOG]       Weekday: 159.75h × Rs.235.29 = Rs.37587.58
[2025-10-28T05:02:39.605Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-28T05:02:39.605Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:39.606Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:39.606Z] [LOG]       Total Actual Earned: Rs.45587.50
[2025-10-28T05:02:39.608Z] [LOG] 
   📊 FINAL CALCULATION for Saru null (EMP000022):
[2025-10-28T05:02:39.609Z] [LOG]       Calculated At: Oct 28, 2025, 10:32:39
[2025-10-28T05:02:39.609Z] [LOG]       Expected Earned: Rs.49999.18
[2025-10-28T05:02:39.610Z] [LOG]       Actual Earned: Rs.45587.50
[2025-10-28T05:02:39.611Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:39.613Z] [LOG]       Attendance Deduction: Rs.4411.69
[2025-10-28T05:02:39.613Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:02:39.613Z] [LOG]       📉 Shortfall for Saru null: 18.75 hours (8.82% of expected)
[2025-10-28T05:02:39.614Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:02:39.614Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:02:39.615Z] [LOG]    Actual Earned Base: Rs.45587.50
[2025-10-28T05:02:39.615Z] [LOG]    Attendance Shortfall: Rs.4411.69
[2025-10-28T05:02:39.615Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:02:39.616Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:02:39.617Z] [LOG]    Gross Salary: 45587.4975
[2025-10-28T05:02:39.617Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:02:39.617Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:02:39.618Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:39.618Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:02:39.619Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:39.619Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:02:39.619Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:39.620Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:02:39.620Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:39.620Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:02:39.621Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:39.622Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:02:39.622Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:39.622Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:02:39.623Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:39.623Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:02:39.624Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:39.624Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:02:39.625Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:39.625Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:02:39.626Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:39.626Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:02:39.627Z] [LOG]    EPF/ETF calculated on: Rs.45587.50
[2025-10-28T05:02:39.627Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:02:39.629Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:02:39.629Z] [LOG] 💰 GROSS CALCULATION for Saru null:
[2025-10-28T05:02:39.630Z] [LOG]    Base Salary: 50000
[2025-10-28T05:02:39.630Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:02:39.631Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:02:39.631Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:39.631Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:02:39.632Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:39.632Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:02:39.633Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:39.856Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:02:39.857Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:02:39.857Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:02:39.857Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:02:39.858Z] [LOG]    Actual Earned Base: Rs.45587.50
[2025-10-28T05:02:39.858Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:02:39.858Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:02:39.859Z] [LOG]    = Gross Salary: Rs.45587.50
[2025-10-28T05:02:39.859Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:02:39.860Z] [LOG]    Attendance Shortfall (Info): Rs.4411.69
[2025-10-28T05:02:39.860Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:02:39.860Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:02:39.862Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:02:39.863Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:02:39.864Z] [LOG]    Gross Salary: Rs.45587.50
[2025-10-28T05:02:39.864Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:02:39.864Z] [LOG]    = NET SALARY: Rs.45587.50
[2025-10-28T05:02:39.865Z] [LOG] 
💾 Database Update:
[2025-10-28T05:02:39.865Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:02:39.865Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:02:40.101Z] [LOG] 
📝 Components to save:
[2025-10-28T05:02:40.102Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:02:40.102Z] [LOG]    Deduction components: 1
[2025-10-28T05:02:40.103Z] [LOG] Creating components for record 0820ab70-af69-485d-bc29-e8d7fcafc6b9: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:02:40.105Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 45587.4975
}
[2025-10-28T05:02:40.338Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:02:40.568Z] [LOG] Created payroll_record_component: 34ed41be-3984-4b58-8ef8-c4ae6c2c03a7 for Base Salary
[2025-10-28T05:02:40.569Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 4411.6875
}
[2025-10-28T05:02:40.789Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:02:41.013Z] [LOG] Created payroll_record_component: 5b76c469-0c23-4463-9a17-779d9570386c for Attendance Shortfall (Info)
[2025-10-28T05:02:41.455Z] [LOG] ✅ Financial balances updated successfully for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:41.456Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:02:41.457Z] [LOG] 
======================================================================
[2025-10-28T05:02:41.458Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saru null
[2025-10-28T05:02:41.458Z] [LOG] ======================================================================
[2025-10-28T05:02:41.459Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:02:41.459Z] [LOG]    Actual Earned Base (Attendance-based): Rs.45587.50
[2025-10-28T05:02:41.460Z] [LOG]    Attendance Shortfall: Rs.4411.69
[2025-10-28T05:02:41.461Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:41.465Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:02:41.466Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:02:41.467Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:41.467Z] [LOG]    GROSS SALARY: Rs.45587.50
[2025-10-28T05:02:41.468Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:41.468Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:02:41.469Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:02:41.470Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:02:41.471Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:02:41.471Z] [LOG]       - Attendance Shortfall (Info): Rs.4411.69
[2025-10-28T05:02:41.472Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:02:41.473Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:41.473Z] [LOG]    NET SALARY: Rs.45587.50
[2025-10-28T05:02:41.474Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:02:41.474Z] [LOG] ======================================================================

[2025-10-28T05:02:41.475Z] [LOG] ✅ Saru null: Calculation completed successfully
[2025-10-28T05:02:41.476Z] [LOG] 📊 Progress: 3/34 (8.8%)
[2025-10-28T05:02:41.477Z] [LOG] 
🧮 Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-28T05:02:41.479Z] [LOG] 📋 Record ID: 0a692095-f176-4840-9c2f-71e91d6ec72a
[2025-10-28T05:02:41.480Z] [LOG] 
======================================================================
[2025-10-28T05:02:41.481Z] [LOG] 🧮 CALCULATING PAYROLL: R. D.A Kaushalya null (EMP000044)
[2025-10-28T05:02:41.482Z] [LOG] ======================================================================
[2025-10-28T05:02:42.423Z] [LOG] 🔍 Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-28T05:02:42.423Z] [LOG]    Total components: 13
[2025-10-28T05:02:42.424Z] [LOG]    Applicable components: 13
[2025-10-28T05:02:42.425Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T05:02:47.998Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:02:47.999Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:02:48.207Z] [LOG] 📊 Found 0 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:48.411Z] [LOG] 📊 Found 0 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:48.617Z] [LOG] 📊 Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:48.618Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:02:48.619Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:02:49.032Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:02:49.033Z] [LOG]    👤 Employee: R. D.A Kaushalya null (EMP000044)
[2025-10-28T05:02:49.033Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:02:49.034Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:02:49.035Z] [LOG]    Base Salary (Full Month): Rs.79999.99
[2025-10-28T05:02:49.035Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:02:49.249Z] [LOG] 
   💵 Pre-calculated Rates for R. D.A Kaushalya null (EMP000044):
[2025-10-28T05:02:49.249Z] [LOG]       Daily Salary: Rs.3200.00
[2025-10-28T05:02:49.250Z] [LOG]       Weekday Hourly Rate: Rs.376.47
[2025-10-28T05:02:49.250Z] [LOG]       Saturday Hourly Rate: Rs.711.11
[2025-10-28T05:02:49.251Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:02:49.252Z] [LOG] 
   📊 Full Period Working Days for R. D.A Kaushalya null (EMP000044):
[2025-10-28T05:02:49.252Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:02:49.253Z] [LOG] 
   📊 Working Days for Expected Calculation for R. D.A Kaushalya null (EMP000044):
[2025-10-28T05:02:49.254Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:02:49.254Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:02:49.470Z] [LOG] 
   ⏰ Calculating Completed Hours for R. D.A Kaushalya null (EMP000044) - All completed sessions:
[2025-10-28T05:02:49.471Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:02:49.472Z] [LOG]       Total completed sessions found: 23
[2025-10-28T05:02:49.472Z] [LOG] 
      📋 Attendance Breakdown for R. D.A Kaushalya null (EMP000044):
[2025-10-28T05:02:49.473Z] [LOG]          1. 2025-09-03 (Weekday): 8.39h
[2025-10-28T05:02:49.474Z] [LOG]          2. 2025-09-04 (Weekday): 8.24h
[2025-10-28T05:02:49.474Z] [LOG]          3. 2025-09-06 (Saturday): 4.50h
[2025-10-28T05:02:49.475Z] [LOG]          4. 2025-09-08 (Weekday): 8.30h
[2025-10-28T05:02:49.476Z] [LOG]          5. 2025-09-09 (Weekday): 8.40h
[2025-10-28T05:02:49.476Z] [LOG]          6. 2025-09-10 (Weekday): 8.50h
[2025-10-28T05:02:49.477Z] [LOG]          7. 2025-09-11 (Weekday): 8.50h
[2025-10-28T05:02:49.479Z] [LOG]          8. 2025-09-12 (Weekday): 8.35h
[2025-10-28T05:02:49.480Z] [LOG]          9. 2025-09-13 (Saturday): 4.50h
[2025-10-28T05:02:49.481Z] [LOG]          10. 2025-09-15 (Weekday): 8.38h
[2025-10-28T05:02:49.482Z] [LOG]          11. 2025-09-16 (Weekday): 8.36h
[2025-10-28T05:02:49.482Z] [LOG]          12. 2025-09-17 (Weekday): 8.24h
[2025-10-28T05:02:49.483Z] [LOG]          13. 2025-09-18 (Weekday): 8.44h
[2025-10-28T05:02:49.484Z] [LOG]          14. 2025-09-19 (Weekday): 8.04h
[2025-10-28T05:02:49.485Z] [LOG]          15. 2025-09-20 (Saturday): 4.50h
[2025-10-28T05:02:49.485Z] [LOG]          16. 2025-09-22 (Weekday): 7.64h
[2025-10-28T05:02:49.486Z] [LOG]          17. 2025-09-23 (Weekday): 8.46h
[2025-10-28T05:02:49.487Z] [LOG]          18. 2025-09-24 (Weekday): 8.32h
[2025-10-28T05:02:49.487Z] [LOG]          19. 2025-09-25 (Weekday): 8.50h
[2025-10-28T05:02:49.488Z] [LOG]          20. 2025-09-26 (Weekday): 8.43h
[2025-10-28T05:02:49.489Z] [LOG]          21. 2025-09-27 (Saturday): 4.50h
[2025-10-28T05:02:49.489Z] [LOG]          22. 2025-09-29 (Weekday): 8.22h
[2025-10-28T05:02:49.490Z] [LOG]          23. 2025-09-30 (Weekday): 8.50h
[2025-10-28T05:02:49.701Z] [LOG] 
      📊 Aggregated Totals for R. D.A Kaushalya null (EMP000044):
[2025-10-28T05:02:49.702Z] [LOG]          Weekday: 158.21h
[2025-10-28T05:02:49.703Z] [LOG]          Saturday: 18.00h
[2025-10-28T05:02:49.703Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:02:49.704Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:02:49.704Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for R. D.A Kaushalya null (EMP000044) - completed sessions only:
[2025-10-28T05:02:49.705Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:02:49.706Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:02:49.707Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:02:49.707Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:02:49.708Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for R. D.A Kaushalya null (EMP000044) - completed sessions only:
[2025-10-28T05:02:49.709Z] [LOG]       Weekday: 158.21h
[2025-10-28T05:02:49.710Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:02:49.711Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:02:49.713Z] [LOG]       Total Actual: 176.21h
[2025-10-28T05:02:49.714Z] [LOG] 
   💵 EXPECTED Earned Salary for R. D.A Kaushalya null (EMP000044) - until NOW:
[2025-10-28T05:02:49.715Z] [LOG]       Weekday: 178.50h × Rs.376.47 = Rs.67199.90
[2025-10-28T05:02:49.715Z] [LOG]       Saturday: 18.00h × Rs.711.11 = Rs.12799.98
[2025-10-28T05:02:49.716Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:49.717Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:49.717Z] [LOG]       Total Expected Earned: Rs.79999.88
[2025-10-28T05:02:49.718Z] [LOG] 
   💵 ACTUAL Earned Salary for R. D.A Kaushalya null (EMP000044) - including live session:
[2025-10-28T05:02:49.719Z] [LOG]       Weekday: 158.21h × Rs.376.47 = Rs.59561.32
[2025-10-28T05:02:49.719Z] [LOG]       Saturday: 18.00h × Rs.711.11 = Rs.12799.98
[2025-10-28T05:02:49.720Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:49.721Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:49.721Z] [LOG]       Total Actual Earned: Rs.72361.30
[2025-10-28T05:02:49.723Z] [LOG] 
   📊 FINAL CALCULATION for R. D.A Kaushalya null (EMP000044):
[2025-10-28T05:02:49.723Z] [LOG]       Calculated At: Oct 28, 2025, 10:32:49
[2025-10-28T05:02:49.724Z] [LOG]       Expected Earned: Rs.79999.88
[2025-10-28T05:02:49.725Z] [LOG]       Actual Earned: Rs.72361.30
[2025-10-28T05:02:49.725Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:49.726Z] [LOG]       Attendance Deduction: Rs.7638.58
[2025-10-28T05:02:49.727Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:02:49.727Z] [LOG]       📉 Shortfall for R. D.A Kaushalya null: 20.29 hours (9.55% of expected)
[2025-10-28T05:02:49.730Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:02:49.731Z] [LOG]    Base Salary (Full): Rs.79999.99
[2025-10-28T05:02:49.732Z] [LOG]    Actual Earned Base: Rs.72361.30
[2025-10-28T05:02:49.732Z] [LOG]    Attendance Shortfall: Rs.7638.58
[2025-10-28T05:02:49.733Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:02:49.734Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:02:49.734Z] [LOG]    Gross Salary: 72361.29870000001
[2025-10-28T05:02:49.735Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:02:49.736Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:02:49.736Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:49.737Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:02:49.738Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:49.738Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:02:49.739Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:49.739Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:02:49.740Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:49.741Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:02:49.741Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:49.742Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:02:49.742Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:49.743Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:02:49.744Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:49.746Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:02:49.746Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:49.747Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:02:49.747Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:49.747Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:02:49.748Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:49.748Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:02:49.749Z] [LOG]    EPF/ETF calculated on: Rs.72361.30
[2025-10-28T05:02:49.749Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:02:49.749Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:02:49.750Z] [LOG] 💰 GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-28T05:02:49.750Z] [LOG]    Base Salary: 79999.99
[2025-10-28T05:02:49.751Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:02:49.751Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:02:49.751Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:49.752Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:02:49.752Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:49.753Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:02:49.753Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:49.958Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:02:49.959Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:02:49.959Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:02:49.960Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:02:49.960Z] [LOG]    Actual Earned Base: Rs.72361.30
[2025-10-28T05:02:49.961Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:02:49.962Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:02:49.963Z] [LOG]    = Gross Salary: Rs.72361.30
[2025-10-28T05:02:49.964Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:02:49.966Z] [LOG]    Attendance Shortfall (Info): Rs.7638.58
[2025-10-28T05:02:49.967Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:02:49.967Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:02:49.968Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:02:49.969Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:02:49.969Z] [LOG]    Gross Salary: Rs.72361.30
[2025-10-28T05:02:49.970Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:02:49.971Z] [LOG]    = NET SALARY: Rs.72361.30
[2025-10-28T05:02:49.972Z] [LOG] 
💾 Database Update:
[2025-10-28T05:02:49.973Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:02:49.973Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:02:50.181Z] [LOG] 
📝 Components to save:
[2025-10-28T05:02:50.182Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:02:50.182Z] [LOG]    Deduction components: 1
[2025-10-28T05:02:50.183Z] [LOG] Creating components for record 0a692095-f176-4840-9c2f-71e91d6ec72a: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:02:50.185Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 72361.29870000001
}
[2025-10-28T05:02:50.404Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:02:50.618Z] [LOG] Created payroll_record_component: 6f790a27-d5ce-46f0-9111-830519e7da63 for Base Salary
[2025-10-28T05:02:50.619Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 7638.576299999986
}
[2025-10-28T05:02:50.828Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:02:51.046Z] [LOG] Created payroll_record_component: e97b8030-aa67-4f07-9a1a-67823dfab08d for Attendance Shortfall (Info)
[2025-10-28T05:02:51.483Z] [LOG] ✅ Financial balances updated successfully for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:51.484Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:02:51.485Z] [LOG] 
======================================================================
[2025-10-28T05:02:51.485Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: R. D.A Kaushalya null
[2025-10-28T05:02:51.486Z] [LOG] ======================================================================
[2025-10-28T05:02:51.487Z] [LOG]    Base Salary (Full): Rs.79999.99
[2025-10-28T05:02:51.487Z] [LOG]    Actual Earned Base (Attendance-based): Rs.72361.30
[2025-10-28T05:02:51.488Z] [LOG]    Attendance Shortfall: Rs.7638.58
[2025-10-28T05:02:51.489Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:51.489Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:02:51.490Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:02:51.491Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:51.492Z] [LOG]    GROSS SALARY: Rs.72361.30
[2025-10-28T05:02:51.492Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:51.493Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:02:51.494Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:02:51.495Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:02:51.497Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:02:51.498Z] [LOG]       - Attendance Shortfall (Info): Rs.7638.58
[2025-10-28T05:02:51.498Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:02:51.499Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:51.500Z] [LOG]    NET SALARY: Rs.72361.30
[2025-10-28T05:02:51.500Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:02:51.501Z] [LOG] ======================================================================

[2025-10-28T05:02:51.502Z] [LOG] ✅ R. D.A Kaushalya null: Calculation completed successfully
[2025-10-28T05:02:51.502Z] [LOG] 📊 Progress: 4/34 (11.8%)
[2025-10-28T05:02:51.503Z] [LOG] 
🧮 Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-28T05:02:51.504Z] [LOG] 📋 Record ID: 15059809-a7d2-419b-8611-0e53d920d4d6
[2025-10-28T05:02:51.505Z] [LOG] 
======================================================================
[2025-10-28T05:02:51.505Z] [LOG] 🧮 CALCULATING PAYROLL: Ruvindu Hewabandu null (EMP000027)
[2025-10-28T05:02:51.506Z] [LOG] ======================================================================
[2025-10-28T05:02:52.337Z] [LOG] 🔍 Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-28T05:02:52.338Z] [LOG]    Total components: 13
[2025-10-28T05:02:52.338Z] [LOG]    Applicable components: 13
[2025-10-28T05:02:52.339Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-28T05:02:53.165Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:02:53.167Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:02:53.375Z] [LOG] 📊 Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:53.581Z] [LOG] 📊 Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:53.789Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:53.789Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:02:53.791Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:02:54.201Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:02:54.201Z] [LOG]    👤 Employee: Ruvindu Hewabandu null (EMP000027)
[2025-10-28T05:02:54.202Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:02:54.202Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:02:54.203Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-28T05:02:54.203Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:02:54.414Z] [LOG] 
   💵 Pre-calculated Rates for Ruvindu Hewabandu null (EMP000027):
[2025-10-28T05:02:54.415Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-28T05:02:54.415Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-28T05:02:54.416Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-28T05:02:54.417Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:02:54.417Z] [LOG] 
   📊 Full Period Working Days for Ruvindu Hewabandu null (EMP000027):
[2025-10-28T05:02:54.418Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:02:54.419Z] [LOG] 
   📊 Working Days for Expected Calculation for Ruvindu Hewabandu null (EMP000027):
[2025-10-28T05:02:54.419Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:02:54.420Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:02:54.630Z] [LOG] 
   ⏰ Calculating Completed Hours for Ruvindu Hewabandu null (EMP000027) - All completed sessions:
[2025-10-28T05:02:54.631Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:02:54.631Z] [LOG]       Total completed sessions found: 0
[2025-10-28T05:02:54.838Z] [LOG] 
      📊 Aggregated Totals for Ruvindu Hewabandu null (EMP000027):
[2025-10-28T05:02:54.839Z] [LOG]          Weekday: 0.00h
[2025-10-28T05:02:54.840Z] [LOG]          Saturday: 0.00h
[2025-10-28T05:02:54.840Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:02:54.841Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:02:54.842Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ruvindu Hewabandu null (EMP000027) - completed sessions only:
[2025-10-28T05:02:54.842Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:02:54.843Z] [LOG]       Saturday: 34.00h
[2025-10-28T05:02:54.844Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:02:54.845Z] [LOG]       Total Expected: 212.50h
[2025-10-28T05:02:54.847Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ruvindu Hewabandu null (EMP000027) - completed sessions only:
[2025-10-28T05:02:54.848Z] [LOG]       Weekday: 0.00h
[2025-10-28T05:02:54.848Z] [LOG]       Saturday: 0.00h
[2025-10-28T05:02:54.849Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:02:54.850Z] [LOG]       Total Actual: 0.00h
[2025-10-28T05:02:54.850Z] [LOG] 
   💵 EXPECTED Earned Salary for Ruvindu Hewabandu null (EMP000027) - until NOW:
[2025-10-28T05:02:54.851Z] [LOG]       Weekday: 178.50h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:54.852Z] [LOG]       Saturday: 34.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:54.853Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:54.853Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:54.854Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-28T05:02:54.855Z] [LOG] 
   💵 ACTUAL Earned Salary for Ruvindu Hewabandu null (EMP000027) - including live session:
[2025-10-28T05:02:54.855Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:54.856Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:54.857Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:54.857Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:54.858Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T05:02:54.859Z] [LOG] 
   📊 FINAL CALCULATION for Ruvindu Hewabandu null (EMP000027):
[2025-10-28T05:02:54.860Z] [LOG]       Calculated At: Oct 28, 2025, 10:32:54
[2025-10-28T05:02:54.861Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-28T05:02:54.863Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T05:02:54.864Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:54.865Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-28T05:02:54.865Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:02:54.866Z] [LOG]       ✅ No deduction - Ruvindu Hewabandu null worked all expected hours!
[2025-10-28T05:02:54.867Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:02:54.868Z] [LOG]    Base Salary (Full): Rs.NaN
[2025-10-28T05:02:54.868Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:02:54.869Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T05:02:54.870Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:02:54.871Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:02:54.871Z] [LOG]    Gross Salary: 0
[2025-10-28T05:02:54.872Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:02:54.872Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:02:54.873Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:54.874Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:02:54.874Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:54.875Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:02:54.875Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:54.876Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:02:54.876Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:54.876Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:02:54.877Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:54.877Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:02:54.879Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:54.879Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:02:54.880Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:54.880Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:02:54.880Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:54.881Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:02:54.881Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:54.882Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:02:54.882Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:54.882Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:02:54.883Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T05:02:54.883Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:02:54.883Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:02:54.884Z] [LOG] 💰 GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-28T05:02:54.884Z] [LOG]    Base Salary: 0
[2025-10-28T05:02:54.884Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:02:54.885Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:02:54.885Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:54.885Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:02:54.886Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:54.886Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:02:54.886Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:55.097Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:02:55.098Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:02:55.098Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:02:55.099Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:02:55.099Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:02:55.100Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:02:55.100Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:02:55.100Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T05:02:55.101Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:02:55.101Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:02:55.101Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:02:55.102Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:02:55.102Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:02:55.103Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T05:02:55.103Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:02:55.103Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T05:02:55.104Z] [LOG] 
💾 Database Update:
[2025-10-28T05:02:55.104Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:02:55.104Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:02:55.312Z] [LOG] 
📝 Components to save:
[2025-10-28T05:02:55.313Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T05:02:55.314Z] [LOG]    Deduction components: 0
[2025-10-28T05:02:55.314Z] [LOG] Creating components for record 15059809-a7d2-419b-8611-0e53d920d4d6: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-28T05:02:55.726Z] [LOG] ✅ Financial balances updated successfully for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-28T05:02:55.727Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:02:55.727Z] [LOG] 
======================================================================
[2025-10-28T05:02:55.728Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ruvindu Hewabandu null
[2025-10-28T05:02:55.729Z] [LOG] ======================================================================
[2025-10-28T05:02:55.730Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-28T05:02:55.730Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T05:02:55.731Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T05:02:55.732Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:55.733Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:02:55.733Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:02:55.734Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:55.735Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T05:02:55.735Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:55.736Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:02:55.737Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:02:55.737Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:02:55.738Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:02:55.739Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-28T05:02:55.739Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:02:55.740Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:02:55.741Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T05:02:55.741Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:02:55.742Z] [LOG] ======================================================================

[2025-10-28T05:02:55.743Z] [LOG] ✅ Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-28T05:02:55.743Z] [LOG] 📊 Progress: 5/34 (14.7%)
[2025-10-28T05:02:55.745Z] [LOG] 
🧮 Processing: Kaushal Thambi (EMP465256103)
[2025-10-28T05:02:55.745Z] [LOG] 📋 Record ID: 1d1aea4b-425b-4fd9-868f-7a892af324dc
[2025-10-28T05:02:55.746Z] [LOG] 
======================================================================
[2025-10-28T05:02:55.746Z] [LOG] 🧮 CALCULATING PAYROLL: Kaushal Thambi (EMP465256103)
[2025-10-28T05:02:55.747Z] [LOG] ======================================================================
[2025-10-28T05:02:56.571Z] [LOG] 🔍 Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-28T05:02:56.572Z] [LOG]    Total components: 13
[2025-10-28T05:02:56.572Z] [LOG]    Applicable components: 13
[2025-10-28T05:02:56.573Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-28T05:02:57.862Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:02:57.863Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:02:58.072Z] [LOG] 📊 Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-28T05:02:58.278Z] [LOG] 📊 Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-28T05:02:58.484Z] [LOG] 📊 Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-28T05:02:58.484Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:02:58.485Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:02:58.890Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:02:58.891Z] [LOG]    👤 Employee: Kaushal Thambi (EMP465256103)
[2025-10-28T05:02:58.891Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:02:58.892Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:02:58.892Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T05:02:58.893Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:02:59.102Z] [LOG] 
   💵 Pre-calculated Rates for Kaushal Thambi (EMP465256103):
[2025-10-28T05:02:59.103Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-28T05:02:59.103Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-28T05:02:59.104Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-28T05:02:59.104Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:02:59.105Z] [LOG] 
   📊 Full Period Working Days for Kaushal Thambi (EMP465256103):
[2025-10-28T05:02:59.106Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:02:59.107Z] [LOG] 
   📊 Working Days for Expected Calculation for Kaushal Thambi (EMP465256103):
[2025-10-28T05:02:59.107Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:02:59.108Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:02:59.327Z] [LOG] 
   ⏰ Calculating Completed Hours for Kaushal Thambi (EMP465256103) - All completed sessions:
[2025-10-28T05:02:59.328Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:02:59.329Z] [LOG]       Total completed sessions found: 4
[2025-10-28T05:02:59.329Z] [LOG] 
      📋 Attendance Breakdown for Kaushal Thambi (EMP465256103):
[2025-10-28T05:02:59.330Z] [LOG]          1. 2025-09-26 (Weekday): 0.00h
[2025-10-28T05:02:59.330Z] [LOG]          2. 2025-09-27 (Saturday): 0.00h
[2025-10-28T05:02:59.330Z] [LOG]          3. 2025-09-29 (Weekday): 0.00h
[2025-10-28T05:02:59.331Z] [LOG]          4. 2025-09-30 (Weekday): 0.00h
[2025-10-28T05:02:59.557Z] [LOG] 
      📊 Aggregated Totals for Kaushal Thambi (EMP465256103):
[2025-10-28T05:02:59.558Z] [LOG]          Weekday: 0.00h
[2025-10-28T05:02:59.558Z] [LOG]          Saturday: 0.00h
[2025-10-28T05:02:59.559Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:02:59.560Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:02:59.560Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Kaushal Thambi (EMP465256103) - completed sessions only:
[2025-10-28T05:02:59.562Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:02:59.563Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:02:59.564Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:02:59.565Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:02:59.566Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Kaushal Thambi (EMP465256103) - completed sessions only:
[2025-10-28T05:02:59.567Z] [LOG]       Weekday: 0.00h
[2025-10-28T05:02:59.567Z] [LOG]       Saturday: 0.00h
[2025-10-28T05:02:59.568Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:02:59.569Z] [LOG]       Total Actual: 0.00h
[2025-10-28T05:02:59.569Z] [LOG] 
   💵 EXPECTED Earned Salary for Kaushal Thambi (EMP465256103) - until NOW:
[2025-10-28T05:02:59.570Z] [LOG]       Weekday: 178.50h × Rs.235.29 = Rs.41999.26
[2025-10-28T05:02:59.571Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-28T05:02:59.571Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:59.572Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:59.573Z] [LOG]       Total Expected Earned: Rs.49999.18
[2025-10-28T05:02:59.573Z] [LOG] 
   💵 ACTUAL Earned Salary for Kaushal Thambi (EMP465256103) - including live session:
[2025-10-28T05:02:59.574Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-28T05:02:59.575Z] [LOG]       Saturday: 0.00h × Rs.444.44 = Rs.0.00
[2025-10-28T05:02:59.576Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:02:59.576Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:59.577Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T05:02:59.581Z] [LOG] 
   📊 FINAL CALCULATION for Kaushal Thambi (EMP465256103):
[2025-10-28T05:02:59.582Z] [LOG]       Calculated At: Oct 28, 2025, 10:32:59
[2025-10-28T05:02:59.583Z] [LOG]       Expected Earned: Rs.49999.18
[2025-10-28T05:02:59.584Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T05:02:59.584Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:02:59.585Z] [LOG]       Attendance Deduction: Rs.49999.18
[2025-10-28T05:02:59.585Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:02:59.585Z] [LOG]       📉 Shortfall for Kaushal Thambi: 196.50 hours (100.00% of expected)
[2025-10-28T05:02:59.586Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:02:59.586Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:02:59.587Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:02:59.587Z] [LOG]    Attendance Shortfall: Rs.49999.18
[2025-10-28T05:02:59.587Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:02:59.588Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:02:59.588Z] [LOG]    Gross Salary: 0
[2025-10-28T05:02:59.588Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:02:59.589Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:02:59.589Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:59.589Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:02:59.589Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:59.590Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:02:59.590Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:59.590Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:02:59.590Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:59.591Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:02:59.591Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:59.591Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:02:59.591Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:59.592Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:02:59.592Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:59.592Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:02:59.593Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:59.593Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:02:59.593Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:59.594Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:02:59.594Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:59.596Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:02:59.596Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T05:02:59.597Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:02:59.598Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:02:59.598Z] [LOG] 💰 GROSS CALCULATION for Kaushal Thambi:
[2025-10-28T05:02:59.599Z] [LOG]    Base Salary: 50000
[2025-10-28T05:02:59.599Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:02:59.599Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:02:59.600Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:59.600Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:02:59.600Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:59.600Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:02:59.601Z] [LOG]    Fixed amount: 0
[2025-10-28T05:02:59.832Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:02:59.833Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:02:59.834Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:02:59.834Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:02:59.835Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:02:59.836Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:02:59.837Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:02:59.837Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T05:02:59.838Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:02:59.839Z] [LOG]    Attendance Shortfall (Info): Rs.49999.18
[2025-10-28T05:02:59.839Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:02:59.840Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:02:59.841Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:02:59.841Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:02:59.842Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T05:02:59.843Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:02:59.843Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T05:02:59.846Z] [LOG] 
💾 Database Update:
[2025-10-28T05:02:59.847Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:02:59.848Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:03:00.080Z] [LOG] 
📝 Components to save:
[2025-10-28T05:03:00.080Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T05:03:00.081Z] [LOG]    Deduction components: 1
[2025-10-28T05:03:00.081Z] [LOG] Creating components for record 1d1aea4b-425b-4fd9-868f-7a892af324dc: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:03:00.082Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 49999.185
}
[2025-10-28T05:03:00.304Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:03:00.528Z] [LOG] Created payroll_record_component: 5d6f828a-493a-4e97-9daa-d8e31c3151bc for Attendance Shortfall (Info)
[2025-10-28T05:03:00.972Z] [LOG] ✅ Financial balances updated successfully for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-28T05:03:00.973Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:03:00.973Z] [LOG] 
======================================================================
[2025-10-28T05:03:00.974Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Kaushal Thambi
[2025-10-28T05:03:00.975Z] [LOG] ======================================================================
[2025-10-28T05:03:00.975Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:03:00.976Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T05:03:00.977Z] [LOG]    Attendance Shortfall: Rs.49999.18
[2025-10-28T05:03:00.979Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:00.980Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:03:00.981Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:03:00.981Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:00.982Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T05:03:00.983Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:00.983Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:03:00.984Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:03:00.985Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:03:00.985Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:03:00.986Z] [LOG]       - Attendance Shortfall (Info): Rs.49999.18
[2025-10-28T05:03:00.986Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:03:00.987Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:00.988Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T05:03:00.988Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:03:00.989Z] [LOG] ======================================================================

[2025-10-28T05:03:00.990Z] [LOG] ✅ Kaushal Thambi: Calculation completed successfully
[2025-10-28T05:03:00.990Z] [LOG] 📊 Progress: 6/34 (17.6%)
[2025-10-28T05:03:00.991Z] [LOG] 
🧮 Processing: Prasanthan null (EMP000001)
[2025-10-28T05:03:00.992Z] [LOG] 📋 Record ID: 1fa58ca5-fdf5-41cc-8a16-31b0f7a19478
[2025-10-28T05:03:00.992Z] [LOG] 
======================================================================
[2025-10-28T05:03:00.993Z] [LOG] 🧮 CALCULATING PAYROLL: Prasanthan null (EMP000001)
[2025-10-28T05:03:00.994Z] [LOG] ======================================================================
[2025-10-28T05:03:01.929Z] [LOG] 🔍 Component filtering for employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-28T05:03:01.929Z] [LOG]    Total components: 13
[2025-10-28T05:03:01.930Z] [LOG]    Applicable components: 13
[2025-10-28T05:03:01.931Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-28T05:03:02.855Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:03:02.856Z] [LOG] 🔄 Processing financial records for employee 014397c7-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:03:03.085Z] [LOG] 📊 Found 0 active loans for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:03.312Z] [LOG] 📊 Found 0 active advances for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:03.551Z] [LOG] 📊 Found 0 approved bonuses for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:03.552Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:03:03.553Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:03:04.012Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:03:04.013Z] [LOG]    👤 Employee: Prasanthan null (EMP000001)
[2025-10-28T05:03:04.014Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:03:04.015Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:03:04.015Z] [LOG]    Base Salary (Full Month): Rs.150000.00
[2025-10-28T05:03:04.016Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:03:04.248Z] [LOG] 
   💵 Pre-calculated Rates for Prasanthan null (EMP000001):
[2025-10-28T05:03:04.249Z] [LOG]       Daily Salary: Rs.6000.00
[2025-10-28T05:03:04.250Z] [LOG]       Weekday Hourly Rate: Rs.705.88
[2025-10-28T05:03:04.250Z] [LOG]       Saturday Hourly Rate: Rs.705.88
[2025-10-28T05:03:04.251Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:03:04.252Z] [LOG] 
   📊 Full Period Working Days for Prasanthan null (EMP000001):
[2025-10-28T05:03:04.252Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:03:04.253Z] [LOG] 
   📊 Working Days for Expected Calculation for Prasanthan null (EMP000001):
[2025-10-28T05:03:04.254Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:03:04.255Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:03:04.483Z] [LOG] 
   ⏰ Calculating Completed Hours for Prasanthan null (EMP000001) - All completed sessions:
[2025-10-28T05:03:04.484Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:03:04.485Z] [LOG]       Total completed sessions found: 0
[2025-10-28T05:03:04.707Z] [LOG] 
      📊 Aggregated Totals for Prasanthan null (EMP000001):
[2025-10-28T05:03:04.708Z] [LOG]          Weekday: 0.00h
[2025-10-28T05:03:04.708Z] [LOG]          Saturday: 0.00h
[2025-10-28T05:03:04.709Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:03:04.709Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:03:04.710Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Prasanthan null (EMP000001) - completed sessions only:
[2025-10-28T05:03:04.713Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:03:04.715Z] [LOG]       Saturday: 34.00h
[2025-10-28T05:03:04.715Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:03:04.715Z] [LOG]       Total Expected: 212.50h
[2025-10-28T05:03:04.716Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Prasanthan null (EMP000001) - completed sessions only:
[2025-10-28T05:03:04.716Z] [LOG]       Weekday: 0.00h
[2025-10-28T05:03:04.717Z] [LOG]       Saturday: 0.00h
[2025-10-28T05:03:04.717Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:03:04.717Z] [LOG]       Total Actual: 0.00h
[2025-10-28T05:03:04.718Z] [LOG] 
   💵 EXPECTED Earned Salary for Prasanthan null (EMP000001) - until NOW:
[2025-10-28T05:03:04.718Z] [LOG]       Weekday: 178.50h × Rs.705.88 = Rs.125999.58
[2025-10-28T05:03:04.719Z] [LOG]       Saturday: 34.00h × Rs.705.88 = Rs.23999.92
[2025-10-28T05:03:04.719Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:04.719Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:04.720Z] [LOG]       Total Expected Earned: Rs.149999.50
[2025-10-28T05:03:04.720Z] [LOG] 
   💵 ACTUAL Earned Salary for Prasanthan null (EMP000001) - including live session:
[2025-10-28T05:03:04.720Z] [LOG]       Weekday: 0.00h × Rs.705.88 = Rs.0.00
[2025-10-28T05:03:04.721Z] [LOG]       Saturday: 0.00h × Rs.705.88 = Rs.0.00
[2025-10-28T05:03:04.721Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:04.722Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:04.722Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T05:03:04.723Z] [LOG] 
   📊 FINAL CALCULATION for Prasanthan null (EMP000001):
[2025-10-28T05:03:04.723Z] [LOG]       Calculated At: Oct 28, 2025, 10:33:04
[2025-10-28T05:03:04.723Z] [LOG]       Expected Earned: Rs.149999.50
[2025-10-28T05:03:04.724Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T05:03:04.724Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:04.724Z] [LOG]       Attendance Deduction: Rs.149999.50
[2025-10-28T05:03:04.725Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:03:04.725Z] [LOG]       📉 Shortfall for Prasanthan null: 212.50 hours (100.00% of expected)
[2025-10-28T05:03:04.725Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:03:04.726Z] [LOG]    Base Salary (Full): Rs.150000.00
[2025-10-28T05:03:04.726Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:03:04.726Z] [LOG]    Attendance Shortfall: Rs.149999.50
[2025-10-28T05:03:04.727Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:03:04.727Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:03:04.729Z] [LOG]    Gross Salary: 0
[2025-10-28T05:03:04.730Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:03:04.730Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:03:04.731Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:04.731Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:03:04.731Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:04.732Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:03:04.732Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:04.732Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:03:04.733Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:04.733Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:03:04.733Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:04.734Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:03:04.734Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:04.734Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:03:04.735Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:04.735Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:03:04.736Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:04.736Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:03:04.736Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:04.737Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:03:04.737Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:04.738Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:03:04.738Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T05:03:04.738Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:03:04.739Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:03:04.739Z] [LOG] 💰 GROSS CALCULATION for Prasanthan null:
[2025-10-28T05:03:04.739Z] [LOG]    Base Salary: 150000
[2025-10-28T05:03:04.740Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:03:04.740Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:03:04.741Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:04.741Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:03:04.741Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:04.742Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:03:04.742Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:04.964Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:03:04.964Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:03:04.965Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:03:04.966Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:03:04.966Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:03:04.967Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:03:04.968Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:03:04.968Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T05:03:04.969Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:03:04.970Z] [LOG]    Attendance Shortfall (Info): Rs.149999.50
[2025-10-28T05:03:04.971Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:03:04.971Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:03:04.972Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:03:04.973Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:03:04.973Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T05:03:04.974Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:03:04.975Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T05:03:04.975Z] [LOG] 
💾 Database Update:
[2025-10-28T05:03:04.976Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:03:04.977Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:03:05.199Z] [LOG] 
📝 Components to save:
[2025-10-28T05:03:05.200Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T05:03:05.201Z] [LOG]    Deduction components: 1
[2025-10-28T05:03:05.201Z] [LOG] Creating components for record 1fa58ca5-fdf5-41cc-8a16-31b0f7a19478: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:03:05.203Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 149999.5
}
[2025-10-28T05:03:05.424Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:03:05.652Z] [LOG] Created payroll_record_component: 641e897d-296f-43cf-b7e7-986c0ea58324 for Attendance Shortfall (Info)
[2025-10-28T05:03:06.106Z] [LOG] ✅ Financial balances updated successfully for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:06.127Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:03:06.136Z] [LOG] 
======================================================================
[2025-10-28T05:03:06.136Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Prasanthan null
[2025-10-28T05:03:06.136Z] [LOG] ======================================================================
[2025-10-28T05:03:06.137Z] [LOG]    Base Salary (Full): Rs.150000.00
[2025-10-28T05:03:06.137Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T05:03:06.137Z] [LOG]    Attendance Shortfall: Rs.149999.50
[2025-10-28T05:03:06.137Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:06.137Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:03:06.138Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:03:06.138Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:06.138Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T05:03:06.139Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:06.139Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:03:06.139Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:03:06.139Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:03:06.140Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:03:06.140Z] [LOG]       - Attendance Shortfall (Info): Rs.149999.50
[2025-10-28T05:03:06.140Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:03:06.140Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:06.141Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T05:03:06.141Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:03:06.141Z] [LOG] ======================================================================

[2025-10-28T05:03:06.142Z] [LOG] ✅ Prasanthan null: Calculation completed successfully
[2025-10-28T05:03:06.142Z] [LOG] 📊 Progress: 7/34 (20.6%)
[2025-10-28T05:03:06.142Z] [LOG] 
🧮 Processing: Ratheeshanan null (EMP000047)
[2025-10-28T05:03:06.142Z] [LOG] 📋 Record ID: 2a36bf30-dd37-43e4-ab5c-f8873d25ea65
[2025-10-28T05:03:06.143Z] [LOG] 
======================================================================
[2025-10-28T05:03:06.143Z] [LOG] 🧮 CALCULATING PAYROLL: Ratheeshanan null (EMP000047)
[2025-10-28T05:03:06.143Z] [LOG] ======================================================================
[2025-10-28T05:03:07.054Z] [LOG] 🔍 Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-28T05:03:07.057Z] [LOG]    Total components: 13
[2025-10-28T05:03:07.057Z] [LOG]    Applicable components: 13
[2025-10-28T05:03:07.058Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T05:03:11.082Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:03:11.083Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:03:11.308Z] [LOG] 📊 Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:11.537Z] [LOG] 📊 Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:11.756Z] [LOG] 📊 Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:11.757Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:03:11.758Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:03:12.205Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:03:12.206Z] [LOG]    👤 Employee: Ratheeshanan null (EMP000047)
[2025-10-28T05:03:12.207Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:03:12.207Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:03:12.208Z] [LOG]    Base Salary (Full Month): Rs.25000.00
[2025-10-28T05:03:12.209Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:03:12.435Z] [LOG] 
   💵 Pre-calculated Rates for Ratheeshanan null (EMP000047):
[2025-10-28T05:03:12.436Z] [LOG]       Daily Salary: Rs.1000.00
[2025-10-28T05:03:12.437Z] [LOG]       Weekday Hourly Rate: Rs.117.65
[2025-10-28T05:03:12.437Z] [LOG]       Saturday Hourly Rate: Rs.222.22
[2025-10-28T05:03:12.438Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:03:12.438Z] [LOG] 
   📊 Full Period Working Days for Ratheeshanan null (EMP000047):
[2025-10-28T05:03:12.439Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:03:12.440Z] [LOG] 
   📊 Working Days for Expected Calculation for Ratheeshanan null (EMP000047):
[2025-10-28T05:03:12.441Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:03:12.441Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:03:12.669Z] [LOG] 
   ⏰ Calculating Completed Hours for Ratheeshanan null (EMP000047) - All completed sessions:
[2025-10-28T05:03:12.669Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:03:12.670Z] [LOG]       Total completed sessions found: 24
[2025-10-28T05:03:12.670Z] [LOG] 
      📋 Attendance Breakdown for Ratheeshanan null (EMP000047):
[2025-10-28T05:03:12.670Z] [LOG]          1. 2025-09-01 (Weekday): 8.16h
[2025-10-28T05:03:12.670Z] [LOG]          2. 2025-09-02 (Weekday): 8.04h
[2025-10-28T05:03:12.670Z] [LOG]          3. 2025-09-03 (Weekday): 8.50h
[2025-10-28T05:03:12.670Z] [LOG]          4. 2025-09-04 (Weekday): 8.02h
[2025-10-28T05:03:12.671Z] [LOG]          5. 2025-09-06 (Saturday): 4.50h
[2025-10-28T05:03:12.671Z] [LOG]          6. 2025-09-08 (Weekday): 8.50h
[2025-10-28T05:03:12.671Z] [LOG]          7. 2025-09-09 (Weekday): 7.98h
[2025-10-28T05:03:12.671Z] [LOG]          8. 2025-09-10 (Weekday): 8.50h
[2025-10-28T05:03:12.671Z] [LOG]          9. 2025-09-11 (Weekday): 7.59h
[2025-10-28T05:03:12.671Z] [LOG]          10. 2025-09-12 (Weekday): 8.50h
[2025-10-28T05:03:12.671Z] [LOG]          11. 2025-09-13 (Saturday): 4.50h
[2025-10-28T05:03:12.672Z] [LOG]          12. 2025-09-15 (Weekday): 8.11h
[2025-10-28T05:03:12.672Z] [LOG]          13. 2025-09-16 (Weekday): 8.17h
[2025-10-28T05:03:12.672Z] [LOG]          14. 2025-09-17 (Weekday): 8.50h
[2025-10-28T05:03:12.672Z] [LOG]          15. 2025-09-18 (Weekday): 8.26h
[2025-10-28T05:03:12.672Z] [LOG]          16. 2025-09-19 (Weekday): 8.50h
[2025-10-28T05:03:12.672Z] [LOG]          17. 2025-09-20 (Saturday): 4.50h
[2025-10-28T05:03:12.673Z] [LOG]          18. 2025-09-23 (Weekday): 7.82h
[2025-10-28T05:03:12.673Z] [LOG]          19. 2025-09-24 (Weekday): 8.42h
[2025-10-28T05:03:12.673Z] [LOG]          20. 2025-09-25 (Weekday): 8.33h
[2025-10-28T05:03:12.673Z] [LOG]          21. 2025-09-26 (Weekday): 8.50h
[2025-10-28T05:03:12.673Z] [LOG]          22. 2025-09-27 (Saturday): 4.50h
[2025-10-28T05:03:12.673Z] [LOG]          23. 2025-09-29 (Weekday): 8.50h
[2025-10-28T05:03:12.674Z] [LOG]          24. 2025-09-30 (Weekday): 7.98h
[2025-10-28T05:03:12.896Z] [LOG] 
      📊 Aggregated Totals for Ratheeshanan null (EMP000047):
[2025-10-28T05:03:12.896Z] [LOG]          Weekday: 164.88h
[2025-10-28T05:03:12.896Z] [LOG]          Saturday: 18.00h
[2025-10-28T05:03:12.897Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:03:12.897Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:03:12.897Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ratheeshanan null (EMP000047) - completed sessions only:
[2025-10-28T05:03:12.897Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:03:12.898Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:03:12.898Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:03:12.898Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:03:12.898Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ratheeshanan null (EMP000047) - completed sessions only:
[2025-10-28T05:03:12.898Z] [LOG]       Weekday: 164.88h
[2025-10-28T05:03:12.899Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:03:12.899Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:03:12.899Z] [LOG]       Total Actual: 182.88h
[2025-10-28T05:03:12.899Z] [LOG] 
   💵 EXPECTED Earned Salary for Ratheeshanan null (EMP000047) - until NOW:
[2025-10-28T05:03:12.900Z] [LOG]       Weekday: 178.50h × Rs.117.65 = Rs.21000.53
[2025-10-28T05:03:12.900Z] [LOG]       Saturday: 18.00h × Rs.222.22 = Rs.3999.96
[2025-10-28T05:03:12.900Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:12.900Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:12.901Z] [LOG]       Total Expected Earned: Rs.25000.49
[2025-10-28T05:03:12.901Z] [LOG] 
   💵 ACTUAL Earned Salary for Ratheeshanan null (EMP000047) - including live session:
[2025-10-28T05:03:12.901Z] [LOG]       Weekday: 164.88h × Rs.117.65 = Rs.19398.13
[2025-10-28T05:03:12.901Z] [LOG]       Saturday: 18.00h × Rs.222.22 = Rs.3999.96
[2025-10-28T05:03:12.901Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:12.902Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:12.902Z] [LOG]       Total Actual Earned: Rs.23398.09
[2025-10-28T05:03:12.902Z] [LOG] 
   📊 FINAL CALCULATION for Ratheeshanan null (EMP000047):
[2025-10-28T05:03:12.903Z] [LOG]       Calculated At: Oct 28, 2025, 10:33:12
[2025-10-28T05:03:12.903Z] [LOG]       Expected Earned: Rs.25000.49
[2025-10-28T05:03:12.903Z] [LOG]       Actual Earned: Rs.23398.09
[2025-10-28T05:03:12.903Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:12.903Z] [LOG]       Attendance Deduction: Rs.1602.39
[2025-10-28T05:03:12.903Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:03:12.904Z] [LOG]       📉 Shortfall for Ratheeshanan null: 13.62 hours (6.41% of expected)
[2025-10-28T05:03:12.904Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:03:12.904Z] [LOG]    Base Salary (Full): Rs.25000.00
[2025-10-28T05:03:12.904Z] [LOG]    Actual Earned Base: Rs.23398.09
[2025-10-28T05:03:12.904Z] [LOG]    Attendance Shortfall: Rs.1602.39
[2025-10-28T05:03:12.904Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:03:12.905Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:03:12.905Z] [LOG]    Gross Salary: 23398.092
[2025-10-28T05:03:12.905Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:03:12.905Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:03:12.905Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:12.905Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:03:12.906Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:12.906Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:03:12.906Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:12.906Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:03:12.906Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:12.906Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:03:12.906Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:12.907Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:03:12.907Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:12.907Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:03:12.907Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:12.907Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:03:12.907Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:12.908Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:03:12.908Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:12.908Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:03:12.908Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:12.908Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:03:12.908Z] [LOG]    EPF/ETF calculated on: Rs.23398.09
[2025-10-28T05:03:12.908Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:03:12.909Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:03:12.909Z] [LOG] 💰 GROSS CALCULATION for Ratheeshanan null:
[2025-10-28T05:03:12.909Z] [LOG]    Base Salary: 25000
[2025-10-28T05:03:12.909Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:03:12.909Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:03:12.909Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:12.910Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:03:12.910Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:12.910Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:03:12.910Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:13.131Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:03:13.132Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:03:13.132Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:03:13.132Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:03:13.132Z] [LOG]    Actual Earned Base: Rs.23398.09
[2025-10-28T05:03:13.133Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:03:13.133Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:03:13.133Z] [LOG]    = Gross Salary: Rs.23398.09
[2025-10-28T05:03:13.133Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:03:13.134Z] [LOG]    Attendance Shortfall (Info): Rs.1602.39
[2025-10-28T05:03:13.134Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:03:13.134Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:03:13.135Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:03:13.135Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:03:13.135Z] [LOG]    Gross Salary: Rs.23398.09
[2025-10-28T05:03:13.135Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:03:13.135Z] [LOG]    = NET SALARY: Rs.23398.09
[2025-10-28T05:03:13.136Z] [LOG] 
💾 Database Update:
[2025-10-28T05:03:13.136Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:03:13.136Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:03:13.361Z] [LOG] 
📝 Components to save:
[2025-10-28T05:03:13.361Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:03:13.361Z] [LOG]    Deduction components: 1
[2025-10-28T05:03:13.362Z] [LOG] Creating components for record 2a36bf30-dd37-43e4-ab5c-f8873d25ea65: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:03:13.362Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 23398.092
}
[2025-10-28T05:03:13.584Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:03:13.810Z] [LOG] Created payroll_record_component: fd55d0ae-2550-4307-b657-bf8fba068d2b for Base Salary
[2025-10-28T05:03:13.811Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 1602.393
}
[2025-10-28T05:03:14.051Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:03:14.280Z] [LOG] Created payroll_record_component: 3bb3a51f-00d8-466c-a82c-a5892b1370d9 for Attendance Shortfall (Info)
[2025-10-28T05:03:14.731Z] [LOG] ✅ Financial balances updated successfully for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:14.731Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:03:14.731Z] [LOG] 
======================================================================
[2025-10-28T05:03:14.731Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ratheeshanan null
[2025-10-28T05:03:14.732Z] [LOG] ======================================================================
[2025-10-28T05:03:14.732Z] [LOG]    Base Salary (Full): Rs.25000.00
[2025-10-28T05:03:14.732Z] [LOG]    Actual Earned Base (Attendance-based): Rs.23398.09
[2025-10-28T05:03:14.732Z] [LOG]    Attendance Shortfall: Rs.1602.39
[2025-10-28T05:03:14.733Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:14.733Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:03:14.733Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:03:14.733Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:14.734Z] [LOG]    GROSS SALARY: Rs.23398.09
[2025-10-28T05:03:14.734Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:14.734Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:03:14.734Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:03:14.734Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:03:14.734Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:03:14.735Z] [LOG]       - Attendance Shortfall (Info): Rs.1602.39
[2025-10-28T05:03:14.735Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:03:14.735Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:14.735Z] [LOG]    NET SALARY: Rs.23398.09
[2025-10-28T05:03:14.736Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:03:14.736Z] [LOG] ======================================================================

[2025-10-28T05:03:14.736Z] [LOG] ✅ Ratheeshanan null: Calculation completed successfully
[2025-10-28T05:03:14.736Z] [LOG] 📊 Progress: 8/34 (23.5%)
[2025-10-28T05:03:14.737Z] [LOG] 
🧮 Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-28T05:03:14.737Z] [LOG] 📋 Record ID: 437f1d78-123c-4c5a-8f9b-2e8bb2b68424
[2025-10-28T05:03:14.737Z] [LOG] 
======================================================================
[2025-10-28T05:03:14.737Z] [LOG] 🧮 CALCULATING PAYROLL: Viruna Damsiha Cooray null (EMP000038)
[2025-10-28T05:03:14.737Z] [LOG] ======================================================================
[2025-10-28T05:03:15.652Z] [LOG] 🔍 Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-28T05:03:15.652Z] [LOG]    Total components: 13
[2025-10-28T05:03:15.653Z] [LOG]    Applicable components: 13
[2025-10-28T05:03:15.653Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T05:03:21.999Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:03:22.000Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:03:22.236Z] [LOG] 📊 Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:22.466Z] [LOG] 📊 Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:22.698Z] [LOG] 📊 Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:22.700Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:03:22.701Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:03:23.148Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:03:23.149Z] [LOG]    👤 Employee: Viruna Damsiha Cooray null (EMP000038)
[2025-10-28T05:03:23.149Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:03:23.150Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:03:23.150Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T05:03:23.151Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:03:23.375Z] [LOG] 
   💵 Pre-calculated Rates for Viruna Damsiha Cooray null (EMP000038):
[2025-10-28T05:03:23.375Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-28T05:03:23.376Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-28T05:03:23.377Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-28T05:03:23.377Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:03:23.378Z] [LOG] 
   📊 Full Period Working Days for Viruna Damsiha Cooray null (EMP000038):
[2025-10-28T05:03:23.379Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:03:23.380Z] [LOG] 
   📊 Working Days for Expected Calculation for Viruna Damsiha Cooray null (EMP000038):
[2025-10-28T05:03:23.381Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:03:23.382Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:03:23.605Z] [LOG] 
   ⏰ Calculating Completed Hours for Viruna Damsiha Cooray null (EMP000038) - All completed sessions:
[2025-10-28T05:03:23.606Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:03:23.607Z] [LOG]       Total completed sessions found: 25
[2025-10-28T05:03:23.607Z] [LOG] 
      📋 Attendance Breakdown for Viruna Damsiha Cooray null (EMP000038):
[2025-10-28T05:03:23.608Z] [LOG]          1. 2025-09-01 (Weekday): 7.97h
[2025-10-28T05:03:23.609Z] [LOG]          2. 2025-09-02 (Weekday): 8.34h
[2025-10-28T05:03:23.609Z] [LOG]          3. 2025-09-03 (Weekday): 7.96h
[2025-10-28T05:03:23.610Z] [LOG]          4. 2025-09-04 (Weekday): 7.71h
[2025-10-28T05:03:23.610Z] [LOG]          5. 2025-09-06 (Saturday): 4.50h
[2025-10-28T05:03:23.611Z] [LOG]          6. 2025-09-08 (Weekday): 8.00h
[2025-10-28T05:03:23.612Z] [LOG]          7. 2025-09-09 (Weekday): 8.50h
[2025-10-28T05:03:23.614Z] [LOG]          8. 2025-09-10 (Weekday): 8.50h
[2025-10-28T05:03:23.615Z] [LOG]          9. 2025-09-11 (Weekday): 4.50h
[2025-10-28T05:03:23.616Z] [LOG]          10. 2025-09-12 (Weekday): 8.50h
[2025-10-28T05:03:23.616Z] [LOG]          11. 2025-09-13 (Saturday): 4.50h
[2025-10-28T05:03:23.617Z] [LOG]          12. 2025-09-15 (Weekday): 8.50h
[2025-10-28T05:03:23.618Z] [LOG]          13. 2025-09-16 (Weekday): 8.50h
[2025-10-28T05:03:23.618Z] [LOG]          14. 2025-09-17 (Weekday): 8.20h
[2025-10-28T05:03:23.619Z] [LOG]          15. 2025-09-18 (Weekday): 8.50h
[2025-10-28T05:03:23.620Z] [LOG]          16. 2025-09-19 (Weekday): 6.85h
[2025-10-28T05:03:23.620Z] [LOG]          17. 2025-09-20 (Saturday): 4.50h
[2025-10-28T05:03:23.621Z] [LOG]          18. 2025-09-22 (Weekday): 8.40h
[2025-10-28T05:03:23.622Z] [LOG]          19. 2025-09-23 (Weekday): 8.50h
[2025-10-28T05:03:23.622Z] [LOG]          20. 2025-09-24 (Weekday): 8.39h
[2025-10-28T05:03:23.623Z] [LOG]          21. 2025-09-25 (Weekday): 8.50h
[2025-10-28T05:03:23.624Z] [LOG]          22. 2025-09-26 (Weekday): 8.50h
[2025-10-28T05:03:23.624Z] [LOG]          23. 2025-09-27 (Saturday): 4.50h
[2025-10-28T05:03:23.625Z] [LOG]          24. 2025-09-29 (Weekday): 8.50h
[2025-10-28T05:03:23.626Z] [LOG]          25. 2025-09-30 (Weekday): 8.50h
[2025-10-28T05:03:23.852Z] [LOG] 
      📊 Aggregated Totals for Viruna Damsiha Cooray null (EMP000038):
[2025-10-28T05:03:23.853Z] [LOG]          Weekday: 169.82h
[2025-10-28T05:03:23.853Z] [LOG]          Saturday: 18.00h
[2025-10-28T05:03:23.854Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:03:23.854Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:03:23.855Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Viruna Damsiha Cooray null (EMP000038) - completed sessions only:
[2025-10-28T05:03:23.856Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:03:23.857Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:03:23.857Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:03:23.858Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:03:23.859Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Viruna Damsiha Cooray null (EMP000038) - completed sessions only:
[2025-10-28T05:03:23.860Z] [LOG]       Weekday: 169.82h
[2025-10-28T05:03:23.860Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:03:23.861Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:03:23.862Z] [LOG]       Total Actual: 187.82h
[2025-10-28T05:03:23.864Z] [LOG] 
   💵 EXPECTED Earned Salary for Viruna Damsiha Cooray null (EMP000038) - until NOW:
[2025-10-28T05:03:23.865Z] [LOG]       Weekday: 178.50h × Rs.235.29 = Rs.41999.26
[2025-10-28T05:03:23.866Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-28T05:03:23.867Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:23.867Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:23.868Z] [LOG]       Total Expected Earned: Rs.49999.18
[2025-10-28T05:03:23.868Z] [LOG] 
   💵 ACTUAL Earned Salary for Viruna Damsiha Cooray null (EMP000038) - including live session:
[2025-10-28T05:03:23.869Z] [LOG]       Weekday: 169.82h × Rs.235.29 = Rs.39956.95
[2025-10-28T05:03:23.870Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-28T05:03:23.871Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:23.871Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:23.872Z] [LOG]       Total Actual Earned: Rs.47956.87
[2025-10-28T05:03:23.874Z] [LOG] 
   📊 FINAL CALCULATION for Viruna Damsiha Cooray null (EMP000038):
[2025-10-28T05:03:23.874Z] [LOG]       Calculated At: Oct 28, 2025, 10:33:23
[2025-10-28T05:03:23.875Z] [LOG]       Expected Earned: Rs.49999.18
[2025-10-28T05:03:23.876Z] [LOG]       Actual Earned: Rs.47956.87
[2025-10-28T05:03:23.876Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:23.877Z] [LOG]       Attendance Deduction: Rs.2042.32
[2025-10-28T05:03:23.878Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:03:23.878Z] [LOG]       📉 Shortfall for Viruna Damsiha Cooray null: 8.68 hours (4.08% of expected)
[2025-10-28T05:03:23.881Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:03:23.884Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:03:23.884Z] [LOG]    Actual Earned Base: Rs.47956.87
[2025-10-28T05:03:23.885Z] [LOG]    Attendance Shortfall: Rs.2042.32
[2025-10-28T05:03:23.886Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:03:23.886Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:03:23.887Z] [LOG]    Gross Salary: 47956.86779999999
[2025-10-28T05:03:23.887Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:03:23.887Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:03:23.888Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:23.888Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:03:23.888Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:23.889Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:03:23.889Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:23.890Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:03:23.890Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:23.890Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:03:23.891Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:23.891Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:03:23.892Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:23.892Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:03:23.892Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:23.893Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:03:23.893Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:23.893Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:03:23.894Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:23.894Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:03:23.894Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:23.894Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:03:23.895Z] [LOG]    EPF/ETF calculated on: Rs.47956.87
[2025-10-28T05:03:23.895Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:03:23.896Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:03:23.897Z] [LOG] 💰 GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-28T05:03:23.898Z] [LOG]    Base Salary: 50000
[2025-10-28T05:03:23.898Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:03:23.898Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:03:23.899Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:23.899Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:03:23.899Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:23.900Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:03:23.900Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:24.126Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:03:24.127Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:03:24.127Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:03:24.128Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:03:24.129Z] [LOG]    Actual Earned Base: Rs.47956.87
[2025-10-28T05:03:24.130Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:03:24.130Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:03:24.131Z] [LOG]    = Gross Salary: Rs.47956.87
[2025-10-28T05:03:24.132Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:03:24.133Z] [LOG]    Attendance Shortfall (Info): Rs.2042.32
[2025-10-28T05:03:24.134Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:03:24.135Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:03:24.135Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:03:24.136Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:03:24.137Z] [LOG]    Gross Salary: Rs.47956.87
[2025-10-28T05:03:24.138Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:03:24.139Z] [LOG]    = NET SALARY: Rs.47956.87
[2025-10-28T05:03:24.139Z] [LOG] 
💾 Database Update:
[2025-10-28T05:03:24.140Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:03:24.141Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:03:24.367Z] [LOG] 
📝 Components to save:
[2025-10-28T05:03:24.369Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:03:24.369Z] [LOG]    Deduction components: 1
[2025-10-28T05:03:24.370Z] [LOG] Creating components for record 437f1d78-123c-4c5a-8f9b-2e8bb2b68424: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:03:24.372Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 47956.86779999999
}
[2025-10-28T05:03:24.599Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:03:24.826Z] [LOG] Created payroll_record_component: 805f7a33-fd1d-4785-9719-c8791b97da62 for Base Salary
[2025-10-28T05:03:24.827Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 2042.317200000005
}
[2025-10-28T05:03:25.052Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:03:25.285Z] [LOG] Created payroll_record_component: d986fab1-898a-49a1-86e9-8002c5a8d1fe for Attendance Shortfall (Info)
[2025-10-28T05:03:25.727Z] [LOG] ✅ Financial balances updated successfully for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:25.729Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:03:25.729Z] [LOG] 
======================================================================
[2025-10-28T05:03:25.730Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Viruna Damsiha Cooray null
[2025-10-28T05:03:25.731Z] [LOG] ======================================================================
[2025-10-28T05:03:25.732Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:03:25.733Z] [LOG]    Actual Earned Base (Attendance-based): Rs.47956.87
[2025-10-28T05:03:25.734Z] [LOG]    Attendance Shortfall: Rs.2042.32
[2025-10-28T05:03:25.735Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:25.735Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:03:25.736Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:03:25.736Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:25.737Z] [LOG]    GROSS SALARY: Rs.47956.87
[2025-10-28T05:03:25.738Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:25.739Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:03:25.739Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:03:25.740Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:03:25.740Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:03:25.741Z] [LOG]       - Attendance Shortfall (Info): Rs.2042.32
[2025-10-28T05:03:25.742Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:03:25.742Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:25.743Z] [LOG]    NET SALARY: Rs.47956.87
[2025-10-28T05:03:25.744Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:03:25.744Z] [LOG] ======================================================================

[2025-10-28T05:03:25.747Z] [LOG] ✅ Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-28T05:03:25.747Z] [LOG] 📊 Progress: 9/34 (26.5%)
[2025-10-28T05:03:25.748Z] [LOG] 
🧮 Processing: Waruni null (EMP000024)
[2025-10-28T05:03:25.748Z] [LOG] 📋 Record ID: 5e79e411-5fef-49a7-90fe-90423001d0e5
[2025-10-28T05:03:25.749Z] [LOG] 
======================================================================
[2025-10-28T05:03:25.749Z] [LOG] 🧮 CALCULATING PAYROLL: Waruni null (EMP000024)
[2025-10-28T05:03:25.750Z] [LOG] ======================================================================
[2025-10-28T05:03:26.644Z] [LOG] 🔍 Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-28T05:03:26.644Z] [LOG]    Total components: 13
[2025-10-28T05:03:26.645Z] [LOG]    Applicable components: 13
[2025-10-28T05:03:26.645Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T05:03:31.040Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:03:31.041Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:03:31.254Z] [LOG] 📊 Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:31.466Z] [LOG] 📊 Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:31.677Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:31.678Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:03:31.680Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:03:32.100Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:03:32.101Z] [LOG]    👤 Employee: Waruni null (EMP000024)
[2025-10-28T05:03:32.102Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:03:32.102Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:03:32.103Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T05:03:32.103Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:03:32.326Z] [LOG] 
   💵 Pre-calculated Rates for Waruni null (EMP000024):
[2025-10-28T05:03:32.327Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-28T05:03:32.327Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-28T05:03:32.328Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-28T05:03:32.329Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:03:32.330Z] [LOG] 
   📊 Full Period Working Days for Waruni null (EMP000024):
[2025-10-28T05:03:32.331Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:03:32.332Z] [LOG] 
   📊 Working Days for Expected Calculation for Waruni null (EMP000024):
[2025-10-28T05:03:32.333Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:03:32.334Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:03:32.546Z] [LOG] 
   ⏰ Calculating Completed Hours for Waruni null (EMP000024) - All completed sessions:
[2025-10-28T05:03:32.547Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:03:32.548Z] [LOG]       Total completed sessions found: 20
[2025-10-28T05:03:32.549Z] [LOG] 
      📋 Attendance Breakdown for Waruni null (EMP000024):
[2025-10-28T05:03:32.549Z] [LOG]          1. 2025-09-01 (Weekday): 8.17h
[2025-10-28T05:03:32.550Z] [LOG]          2. 2025-09-02 (Weekday): 8.18h
[2025-10-28T05:03:32.551Z] [LOG]          3. 2025-09-03 (Weekday): 8.36h
[2025-10-28T05:03:32.551Z] [LOG]          4. 2025-09-04 (Weekday): 8.46h
[2025-10-28T05:03:32.552Z] [LOG]          5. 2025-09-06 (Saturday): 4.50h
[2025-10-28T05:03:32.553Z] [LOG]          6. 2025-09-13 (Saturday): 1.50h
[2025-10-28T05:03:32.553Z] [LOG]          7. 2025-09-15 (Weekday): 8.50h
[2025-10-28T05:03:32.554Z] [LOG]          8. 2025-09-16 (Weekday): 8.46h
[2025-10-28T05:03:32.555Z] [LOG]          9. 2025-09-17 (Weekday): 8.50h
[2025-10-28T05:03:32.556Z] [LOG]          10. 2025-09-18 (Weekday): 8.46h
[2025-10-28T05:03:32.556Z] [LOG]          11. 2025-09-19 (Weekday): 8.14h
[2025-10-28T05:03:32.557Z] [LOG]          12. 2025-09-20 (Saturday): 4.50h
[2025-10-28T05:03:32.558Z] [LOG]          13. 2025-09-22 (Weekday): 8.37h
[2025-10-28T05:03:32.558Z] [LOG]          14. 2025-09-23 (Weekday): 8.50h
[2025-10-28T05:03:32.559Z] [LOG]          15. 2025-09-24 (Weekday): 8.39h
[2025-10-28T05:03:32.560Z] [LOG]          16. 2025-09-25 (Weekday): 8.50h
[2025-10-28T05:03:32.560Z] [LOG]          17. 2025-09-26 (Weekday): 8.50h
[2025-10-28T05:03:32.561Z] [LOG]          18. 2025-09-27 (Saturday): 4.50h
[2025-10-28T05:03:32.562Z] [LOG]          19. 2025-09-29 (Weekday): 8.33h
[2025-10-28T05:03:32.564Z] [LOG]          20. 2025-09-30 (Weekday): 8.50h
[2025-10-28T05:03:32.772Z] [LOG] 
      📊 Aggregated Totals for Waruni null (EMP000024):
[2025-10-28T05:03:32.773Z] [LOG]          Weekday: 134.32h
[2025-10-28T05:03:32.774Z] [LOG]          Saturday: 15.00h
[2025-10-28T05:03:32.775Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:03:32.775Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:03:32.776Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Waruni null (EMP000024) - completed sessions only:
[2025-10-28T05:03:32.777Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:03:32.777Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:03:32.778Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:03:32.779Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:03:32.780Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Waruni null (EMP000024) - completed sessions only:
[2025-10-28T05:03:32.782Z] [LOG]       Weekday: 134.32h
[2025-10-28T05:03:32.783Z] [LOG]       Saturday: 15.00h
[2025-10-28T05:03:32.783Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:03:32.784Z] [LOG]       Total Actual: 149.32h
[2025-10-28T05:03:32.784Z] [LOG] 
   💵 EXPECTED Earned Salary for Waruni null (EMP000024) - until NOW:
[2025-10-28T05:03:32.785Z] [LOG]       Weekday: 178.50h × Rs.235.29 = Rs.41999.26
[2025-10-28T05:03:32.786Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-28T05:03:32.787Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:32.787Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:32.788Z] [LOG]       Total Expected Earned: Rs.49999.18
[2025-10-28T05:03:32.788Z] [LOG] 
   💵 ACTUAL Earned Salary for Waruni null (EMP000024) - including live session:
[2025-10-28T05:03:32.789Z] [LOG]       Weekday: 134.32h × Rs.235.29 = Rs.31604.15
[2025-10-28T05:03:32.790Z] [LOG]       Saturday: 15.00h × Rs.444.44 = Rs.6666.60
[2025-10-28T05:03:32.791Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:32.791Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:32.792Z] [LOG]       Total Actual Earned: Rs.38270.75
[2025-10-28T05:03:32.793Z] [LOG] 
   📊 FINAL CALCULATION for Waruni null (EMP000024):
[2025-10-28T05:03:32.794Z] [LOG]       Calculated At: Oct 28, 2025, 10:33:32
[2025-10-28T05:03:32.795Z] [LOG]       Expected Earned: Rs.49999.18
[2025-10-28T05:03:32.796Z] [LOG]       Actual Earned: Rs.38270.75
[2025-10-28T05:03:32.797Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:32.798Z] [LOG]       Attendance Deduction: Rs.11728.43
[2025-10-28T05:03:32.798Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:03:32.798Z] [LOG]       📉 Shortfall for Waruni null: 47.18 hours (23.46% of expected)
[2025-10-28T05:03:32.799Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:03:32.799Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:03:32.800Z] [LOG]    Actual Earned Base: Rs.38270.75
[2025-10-28T05:03:32.800Z] [LOG]    Attendance Shortfall: Rs.11728.43
[2025-10-28T05:03:32.800Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:03:32.801Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:03:32.801Z] [LOG]    Gross Salary: 38270.752799999995
[2025-10-28T05:03:32.801Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:03:32.802Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:03:32.802Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:32.802Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:03:32.803Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:32.803Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:03:32.804Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:32.804Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:03:32.804Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:32.805Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:03:32.805Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:32.805Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:03:32.806Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:32.806Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:03:32.806Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:32.807Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:03:32.807Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:32.807Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:03:32.807Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:32.808Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:03:32.808Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:32.808Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:03:32.809Z] [LOG]    EPF/ETF calculated on: Rs.38270.75
[2025-10-28T05:03:32.809Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:03:32.809Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:03:32.809Z] [LOG] 💰 GROSS CALCULATION for Waruni null:
[2025-10-28T05:03:32.810Z] [LOG]    Base Salary: 50000
[2025-10-28T05:03:32.810Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:03:32.810Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:03:32.811Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:32.811Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:03:32.811Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:32.811Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:03:32.812Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:33.035Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:03:33.036Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:03:33.036Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:03:33.037Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:03:33.038Z] [LOG]    Actual Earned Base: Rs.38270.75
[2025-10-28T05:03:33.038Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:03:33.039Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:03:33.039Z] [LOG]    = Gross Salary: Rs.38270.75
[2025-10-28T05:03:33.040Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:03:33.041Z] [LOG]    Attendance Shortfall (Info): Rs.11728.43
[2025-10-28T05:03:33.041Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:03:33.042Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:03:33.043Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:03:33.044Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:03:33.045Z] [LOG]    Gross Salary: Rs.38270.75
[2025-10-28T05:03:33.045Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:03:33.047Z] [LOG]    = NET SALARY: Rs.38270.75
[2025-10-28T05:03:33.048Z] [LOG] 
💾 Database Update:
[2025-10-28T05:03:33.049Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:03:33.050Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:03:33.272Z] [LOG] 
📝 Components to save:
[2025-10-28T05:03:33.273Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:03:33.273Z] [LOG]    Deduction components: 1
[2025-10-28T05:03:33.274Z] [LOG] Creating components for record 5e79e411-5fef-49a7-90fe-90423001d0e5: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:03:33.276Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 38270.752799999995
}
[2025-10-28T05:03:33.505Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:03:33.757Z] [LOG] Created payroll_record_component: 66b34ad2-de30-4ad7-9417-95b95a2185ea for Base Salary
[2025-10-28T05:03:33.758Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 11728.432200000003
}
[2025-10-28T05:03:33.965Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:03:34.185Z] [LOG] Created payroll_record_component: b0908f0b-f10f-4bf7-b008-a102b385f750 for Attendance Shortfall (Info)
[2025-10-28T05:03:34.605Z] [LOG] ✅ Financial balances updated successfully for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:34.606Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:03:34.607Z] [LOG] 
======================================================================
[2025-10-28T05:03:34.607Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Waruni null
[2025-10-28T05:03:34.608Z] [LOG] ======================================================================
[2025-10-28T05:03:34.609Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:03:34.609Z] [LOG]    Actual Earned Base (Attendance-based): Rs.38270.75
[2025-10-28T05:03:34.610Z] [LOG]    Attendance Shortfall: Rs.11728.43
[2025-10-28T05:03:34.610Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:34.611Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:03:34.612Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:03:34.614Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:34.615Z] [LOG]    GROSS SALARY: Rs.38270.75
[2025-10-28T05:03:34.615Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:34.616Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:03:34.617Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:03:34.618Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:03:34.618Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:03:34.619Z] [LOG]       - Attendance Shortfall (Info): Rs.11728.43
[2025-10-28T05:03:34.620Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:03:34.620Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:34.621Z] [LOG]    NET SALARY: Rs.38270.75
[2025-10-28T05:03:34.621Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:03:34.622Z] [LOG] ======================================================================

[2025-10-28T05:03:34.623Z] [LOG] ✅ Waruni null: Calculation completed successfully
[2025-10-28T05:03:34.624Z] [LOG] 📊 Progress: 10/34 (29.4%)

🧮 Processing: Uthpala null (EMP000006)
[2025-10-28T05:03:34.625Z] [LOG] 📋 Record ID: 60f8c82a-38cf-4f42-b65b-6f4363215bfc
[2025-10-28T05:03:34.626Z] [LOG] 
======================================================================
[2025-10-28T05:03:34.626Z] [LOG] 🧮 CALCULATING PAYROLL: Uthpala null (EMP000006)
[2025-10-28T05:03:34.627Z] [LOG] ======================================================================
[2025-10-28T05:03:35.518Z] [LOG] 🔍 Component filtering for employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-28T05:03:35.518Z] [LOG]    Total components: 13
[2025-10-28T05:03:35.519Z] [LOG]    Applicable components: 13
[2025-10-28T05:03:35.520Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-28T05:03:40.997Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:03:40.999Z] [LOG] 🔄 Processing financial records for employee 0143a539-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:03:41.211Z] [LOG] 📊 Found 0 active loans for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:41.423Z] [LOG] 📊 Found 0 active advances for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:41.642Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:41.642Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:03:41.644Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:03:42.069Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:03:42.070Z] [LOG]    👤 Employee: Uthpala null (EMP000006)
[2025-10-28T05:03:42.070Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:03:42.071Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:03:42.072Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-28T05:03:42.072Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:03:42.283Z] [LOG] 
   💵 Pre-calculated Rates for Uthpala null (EMP000006):
[2025-10-28T05:03:42.283Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-28T05:03:42.284Z] [LOG]       Weekday Hourly Rate: Rs.500.00
[2025-10-28T05:03:42.285Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-28T05:03:42.285Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:03:42.286Z] [LOG] 
   📊 Full Period Working Days for Uthpala null (EMP000006):
[2025-10-28T05:03:42.287Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:03:42.287Z] [LOG] 
   📊 Working Days for Expected Calculation for Uthpala null (EMP000006):
[2025-10-28T05:03:42.288Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:03:42.289Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:03:42.511Z] [LOG] 
   ⏰ Calculating Completed Hours for Uthpala null (EMP000006) - All completed sessions:
[2025-10-28T05:03:42.512Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:03:42.512Z] [LOG]       Total completed sessions found: 21
[2025-10-28T05:03:42.513Z] [LOG] 
      📋 Attendance Breakdown for Uthpala null (EMP000006):
[2025-10-28T05:03:42.513Z] [LOG]          1. 2025-09-01 (Weekday): 7.50h
[2025-10-28T05:03:42.514Z] [LOG]          2. 2025-09-02 (Weekday): 7.50h
[2025-10-28T05:03:42.514Z] [LOG]          3. 2025-09-03 (Weekday): 7.44h
[2025-10-28T05:03:42.514Z] [LOG]          4. 2025-09-04 (Weekday): 8.00h
[2025-10-28T05:03:42.515Z] [LOG]          5. 2025-09-06 (Saturday): 3.00h
[2025-10-28T05:03:42.515Z] [LOG]          6. 2025-09-11 (Weekday): 7.05h
[2025-10-28T05:03:42.515Z] [LOG]          7. 2025-09-12 (Weekday): 7.50h
[2025-10-28T05:03:42.516Z] [LOG]          8. 2025-09-13 (Saturday): 3.33h
[2025-10-28T05:03:42.516Z] [LOG]          9. 2025-09-15 (Weekday): 7.25h
[2025-10-28T05:03:42.516Z] [LOG]          10. 2025-09-16 (Weekday): 6.93h
[2025-10-28T05:03:42.517Z] [LOG]          11. 2025-09-17 (Weekday): 4.50h
[2025-10-28T05:03:42.517Z] [LOG]          12. 2025-09-18 (Weekday): 7.00h
[2025-10-28T05:03:42.518Z] [LOG]          13. 2025-09-19 (Weekday): 6.50h
[2025-10-28T05:03:42.519Z] [LOG]          14. 2025-09-20 (Saturday): 3.17h
[2025-10-28T05:03:42.519Z] [LOG]          15. 2025-09-22 (Weekday): 7.75h
[2025-10-28T05:03:42.520Z] [LOG]          16. 2025-09-23 (Weekday): 7.50h
[2025-10-28T05:03:42.520Z] [LOG]          17. 2025-09-25 (Weekday): 7.50h
[2025-10-28T05:03:42.521Z] [LOG]          18. 2025-09-26 (Weekday): 7.00h
[2025-10-28T05:03:42.521Z] [LOG]          19. 2025-09-27 (Saturday): 3.00h
[2025-10-28T05:03:42.523Z] [LOG]          20. 2025-09-29 (Weekday): 7.50h
[2025-10-28T05:03:42.523Z] [LOG]          21. 2025-09-30 (Weekday): 5.00h
[2025-10-28T05:03:42.737Z] [LOG] 
      📊 Aggregated Totals for Uthpala null (EMP000006):
[2025-10-28T05:03:42.738Z] [LOG]          Weekday: 119.42h
[2025-10-28T05:03:42.738Z] [LOG]          Saturday: 12.50h
[2025-10-28T05:03:42.739Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:03:42.739Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:03:42.739Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Uthpala null (EMP000006) - completed sessions only:
[2025-10-28T05:03:42.740Z] [LOG]       Weekday: 168.00h
[2025-10-28T05:03:42.740Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:03:42.741Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:03:42.741Z] [LOG]       Total Expected: 186.00h
[2025-10-28T05:03:42.741Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Uthpala null (EMP000006) - completed sessions only:
[2025-10-28T05:03:42.742Z] [LOG]       Weekday: 119.42h
[2025-10-28T05:03:42.742Z] [LOG]       Saturday: 12.50h
[2025-10-28T05:03:42.742Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:03:42.742Z] [LOG]       Total Actual: 131.92h
[2025-10-28T05:03:42.743Z] [LOG] 
   💵 EXPECTED Earned Salary for Uthpala null (EMP000006) - until NOW:
[2025-10-28T05:03:42.743Z] [LOG]       Weekday: 168.00h × Rs.500.00 = Rs.84000.00
[2025-10-28T05:03:42.744Z] [LOG]       Saturday: 18.00h × Rs.888.89 = Rs.16000.02
[2025-10-28T05:03:42.744Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:42.745Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:42.745Z] [LOG]       Total Expected Earned: Rs.100000.02
[2025-10-28T05:03:42.745Z] [LOG] 
   💵 ACTUAL Earned Salary for Uthpala null (EMP000006) - including live session:
[2025-10-28T05:03:42.746Z] [LOG]       Weekday: 119.42h × Rs.500.00 = Rs.59710.00
[2025-10-28T05:03:42.747Z] [LOG]       Saturday: 12.50h × Rs.888.89 = Rs.11111.13
[2025-10-28T05:03:42.747Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:42.747Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:42.748Z] [LOG]       Total Actual Earned: Rs.70821.13
[2025-10-28T05:03:42.748Z] [LOG] 
   📊 FINAL CALCULATION for Uthpala null (EMP000006):
[2025-10-28T05:03:42.749Z] [LOG]       Calculated At: Oct 28, 2025, 10:33:42
[2025-10-28T05:03:42.749Z] [LOG]       Expected Earned: Rs.100000.02
[2025-10-28T05:03:42.749Z] [LOG]       Actual Earned: Rs.70821.13
[2025-10-28T05:03:42.750Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:42.750Z] [LOG]       Attendance Deduction: Rs.29178.90
[2025-10-28T05:03:42.750Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:03:42.750Z] [LOG]       📉 Shortfall for Uthpala null: 54.08 hours (29.18% of expected)
[2025-10-28T05:03:42.751Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:03:42.751Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-28T05:03:42.751Z] [LOG]    Actual Earned Base: Rs.70821.13
[2025-10-28T05:03:42.752Z] [LOG]    Attendance Shortfall: Rs.29178.90
[2025-10-28T05:03:42.752Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:03:42.752Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:03:42.752Z] [LOG]    Gross Salary: 70821.125
[2025-10-28T05:03:42.753Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:03:42.753Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:03:42.754Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:42.754Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:03:42.754Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:42.755Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:03:42.755Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:42.755Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:03:42.755Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:42.756Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:03:42.756Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:42.756Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:03:42.757Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:42.757Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:03:42.757Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:42.758Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:03:42.758Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:42.758Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:03:42.759Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:42.759Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:03:42.759Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:42.760Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:03:42.760Z] [LOG]    EPF/ETF calculated on: Rs.70821.13
[2025-10-28T05:03:42.760Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:03:42.761Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:03:42.761Z] [LOG] 💰 GROSS CALCULATION for Uthpala null:
[2025-10-28T05:03:42.761Z] [LOG]    Base Salary: 100000
[2025-10-28T05:03:42.762Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:03:42.762Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:03:42.764Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:42.764Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:03:42.764Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:42.765Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:03:42.765Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:42.974Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:03:42.974Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:03:42.974Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:03:42.974Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:03:42.975Z] [LOG]    Actual Earned Base: Rs.70821.13
[2025-10-28T05:03:42.975Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:03:42.975Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:03:42.975Z] [LOG]    = Gross Salary: Rs.70821.13
[2025-10-28T05:03:42.975Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:03:42.975Z] [LOG]    Attendance Shortfall (Info): Rs.29178.90
[2025-10-28T05:03:42.976Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:03:42.976Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:03:42.976Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:03:42.976Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:03:42.977Z] [LOG]    Gross Salary: Rs.70821.13
[2025-10-28T05:03:42.977Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:03:42.977Z] [LOG]    = NET SALARY: Rs.70821.13
[2025-10-28T05:03:42.977Z] [LOG] 
💾 Database Update:
[2025-10-28T05:03:42.978Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:03:42.978Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:03:43.194Z] [LOG] 
📝 Components to save:
[2025-10-28T05:03:43.194Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:03:43.195Z] [LOG]    Deduction components: 1
[2025-10-28T05:03:43.195Z] [LOG] Creating components for record 60f8c82a-38cf-4f42-b65b-6f4363215bfc: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:03:43.197Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 70821.125
}
[2025-10-28T05:03:43.413Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:03:43.634Z] [LOG] Created payroll_record_component: 3e124f94-dcce-46ae-bb47-bec2ff4f2b23 for Base Salary
[2025-10-28T05:03:43.634Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 29178.895000000004
}
[2025-10-28T05:03:43.852Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:03:44.064Z] [LOG] Created payroll_record_component: 5964c1d2-a0f5-4d5a-bae2-9e5b729dec92 for Attendance Shortfall (Info)
[2025-10-28T05:03:44.477Z] [LOG] ✅ Financial balances updated successfully for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:44.478Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:03:44.478Z] [LOG] 
======================================================================
[2025-10-28T05:03:44.480Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Uthpala null
[2025-10-28T05:03:44.480Z] [LOG] ======================================================================
[2025-10-28T05:03:44.481Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-28T05:03:44.482Z] [LOG]    Actual Earned Base (Attendance-based): Rs.70821.13
[2025-10-28T05:03:44.482Z] [LOG]    Attendance Shortfall: Rs.29178.90
[2025-10-28T05:03:44.483Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:44.484Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:03:44.485Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:03:44.486Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:44.486Z] [LOG]    GROSS SALARY: Rs.70821.13
[2025-10-28T05:03:44.487Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:44.487Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:03:44.488Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:03:44.489Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:03:44.490Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:03:44.490Z] [LOG]       - Attendance Shortfall (Info): Rs.29178.90
[2025-10-28T05:03:44.491Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:03:44.491Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:44.492Z] [LOG]    NET SALARY: Rs.70821.13
[2025-10-28T05:03:44.492Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:03:44.493Z] [LOG] ======================================================================

[2025-10-28T05:03:44.494Z] [LOG] ✅ Uthpala null: Calculation completed successfully
[2025-10-28T05:03:44.494Z] [LOG] 📊 Progress: 11/34 (32.4%)
[2025-10-28T05:03:44.495Z] [LOG] 
🧮 Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-28T05:03:44.497Z] [LOG] 📋 Record ID: 612b7ac8-7672-4f42-8a7c-44d76b04e7d8
[2025-10-28T05:03:44.497Z] [LOG] 
======================================================================
[2025-10-28T05:03:44.498Z] [LOG] 🧮 CALCULATING PAYROLL: Sujevan Selvaratnam null (EMP000026)
[2025-10-28T05:03:44.498Z] [LOG] ======================================================================
[2025-10-28T05:03:45.327Z] [LOG] 🔍 Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-28T05:03:45.328Z] [LOG]    Total components: 13
[2025-10-28T05:03:45.331Z] [LOG]    Applicable components: 13
[2025-10-28T05:03:45.332Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-28T05:03:46.170Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:03:46.170Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:03:46.385Z] [LOG] 📊 Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:46.592Z] [LOG] 📊 Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:46.810Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:46.810Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:03:46.812Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:03:47.226Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:03:47.229Z] [LOG]    👤 Employee: Sujevan Selvaratnam null (EMP000026)
[2025-10-28T05:03:47.232Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:03:47.233Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:03:47.233Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-28T05:03:47.234Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:03:47.437Z] [LOG] 
   💵 Pre-calculated Rates for Sujevan Selvaratnam null (EMP000026):
[2025-10-28T05:03:47.438Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-28T05:03:47.439Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-28T05:03:47.439Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-28T05:03:47.440Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:03:47.440Z] [LOG] 
   📊 Full Period Working Days for Sujevan Selvaratnam null (EMP000026):
[2025-10-28T05:03:47.441Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:03:47.441Z] [LOG] 
   📊 Working Days for Expected Calculation for Sujevan Selvaratnam null (EMP000026):
[2025-10-28T05:03:47.442Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:03:47.442Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:03:47.645Z] [LOG] 
   ⏰ Calculating Completed Hours for Sujevan Selvaratnam null (EMP000026) - All completed sessions:
[2025-10-28T05:03:47.646Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:03:47.647Z] [LOG]       Total completed sessions found: 0
[2025-10-28T05:03:47.849Z] [LOG] 
      📊 Aggregated Totals for Sujevan Selvaratnam null (EMP000026):
[2025-10-28T05:03:47.852Z] [LOG]          Weekday: 0.00h
[2025-10-28T05:03:47.853Z] [LOG]          Saturday: 0.00h
[2025-10-28T05:03:47.853Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:03:47.854Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:03:47.856Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Sujevan Selvaratnam null (EMP000026) - completed sessions only:
[2025-10-28T05:03:47.858Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:03:47.858Z] [LOG]       Saturday: 34.00h
[2025-10-28T05:03:47.859Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:03:47.859Z] [LOG]       Total Expected: 212.50h
[2025-10-28T05:03:47.859Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Sujevan Selvaratnam null (EMP000026) - completed sessions only:
[2025-10-28T05:03:47.860Z] [LOG]       Weekday: 0.00h
[2025-10-28T05:03:47.860Z] [LOG]       Saturday: 0.00h
[2025-10-28T05:03:47.861Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:03:47.861Z] [LOG]       Total Actual: 0.00h
[2025-10-28T05:03:47.861Z] [LOG] 
   💵 EXPECTED Earned Salary for Sujevan Selvaratnam null (EMP000026) - until NOW:
[2025-10-28T05:03:47.862Z] [LOG]       Weekday: 178.50h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:47.863Z] [LOG]       Saturday: 34.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:47.863Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:47.864Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:47.864Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-28T05:03:47.864Z] [LOG] 
   💵 ACTUAL Earned Salary for Sujevan Selvaratnam null (EMP000026) - including live session:
[2025-10-28T05:03:47.864Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:47.864Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:47.865Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:47.865Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:47.866Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T05:03:47.867Z] [LOG] 
   📊 FINAL CALCULATION for Sujevan Selvaratnam null (EMP000026):
[2025-10-28T05:03:47.867Z] [LOG]       Calculated At: Oct 28, 2025, 10:33:47
[2025-10-28T05:03:47.868Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-28T05:03:47.868Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T05:03:47.868Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:47.868Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-28T05:03:47.869Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:03:47.869Z] [LOG]       ✅ No deduction - Sujevan Selvaratnam null worked all expected hours!
[2025-10-28T05:03:47.869Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:03:47.870Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-28T05:03:47.870Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:03:47.870Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T05:03:47.870Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:03:47.870Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:03:47.870Z] [LOG]    Gross Salary: 0
[2025-10-28T05:03:47.871Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:03:47.871Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:03:47.871Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:47.871Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:03:47.871Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:47.871Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:03:47.871Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:47.872Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:03:47.872Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:47.872Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:03:47.872Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:47.872Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:03:47.872Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:47.873Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:03:47.873Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:47.873Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:03:47.873Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:47.873Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:03:47.874Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:47.874Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:03:47.874Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:47.875Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:03:47.875Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T05:03:47.875Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:03:47.875Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:03:47.876Z] [LOG] 💰 GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-28T05:03:47.876Z] [LOG]    Base Salary: 1
[2025-10-28T05:03:47.876Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:03:47.876Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:03:47.876Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:47.876Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:03:47.877Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:47.877Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:03:47.877Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:48.106Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:03:48.107Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:03:48.107Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:03:48.108Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:03:48.109Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:03:48.109Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:03:48.110Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:03:48.111Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T05:03:48.112Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:03:48.115Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:03:48.116Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:03:48.116Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:03:48.117Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:03:48.118Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T05:03:48.118Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:03:48.119Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T05:03:48.119Z] [LOG] 
💾 Database Update:
[2025-10-28T05:03:48.120Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:03:48.121Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:03:48.322Z] [LOG] 
📝 Components to save:
[2025-10-28T05:03:48.323Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T05:03:48.323Z] [LOG]    Deduction components: 0
[2025-10-28T05:03:48.325Z] [LOG] Creating components for record 612b7ac8-7672-4f42-8a7c-44d76b04e7d8: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-28T05:03:48.754Z] [LOG] ✅ Financial balances updated successfully for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:48.754Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:03:48.755Z] [LOG] 
======================================================================
[2025-10-28T05:03:48.756Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sujevan Selvaratnam null
[2025-10-28T05:03:48.756Z] [LOG] ======================================================================
[2025-10-28T05:03:48.757Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-28T05:03:48.758Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T05:03:48.758Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T05:03:48.759Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:48.759Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:03:48.760Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:03:48.761Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:48.762Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T05:03:48.764Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:48.766Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:03:48.766Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:03:48.767Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:03:48.767Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:03:48.768Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-28T05:03:48.769Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:03:48.769Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:48.770Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T05:03:48.771Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:03:48.771Z] [LOG] ======================================================================

[2025-10-28T05:03:48.772Z] [LOG] ✅ Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-28T05:03:48.772Z] [LOG] 📊 Progress: 12/34 (35.3%)
[2025-10-28T05:03:48.773Z] [LOG] 
🧮 Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-28T05:03:48.774Z] [LOG] 📋 Record ID: 6d5f6437-4352-443f-8ea0-167d0a6ff41c
[2025-10-28T05:03:48.774Z] [LOG] 
======================================================================
[2025-10-28T05:03:48.775Z] [LOG] 🧮 CALCULATING PAYROLL: Nimdiya Ranasinghe null (EMP000045)
[2025-10-28T05:03:48.776Z] [LOG] ======================================================================
[2025-10-28T05:03:49.599Z] [LOG] 🔍 Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-28T05:03:49.600Z] [LOG]    Total components: 13
[2025-10-28T05:03:49.600Z] [LOG]    Applicable components: 13
[2025-10-28T05:03:49.601Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T05:03:55.172Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:03:55.172Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:03:55.373Z] [LOG] 📊 Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:55.577Z] [LOG] 📊 Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:55.778Z] [LOG] 📊 Found 0 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:55.778Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:03:55.779Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:03:56.190Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:03:56.190Z] [LOG]    👤 Employee: Nimdiya Ranasinghe null (EMP000045)
[2025-10-28T05:03:56.191Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:03:56.191Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:03:56.191Z] [LOG]    Base Salary (Full Month): Rs.35000.00
[2025-10-28T05:03:56.191Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:03:56.405Z] [LOG] 
   💵 Pre-calculated Rates for Nimdiya Ranasinghe null (EMP000045):
[2025-10-28T05:03:56.405Z] [LOG]       Daily Salary: Rs.1400.00
[2025-10-28T05:03:56.405Z] [LOG]       Weekday Hourly Rate: Rs.164.71
[2025-10-28T05:03:56.406Z] [LOG]       Saturday Hourly Rate: Rs.311.11
[2025-10-28T05:03:56.406Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:03:56.406Z] [LOG] 
   📊 Full Period Working Days for Nimdiya Ranasinghe null (EMP000045):
[2025-10-28T05:03:56.406Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:03:56.406Z] [LOG] 
   📊 Working Days for Expected Calculation for Nimdiya Ranasinghe null (EMP000045):
[2025-10-28T05:03:56.407Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:03:56.407Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:03:56.617Z] [LOG] 
   ⏰ Calculating Completed Hours for Nimdiya Ranasinghe null (EMP000045) - All completed sessions:
[2025-10-28T05:03:56.618Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:03:56.618Z] [LOG]       Total completed sessions found: 22
[2025-10-28T05:03:56.618Z] [LOG] 
      📋 Attendance Breakdown for Nimdiya Ranasinghe null (EMP000045):
[2025-10-28T05:03:56.618Z] [LOG]          1. 2025-09-01 (Weekday): 6.17h
[2025-10-28T05:03:56.619Z] [LOG]          2. 2025-09-02 (Weekday): 8.50h
[2025-10-28T05:03:56.619Z] [LOG]          3. 2025-09-03 (Weekday): 8.50h
[2025-10-28T05:03:56.619Z] [LOG]          4. 2025-09-04 (Weekday): 8.50h
[2025-10-28T05:03:56.619Z] [LOG]          5. 2025-09-06 (Saturday): 4.50h
[2025-10-28T05:03:56.619Z] [LOG]          6. 2025-09-09 (Weekday): 8.50h
[2025-10-28T05:03:56.619Z] [LOG]          7. 2025-09-10 (Weekday): 8.50h
[2025-10-28T05:03:56.619Z] [LOG]          8. 2025-09-11 (Weekday): 8.50h
[2025-10-28T05:03:56.620Z] [LOG]          9. 2025-09-13 (Saturday): 4.50h
[2025-10-28T05:03:56.620Z] [LOG]          10. 2025-09-15 (Weekday): 8.50h
[2025-10-28T05:03:56.620Z] [LOG]          11. 2025-09-16 (Weekday): 8.50h
[2025-10-28T05:03:56.620Z] [LOG]          12. 2025-09-17 (Weekday): 8.50h
[2025-10-28T05:03:56.620Z] [LOG]          13. 2025-09-18 (Weekday): 8.50h
[2025-10-28T05:03:56.621Z] [LOG]          14. 2025-09-19 (Weekday): 5.64h
[2025-10-28T05:03:56.621Z] [LOG]          15. 2025-09-20 (Saturday): 4.50h
[2025-10-28T05:03:56.621Z] [LOG]          16. 2025-09-22 (Weekday): 8.36h
[2025-10-28T05:03:56.621Z] [LOG]          17. 2025-09-23 (Weekday): 8.50h
[2025-10-28T05:03:56.622Z] [LOG]          18. 2025-09-24 (Weekday): 8.50h
[2025-10-28T05:03:56.622Z] [LOG]          19. 2025-09-25 (Weekday): 8.50h
[2025-10-28T05:03:56.622Z] [LOG]          20. 2025-09-26 (Weekday): 8.50h
[2025-10-28T05:03:56.622Z] [LOG]          21. 2025-09-27 (Saturday): 4.50h
[2025-10-28T05:03:56.622Z] [LOG]          22. 2025-09-29 (Weekday): 8.50h
[2025-10-28T05:03:56.825Z] [LOG] 
      📊 Aggregated Totals for Nimdiya Ranasinghe null (EMP000045):
[2025-10-28T05:03:56.825Z] [LOG]          Weekday: 147.67h
[2025-10-28T05:03:56.825Z] [LOG]          Saturday: 18.00h
[2025-10-28T05:03:56.826Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:03:56.826Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:03:56.826Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Nimdiya Ranasinghe null (EMP000045) - completed sessions only:
[2025-10-28T05:03:56.827Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:03:56.827Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:03:56.827Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:03:56.828Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:03:56.828Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Nimdiya Ranasinghe null (EMP000045) - completed sessions only:
[2025-10-28T05:03:56.828Z] [LOG]       Weekday: 147.67h
[2025-10-28T05:03:56.829Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:03:56.830Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:03:56.830Z] [LOG]       Total Actual: 165.67h
[2025-10-28T05:03:56.830Z] [LOG] 
   💵 EXPECTED Earned Salary for Nimdiya Ranasinghe null (EMP000045) - until NOW:
[2025-10-28T05:03:56.831Z] [LOG]       Weekday: 178.50h × Rs.164.71 = Rs.29400.74
[2025-10-28T05:03:56.831Z] [LOG]       Saturday: 18.00h × Rs.311.11 = Rs.5599.98
[2025-10-28T05:03:56.831Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:56.832Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:56.832Z] [LOG]       Total Expected Earned: Rs.35000.72
[2025-10-28T05:03:56.832Z] [LOG] 
   💵 ACTUAL Earned Salary for Nimdiya Ranasinghe null (EMP000045) - including live session:
[2025-10-28T05:03:56.833Z] [LOG]       Weekday: 147.67h × Rs.164.71 = Rs.24322.73
[2025-10-28T05:03:56.833Z] [LOG]       Saturday: 18.00h × Rs.311.11 = Rs.5599.98
[2025-10-28T05:03:56.833Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:03:56.834Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:56.834Z] [LOG]       Total Actual Earned: Rs.29922.71
[2025-10-28T05:03:56.835Z] [LOG] 
   📊 FINAL CALCULATION for Nimdiya Ranasinghe null (EMP000045):
[2025-10-28T05:03:56.835Z] [LOG]       Calculated At: Oct 28, 2025, 10:33:56
[2025-10-28T05:03:56.835Z] [LOG]       Expected Earned: Rs.35000.72
[2025-10-28T05:03:56.836Z] [LOG]       Actual Earned: Rs.29922.71
[2025-10-28T05:03:56.836Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:03:56.836Z] [LOG]       Attendance Deduction: Rs.5078.01
[2025-10-28T05:03:56.837Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:03:56.837Z] [LOG]       📉 Shortfall for Nimdiya Ranasinghe null: 30.83 hours (14.51% of expected)
[2025-10-28T05:03:56.837Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:03:56.838Z] [LOG]    Base Salary (Full): Rs.35000.00
[2025-10-28T05:03:56.838Z] [LOG]    Actual Earned Base: Rs.29922.71
[2025-10-28T05:03:56.838Z] [LOG]    Attendance Shortfall: Rs.5078.01
[2025-10-28T05:03:56.838Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:03:56.839Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:03:56.839Z] [LOG]    Gross Salary: 29922.7057
[2025-10-28T05:03:56.839Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:03:56.840Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:03:56.840Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:56.840Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:03:56.840Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:56.841Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:03:56.841Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:56.841Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:03:56.841Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:56.842Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:03:56.842Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:56.842Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:03:56.842Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:56.842Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:03:56.843Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:56.843Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:03:56.843Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:56.843Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:03:56.843Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:56.843Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:03:56.844Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:56.844Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:03:56.844Z] [LOG]    EPF/ETF calculated on: Rs.29922.71
[2025-10-28T05:03:56.844Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:03:56.844Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:03:56.845Z] [LOG] 💰 GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-28T05:03:56.845Z] [LOG]    Base Salary: 35000
[2025-10-28T05:03:56.845Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:03:56.845Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:03:56.845Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:56.846Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:03:56.847Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:56.847Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:03:56.847Z] [LOG]    Fixed amount: 0
[2025-10-28T05:03:57.052Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:03:57.053Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:03:57.053Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:03:57.054Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:03:57.054Z] [LOG]    Actual Earned Base: Rs.29922.71
[2025-10-28T05:03:57.054Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:03:57.054Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:03:57.055Z] [LOG]    = Gross Salary: Rs.29922.71
[2025-10-28T05:03:57.055Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:03:57.056Z] [LOG]    Attendance Shortfall (Info): Rs.5078.01
[2025-10-28T05:03:57.056Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:03:57.056Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:03:57.056Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:03:57.057Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:03:57.057Z] [LOG]    Gross Salary: Rs.29922.71
[2025-10-28T05:03:57.057Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:03:57.058Z] [LOG]    = NET SALARY: Rs.29922.71
[2025-10-28T05:03:57.058Z] [LOG] 
💾 Database Update:
[2025-10-28T05:03:57.058Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:03:57.058Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:03:57.265Z] [LOG] 
📝 Components to save:
[2025-10-28T05:03:57.266Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:03:57.266Z] [LOG]    Deduction components: 1
[2025-10-28T05:03:57.266Z] [LOG] Creating components for record 6d5f6437-4352-443f-8ea0-167d0a6ff41c: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:03:57.267Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 29922.7057
}
[2025-10-28T05:03:57.470Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:03:57.678Z] [LOG] Created payroll_record_component: c65c3627-827d-438d-a698-5cba0b6bf364 for Base Salary
[2025-10-28T05:03:57.680Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 5078.009300000005
}
[2025-10-28T05:03:57.880Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:03:58.084Z] [LOG] Created payroll_record_component: 78c01172-2446-43ad-b471-217ee4c4c485 for Attendance Shortfall (Info)
[2025-10-28T05:03:58.488Z] [LOG] ✅ Financial balances updated successfully for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-28T05:03:58.489Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:03:58.489Z] [LOG] 
======================================================================
[2025-10-28T05:03:58.489Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Nimdiya Ranasinghe null
[2025-10-28T05:03:58.489Z] [LOG] ======================================================================
[2025-10-28T05:03:58.490Z] [LOG]    Base Salary (Full): Rs.35000.00
[2025-10-28T05:03:58.490Z] [LOG]    Actual Earned Base (Attendance-based): Rs.29922.71
[2025-10-28T05:03:58.490Z] [LOG]    Attendance Shortfall: Rs.5078.01
[2025-10-28T05:03:58.490Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:58.490Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:03:58.491Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:03:58.491Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:58.491Z] [LOG]    GROSS SALARY: Rs.29922.71
[2025-10-28T05:03:58.491Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:58.491Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:03:58.492Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:03:58.492Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:03:58.492Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:03:58.492Z] [LOG]       - Attendance Shortfall (Info): Rs.5078.01
[2025-10-28T05:03:58.492Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:03:58.492Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:03:58.493Z] [LOG]    NET SALARY: Rs.29922.71
[2025-10-28T05:03:58.493Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:03:58.493Z] [LOG] ======================================================================

[2025-10-28T05:03:58.493Z] [LOG] ✅ Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-28T05:03:58.494Z] [LOG] 📊 Progress: 13/34 (38.2%)
[2025-10-28T05:03:58.494Z] [LOG] 
🧮 Processing: Office Team null (EMP000041)
[2025-10-28T05:03:58.494Z] [LOG] 📋 Record ID: 8589f19e-8ada-455f-b5a6-06dabb1411e7
[2025-10-28T05:03:58.494Z] [LOG] 
======================================================================
[2025-10-28T05:03:58.495Z] [LOG] 🧮 CALCULATING PAYROLL: Office Team null (EMP000041)
[2025-10-28T05:03:58.495Z] [LOG] ======================================================================
[2025-10-28T05:03:59.305Z] [LOG] 🔍 Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-28T05:03:59.305Z] [LOG]    Total components: 13
[2025-10-28T05:03:59.305Z] [LOG]    Applicable components: 13
[2025-10-28T05:03:59.305Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-28T05:04:00.123Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:04:00.124Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:04:00.325Z] [LOG] 📊 Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:00.536Z] [LOG] 📊 Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:00.743Z] [LOG] 📊 Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:00.743Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:04:00.744Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:04:01.156Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:04:01.156Z] [LOG]    👤 Employee: Office Team null (EMP000041)
[2025-10-28T05:04:01.156Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:01.157Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:04:01.157Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-28T05:04:01.157Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:04:01.371Z] [LOG] 
   💵 Pre-calculated Rates for Office Team null (EMP000041):
[2025-10-28T05:04:01.371Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-28T05:04:01.372Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-28T05:04:01.373Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-28T05:04:01.373Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:04:01.374Z] [LOG] 
   📊 Full Period Working Days for Office Team null (EMP000041):
[2025-10-28T05:04:01.374Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:01.375Z] [LOG] 
   📊 Working Days for Expected Calculation for Office Team null (EMP000041):
[2025-10-28T05:04:01.376Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:04:01.376Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:01.578Z] [LOG] 
   ⏰ Calculating Completed Hours for Office Team null (EMP000041) - All completed sessions:
[2025-10-28T05:04:01.579Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:01.581Z] [LOG]       Total completed sessions found: 0
[2025-10-28T05:04:01.785Z] [LOG] 
      📊 Aggregated Totals for Office Team null (EMP000041):
[2025-10-28T05:04:01.786Z] [LOG]          Weekday: 0.00h
[2025-10-28T05:04:01.786Z] [LOG]          Saturday: 0.00h
[2025-10-28T05:04:01.787Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:04:01.787Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:04:01.788Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Office Team null (EMP000041) - completed sessions only:
[2025-10-28T05:04:01.789Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:04:01.790Z] [LOG]       Saturday: 34.00h
[2025-10-28T05:04:01.790Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:01.791Z] [LOG]       Total Expected: 212.50h
[2025-10-28T05:04:01.792Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Office Team null (EMP000041) - completed sessions only:
[2025-10-28T05:04:01.793Z] [LOG]       Weekday: 0.00h
[2025-10-28T05:04:01.794Z] [LOG]       Saturday: 0.00h
[2025-10-28T05:04:01.795Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:01.798Z] [LOG]       Total Actual: 0.00h
[2025-10-28T05:04:01.799Z] [LOG] 
   💵 EXPECTED Earned Salary for Office Team null (EMP000041) - until NOW:
[2025-10-28T05:04:01.800Z] [LOG]       Weekday: 178.50h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:01.802Z] [LOG]       Saturday: 34.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:01.802Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:01.803Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:01.804Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-28T05:04:01.804Z] [LOG] 
   💵 ACTUAL Earned Salary for Office Team null (EMP000041) - including live session:
[2025-10-28T05:04:01.805Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:01.805Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:01.806Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:01.806Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:01.807Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T05:04:01.807Z] [LOG] 
   📊 FINAL CALCULATION for Office Team null (EMP000041):
[2025-10-28T05:04:01.808Z] [LOG]       Calculated At: Oct 28, 2025, 10:34:01
[2025-10-28T05:04:01.808Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-28T05:04:01.808Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T05:04:01.809Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:01.809Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-28T05:04:01.809Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:04:01.809Z] [LOG]       ✅ No deduction - Office Team null worked all expected hours!
[2025-10-28T05:04:01.810Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:04:01.810Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-28T05:04:01.810Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:04:01.811Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T05:04:01.811Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:04:01.811Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:04:01.812Z] [LOG]    Gross Salary: 0
[2025-10-28T05:04:01.812Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:04:01.812Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:04:01.813Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:01.813Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:04:01.814Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:01.814Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:04:01.814Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:01.814Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:04:01.815Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:01.815Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:04:01.815Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:01.815Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:04:01.815Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:01.816Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:04:01.816Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:01.816Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:04:01.817Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:01.817Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:04:01.817Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:01.817Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:04:01.817Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:01.818Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:04:01.818Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T05:04:01.818Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:04:01.818Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:04:01.819Z] [LOG] 💰 GROSS CALCULATION for Office Team null:
[2025-10-28T05:04:01.819Z] [LOG]    Base Salary: 1
[2025-10-28T05:04:01.819Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:04:01.819Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:04:01.819Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:01.820Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:04:01.820Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:01.820Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:04:01.820Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:02.033Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:04:02.034Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:02.034Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:04:02.035Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:04:02.036Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:04:02.036Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:04:02.037Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:04:02.037Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T05:04:02.038Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:04:02.039Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:04:02.039Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:02.040Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:04:02.041Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:04:02.042Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T05:04:02.042Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:04:02.043Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T05:04:02.044Z] [LOG] 
💾 Database Update:
[2025-10-28T05:04:02.044Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:04:02.045Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:04:02.261Z] [LOG] 
📝 Components to save:
[2025-10-28T05:04:02.262Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T05:04:02.263Z] [LOG]    Deduction components: 0
[2025-10-28T05:04:02.264Z] [LOG] Creating components for record 8589f19e-8ada-455f-b5a6-06dabb1411e7: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-28T05:04:02.688Z] [LOG] ✅ Financial balances updated successfully for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:02.688Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:04:02.688Z] [LOG] 
======================================================================
[2025-10-28T05:04:02.688Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Office Team null
[2025-10-28T05:04:02.689Z] [LOG] ======================================================================
[2025-10-28T05:04:02.689Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-28T05:04:02.689Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T05:04:02.689Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T05:04:02.689Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:02.690Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:02.690Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:04:02.690Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:02.690Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T05:04:02.690Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:02.691Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:04:02.691Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:04:02.691Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:04:02.691Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:04:02.691Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-28T05:04:02.691Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:02.692Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:02.692Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T05:04:02.692Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:04:02.692Z] [LOG] ======================================================================

[2025-10-28T05:04:02.692Z] [LOG] ✅ Office Team null: Calculation completed successfully
[2025-10-28T05:04:02.693Z] [LOG] 📊 Progress: 14/34 (41.2%)
[2025-10-28T05:04:02.693Z] [LOG] 
🧮 Processing: customer null (EMP000036)
[2025-10-28T05:04:02.693Z] [LOG] 📋 Record ID: 89af0137-995c-4b74-86a6-919ae00cc110
[2025-10-28T05:04:02.693Z] [LOG] 
======================================================================
[2025-10-28T05:04:02.694Z] [LOG] 🧮 CALCULATING PAYROLL: customer null (EMP000036)
[2025-10-28T05:04:02.694Z] [LOG] ======================================================================
[2025-10-28T05:04:03.527Z] [LOG] 🔍 Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-28T05:04:03.569Z] [LOG]    Total components: 13
[2025-10-28T05:04:03.603Z] [LOG]    Applicable components: 13
[2025-10-28T05:04:03.604Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-28T05:04:04.430Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:04:04.430Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:04:04.641Z] [LOG] 📊 Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:04.850Z] [LOG] 📊 Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:05.059Z] [LOG] 📊 Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:05.060Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:04:05.061Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:04:05.480Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:04:05.480Z] [LOG]    👤 Employee: customer null (EMP000036)
[2025-10-28T05:04:05.480Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:05.481Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:04:05.481Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-28T05:04:05.481Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:04:05.684Z] [LOG] 
   💵 Pre-calculated Rates for customer null (EMP000036):
[2025-10-28T05:04:05.685Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-28T05:04:05.686Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-28T05:04:05.686Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-28T05:04:05.687Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:04:05.687Z] [LOG] 
   📊 Full Period Working Days for customer null (EMP000036):
[2025-10-28T05:04:05.688Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:05.689Z] [LOG] 
   📊 Working Days for Expected Calculation for customer null (EMP000036):
[2025-10-28T05:04:05.689Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:04:05.690Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:05.901Z] [LOG] 
   ⏰ Calculating Completed Hours for customer null (EMP000036) - All completed sessions:
[2025-10-28T05:04:05.901Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:05.901Z] [LOG]       Total completed sessions found: 0
[2025-10-28T05:04:06.421Z] [LOG] 
      📊 Aggregated Totals for customer null (EMP000036):
[2025-10-28T05:04:06.422Z] [LOG]          Weekday: 0.00h
[2025-10-28T05:04:06.422Z] [LOG]          Saturday: 0.00h
[2025-10-28T05:04:06.423Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:04:06.423Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:04:06.424Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for customer null (EMP000036) - completed sessions only:
[2025-10-28T05:04:06.424Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:04:06.425Z] [LOG]       Saturday: 34.00h
[2025-10-28T05:04:06.425Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:06.425Z] [LOG]       Total Expected: 212.50h
[2025-10-28T05:04:06.426Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for customer null (EMP000036) - completed sessions only:
[2025-10-28T05:04:06.426Z] [LOG]       Weekday: 0.00h
[2025-10-28T05:04:06.426Z] [LOG]       Saturday: 0.00h
[2025-10-28T05:04:06.426Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:06.427Z] [LOG]       Total Actual: 0.00h
[2025-10-28T05:04:06.427Z] [LOG] 
   💵 EXPECTED Earned Salary for customer null (EMP000036) - until NOW:
[2025-10-28T05:04:06.427Z] [LOG]       Weekday: 178.50h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:06.428Z] [LOG]       Saturday: 34.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:06.428Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:06.428Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:06.428Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-28T05:04:06.428Z] [LOG] 
   💵 ACTUAL Earned Salary for customer null (EMP000036) - including live session:
[2025-10-28T05:04:06.430Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:06.431Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:06.431Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:06.431Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:06.431Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T05:04:06.432Z] [LOG] 
   📊 FINAL CALCULATION for customer null (EMP000036):
[2025-10-28T05:04:06.432Z] [LOG]       Calculated At: Oct 28, 2025, 10:34:06
[2025-10-28T05:04:06.433Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-28T05:04:06.433Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T05:04:06.433Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:06.433Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-28T05:04:06.434Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:04:06.434Z] [LOG]       ✅ No deduction - customer null worked all expected hours!
[2025-10-28T05:04:06.434Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:04:06.434Z] [LOG]    Base Salary (Full): Rs.NaN
[2025-10-28T05:04:06.435Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:04:06.435Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T05:04:06.435Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:04:06.435Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:04:06.436Z] [LOG]    Gross Salary: 0
[2025-10-28T05:04:06.436Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:04:06.436Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:04:06.436Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:06.436Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:04:06.437Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:06.437Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:04:06.437Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:06.437Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:04:06.437Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:06.438Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:04:06.438Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:06.438Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:04:06.438Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:06.439Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:04:06.439Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:06.439Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:04:06.439Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:06.440Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:04:06.441Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:06.441Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:04:06.441Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:06.442Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:04:06.443Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T05:04:06.443Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:04:06.444Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:04:06.444Z] [LOG] 💰 GROSS CALCULATION for customer null:
[2025-10-28T05:04:06.444Z] [LOG]    Base Salary: 0
[2025-10-28T05:04:06.445Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:04:06.445Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:04:06.445Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:06.450Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:04:06.450Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:06.451Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:04:06.451Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:06.665Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:04:06.666Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:06.666Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:04:06.667Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:04:06.668Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:04:06.668Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:04:06.669Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:04:06.669Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T05:04:06.670Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:04:06.671Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:04:06.671Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:06.672Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:04:06.673Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:04:06.673Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T05:04:06.674Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:04:06.674Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T05:04:06.675Z] [LOG] 
💾 Database Update:
[2025-10-28T05:04:06.676Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:04:06.676Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:04:06.883Z] [LOG] 
📝 Components to save:
[2025-10-28T05:04:06.884Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T05:04:06.884Z] [LOG]    Deduction components: 0
[2025-10-28T05:04:06.884Z] [LOG] Creating components for record 89af0137-995c-4b74-86a6-919ae00cc110: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-28T05:04:07.308Z] [LOG] ✅ Financial balances updated successfully for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:07.309Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:04:07.309Z] [LOG] 
======================================================================
[2025-10-28T05:04:07.310Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: customer null
[2025-10-28T05:04:07.311Z] [LOG] ======================================================================
[2025-10-28T05:04:07.311Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-28T05:04:07.312Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T05:04:07.313Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T05:04:07.314Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:07.314Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:07.315Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:04:07.316Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:07.317Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T05:04:07.317Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:07.318Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:04:07.318Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:04:07.319Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:04:07.320Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:04:07.321Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-28T05:04:07.321Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:07.322Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:07.322Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T05:04:07.323Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:04:07.324Z] [LOG] ======================================================================

[2025-10-28T05:04:07.325Z] [LOG] ✅ customer null: Calculation completed successfully
[2025-10-28T05:04:07.326Z] [LOG] 📊 Progress: 15/34 (44.1%)
[2025-10-28T05:04:07.326Z] [LOG] 
🧮 Processing: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-28T05:04:07.327Z] [LOG] 📋 Record ID: 9052a6c8-cf21-4df6-8bd7-0b6cc1dc3889
[2025-10-28T05:04:07.328Z] [LOG] 
======================================================================
[2025-10-28T05:04:07.328Z] [LOG] 🧮 CALCULATING PAYROLL: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-28T05:04:07.331Z] [LOG] ======================================================================
[2025-10-28T05:04:08.142Z] [LOG] 🔍 Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-28T05:04:08.142Z] [LOG]    Total components: 13
[2025-10-28T05:04:08.144Z] [LOG]    Applicable components: 13
[2025-10-28T05:04:08.145Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T05:04:14.760Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:04:14.760Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:04:14.969Z] [LOG] 📊 Found 0 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:15.169Z] [LOG] 📊 Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:15.373Z] [LOG] 📊 Found 0 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:15.374Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:04:15.374Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:04:15.784Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:04:15.784Z] [LOG]    👤 Employee: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-28T05:04:15.784Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:15.785Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:04:15.785Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T05:04:15.785Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:04:15.985Z] [LOG] 
   💵 Pre-calculated Rates for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-28T05:04:15.985Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-28T05:04:15.985Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-28T05:04:15.985Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-28T05:04:15.986Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:04:15.986Z] [LOG] 
   📊 Full Period Working Days for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-28T05:04:15.986Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:15.986Z] [LOG] 
   📊 Working Days for Expected Calculation for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-28T05:04:15.987Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:04:15.988Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:16.193Z] [LOG] 
   ⏰ Calculating Completed Hours for Ashen Nirmal Wadugodapitiya null (EMP000046) - All completed sessions:
[2025-10-28T05:04:16.193Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:16.194Z] [LOG]       Total completed sessions found: 24
[2025-10-28T05:04:16.194Z] [LOG] 
      📋 Attendance Breakdown for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-28T05:04:16.194Z] [LOG]          1. 2025-09-01 (Weekday): 8.50h
[2025-10-28T05:04:16.194Z] [LOG]          2. 2025-09-02 (Weekday): 8.50h
[2025-10-28T05:04:16.195Z] [LOG]          3. 2025-09-03 (Weekday): 8.50h
[2025-10-28T05:04:16.195Z] [LOG]          4. 2025-09-04 (Weekday): 8.50h
[2025-10-28T05:04:16.195Z] [LOG]          5. 2025-09-06 (Saturday): 4.50h
[2025-10-28T05:04:16.195Z] [LOG]          6. 2025-09-08 (Weekday): 7.67h
[2025-10-28T05:04:16.195Z] [LOG]          7. 2025-09-09 (Weekday): 8.50h
[2025-10-28T05:04:16.196Z] [LOG]          8. 2025-09-10 (Weekday): 8.50h
[2025-10-28T05:04:16.196Z] [LOG]          9. 2025-09-11 (Weekday): 8.50h
[2025-10-28T05:04:16.196Z] [LOG]          10. 2025-09-12 (Weekday): 8.50h
[2025-10-28T05:04:16.196Z] [LOG]          11. 2025-09-13 (Saturday): 4.50h
[2025-10-28T05:04:16.196Z] [LOG]          12. 2025-09-15 (Weekday): 8.50h
[2025-10-28T05:04:16.197Z] [LOG]          13. 2025-09-16 (Weekday): 8.50h
[2025-10-28T05:04:16.197Z] [LOG]          14. 2025-09-17 (Weekday): 8.50h
[2025-10-28T05:04:16.197Z] [LOG]          15. 2025-09-18 (Weekday): 8.50h
[2025-10-28T05:04:16.197Z] [LOG]          16. 2025-09-19 (Weekday): 8.50h
[2025-10-28T05:04:16.198Z] [LOG]          17. 2025-09-20 (Saturday): 4.50h
[2025-10-28T05:04:16.198Z] [LOG]          18. 2025-09-22 (Weekday): 8.50h
[2025-10-28T05:04:16.198Z] [LOG]          19. 2025-09-23 (Weekday): 8.50h
[2025-10-28T05:04:16.198Z] [LOG]          20. 2025-09-24 (Weekday): 8.50h
[2025-10-28T05:04:16.198Z] [LOG]          21. 2025-09-25 (Weekday): 8.50h
[2025-10-28T05:04:16.199Z] [LOG]          22. 2025-09-26 (Weekday): 8.50h
[2025-10-28T05:04:16.199Z] [LOG]          23. 2025-09-27 (Saturday): 4.50h
[2025-10-28T05:04:16.199Z] [LOG]          24. 2025-09-29 (Weekday): 8.50h
[2025-10-28T05:04:16.401Z] [LOG] 
      📊 Aggregated Totals for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-28T05:04:16.402Z] [LOG]          Weekday: 169.17h
[2025-10-28T05:04:16.402Z] [LOG]          Saturday: 18.00h
[2025-10-28T05:04:16.402Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:04:16.402Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:04:16.402Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ashen Nirmal Wadugodapitiya null (EMP000046) - completed sessions only:
[2025-10-28T05:04:16.403Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:04:16.403Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:04:16.403Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:16.403Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:04:16.404Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ashen Nirmal Wadugodapitiya null (EMP000046) - completed sessions only:
[2025-10-28T05:04:16.404Z] [LOG]       Weekday: 169.17h
[2025-10-28T05:04:16.404Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:04:16.404Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:16.405Z] [LOG]       Total Actual: 187.17h
[2025-10-28T05:04:16.405Z] [LOG] 
   💵 EXPECTED Earned Salary for Ashen Nirmal Wadugodapitiya null (EMP000046) - until NOW:
[2025-10-28T05:04:16.405Z] [LOG]       Weekday: 178.50h × Rs.235.29 = Rs.41999.26
[2025-10-28T05:04:16.405Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-28T05:04:16.405Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:16.406Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:16.406Z] [LOG]       Total Expected Earned: Rs.49999.18
[2025-10-28T05:04:16.406Z] [LOG] 
   💵 ACTUAL Earned Salary for Ashen Nirmal Wadugodapitiya null (EMP000046) - including live session:
[2025-10-28T05:04:16.406Z] [LOG]       Weekday: 169.17h × Rs.235.29 = Rs.39804.01
[2025-10-28T05:04:16.406Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-28T05:04:16.407Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:16.407Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:16.407Z] [LOG]       Total Actual Earned: Rs.47803.93
[2025-10-28T05:04:16.407Z] [LOG] 
   📊 FINAL CALCULATION for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-28T05:04:16.408Z] [LOG]       Calculated At: Oct 28, 2025, 10:34:16
[2025-10-28T05:04:16.408Z] [LOG]       Expected Earned: Rs.49999.18
[2025-10-28T05:04:16.408Z] [LOG]       Actual Earned: Rs.47803.93
[2025-10-28T05:04:16.409Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:16.409Z] [LOG]       Attendance Deduction: Rs.2195.26
[2025-10-28T05:04:16.409Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:04:16.409Z] [LOG]       📉 Shortfall for Ashen Nirmal Wadugodapitiya null: 9.33 hours (4.39% of expected)
[2025-10-28T05:04:16.409Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:04:16.410Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:04:16.410Z] [LOG]    Actual Earned Base: Rs.47803.93
[2025-10-28T05:04:16.410Z] [LOG]    Attendance Shortfall: Rs.2195.26
[2025-10-28T05:04:16.410Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:04:16.411Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:04:16.411Z] [LOG]    Gross Salary: 47803.929299999996
[2025-10-28T05:04:16.411Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:04:16.411Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:04:16.411Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:16.412Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:04:16.412Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:16.412Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:04:16.413Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:16.413Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:04:16.413Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:16.413Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:04:16.414Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:16.414Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:04:16.414Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:16.414Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:04:16.415Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:16.415Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:04:16.415Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:16.415Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:04:16.415Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:16.416Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:04:16.416Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:16.416Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:04:16.416Z] [LOG]    EPF/ETF calculated on: Rs.47803.93
[2025-10-28T05:04:16.417Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:04:16.417Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:04:16.417Z] [LOG] 💰 GROSS CALCULATION for Ashen Nirmal Wadugodapitiya null:
[2025-10-28T05:04:16.417Z] [LOG]    Base Salary: 50000
[2025-10-28T05:04:16.417Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:04:16.417Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:04:16.418Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:16.418Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:04:16.418Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:16.419Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:04:16.419Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:16.624Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:04:16.624Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:16.624Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:04:16.625Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:04:16.625Z] [LOG]    Actual Earned Base: Rs.47803.93
[2025-10-28T05:04:16.625Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:04:16.625Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:04:16.625Z] [LOG]    = Gross Salary: Rs.47803.93
[2025-10-28T05:04:16.626Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:04:16.626Z] [LOG]    Attendance Shortfall (Info): Rs.2195.26
[2025-10-28T05:04:16.626Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:04:16.626Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:16.626Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:04:16.627Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:04:16.627Z] [LOG]    Gross Salary: Rs.47803.93
[2025-10-28T05:04:16.627Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:04:16.627Z] [LOG]    = NET SALARY: Rs.47803.93
[2025-10-28T05:04:16.628Z] [LOG] 
💾 Database Update:
[2025-10-28T05:04:16.628Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:04:16.628Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:04:16.845Z] [LOG] 
📝 Components to save:
[2025-10-28T05:04:16.846Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:04:16.846Z] [LOG]    Deduction components: 1
[2025-10-28T05:04:16.847Z] [LOG] Creating components for record 9052a6c8-cf21-4df6-8bd7-0b6cc1dc3889: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:04:16.847Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 47803.929299999996
}
[2025-10-28T05:04:17.056Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:04:17.275Z] [LOG] Created payroll_record_component: 95b34f0f-9da9-4152-99b7-e56b6f4a6a68 for Base Salary
[2025-10-28T05:04:17.275Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 2195.2557000000015
}
[2025-10-28T05:04:17.485Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:04:17.710Z] [LOG] Created payroll_record_component: 6fe58300-c2a8-4629-8b2e-172bf83ff2be for Attendance Shortfall (Info)
[2025-10-28T05:04:18.112Z] [LOG] ✅ Financial balances updated successfully for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:18.112Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:04:18.112Z] [LOG] 
======================================================================
[2025-10-28T05:04:18.113Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ashen Nirmal Wadugodapitiya null
[2025-10-28T05:04:18.113Z] [LOG] ======================================================================
[2025-10-28T05:04:18.113Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:04:18.113Z] [LOG]    Actual Earned Base (Attendance-based): Rs.47803.93
[2025-10-28T05:04:18.114Z] [LOG]    Attendance Shortfall: Rs.2195.26
[2025-10-28T05:04:18.114Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:18.114Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:18.114Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:04:18.114Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:18.115Z] [LOG]    GROSS SALARY: Rs.47803.93
[2025-10-28T05:04:18.115Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:18.115Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:04:18.115Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:04:18.116Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:04:18.116Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:04:18.116Z] [LOG]       - Attendance Shortfall (Info): Rs.2195.26
[2025-10-28T05:04:18.116Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:18.116Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:18.117Z] [LOG]    NET SALARY: Rs.47803.93
[2025-10-28T05:04:18.117Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:04:18.117Z] [LOG] ======================================================================

[2025-10-28T05:04:18.117Z] [LOG] ✅ Ashen Nirmal Wadugodapitiya null: Calculation completed successfully
[2025-10-28T05:04:18.118Z] [LOG] 📊 Progress: 16/34 (47.1%)
[2025-10-28T05:04:18.118Z] [LOG] 
🧮 Processing: Chamodi null (EMP000032)
[2025-10-28T05:04:18.118Z] [LOG] 📋 Record ID: 92dd1386-415e-4ddb-8f3c-5adf8330826b
[2025-10-28T05:04:18.119Z] [LOG] 
======================================================================
[2025-10-28T05:04:18.119Z] [LOG] 🧮 CALCULATING PAYROLL: Chamodi null (EMP000032)
[2025-10-28T05:04:18.119Z] [LOG] ======================================================================
[2025-10-28T05:04:18.956Z] [LOG] 🔍 Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-28T05:04:18.956Z] [LOG]    Total components: 13
[2025-10-28T05:04:18.956Z] [LOG]    Applicable components: 13
[2025-10-28T05:04:18.957Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T05:04:21.808Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:04:21.809Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:04:22.013Z] [LOG] 📊 Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:22.217Z] [LOG] 📊 Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:22.423Z] [LOG] 📊 Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:22.424Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:04:22.425Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:04:22.836Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:04:22.837Z] [LOG]    👤 Employee: Chamodi null (EMP000032)
[2025-10-28T05:04:22.838Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:22.838Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:04:22.839Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T05:04:22.840Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:04:23.049Z] [LOG] 
   💵 Pre-calculated Rates for Chamodi null (EMP000032):
[2025-10-28T05:04:23.050Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-28T05:04:23.050Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-28T05:04:23.051Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-28T05:04:23.051Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:04:23.052Z] [LOG] 
   📊 Full Period Working Days for Chamodi null (EMP000032):
[2025-10-28T05:04:23.053Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:23.053Z] [LOG] 
   📊 Working Days for Expected Calculation for Chamodi null (EMP000032):
[2025-10-28T05:04:23.054Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:04:23.054Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:23.257Z] [LOG] 
   ⏰ Calculating Completed Hours for Chamodi null (EMP000032) - All completed sessions:
[2025-10-28T05:04:23.258Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:23.259Z] [LOG]       Total completed sessions found: 24
[2025-10-28T05:04:23.259Z] [LOG] 
      📋 Attendance Breakdown for Chamodi null (EMP000032):
[2025-10-28T05:04:23.260Z] [LOG]          1. 2025-09-02 (Weekday): 8.07h
[2025-10-28T05:04:23.261Z] [LOG]          2. 2025-09-03 (Weekday): 8.24h
[2025-10-28T05:04:23.261Z] [LOG]          3. 2025-09-04 (Weekday): 7.90h
[2025-10-28T05:04:23.262Z] [LOG]          4. 2025-09-06 (Saturday): 4.08h
[2025-10-28T05:04:23.263Z] [LOG]          5. 2025-09-08 (Weekday): 7.67h
[2025-10-28T05:04:23.264Z] [LOG]          6. 2025-09-09 (Weekday): 8.23h
[2025-10-28T05:04:23.265Z] [LOG]          7. 2025-09-10 (Weekday): 8.18h
[2025-10-28T05:04:23.266Z] [LOG]          8. 2025-09-11 (Weekday): 8.06h
[2025-10-28T05:04:23.266Z] [LOG]          9. 2025-09-12 (Weekday): 4.25h
[2025-10-28T05:04:23.267Z] [LOG]          10. 2025-09-13 (Saturday): 4.50h
[2025-10-28T05:04:23.267Z] [LOG]          11. 2025-09-15 (Weekday): 8.50h
[2025-10-28T05:04:23.268Z] [LOG]          12. 2025-09-16 (Weekday): 5.58h
[2025-10-28T05:04:23.269Z] [LOG]          13. 2025-09-17 (Weekday): 8.27h
[2025-10-28T05:04:23.269Z] [LOG]          14. 2025-09-18 (Weekday): 7.16h
[2025-10-28T05:04:23.270Z] [LOG]          15. 2025-09-19 (Weekday): 6.91h
[2025-10-28T05:04:23.270Z] [LOG]          16. 2025-09-20 (Saturday): 3.83h
[2025-10-28T05:04:23.271Z] [LOG]          17. 2025-09-22 (Weekday): 7.95h
[2025-10-28T05:04:23.272Z] [LOG]          18. 2025-09-23 (Weekday): 7.97h
[2025-10-28T05:04:23.272Z] [LOG]          19. 2025-09-24 (Weekday): 7.71h
[2025-10-28T05:04:23.273Z] [LOG]          20. 2025-09-25 (Weekday): 7.69h
[2025-10-28T05:04:23.274Z] [LOG]          21. 2025-09-26 (Weekday): 7.42h
[2025-10-28T05:04:23.274Z] [LOG]          22. 2025-09-27 (Saturday): 4.04h
[2025-10-28T05:04:23.275Z] [LOG]          23. 2025-09-29 (Weekday): 8.50h
[2025-10-28T05:04:23.275Z] [LOG]          24. 2025-09-30 (Weekday): 8.31h
[2025-10-28T05:04:23.482Z] [LOG] 
      📊 Aggregated Totals for Chamodi null (EMP000032):
[2025-10-28T05:04:23.483Z] [LOG]          Weekday: 152.57h
[2025-10-28T05:04:23.484Z] [LOG]          Saturday: 16.45h
[2025-10-28T05:04:23.484Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:04:23.484Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:04:23.485Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Chamodi null (EMP000032) - completed sessions only:
[2025-10-28T05:04:23.485Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:04:23.486Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:04:23.486Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:23.486Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:04:23.487Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Chamodi null (EMP000032) - completed sessions only:
[2025-10-28T05:04:23.487Z] [LOG]       Weekday: 152.57h
[2025-10-28T05:04:23.487Z] [LOG]       Saturday: 16.45h
[2025-10-28T05:04:23.488Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:23.488Z] [LOG]       Total Actual: 169.02h
[2025-10-28T05:04:23.489Z] [LOG] 
   💵 EXPECTED Earned Salary for Chamodi null (EMP000032) - until NOW:
[2025-10-28T05:04:23.489Z] [LOG]       Weekday: 178.50h × Rs.235.29 = Rs.41999.26
[2025-10-28T05:04:23.489Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-28T05:04:23.490Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:23.490Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:23.490Z] [LOG]       Total Expected Earned: Rs.49999.18
[2025-10-28T05:04:23.491Z] [LOG] 
   💵 ACTUAL Earned Salary for Chamodi null (EMP000032) - including live session:
[2025-10-28T05:04:23.491Z] [LOG]       Weekday: 152.57h × Rs.235.29 = Rs.35898.20
[2025-10-28T05:04:23.492Z] [LOG]       Saturday: 16.45h × Rs.444.44 = Rs.7311.04
[2025-10-28T05:04:23.492Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:23.492Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:23.493Z] [LOG]       Total Actual Earned: Rs.43209.23
[2025-10-28T05:04:23.493Z] [LOG] 
   📊 FINAL CALCULATION for Chamodi null (EMP000032):
[2025-10-28T05:04:23.494Z] [LOG]       Calculated At: Oct 28, 2025, 10:34:23
[2025-10-28T05:04:23.494Z] [LOG]       Expected Earned: Rs.49999.18
[2025-10-28T05:04:23.494Z] [LOG]       Actual Earned: Rs.43209.23
[2025-10-28T05:04:23.495Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:23.495Z] [LOG]       Attendance Deduction: Rs.6789.95
[2025-10-28T05:04:23.496Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:04:23.497Z] [LOG]       📉 Shortfall for Chamodi null: 27.48 hours (13.58% of expected)
[2025-10-28T05:04:23.497Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:04:23.498Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:04:23.498Z] [LOG]    Actual Earned Base: Rs.43209.23
[2025-10-28T05:04:23.498Z] [LOG]    Attendance Shortfall: Rs.6789.95
[2025-10-28T05:04:23.499Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:04:23.499Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:04:23.499Z] [LOG]    Gross Salary: 43209.2333
[2025-10-28T05:04:23.499Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:04:23.500Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:04:23.500Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:23.500Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:04:23.500Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:23.500Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:04:23.501Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:23.501Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:04:23.501Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:23.501Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:04:23.501Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:23.502Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:04:23.502Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:23.502Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:04:23.502Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:23.502Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:04:23.502Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:23.503Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:04:23.503Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:23.503Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:04:23.503Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:23.503Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:04:23.504Z] [LOG]    EPF/ETF calculated on: Rs.43209.23
[2025-10-28T05:04:23.504Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:04:23.504Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:04:23.504Z] [LOG] 💰 GROSS CALCULATION for Chamodi null:
[2025-10-28T05:04:23.504Z] [LOG]    Base Salary: 50000
[2025-10-28T05:04:23.504Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:04:23.505Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:04:23.505Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:23.505Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:04:23.505Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:23.505Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:04:23.505Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:23.706Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:04:23.706Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:23.706Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:04:23.706Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:04:23.707Z] [LOG]    Actual Earned Base: Rs.43209.23
[2025-10-28T05:04:23.707Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:04:23.707Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:04:23.707Z] [LOG]    = Gross Salary: Rs.43209.23
[2025-10-28T05:04:23.708Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:04:23.708Z] [LOG]    Attendance Shortfall (Info): Rs.6789.95
[2025-10-28T05:04:23.708Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:04:23.708Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:23.709Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:04:23.709Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:04:23.709Z] [LOG]    Gross Salary: Rs.43209.23
[2025-10-28T05:04:23.709Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:04:23.709Z] [LOG]    = NET SALARY: Rs.43209.23
[2025-10-28T05:04:23.709Z] [LOG] 
💾 Database Update:
[2025-10-28T05:04:23.709Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:04:23.710Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:04:23.923Z] [LOG] 
📝 Components to save:
[2025-10-28T05:04:23.923Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:04:23.924Z] [LOG]    Deduction components: 1
[2025-10-28T05:04:23.924Z] [LOG] Creating components for record 92dd1386-415e-4ddb-8f3c-5adf8330826b: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:04:23.926Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 43209.2333
}
[2025-10-28T05:04:24.133Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:04:24.341Z] [LOG] Created payroll_record_component: 02f6ece8-e3bf-4d75-81fd-2669b1ca4e63 for Base Salary
[2025-10-28T05:04:24.342Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 6789.951699999998
}
[2025-10-28T05:04:24.547Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:04:24.756Z] [LOG] Created payroll_record_component: 40b7ed94-b45f-4381-99d1-f37ec0246754 for Attendance Shortfall (Info)
[2025-10-28T05:04:25.169Z] [LOG] ✅ Financial balances updated successfully for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:25.170Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:04:25.170Z] [LOG] 
======================================================================
[2025-10-28T05:04:25.171Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chamodi null
[2025-10-28T05:04:25.171Z] [LOG] ======================================================================
[2025-10-28T05:04:25.172Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:04:25.173Z] [LOG]    Actual Earned Base (Attendance-based): Rs.43209.23
[2025-10-28T05:04:25.173Z] [LOG]    Attendance Shortfall: Rs.6789.95
[2025-10-28T05:04:25.174Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:25.174Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:25.175Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:04:25.176Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:25.177Z] [LOG]    GROSS SALARY: Rs.43209.23
[2025-10-28T05:04:25.177Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:25.178Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:04:25.180Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:04:25.181Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:04:25.182Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:04:25.182Z] [LOG]       - Attendance Shortfall (Info): Rs.6789.95
[2025-10-28T05:04:25.183Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:25.184Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:25.184Z] [LOG]    NET SALARY: Rs.43209.23
[2025-10-28T05:04:25.185Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:04:25.185Z] [LOG] ======================================================================

[2025-10-28T05:04:25.186Z] [LOG] ✅ Chamodi null: Calculation completed successfully
[2025-10-28T05:04:25.187Z] [LOG] 📊 Progress: 17/34 (50.0%)
[2025-10-28T05:04:25.187Z] [LOG] 
🧮 Processing: Shandeep null (EMP000034)
[2025-10-28T05:04:25.188Z] [LOG] 📋 Record ID: 94c893e1-53f3-4b5c-83ad-0e1d04458555
[2025-10-28T05:04:25.189Z] [LOG] 
======================================================================
[2025-10-28T05:04:25.190Z] [LOG] 🧮 CALCULATING PAYROLL: Shandeep null (EMP000034)
[2025-10-28T05:04:25.190Z] [LOG] ======================================================================
[2025-10-28T05:04:26.014Z] [LOG] 🔍 Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-28T05:04:26.015Z] [LOG]    Total components: 13
[2025-10-28T05:04:26.016Z] [LOG]    Applicable components: 13
[2025-10-28T05:04:26.016Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T05:04:28.895Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:04:28.896Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:04:29.103Z] [LOG] 📊 Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:29.309Z] [LOG] 📊 Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:29.586Z] [LOG] 📊 Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:29.587Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:04:29.588Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:04:30.032Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:04:30.033Z] [LOG]    👤 Employee: Shandeep null (EMP000034)
[2025-10-28T05:04:30.033Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:30.034Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:04:30.034Z] [LOG]    Base Salary (Full Month): Rs.80000.00
[2025-10-28T05:04:30.035Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:04:30.252Z] [LOG] 
   💵 Pre-calculated Rates for Shandeep null (EMP000034):
[2025-10-28T05:04:30.253Z] [LOG]       Daily Salary: Rs.3200.00
[2025-10-28T05:04:30.253Z] [LOG]       Weekday Hourly Rate: Rs.376.47
[2025-10-28T05:04:30.254Z] [LOG]       Saturday Hourly Rate: Rs.711.11
[2025-10-28T05:04:30.255Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:04:30.255Z] [LOG] 
   📊 Full Period Working Days for Shandeep null (EMP000034):
[2025-10-28T05:04:30.256Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:30.256Z] [LOG] 
   📊 Working Days for Expected Calculation for Shandeep null (EMP000034):
[2025-10-28T05:04:30.257Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:04:30.258Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:30.482Z] [LOG] 
   ⏰ Calculating Completed Hours for Shandeep null (EMP000034) - All completed sessions:
[2025-10-28T05:04:30.483Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:30.483Z] [LOG]       Total completed sessions found: 20
[2025-10-28T05:04:30.484Z] [LOG] 
      📋 Attendance Breakdown for Shandeep null (EMP000034):
[2025-10-28T05:04:30.485Z] [LOG]          1. 2025-09-01 (Weekday): 8.25h
[2025-10-28T05:04:30.485Z] [LOG]          2. 2025-09-04 (Weekday): 7.75h
[2025-10-28T05:04:30.486Z] [LOG]          3. 2025-09-06 (Saturday): 4.50h
[2025-10-28T05:04:30.486Z] [LOG]          4. 2025-09-08 (Weekday): 7.67h
[2025-10-28T05:04:30.487Z] [LOG]          5. 2025-09-09 (Weekday): 8.17h
[2025-10-28T05:04:30.488Z] [LOG]          6. 2025-09-10 (Weekday): 8.00h
[2025-10-28T05:04:30.488Z] [LOG]          7. 2025-09-11 (Weekday): 8.08h
[2025-10-28T05:04:30.489Z] [LOG]          8. 2025-09-12 (Weekday): 7.42h
[2025-10-28T05:04:30.490Z] [LOG]          9. 2025-09-13 (Saturday): 4.50h
[2025-10-28T05:04:30.491Z] [LOG]          10. 2025-09-15 (Weekday): 7.50h
[2025-10-28T05:04:30.491Z] [LOG]          11. 2025-09-16 (Weekday): 7.57h
[2025-10-28T05:04:30.492Z] [LOG]          12. 2025-09-17 (Weekday): 8.00h
[2025-10-28T05:04:30.492Z] [LOG]          13. 2025-09-18 (Weekday): 7.67h
[2025-10-28T05:04:30.493Z] [LOG]          14. 2025-09-20 (Saturday): 4.50h
[2025-10-28T05:04:30.494Z] [LOG]          15. 2025-09-22 (Weekday): 7.50h
[2025-10-28T05:04:30.495Z] [LOG]          16. 2025-09-23 (Weekday): 7.22h
[2025-10-28T05:04:30.497Z] [LOG]          17. 2025-09-24 (Weekday): 8.00h
[2025-10-28T05:04:30.497Z] [LOG]          18. 2025-09-25 (Weekday): 7.97h
[2025-10-28T05:04:30.498Z] [LOG]          19. 2025-09-26 (Weekday): 8.00h
[2025-10-28T05:04:30.499Z] [LOG]          20. 2025-09-27 (Saturday): 4.50h
[2025-10-28T05:04:30.708Z] [LOG] 
      📊 Aggregated Totals for Shandeep null (EMP000034):
[2025-10-28T05:04:30.709Z] [LOG]          Weekday: 124.77h
[2025-10-28T05:04:30.710Z] [LOG]          Saturday: 18.00h
[2025-10-28T05:04:30.710Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:04:30.711Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:04:30.713Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Shandeep null (EMP000034) - completed sessions only:
[2025-10-28T05:04:30.715Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:04:30.716Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:04:30.717Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:30.717Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:04:30.718Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Shandeep null (EMP000034) - completed sessions only:
[2025-10-28T05:04:30.719Z] [LOG]       Weekday: 124.77h
[2025-10-28T05:04:30.719Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:04:30.720Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:30.720Z] [LOG]       Total Actual: 142.77h
[2025-10-28T05:04:30.721Z] [LOG] 
   💵 EXPECTED Earned Salary for Shandeep null (EMP000034) - until NOW:
[2025-10-28T05:04:30.722Z] [LOG]       Weekday: 178.50h × Rs.376.47 = Rs.67199.90
[2025-10-28T05:04:30.723Z] [LOG]       Saturday: 18.00h × Rs.711.11 = Rs.12799.98
[2025-10-28T05:04:30.723Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:30.724Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:30.724Z] [LOG]       Total Expected Earned: Rs.79999.88
[2025-10-28T05:04:30.725Z] [LOG] 
   💵 ACTUAL Earned Salary for Shandeep null (EMP000034) - including live session:
[2025-10-28T05:04:30.726Z] [LOG]       Weekday: 124.77h × Rs.376.47 = Rs.46972.16
[2025-10-28T05:04:30.726Z] [LOG]       Saturday: 18.00h × Rs.711.11 = Rs.12799.98
[2025-10-28T05:04:30.727Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:30.727Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:30.728Z] [LOG]       Total Actual Earned: Rs.59772.14
[2025-10-28T05:04:30.731Z] [LOG] 
   📊 FINAL CALCULATION for Shandeep null (EMP000034):
[2025-10-28T05:04:30.732Z] [LOG]       Calculated At: Oct 28, 2025, 10:34:30
[2025-10-28T05:04:30.733Z] [LOG]       Expected Earned: Rs.79999.88
[2025-10-28T05:04:30.733Z] [LOG]       Actual Earned: Rs.59772.14
[2025-10-28T05:04:30.734Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:30.734Z] [LOG]       Attendance Deduction: Rs.20227.73
[2025-10-28T05:04:30.735Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:04:30.736Z] [LOG]       📉 Shortfall for Shandeep null: 53.73 hours (25.28% of expected)
[2025-10-28T05:04:30.736Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:04:30.737Z] [LOG]    Base Salary (Full): Rs.80000.00
[2025-10-28T05:04:30.738Z] [LOG]    Actual Earned Base: Rs.59772.14
[2025-10-28T05:04:30.738Z] [LOG]    Attendance Shortfall: Rs.20227.73
[2025-10-28T05:04:30.739Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:04:30.740Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:04:30.740Z] [LOG]    Gross Salary: 59772.1419
[2025-10-28T05:04:30.741Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:04:30.741Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:04:30.742Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:30.742Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:04:30.743Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:30.744Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:04:30.745Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:30.747Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:04:30.748Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:30.749Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:04:30.749Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:30.750Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:04:30.750Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:30.751Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:04:30.751Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:30.752Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:04:30.753Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:30.753Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:04:30.754Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:30.755Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:04:30.755Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:30.756Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:04:30.756Z] [LOG]    EPF/ETF calculated on: Rs.59772.14
[2025-10-28T05:04:30.756Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:04:30.756Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:04:30.757Z] [LOG] 💰 GROSS CALCULATION for Shandeep null:
[2025-10-28T05:04:30.757Z] [LOG]    Base Salary: 80000
[2025-10-28T05:04:30.758Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:04:30.758Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:04:30.758Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:30.758Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:04:30.759Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:30.759Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:04:30.759Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:30.993Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:04:30.994Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:30.994Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:04:30.995Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:04:30.996Z] [LOG]    Actual Earned Base: Rs.59772.14
[2025-10-28T05:04:30.997Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:04:30.998Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:04:30.999Z] [LOG]    = Gross Salary: Rs.59772.14
[2025-10-28T05:04:30.999Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:04:31.001Z] [LOG]    Attendance Shortfall (Info): Rs.20227.73
[2025-10-28T05:04:31.001Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:04:31.002Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:31.002Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:04:31.003Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:04:31.004Z] [LOG]    Gross Salary: Rs.59772.14
[2025-10-28T05:04:31.004Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:04:31.005Z] [LOG]    = NET SALARY: Rs.59772.14
[2025-10-28T05:04:31.006Z] [LOG] 
💾 Database Update:
[2025-10-28T05:04:31.006Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:04:31.007Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:04:31.233Z] [LOG] 
📝 Components to save:
[2025-10-28T05:04:31.234Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:04:31.234Z] [LOG]    Deduction components: 1
[2025-10-28T05:04:31.235Z] [LOG] Creating components for record 94c893e1-53f3-4b5c-83ad-0e1d04458555: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:04:31.237Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 59772.1419
}
[2025-10-28T05:04:31.470Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:04:31.689Z] [LOG] Created payroll_record_component: 5891a821-18c0-4899-8cf8-b6ca1fc9a3b5 for Base Salary
[2025-10-28T05:04:31.690Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 20227.733099999998
}
[2025-10-28T05:04:31.919Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:04:32.146Z] [LOG] Created payroll_record_component: 4ec66f01-1814-41ff-a4bd-b330587ed134 for Attendance Shortfall (Info)
[2025-10-28T05:04:32.571Z] [LOG] ✅ Financial balances updated successfully for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:32.572Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:04:32.573Z] [LOG] 
======================================================================
[2025-10-28T05:04:32.573Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Shandeep null
[2025-10-28T05:04:32.574Z] [LOG] ======================================================================
[2025-10-28T05:04:32.575Z] [LOG]    Base Salary (Full): Rs.80000.00
[2025-10-28T05:04:32.575Z] [LOG]    Actual Earned Base (Attendance-based): Rs.59772.14
[2025-10-28T05:04:32.576Z] [LOG]    Attendance Shortfall: Rs.20227.73
[2025-10-28T05:04:32.576Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:32.577Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:32.577Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:04:32.578Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:32.580Z] [LOG]    GROSS SALARY: Rs.59772.14
[2025-10-28T05:04:32.581Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:32.582Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:04:32.582Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:04:32.583Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:04:32.584Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:04:32.584Z] [LOG]       - Attendance Shortfall (Info): Rs.20227.73
[2025-10-28T05:04:32.585Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:32.585Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:32.586Z] [LOG]    NET SALARY: Rs.59772.14
[2025-10-28T05:04:32.586Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:04:32.587Z] [LOG] ======================================================================

[2025-10-28T05:04:32.588Z] [LOG] ✅ Shandeep null: Calculation completed successfully
[2025-10-28T05:04:32.588Z] [LOG] 📊 Progress: 18/34 (52.9%)
[2025-10-28T05:04:32.589Z] [LOG] 
🧮 Processing: Rasanga null (EMP000028)
[2025-10-28T05:04:32.590Z] [LOG] 📋 Record ID: 9dda9dfa-609d-42a7-b644-be871eba9d6b
[2025-10-28T05:04:32.590Z] [LOG] 
======================================================================
[2025-10-28T05:04:32.591Z] [LOG] 🧮 CALCULATING PAYROLL: Rasanga null (EMP000028)
[2025-10-28T05:04:32.591Z] [LOG] ======================================================================
[2025-10-28T05:04:33.487Z] [LOG] 🔍 Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-28T05:04:33.487Z] [LOG]    Total components: 13
[2025-10-28T05:04:33.487Z] [LOG]    Applicable components: 13
[2025-10-28T05:04:33.488Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-28T05:04:34.401Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:04:34.402Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:04:34.613Z] [LOG] 📊 Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:34.842Z] [LOG] 📊 Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:35.054Z] [LOG] 📊 Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:35.055Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:04:35.056Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:04:35.495Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:04:35.497Z] [LOG]    👤 Employee: Rasanga null (EMP000028)
[2025-10-28T05:04:35.497Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:35.498Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:04:35.499Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T05:04:35.499Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:04:35.729Z] [LOG] 
   💵 Pre-calculated Rates for Rasanga null (EMP000028):
[2025-10-28T05:04:35.730Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-28T05:04:35.731Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-28T05:04:35.731Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-28T05:04:35.732Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:04:35.732Z] [LOG] 
   📊 Full Period Working Days for Rasanga null (EMP000028):
[2025-10-28T05:04:35.733Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:35.734Z] [LOG] 
   📊 Working Days for Expected Calculation for Rasanga null (EMP000028):
[2025-10-28T05:04:35.734Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:04:35.735Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:35.963Z] [LOG] 
   ⏰ Calculating Completed Hours for Rasanga null (EMP000028) - All completed sessions:
[2025-10-28T05:04:35.964Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:35.965Z] [LOG]       Total completed sessions found: 0
[2025-10-28T05:04:36.182Z] [LOG] 
      📊 Aggregated Totals for Rasanga null (EMP000028):
[2025-10-28T05:04:36.183Z] [LOG]          Weekday: 0.00h
[2025-10-28T05:04:36.183Z] [LOG]          Saturday: 0.00h
[2025-10-28T05:04:36.184Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:04:36.184Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:04:36.185Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Rasanga null (EMP000028) - completed sessions only:
[2025-10-28T05:04:36.186Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:04:36.186Z] [LOG]       Saturday: 34.00h
[2025-10-28T05:04:36.187Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:36.187Z] [LOG]       Total Expected: 212.50h
[2025-10-28T05:04:36.188Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Rasanga null (EMP000028) - completed sessions only:
[2025-10-28T05:04:36.189Z] [LOG]       Weekday: 0.00h
[2025-10-28T05:04:36.190Z] [LOG]       Saturday: 0.00h
[2025-10-28T05:04:36.191Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:36.191Z] [LOG]       Total Actual: 0.00h
[2025-10-28T05:04:36.192Z] [LOG] 
   💵 EXPECTED Earned Salary for Rasanga null (EMP000028) - until NOW:
[2025-10-28T05:04:36.193Z] [LOG]       Weekday: 178.50h × Rs.235.29 = Rs.41999.26
[2025-10-28T05:04:36.193Z] [LOG]       Saturday: 34.00h × Rs.235.29 = Rs.7999.86
[2025-10-28T05:04:36.194Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:36.194Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:36.197Z] [LOG]       Total Expected Earned: Rs.49999.13
[2025-10-28T05:04:36.198Z] [LOG] 
   💵 ACTUAL Earned Salary for Rasanga null (EMP000028) - including live session:
[2025-10-28T05:04:36.198Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-28T05:04:36.199Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-28T05:04:36.199Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:36.200Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:36.201Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T05:04:36.202Z] [LOG] 
   📊 FINAL CALCULATION for Rasanga null (EMP000028):
[2025-10-28T05:04:36.203Z] [LOG]       Calculated At: Oct 28, 2025, 10:34:36
[2025-10-28T05:04:36.203Z] [LOG]       Expected Earned: Rs.49999.13
[2025-10-28T05:04:36.204Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T05:04:36.205Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:36.205Z] [LOG]       Attendance Deduction: Rs.49999.13
[2025-10-28T05:04:36.206Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:04:36.206Z] [LOG]       📉 Shortfall for Rasanga null: 212.50 hours (100.00% of expected)
[2025-10-28T05:04:36.207Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:04:36.208Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:04:36.208Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:04:36.209Z] [LOG]    Attendance Shortfall: Rs.49999.13
[2025-10-28T05:04:36.209Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:04:36.210Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:04:36.211Z] [LOG]    Gross Salary: 0
[2025-10-28T05:04:36.212Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:04:36.213Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:04:36.215Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:36.215Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:04:36.216Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:36.216Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:04:36.216Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:36.217Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:04:36.217Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:36.217Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:04:36.218Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:36.218Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:04:36.218Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:36.219Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:04:36.219Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:36.219Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:04:36.220Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:36.220Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:04:36.220Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:36.220Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:04:36.221Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:36.221Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:04:36.221Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T05:04:36.222Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:04:36.222Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:04:36.222Z] [LOG] 💰 GROSS CALCULATION for Rasanga null:
[2025-10-28T05:04:36.222Z] [LOG]    Base Salary: 50000
[2025-10-28T05:04:36.223Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:04:36.223Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:04:36.223Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:36.223Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:04:36.224Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:36.224Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:04:36.224Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:36.442Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:04:36.443Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:36.443Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:04:36.444Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:04:36.444Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:04:36.445Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:04:36.446Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:04:36.447Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T05:04:36.448Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:04:36.449Z] [LOG]    Attendance Shortfall (Info): Rs.49999.13
[2025-10-28T05:04:36.450Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:04:36.451Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:36.451Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:04:36.452Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:04:36.452Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T05:04:36.453Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:04:36.454Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T05:04:36.454Z] [LOG] 
💾 Database Update:
[2025-10-28T05:04:36.455Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:04:36.456Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:04:36.672Z] [LOG] 
📝 Components to save:
[2025-10-28T05:04:36.673Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T05:04:36.674Z] [LOG]    Deduction components: 1
[2025-10-28T05:04:36.674Z] [LOG] Creating components for record 9dda9dfa-609d-42a7-b644-be871eba9d6b: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:04:36.676Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 49999.125
}
[2025-10-28T05:04:36.892Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:04:37.117Z] [LOG] Created payroll_record_component: dcdcbd2f-34c1-4f45-82f7-cec2747375e6 for Attendance Shortfall (Info)
[2025-10-28T05:04:37.568Z] [LOG] ✅ Financial balances updated successfully for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:37.569Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:04:37.570Z] [LOG] 
======================================================================
[2025-10-28T05:04:37.570Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Rasanga null
[2025-10-28T05:04:37.571Z] [LOG] ======================================================================
[2025-10-28T05:04:37.571Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:04:37.572Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T05:04:37.573Z] [LOG]    Attendance Shortfall: Rs.49999.13
[2025-10-28T05:04:37.573Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:37.574Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:37.574Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:04:37.575Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:37.576Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T05:04:37.577Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:37.577Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:04:37.578Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:04:37.579Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:04:37.580Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:04:37.581Z] [LOG]       - Attendance Shortfall (Info): Rs.49999.13
[2025-10-28T05:04:37.582Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:37.582Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:37.583Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T05:04:37.584Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:04:37.584Z] [LOG] ======================================================================

[2025-10-28T05:04:37.585Z] [LOG] ✅ Rasanga null: Calculation completed successfully
[2025-10-28T05:04:37.585Z] [LOG] 📊 Progress: 19/34 (55.9%)
[2025-10-28T05:04:37.586Z] [LOG] 
🧮 Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-28T05:04:37.587Z] [LOG] 📋 Record ID: 9e26ccb0-38ba-4308-9474-474b3ebdf060
[2025-10-28T05:04:37.587Z] [LOG] 
======================================================================
[2025-10-28T05:04:37.588Z] [LOG] 🧮 CALCULATING PAYROLL: P.D.P Dilini Madushani null (EMP000043)
[2025-10-28T05:04:37.589Z] [LOG] ======================================================================
[2025-10-28T05:04:38.436Z] [LOG] 🔍 Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-28T05:04:38.436Z] [LOG]    Total components: 13
[2025-10-28T05:04:38.437Z] [LOG]    Applicable components: 13
[2025-10-28T05:04:38.437Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-28T05:04:39.310Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:04:39.310Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:04:39.532Z] [LOG] 📊 Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:39.759Z] [LOG] 📊 Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:39.988Z] [LOG] 📊 Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:39.989Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:04:39.990Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:04:40.427Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:04:40.428Z] [LOG]    👤 Employee: P.D.P Dilini Madushani null (EMP000043)
[2025-10-28T05:04:40.428Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:40.428Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:04:40.428Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T05:04:40.429Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:04:40.657Z] [LOG] 
   💵 Pre-calculated Rates for P.D.P Dilini Madushani null (EMP000043):
[2025-10-28T05:04:40.658Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-28T05:04:40.658Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-28T05:04:40.658Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-28T05:04:40.659Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:04:40.659Z] [LOG] 
   📊 Full Period Working Days for P.D.P Dilini Madushani null (EMP000043):
[2025-10-28T05:04:40.659Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:40.660Z] [LOG] 
   📊 Working Days for Expected Calculation for P.D.P Dilini Madushani null (EMP000043):
[2025-10-28T05:04:40.660Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:04:40.660Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:40.868Z] [LOG] 
   ⏰ Calculating Completed Hours for P.D.P Dilini Madushani null (EMP000043) - All completed sessions:
[2025-10-28T05:04:40.869Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:40.870Z] [LOG]       Total completed sessions found: 0
[2025-10-28T05:04:41.097Z] [LOG] 
      📊 Aggregated Totals for P.D.P Dilini Madushani null (EMP000043):
[2025-10-28T05:04:41.098Z] [LOG]          Weekday: 0.00h
[2025-10-28T05:04:41.098Z] [LOG]          Saturday: 0.00h
[2025-10-28T05:04:41.099Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:04:41.099Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:04:41.100Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for P.D.P Dilini Madushani null (EMP000043) - completed sessions only:
[2025-10-28T05:04:41.100Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:04:41.101Z] [LOG]       Saturday: 34.00h
[2025-10-28T05:04:41.102Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:41.102Z] [LOG]       Total Expected: 212.50h
[2025-10-28T05:04:41.103Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for P.D.P Dilini Madushani null (EMP000043) - completed sessions only:
[2025-10-28T05:04:41.104Z] [LOG]       Weekday: 0.00h
[2025-10-28T05:04:41.105Z] [LOG]       Saturday: 0.00h
[2025-10-28T05:04:41.105Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:41.106Z] [LOG]       Total Actual: 0.00h
[2025-10-28T05:04:41.107Z] [LOG] 
   💵 EXPECTED Earned Salary for P.D.P Dilini Madushani null (EMP000043) - until NOW:
[2025-10-28T05:04:41.107Z] [LOG]       Weekday: 178.50h × Rs.235.29 = Rs.41999.26
[2025-10-28T05:04:41.108Z] [LOG]       Saturday: 34.00h × Rs.235.29 = Rs.7999.86
[2025-10-28T05:04:41.109Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:41.109Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:41.110Z] [LOG]       Total Expected Earned: Rs.49999.13
[2025-10-28T05:04:41.110Z] [LOG] 
   💵 ACTUAL Earned Salary for P.D.P Dilini Madushani null (EMP000043) - including live session:
[2025-10-28T05:04:41.111Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-28T05:04:41.112Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-28T05:04:41.113Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:41.114Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:41.115Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T05:04:41.116Z] [LOG] 
   📊 FINAL CALCULATION for P.D.P Dilini Madushani null (EMP000043):
[2025-10-28T05:04:41.117Z] [LOG]       Calculated At: Oct 28, 2025, 10:34:41
[2025-10-28T05:04:41.118Z] [LOG]       Expected Earned: Rs.49999.13
[2025-10-28T05:04:41.118Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T05:04:41.119Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:41.119Z] [LOG]       Attendance Deduction: Rs.49999.13
[2025-10-28T05:04:41.120Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:04:41.121Z] [LOG]       📉 Shortfall for P.D.P Dilini Madushani null: 212.50 hours (100.00% of expected)
[2025-10-28T05:04:41.121Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:04:41.122Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:04:41.122Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:04:41.123Z] [LOG]    Attendance Shortfall: Rs.49999.13
[2025-10-28T05:04:41.123Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:04:41.124Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:04:41.125Z] [LOG]    Gross Salary: 0
[2025-10-28T05:04:41.125Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:04:41.126Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:04:41.126Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:41.127Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:04:41.127Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:41.128Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:04:41.130Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:41.131Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:04:41.132Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:41.133Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:04:41.133Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:41.134Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:04:41.134Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:41.135Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:04:41.135Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:41.136Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:04:41.136Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:41.136Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:04:41.137Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:41.137Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:04:41.137Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:41.138Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:04:41.138Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T05:04:41.138Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:04:41.139Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:04:41.139Z] [LOG] 💰 GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-28T05:04:41.139Z] [LOG]    Base Salary: 50000
[2025-10-28T05:04:41.140Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:04:41.140Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:04:41.140Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:41.141Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:04:41.141Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:41.141Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:04:41.141Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:41.358Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:04:41.358Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:41.358Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:04:41.359Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:04:41.359Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:04:41.359Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:04:41.359Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:04:41.360Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T05:04:41.360Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:04:41.360Z] [LOG]    Attendance Shortfall (Info): Rs.49999.13
[2025-10-28T05:04:41.360Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:04:41.361Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:41.361Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:04:41.361Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:04:41.361Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T05:04:41.361Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:04:41.362Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T05:04:41.362Z] [LOG] 
💾 Database Update:
[2025-10-28T05:04:41.362Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:04:41.363Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:04:41.588Z] [LOG] 
📝 Components to save:
[2025-10-28T05:04:41.589Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T05:04:41.589Z] [LOG]    Deduction components: 1
[2025-10-28T05:04:41.590Z] [LOG] Creating components for record 9e26ccb0-38ba-4308-9474-474b3ebdf060: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:04:41.591Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 49999.125
}
[2025-10-28T05:04:41.815Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:04:42.067Z] [LOG] Created payroll_record_component: 60659831-0dcc-4f3f-bc3b-3cd97e90d76d for Attendance Shortfall (Info)
[2025-10-28T05:04:42.495Z] [LOG] ✅ Financial balances updated successfully for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:42.496Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:04:42.496Z] [LOG] 
======================================================================
[2025-10-28T05:04:42.497Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: P.D.P Dilini Madushani null
[2025-10-28T05:04:42.498Z] [LOG] ======================================================================
[2025-10-28T05:04:42.499Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:04:42.499Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T05:04:42.500Z] [LOG]    Attendance Shortfall: Rs.49999.13
[2025-10-28T05:04:42.500Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:42.501Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:42.502Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:04:42.502Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:42.503Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T05:04:42.504Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:42.504Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:04:42.505Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:04:42.506Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:04:42.506Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:04:42.507Z] [LOG]       - Attendance Shortfall (Info): Rs.49999.13
[2025-10-28T05:04:42.508Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:42.508Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:42.509Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T05:04:42.509Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:04:42.510Z] [LOG] ======================================================================

[2025-10-28T05:04:42.511Z] [LOG] ✅ P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-28T05:04:42.511Z] [LOG] 📊 Progress: 20/34 (58.8%)
[2025-10-28T05:04:42.513Z] [LOG] 
🧮 Processing: Jessie null (EMP000013)
[2025-10-28T05:04:42.514Z] [LOG] 📋 Record ID: a2a24ad6-b3ea-4da3-a9c4-f2f72c4d4704
[2025-10-28T05:04:42.515Z] [LOG] 
======================================================================
[2025-10-28T05:04:42.515Z] [LOG] 🧮 CALCULATING PAYROLL: Jessie null (EMP000013)
[2025-10-28T05:04:42.516Z] [LOG] ======================================================================
[2025-10-28T05:04:43.367Z] [LOG] 🔍 Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-28T05:04:43.368Z] [LOG]    Total components: 13
[2025-10-28T05:04:43.368Z] [LOG]    Applicable components: 13
[2025-10-28T05:04:43.369Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T05:04:46.439Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:04:46.440Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:04:46.651Z] [LOG] 📊 Found 0 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:46.874Z] [LOG] 📊 Found 0 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:47.091Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:47.092Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:04:47.093Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:04:47.511Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:04:47.514Z] [LOG]    👤 Employee: Jessie null (EMP000013)
[2025-10-28T05:04:47.514Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:47.515Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:04:47.516Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-28T05:04:47.516Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:04:47.732Z] [LOG] 
   💵 Pre-calculated Rates for Jessie null (EMP000013):
[2025-10-28T05:04:47.733Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-28T05:04:47.733Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-28T05:04:47.734Z] [LOG]       Saturday Hourly Rate: Rs.282.35
[2025-10-28T05:04:47.734Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:04:47.735Z] [LOG] 
   📊 Full Period Working Days for Jessie null (EMP000013):
[2025-10-28T05:04:47.735Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:47.736Z] [LOG] 
   📊 Working Days for Expected Calculation for Jessie null (EMP000013):
[2025-10-28T05:04:47.737Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:04:47.737Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:47.954Z] [LOG] 
   ⏰ Calculating Completed Hours for Jessie null (EMP000013) - All completed sessions:
[2025-10-28T05:04:47.954Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:47.955Z] [LOG]       Total completed sessions found: 19
[2025-10-28T05:04:47.955Z] [LOG] 
      📋 Attendance Breakdown for Jessie null (EMP000013):
[2025-10-28T05:04:47.956Z] [LOG]          1. 2025-09-02 (Weekday): 8.12h
[2025-10-28T05:04:47.957Z] [LOG]          2. 2025-09-04 (Weekday): 7.74h
[2025-10-28T05:04:47.957Z] [LOG]          3. 2025-09-08 (Weekday): 7.75h
[2025-10-28T05:04:47.958Z] [LOG]          4. 2025-09-09 (Weekday): 7.39h
[2025-10-28T05:04:47.958Z] [LOG]          5. 2025-09-10 (Weekday): 7.68h
[2025-10-28T05:04:47.959Z] [LOG]          6. 2025-09-11 (Weekday): 7.42h
[2025-10-28T05:04:47.960Z] [LOG]          7. 2025-09-12 (Weekday): 7.43h
[2025-10-28T05:04:47.961Z] [LOG]          8. 2025-09-15 (Weekday): 7.81h
[2025-10-28T05:04:47.962Z] [LOG]          9. 2025-09-16 (Weekday): 6.57h
[2025-10-28T05:04:47.963Z] [LOG]          10. 2025-09-17 (Weekday): 8.14h
[2025-10-28T05:04:47.964Z] [LOG]          11. 2025-09-18 (Weekday): 6.73h
[2025-10-28T05:04:47.965Z] [LOG]          12. 2025-09-19 (Weekday): 6.70h
[2025-10-28T05:04:47.965Z] [LOG]          13. 2025-09-22 (Weekday): 7.49h
[2025-10-28T05:04:47.966Z] [LOG]          14. 2025-09-23 (Weekday): 7.59h
[2025-10-28T05:04:47.967Z] [LOG]          15. 2025-09-24 (Weekday): 7.41h
[2025-10-28T05:04:47.967Z] [LOG]          16. 2025-09-25 (Weekday): 7.70h
[2025-10-28T05:04:47.968Z] [LOG]          17. 2025-09-26 (Weekday): 7.17h
[2025-10-28T05:04:47.968Z] [LOG]          18. 2025-09-29 (Weekday): 7.29h
[2025-10-28T05:04:47.969Z] [LOG]          19. 2025-09-30 (Weekday): 5.98h
[2025-10-28T05:04:48.192Z] [LOG] 
      📊 Aggregated Totals for Jessie null (EMP000013):
[2025-10-28T05:04:48.193Z] [LOG]          Weekday: 140.11h
[2025-10-28T05:04:48.193Z] [LOG]          Saturday: 0.00h
[2025-10-28T05:04:48.194Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:04:48.194Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:04:48.197Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Jessie null (EMP000013) - completed sessions only:
[2025-10-28T05:04:48.199Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:04:48.200Z] [LOG]       Saturday: 34.00h
[2025-10-28T05:04:48.201Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:48.201Z] [LOG]       Total Expected: 212.50h
[2025-10-28T05:04:48.202Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Jessie null (EMP000013) - completed sessions only:
[2025-10-28T05:04:48.202Z] [LOG]       Weekday: 140.11h
[2025-10-28T05:04:48.203Z] [LOG]       Saturday: 0.00h
[2025-10-28T05:04:48.204Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:48.204Z] [LOG]       Total Actual: 140.11h
[2025-10-28T05:04:48.205Z] [LOG] 
   💵 EXPECTED Earned Salary for Jessie null (EMP000013) - until NOW:
[2025-10-28T05:04:48.206Z] [LOG]       Weekday: 178.50h × Rs.282.35 = Rs.50399.48
[2025-10-28T05:04:48.206Z] [LOG]       Saturday: 34.00h × Rs.282.35 = Rs.9599.90
[2025-10-28T05:04:48.207Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:48.207Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:48.208Z] [LOG]       Total Expected Earned: Rs.59999.38
[2025-10-28T05:04:48.208Z] [LOG] 
   💵 ACTUAL Earned Salary for Jessie null (EMP000013) - including live session:
[2025-10-28T05:04:48.210Z] [LOG]       Weekday: 140.11h × Rs.282.35 = Rs.39560.06
[2025-10-28T05:04:48.210Z] [LOG]       Saturday: 0.00h × Rs.282.35 = Rs.0.00
[2025-10-28T05:04:48.211Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:48.211Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:48.212Z] [LOG]       Total Actual Earned: Rs.39560.06
[2025-10-28T05:04:48.215Z] [LOG] 
   📊 FINAL CALCULATION for Jessie null (EMP000013):
[2025-10-28T05:04:48.216Z] [LOG]       Calculated At: Oct 28, 2025, 10:34:48
[2025-10-28T05:04:48.216Z] [LOG]       Expected Earned: Rs.59999.38
[2025-10-28T05:04:48.217Z] [LOG]       Actual Earned: Rs.39560.06
[2025-10-28T05:04:48.217Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:48.217Z] [LOG]       Attendance Deduction: Rs.20439.32
[2025-10-28T05:04:48.218Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:04:48.218Z] [LOG]       📉 Shortfall for Jessie null: 72.39 hours (34.07% of expected)
[2025-10-28T05:04:48.218Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:04:48.219Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-28T05:04:48.219Z] [LOG]    Actual Earned Base: Rs.39560.06
[2025-10-28T05:04:48.219Z] [LOG]    Attendance Shortfall: Rs.20439.32
[2025-10-28T05:04:48.219Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:04:48.220Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:04:48.220Z] [LOG]    Gross Salary: 39560.05850000001
[2025-10-28T05:04:48.220Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:04:48.221Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:04:48.221Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:48.221Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:04:48.222Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:48.222Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:04:48.222Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:48.222Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:04:48.223Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:48.223Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:04:48.223Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:48.223Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:04:48.223Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:48.224Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:04:48.224Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:48.224Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:04:48.224Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:48.225Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:04:48.225Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:48.225Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:04:48.225Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:48.226Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:04:48.226Z] [LOG]    EPF/ETF calculated on: Rs.39560.06
[2025-10-28T05:04:48.226Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:04:48.226Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:04:48.227Z] [LOG] 💰 GROSS CALCULATION for Jessie null:
[2025-10-28T05:04:48.227Z] [LOG]    Base Salary: 60000
[2025-10-28T05:04:48.227Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:04:48.227Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:04:48.228Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:48.228Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:04:48.228Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:48.228Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:04:48.229Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:48.459Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:04:48.460Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:48.460Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:04:48.461Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:04:48.461Z] [LOG]    Actual Earned Base: Rs.39560.06
[2025-10-28T05:04:48.462Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:04:48.463Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:04:48.464Z] [LOG]    = Gross Salary: Rs.39560.06
[2025-10-28T05:04:48.465Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:04:48.466Z] [LOG]    Attendance Shortfall (Info): Rs.20439.32
[2025-10-28T05:04:48.467Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:04:48.467Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:48.468Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:04:48.468Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:04:48.469Z] [LOG]    Gross Salary: Rs.39560.06
[2025-10-28T05:04:48.470Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:04:48.470Z] [LOG]    = NET SALARY: Rs.39560.06
[2025-10-28T05:04:48.471Z] [LOG] 
💾 Database Update:
[2025-10-28T05:04:48.472Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:04:48.473Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:04:48.722Z] [LOG] 
📝 Components to save:
[2025-10-28T05:04:48.723Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:04:48.723Z] [LOG]    Deduction components: 1
[2025-10-28T05:04:48.724Z] [LOG] Creating components for record a2a24ad6-b3ea-4da3-a9c4-f2f72c4d4704: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:04:48.726Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 39560.05850000001
}
[2025-10-28T05:04:48.934Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:04:49.166Z] [LOG] Created payroll_record_component: abfc1938-15a5-46f8-9172-b0c75be85a19 for Base Salary
[2025-10-28T05:04:49.167Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 20439.3165
}
[2025-10-28T05:04:49.393Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:04:49.609Z] [LOG] Created payroll_record_component: 60cc03f9-0cce-4d21-9fc6-b9cad25362cd for Attendance Shortfall (Info)
[2025-10-28T05:04:50.043Z] [LOG] ✅ Financial balances updated successfully for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:50.043Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:04:50.044Z] [LOG] 
======================================================================
[2025-10-28T05:04:50.044Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Jessie null
[2025-10-28T05:04:50.044Z] [LOG] ======================================================================
[2025-10-28T05:04:50.045Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-28T05:04:50.045Z] [LOG]    Actual Earned Base (Attendance-based): Rs.39560.06
[2025-10-28T05:04:50.045Z] [LOG]    Attendance Shortfall: Rs.20439.32
[2025-10-28T05:04:50.046Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:50.046Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:50.046Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:04:50.047Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:50.047Z] [LOG]    GROSS SALARY: Rs.39560.06
[2025-10-28T05:04:50.047Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:50.048Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:04:50.048Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:04:50.048Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:04:50.048Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:04:50.049Z] [LOG]       - Attendance Shortfall (Info): Rs.20439.32
[2025-10-28T05:04:50.049Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:50.049Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:50.050Z] [LOG]    NET SALARY: Rs.39560.06
[2025-10-28T05:04:50.050Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:04:50.050Z] [LOG] ======================================================================

[2025-10-28T05:04:50.050Z] [LOG] ✅ Jessie null: Calculation completed successfully
[2025-10-28T05:04:50.051Z] [LOG] 📊 Progress: 21/34 (61.8%)
[2025-10-28T05:04:50.051Z] [LOG] 
🧮 Processing: Hari null (EMP000017)
[2025-10-28T05:04:50.051Z] [LOG] 📋 Record ID: a5351e22-75ef-4602-972d-0ff4e1b4e54c
[2025-10-28T05:04:50.051Z] [LOG] 
======================================================================
[2025-10-28T05:04:50.052Z] [LOG] 🧮 CALCULATING PAYROLL: Hari null (EMP000017)
[2025-10-28T05:04:50.052Z] [LOG] ======================================================================
[2025-10-28T05:04:50.969Z] [LOG] 🔍 Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-28T05:04:50.969Z] [LOG]    Total components: 13
[2025-10-28T05:04:50.969Z] [LOG]    Applicable components: 13
[2025-10-28T05:04:50.969Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T05:04:51.840Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:04:51.841Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:04:52.052Z] [LOG] 📊 Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:52.297Z] [LOG] 📊 Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:52.516Z] [LOG] 📊 Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:52.516Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:04:52.517Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:04:52.979Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:04:52.980Z] [LOG]    👤 Employee: Hari null (EMP000017)
[2025-10-28T05:04:52.980Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:52.980Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:04:52.981Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T05:04:52.981Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:04:53.218Z] [LOG] 
   💵 Pre-calculated Rates for Hari null (EMP000017):
[2025-10-28T05:04:53.219Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-28T05:04:53.219Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-28T05:04:53.219Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-28T05:04:53.219Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:04:53.220Z] [LOG] 
   📊 Full Period Working Days for Hari null (EMP000017):
[2025-10-28T05:04:53.220Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:53.220Z] [LOG] 
   📊 Working Days for Expected Calculation for Hari null (EMP000017):
[2025-10-28T05:04:53.221Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:04:53.221Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:53.456Z] [LOG] 
   ⏰ Calculating Completed Hours for Hari null (EMP000017) - All completed sessions:
[2025-10-28T05:04:53.457Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:53.457Z] [LOG]       Total completed sessions found: 3
[2025-10-28T05:04:53.457Z] [LOG] 
      📋 Attendance Breakdown for Hari null (EMP000017):
[2025-10-28T05:04:53.458Z] [LOG]          1. 2025-09-02 (Weekday): 7.50h
[2025-10-28T05:04:53.458Z] [LOG]          2. 2025-09-03 (Weekday): 7.50h
[2025-10-28T05:04:53.458Z] [LOG]          3. 2025-09-08 (Weekday): 7.67h
[2025-10-28T05:04:53.694Z] [LOG] 
      📊 Aggregated Totals for Hari null (EMP000017):
[2025-10-28T05:04:53.694Z] [LOG]          Weekday: 22.67h
[2025-10-28T05:04:53.694Z] [LOG]          Saturday: 0.00h
[2025-10-28T05:04:53.694Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:04:53.695Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:04:53.695Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Hari null (EMP000017) - completed sessions only:
[2025-10-28T05:04:53.696Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:04:53.696Z] [LOG]       Saturday: 34.00h
[2025-10-28T05:04:53.696Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:53.696Z] [LOG]       Total Expected: 212.50h
[2025-10-28T05:04:53.697Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Hari null (EMP000017) - completed sessions only:
[2025-10-28T05:04:53.697Z] [LOG]       Weekday: 22.67h
[2025-10-28T05:04:53.697Z] [LOG]       Saturday: 0.00h
[2025-10-28T05:04:53.697Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:53.697Z] [LOG]       Total Actual: 22.67h
[2025-10-28T05:04:53.697Z] [LOG] 
   💵 EXPECTED Earned Salary for Hari null (EMP000017) - until NOW:
[2025-10-28T05:04:53.698Z] [LOG]       Weekday: 178.50h × Rs.235.29 = Rs.41999.26
[2025-10-28T05:04:53.698Z] [LOG]       Saturday: 34.00h × Rs.235.29 = Rs.7999.86
[2025-10-28T05:04:53.698Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:53.699Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:53.699Z] [LOG]       Total Expected Earned: Rs.49999.13
[2025-10-28T05:04:53.699Z] [LOG] 
   💵 ACTUAL Earned Salary for Hari null (EMP000017) - including live session:
[2025-10-28T05:04:53.699Z] [LOG]       Weekday: 22.67h × Rs.235.29 = Rs.5334.02
[2025-10-28T05:04:53.699Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-28T05:04:53.700Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:53.700Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:53.700Z] [LOG]       Total Actual Earned: Rs.5334.02
[2025-10-28T05:04:53.701Z] [LOG] 
   📊 FINAL CALCULATION for Hari null (EMP000017):
[2025-10-28T05:04:53.701Z] [LOG]       Calculated At: Oct 28, 2025, 10:34:53
[2025-10-28T05:04:53.701Z] [LOG]       Expected Earned: Rs.49999.13
[2025-10-28T05:04:53.701Z] [LOG]       Actual Earned: Rs.5334.02
[2025-10-28T05:04:53.702Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:53.702Z] [LOG]       Attendance Deduction: Rs.44665.10
[2025-10-28T05:04:53.702Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:04:53.702Z] [LOG]       📉 Shortfall for Hari null: 189.83 hours (89.33% of expected)
[2025-10-28T05:04:53.703Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:04:53.703Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:04:53.703Z] [LOG]    Actual Earned Base: Rs.5334.02
[2025-10-28T05:04:53.703Z] [LOG]    Attendance Shortfall: Rs.44665.10
[2025-10-28T05:04:53.704Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:04:53.704Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:04:53.704Z] [LOG]    Gross Salary: 5334.0243
[2025-10-28T05:04:53.704Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:04:53.704Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:04:53.705Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:53.705Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:04:53.705Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:53.705Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:04:53.705Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:53.706Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:04:53.706Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:53.706Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:04:53.706Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:53.706Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:04:53.707Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:53.707Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:04:53.707Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:53.707Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:04:53.707Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:53.708Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:04:53.708Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:53.708Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:04:53.708Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:53.708Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:04:53.709Z] [LOG]    EPF/ETF calculated on: Rs.5334.02
[2025-10-28T05:04:53.709Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:04:53.709Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:04:53.709Z] [LOG] 💰 GROSS CALCULATION for Hari null:
[2025-10-28T05:04:53.709Z] [LOG]    Base Salary: 50000
[2025-10-28T05:04:53.710Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:04:53.710Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:04:53.710Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:53.710Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:04:53.710Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:53.711Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:04:53.711Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:53.930Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:04:53.931Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:53.931Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:04:53.931Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:04:53.931Z] [LOG]    Actual Earned Base: Rs.5334.02
[2025-10-28T05:04:53.932Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:04:53.932Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:04:53.932Z] [LOG]    = Gross Salary: Rs.5334.02
[2025-10-28T05:04:53.932Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:04:53.933Z] [LOG]    Attendance Shortfall (Info): Rs.44665.10
[2025-10-28T05:04:53.933Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:04:53.933Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:53.933Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:04:53.934Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:04:53.934Z] [LOG]    Gross Salary: Rs.5334.02
[2025-10-28T05:04:53.934Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:04:53.934Z] [LOG]    = NET SALARY: Rs.5334.02
[2025-10-28T05:04:53.934Z] [LOG] 
💾 Database Update:
[2025-10-28T05:04:53.935Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:04:53.935Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:04:54.150Z] [LOG] 
📝 Components to save:
[2025-10-28T05:04:54.150Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:04:54.150Z] [LOG]    Deduction components: 1
[2025-10-28T05:04:54.150Z] [LOG] Creating components for record a5351e22-75ef-4602-972d-0ff4e1b4e54c: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:04:54.151Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 5334.0243
}
[2025-10-28T05:04:54.372Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:04:54.615Z] [LOG] Created payroll_record_component: c3c4439c-714b-4c8c-904e-c1b03b6d00f2 for Base Salary
[2025-10-28T05:04:54.615Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 44665.1007
}
[2025-10-28T05:04:54.841Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:04:55.078Z] [LOG] Created payroll_record_component: 2e4305e1-8c74-408c-af6c-b5f749825b1c for Attendance Shortfall (Info)
[2025-10-28T05:04:55.507Z] [LOG] ✅ Financial balances updated successfully for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:55.508Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:04:55.508Z] [LOG] 
======================================================================
[2025-10-28T05:04:55.508Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Hari null
[2025-10-28T05:04:55.508Z] [LOG] ======================================================================
[2025-10-28T05:04:55.509Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:04:55.509Z] [LOG]    Actual Earned Base (Attendance-based): Rs.5334.02
[2025-10-28T05:04:55.509Z] [LOG]    Attendance Shortfall: Rs.44665.10
[2025-10-28T05:04:55.509Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:55.510Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:55.510Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:04:55.510Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:55.510Z] [LOG]    GROSS SALARY: Rs.5334.02
[2025-10-28T05:04:55.510Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:55.510Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:04:55.511Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:04:55.511Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:04:55.511Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:04:55.511Z] [LOG]       - Attendance Shortfall (Info): Rs.44665.10
[2025-10-28T05:04:55.512Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:55.512Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:04:55.512Z] [LOG]    NET SALARY: Rs.5334.02
[2025-10-28T05:04:55.513Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:04:55.513Z] [LOG] ======================================================================

[2025-10-28T05:04:55.513Z] [LOG] ✅ Hari null: Calculation completed successfully
[2025-10-28T05:04:55.513Z] [LOG] 📊 Progress: 22/34 (64.7%)
[2025-10-28T05:04:55.514Z] [LOG] 
🧮 Processing: Chemil null (EMP000040)
[2025-10-28T05:04:55.514Z] [LOG] 📋 Record ID: a7d41681-d538-4cf0-a5dc-9bde7c365447
[2025-10-28T05:04:55.514Z] [LOG] 
======================================================================
[2025-10-28T05:04:55.514Z] [LOG] 🧮 CALCULATING PAYROLL: Chemil null (EMP000040)
[2025-10-28T05:04:55.514Z] [LOG] ======================================================================
[2025-10-28T05:04:56.384Z] [LOG] 🔍 Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-28T05:04:56.384Z] [LOG]    Total components: 13
[2025-10-28T05:04:56.384Z] [LOG]    Applicable components: 13
[2025-10-28T05:04:56.384Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T05:04:57.314Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:04:57.314Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:04:57.543Z] [LOG] 📊 Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:57.777Z] [LOG] 📊 Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:57.988Z] [LOG] 📊 Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-28T05:04:57.988Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:04:57.988Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:04:58.455Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:04:58.455Z] [LOG]    👤 Employee: Chemil null (EMP000040)
[2025-10-28T05:04:58.455Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:58.455Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:04:58.456Z] [LOG]    Base Salary (Full Month): Rs.250000.00
[2025-10-28T05:04:58.456Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:04:58.679Z] [LOG] 
   💵 Pre-calculated Rates for Chemil null (EMP000040):
[2025-10-28T05:04:58.679Z] [LOG]       Daily Salary: Rs.10000.00
[2025-10-28T05:04:58.679Z] [LOG]       Weekday Hourly Rate: Rs.1176.47
[2025-10-28T05:04:58.679Z] [LOG]       Saturday Hourly Rate: Rs.1176.47
[2025-10-28T05:04:58.679Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:04:58.680Z] [LOG] 
   📊 Full Period Working Days for Chemil null (EMP000040):
[2025-10-28T05:04:58.680Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:58.680Z] [LOG] 
   📊 Working Days for Expected Calculation for Chemil null (EMP000040):
[2025-10-28T05:04:58.680Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:04:58.680Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:04:58.910Z] [LOG] 
   ⏰ Calculating Completed Hours for Chemil null (EMP000040) - All completed sessions:
[2025-10-28T05:04:58.910Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:04:58.911Z] [LOG]       Total completed sessions found: 0
[2025-10-28T05:04:59.142Z] [LOG] 
      📊 Aggregated Totals for Chemil null (EMP000040):
[2025-10-28T05:04:59.142Z] [LOG]          Weekday: 0.00h
[2025-10-28T05:04:59.142Z] [LOG]          Saturday: 0.00h
[2025-10-28T05:04:59.142Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:04:59.142Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:04:59.143Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Chemil null (EMP000040) - completed sessions only:
[2025-10-28T05:04:59.143Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:04:59.143Z] [LOG]       Saturday: 34.00h
[2025-10-28T05:04:59.143Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:59.143Z] [LOG]       Total Expected: 212.50h
[2025-10-28T05:04:59.143Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Chemil null (EMP000040) - completed sessions only:
[2025-10-28T05:04:59.143Z] [LOG]       Weekday: 0.00h
[2025-10-28T05:04:59.144Z] [LOG]       Saturday: 0.00h
[2025-10-28T05:04:59.144Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:04:59.144Z] [LOG]       Total Actual: 0.00h
[2025-10-28T05:04:59.144Z] [LOG] 
   💵 EXPECTED Earned Salary for Chemil null (EMP000040) - until NOW:
[2025-10-28T05:04:59.144Z] [LOG]       Weekday: 178.50h × Rs.1176.47 = Rs.209999.90
[2025-10-28T05:04:59.144Z] [LOG]       Saturday: 34.00h × Rs.1176.47 = Rs.39999.98
[2025-10-28T05:04:59.144Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:59.145Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:59.145Z] [LOG]       Total Expected Earned: Rs.249999.88
[2025-10-28T05:04:59.145Z] [LOG] 
   💵 ACTUAL Earned Salary for Chemil null (EMP000040) - including live session:
[2025-10-28T05:04:59.145Z] [LOG]       Weekday: 0.00h × Rs.1176.47 = Rs.0.00
[2025-10-28T05:04:59.145Z] [LOG]       Saturday: 0.00h × Rs.1176.47 = Rs.0.00
[2025-10-28T05:04:59.146Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:04:59.146Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:59.146Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T05:04:59.146Z] [LOG] 
   📊 FINAL CALCULATION for Chemil null (EMP000040):
[2025-10-28T05:04:59.147Z] [LOG]       Calculated At: Oct 28, 2025, 10:34:59
[2025-10-28T05:04:59.147Z] [LOG]       Expected Earned: Rs.249999.88
[2025-10-28T05:04:59.147Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T05:04:59.148Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:04:59.148Z] [LOG]       Attendance Deduction: Rs.249999.88
[2025-10-28T05:04:59.148Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:04:59.148Z] [LOG]       📉 Shortfall for Chemil null: 212.50 hours (100.00% of expected)
[2025-10-28T05:04:59.148Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:04:59.148Z] [LOG]    Base Salary (Full): Rs.250000.00
[2025-10-28T05:04:59.148Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:04:59.149Z] [LOG]    Attendance Shortfall: Rs.249999.88
[2025-10-28T05:04:59.149Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:04:59.149Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:04:59.149Z] [LOG]    Gross Salary: 0
[2025-10-28T05:04:59.149Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:04:59.149Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:04:59.149Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:59.150Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:04:59.150Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:59.150Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:04:59.150Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:59.150Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:04:59.150Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:59.150Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:04:59.151Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:59.151Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:04:59.151Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:59.151Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:04:59.151Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:59.151Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:04:59.151Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:59.151Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:04:59.152Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:59.152Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:04:59.152Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:59.152Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:04:59.152Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T05:04:59.152Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:04:59.152Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:04:59.153Z] [LOG] 💰 GROSS CALCULATION for Chemil null:
[2025-10-28T05:04:59.153Z] [LOG]    Base Salary: 250000
[2025-10-28T05:04:59.153Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:04:59.153Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:04:59.153Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:59.153Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:04:59.153Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:59.154Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:04:59.154Z] [LOG]    Fixed amount: 0
[2025-10-28T05:04:59.376Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:04:59.377Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:04:59.377Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:04:59.377Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:04:59.377Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:04:59.378Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:04:59.378Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:04:59.378Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T05:04:59.378Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:04:59.379Z] [LOG]    Attendance Shortfall (Info): Rs.249999.88
[2025-10-28T05:04:59.379Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:04:59.380Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:04:59.380Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:04:59.380Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:04:59.380Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T05:04:59.381Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:04:59.381Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T05:04:59.381Z] [LOG] 
💾 Database Update:
[2025-10-28T05:04:59.381Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:04:59.381Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:04:59.593Z] [LOG] 
📝 Components to save:
[2025-10-28T05:04:59.594Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T05:04:59.594Z] [LOG]    Deduction components: 1
[2025-10-28T05:04:59.595Z] [LOG] Creating components for record a7d41681-d538-4cf0-a5dc-9bde7c365447: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:04:59.598Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 249999.87500000003
}
[2025-10-28T05:04:59.816Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:05:00.032Z] [LOG] Created payroll_record_component: e48675b5-6599-40a5-a0aa-1e58c072c59e for Attendance Shortfall (Info)
[2025-10-28T05:05:00.454Z] [LOG] ✅ Financial balances updated successfully for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-28T05:05:00.455Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:05:00.455Z] [LOG] 
======================================================================
[2025-10-28T05:05:00.456Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chemil null
[2025-10-28T05:05:00.456Z] [LOG] ======================================================================
[2025-10-28T05:05:00.456Z] [LOG]    Base Salary (Full): Rs.250000.00
[2025-10-28T05:05:00.457Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T05:05:00.457Z] [LOG]    Attendance Shortfall: Rs.249999.88
[2025-10-28T05:05:00.457Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:05:00.458Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:05:00.458Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:05:00.458Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:05:00.459Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T05:05:00.459Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:05:00.459Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:05:00.460Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:05:00.460Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:05:00.460Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:05:00.460Z] [LOG]       - Attendance Shortfall (Info): Rs.249999.88
[2025-10-28T05:05:00.460Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:05:00.461Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:05:00.461Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T05:05:00.461Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:05:00.462Z] [LOG] ======================================================================

[2025-10-28T05:05:00.462Z] [LOG] ✅ Chemil null: Calculation completed successfully
[2025-10-28T05:05:00.462Z] [LOG] 📊 Progress: 23/34 (67.6%)
[2025-10-28T05:05:00.463Z] [LOG] 
🧮 Processing: Faizan Faizan (EMP000003)
[2025-10-28T05:05:00.463Z] [LOG] 📋 Record ID: aa6d942c-adb6-4d15-b1f9-f2e8a8e23538
[2025-10-28T05:05:00.464Z] [LOG] 
======================================================================
[2025-10-28T05:05:00.464Z] [LOG] 🧮 CALCULATING PAYROLL: Faizan Faizan (EMP000003)
[2025-10-28T05:05:00.464Z] [LOG] ======================================================================
[2025-10-28T05:05:01.344Z] [LOG] 🔍 Component filtering for employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-28T05:05:01.345Z] [LOG]    Total components: 13
[2025-10-28T05:05:01.345Z] [LOG]    Applicable components: 13
[2025-10-28T05:05:01.347Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-28T05:05:02.208Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:05:02.209Z] [LOG] 🔄 Processing financial records for employee 0143a057-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:05:02.418Z] [LOG] 📊 Found 0 active loans for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-28T05:05:02.642Z] [LOG] 📊 Found 0 active advances for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-28T05:05:02.860Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-28T05:05:02.861Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:05:02.863Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:05:03.277Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:05:03.278Z] [LOG]    👤 Employee: Faizan Faizan (EMP000003)
[2025-10-28T05:05:03.278Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:05:03.278Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:05:03.278Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T05:05:03.279Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:05:03.493Z] [LOG] 
   💵 Pre-calculated Rates for Faizan Faizan (EMP000003):
[2025-10-28T05:05:03.494Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-28T05:05:03.494Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-28T05:05:03.494Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-28T05:05:03.495Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:05:03.495Z] [LOG] 
   📊 Full Period Working Days for Faizan Faizan (EMP000003):
[2025-10-28T05:05:03.496Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:05:03.496Z] [LOG] 
   📊 Working Days for Expected Calculation for Faizan Faizan (EMP000003):
[2025-10-28T05:05:03.497Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:05:03.497Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:05:03.711Z] [LOG] 
   ⏰ Calculating Completed Hours for Faizan Faizan (EMP000003) - All completed sessions:
[2025-10-28T05:05:03.713Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:05:03.713Z] [LOG]       Total completed sessions found: 0
[2025-10-28T05:05:03.927Z] [LOG] 
      📊 Aggregated Totals for Faizan Faizan (EMP000003):
[2025-10-28T05:05:03.927Z] [LOG]          Weekday: 0.00h
[2025-10-28T05:05:03.928Z] [LOG]          Saturday: 0.00h
[2025-10-28T05:05:03.929Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:05:03.930Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:05:03.931Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Faizan Faizan (EMP000003) - completed sessions only:
[2025-10-28T05:05:03.932Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:05:03.932Z] [LOG]       Saturday: 34.00h
[2025-10-28T05:05:03.933Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:05:03.934Z] [LOG]       Total Expected: 212.50h
[2025-10-28T05:05:03.934Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Faizan Faizan (EMP000003) - completed sessions only:
[2025-10-28T05:05:03.936Z] [LOG]       Weekday: 0.00h
[2025-10-28T05:05:03.938Z] [LOG]       Saturday: 0.00h
[2025-10-28T05:05:03.938Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:05:03.939Z] [LOG]       Total Actual: 0.00h
[2025-10-28T05:05:03.939Z] [LOG] 
   💵 EXPECTED Earned Salary for Faizan Faizan (EMP000003) - until NOW:
[2025-10-28T05:05:03.940Z] [LOG]       Weekday: 178.50h × Rs.235.29 = Rs.41999.26
[2025-10-28T05:05:03.941Z] [LOG]       Saturday: 34.00h × Rs.235.29 = Rs.7999.86
[2025-10-28T05:05:03.941Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:05:03.942Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:05:03.943Z] [LOG]       Total Expected Earned: Rs.49999.13
[2025-10-28T05:05:03.943Z] [LOG] 
   💵 ACTUAL Earned Salary for Faizan Faizan (EMP000003) - including live session:
[2025-10-28T05:05:03.944Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-28T05:05:03.945Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-28T05:05:03.947Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:05:03.948Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:05:03.948Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T05:05:03.949Z] [LOG] 
   📊 FINAL CALCULATION for Faizan Faizan (EMP000003):
[2025-10-28T05:05:03.950Z] [LOG]       Calculated At: Oct 28, 2025, 10:35:03
[2025-10-28T05:05:03.951Z] [LOG]       Expected Earned: Rs.49999.13
[2025-10-28T05:05:03.951Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T05:05:03.952Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:05:03.952Z] [LOG]       Attendance Deduction: Rs.49999.13
[2025-10-28T05:05:03.953Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:05:03.954Z] [LOG]       📉 Shortfall for Faizan Faizan: 212.50 hours (100.00% of expected)
[2025-10-28T05:05:03.954Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:05:03.955Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:05:03.956Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:05:03.957Z] [LOG]    Attendance Shortfall: Rs.49999.13
[2025-10-28T05:05:03.957Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:05:03.958Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:05:03.958Z] [LOG]    Gross Salary: 0
[2025-10-28T05:05:03.959Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:05:03.960Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:05:03.960Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:03.961Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:05:03.961Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:03.963Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:05:03.964Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:03.965Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:05:03.966Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:03.966Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:05:03.966Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:03.966Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:05:03.967Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:03.967Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:05:03.967Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:03.968Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:05:03.968Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:03.968Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:05:03.969Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:03.969Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:05:03.969Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:03.969Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:05:03.970Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T05:05:03.970Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:05:03.970Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:05:03.970Z] [LOG] 💰 GROSS CALCULATION for Faizan Faizan:
[2025-10-28T05:05:03.971Z] [LOG]    Base Salary: 50000
[2025-10-28T05:05:03.971Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:05:03.971Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:05:03.972Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:03.972Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:05:03.972Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:03.972Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:05:03.973Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:04.178Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:05:04.180Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:05:04.180Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:05:04.181Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:05:04.182Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:05:04.182Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:05:04.183Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:05:04.183Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T05:05:04.184Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:05:04.185Z] [LOG]    Attendance Shortfall (Info): Rs.49999.13
[2025-10-28T05:05:04.185Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:05:04.186Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:05:04.187Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:05:04.188Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:05:04.188Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T05:05:04.189Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:05:04.190Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T05:05:04.190Z] [LOG] 
💾 Database Update:
[2025-10-28T05:05:04.191Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:05:04.192Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:05:04.401Z] [LOG] 
📝 Components to save:
[2025-10-28T05:05:04.402Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T05:05:04.403Z] [LOG]    Deduction components: 1
[2025-10-28T05:05:04.403Z] [LOG] Creating components for record aa6d942c-adb6-4d15-b1f9-f2e8a8e23538: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:05:04.405Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 49999.125
}
[2025-10-28T05:05:04.632Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:05:04.849Z] [LOG] Created payroll_record_component: 5d0f7706-b854-4f03-9813-e67116ed77e9 for Attendance Shortfall (Info)
[2025-10-28T05:05:05.261Z] [LOG] ✅ Financial balances updated successfully for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-28T05:05:05.261Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:05:05.263Z] [LOG] 
======================================================================
[2025-10-28T05:05:05.263Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Faizan Faizan
[2025-10-28T05:05:05.264Z] [LOG] ======================================================================
[2025-10-28T05:05:05.265Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:05:05.265Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T05:05:05.266Z] [LOG]    Attendance Shortfall: Rs.49999.13
[2025-10-28T05:05:05.267Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:05:05.267Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:05:05.268Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:05:05.269Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:05:05.269Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T05:05:05.270Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:05:05.271Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:05:05.271Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:05:05.272Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:05:05.273Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:05:05.273Z] [LOG]       - Attendance Shortfall (Info): Rs.49999.13
[2025-10-28T05:05:05.274Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:05:05.274Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:05:05.275Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T05:05:05.275Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:05:05.276Z] [LOG] ======================================================================

[2025-10-28T05:05:05.277Z] [LOG] ✅ Faizan Faizan: Calculation completed successfully
[2025-10-28T05:05:05.277Z] [LOG] 📊 Progress: 24/34 (70.6%)
[2025-10-28T05:05:05.278Z] [LOG] 
🧮 Processing: Anoj null (EMP000014)
[2025-10-28T05:05:05.280Z] [LOG] 📋 Record ID: b38b9d1d-9cae-47bd-b2b5-dacb3b09d4e5
[2025-10-28T05:05:05.281Z] [LOG] 
======================================================================
[2025-10-28T05:05:05.282Z] [LOG] 🧮 CALCULATING PAYROLL: Anoj null (EMP000014)
[2025-10-28T05:05:05.283Z] [LOG] ======================================================================
[2025-10-28T05:05:06.153Z] [LOG] 🔍 Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-28T05:05:06.154Z] [LOG]    Total components: 13
[2025-10-28T05:05:06.154Z] [LOG]    Applicable components: 13
[2025-10-28T05:05:06.155Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T05:05:12.134Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:05:12.135Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:05:12.342Z] [LOG] 📊 Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-28T05:05:12.554Z] [LOG] 📊 Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-28T05:05:12.780Z] [LOG] 📊 Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-28T05:05:12.781Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:05:12.782Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:05:13.206Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:05:13.207Z] [LOG]    👤 Employee: Anoj null (EMP000014)
[2025-10-28T05:05:13.207Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:05:13.208Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:05:13.209Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T05:05:13.209Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:05:13.415Z] [LOG] 
   💵 Pre-calculated Rates for Anoj null (EMP000014):
[2025-10-28T05:05:13.416Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-28T05:05:13.416Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-28T05:05:13.417Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-28T05:05:13.417Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:05:13.418Z] [LOG] 
   📊 Full Period Working Days for Anoj null (EMP000014):
[2025-10-28T05:05:13.419Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:05:13.419Z] [LOG] 
   📊 Working Days for Expected Calculation for Anoj null (EMP000014):
[2025-10-28T05:05:13.420Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:05:13.420Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:05:13.633Z] [LOG] 
   ⏰ Calculating Completed Hours for Anoj null (EMP000014) - All completed sessions:
[2025-10-28T05:05:13.634Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:05:13.634Z] [LOG]       Total completed sessions found: 22
[2025-10-28T05:05:13.635Z] [LOG] 
      📋 Attendance Breakdown for Anoj null (EMP000014):
[2025-10-28T05:05:13.636Z] [LOG]          1. 2025-09-01 (Weekday): 8.50h
[2025-10-28T05:05:13.636Z] [LOG]          2. 2025-09-02 (Weekday): 8.25h
[2025-10-28T05:05:13.637Z] [LOG]          3. 2025-09-03 (Weekday): 8.17h
[2025-10-28T05:05:13.637Z] [LOG]          4. 2025-09-04 (Weekday): 8.17h
[2025-10-28T05:05:13.638Z] [LOG]          5. 2025-09-08 (Weekday): 8.25h
[2025-10-28T05:05:13.638Z] [LOG]          6. 2025-09-09 (Weekday): 8.50h
[2025-10-28T05:05:13.639Z] [LOG]          7. 2025-09-10 (Weekday): 8.50h
[2025-10-28T05:05:13.640Z] [LOG]          8. 2025-09-12 (Weekday): 7.13h
[2025-10-28T05:05:13.640Z] [LOG]          9. 2025-09-13 (Saturday): 2.00h
[2025-10-28T05:05:13.641Z] [LOG]          10. 2025-09-15 (Weekday): 6.50h
[2025-10-28T05:05:13.642Z] [LOG]          11. 2025-09-16 (Weekday): 8.50h
[2025-10-28T05:05:13.642Z] [LOG]          12. 2025-09-17 (Weekday): 6.00h
[2025-10-28T05:05:13.643Z] [LOG]          13. 2025-09-18 (Weekday): 8.17h
[2025-10-28T05:05:13.643Z] [LOG]          14. 2025-09-19 (Weekday): 6.00h
[2025-10-28T05:05:13.644Z] [LOG]          15. 2025-09-20 (Saturday): 4.00h
[2025-10-28T05:05:13.644Z] [LOG]          16. 2025-09-22 (Weekday): 5.00h
[2025-10-28T05:05:13.647Z] [LOG]          17. 2025-09-24 (Weekday): 8.50h
[2025-10-28T05:05:13.648Z] [LOG]          18. 2025-09-25 (Weekday): 8.25h
[2025-10-28T05:05:13.649Z] [LOG]          19. 2025-09-26 (Weekday): 5.50h
[2025-10-28T05:05:13.649Z] [LOG]          20. 2025-09-27 (Saturday): 2.00h
[2025-10-28T05:05:13.650Z] [LOG]          21. 2025-09-29 (Weekday): 8.25h
[2025-10-28T05:05:13.651Z] [LOG]          22. 2025-09-30 (Weekday): 8.42h
[2025-10-28T05:05:13.863Z] [LOG] 
      📊 Aggregated Totals for Anoj null (EMP000014):
[2025-10-28T05:05:13.863Z] [LOG]          Weekday: 144.56h
[2025-10-28T05:05:13.864Z] [LOG]          Saturday: 8.00h
[2025-10-28T05:05:13.864Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:05:13.864Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:05:13.865Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Anoj null (EMP000014) - completed sessions only:
[2025-10-28T05:05:13.865Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:05:13.866Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:05:13.866Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:05:13.866Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:05:13.867Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Anoj null (EMP000014) - completed sessions only:
[2025-10-28T05:05:13.867Z] [LOG]       Weekday: 144.56h
[2025-10-28T05:05:13.868Z] [LOG]       Saturday: 8.00h
[2025-10-28T05:05:13.868Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:05:13.868Z] [LOG]       Total Actual: 152.56h
[2025-10-28T05:05:13.869Z] [LOG] 
   💵 EXPECTED Earned Salary for Anoj null (EMP000014) - until NOW:
[2025-10-28T05:05:13.870Z] [LOG]       Weekday: 178.50h × Rs.235.29 = Rs.41999.26
[2025-10-28T05:05:13.870Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-28T05:05:13.870Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:05:13.871Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:05:13.871Z] [LOG]       Total Expected Earned: Rs.49999.18
[2025-10-28T05:05:13.871Z] [LOG] 
   💵 ACTUAL Earned Salary for Anoj null (EMP000014) - including live session:
[2025-10-28T05:05:13.871Z] [LOG]       Weekday: 144.56h × Rs.235.29 = Rs.34013.52
[2025-10-28T05:05:13.872Z] [LOG]       Saturday: 8.00h × Rs.444.44 = Rs.3555.52
[2025-10-28T05:05:13.872Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:05:13.872Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:05:13.872Z] [LOG]       Total Actual Earned: Rs.37569.04
[2025-10-28T05:05:13.873Z] [LOG] 
   📊 FINAL CALCULATION for Anoj null (EMP000014):
[2025-10-28T05:05:13.873Z] [LOG]       Calculated At: Oct 28, 2025, 10:35:13
[2025-10-28T05:05:13.873Z] [LOG]       Expected Earned: Rs.49999.18
[2025-10-28T05:05:13.873Z] [LOG]       Actual Earned: Rs.37569.04
[2025-10-28T05:05:13.874Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:05:13.874Z] [LOG]       Attendance Deduction: Rs.12430.14
[2025-10-28T05:05:13.874Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:05:13.874Z] [LOG]       📉 Shortfall for Anoj null: 43.94 hours (24.86% of expected)
[2025-10-28T05:05:13.875Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:05:13.875Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:05:13.875Z] [LOG]    Actual Earned Base: Rs.37569.04
[2025-10-28T05:05:13.875Z] [LOG]    Attendance Shortfall: Rs.12430.14
[2025-10-28T05:05:13.876Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:05:13.876Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:05:13.876Z] [LOG]    Gross Salary: 37569.0424
[2025-10-28T05:05:13.876Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:05:13.877Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:05:13.877Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:13.877Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:05:13.877Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:13.878Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:05:13.878Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:13.878Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:05:13.878Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:13.880Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:05:13.880Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:13.880Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:05:13.880Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:13.881Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:05:13.881Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:13.881Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:05:13.881Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:13.882Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:05:13.882Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:13.882Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:05:13.882Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:13.883Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:05:13.883Z] [LOG]    EPF/ETF calculated on: Rs.37569.04
[2025-10-28T05:05:13.883Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:05:13.883Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:05:13.883Z] [LOG] 💰 GROSS CALCULATION for Anoj null:
[2025-10-28T05:05:13.884Z] [LOG]    Base Salary: 50000
[2025-10-28T05:05:13.884Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:05:13.884Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:05:13.884Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:13.885Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:05:13.885Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:13.885Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:05:13.885Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:14.104Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:05:14.104Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:05:14.104Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:05:14.105Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:05:14.105Z] [LOG]    Actual Earned Base: Rs.37569.04
[2025-10-28T05:05:14.105Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:05:14.106Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:05:14.106Z] [LOG]    = Gross Salary: Rs.37569.04
[2025-10-28T05:05:14.106Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:05:14.107Z] [LOG]    Attendance Shortfall (Info): Rs.12430.14
[2025-10-28T05:05:14.107Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:05:14.107Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:05:14.108Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:05:14.108Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:05:14.108Z] [LOG]    Gross Salary: Rs.37569.04
[2025-10-28T05:05:14.109Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:05:14.109Z] [LOG]    = NET SALARY: Rs.37569.04
[2025-10-28T05:05:14.109Z] [LOG] 
💾 Database Update:
[2025-10-28T05:05:14.110Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:05:14.110Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:05:14.334Z] [LOG] 
📝 Components to save:
[2025-10-28T05:05:14.335Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:05:14.335Z] [LOG]    Deduction components: 1
[2025-10-28T05:05:14.336Z] [LOG] Creating components for record b38b9d1d-9cae-47bd-b2b5-dacb3b09d4e5: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:05:14.338Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 37569.0424
}
[2025-10-28T05:05:14.557Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:05:14.844Z] [LOG] Created payroll_record_component: 6d2e2115-4a2a-4267-9c42-700382c27b46 for Base Salary
[2025-10-28T05:05:14.844Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 12430.1426
}
[2025-10-28T05:05:15.065Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:05:15.284Z] [LOG] Created payroll_record_component: 2faceb5b-9069-4b30-a354-acc0200cf3f3 for Attendance Shortfall (Info)
[2025-10-28T05:05:15.737Z] [LOG] ✅ Financial balances updated successfully for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-28T05:05:15.738Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:05:15.739Z] [LOG] 
======================================================================
[2025-10-28T05:05:15.739Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Anoj null
[2025-10-28T05:05:15.740Z] [LOG] ======================================================================
[2025-10-28T05:05:15.741Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:05:15.741Z] [LOG]    Actual Earned Base (Attendance-based): Rs.37569.04
[2025-10-28T05:05:15.742Z] [LOG]    Attendance Shortfall: Rs.12430.14
[2025-10-28T05:05:15.742Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:05:15.743Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:05:15.743Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:05:15.744Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:05:15.747Z] [LOG]    GROSS SALARY: Rs.37569.04
[2025-10-28T05:05:15.748Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:05:15.749Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:05:15.749Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:05:15.750Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:05:15.750Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:05:15.751Z] [LOG]       - Attendance Shortfall (Info): Rs.12430.14
[2025-10-28T05:05:15.752Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:05:15.752Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:05:15.753Z] [LOG]    NET SALARY: Rs.37569.04
[2025-10-28T05:05:15.753Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:05:15.754Z] [LOG] ======================================================================

[2025-10-28T05:05:15.755Z] [LOG] ✅ Anoj null: Calculation completed successfully
[2025-10-28T05:05:15.755Z] [LOG] 📊 Progress: 25/34 (73.5%)
[2025-10-28T05:05:15.756Z] [LOG] 
🧮 Processing: Safna Nawas null (EMP000021)
[2025-10-28T05:05:15.757Z] [LOG] 📋 Record ID: b9473c14-8fbd-4fed-93c8-a22ff2608abf
[2025-10-28T05:05:15.757Z] [LOG] 
======================================================================
[2025-10-28T05:05:15.758Z] [LOG] 🧮 CALCULATING PAYROLL: Safna Nawas null (EMP000021)
[2025-10-28T05:05:15.758Z] [LOG] ======================================================================
[2025-10-28T05:05:16.688Z] [LOG] 🔍 Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-28T05:05:16.688Z] [LOG]    Total components: 13
[2025-10-28T05:05:16.689Z] [LOG]    Applicable components: 13
[2025-10-28T05:05:16.689Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T05:05:21.591Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:05:21.592Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:05:21.812Z] [LOG] 📊 Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-28T05:05:22.051Z] [LOG] 📊 Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-28T05:05:22.264Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-28T05:05:22.264Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:05:22.266Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:05:22.697Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:05:22.698Z] [LOG]    👤 Employee: Safna Nawas null (EMP000021)
[2025-10-28T05:05:22.698Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:05:22.699Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:05:22.700Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T05:05:22.700Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:05:22.929Z] [LOG] 
   💵 Pre-calculated Rates for Safna Nawas null (EMP000021):
[2025-10-28T05:05:22.930Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-28T05:05:22.931Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-28T05:05:22.931Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-28T05:05:22.932Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:05:22.932Z] [LOG] 
   📊 Full Period Working Days for Safna Nawas null (EMP000021):
[2025-10-28T05:05:22.933Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:05:22.934Z] [LOG] 
   📊 Working Days for Expected Calculation for Safna Nawas null (EMP000021):
[2025-10-28T05:05:22.934Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:05:22.935Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:05:23.156Z] [LOG] 
   ⏰ Calculating Completed Hours for Safna Nawas null (EMP000021) - All completed sessions:
[2025-10-28T05:05:23.156Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:05:23.156Z] [LOG]       Total completed sessions found: 25
[2025-10-28T05:05:23.157Z] [LOG] 
      📋 Attendance Breakdown for Safna Nawas null (EMP000021):
[2025-10-28T05:05:23.157Z] [LOG]          1. 2025-09-01 (Weekday): 6.55h
[2025-10-28T05:05:23.157Z] [LOG]          2. 2025-09-02 (Weekday): 7.83h
[2025-10-28T05:05:23.158Z] [LOG]          3. 2025-09-03 (Weekday): 7.99h
[2025-10-28T05:05:23.158Z] [LOG]          4. 2025-09-04 (Weekday): 8.37h
[2025-10-28T05:05:23.159Z] [LOG]          5. 2025-09-06 (Saturday): 4.17h
[2025-10-28T05:05:23.159Z] [LOG]          6. 2025-09-08 (Weekday): 8.17h
[2025-10-28T05:05:23.159Z] [LOG]          7. 2025-09-09 (Weekday): 7.72h
[2025-10-28T05:05:23.160Z] [LOG]          8. 2025-09-10 (Weekday): 7.82h
[2025-10-28T05:05:23.160Z] [LOG]          9. 2025-09-11 (Weekday): 4.14h
[2025-10-28T05:05:23.160Z] [LOG]          10. 2025-09-12 (Weekday): 8.20h
[2025-10-28T05:05:23.160Z] [LOG]          11. 2025-09-13 (Saturday): 3.90h
[2025-10-28T05:05:23.161Z] [LOG]          12. 2025-09-15 (Weekday): 8.50h
[2025-10-28T05:05:23.161Z] [LOG]          13. 2025-09-16 (Weekday): 7.80h
[2025-10-28T05:05:23.161Z] [LOG]          14. 2025-09-17 (Weekday): 7.50h
[2025-10-28T05:05:23.162Z] [LOG]          15. 2025-09-18 (Weekday): 8.17h
[2025-10-28T05:05:23.162Z] [LOG]          16. 2025-09-19 (Weekday): 8.17h
[2025-10-28T05:05:23.163Z] [LOG]          17. 2025-09-20 (Saturday): 4.50h
[2025-10-28T05:05:23.163Z] [LOG]          18. 2025-09-22 (Weekday): 8.17h
[2025-10-28T05:05:23.163Z] [LOG]          19. 2025-09-23 (Weekday): 8.33h
[2025-10-28T05:05:23.163Z] [LOG]          20. 2025-09-24 (Weekday): 8.46h
[2025-10-28T05:05:23.164Z] [LOG]          21. 2025-09-25 (Weekday): 7.98h
[2025-10-28T05:05:23.164Z] [LOG]          22. 2025-09-26 (Weekday): 7.63h
[2025-10-28T05:05:23.164Z] [LOG]          23. 2025-09-27 (Saturday): 4.17h
[2025-10-28T05:05:23.165Z] [LOG]          24. 2025-09-29 (Weekday): 8.17h
[2025-10-28T05:05:23.165Z] [LOG]          25. 2025-09-30 (Weekday): 8.06h
[2025-10-28T05:05:23.396Z] [LOG] 
      📊 Aggregated Totals for Safna Nawas null (EMP000021):
[2025-10-28T05:05:23.398Z] [LOG]          Weekday: 163.73h
[2025-10-28T05:05:23.398Z] [LOG]          Saturday: 16.74h
[2025-10-28T05:05:23.399Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:05:23.400Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:05:23.400Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Safna Nawas null (EMP000021) - completed sessions only:
[2025-10-28T05:05:23.401Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:05:23.402Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:05:23.402Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:05:23.403Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:05:23.403Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Safna Nawas null (EMP000021) - completed sessions only:
[2025-10-28T05:05:23.405Z] [LOG]       Weekday: 163.73h
[2025-10-28T05:05:23.405Z] [LOG]       Saturday: 16.74h
[2025-10-28T05:05:23.406Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:05:23.406Z] [LOG]       Total Actual: 180.47h
[2025-10-28T05:05:23.407Z] [LOG] 
   💵 EXPECTED Earned Salary for Safna Nawas null (EMP000021) - until NOW:
[2025-10-28T05:05:23.408Z] [LOG]       Weekday: 178.50h × Rs.235.29 = Rs.41999.26
[2025-10-28T05:05:23.408Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-28T05:05:23.409Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:05:23.410Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:05:23.410Z] [LOG]       Total Expected Earned: Rs.49999.18
[2025-10-28T05:05:23.411Z] [LOG] 
   💵 ACTUAL Earned Salary for Safna Nawas null (EMP000021) - including live session:
[2025-10-28T05:05:23.412Z] [LOG]       Weekday: 163.73h × Rs.235.29 = Rs.38524.03
[2025-10-28T05:05:23.414Z] [LOG]       Saturday: 16.74h × Rs.444.44 = Rs.7439.93
[2025-10-28T05:05:23.415Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:05:23.415Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:05:23.416Z] [LOG]       Total Actual Earned: Rs.45963.96
[2025-10-28T05:05:23.417Z] [LOG] 
   📊 FINAL CALCULATION for Safna Nawas null (EMP000021):
[2025-10-28T05:05:23.418Z] [LOG]       Calculated At: Oct 28, 2025, 10:35:23
[2025-10-28T05:05:23.418Z] [LOG]       Expected Earned: Rs.49999.18
[2025-10-28T05:05:23.419Z] [LOG]       Actual Earned: Rs.45963.96
[2025-10-28T05:05:23.420Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:05:23.420Z] [LOG]       Attendance Deduction: Rs.4035.23
[2025-10-28T05:05:23.421Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:05:23.421Z] [LOG]       📉 Shortfall for Safna Nawas null: 16.03 hours (8.07% of expected)
[2025-10-28T05:05:23.422Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:05:23.423Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:05:23.423Z] [LOG]    Actual Earned Base: Rs.45963.96
[2025-10-28T05:05:23.424Z] [LOG]    Attendance Shortfall: Rs.4035.23
[2025-10-28T05:05:23.424Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:05:23.425Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:05:23.426Z] [LOG]    Gross Salary: 45963.9573
[2025-10-28T05:05:23.426Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:05:23.427Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:05:23.427Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:23.428Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:05:23.430Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:23.431Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:05:23.431Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:23.432Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:05:23.433Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:23.433Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:05:23.434Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:23.434Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:05:23.435Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:23.435Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:05:23.436Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:23.436Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:05:23.437Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:23.437Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:05:23.437Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:23.437Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:05:23.438Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:23.438Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:05:23.438Z] [LOG]    EPF/ETF calculated on: Rs.45963.96
[2025-10-28T05:05:23.439Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:05:23.439Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:05:23.439Z] [LOG] 💰 GROSS CALCULATION for Safna Nawas null:
[2025-10-28T05:05:23.440Z] [LOG]    Base Salary: 50000
[2025-10-28T05:05:23.440Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:05:23.440Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:05:23.441Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:23.441Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:05:23.441Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:23.441Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:05:23.442Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:23.667Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:05:23.668Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:05:23.668Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:05:23.669Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:05:23.670Z] [LOG]    Actual Earned Base: Rs.45963.96
[2025-10-28T05:05:23.670Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:05:23.671Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:05:23.671Z] [LOG]    = Gross Salary: Rs.45963.96
[2025-10-28T05:05:23.672Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:05:23.673Z] [LOG]    Attendance Shortfall (Info): Rs.4035.23
[2025-10-28T05:05:23.673Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:05:23.674Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:05:23.676Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:05:23.677Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:05:23.677Z] [LOG]    Gross Salary: Rs.45963.96
[2025-10-28T05:05:23.678Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:05:23.679Z] [LOG]    = NET SALARY: Rs.45963.96
[2025-10-28T05:05:23.680Z] [LOG] 
💾 Database Update:
[2025-10-28T05:05:23.682Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:05:23.682Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:05:23.903Z] [LOG] 
📝 Components to save:
[2025-10-28T05:05:23.904Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:05:23.904Z] [LOG]    Deduction components: 1
[2025-10-28T05:05:23.905Z] [LOG] Creating components for record b9473c14-8fbd-4fed-93c8-a22ff2608abf: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:05:23.906Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 45963.9573
}
[2025-10-28T05:05:24.143Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:05:24.371Z] [LOG] Created payroll_record_component: b3fbf288-52f0-430a-891e-6986d8a7e271 for Base Salary
[2025-10-28T05:05:24.372Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 4035.227699999996
}
[2025-10-28T05:05:24.593Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:05:24.831Z] [LOG] Created payroll_record_component: d0035b8f-674d-48a2-9d8c-ff4f4b98cfbd for Attendance Shortfall (Info)
[2025-10-28T05:05:25.300Z] [LOG] ✅ Financial balances updated successfully for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-28T05:05:25.301Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:05:25.301Z] [LOG] 
======================================================================
[2025-10-28T05:05:25.302Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Safna Nawas null
[2025-10-28T05:05:25.302Z] [LOG] ======================================================================
[2025-10-28T05:05:25.303Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:05:25.304Z] [LOG]    Actual Earned Base (Attendance-based): Rs.45963.96
[2025-10-28T05:05:25.304Z] [LOG]    Attendance Shortfall: Rs.4035.23
[2025-10-28T05:05:25.305Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:05:25.305Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:05:25.306Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:05:25.306Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:05:25.307Z] [LOG]    GROSS SALARY: Rs.45963.96
[2025-10-28T05:05:25.308Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:05:25.308Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:05:25.309Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:05:25.309Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:05:25.310Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:05:25.310Z] [LOG]       - Attendance Shortfall (Info): Rs.4035.23
[2025-10-28T05:05:25.311Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:05:25.313Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:05:25.314Z] [LOG]    NET SALARY: Rs.45963.96
[2025-10-28T05:05:25.315Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:05:25.315Z] [LOG] ======================================================================

[2025-10-28T05:05:25.316Z] [LOG] ✅ Safna Nawas null: Calculation completed successfully
[2025-10-28T05:05:25.317Z] [LOG] 📊 Progress: 26/34 (76.5%)
[2025-10-28T05:05:25.317Z] [LOG] 
🧮 Processing: Maryam null (EMP000035)
[2025-10-28T05:05:25.318Z] [LOG] 📋 Record ID: ccaa051a-5fbf-48c4-89ae-14a07afb2ec7
[2025-10-28T05:05:25.319Z] [LOG] 
======================================================================
[2025-10-28T05:05:25.319Z] [LOG] 🧮 CALCULATING PAYROLL: Maryam null (EMP000035)
[2025-10-28T05:05:25.320Z] [LOG] ======================================================================
[2025-10-28T05:05:26.233Z] [LOG] 🔍 Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-28T05:05:26.234Z] [LOG]    Total components: 13
[2025-10-28T05:05:26.235Z] [LOG]    Applicable components: 13
[2025-10-28T05:05:26.235Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-28T05:05:28.476Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:05:28.476Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:05:28.709Z] [LOG] 📊 Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-28T05:05:28.930Z] [LOG] 📊 Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-28T05:05:29.157Z] [LOG] 📊 Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-28T05:05:29.158Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:05:29.159Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:05:29.610Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:05:29.611Z] [LOG]    👤 Employee: Maryam null (EMP000035)
[2025-10-28T05:05:29.611Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:05:29.611Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:05:29.611Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-28T05:05:29.611Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:05:30.712Z] [LOG] 
   💵 Pre-calculated Rates for Maryam null (EMP000035):
[2025-10-28T05:05:30.713Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-28T05:05:30.713Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-28T05:05:30.713Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-28T05:05:30.713Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:05:30.714Z] [LOG] 
   📊 Full Period Working Days for Maryam null (EMP000035):
[2025-10-28T05:05:30.714Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:05:30.714Z] [LOG] 
   📊 Working Days for Expected Calculation for Maryam null (EMP000035):
[2025-10-28T05:05:30.714Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:05:30.714Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:05:58.758Z] [LOG] 
   ⏰ Calculating Completed Hours for Maryam null (EMP000035) - All completed sessions:
[2025-10-28T05:05:58.759Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:05:58.759Z] [LOG]       Total completed sessions found: 21
[2025-10-28T05:05:58.760Z] [LOG] 
      📋 Attendance Breakdown for Maryam null (EMP000035):
[2025-10-28T05:05:58.760Z] [LOG]          1. 2025-09-02 (Weekday): 8.49h
[2025-10-28T05:05:58.761Z] [LOG]          2. 2025-09-03 (Weekday): 8.16h
[2025-10-28T05:05:58.762Z] [LOG]          3. 2025-09-04 (Weekday): 8.18h
[2025-10-28T05:05:58.763Z] [LOG]          4. 2025-09-06 (Saturday): 4.50h
[2025-10-28T05:05:58.764Z] [LOG]          5. 2025-09-08 (Weekday): 8.17h
[2025-10-28T05:05:58.764Z] [LOG]          6. 2025-09-09 (Weekday): 8.50h
[2025-10-28T05:05:58.765Z] [LOG]          7. 2025-09-10 (Weekday): 8.03h
[2025-10-28T05:05:58.766Z] [LOG]          8. 2025-09-11 (Weekday): 8.07h
[2025-10-28T05:05:58.767Z] [LOG]          9. 2025-09-12 (Weekday): 5.74h
[2025-10-28T05:05:58.767Z] [LOG]          10. 2025-09-13 (Saturday): 4.50h
[2025-10-28T05:05:58.768Z] [LOG]          11. 2025-09-15 (Weekday): 7.94h
[2025-10-28T05:05:58.768Z] [LOG]          12. 2025-09-16 (Weekday): 7.89h
[2025-10-28T05:05:58.769Z] [LOG]          13. 2025-09-17 (Weekday): 8.14h
[2025-10-28T05:05:58.769Z] [LOG]          14. 2025-09-20 (Saturday): 4.50h
[2025-10-28T05:05:58.770Z] [LOG]          15. 2025-09-22 (Weekday): 7.94h
[2025-10-28T05:05:58.771Z] [LOG]          16. 2025-09-23 (Weekday): 8.19h
[2025-10-28T05:05:58.771Z] [LOG]          17. 2025-09-24 (Weekday): 4.16h
[2025-10-28T05:05:58.772Z] [LOG]          18. 2025-09-25 (Weekday): 8.12h
[2025-10-28T05:05:58.773Z] [LOG]          19. 2025-09-26 (Weekday): 8.19h
[2025-10-28T05:05:58.773Z] [LOG]          20. 2025-09-27 (Saturday): 4.00h
[2025-10-28T05:05:58.774Z] [LOG]          21. 2025-09-30 (Weekday): 8.42h
[2025-10-28T05:05:59.166Z] [LOG] 
      📊 Aggregated Totals for Maryam null (EMP000035):
[2025-10-28T05:05:59.167Z] [LOG]          Weekday: 132.33h
[2025-10-28T05:05:59.168Z] [LOG]          Saturday: 17.50h
[2025-10-28T05:05:59.168Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:05:59.169Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:05:59.170Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Maryam null (EMP000035) - completed sessions only:
[2025-10-28T05:05:59.170Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:05:59.171Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:05:59.171Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:05:59.172Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:05:59.172Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Maryam null (EMP000035) - completed sessions only:
[2025-10-28T05:05:59.173Z] [LOG]       Weekday: 132.33h
[2025-10-28T05:05:59.175Z] [LOG]       Saturday: 17.50h
[2025-10-28T05:05:59.175Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:05:59.176Z] [LOG]       Total Actual: 149.83h
[2025-10-28T05:05:59.177Z] [LOG] 
   💵 EXPECTED Earned Salary for Maryam null (EMP000035) - until NOW:
[2025-10-28T05:05:59.177Z] [LOG]       Weekday: 178.50h × Rs.188.24 = Rs.33600.84
[2025-10-28T05:05:59.178Z] [LOG]       Saturday: 18.00h × Rs.355.56 = Rs.6400.08
[2025-10-28T05:05:59.180Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:05:59.181Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:05:59.182Z] [LOG]       Total Expected Earned: Rs.40000.92
[2025-10-28T05:05:59.182Z] [LOG] 
   💵 ACTUAL Earned Salary for Maryam null (EMP000035) - including live session:
[2025-10-28T05:05:59.183Z] [LOG]       Weekday: 132.33h × Rs.188.24 = Rs.24909.80
[2025-10-28T05:05:59.183Z] [LOG]       Saturday: 17.50h × Rs.355.56 = Rs.6222.30
[2025-10-28T05:05:59.184Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:05:59.184Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:05:59.185Z] [LOG]       Total Actual Earned: Rs.31132.10
[2025-10-28T05:05:59.186Z] [LOG] 
   📊 FINAL CALCULATION for Maryam null (EMP000035):
[2025-10-28T05:05:59.187Z] [LOG]       Calculated At: Oct 28, 2025, 10:35:59
[2025-10-28T05:05:59.188Z] [LOG]       Expected Earned: Rs.40000.92
[2025-10-28T05:05:59.188Z] [LOG]       Actual Earned: Rs.31132.10
[2025-10-28T05:05:59.189Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:05:59.189Z] [LOG]       Attendance Deduction: Rs.8868.82
[2025-10-28T05:05:59.190Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:05:59.190Z] [LOG]       📉 Shortfall for Maryam null: 46.67 hours (22.17% of expected)
[2025-10-28T05:05:59.191Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:05:59.192Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-28T05:05:59.192Z] [LOG]    Actual Earned Base: Rs.31132.10
[2025-10-28T05:05:59.193Z] [LOG]    Attendance Shortfall: Rs.8868.82
[2025-10-28T05:05:59.193Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:05:59.194Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:05:59.195Z] [LOG]    Gross Salary: 31132.099200000004
[2025-10-28T05:05:59.196Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:05:59.197Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:05:59.197Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:59.197Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:05:59.198Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:59.198Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:05:59.198Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:59.199Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:05:59.199Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:59.199Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:05:59.200Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:59.200Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:05:59.200Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:59.200Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:05:59.201Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:59.201Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:05:59.201Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:59.201Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:05:59.202Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:59.202Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:05:59.202Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:59.202Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:05:59.203Z] [LOG]    EPF/ETF calculated on: Rs.31132.10
[2025-10-28T05:05:59.203Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:05:59.203Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:05:59.203Z] [LOG] 💰 GROSS CALCULATION for Maryam null:
[2025-10-28T05:05:59.204Z] [LOG]    Base Salary: 40000
[2025-10-28T05:05:59.216Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:05:59.227Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:05:59.231Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:59.231Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:05:59.231Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:59.232Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:05:59.232Z] [LOG]    Fixed amount: 0
[2025-10-28T05:05:59.569Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:05:59.570Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:05:59.570Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:05:59.571Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:05:59.572Z] [LOG]    Actual Earned Base: Rs.31132.10
[2025-10-28T05:05:59.572Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:05:59.573Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:05:59.573Z] [LOG]    = Gross Salary: Rs.31132.10
[2025-10-28T05:05:59.574Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:05:59.575Z] [LOG]    Attendance Shortfall (Info): Rs.8868.82
[2025-10-28T05:05:59.575Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:05:59.576Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:05:59.577Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:05:59.578Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:05:59.580Z] [LOG]    Gross Salary: Rs.31132.10
[2025-10-28T05:05:59.581Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:05:59.582Z] [LOG]    = NET SALARY: Rs.31132.10
[2025-10-28T05:05:59.583Z] [LOG] 
💾 Database Update:
[2025-10-28T05:05:59.583Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:05:59.584Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:05:59.815Z] [LOG] 
📝 Components to save:
[2025-10-28T05:05:59.816Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:05:59.816Z] [LOG]    Deduction components: 1
[2025-10-28T05:05:59.816Z] [LOG] Creating components for record ccaa051a-5fbf-48c4-89ae-14a07afb2ec7: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:05:59.817Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 31132.099200000004
}
[2025-10-28T05:06:00.039Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:06:00.272Z] [LOG] Created payroll_record_component: f909b51f-d165-4ad0-b55b-051a19bb7ac0 for Base Salary
[2025-10-28T05:06:00.272Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 8868.820800000001
}
[2025-10-28T05:06:00.486Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:06:01.159Z] [LOG] Created payroll_record_component: 6a0664bb-5a7b-4b87-9b4e-489c0f0e58fc for Attendance Shortfall (Info)
[2025-10-28T05:06:01.583Z] [LOG] ✅ Financial balances updated successfully for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:01.583Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:06:01.584Z] [LOG] 
======================================================================
[2025-10-28T05:06:01.585Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Maryam null
[2025-10-28T05:06:01.585Z] [LOG] ======================================================================
[2025-10-28T05:06:01.586Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-28T05:06:01.586Z] [LOG]    Actual Earned Base (Attendance-based): Rs.31132.10
[2025-10-28T05:06:01.587Z] [LOG]    Attendance Shortfall: Rs.8868.82
[2025-10-28T05:06:01.587Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:01.588Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:06:01.589Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:06:01.590Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:01.590Z] [LOG]    GROSS SALARY: Rs.31132.10
[2025-10-28T05:06:01.591Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:01.592Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:06:01.592Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:06:01.593Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:06:01.594Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:06:01.594Z] [LOG]       - Attendance Shortfall (Info): Rs.8868.82
[2025-10-28T05:06:01.595Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:06:01.597Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:01.597Z] [LOG]    NET SALARY: Rs.31132.10
[2025-10-28T05:06:01.598Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:06:01.598Z] [LOG] ======================================================================

[2025-10-28T05:06:01.599Z] [LOG] ✅ Maryam null: Calculation completed successfully
[2025-10-28T05:06:01.599Z] [LOG] 📊 Progress: 27/34 (79.4%)
[2025-10-28T05:06:01.599Z] [LOG] 
🧮 Processing: Piyumi null (EMP000025)
[2025-10-28T05:06:01.600Z] [LOG] 📋 Record ID: d4315623-e736-47b4-841a-577606eb2408
[2025-10-28T05:06:01.600Z] [LOG] 
======================================================================
[2025-10-28T05:06:01.601Z] [LOG] 🧮 CALCULATING PAYROLL: Piyumi null (EMP000025)
[2025-10-28T05:06:01.601Z] [LOG] ======================================================================
[2025-10-28T05:06:02.792Z] [LOG] 🔍 Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-28T05:06:02.793Z] [LOG]    Total components: 13
[2025-10-28T05:06:02.793Z] [LOG]    Applicable components: 13
[2025-10-28T05:06:02.794Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T05:06:05.263Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:06:05.264Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:06:05.480Z] [LOG] 📊 Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:05.719Z] [LOG] 📊 Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:05.946Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:05.946Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:06:05.948Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:06:06.376Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:06:06.377Z] [LOG]    👤 Employee: Piyumi null (EMP000025)
[2025-10-28T05:06:06.377Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:06:06.378Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:06:06.379Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T05:06:06.380Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:06:06.589Z] [LOG] 
   💵 Pre-calculated Rates for Piyumi null (EMP000025):
[2025-10-28T05:06:06.590Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-28T05:06:06.590Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-28T05:06:06.591Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-28T05:06:06.591Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:06:06.592Z] [LOG] 
   📊 Full Period Working Days for Piyumi null (EMP000025):
[2025-10-28T05:06:06.593Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:06:06.593Z] [LOG] 
   📊 Working Days for Expected Calculation for Piyumi null (EMP000025):
[2025-10-28T05:06:06.594Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:06:06.594Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:06:06.809Z] [LOG] 
   ⏰ Calculating Completed Hours for Piyumi null (EMP000025) - All completed sessions:
[2025-10-28T05:06:06.810Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:06:06.811Z] [LOG]       Total completed sessions found: 19
[2025-10-28T05:06:06.811Z] [LOG] 
      📋 Attendance Breakdown for Piyumi null (EMP000025):
[2025-10-28T05:06:06.813Z] [LOG]          1. 2025-09-01 (Weekday): 8.50h
[2025-10-28T05:06:06.814Z] [LOG]          2. 2025-09-02 (Weekday): 8.50h
[2025-10-28T05:06:06.814Z] [LOG]          3. 2025-09-03 (Weekday): 8.50h
[2025-10-28T05:06:06.815Z] [LOG]          4. 2025-09-04 (Weekday): 4.66h
[2025-10-28T05:06:06.816Z] [LOG]          5. 2025-09-06 (Saturday): 2.18h
[2025-10-28T05:06:06.816Z] [LOG]          6. 2025-09-08 (Weekday): 8.50h
[2025-10-28T05:06:06.817Z] [LOG]          7. 2025-09-09 (Weekday): 8.50h
[2025-10-28T05:06:06.818Z] [LOG]          8. 2025-09-10 (Weekday): 8.50h
[2025-10-28T05:06:06.819Z] [LOG]          9. 2025-09-11 (Weekday): 8.50h
[2025-10-28T05:06:06.819Z] [LOG]          10. 2025-09-13 (Saturday): 4.00h
[2025-10-28T05:06:06.820Z] [LOG]          11. 2025-09-19 (Weekday): 8.50h
[2025-10-28T05:06:06.820Z] [LOG]          12. 2025-09-22 (Weekday): 7.30h
[2025-10-28T05:06:06.821Z] [LOG]          13. 2025-09-23 (Weekday): 8.50h
[2025-10-28T05:06:06.822Z] [LOG]          14. 2025-09-24 (Weekday): 8.50h
[2025-10-28T05:06:06.822Z] [LOG]          15. 2025-09-25 (Weekday): 8.50h
[2025-10-28T05:06:06.823Z] [LOG]          16. 2025-09-26 (Weekday): 8.50h
[2025-10-28T05:06:06.824Z] [LOG]          17. 2025-09-27 (Saturday): 4.50h
[2025-10-28T05:06:06.824Z] [LOG]          18. 2025-09-29 (Weekday): 8.50h
[2025-10-28T05:06:06.825Z] [LOG]          19. 2025-09-30 (Weekday): 8.50h
[2025-10-28T05:06:07.040Z] [LOG] 
      📊 Aggregated Totals for Piyumi null (EMP000025):
[2025-10-28T05:06:07.041Z] [LOG]          Weekday: 130.96h
[2025-10-28T05:06:07.041Z] [LOG]          Saturday: 10.68h
[2025-10-28T05:06:07.042Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:06:07.042Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:06:07.043Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Piyumi null (EMP000025) - completed sessions only:
[2025-10-28T05:06:07.044Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:06:07.044Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:06:07.045Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:06:07.046Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:06:07.048Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Piyumi null (EMP000025) - completed sessions only:
[2025-10-28T05:06:07.049Z] [LOG]       Weekday: 130.96h
[2025-10-28T05:06:07.050Z] [LOG]       Saturday: 10.68h
[2025-10-28T05:06:07.050Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:06:07.051Z] [LOG]       Total Actual: 141.64h
[2025-10-28T05:06:07.051Z] [LOG] 
   💵 EXPECTED Earned Salary for Piyumi null (EMP000025) - until NOW:
[2025-10-28T05:06:07.052Z] [LOG]       Weekday: 178.50h × Rs.235.29 = Rs.41999.26
[2025-10-28T05:06:07.053Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-28T05:06:07.054Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:06:07.054Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:07.055Z] [LOG]       Total Expected Earned: Rs.49999.18
[2025-10-28T05:06:07.055Z] [LOG] 
   💵 ACTUAL Earned Salary for Piyumi null (EMP000025) - including live session:
[2025-10-28T05:06:07.056Z] [LOG]       Weekday: 130.96h × Rs.235.29 = Rs.30813.58
[2025-10-28T05:06:07.056Z] [LOG]       Saturday: 10.68h × Rs.444.44 = Rs.4746.62
[2025-10-28T05:06:07.057Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:06:07.058Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:07.058Z] [LOG]       Total Actual Earned: Rs.35560.20
[2025-10-28T05:06:07.059Z] [LOG] 
   📊 FINAL CALCULATION for Piyumi null (EMP000025):
[2025-10-28T05:06:07.060Z] [LOG]       Calculated At: Oct 28, 2025, 10:36:07
[2025-10-28T05:06:07.061Z] [LOG]       Expected Earned: Rs.49999.18
[2025-10-28T05:06:07.061Z] [LOG]       Actual Earned: Rs.35560.20
[2025-10-28T05:06:07.062Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:07.064Z] [LOG]       Attendance Deduction: Rs.14438.99
[2025-10-28T05:06:07.064Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:06:07.065Z] [LOG]       📉 Shortfall for Piyumi null: 54.86 hours (28.88% of expected)
[2025-10-28T05:06:07.066Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:06:07.067Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:06:07.067Z] [LOG]    Actual Earned Base: Rs.35560.20
[2025-10-28T05:06:07.068Z] [LOG]    Attendance Shortfall: Rs.14438.99
[2025-10-28T05:06:07.068Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:06:07.069Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:06:07.070Z] [LOG]    Gross Salary: 35560.1976
[2025-10-28T05:06:07.070Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:06:07.071Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:06:07.072Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:07.072Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:06:07.073Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:07.074Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:06:07.074Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:07.075Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:06:07.075Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:07.076Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:06:07.077Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:07.077Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:06:07.078Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:07.079Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:06:07.080Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:07.081Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:06:07.082Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:07.082Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:06:07.083Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:07.083Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:06:07.084Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:07.085Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:06:07.085Z] [LOG]    EPF/ETF calculated on: Rs.35560.20
[2025-10-28T05:06:07.086Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:06:07.086Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:06:07.086Z] [LOG] 💰 GROSS CALCULATION for Piyumi null:
[2025-10-28T05:06:07.087Z] [LOG]    Base Salary: 50000
[2025-10-28T05:06:07.087Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:06:07.087Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:06:07.088Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:07.088Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:06:07.088Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:07.089Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:06:07.089Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:07.315Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:06:07.316Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:06:07.316Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:06:07.317Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:06:07.318Z] [LOG]    Actual Earned Base: Rs.35560.20
[2025-10-28T05:06:07.318Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:06:07.319Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:06:07.319Z] [LOG]    = Gross Salary: Rs.35560.20
[2025-10-28T05:06:07.320Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:06:07.320Z] [LOG]    Attendance Shortfall (Info): Rs.14438.99
[2025-10-28T05:06:07.321Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:06:07.322Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:06:07.323Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:06:07.323Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:06:07.324Z] [LOG]    Gross Salary: Rs.35560.20
[2025-10-28T05:06:07.325Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:06:07.326Z] [LOG]    = NET SALARY: Rs.35560.20
[2025-10-28T05:06:07.326Z] [LOG] 
💾 Database Update:
[2025-10-28T05:06:07.327Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:06:07.329Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:06:07.544Z] [LOG] 
📝 Components to save:
[2025-10-28T05:06:07.546Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:06:07.547Z] [LOG]    Deduction components: 1
[2025-10-28T05:06:07.548Z] [LOG] Creating components for record d4315623-e736-47b4-841a-577606eb2408: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:06:07.549Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 35560.1976
}
[2025-10-28T05:06:07.761Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:06:07.975Z] [LOG] Created payroll_record_component: e31b5339-c6a3-41bf-ba7a-61ab90e99346 for Base Salary
[2025-10-28T05:06:07.976Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 14438.987399999998
}
[2025-10-28T05:06:08.191Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:06:08.412Z] [LOG] Created payroll_record_component: 94a99572-2ce8-4331-a2f1-bf8be393286a for Attendance Shortfall (Info)
[2025-10-28T05:06:08.839Z] [LOG] ✅ Financial balances updated successfully for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:08.839Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:06:08.839Z] [LOG] 
======================================================================
[2025-10-28T05:06:08.839Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Piyumi null
[2025-10-28T05:06:08.840Z] [LOG] ======================================================================
[2025-10-28T05:06:08.840Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:06:08.840Z] [LOG]    Actual Earned Base (Attendance-based): Rs.35560.20
[2025-10-28T05:06:08.840Z] [LOG]    Attendance Shortfall: Rs.14438.99
[2025-10-28T05:06:08.840Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:08.840Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:06:08.840Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:06:08.841Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:08.841Z] [LOG]    GROSS SALARY: Rs.35560.20
[2025-10-28T05:06:08.841Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:08.841Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:06:08.842Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:06:08.842Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:06:08.842Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:06:08.842Z] [LOG]       - Attendance Shortfall (Info): Rs.14438.99
[2025-10-28T05:06:08.843Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:06:08.843Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:08.843Z] [LOG]    NET SALARY: Rs.35560.20
[2025-10-28T05:06:08.843Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:06:08.843Z] [LOG] ======================================================================

[2025-10-28T05:06:08.843Z] [LOG] ✅ Piyumi null: Calculation completed successfully
[2025-10-28T05:06:08.844Z] [LOG] 📊 Progress: 28/34 (82.4%)
[2025-10-28T05:06:08.844Z] [LOG] 
🧮 Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-28T05:06:08.844Z] [LOG] 📋 Record ID: da612408-7f67-48a6-b246-a5880e963b5f
[2025-10-28T05:06:08.844Z] [LOG] 
======================================================================
[2025-10-28T05:06:08.845Z] [LOG] 🧮 CALCULATING PAYROLL: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-28T05:06:08.845Z] [LOG] ======================================================================
[2025-10-28T05:06:09.748Z] [LOG] 🔍 Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-28T05:06:09.748Z] [LOG]    Total components: 13
[2025-10-28T05:06:09.748Z] [LOG]    Applicable components: 13
[2025-10-28T05:06:09.749Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-28T05:06:10.603Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:06:10.603Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:06:10.819Z] [LOG] 📊 Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:11.043Z] [LOG] 📊 Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:11.262Z] [LOG] 📊 Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:11.262Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:06:11.263Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:06:11.699Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:06:11.699Z] [LOG]    👤 Employee: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-28T05:06:11.699Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:06:11.700Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:06:11.700Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T05:06:11.700Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:06:11.924Z] [LOG] 
   💵 Pre-calculated Rates for G.M Supathala Sadaru Madhushan null (EMP000042):
[2025-10-28T05:06:11.924Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-28T05:06:11.925Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-28T05:06:11.925Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-28T05:06:11.925Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:06:11.925Z] [LOG] 
   📊 Full Period Working Days for G.M Supathala Sadaru Madhushan null (EMP000042):
[2025-10-28T05:06:11.925Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:06:11.926Z] [LOG] 
   📊 Working Days for Expected Calculation for G.M Supathala Sadaru Madhushan null (EMP000042):
[2025-10-28T05:06:11.926Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:06:11.926Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:06:12.144Z] [LOG] 
   ⏰ Calculating Completed Hours for G.M Supathala Sadaru Madhushan null (EMP000042) - All completed sessions:
[2025-10-28T05:06:12.144Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:06:12.145Z] [LOG]       Total completed sessions found: 0
[2025-10-28T05:06:12.373Z] [LOG] 
      📊 Aggregated Totals for G.M Supathala Sadaru Madhushan null (EMP000042):
[2025-10-28T05:06:12.373Z] [LOG]          Weekday: 0.00h
[2025-10-28T05:06:12.374Z] [LOG]          Saturday: 0.00h
[2025-10-28T05:06:12.374Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:06:12.374Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:06:12.374Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for G.M Supathala Sadaru Madhushan null (EMP000042) - completed sessions only:
[2025-10-28T05:06:12.375Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:06:12.375Z] [LOG]       Saturday: 34.00h
[2025-10-28T05:06:12.375Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:06:12.375Z] [LOG]       Total Expected: 212.50h
[2025-10-28T05:06:12.376Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for G.M Supathala Sadaru Madhushan null (EMP000042) - completed sessions only:
[2025-10-28T05:06:12.376Z] [LOG]       Weekday: 0.00h
[2025-10-28T05:06:12.376Z] [LOG]       Saturday: 0.00h
[2025-10-28T05:06:12.376Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:06:12.376Z] [LOG]       Total Actual: 0.00h
[2025-10-28T05:06:12.377Z] [LOG] 
   💵 EXPECTED Earned Salary for G.M Supathala Sadaru Madhushan null (EMP000042) - until NOW:
[2025-10-28T05:06:12.377Z] [LOG]       Weekday: 178.50h × Rs.235.29 = Rs.41999.26
[2025-10-28T05:06:12.377Z] [LOG]       Saturday: 34.00h × Rs.235.29 = Rs.7999.86
[2025-10-28T05:06:12.377Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:06:12.378Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:12.378Z] [LOG]       Total Expected Earned: Rs.49999.13
[2025-10-28T05:06:12.378Z] [LOG] 
   💵 ACTUAL Earned Salary for G.M Supathala Sadaru Madhushan null (EMP000042) - including live session:
[2025-10-28T05:06:12.378Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-28T05:06:12.379Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-28T05:06:12.380Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:06:12.380Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:12.380Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T05:06:12.380Z] [LOG] 
   📊 FINAL CALCULATION for G.M Supathala Sadaru Madhushan null (EMP000042):
[2025-10-28T05:06:12.381Z] [LOG]       Calculated At: Oct 28, 2025, 10:36:12
[2025-10-28T05:06:12.381Z] [LOG]       Expected Earned: Rs.49999.13
[2025-10-28T05:06:12.381Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T05:06:12.381Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:12.381Z] [LOG]       Attendance Deduction: Rs.49999.13
[2025-10-28T05:06:12.381Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:06:12.381Z] [LOG]       📉 Shortfall for G.M Supathala Sadaru Madhushan null: 212.50 hours (100.00% of expected)
[2025-10-28T05:06:12.382Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:06:12.382Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:06:12.382Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:06:12.382Z] [LOG]    Attendance Shortfall: Rs.49999.13
[2025-10-28T05:06:12.382Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:06:12.383Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:06:12.383Z] [LOG]    Gross Salary: 0
[2025-10-28T05:06:12.383Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:06:12.383Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:06:12.384Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:12.384Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:06:12.384Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:12.384Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:06:12.384Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:12.385Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:06:12.385Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:12.385Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:06:12.385Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:12.386Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:06:12.386Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:12.386Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:06:12.386Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:12.386Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:06:12.387Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:12.387Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:06:12.387Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:12.387Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:06:12.387Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:12.388Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:06:12.388Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T05:06:12.388Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:06:12.388Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:06:12.389Z] [LOG] 💰 GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-28T05:06:12.389Z] [LOG]    Base Salary: 50000
[2025-10-28T05:06:12.389Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:06:12.389Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:06:12.389Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:12.390Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:06:12.390Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:12.390Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:06:12.391Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:12.611Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:06:12.612Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:06:12.612Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:06:12.612Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:06:12.613Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:06:12.613Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:06:12.613Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:06:12.614Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T05:06:12.614Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:06:12.614Z] [LOG]    Attendance Shortfall (Info): Rs.49999.13
[2025-10-28T05:06:12.614Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:06:12.615Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:06:12.615Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:06:12.615Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:06:12.615Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T05:06:12.616Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:06:12.616Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T05:06:12.616Z] [LOG] 
💾 Database Update:
[2025-10-28T05:06:12.616Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:06:12.617Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:06:12.831Z] [LOG] 
📝 Components to save:
[2025-10-28T05:06:12.831Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T05:06:12.831Z] [LOG]    Deduction components: 1
[2025-10-28T05:06:12.832Z] [LOG] Creating components for record da612408-7f67-48a6-b246-a5880e963b5f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:06:12.832Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 49999.125
}
[2025-10-28T05:06:13.047Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:06:13.267Z] [LOG] Created payroll_record_component: 325abceb-c8b9-49df-8b89-5a7d9668a8fc for Attendance Shortfall (Info)
[2025-10-28T05:06:13.700Z] [LOG] ✅ Financial balances updated successfully for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:13.700Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:06:13.701Z] [LOG] 
======================================================================
[2025-10-28T05:06:13.701Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: G.M Supathala Sadaru Madhushan null
[2025-10-28T05:06:13.701Z] [LOG] ======================================================================
[2025-10-28T05:06:13.701Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:06:13.702Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T05:06:13.702Z] [LOG]    Attendance Shortfall: Rs.49999.13
[2025-10-28T05:06:13.702Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:13.702Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:06:13.702Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:06:13.703Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:13.703Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T05:06:13.703Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:13.703Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:06:13.704Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:06:13.704Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:06:13.704Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:06:13.704Z] [LOG]       - Attendance Shortfall (Info): Rs.49999.13
[2025-10-28T05:06:13.705Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:06:13.705Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:13.705Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T05:06:13.705Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:06:13.705Z] [LOG] ======================================================================

[2025-10-28T05:06:13.706Z] [LOG] ✅ G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-28T05:06:13.706Z] [LOG] 📊 Progress: 29/34 (85.3%)
[2025-10-28T05:06:13.706Z] [LOG] 
🧮 Processing: Ishara null (EMP000011)
[2025-10-28T05:06:13.706Z] [LOG] 📋 Record ID: ddde1e56-1b35-477a-9e6f-4ce163d79ad9
[2025-10-28T05:06:13.707Z] [LOG] 
======================================================================
[2025-10-28T05:06:13.707Z] [LOG] 🧮 CALCULATING PAYROLL: Ishara null (EMP000011)
[2025-10-28T05:06:13.707Z] [LOG] ======================================================================
[2025-10-28T05:06:15.018Z] [LOG] 🔍 Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-28T05:06:15.018Z] [LOG]    Total components: 13
[2025-10-28T05:06:15.018Z] [LOG]    Applicable components: 13
[2025-10-28T05:06:15.018Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-28T05:06:15.874Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:06:15.874Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:06:16.118Z] [LOG] 📊 Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:16.330Z] [LOG] 📊 Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:16.566Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:16.566Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:06:16.567Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:06:16.990Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:06:16.991Z] [LOG]    👤 Employee: Ishara null (EMP000011)
[2025-10-28T05:06:16.991Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:06:16.991Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:06:16.991Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T05:06:16.991Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:06:17.201Z] [LOG] 
   💵 Pre-calculated Rates for Ishara null (EMP000011):
[2025-10-28T05:06:17.202Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-28T05:06:17.202Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-28T05:06:17.202Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-28T05:06:17.202Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:06:17.203Z] [LOG] 
   📊 Full Period Working Days for Ishara null (EMP000011):
[2025-10-28T05:06:17.203Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:06:17.203Z] [LOG] 
   📊 Working Days for Expected Calculation for Ishara null (EMP000011):
[2025-10-28T05:06:17.203Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:06:17.203Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:06:17.412Z] [LOG] 
   ⏰ Calculating Completed Hours for Ishara null (EMP000011) - All completed sessions:
[2025-10-28T05:06:17.412Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:06:17.412Z] [LOG]       Total completed sessions found: 0
[2025-10-28T05:06:17.624Z] [LOG] 
      📊 Aggregated Totals for Ishara null (EMP000011):
[2025-10-28T05:06:17.624Z] [LOG]          Weekday: 0.00h
[2025-10-28T05:06:17.624Z] [LOG]          Saturday: 0.00h
[2025-10-28T05:06:17.625Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:06:17.625Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:06:17.625Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ishara null (EMP000011) - completed sessions only:
[2025-10-28T05:06:17.625Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:06:17.625Z] [LOG]       Saturday: 34.00h
[2025-10-28T05:06:17.626Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:06:17.626Z] [LOG]       Total Expected: 212.50h
[2025-10-28T05:06:17.626Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ishara null (EMP000011) - completed sessions only:
[2025-10-28T05:06:17.626Z] [LOG]       Weekday: 0.00h
[2025-10-28T05:06:17.627Z] [LOG]       Saturday: 0.00h
[2025-10-28T05:06:17.627Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:06:17.627Z] [LOG]       Total Actual: 0.00h
[2025-10-28T05:06:17.627Z] [LOG] 
   💵 EXPECTED Earned Salary for Ishara null (EMP000011) - until NOW:
[2025-10-28T05:06:17.628Z] [LOG]       Weekday: 178.50h × Rs.235.29 = Rs.41999.26
[2025-10-28T05:06:17.628Z] [LOG]       Saturday: 34.00h × Rs.235.29 = Rs.7999.86
[2025-10-28T05:06:17.628Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:06:17.628Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:17.628Z] [LOG]       Total Expected Earned: Rs.49999.13
[2025-10-28T05:06:17.629Z] [LOG] 
   💵 ACTUAL Earned Salary for Ishara null (EMP000011) - including live session:
[2025-10-28T05:06:17.629Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-28T05:06:17.629Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-28T05:06:17.629Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:06:17.629Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:17.630Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T05:06:17.630Z] [LOG] 
   📊 FINAL CALCULATION for Ishara null (EMP000011):
[2025-10-28T05:06:17.630Z] [LOG]       Calculated At: Oct 28, 2025, 10:36:17
[2025-10-28T05:06:17.631Z] [LOG]       Expected Earned: Rs.49999.13
[2025-10-28T05:06:17.631Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T05:06:17.631Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:17.631Z] [LOG]       Attendance Deduction: Rs.49999.13
[2025-10-28T05:06:17.632Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:06:17.632Z] [LOG]       📉 Shortfall for Ishara null: 212.50 hours (100.00% of expected)
[2025-10-28T05:06:17.632Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:06:17.632Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:06:17.632Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:06:17.633Z] [LOG]    Attendance Shortfall: Rs.49999.13
[2025-10-28T05:06:17.633Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:06:17.633Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:06:17.633Z] [LOG]    Gross Salary: 0
[2025-10-28T05:06:17.634Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:06:17.634Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:06:17.634Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:17.634Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:06:17.635Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:17.635Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:06:17.635Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:17.635Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:06:17.635Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:17.636Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:06:17.636Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:17.636Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:06:17.636Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:17.636Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:06:17.637Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:17.637Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:06:17.637Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:17.637Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:06:17.638Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:17.638Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:06:17.638Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:17.638Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:06:17.638Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T05:06:17.639Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:06:17.639Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:06:17.640Z] [LOG] 💰 GROSS CALCULATION for Ishara null:
[2025-10-28T05:06:17.640Z] [LOG]    Base Salary: 50000
[2025-10-28T05:06:17.641Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:06:17.641Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:06:17.641Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:17.641Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:06:17.642Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:17.642Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:06:17.642Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:17.857Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:06:17.857Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:06:17.857Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:06:17.858Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:06:17.858Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T05:06:17.858Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:06:17.859Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:06:17.859Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T05:06:17.859Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:06:17.860Z] [LOG]    Attendance Shortfall (Info): Rs.49999.13
[2025-10-28T05:06:17.860Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:06:17.861Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:06:17.861Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:06:17.861Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:06:17.862Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T05:06:17.862Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:06:17.862Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T05:06:17.862Z] [LOG] 
💾 Database Update:
[2025-10-28T05:06:17.863Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:06:17.863Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:06:18.071Z] [LOG] 
📝 Components to save:
[2025-10-28T05:06:18.072Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T05:06:18.074Z] [LOG]    Deduction components: 1
[2025-10-28T05:06:18.075Z] [LOG] Creating components for record ddde1e56-1b35-477a-9e6f-4ce163d79ad9: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:06:18.077Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 49999.125
}
[2025-10-28T05:06:18.298Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:06:18.514Z] [LOG] Created payroll_record_component: 46020169-5005-498d-8506-00c633b47f8e for Attendance Shortfall (Info)
[2025-10-28T05:06:18.941Z] [LOG] ✅ Financial balances updated successfully for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:18.942Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:06:18.942Z] [LOG] 
======================================================================
[2025-10-28T05:06:18.943Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ishara null
[2025-10-28T05:06:18.944Z] [LOG] ======================================================================
[2025-10-28T05:06:18.944Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:06:18.945Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T05:06:18.945Z] [LOG]    Attendance Shortfall: Rs.49999.13
[2025-10-28T05:06:18.946Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:18.947Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:06:18.947Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:06:18.948Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:18.949Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T05:06:18.950Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:18.950Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:06:18.951Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:06:18.951Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:06:18.952Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:06:18.953Z] [LOG]       - Attendance Shortfall (Info): Rs.49999.13
[2025-10-28T05:06:18.953Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:06:18.954Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:18.955Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T05:06:18.955Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:06:18.956Z] [LOG] ======================================================================

[2025-10-28T05:06:18.959Z] [LOG] ✅ Ishara null: Calculation completed successfully
[2025-10-28T05:06:18.959Z] [LOG] 📊 Progress: 30/34 (88.2%)
[2025-10-28T05:06:18.960Z] [LOG] 
🧮 Processing: Sithira null (EMP000039)
[2025-10-28T05:06:18.960Z] [LOG] 📋 Record ID: e4275ee5-117d-47a1-bccf-e48cfd759e49
[2025-10-28T05:06:18.961Z] [LOG] 
======================================================================
[2025-10-28T05:06:18.961Z] [LOG] 🧮 CALCULATING PAYROLL: Sithira null (EMP000039)
[2025-10-28T05:06:18.961Z] [LOG] ======================================================================
[2025-10-28T05:06:19.813Z] [LOG] 🔍 Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-28T05:06:19.814Z] [LOG]    Total components: 13
[2025-10-28T05:06:19.814Z] [LOG]    Applicable components: 13
[2025-10-28T05:06:19.814Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-28T05:06:23.437Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:06:23.437Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:06:23.671Z] [LOG] 📊 Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:23.889Z] [LOG] 📊 Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:24.101Z] [LOG] 📊 Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:24.101Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:06:24.102Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:06:24.524Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:06:24.525Z] [LOG]    👤 Employee: Sithira null (EMP000039)
[2025-10-28T05:06:24.526Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:06:24.526Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:06:24.527Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-28T05:06:24.528Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:06:24.774Z] [LOG] 
   💵 Pre-calculated Rates for Sithira null (EMP000039):
[2025-10-28T05:06:24.775Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-28T05:06:24.775Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-28T05:06:24.776Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-28T05:06:24.776Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:06:24.777Z] [LOG] 
   📊 Full Period Working Days for Sithira null (EMP000039):
[2025-10-28T05:06:24.778Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:06:24.778Z] [LOG] 
   📊 Working Days for Expected Calculation for Sithira null (EMP000039):
[2025-10-28T05:06:24.779Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:06:24.780Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:06:24.989Z] [LOG] 
   ⏰ Calculating Completed Hours for Sithira null (EMP000039) - All completed sessions:
[2025-10-28T05:06:24.990Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:06:24.991Z] [LOG]       Total completed sessions found: 20
[2025-10-28T05:06:24.992Z] [LOG] 
      📋 Attendance Breakdown for Sithira null (EMP000039):
[2025-10-28T05:06:24.993Z] [LOG]          1. 2025-09-03 (Weekday): 8.22h
[2025-10-28T05:06:24.993Z] [LOG]          2. 2025-09-04 (Weekday): 7.95h
[2025-10-28T05:06:24.994Z] [LOG]          3. 2025-09-06 (Saturday): 4.50h
[2025-10-28T05:06:24.994Z] [LOG]          4. 2025-09-08 (Weekday): 7.75h
[2025-10-28T05:06:24.995Z] [LOG]          5. 2025-09-09 (Weekday): 8.23h
[2025-10-28T05:06:24.996Z] [LOG]          6. 2025-09-11 (Weekday): 8.38h
[2025-10-28T05:06:24.996Z] [LOG]          7. 2025-09-12 (Weekday): 8.18h
[2025-10-28T05:06:24.997Z] [LOG]          8. 2025-09-13 (Saturday): 3.48h
[2025-10-28T05:06:24.998Z] [LOG]          9. 2025-09-15 (Weekday): 6.74h
[2025-10-28T05:06:24.999Z] [LOG]          10. 2025-09-16 (Weekday): 8.23h
[2025-10-28T05:06:24.999Z] [LOG]          11. 2025-09-17 (Weekday): 8.36h
[2025-10-28T05:06:25.000Z] [LOG]          12. 2025-09-18 (Weekday): 8.20h
[2025-10-28T05:06:25.001Z] [LOG]          13. 2025-09-20 (Saturday): 4.50h
[2025-10-28T05:06:25.001Z] [LOG]          14. 2025-09-23 (Weekday): 8.12h
[2025-10-28T05:06:25.002Z] [LOG]          15. 2025-09-24 (Weekday): 8.31h
[2025-10-28T05:06:25.002Z] [LOG]          16. 2025-09-25 (Weekday): 8.50h
[2025-10-28T05:06:25.003Z] [LOG]          17. 2025-09-26 (Weekday): 8.17h
[2025-10-28T05:06:25.004Z] [LOG]          18. 2025-09-27 (Saturday): 0.00h
[2025-10-28T05:06:25.004Z] [LOG]          19. 2025-09-29 (Weekday): 7.58h
[2025-10-28T05:06:25.005Z] [LOG]          20. 2025-09-30 (Weekday): 6.39h
[2025-10-28T05:06:25.224Z] [LOG] 
      📊 Aggregated Totals for Sithira null (EMP000039):
[2025-10-28T05:06:25.225Z] [LOG]          Weekday: 127.31h
[2025-10-28T05:06:25.226Z] [LOG]          Saturday: 12.48h
[2025-10-28T05:06:25.226Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:06:25.227Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:06:25.227Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Sithira null (EMP000039) - completed sessions only:
[2025-10-28T05:06:25.228Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:06:25.229Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:06:25.229Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:06:25.230Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:06:25.230Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Sithira null (EMP000039) - completed sessions only:
[2025-10-28T05:06:25.231Z] [LOG]       Weekday: 127.31h
[2025-10-28T05:06:25.232Z] [LOG]       Saturday: 12.48h
[2025-10-28T05:06:25.233Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:06:25.234Z] [LOG]       Total Actual: 139.79h
[2025-10-28T05:06:25.234Z] [LOG] 
   💵 EXPECTED Earned Salary for Sithira null (EMP000039) - until NOW:
[2025-10-28T05:06:25.235Z] [LOG]       Weekday: 178.50h × Rs.188.24 = Rs.33600.84
[2025-10-28T05:06:25.235Z] [LOG]       Saturday: 18.00h × Rs.355.56 = Rs.6400.08
[2025-10-28T05:06:25.236Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:06:25.237Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:25.237Z] [LOG]       Total Expected Earned: Rs.40000.92
[2025-10-28T05:06:25.238Z] [LOG] 
   💵 ACTUAL Earned Salary for Sithira null (EMP000039) - including live session:
[2025-10-28T05:06:25.239Z] [LOG]       Weekday: 127.31h × Rs.188.24 = Rs.23964.83
[2025-10-28T05:06:25.240Z] [LOG]       Saturday: 12.48h × Rs.355.56 = Rs.4437.39
[2025-10-28T05:06:25.241Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:06:25.242Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:25.243Z] [LOG]       Total Actual Earned: Rs.28402.22
[2025-10-28T05:06:25.244Z] [LOG] 
   📊 FINAL CALCULATION for Sithira null (EMP000039):
[2025-10-28T05:06:25.245Z] [LOG]       Calculated At: Oct 28, 2025, 10:36:25
[2025-10-28T05:06:25.245Z] [LOG]       Expected Earned: Rs.40000.92
[2025-10-28T05:06:25.246Z] [LOG]       Actual Earned: Rs.28402.22
[2025-10-28T05:06:25.247Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:25.247Z] [LOG]       Attendance Deduction: Rs.11598.70
[2025-10-28T05:06:25.248Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:06:25.249Z] [LOG]       📉 Shortfall for Sithira null: 56.71 hours (29.00% of expected)
[2025-10-28T05:06:25.249Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:06:25.250Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-28T05:06:25.250Z] [LOG]    Actual Earned Base: Rs.28402.22
[2025-10-28T05:06:25.251Z] [LOG]    Attendance Shortfall: Rs.11598.70
[2025-10-28T05:06:25.252Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:06:25.253Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:06:25.253Z] [LOG]    Gross Salary: 28402.223200000004
[2025-10-28T05:06:25.254Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:06:25.254Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:06:25.255Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:25.255Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:06:25.259Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:25.259Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:06:25.260Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:25.260Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:06:25.260Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:25.261Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:06:25.261Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:25.261Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:06:25.262Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:25.262Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:06:25.262Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:25.263Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:06:25.263Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:25.263Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:06:25.264Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:25.264Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:06:25.264Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:25.265Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:06:25.265Z] [LOG]    EPF/ETF calculated on: Rs.28402.22
[2025-10-28T05:06:25.265Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:06:25.265Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:06:25.266Z] [LOG] 💰 GROSS CALCULATION for Sithira null:
[2025-10-28T05:06:25.266Z] [LOG]    Base Salary: 40000
[2025-10-28T05:06:25.266Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:06:25.266Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:06:25.267Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:25.267Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:06:25.267Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:25.267Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:06:25.268Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:25.477Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:06:25.478Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:06:25.479Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:06:25.479Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:06:25.480Z] [LOG]    Actual Earned Base: Rs.28402.22
[2025-10-28T05:06:25.480Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:06:25.481Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:06:25.481Z] [LOG]    = Gross Salary: Rs.28402.22
[2025-10-28T05:06:25.482Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:06:25.483Z] [LOG]    Attendance Shortfall (Info): Rs.11598.70
[2025-10-28T05:06:25.483Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:06:25.484Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:06:25.485Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:06:25.486Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:06:25.487Z] [LOG]    Gross Salary: Rs.28402.22
[2025-10-28T05:06:25.487Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:06:25.488Z] [LOG]    = NET SALARY: Rs.28402.22
[2025-10-28T05:06:25.488Z] [LOG] 
💾 Database Update:
[2025-10-28T05:06:25.489Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:06:25.492Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:06:25.718Z] [LOG] 
📝 Components to save:
[2025-10-28T05:06:25.718Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:06:25.719Z] [LOG]    Deduction components: 1
[2025-10-28T05:06:25.719Z] [LOG] Creating components for record e4275ee5-117d-47a1-bccf-e48cfd759e49: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:06:25.721Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 28402.223200000004
}
[2025-10-28T05:06:25.936Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:06:26.152Z] [LOG] Created payroll_record_component: 3d423f82-587c-4eec-914c-3b5dc3cfba3c for Base Salary
[2025-10-28T05:06:26.153Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 11598.696800000002
}
[2025-10-28T05:06:26.364Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:06:26.588Z] [LOG] Created payroll_record_component: 2cd56331-61ae-4ced-9e9e-72b1da94b4ea for Attendance Shortfall (Info)
[2025-10-28T05:06:27.017Z] [LOG] ✅ Financial balances updated successfully for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:27.018Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:06:27.019Z] [LOG] 
======================================================================
[2025-10-28T05:06:27.019Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sithira null
[2025-10-28T05:06:27.020Z] [LOG] ======================================================================
[2025-10-28T05:06:27.020Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-28T05:06:27.021Z] [LOG]    Actual Earned Base (Attendance-based): Rs.28402.22
[2025-10-28T05:06:27.022Z] [LOG]    Attendance Shortfall: Rs.11598.70
[2025-10-28T05:06:27.022Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:27.026Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:06:27.027Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:06:27.028Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:27.028Z] [LOG]    GROSS SALARY: Rs.28402.22
[2025-10-28T05:06:27.029Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:27.029Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:06:27.030Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:06:27.030Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:06:27.031Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:06:27.032Z] [LOG]       - Attendance Shortfall (Info): Rs.11598.70
[2025-10-28T05:06:27.033Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:06:27.033Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:27.034Z] [LOG]    NET SALARY: Rs.28402.22
[2025-10-28T05:06:27.034Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:06:27.035Z] [LOG] ======================================================================

[2025-10-28T05:06:27.036Z] [LOG] ✅ Sithira null: Calculation completed successfully
[2025-10-28T05:06:27.037Z] [LOG] 📊 Progress: 31/34 (91.2%)
[2025-10-28T05:06:27.037Z] [LOG] 
🧮 Processing: Sumaiya null (EMP000016)
[2025-10-28T05:06:27.038Z] [LOG] 📋 Record ID: f06007fb-fd4a-4109-aeff-7678e8f6d0bc
[2025-10-28T05:06:27.038Z] [LOG] 
======================================================================
[2025-10-28T05:06:27.039Z] [LOG] 🧮 CALCULATING PAYROLL: Sumaiya null (EMP000016)
[2025-10-28T05:06:27.041Z] [LOG] ======================================================================
[2025-10-28T05:06:27.885Z] [LOG] 🔍 Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-28T05:06:27.885Z] [LOG]    Total components: 13
[2025-10-28T05:06:27.886Z] [LOG]    Applicable components: 13
[2025-10-28T05:06:27.886Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T05:06:34.660Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:06:34.661Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:06:34.878Z] [LOG] 📊 Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:35.101Z] [LOG] 📊 Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:35.313Z] [LOG] 📊 Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:35.314Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:06:35.315Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:06:35.736Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:06:35.737Z] [LOG]    👤 Employee: Sumaiya null (EMP000016)
[2025-10-28T05:06:35.737Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:06:35.738Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:06:35.738Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-28T05:06:35.738Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:06:35.949Z] [LOG] 
   💵 Pre-calculated Rates for Sumaiya null (EMP000016):
[2025-10-28T05:06:35.950Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-28T05:06:35.950Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-28T05:06:35.951Z] [LOG]       Saturday Hourly Rate: Rs.533.33
[2025-10-28T05:06:35.951Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:06:35.952Z] [LOG] 
   📊 Full Period Working Days for Sumaiya null (EMP000016):
[2025-10-28T05:06:35.953Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:06:35.953Z] [LOG] 
   📊 Working Days for Expected Calculation for Sumaiya null (EMP000016):
[2025-10-28T05:06:35.954Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:06:35.954Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:06:36.169Z] [LOG] 
   ⏰ Calculating Completed Hours for Sumaiya null (EMP000016) - All completed sessions:
[2025-10-28T05:06:36.170Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:06:36.170Z] [LOG]       Total completed sessions found: 24
[2025-10-28T05:06:36.171Z] [LOG] 
      📋 Attendance Breakdown for Sumaiya null (EMP000016):
[2025-10-28T05:06:36.172Z] [LOG]          1. 2025-09-02 (Weekday): 7.77h
[2025-10-28T05:06:36.172Z] [LOG]          2. 2025-09-03 (Weekday): 8.46h
[2025-10-28T05:06:36.173Z] [LOG]          3. 2025-09-04 (Weekday): 8.50h
[2025-10-28T05:06:36.174Z] [LOG]          4. 2025-09-06 (Saturday): 4.50h
[2025-10-28T05:06:36.175Z] [LOG]          5. 2025-09-08 (Weekday): 6.08h
[2025-10-28T05:06:36.176Z] [LOG]          6. 2025-09-09 (Weekday): 8.02h
[2025-10-28T05:06:36.177Z] [LOG]          7. 2025-09-10 (Weekday): 8.50h
[2025-10-28T05:06:36.177Z] [LOG]          8. 2025-09-11 (Weekday): 8.34h
[2025-10-28T05:06:36.178Z] [LOG]          9. 2025-09-12 (Weekday): 8.32h
[2025-10-28T05:06:36.179Z] [LOG]          10. 2025-09-13 (Saturday): 4.50h
[2025-10-28T05:06:36.179Z] [LOG]          11. 2025-09-15 (Weekday): 8.50h
[2025-10-28T05:06:36.180Z] [LOG]          12. 2025-09-16 (Weekday): 7.74h
[2025-10-28T05:06:36.180Z] [LOG]          13. 2025-09-17 (Weekday): 8.50h
[2025-10-28T05:06:36.181Z] [LOG]          14. 2025-09-18 (Weekday): 8.33h
[2025-10-28T05:06:36.182Z] [LOG]          15. 2025-09-19 (Weekday): 8.37h
[2025-10-28T05:06:36.182Z] [LOG]          16. 2025-09-20 (Saturday): 4.50h
[2025-10-28T05:06:36.183Z] [LOG]          17. 2025-09-22 (Weekday): 8.50h
[2025-10-28T05:06:36.183Z] [LOG]          18. 2025-09-23 (Weekday): 7.74h
[2025-10-28T05:06:36.184Z] [LOG]          19. 2025-09-24 (Weekday): 8.40h
[2025-10-28T05:06:36.185Z] [LOG]          20. 2025-09-25 (Weekday): 8.50h
[2025-10-28T05:06:36.185Z] [LOG]          21. 2025-09-26 (Weekday): 8.11h
[2025-10-28T05:06:36.186Z] [LOG]          22. 2025-09-27 (Saturday): 4.50h
[2025-10-28T05:06:36.186Z] [LOG]          23. 2025-09-29 (Weekday): 8.29h
[2025-10-28T05:06:36.187Z] [LOG]          24. 2025-09-30 (Weekday): 8.02h
[2025-10-28T05:06:36.404Z] [LOG] 
      📊 Aggregated Totals for Sumaiya null (EMP000016):
[2025-10-28T05:06:36.404Z] [LOG]          Weekday: 162.99h
[2025-10-28T05:06:36.405Z] [LOG]          Saturday: 18.00h
[2025-10-28T05:06:36.406Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:06:36.407Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:06:36.408Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Sumaiya null (EMP000016) - completed sessions only:
[2025-10-28T05:06:36.409Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:06:36.409Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:06:36.410Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:06:36.410Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:06:36.411Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Sumaiya null (EMP000016) - completed sessions only:
[2025-10-28T05:06:36.412Z] [LOG]       Weekday: 162.99h
[2025-10-28T05:06:36.413Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:06:36.413Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:06:36.414Z] [LOG]       Total Actual: 180.99h
[2025-10-28T05:06:36.415Z] [LOG] 
   💵 EXPECTED Earned Salary for Sumaiya null (EMP000016) - until NOW:
[2025-10-28T05:06:36.416Z] [LOG]       Weekday: 178.50h × Rs.282.35 = Rs.50399.48
[2025-10-28T05:06:36.416Z] [LOG]       Saturday: 18.00h × Rs.533.33 = Rs.9599.94
[2025-10-28T05:06:36.417Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:06:36.417Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:36.418Z] [LOG]       Total Expected Earned: Rs.59999.42
[2025-10-28T05:06:36.418Z] [LOG] 
   💵 ACTUAL Earned Salary for Sumaiya null (EMP000016) - including live session:
[2025-10-28T05:06:36.419Z] [LOG]       Weekday: 162.99h × Rs.282.35 = Rs.46020.23
[2025-10-28T05:06:36.420Z] [LOG]       Saturday: 18.00h × Rs.533.33 = Rs.9599.94
[2025-10-28T05:06:36.420Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:06:36.421Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:36.421Z] [LOG]       Total Actual Earned: Rs.55620.17
[2025-10-28T05:06:36.423Z] [LOG] 
   📊 FINAL CALCULATION for Sumaiya null (EMP000016):
[2025-10-28T05:06:36.424Z] [LOG]       Calculated At: Oct 28, 2025, 10:36:36
[2025-10-28T05:06:36.425Z] [LOG]       Expected Earned: Rs.59999.42
[2025-10-28T05:06:36.426Z] [LOG]       Actual Earned: Rs.55620.17
[2025-10-28T05:06:36.427Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:36.427Z] [LOG]       Attendance Deduction: Rs.4379.25
[2025-10-28T05:06:36.428Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:06:36.429Z] [LOG]       📉 Shortfall for Sumaiya null: 15.51 hours (7.30% of expected)
[2025-10-28T05:06:36.429Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:06:36.430Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-28T05:06:36.430Z] [LOG]    Actual Earned Base: Rs.55620.17
[2025-10-28T05:06:36.431Z] [LOG]    Attendance Shortfall: Rs.4379.25
[2025-10-28T05:06:36.432Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:06:36.433Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:06:36.433Z] [LOG]    Gross Salary: 55620.16650000001
[2025-10-28T05:06:36.434Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:06:36.434Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:06:36.435Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:36.435Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:06:36.436Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:36.437Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:06:36.437Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:36.438Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:06:36.438Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:36.439Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:06:36.441Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:36.442Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:06:36.443Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:36.443Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:06:36.444Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:36.444Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:06:36.445Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:36.446Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:06:36.446Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:36.447Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:06:36.447Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:36.448Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:06:36.449Z] [LOG]    EPF/ETF calculated on: Rs.55620.17
[2025-10-28T05:06:36.449Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:06:36.450Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:06:36.450Z] [LOG] 💰 GROSS CALCULATION for Sumaiya null:
[2025-10-28T05:06:36.451Z] [LOG]    Base Salary: 60000
[2025-10-28T05:06:36.451Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:06:36.451Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:06:36.452Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:36.452Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:06:36.452Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:36.453Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:06:36.453Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:36.664Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:06:36.665Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:06:36.665Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:06:36.666Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:06:36.667Z] [LOG]    Actual Earned Base: Rs.55620.17
[2025-10-28T05:06:36.667Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:06:36.668Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:06:36.668Z] [LOG]    = Gross Salary: Rs.55620.17
[2025-10-28T05:06:36.669Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:06:36.669Z] [LOG]    Attendance Shortfall (Info): Rs.4379.25
[2025-10-28T05:06:36.670Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:06:36.671Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:06:36.672Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:06:36.673Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:06:36.674Z] [LOG]    Gross Salary: Rs.55620.17
[2025-10-28T05:06:36.675Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:06:36.676Z] [LOG]    = NET SALARY: Rs.55620.17
[2025-10-28T05:06:36.676Z] [LOG] 
💾 Database Update:
[2025-10-28T05:06:36.677Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:06:36.678Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:06:36.894Z] [LOG] 
📝 Components to save:
[2025-10-28T05:06:36.895Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:06:36.896Z] [LOG]    Deduction components: 1
[2025-10-28T05:06:36.896Z] [LOG] Creating components for record f06007fb-fd4a-4109-aeff-7678e8f6d0bc: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:06:36.898Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 55620.16650000001
}
[2025-10-28T05:06:37.108Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:06:37.321Z] [LOG] Created payroll_record_component: e37df163-9c8c-47fa-98df-1cf06d2eab3b for Base Salary
[2025-10-28T05:06:37.321Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 4379.2485000000015
}
[2025-10-28T05:06:37.538Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:06:37.754Z] [LOG] Created payroll_record_component: 763b58d6-a377-4147-abc4-0f50ab5af68e for Attendance Shortfall (Info)
[2025-10-28T05:06:38.177Z] [LOG] ✅ Financial balances updated successfully for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:38.177Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:06:38.178Z] [LOG] 
======================================================================
[2025-10-28T05:06:38.178Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sumaiya null
[2025-10-28T05:06:38.179Z] [LOG] ======================================================================
[2025-10-28T05:06:38.180Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-28T05:06:38.180Z] [LOG]    Actual Earned Base (Attendance-based): Rs.55620.17
[2025-10-28T05:06:38.181Z] [LOG]    Attendance Shortfall: Rs.4379.25
[2025-10-28T05:06:38.181Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:38.182Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:06:38.182Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:06:38.183Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:38.184Z] [LOG]    GROSS SALARY: Rs.55620.17
[2025-10-28T05:06:38.185Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:38.185Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:06:38.186Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:06:38.187Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:06:38.187Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:06:38.188Z] [LOG]       - Attendance Shortfall (Info): Rs.4379.25
[2025-10-28T05:06:38.188Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:06:38.189Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:38.191Z] [LOG]    NET SALARY: Rs.55620.17
[2025-10-28T05:06:38.191Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:06:38.192Z] [LOG] ======================================================================

[2025-10-28T05:06:38.192Z] [LOG] ✅ Sumaiya null: Calculation completed successfully
[2025-10-28T05:06:38.192Z] [LOG] 📊 Progress: 32/34 (94.1%)
[2025-10-28T05:06:38.193Z] [LOG] 

🧮 Processing: Franklin null (EMP000018)
[2025-10-28T05:06:38.193Z] [LOG] 📋 Record ID: f5acf388-eeb9-4e29-a86c-d5fd126a4d08
[2025-10-28T05:06:38.194Z] [LOG] 
======================================================================
[2025-10-28T05:06:38.194Z] [LOG] 🧮 CALCULATING PAYROLL: Franklin null (EMP000018)
[2025-10-28T05:06:38.194Z] [LOG] ======================================================================
[2025-10-28T05:06:39.056Z] [LOG] 🔍 Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-28T05:06:39.057Z] [LOG]    Total components: 13
[2025-10-28T05:06:39.057Z] [LOG]    Applicable components: 13
[2025-10-28T05:06:39.057Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-28T05:06:40.792Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:06:40.793Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:06:41.001Z] [LOG] 📊 Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:41.211Z] [LOG] 📊 Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:41.436Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:41.437Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:06:41.438Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:06:41.860Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:06:41.861Z] [LOG]    👤 Employee: Franklin null (EMP000018)
[2025-10-28T05:06:41.861Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:06:41.862Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:06:41.863Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T05:06:41.863Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:06:42.074Z] [LOG] 
   💵 Pre-calculated Rates for Franklin null (EMP000018):
[2025-10-28T05:06:42.075Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-28T05:06:42.075Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-28T05:06:42.076Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-28T05:06:42.076Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:06:42.077Z] [LOG] 
   📊 Full Period Working Days for Franklin null (EMP000018):
[2025-10-28T05:06:42.078Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:06:42.078Z] [LOG] 
   📊 Working Days for Expected Calculation for Franklin null (EMP000018):
[2025-10-28T05:06:42.079Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:06:42.080Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:06:42.299Z] [LOG] 
   ⏰ Calculating Completed Hours for Franklin null (EMP000018) - All completed sessions:
[2025-10-28T05:06:42.299Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:06:42.300Z] [LOG]       Total completed sessions found: 24
[2025-10-28T05:06:42.300Z] [LOG] 
      📋 Attendance Breakdown for Franklin null (EMP000018):
[2025-10-28T05:06:42.301Z] [LOG]          1. 2025-09-01 (Weekday): 5.67h
[2025-10-28T05:06:42.302Z] [LOG]          2. 2025-09-02 (Weekday): 5.55h
[2025-10-28T05:06:42.302Z] [LOG]          3. 2025-09-03 (Weekday): 7.00h
[2025-10-28T05:06:42.303Z] [LOG]          4. 2025-09-04 (Weekday): 6.83h
[2025-10-28T05:06:42.303Z] [LOG]          5. 2025-09-06 (Saturday): 2.18h
[2025-10-28T05:06:42.304Z] [LOG]          6. 2025-09-08 (Weekday): 5.67h
[2025-10-28T05:06:42.305Z] [LOG]          7. 2025-09-09 (Weekday): 6.75h
[2025-10-28T05:06:42.305Z] [LOG]          8. 2025-09-10 (Weekday): 8.00h
[2025-10-28T05:06:42.308Z] [LOG]          9. 2025-09-11 (Weekday): 6.05h
[2025-10-28T05:06:42.308Z] [LOG]          10. 2025-09-12 (Weekday): 7.73h
[2025-10-28T05:06:42.309Z] [LOG]          11. 2025-09-13 (Saturday): 0.00h
[2025-10-28T05:06:42.309Z] [LOG]          12. 2025-09-15 (Weekday): 7.60h
[2025-10-28T05:06:42.310Z] [LOG]          13. 2025-09-16 (Weekday): 5.95h
[2025-10-28T05:06:42.311Z] [LOG]          14. 2025-09-17 (Weekday): 6.88h
[2025-10-28T05:06:42.312Z] [LOG]          15. 2025-09-18 (Weekday): 6.27h
[2025-10-28T05:06:42.312Z] [LOG]          16. 2025-09-19 (Weekday): 6.16h
[2025-10-28T05:06:42.313Z] [LOG]          17. 2025-09-20 (Saturday): 2.81h
[2025-10-28T05:06:42.313Z] [LOG]          18. 2025-09-22 (Weekday): 6.32h
[2025-10-28T05:06:42.314Z] [LOG]          19. 2025-09-23 (Weekday): 6.55h
[2025-10-28T05:06:42.314Z] [LOG]          20. 2025-09-25 (Weekday): 6.09h
[2025-10-28T05:06:42.315Z] [LOG]          21. 2025-09-26 (Weekday): 5.88h
[2025-10-28T05:06:42.316Z] [LOG]          22. 2025-09-27 (Saturday): 3.10h
[2025-10-28T05:06:42.316Z] [LOG]          23. 2025-09-29 (Weekday): 6.51h
[2025-10-28T05:06:42.317Z] [LOG]          24. 2025-09-30 (Weekday): 6.50h
[2025-10-28T05:06:42.532Z] [LOG] 
      📊 Aggregated Totals for Franklin null (EMP000018):
[2025-10-28T05:06:42.533Z] [LOG]          Weekday: 129.96h
[2025-10-28T05:06:42.533Z] [LOG]          Saturday: 8.09h
[2025-10-28T05:06:42.534Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:06:42.534Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:06:42.535Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Franklin null (EMP000018) - completed sessions only:
[2025-10-28T05:06:42.536Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:06:42.536Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:06:42.537Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:06:42.537Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:06:42.538Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Franklin null (EMP000018) - completed sessions only:
[2025-10-28T05:06:42.539Z] [LOG]       Weekday: 129.96h
[2025-10-28T05:06:42.542Z] [LOG]       Saturday: 8.09h
[2025-10-28T05:06:42.542Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:06:42.543Z] [LOG]       Total Actual: 138.05h
[2025-10-28T05:06:42.544Z] [LOG] 
   💵 EXPECTED Earned Salary for Franklin null (EMP000018) - until NOW:
[2025-10-28T05:06:42.545Z] [LOG]       Weekday: 178.50h × Rs.235.29 = Rs.41999.26
[2025-10-28T05:06:42.545Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-28T05:06:42.546Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:06:42.546Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:42.547Z] [LOG]       Total Expected Earned: Rs.49999.18
[2025-10-28T05:06:42.548Z] [LOG] 
   💵 ACTUAL Earned Salary for Franklin null (EMP000018) - including live session:
[2025-10-28T05:06:42.548Z] [LOG]       Weekday: 129.96h × Rs.235.29 = Rs.30578.29
[2025-10-28T05:06:42.549Z] [LOG]       Saturday: 8.09h × Rs.444.44 = Rs.3595.52
[2025-10-28T05:06:42.549Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:06:42.550Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:42.551Z] [LOG]       Total Actual Earned: Rs.34173.81
[2025-10-28T05:06:42.552Z] [LOG] 
   📊 FINAL CALCULATION for Franklin null (EMP000018):
[2025-10-28T05:06:42.553Z] [LOG]       Calculated At: Oct 28, 2025, 10:36:42
[2025-10-28T05:06:42.553Z] [LOG]       Expected Earned: Rs.49999.18
[2025-10-28T05:06:42.554Z] [LOG]       Actual Earned: Rs.34173.81
[2025-10-28T05:06:42.554Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:42.555Z] [LOG]       Attendance Deduction: Rs.15825.38
[2025-10-28T05:06:42.556Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:06:42.558Z] [LOG]       📉 Shortfall for Franklin null: 58.45 hours (31.65% of expected)
[2025-10-28T05:06:42.558Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:06:42.559Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:06:42.560Z] [LOG]    Actual Earned Base: Rs.34173.81
[2025-10-28T05:06:42.560Z] [LOG]    Attendance Shortfall: Rs.15825.38
[2025-10-28T05:06:42.561Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:06:42.562Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:06:42.563Z] [LOG]    Gross Salary: 34173.808000000005
[2025-10-28T05:06:42.563Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:06:42.564Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:06:42.564Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:42.565Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:06:42.565Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:42.566Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:06:42.566Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:42.567Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:06:42.567Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:42.568Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:06:42.569Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:42.569Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:06:42.570Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:42.570Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:06:42.570Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:42.571Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:06:42.571Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:42.571Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:06:42.572Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:42.572Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:06:42.572Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:42.573Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:06:42.574Z] [LOG]    EPF/ETF calculated on: Rs.34173.81
[2025-10-28T05:06:42.575Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:06:42.575Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:06:42.575Z] [LOG] 💰 GROSS CALCULATION for Franklin null:
[2025-10-28T05:06:42.576Z] [LOG]    Base Salary: 50000
[2025-10-28T05:06:42.576Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:06:42.576Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:06:42.577Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:42.577Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:06:42.577Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:42.578Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:06:42.578Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:42.790Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:06:42.791Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:06:42.791Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:06:42.792Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:06:42.793Z] [LOG]    Actual Earned Base: Rs.34173.81
[2025-10-28T05:06:42.793Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:06:42.794Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:06:42.794Z] [LOG]    = Gross Salary: Rs.34173.81
[2025-10-28T05:06:42.795Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:06:42.795Z] [LOG]    Attendance Shortfall (Info): Rs.15825.38
[2025-10-28T05:06:42.796Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:06:42.797Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:06:42.798Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:06:42.798Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:06:42.799Z] [LOG]    Gross Salary: Rs.34173.81
[2025-10-28T05:06:42.800Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:06:42.800Z] [LOG]    = NET SALARY: Rs.34173.81
[2025-10-28T05:06:42.801Z] [LOG] 
💾 Database Update:
[2025-10-28T05:06:42.802Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:06:42.802Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:06:43.024Z] [LOG] 
📝 Components to save:
[2025-10-28T05:06:43.025Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:06:43.025Z] [LOG]    Deduction components: 1
[2025-10-28T05:06:43.026Z] [LOG] Creating components for record f5acf388-eeb9-4e29-a86c-d5fd126a4d08: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:06:43.027Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 34173.808000000005
}
[2025-10-28T05:06:43.241Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:06:43.458Z] [LOG] Created payroll_record_component: 53a7e5b9-f140-4b10-b770-2dfbba85c6ca for Base Salary
[2025-10-28T05:06:43.458Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 15825.376999999993
}
[2025-10-28T05:06:43.667Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:06:43.892Z] [LOG] Created payroll_record_component: ae396fc4-b3aa-46c6-a7bb-68011a671843 for Attendance Shortfall (Info)
[2025-10-28T05:06:44.316Z] [LOG] ✅ Financial balances updated successfully for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:44.317Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:06:44.317Z] [LOG] 
======================================================================
[2025-10-28T05:06:44.318Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Franklin null
[2025-10-28T05:06:44.319Z] [LOG] ======================================================================
[2025-10-28T05:06:44.319Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T05:06:44.320Z] [LOG]    Actual Earned Base (Attendance-based): Rs.34173.81
[2025-10-28T05:06:44.320Z] [LOG]    Attendance Shortfall: Rs.15825.38
[2025-10-28T05:06:44.321Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:44.322Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:06:44.322Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:06:44.323Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:44.325Z] [LOG]    GROSS SALARY: Rs.34173.81
[2025-10-28T05:06:44.326Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:44.327Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:06:44.327Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:06:44.328Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:06:44.328Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:06:44.329Z] [LOG]       - Attendance Shortfall (Info): Rs.15825.38
[2025-10-28T05:06:44.330Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:06:44.330Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:44.331Z] [LOG]    NET SALARY: Rs.34173.81
[2025-10-28T05:06:44.331Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:06:44.332Z] [LOG] ======================================================================

[2025-10-28T05:06:44.333Z] [LOG] ✅ Franklin null: Calculation completed successfully
[2025-10-28T05:06:44.333Z] [LOG] 📊 Progress: 33/34 (97.1%)
[2025-10-28T05:06:44.334Z] [LOG] 
🧮 Processing: Ammaar Ilham (EMP000023)
[2025-10-28T05:06:44.335Z] [LOG] 📋 Record ID: fb944786-da5e-44d2-835a-ab95be5e2a82
[2025-10-28T05:06:44.335Z] [LOG] 
======================================================================
[2025-10-28T05:06:44.336Z] [LOG] 🧮 CALCULATING PAYROLL: Ammaar Ilham (EMP000023)
[2025-10-28T05:06:44.337Z] [LOG] ======================================================================
[2025-10-28T05:06:45.211Z] [LOG] 🔍 Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-28T05:06:45.211Z] [LOG]    Total components: 13
[2025-10-28T05:06:45.212Z] [LOG]    Applicable components: 13
[2025-10-28T05:06:45.212Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T05:06:50.753Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T05:06:50.753Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-09-01 to 2025-09-30
[2025-10-28T05:06:50.968Z] [LOG] 📊 Found 0 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:51.186Z] [LOG] 📊 Found 0 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:51.398Z] [LOG] 📊 Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:51.398Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T05:06:51.399Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T05:06:51.825Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T05:06:51.826Z] [LOG]    👤 Employee: Ammaar Ilham (EMP000023)
[2025-10-28T05:06:51.826Z] [LOG]    📅 Full Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:06:51.826Z] [LOG]    📅 Calculation Until: 2025-09-30 (FULL PERIOD)
[2025-10-28T05:06:51.826Z] [LOG]    Base Salary (Full Month): Rs.70000.00
[2025-10-28T05:06:51.827Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T05:06:52.045Z] [LOG] 
   💵 Pre-calculated Rates for Ammaar Ilham (EMP000023):
[2025-10-28T05:06:52.045Z] [LOG]       Daily Salary: Rs.2800.00
[2025-10-28T05:06:52.045Z] [LOG]       Weekday Hourly Rate: Rs.329.41
[2025-10-28T05:06:52.046Z] [LOG]       Saturday Hourly Rate: Rs.622.22
[2025-10-28T05:06:52.046Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T05:06:52.046Z] [LOG] 
   📊 Full Period Working Days for Ammaar Ilham (EMP000023):
[2025-10-28T05:06:52.046Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:06:52.046Z] [LOG] 
   📊 Working Days for Expected Calculation for Ammaar Ilham (EMP000023):
[2025-10-28T05:06:52.046Z] [LOG]       Up to: 2025-10-28 (including today)
[2025-10-28T05:06:52.046Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-28T05:06:52.259Z] [LOG] 
   ⏰ Calculating Completed Hours for Ammaar Ilham (EMP000023) - All completed sessions:
[2025-10-28T05:06:52.260Z] [LOG]       Period: 2025-09-01 to 2025-09-30
[2025-10-28T05:06:52.260Z] [LOG]       Total completed sessions found: 25
[2025-10-28T05:06:52.260Z] [LOG] 
      📋 Attendance Breakdown for Ammaar Ilham (EMP000023):
[2025-10-28T05:06:52.260Z] [LOG]          1. 2025-09-01 (Weekday): 8.22h
[2025-10-28T05:06:52.260Z] [LOG]          2. 2025-09-02 (Weekday): 4.44h
[2025-10-28T05:06:52.261Z] [LOG]          3. 2025-09-03 (Weekday): 8.47h
[2025-10-28T05:06:52.261Z] [LOG]          4. 2025-09-04 (Weekday): 8.15h
[2025-10-28T05:06:52.261Z] [LOG]          5. 2025-09-06 (Saturday): 3.84h
[2025-10-28T05:06:52.261Z] [LOG]          6. 2025-09-08 (Weekday): 0.00h
[2025-10-28T05:06:52.262Z] [LOG]          7. 2025-09-09 (Weekday): 7.71h
[2025-10-28T05:06:52.262Z] [LOG]          8. 2025-09-10 (Weekday): 8.47h
[2025-10-28T05:06:52.262Z] [LOG]          9. 2025-09-11 (Weekday): 8.34h
[2025-10-28T05:06:52.262Z] [LOG]          10. 2025-09-12 (Weekday): 8.25h
[2025-10-28T05:06:52.263Z] [LOG]          11. 2025-09-13 (Saturday): 4.32h
[2025-10-28T05:06:52.263Z] [LOG]          12. 2025-09-15 (Weekday): 8.18h
[2025-10-28T05:06:52.263Z] [LOG]          13. 2025-09-16 (Weekday): 8.28h
[2025-10-28T05:06:52.263Z] [LOG]          14. 2025-09-17 (Weekday): 7.43h
[2025-10-28T05:06:52.264Z] [LOG]          15. 2025-09-18 (Weekday): 7.99h
[2025-10-28T05:06:52.264Z] [LOG]          16. 2025-09-19 (Weekday): 7.50h
[2025-10-28T05:06:52.264Z] [LOG]          17. 2025-09-20 (Saturday): 4.00h
[2025-10-28T05:06:52.264Z] [LOG]          18. 2025-09-22 (Weekday): 7.90h
[2025-10-28T05:06:52.264Z] [LOG]          19. 2025-09-23 (Weekday): 8.43h
[2025-10-28T05:06:52.265Z] [LOG]          20. 2025-09-24 (Weekday): 7.72h
[2025-10-28T05:06:52.265Z] [LOG]          21. 2025-09-25 (Weekday): 8.32h
[2025-10-28T05:06:52.265Z] [LOG]          22. 2025-09-26 (Weekday): 7.67h
[2025-10-28T05:06:52.265Z] [LOG]          23. 2025-09-27 (Saturday): 3.99h
[2025-10-28T05:06:52.265Z] [LOG]          24. 2025-09-29 (Weekday): 7.58h
[2025-10-28T05:06:52.266Z] [LOG]          25. 2025-09-30 (Weekday): 7.42h
[2025-10-28T05:06:52.477Z] [LOG] 
      📊 Aggregated Totals for Ammaar Ilham (EMP000023):
[2025-10-28T05:06:52.477Z] [LOG]          Weekday: 156.47h
[2025-10-28T05:06:52.477Z] [LOG]          Saturday: 16.15h
[2025-10-28T05:06:52.478Z] [LOG]          Sunday: 0.00h
[2025-10-28T05:06:52.478Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T05:06:52.478Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ammaar Ilham (EMP000023) - completed sessions only:
[2025-10-28T05:06:52.478Z] [LOG]       Weekday: 178.50h
[2025-10-28T05:06:52.478Z] [LOG]       Saturday: 18.00h
[2025-10-28T05:06:52.479Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:06:52.479Z] [LOG]       Total Expected: 196.50h
[2025-10-28T05:06:52.479Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ammaar Ilham (EMP000023) - completed sessions only:
[2025-10-28T05:06:52.479Z] [LOG]       Weekday: 156.47h
[2025-10-28T05:06:52.480Z] [LOG]       Saturday: 16.15h
[2025-10-28T05:06:52.480Z] [LOG]       Sunday: 0.00h
[2025-10-28T05:06:52.480Z] [LOG]       Total Actual: 172.62h
[2025-10-28T05:06:52.480Z] [LOG] 
   💵 EXPECTED Earned Salary for Ammaar Ilham (EMP000023) - until NOW:
[2025-10-28T05:06:52.481Z] [LOG]       Weekday: 178.50h × Rs.329.41 = Rs.58799.69
[2025-10-28T05:06:52.481Z] [LOG]       Saturday: 18.00h × Rs.622.22 = Rs.11199.96
[2025-10-28T05:06:52.481Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:06:52.481Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:52.481Z] [LOG]       Total Expected Earned: Rs.69999.65
[2025-10-28T05:06:52.482Z] [LOG] 
   💵 ACTUAL Earned Salary for Ammaar Ilham (EMP000023) - including live session:
[2025-10-28T05:06:52.482Z] [LOG]       Weekday: 156.47h × Rs.329.41 = Rs.51542.78
[2025-10-28T05:06:52.482Z] [LOG]       Saturday: 16.15h × Rs.622.22 = Rs.10048.85
[2025-10-28T05:06:52.482Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T05:06:52.482Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:52.483Z] [LOG]       Total Actual Earned: Rs.61591.64
[2025-10-28T05:06:52.483Z] [LOG] 
   📊 FINAL CALCULATION for Ammaar Ilham (EMP000023):
[2025-10-28T05:06:52.484Z] [LOG]       Calculated At: Oct 28, 2025, 10:36:52
[2025-10-28T05:06:52.484Z] [LOG]       Expected Earned: Rs.69999.65
[2025-10-28T05:06:52.484Z] [LOG]       Actual Earned: Rs.61591.64
[2025-10-28T05:06:52.484Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T05:06:52.484Z] [LOG]       Attendance Deduction: Rs.8408.01
[2025-10-28T05:06:52.485Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T05:06:52.485Z] [LOG]       📉 Shortfall for Ammaar Ilham: 23.88 hours (12.01% of expected)
[2025-10-28T05:06:52.485Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T05:06:52.485Z] [LOG]    Base Salary (Full): Rs.70000.00
[2025-10-28T05:06:52.486Z] [LOG]    Actual Earned Base: Rs.61591.64
[2025-10-28T05:06:52.486Z] [LOG]    Attendance Shortfall: Rs.8408.01
[2025-10-28T05:06:52.486Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T05:06:52.486Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T05:06:52.487Z] [LOG]    Gross Salary: 61591.6357
[2025-10-28T05:06:52.487Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T05:06:52.487Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T05:06:52.487Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:52.487Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T05:06:52.488Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:52.488Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T05:06:52.488Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:52.488Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T05:06:52.488Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:52.488Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T05:06:52.488Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:52.489Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T05:06:52.489Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:52.489Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T05:06:52.489Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:52.489Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T05:06:52.490Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:52.490Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T05:06:52.490Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:52.491Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T05:06:52.491Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:52.491Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T05:06:52.491Z] [LOG]    EPF/ETF calculated on: Rs.61591.64
[2025-10-28T05:06:52.491Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T05:06:52.491Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T05:06:52.491Z] [LOG] 💰 GROSS CALCULATION for Ammaar Ilham:
[2025-10-28T05:06:52.492Z] [LOG]    Base Salary: 70000
[2025-10-28T05:06:52.492Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T05:06:52.492Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T05:06:52.492Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:52.492Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T05:06:52.493Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:52.493Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T05:06:52.493Z] [LOG]    Fixed amount: 0
[2025-10-28T05:06:52.709Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T05:06:52.709Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:06:52.710Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T05:06:52.710Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T05:06:52.710Z] [LOG]    Actual Earned Base: Rs.61591.64
[2025-10-28T05:06:52.710Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T05:06:52.710Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T05:06:52.711Z] [LOG]    = Gross Salary: Rs.61591.64
[2025-10-28T05:06:52.711Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T05:06:52.711Z] [LOG]    Attendance Shortfall (Info): Rs.8408.01
[2025-10-28T05:06:52.711Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T05:06:52.712Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T05:06:52.712Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T05:06:52.712Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T05:06:52.712Z] [LOG]    Gross Salary: Rs.61591.64
[2025-10-28T05:06:52.713Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T05:06:52.713Z] [LOG]    = NET SALARY: Rs.61591.64
[2025-10-28T05:06:52.713Z] [LOG] 
💾 Database Update:
[2025-10-28T05:06:52.713Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T05:06:52.713Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T05:06:52.924Z] [LOG] 
📝 Components to save:
[2025-10-28T05:06:52.925Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T05:06:52.925Z] [LOG]    Deduction components: 1
[2025-10-28T05:06:52.925Z] [LOG] Creating components for record fb944786-da5e-44d2-835a-ab95be5e2a82: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T05:06:52.926Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 61591.6357
}
[2025-10-28T05:06:53.138Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T05:06:53.357Z] [LOG] Created payroll_record_component: 943de7b2-c6bb-4449-b0fe-057bb4c18a2e for Base Salary
[2025-10-28T05:06:53.357Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 8408.009300000005
}
[2025-10-28T05:06:53.565Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T05:06:53.785Z] [LOG] Created payroll_record_component: 73a92fdd-33f8-4b3b-a578-9619f9762fc1 for Attendance Shortfall (Info)
[2025-10-28T05:06:54.202Z] [LOG] ✅ Financial balances updated successfully for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-28T05:06:54.202Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T05:06:54.202Z] [LOG] 
======================================================================
[2025-10-28T05:06:54.202Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ammaar Ilham
[2025-10-28T05:06:54.203Z] [LOG] ======================================================================
[2025-10-28T05:06:54.203Z] [LOG]    Base Salary (Full): Rs.70000.00
[2025-10-28T05:06:54.203Z] [LOG]    Actual Earned Base (Attendance-based): Rs.61591.64
[2025-10-28T05:06:54.203Z] [LOG]    Attendance Shortfall: Rs.8408.01
[2025-10-28T05:06:54.203Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:54.204Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T05:06:54.204Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T05:06:54.204Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:54.204Z] [LOG]    GROSS SALARY: Rs.61591.64
[2025-10-28T05:06:54.205Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:54.205Z] [LOG]    Deductions Breakdown:
[2025-10-28T05:06:54.205Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T05:06:54.206Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T05:06:54.206Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T05:06:54.206Z] [LOG]       - Attendance Shortfall (Info): Rs.8408.01
[2025-10-28T05:06:54.206Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T05:06:54.207Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T05:06:54.207Z] [LOG]    NET SALARY: Rs.61591.64
[2025-10-28T05:06:54.207Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T05:06:54.208Z] [LOG] ======================================================================

[2025-10-28T05:06:54.208Z] [LOG] ✅ Ammaar Ilham: Calculation completed successfully
[2025-10-28T05:06:54.208Z] [LOG] 📊 Progress: 34/34 (100.0%)
[2025-10-28T05:06:54.209Z] [LOG] 
============================================================
[2025-10-28T05:06:54.209Z] [LOG] 📈 Processing Summary: 34 successful, 0 failed
[2025-10-28T05:06:56.140Z] [LOG] 🎉 Payroll calculation completed successfully!
[2025-10-28T05:06:56.141Z] [LOG] 📊 Final Summary: 34 processed, 0 errors
[2025-10-28T05:06:56.141Z] [INFO] ================================================================================
[2025-10-28T05:06:56.141Z] [INFO] ⏰ Completed at: 2025-10-28T05:06:56.141Z
[2025-10-28T05:06:56.141Z] [INFO] 📊 Total log entries: 6109