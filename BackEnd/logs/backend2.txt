[2025-10-27T10:31:58.352Z] [INFO] 🚀 Payroll calculation logging started for run: c07113b5-077b-4aec-beda-5265ae3e8e2f
[2025-10-27T10:31:58.352Z] [INFO] 📁 Log file: D:\attendance-system\BackEnd\logs\payroll-run-c07113b5-077b-4aec-beda-5265ae3e8e2f-2025-10-27T10-31-58-352Z.txt
[2025-10-27T10:31:58.352Z] [INFO] ⏰ Started at: 2025-10-27T10:31:58.352Z
[2025-10-27T10:31:58.352Z] [INFO] ================================================================================
[2025-10-27T10:31:58.352Z] [LOG] 🚀 Starting payroll calculation for run: c07113b5-077b-4aec-beda-5265ae3e8e2f
[2025-10-27T10:31:58.353Z] [LOG] 👤 Client ID: it-signature, User ID: 059304ea-24a5-4d78-a290-cf09b9e53c4c
[2025-10-27T10:31:59.244Z] [LOG] ✅ Payroll run verified: October (MONTHLY_2025_10_REGULAR)
[2025-10-27T10:31:59.707Z] [LOG] 📊 Status updated to 'calculating'
[2025-10-27T10:32:00.358Z] [LOG] 👥 Processing 34 employee records:
[2025-10-27T10:32:00.359Z] [LOG] ============================================================
[2025-10-27T10:32:00.360Z] [LOG] 
🧮 Processing: Dharshika null (EMP000009)
[2025-10-27T10:32:00.360Z] [LOG] 📋 Record ID: 0b12701e-f0dc-4a28-a9c0-59836e3e6298
[2025-10-27T10:32:00.363Z] [LOG] 
======================================================================
[2025-10-27T10:32:00.364Z] [LOG] 🧮 CALCULATING PAYROLL: Dharshika null (EMP000009)
[2025-10-27T10:32:00.365Z] [LOG] ======================================================================
[2025-10-27T10:32:02.093Z] [LOG] 🔍 Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-27T10:32:02.094Z] [LOG]    Total components: 13
[2025-10-27T10:32:02.094Z] [LOG]    Applicable components: 13
[2025-10-27T10:32:02.095Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T10:32:03.857Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:32:03.858Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:32:05.138Z] [LOG] 📊 Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:05.585Z] [LOG] 📊 Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:06.029Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:06.029Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:32:06.030Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:32:06.926Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:32:06.926Z] [LOG]    👤 Employee: Dharshika null (EMP000009)
[2025-10-27T10:32:06.926Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:32:06.927Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:32:06.927Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-27T10:32:06.927Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:32:07.803Z] [LOG] 
   💵 Pre-calculated Rates for Dharshika null (EMP000009):
[2025-10-27T10:32:07.804Z] [LOG]       Daily Salary: Rs.3846.15
[2025-10-27T10:32:07.804Z] [LOG]       Weekday Hourly Rate: Rs.452.49
[2025-10-27T10:32:07.805Z] [LOG]       Saturday Hourly Rate: Rs.854.70
[2025-10-27T10:32:07.805Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:32:07.805Z] [LOG] 
   📊 Full Period Working Days for Dharshika null (EMP000009):
[2025-10-27T10:32:07.806Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:32:09.202Z] [LOG] 
   📊 Working Days for Expected Calculation for Dharshika null (EMP000009):
[2025-10-27T10:32:09.203Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:32:09.203Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:32:09.649Z] [LOG] 
   ⏰ Calculating Completed Hours for Dharshika null (EMP000009) - All completed sessions:
[2025-10-27T10:32:09.650Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:32:09.650Z] [LOG]       Total completed sessions found: 16
[2025-10-27T10:32:09.650Z] [LOG] 
      📋 Attendance Breakdown for Dharshika null (EMP000009):
[2025-10-27T10:32:09.651Z] [LOG]          1. 2025-10-01 (Weekday): 6.00h
[2025-10-27T10:32:09.651Z] [LOG]          2. 2025-10-02 (Weekday): 6.15h
[2025-10-27T10:32:09.651Z] [LOG]          3. 2025-10-03 (Weekday): 7.03h
[2025-10-27T10:32:09.651Z] [LOG]          4. 2025-10-07 (Weekday): 6.87h
[2025-10-27T10:32:09.651Z] [LOG]          5. 2025-10-08 (Weekday): 6.02h
[2025-10-27T10:32:09.652Z] [LOG]          6. 2025-10-09 (Weekday): 7.00h
[2025-10-27T10:32:09.652Z] [LOG]          7. 2025-10-10 (Weekday): 7.03h
[2025-10-27T10:32:09.652Z] [LOG]          8. 2025-10-11 (Saturday): 3.47h
[2025-10-27T10:32:09.652Z] [LOG]          9. 2025-10-13 (Weekday): 6.11h
[2025-10-27T10:32:09.652Z] [LOG]          10. 2025-10-14 (Weekday): 7.56h
[2025-10-27T10:32:09.653Z] [LOG]          11. 2025-10-15 (Weekday): 7.25h
[2025-10-27T10:32:09.653Z] [LOG]          12. 2025-10-16 (Weekday): 7.75h
[2025-10-27T10:32:09.653Z] [LOG]          13. 2025-10-17 (Weekday): 6.50h
[2025-10-27T10:32:09.653Z] [LOG]          14. 2025-10-21 (Weekday): 6.33h
[2025-10-27T10:32:09.653Z] [LOG]          15. 2025-10-22 (Weekday): 7.00h
[2025-10-27T10:32:09.654Z] [LOG]          16. 2025-10-23 (Weekday): 0.00h
[2025-10-27T10:32:10.098Z] [LOG] 
      📊 Aggregated Totals for Dharshika null (EMP000009):
[2025-10-27T10:32:10.099Z] [LOG]          Weekday: 94.60h
[2025-10-27T10:32:10.099Z] [LOG]          Saturday: 3.47h
[2025-10-27T10:32:10.099Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:32:10.100Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:32:10.100Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Dharshika null (EMP000009) - completed sessions only:
[2025-10-27T10:32:10.101Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:32:10.101Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:32:10.101Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:32:10.102Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:32:10.102Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Dharshika null (EMP000009) - completed sessions only:
[2025-10-27T10:32:10.103Z] [LOG]       Weekday: 94.60h
[2025-10-27T10:32:10.103Z] [LOG]       Saturday: 3.47h
[2025-10-27T10:32:10.103Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:32:10.104Z] [LOG]       Total Actual: 98.07h
[2025-10-27T10:32:10.104Z] [LOG] 
   💵 EXPECTED Earned Salary for Dharshika null (EMP000009) - until NOW:
[2025-10-27T10:32:10.105Z] [LOG]       Weekday: 153.00h × Rs.452.49 = Rs.69230.97
[2025-10-27T10:32:10.105Z] [LOG]       Saturday: 18.00h × Rs.854.70 = Rs.15384.60
[2025-10-27T10:32:10.106Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:32:10.106Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:10.106Z] [LOG]       Total Expected Earned: Rs.84615.57
[2025-10-27T10:32:10.107Z] [LOG] 
   💵 ACTUAL Earned Salary for Dharshika null (EMP000009) - including live session:
[2025-10-27T10:32:10.108Z] [LOG]       Weekday: 94.60h × Rs.452.49 = Rs.42805.55
[2025-10-27T10:32:10.108Z] [LOG]       Saturday: 3.47h × Rs.854.70 = Rs.2965.81
[2025-10-27T10:32:10.108Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:32:10.109Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:10.109Z] [LOG]       Total Actual Earned: Rs.45771.36
[2025-10-27T10:32:10.110Z] [LOG] 
   📊 FINAL CALCULATION for Dharshika null (EMP000009):
[2025-10-27T10:32:10.111Z] [LOG]       Calculated At: Oct 27, 2025, 16:02:10
[2025-10-27T10:32:10.111Z] [LOG]       Expected Earned: Rs.84615.57
[2025-10-27T10:32:10.111Z] [LOG]       Actual Earned: Rs.45771.36
[2025-10-27T10:32:10.111Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:10.111Z] [LOG]       Attendance Deduction: Rs.38844.21
[2025-10-27T10:32:10.112Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:32:10.112Z] [LOG]       📉 Shortfall for Dharshika null: 72.93 hours (45.91% of expected)
[2025-10-27T10:32:10.112Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:32:10.112Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-27T10:32:10.112Z] [LOG]    Actual Earned Base: Rs.45771.36
[2025-10-27T10:32:10.113Z] [LOG]    Attendance Shortfall: Rs.38844.21
[2025-10-27T10:32:10.113Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:32:10.113Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:32:10.114Z] [LOG]    Gross Salary: 45771.363
[2025-10-27T10:32:10.114Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:32:10.114Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:32:10.115Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:10.115Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:32:10.115Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:10.115Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:32:10.116Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:10.116Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:32:10.116Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:10.116Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:32:10.116Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:10.117Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:32:10.117Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:10.117Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:32:10.117Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:10.117Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:32:10.117Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:10.118Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:32:10.118Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:10.118Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:32:10.118Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:10.118Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:32:10.119Z] [LOG]    EPF/ETF calculated on: Rs.45771.36
[2025-10-27T10:32:10.119Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:32:10.119Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:32:10.120Z] [LOG] 💰 GROSS CALCULATION for Dharshika null:
[2025-10-27T10:32:10.120Z] [LOG]    Base Salary: 100000
[2025-10-27T10:32:10.120Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:32:10.120Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:32:10.121Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:10.121Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:32:10.121Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:10.121Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:32:10.121Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:10.564Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:32:10.565Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:32:10.565Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:32:10.566Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:32:10.566Z] [LOG]    Actual Earned Base: Rs.45771.36
[2025-10-27T10:32:10.567Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:32:10.567Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:32:10.568Z] [LOG]    = Gross Salary: Rs.45771.36
[2025-10-27T10:32:10.568Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:32:10.569Z] [LOG]    Attendance Shortfall (Info): Rs.38844.21
[2025-10-27T10:32:10.570Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:32:10.570Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:32:10.571Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:32:10.571Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:32:10.572Z] [LOG]    Gross Salary: Rs.45771.36
[2025-10-27T10:32:10.573Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:32:10.574Z] [LOG]    = NET SALARY: Rs.45771.36
[2025-10-27T10:32:10.574Z] [LOG] 
💾 Database Update:
[2025-10-27T10:32:10.576Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:32:10.577Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:32:11.024Z] [LOG] 
📝 Components to save:
[2025-10-27T10:32:11.025Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:32:11.025Z] [LOG]    Deduction components: 1
[2025-10-27T10:32:11.026Z] [LOG] Creating components for record 0b12701e-f0dc-4a28-a9c0-59836e3e6298: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:32:11.028Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 45771.363
}
[2025-10-27T10:32:11.436Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:32:11.875Z] [LOG] Created payroll_record_component: fd9c8d8b-908b-4724-8e6b-1c813ba55d6e for Base Salary
[2025-10-27T10:32:11.876Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 38844.20700000001
}
[2025-10-27T10:32:12.120Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:32:12.338Z] [LOG] Created payroll_record_component: 7e4420f0-86b7-48ab-9614-38f4d5ad8806 for Attendance Shortfall (Info)
[2025-10-27T10:32:12.961Z] [LOG] ✅ Financial balances updated successfully for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:12.961Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:32:12.962Z] [LOG] 
======================================================================
[2025-10-27T10:32:12.962Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Dharshika null
[2025-10-27T10:32:12.963Z] [LOG] ======================================================================
[2025-10-27T10:32:12.964Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-27T10:32:12.964Z] [LOG]    Actual Earned Base (Attendance-based): Rs.45771.36
[2025-10-27T10:32:12.965Z] [LOG]    Attendance Shortfall: Rs.38844.21
[2025-10-27T10:32:12.965Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:12.967Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:32:12.967Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:32:12.968Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:12.969Z] [LOG]    GROSS SALARY: Rs.45771.36
[2025-10-27T10:32:12.970Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:12.971Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:32:12.971Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:32:12.972Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:32:12.972Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:32:12.973Z] [LOG]       - Attendance Shortfall (Info): Rs.38844.21
[2025-10-27T10:32:12.974Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:32:12.974Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:12.975Z] [LOG]    NET SALARY: Rs.45771.36
[2025-10-27T10:32:12.976Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:32:12.976Z] [LOG] ======================================================================

[2025-10-27T10:32:12.977Z] [LOG] ✅ Dharshika null: Calculation completed successfully
[2025-10-27T10:32:12.978Z] [LOG] 📊 Progress: 1/34 (2.9%)
[2025-10-27T10:32:12.979Z] [LOG] 
🧮 Processing: Ratheeshanan null (EMP000047)
[2025-10-27T10:32:12.979Z] [LOG] 📋 Record ID: 0cf90439-c0c8-4368-b631-39c773fc826d
[2025-10-27T10:32:12.980Z] [LOG] 
======================================================================
[2025-10-27T10:32:12.981Z] [LOG] 🧮 CALCULATING PAYROLL: Ratheeshanan null (EMP000047)
[2025-10-27T10:32:12.982Z] [LOG] ======================================================================
[2025-10-27T10:32:13.818Z] [LOG] 🔍 Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-27T10:32:13.819Z] [LOG]    Total components: 13
[2025-10-27T10:32:13.819Z] [LOG]    Applicable components: 13
[2025-10-27T10:32:13.820Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T10:32:14.649Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:32:14.649Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:32:14.852Z] [LOG] 📊 Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:15.055Z] [LOG] 📊 Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:15.261Z] [LOG] 📊 Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:15.262Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:32:15.263Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:32:15.664Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:32:15.664Z] [LOG]    👤 Employee: Ratheeshanan null (EMP000047)
[2025-10-27T10:32:15.665Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:32:15.666Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:32:15.666Z] [LOG]    Base Salary (Full Month): Rs.25000.00
[2025-10-27T10:32:15.667Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:32:15.872Z] [LOG] 
   💵 Pre-calculated Rates for Ratheeshanan null (EMP000047):
[2025-10-27T10:32:15.873Z] [LOG]       Daily Salary: Rs.961.54
[2025-10-27T10:32:15.873Z] [LOG]       Weekday Hourly Rate: Rs.113.12
[2025-10-27T10:32:15.874Z] [LOG]       Saturday Hourly Rate: Rs.213.68
[2025-10-27T10:32:15.874Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:32:15.875Z] [LOG] 
   📊 Full Period Working Days for Ratheeshanan null (EMP000047):
[2025-10-27T10:32:15.876Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:32:16.485Z] [LOG] 
   📊 Working Days for Expected Calculation for Ratheeshanan null (EMP000047):
[2025-10-27T10:32:16.486Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:32:16.486Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:32:16.688Z] [LOG] 
   ⏰ Calculating Completed Hours for Ratheeshanan null (EMP000047) - All completed sessions:
[2025-10-27T10:32:16.689Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:32:16.689Z] [LOG]       Total completed sessions found: 18
[2025-10-27T10:32:16.690Z] [LOG] 
      📋 Attendance Breakdown for Ratheeshanan null (EMP000047):
[2025-10-27T10:32:16.691Z] [LOG]          1. 2025-10-01 (Weekday): 7.88h
[2025-10-27T10:32:16.691Z] [LOG]          2. 2025-10-02 (Weekday): 8.25h
[2025-10-27T10:32:16.692Z] [LOG]          3. 2025-10-03 (Weekday): 8.08h
[2025-10-27T10:32:16.693Z] [LOG]          4. 2025-10-04 (Saturday): 4.50h
[2025-10-27T10:32:16.693Z] [LOG]          5. 2025-10-07 (Weekday): 7.72h
[2025-10-27T10:32:16.694Z] [LOG]          6. 2025-10-08 (Weekday): 8.50h
[2025-10-27T10:32:16.697Z] [LOG]          7. 2025-10-09 (Weekday): 8.50h
[2025-10-27T10:32:16.698Z] [LOG]          8. 2025-10-10 (Weekday): 8.50h
[2025-10-27T10:32:16.699Z] [LOG]          9. 2025-10-11 (Saturday): 4.50h
[2025-10-27T10:32:16.700Z] [LOG]          10. 2025-10-13 (Weekday): 7.78h
[2025-10-27T10:32:16.701Z] [LOG]          11. 2025-10-14 (Weekday): 8.50h
[2025-10-27T10:32:16.702Z] [LOG]          12. 2025-10-16 (Weekday): 8.50h
[2025-10-27T10:32:16.703Z] [LOG]          13. 2025-10-17 (Weekday): 6.30h
[2025-10-27T10:32:16.703Z] [LOG]          14. 2025-10-18 (Saturday): 4.50h
[2025-10-27T10:32:16.704Z] [LOG]          15. 2025-10-21 (Weekday): 8.50h
[2025-10-27T10:32:16.704Z] [LOG]          16. 2025-10-22 (Weekday): 8.42h
[2025-10-27T10:32:16.705Z] [LOG]          17. 2025-10-23 (Weekday): 8.50h
[2025-10-27T10:32:16.706Z] [LOG]          18. 2025-10-24 (Weekday): 8.50h
[2025-10-27T10:32:16.926Z] [LOG] 
      📊 Aggregated Totals for Ratheeshanan null (EMP000047):
[2025-10-27T10:32:16.927Z] [LOG]          Weekday: 122.43h
[2025-10-27T10:32:16.928Z] [LOG]          Saturday: 13.50h
[2025-10-27T10:32:16.928Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:32:16.929Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:32:16.929Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ratheeshanan null (EMP000047) - completed sessions only:
[2025-10-27T10:32:16.930Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:32:16.931Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:32:16.931Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:32:16.932Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:32:16.933Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ratheeshanan null (EMP000047) - completed sessions only:
[2025-10-27T10:32:16.934Z] [LOG]       Weekday: 122.43h
[2025-10-27T10:32:16.935Z] [LOG]       Saturday: 13.50h
[2025-10-27T10:32:16.935Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:32:16.936Z] [LOG]       Total Actual: 135.93h
[2025-10-27T10:32:16.936Z] [LOG] 
   💵 EXPECTED Earned Salary for Ratheeshanan null (EMP000047) - until NOW:
[2025-10-27T10:32:16.938Z] [LOG]       Weekday: 153.00h × Rs.113.12 = Rs.17307.36
[2025-10-27T10:32:16.938Z] [LOG]       Saturday: 18.00h × Rs.213.68 = Rs.3846.24
[2025-10-27T10:32:16.939Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:32:16.939Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:16.940Z] [LOG]       Total Expected Earned: Rs.21153.60
[2025-10-27T10:32:16.941Z] [LOG] 
   💵 ACTUAL Earned Salary for Ratheeshanan null (EMP000047) - including live session:
[2025-10-27T10:32:16.942Z] [LOG]       Weekday: 122.43h × Rs.113.12 = Rs.13849.28
[2025-10-27T10:32:16.942Z] [LOG]       Saturday: 13.50h × Rs.213.68 = Rs.2884.68
[2025-10-27T10:32:16.943Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:32:16.944Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:16.944Z] [LOG]       Total Actual Earned: Rs.16733.96
[2025-10-27T10:32:16.946Z] [LOG] 
   📊 FINAL CALCULATION for Ratheeshanan null (EMP000047):
[2025-10-27T10:32:16.946Z] [LOG]       Calculated At: Oct 27, 2025, 16:02:16
[2025-10-27T10:32:16.947Z] [LOG]       Expected Earned: Rs.21153.60
[2025-10-27T10:32:16.947Z] [LOG]       Actual Earned: Rs.16733.96
[2025-10-27T10:32:16.948Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:16.949Z] [LOG]       Attendance Deduction: Rs.4419.64
[2025-10-27T10:32:16.949Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:32:16.950Z] [LOG]       📉 Shortfall for Ratheeshanan null: 35.07 hours (20.89% of expected)
[2025-10-27T10:32:16.950Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:32:16.951Z] [LOG]    Base Salary (Full): Rs.25000.00
[2025-10-27T10:32:16.951Z] [LOG]    Actual Earned Base: Rs.16733.96
[2025-10-27T10:32:16.952Z] [LOG]    Attendance Shortfall: Rs.4419.64
[2025-10-27T10:32:16.952Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:32:16.952Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:32:16.953Z] [LOG]    Gross Salary: 16733.961600000002
[2025-10-27T10:32:16.953Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:32:16.953Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:32:16.954Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:16.954Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:32:16.955Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:16.955Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:32:16.955Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:16.956Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:32:16.956Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:16.956Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:32:16.957Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:16.957Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:32:16.957Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:16.958Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:32:16.958Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:16.958Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:32:16.959Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:16.959Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:32:16.960Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:16.960Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:32:16.960Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:16.961Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:32:16.961Z] [LOG]    EPF/ETF calculated on: Rs.16733.96
[2025-10-27T10:32:16.962Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:32:16.962Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:32:16.962Z] [LOG] 💰 GROSS CALCULATION for Ratheeshanan null:
[2025-10-27T10:32:16.963Z] [LOG]    Base Salary: 25000
[2025-10-27T10:32:16.963Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:32:16.964Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:32:16.964Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:16.964Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:32:16.965Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:16.965Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:32:16.965Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:17.176Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:32:17.177Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:32:17.178Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:32:17.178Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:32:17.179Z] [LOG]    Actual Earned Base: Rs.16733.96
[2025-10-27T10:32:17.179Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:32:17.180Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:32:17.181Z] [LOG]    = Gross Salary: Rs.16733.96
[2025-10-27T10:32:17.181Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:32:17.182Z] [LOG]    Attendance Shortfall (Info): Rs.4419.64
[2025-10-27T10:32:17.183Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:32:17.184Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:32:17.184Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:32:17.185Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:32:17.186Z] [LOG]    Gross Salary: Rs.16733.96
[2025-10-27T10:32:17.186Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:32:17.187Z] [LOG]    = NET SALARY: Rs.16733.96
[2025-10-27T10:32:17.187Z] [LOG] 
💾 Database Update:
[2025-10-27T10:32:17.188Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:32:17.189Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:32:17.395Z] [LOG] 
📝 Components to save:
[2025-10-27T10:32:17.396Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:32:17.396Z] [LOG]    Deduction components: 1
[2025-10-27T10:32:17.397Z] [LOG] Creating components for record 0cf90439-c0c8-4368-b631-39c773fc826d: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:32:17.398Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 16733.961600000002
}
[2025-10-27T10:32:17.600Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:32:17.821Z] [LOG] Created payroll_record_component: 1e06da53-07dc-4887-be8e-ee1b495437fb for Base Salary
[2025-10-27T10:32:17.821Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 4419.6384
}
[2025-10-27T10:32:18.039Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:32:18.241Z] [LOG] Created payroll_record_component: 4da203bb-c7e7-4839-97df-10f4f1ea72f5 for Attendance Shortfall (Info)
[2025-10-27T10:32:18.648Z] [LOG] ✅ Financial balances updated successfully for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:18.649Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:32:18.649Z] [LOG] 
======================================================================
[2025-10-27T10:32:18.650Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ratheeshanan null
[2025-10-27T10:32:18.650Z] [LOG] ======================================================================
[2025-10-27T10:32:18.651Z] [LOG]    Base Salary (Full): Rs.25000.00
[2025-10-27T10:32:18.652Z] [LOG]    Actual Earned Base (Attendance-based): Rs.16733.96
[2025-10-27T10:32:18.652Z] [LOG]    Attendance Shortfall: Rs.4419.64
[2025-10-27T10:32:18.653Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:18.653Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:32:18.654Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:32:18.655Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:18.655Z] [LOG]    GROSS SALARY: Rs.16733.96
[2025-10-27T10:32:18.656Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:18.656Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:32:18.657Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:32:18.658Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:32:18.659Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:32:18.659Z] [LOG]       - Attendance Shortfall (Info): Rs.4419.64
[2025-10-27T10:32:18.660Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:32:18.661Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:18.661Z] [LOG]    NET SALARY: Rs.16733.96
[2025-10-27T10:32:18.662Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:32:18.662Z] [LOG] ======================================================================

[2025-10-27T10:32:18.663Z] [LOG] ✅ Ratheeshanan null: Calculation completed successfully
[2025-10-27T10:32:18.664Z] [LOG] 📊 Progress: 2/34 (5.9%)
[2025-10-27T10:32:18.664Z] [LOG] 
🧮 Processing: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-27T10:32:18.665Z] [LOG] 📋 Record ID: 0e657491-da0f-4bbd-8e5a-6431b520a843
[2025-10-27T10:32:18.666Z] [LOG] 
======================================================================
[2025-10-27T10:32:18.666Z] [LOG] 🧮 CALCULATING PAYROLL: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-27T10:32:18.667Z] [LOG] ======================================================================
[2025-10-27T10:32:19.505Z] [LOG] 🔍 Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-27T10:32:19.506Z] [LOG]    Total components: 13
[2025-10-27T10:32:19.506Z] [LOG]    Applicable components: 13
[2025-10-27T10:32:19.507Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T10:32:20.323Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:32:20.323Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:32:20.939Z] [LOG] 📊 Found 1 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:21.144Z] [LOG] 📊 Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:21.354Z] [LOG] 📊 Found 0 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:21.355Z] [LOG] 💰 Loan 5690e2d3-580a-4d9d-bc32-1be366ff2cc7: Deducting LKR 5012.5 (Remaining: LKR 5012.51)
[2025-10-27T10:32:21.355Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 5012.5,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": -5012.5
}
[2025-10-27T10:32:21.357Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:32:21.775Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:32:21.776Z] [LOG]    👤 Employee: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-27T10:32:21.777Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:32:21.777Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:32:21.778Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T10:32:21.778Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:32:21.981Z] [LOG] 
   💵 Pre-calculated Rates for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-27T10:32:21.982Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-27T10:32:21.983Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-27T10:32:21.983Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-27T10:32:21.984Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:32:21.985Z] [LOG] 
   📊 Full Period Working Days for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-27T10:32:21.985Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:32:22.618Z] [LOG] 
   📊 Working Days for Expected Calculation for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-27T10:32:22.619Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:32:22.620Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:32:22.837Z] [LOG] 
   ⏰ Calculating Completed Hours for Ashen Nirmal Wadugodapitiya null (EMP000046) - All completed sessions:
[2025-10-27T10:32:22.837Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:32:22.837Z] [LOG]       Total completed sessions found: 19
[2025-10-27T10:32:22.838Z] [LOG] 
      📋 Attendance Breakdown for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-27T10:32:22.838Z] [LOG]          1. 2025-10-01 (Weekday): 8.50h
[2025-10-27T10:32:22.839Z] [LOG]          2. 2025-10-02 (Weekday): 8.47h
[2025-10-27T10:32:22.839Z] [LOG]          3. 2025-10-03 (Weekday): 8.50h
[2025-10-27T10:32:22.839Z] [LOG]          4. 2025-10-04 (Saturday): 4.50h
[2025-10-27T10:32:22.840Z] [LOG]          5. 2025-10-08 (Weekday): 8.50h
[2025-10-27T10:32:22.840Z] [LOG]          6. 2025-10-09 (Weekday): 8.50h
[2025-10-27T10:32:22.840Z] [LOG]          7. 2025-10-10 (Weekday): 8.50h
[2025-10-27T10:32:22.840Z] [LOG]          8. 2025-10-11 (Saturday): 4.50h
[2025-10-27T10:32:22.841Z] [LOG]          9. 2025-10-13 (Weekday): 8.50h
[2025-10-27T10:32:22.841Z] [LOG]          10. 2025-10-14 (Weekday): 8.50h
[2025-10-27T10:32:22.841Z] [LOG]          11. 2025-10-15 (Weekday): 7.47h
[2025-10-27T10:32:22.842Z] [LOG]          12. 2025-10-16 (Weekday): 8.50h
[2025-10-27T10:32:22.842Z] [LOG]          13. 2025-10-17 (Weekday): 8.50h
[2025-10-27T10:32:22.842Z] [LOG]          14. 2025-10-18 (Saturday): 4.50h
[2025-10-27T10:32:22.843Z] [LOG]          15. 2025-10-20 (Weekday): 8.50h
[2025-10-27T10:32:22.843Z] [LOG]          16. 2025-10-21 (Weekday): 8.38h
[2025-10-27T10:32:22.843Z] [LOG]          17. 2025-10-22 (Weekday): 8.50h
[2025-10-27T10:32:22.844Z] [LOG]          18. 2025-10-23 (Weekday): 8.33h
[2025-10-27T10:32:22.844Z] [LOG]          19. 2025-10-24 (Weekday): 8.26h
[2025-10-27T10:32:23.044Z] [LOG] 
      📊 Aggregated Totals for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-27T10:32:23.045Z] [LOG]          Weekday: 134.41h
[2025-10-27T10:32:23.046Z] [LOG]          Saturday: 13.50h
[2025-10-27T10:32:23.046Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:32:23.047Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:32:23.047Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ashen Nirmal Wadugodapitiya null (EMP000046) - completed sessions only:
[2025-10-27T10:32:23.048Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:32:23.049Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:32:23.049Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:32:23.050Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:32:23.052Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ashen Nirmal Wadugodapitiya null (EMP000046) - completed sessions only:
[2025-10-27T10:32:23.053Z] [LOG]       Weekday: 134.41h
[2025-10-27T10:32:23.054Z] [LOG]       Saturday: 13.50h
[2025-10-27T10:32:23.054Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:32:23.055Z] [LOG]       Total Actual: 147.91h
[2025-10-27T10:32:23.056Z] [LOG] 
   💵 EXPECTED Earned Salary for Ashen Nirmal Wadugodapitiya null (EMP000046) - until NOW:
[2025-10-27T10:32:23.057Z] [LOG]       Weekday: 153.00h × Rs.226.24 = Rs.34614.72
[2025-10-27T10:32:23.057Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-27T10:32:23.058Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:32:23.059Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:23.059Z] [LOG]       Total Expected Earned: Rs.42307.02
[2025-10-27T10:32:23.060Z] [LOG] 
   💵 ACTUAL Earned Salary for Ashen Nirmal Wadugodapitiya null (EMP000046) - including live session:
[2025-10-27T10:32:23.061Z] [LOG]       Weekday: 134.41h × Rs.226.24 = Rs.30408.92
[2025-10-27T10:32:23.062Z] [LOG]       Saturday: 13.50h × Rs.427.35 = Rs.5769.23
[2025-10-27T10:32:23.062Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:32:23.063Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:23.063Z] [LOG]       Total Actual Earned: Rs.36178.14
[2025-10-27T10:32:23.065Z] [LOG] 
   📊 FINAL CALCULATION for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-27T10:32:23.065Z] [LOG]       Calculated At: Oct 27, 2025, 16:02:23
[2025-10-27T10:32:23.066Z] [LOG]       Expected Earned: Rs.42307.02
[2025-10-27T10:32:23.067Z] [LOG]       Actual Earned: Rs.36178.14
[2025-10-27T10:32:23.067Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:23.068Z] [LOG]       Attendance Deduction: Rs.6128.88
[2025-10-27T10:32:23.068Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:32:23.069Z] [LOG]       📉 Shortfall for Ashen Nirmal Wadugodapitiya null: 23.09 hours (14.49% of expected)
[2025-10-27T10:32:23.070Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:32:23.070Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:32:23.071Z] [LOG]    Actual Earned Base: Rs.36178.14
[2025-10-27T10:32:23.071Z] [LOG]    Attendance Shortfall: Rs.6128.88
[2025-10-27T10:32:23.072Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:32:23.072Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:32:23.072Z] [LOG]    Gross Salary: 36178.1434
[2025-10-27T10:32:23.073Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:32:23.073Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:32:23.073Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:23.074Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:32:23.074Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:23.074Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:32:23.075Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:23.075Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:32:23.075Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:23.076Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:32:23.076Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:23.077Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:32:23.078Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:23.078Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:32:23.078Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:23.079Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:32:23.079Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:23.080Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:32:23.080Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:23.080Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:32:23.080Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:23.081Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:32:23.081Z] [LOG]    EPF/ETF calculated on: Rs.36178.14
[2025-10-27T10:32:23.082Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:32:23.082Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:32:23.083Z] [LOG] 💰 GROSS CALCULATION for Ashen Nirmal Wadugodapitiya null:
[2025-10-27T10:32:23.083Z] [LOG]    Base Salary: 50000
[2025-10-27T10:32:23.083Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:32:23.084Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:32:23.085Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:23.086Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:32:23.087Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:23.088Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:32:23.088Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:23.290Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:32:23.291Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:32:23.292Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:32:23.292Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:32:23.293Z] [LOG]    Actual Earned Base: Rs.36178.14
[2025-10-27T10:32:23.294Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:32:23.294Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:32:23.295Z] [LOG]    = Gross Salary: Rs.36178.14
[2025-10-27T10:32:23.295Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:32:23.296Z] [LOG]    Loan Deductions: Rs.5012.50
[2025-10-27T10:32:23.297Z] [LOG]    Attendance Shortfall (Info): Rs.6128.88
[2025-10-27T10:32:23.298Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:32:23.298Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.5012.50
[2025-10-27T10:32:23.299Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:32:23.300Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:32:23.300Z] [LOG]    Gross Salary: Rs.36178.14
[2025-10-27T10:32:23.301Z] [LOG]    - Total Deductions: Rs.5012.50
[2025-10-27T10:32:23.302Z] [LOG]    = NET SALARY: Rs.31165.64
[2025-10-27T10:32:23.302Z] [LOG] 
💾 Database Update:
[2025-10-27T10:32:23.303Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:32:23.304Z] [LOG]    Total Deductions: Rs.5012.50 (EPF/ETF: 0.00 + Loans: 5012.50 + Advances: 0.00)
[2025-10-27T10:32:23.511Z] [LOG] 
📝 Components to save:
[2025-10-27T10:32:23.512Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:32:23.513Z] [LOG]    Deduction components: 2
[2025-10-27T10:32:23.513Z] [LOG] Creating components for record 0e657491-da0f-4bbd-8e5a-6431b520a843: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-27T10:32:23.515Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 36178.1434
}
[2025-10-27T10:32:23.719Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:32:23.925Z] [LOG] Created payroll_record_component: 1c634add-cb60-421d-929d-9a1ac78f1db6 for Base Salary
[2025-10-27T10:32:23.926Z] [LOG] Processing component: {
  "name": "Loan Deductions",
  "type": "deduction",
  "amount": 5012.5
}
[2025-10-27T10:32:24.134Z] [LOG] Using existing component ID: 64a0d7d8-8fdb-4968-a7a2-057590b481c7
[2025-10-27T10:32:24.340Z] [LOG] Created payroll_record_component: 774c7983-d37a-44b5-b98e-0e115633be0f for Loan Deductions
[2025-10-27T10:32:24.341Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 6128.876600000003
}
[2025-10-27T10:32:24.570Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:32:24.773Z] [LOG] Created payroll_record_component: bfd15fa9-51ce-469a-8cf3-404cf6dd52e7 for Attendance Shortfall (Info)
[2025-10-27T10:32:25.384Z] [LOG] ✅ Updated loan 5690e2d3-580a-4d9d-bc32-1be366ff2cc7: Remaining LKR 0.010000000000218279, Status: active
[2025-10-27T10:32:25.595Z] [LOG] ✅ Financial balances updated successfully for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:25.596Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:32:25.597Z] [LOG] 
======================================================================
[2025-10-27T10:32:25.597Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ashen Nirmal Wadugodapitiya null
[2025-10-27T10:32:25.598Z] [LOG] ======================================================================
[2025-10-27T10:32:25.599Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:32:25.599Z] [LOG]    Actual Earned Base (Attendance-based): Rs.36178.14
[2025-10-27T10:32:25.600Z] [LOG]    Attendance Shortfall: Rs.6128.88
[2025-10-27T10:32:25.600Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:25.601Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:32:25.602Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:32:25.603Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:25.604Z] [LOG]    GROSS SALARY: Rs.36178.14
[2025-10-27T10:32:25.605Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:25.605Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:32:25.606Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:32:25.608Z] [LOG]       - Loan Deductions: Rs.5012.50
[2025-10-27T10:32:25.609Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:32:25.609Z] [LOG]       - Attendance Shortfall (Info): Rs.6128.88
[2025-10-27T10:32:25.610Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.5012.50
[2025-10-27T10:32:25.610Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:25.611Z] [LOG]    NET SALARY: Rs.31165.64
[2025-10-27T10:32:25.611Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:32:25.612Z] [LOG] ======================================================================

[2025-10-27T10:32:25.613Z] [LOG] ✅ Ashen Nirmal Wadugodapitiya null: Calculation completed successfully
[2025-10-27T10:32:25.613Z] [LOG] 📊 Progress: 3/34 (8.8%)
[2025-10-27T10:32:25.614Z] [LOG] 
🧮 Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-27T10:32:25.615Z] [LOG] 📋 Record ID: 1a305c08-6222-461d-9fd0-3358df86333e
[2025-10-27T10:32:25.616Z] [LOG] 
======================================================================
[2025-10-27T10:32:25.617Z] [LOG] 🧮 CALCULATING PAYROLL: P.D.P Dilini Madushani null (EMP000043)
[2025-10-27T10:32:25.617Z] [LOG] ======================================================================
[2025-10-27T10:32:26.452Z] [LOG] 🔍 Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-27T10:32:26.453Z] [LOG]    Total components: 13
[2025-10-27T10:32:26.453Z] [LOG]    Applicable components: 13
[2025-10-27T10:32:26.454Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-27T10:32:27.322Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:32:27.322Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:32:27.555Z] [LOG] 📊 Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:27.796Z] [LOG] 📊 Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:28.027Z] [LOG] 📊 Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:28.027Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:32:28.028Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:32:28.512Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:32:28.513Z] [LOG]    👤 Employee: P.D.P Dilini Madushani null (EMP000043)
[2025-10-27T10:32:28.513Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:32:28.513Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:32:28.513Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T10:32:28.514Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:32:28.739Z] [LOG] 
   💵 Pre-calculated Rates for P.D.P Dilini Madushani null (EMP000043):
[2025-10-27T10:32:28.740Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-27T10:32:28.740Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-27T10:32:28.740Z] [LOG]       Saturday Hourly Rate: Rs.226.24
[2025-10-27T10:32:28.740Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:32:28.740Z] [LOG] 
   📊 Full Period Working Days for P.D.P Dilini Madushani null (EMP000043):
[2025-10-27T10:32:28.740Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:32:29.699Z] [LOG] 
   📊 Working Days for Expected Calculation for P.D.P Dilini Madushani null (EMP000043):
[2025-10-27T10:32:29.699Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:32:29.699Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:32:29.956Z] [LOG] 
   ⏰ Calculating Completed Hours for P.D.P Dilini Madushani null (EMP000043) - All completed sessions:
[2025-10-27T10:32:29.956Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:32:29.956Z] [LOG]       Total completed sessions found: 0
[2025-10-27T10:32:30.180Z] [LOG] 
      📊 Aggregated Totals for P.D.P Dilini Madushani null (EMP000043):
[2025-10-27T10:32:30.180Z] [LOG]          Weekday: 0.00h
[2025-10-27T10:32:30.180Z] [LOG]          Saturday: 0.00h
[2025-10-27T10:32:30.180Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:32:30.181Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:32:30.181Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for P.D.P Dilini Madushani null (EMP000043) - completed sessions only:
[2025-10-27T10:32:30.181Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:32:30.181Z] [LOG]       Saturday: 34.00h
[2025-10-27T10:32:30.182Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:32:30.182Z] [LOG]       Total Expected: 187.00h
[2025-10-27T10:32:30.182Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for P.D.P Dilini Madushani null (EMP000043) - completed sessions only:
[2025-10-27T10:32:30.182Z] [LOG]       Weekday: 0.00h
[2025-10-27T10:32:30.183Z] [LOG]       Saturday: 0.00h
[2025-10-27T10:32:30.183Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:32:30.183Z] [LOG]       Total Actual: 0.00h
[2025-10-27T10:32:30.183Z] [LOG] 
   💵 EXPECTED Earned Salary for P.D.P Dilini Madushani null (EMP000043) - until NOW:
[2025-10-27T10:32:30.184Z] [LOG]       Weekday: 153.00h × Rs.226.24 = Rs.34614.72
[2025-10-27T10:32:30.184Z] [LOG]       Saturday: 34.00h × Rs.226.24 = Rs.7692.16
[2025-10-27T10:32:30.184Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:32:30.184Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:30.184Z] [LOG]       Total Expected Earned: Rs.42306.88
[2025-10-27T10:32:30.185Z] [LOG] 
   💵 ACTUAL Earned Salary for P.D.P Dilini Madushani null (EMP000043) - including live session:
[2025-10-27T10:32:30.185Z] [LOG]       Weekday: 0.00h × Rs.226.24 = Rs.0.00
[2025-10-27T10:32:30.185Z] [LOG]       Saturday: 0.00h × Rs.226.24 = Rs.0.00
[2025-10-27T10:32:30.185Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:32:30.186Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:30.186Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-27T10:32:30.187Z] [LOG] 
   📊 FINAL CALCULATION for P.D.P Dilini Madushani null (EMP000043):
[2025-10-27T10:32:30.187Z] [LOG]       Calculated At: Oct 27, 2025, 16:02:30
[2025-10-27T10:32:30.187Z] [LOG]       Expected Earned: Rs.42306.88
[2025-10-27T10:32:30.187Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-27T10:32:30.187Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:30.188Z] [LOG]       Attendance Deduction: Rs.42306.88
[2025-10-27T10:32:30.188Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:32:30.188Z] [LOG]       📉 Shortfall for P.D.P Dilini Madushani null: 187.00 hours (100.00% of expected)
[2025-10-27T10:32:30.188Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:32:30.189Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:32:30.189Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:32:30.189Z] [LOG]    Attendance Shortfall: Rs.42306.88
[2025-10-27T10:32:30.189Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:32:30.190Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:32:30.190Z] [LOG]    Gross Salary: 0
[2025-10-27T10:32:30.191Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:32:30.191Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:32:30.191Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:30.192Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:32:30.192Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:30.192Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:32:30.192Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:30.193Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:32:30.193Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:30.193Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:32:30.193Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:30.194Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:32:30.194Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:30.194Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:32:30.194Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:30.195Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:32:30.195Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:30.195Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:32:30.195Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:30.195Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:32:30.196Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:30.196Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:32:30.196Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-27T10:32:30.197Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:32:30.197Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:32:30.197Z] [LOG] 💰 GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-27T10:32:30.197Z] [LOG]    Base Salary: 50000
[2025-10-27T10:32:30.198Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:32:30.198Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:32:30.198Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:30.198Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:32:30.198Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:30.199Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:32:30.199Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:30.425Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:32:30.425Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:32:30.426Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:32:30.426Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:32:30.426Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:32:30.426Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:32:30.427Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:32:30.427Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-27T10:32:30.427Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:32:30.427Z] [LOG]    Attendance Shortfall (Info): Rs.42306.88
[2025-10-27T10:32:30.427Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:32:30.428Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:32:30.428Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:32:30.428Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:32:30.428Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-27T10:32:30.428Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:32:30.429Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-27T10:32:30.429Z] [LOG] 
💾 Database Update:
[2025-10-27T10:32:30.429Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:32:30.429Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:32:30.647Z] [LOG] 
📝 Components to save:
[2025-10-27T10:32:30.647Z] [LOG]    Gross/Earnings components: 0
[2025-10-27T10:32:30.647Z] [LOG]    Deduction components: 1
[2025-10-27T10:32:30.647Z] [LOG] Creating components for record 1a305c08-6222-461d-9fd0-3358df86333e: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:32:30.648Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 42306.880000000005
}
[2025-10-27T10:32:30.867Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:32:31.101Z] [LOG] Created payroll_record_component: a1038596-2195-40ab-aaf7-d848026d84ae for Attendance Shortfall (Info)
[2025-10-27T10:32:31.551Z] [LOG] ✅ Financial balances updated successfully for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:31.552Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:32:31.552Z] [LOG] 
======================================================================
[2025-10-27T10:32:31.552Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: P.D.P Dilini Madushani null
[2025-10-27T10:32:31.552Z] [LOG] ======================================================================
[2025-10-27T10:32:31.553Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:32:31.553Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-27T10:32:31.553Z] [LOG]    Attendance Shortfall: Rs.42306.88
[2025-10-27T10:32:31.553Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:31.554Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:32:31.554Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:32:31.554Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:31.554Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-27T10:32:31.554Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:31.555Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:32:31.555Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:32:31.555Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:32:31.555Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:32:31.555Z] [LOG]       - Attendance Shortfall (Info): Rs.42306.88
[2025-10-27T10:32:31.556Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:32:31.556Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:31.556Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-27T10:32:31.556Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:32:31.557Z] [LOG] ======================================================================

[2025-10-27T10:32:31.557Z] [LOG] ✅ P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-27T10:32:31.557Z] [LOG] 📊 Progress: 4/34 (11.8%)
[2025-10-27T10:32:31.557Z] [LOG] 
🧮 Processing: Waruni null (EMP000024)
[2025-10-27T10:32:31.557Z] [LOG] 📋 Record ID: 264e5b91-d931-4860-ae18-725568f88272
[2025-10-27T10:32:31.558Z] [LOG] 
======================================================================
[2025-10-27T10:32:31.558Z] [LOG] 🧮 CALCULATING PAYROLL: Waruni null (EMP000024)
[2025-10-27T10:32:31.558Z] [LOG] ======================================================================
[2025-10-27T10:32:32.520Z] [LOG] 🔍 Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-27T10:32:32.520Z] [LOG]    Total components: 13
[2025-10-27T10:32:32.520Z] [LOG]    Applicable components: 13
[2025-10-27T10:32:32.520Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T10:32:33.447Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:32:33.447Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:32:33.697Z] [LOG] 📊 Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:33.922Z] [LOG] 📊 Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:34.166Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:34.166Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:32:34.167Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:32:34.632Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:32:34.632Z] [LOG]    👤 Employee: Waruni null (EMP000024)
[2025-10-27T10:32:34.632Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:32:34.632Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:32:34.633Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T10:32:34.633Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:32:34.868Z] [LOG] 
   💵 Pre-calculated Rates for Waruni null (EMP000024):
[2025-10-27T10:32:34.868Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-27T10:32:34.868Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-27T10:32:34.869Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-27T10:32:34.869Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:32:34.869Z] [LOG] 
   📊 Full Period Working Days for Waruni null (EMP000024):
[2025-10-27T10:32:34.869Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:32:36.413Z] [LOG] 
   📊 Working Days for Expected Calculation for Waruni null (EMP000024):
[2025-10-27T10:32:36.414Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:32:36.414Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:32:36.648Z] [LOG] 
   ⏰ Calculating Completed Hours for Waruni null (EMP000024) - All completed sessions:
[2025-10-27T10:32:36.648Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:32:36.648Z] [LOG]       Total completed sessions found: 21
[2025-10-27T10:32:36.649Z] [LOG] 
      📋 Attendance Breakdown for Waruni null (EMP000024):
[2025-10-27T10:32:36.649Z] [LOG]          1. 2025-10-01 (Weekday): 8.08h
[2025-10-27T10:32:36.649Z] [LOG]          2. 2025-10-02 (Weekday): 8.33h
[2025-10-27T10:32:36.649Z] [LOG]          3. 2025-10-03 (Weekday): 8.50h
[2025-10-27T10:32:36.649Z] [LOG]          4. 2025-10-04 (Saturday): 4.50h
[2025-10-27T10:32:36.649Z] [LOG]          5. 2025-10-07 (Weekday): 8.50h
[2025-10-27T10:32:36.649Z] [LOG]          6. 2025-10-08 (Weekday): 8.50h
[2025-10-27T10:32:36.650Z] [LOG]          7. 2025-10-09 (Weekday): 8.50h
[2025-10-27T10:32:36.650Z] [LOG]          8. 2025-10-10 (Weekday): 8.50h
[2025-10-27T10:32:36.650Z] [LOG]          9. 2025-10-11 (Saturday): 4.50h
[2025-10-27T10:32:36.650Z] [LOG]          10. 2025-10-13 (Weekday): 8.50h
[2025-10-27T10:32:36.650Z] [LOG]          11. 2025-10-14 (Weekday): 8.50h
[2025-10-27T10:32:36.650Z] [LOG]          12. 2025-10-15 (Weekday): 8.50h
[2025-10-27T10:32:36.650Z] [LOG]          13. 2025-10-16 (Weekday): 8.42h
[2025-10-27T10:32:36.650Z] [LOG]          14. 2025-10-17 (Weekday): 8.50h
[2025-10-27T10:32:36.650Z] [LOG]          15. 2025-10-18 (Saturday): 4.50h
[2025-10-27T10:32:36.651Z] [LOG]          16. 2025-10-20 (Weekday): 8.50h
[2025-10-27T10:32:36.651Z] [LOG]          17. 2025-10-21 (Weekday): 8.50h
[2025-10-27T10:32:36.651Z] [LOG]          18. 2025-10-22 (Weekday): 8.50h
[2025-10-27T10:32:36.651Z] [LOG]          19. 2025-10-23 (Weekday): 8.36h
[2025-10-27T10:32:36.651Z] [LOG]          20. 2025-10-24 (Weekday): 7.98h
[2025-10-27T10:32:36.651Z] [LOG]          21. 2025-10-25 (Saturday): 4.50h
[2025-10-27T10:32:36.880Z] [LOG] 
      📊 Aggregated Totals for Waruni null (EMP000024):
[2025-10-27T10:32:36.880Z] [LOG]          Weekday: 143.17h
[2025-10-27T10:32:36.880Z] [LOG]          Saturday: 18.00h
[2025-10-27T10:32:36.880Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:32:36.881Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:32:36.881Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Waruni null (EMP000024) - completed sessions only:
[2025-10-27T10:32:36.881Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:32:36.881Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:32:36.882Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:32:36.882Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:32:36.882Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Waruni null (EMP000024) - completed sessions only:
[2025-10-27T10:32:36.882Z] [LOG]       Weekday: 143.17h
[2025-10-27T10:32:36.882Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:32:36.882Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:32:36.883Z] [LOG]       Total Actual: 161.17h
[2025-10-27T10:32:36.883Z] [LOG] 
   💵 EXPECTED Earned Salary for Waruni null (EMP000024) - until NOW:
[2025-10-27T10:32:36.883Z] [LOG]       Weekday: 153.00h × Rs.226.24 = Rs.34614.72
[2025-10-27T10:32:36.884Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-27T10:32:36.884Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:32:36.884Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:36.884Z] [LOG]       Total Expected Earned: Rs.42307.02
[2025-10-27T10:32:36.884Z] [LOG] 
   💵 ACTUAL Earned Salary for Waruni null (EMP000024) - including live session:
[2025-10-27T10:32:36.885Z] [LOG]       Weekday: 143.17h × Rs.226.24 = Rs.32390.78
[2025-10-27T10:32:36.885Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-27T10:32:36.885Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:32:36.885Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:36.885Z] [LOG]       Total Actual Earned: Rs.40083.08
[2025-10-27T10:32:36.886Z] [LOG] 
   📊 FINAL CALCULATION for Waruni null (EMP000024):
[2025-10-27T10:32:36.886Z] [LOG]       Calculated At: Oct 27, 2025, 16:02:36
[2025-10-27T10:32:36.886Z] [LOG]       Expected Earned: Rs.42307.02
[2025-10-27T10:32:36.887Z] [LOG]       Actual Earned: Rs.40083.08
[2025-10-27T10:32:36.887Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:36.887Z] [LOG]       Attendance Deduction: Rs.2223.94
[2025-10-27T10:32:36.887Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:32:36.888Z] [LOG]       📉 Shortfall for Waruni null: 9.83 hours (5.26% of expected)
[2025-10-27T10:32:36.888Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:32:36.888Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:32:36.888Z] [LOG]    Actual Earned Base: Rs.40083.08
[2025-10-27T10:32:36.889Z] [LOG]    Attendance Shortfall: Rs.2223.94
[2025-10-27T10:32:36.889Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:32:36.889Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:32:36.889Z] [LOG]    Gross Salary: 40083.080799999996
[2025-10-27T10:32:36.890Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:32:36.890Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:32:36.890Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:36.891Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:32:36.891Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:36.891Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:32:36.891Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:36.891Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:32:36.892Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:36.892Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:32:36.892Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:36.892Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:32:36.893Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:36.893Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:32:36.893Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:36.893Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:32:36.893Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:36.893Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:32:36.894Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:36.894Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:32:36.894Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:36.894Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:32:36.895Z] [LOG]    EPF/ETF calculated on: Rs.40083.08
[2025-10-27T10:32:36.895Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:32:36.895Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:32:36.895Z] [LOG] 💰 GROSS CALCULATION for Waruni null:
[2025-10-27T10:32:36.895Z] [LOG]    Base Salary: 50000
[2025-10-27T10:32:36.895Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:32:36.896Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:32:36.896Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:36.896Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:32:36.896Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:36.896Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:32:36.896Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:37.115Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:32:37.115Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:32:37.116Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:32:37.116Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:32:37.116Z] [LOG]    Actual Earned Base: Rs.40083.08
[2025-10-27T10:32:37.116Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:32:37.116Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:32:37.117Z] [LOG]    = Gross Salary: Rs.40083.08
[2025-10-27T10:32:37.117Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:32:37.117Z] [LOG]    Attendance Shortfall (Info): Rs.2223.94
[2025-10-27T10:32:37.117Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:32:37.118Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:32:37.118Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:32:37.118Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:32:37.118Z] [LOG]    Gross Salary: Rs.40083.08
[2025-10-27T10:32:37.119Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:32:37.119Z] [LOG]    = NET SALARY: Rs.40083.08
[2025-10-27T10:32:37.119Z] [LOG] 
💾 Database Update:
[2025-10-27T10:32:37.120Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:32:37.120Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:32:37.353Z] [LOG] 
📝 Components to save:
[2025-10-27T10:32:37.353Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:32:37.353Z] [LOG]    Deduction components: 1
[2025-10-27T10:32:37.353Z] [LOG] Creating components for record 264e5b91-d931-4860-ae18-725568f88272: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:32:37.354Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 40083.080799999996
}
[2025-10-27T10:32:37.574Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:32:37.832Z] [LOG] Created payroll_record_component: 254bbd06-2ac6-44c6-a645-a53684737dba for Base Salary
[2025-10-27T10:32:37.833Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 2223.939200000008
}
[2025-10-27T10:32:38.063Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:32:38.293Z] [LOG] Created payroll_record_component: 1d62b3dd-3cb0-4bbc-b9c3-be2a615ab102 for Attendance Shortfall (Info)
[2025-10-27T10:32:38.733Z] [LOG] ✅ Financial balances updated successfully for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:38.734Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:32:38.735Z] [LOG] 
======================================================================
[2025-10-27T10:32:38.735Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Waruni null
[2025-10-27T10:32:38.736Z] [LOG] ======================================================================
[2025-10-27T10:32:38.737Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:32:38.737Z] [LOG]    Actual Earned Base (Attendance-based): Rs.40083.08
[2025-10-27T10:32:38.738Z] [LOG]    Attendance Shortfall: Rs.2223.94
[2025-10-27T10:32:38.738Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:38.739Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:32:38.740Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:32:38.741Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:38.742Z] [LOG]    GROSS SALARY: Rs.40083.08
[2025-10-27T10:32:38.742Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:38.743Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:32:38.744Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:32:38.744Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:32:38.745Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:32:38.746Z] [LOG]       - Attendance Shortfall (Info): Rs.2223.94
[2025-10-27T10:32:38.746Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:32:38.747Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:38.747Z] [LOG]    NET SALARY: Rs.40083.08
[2025-10-27T10:32:38.748Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:32:38.749Z] [LOG] ======================================================================

[2025-10-27T10:32:38.750Z] [LOG] ✅ Waruni null: Calculation completed successfully
[2025-10-27T10:32:38.750Z] [LOG] 📊 Progress: 5/34 (14.7%)
[2025-10-27T10:32:38.751Z] [LOG] 
🧮 Processing: Sithira null (EMP000039)
[2025-10-27T10:32:38.752Z] [LOG] 📋 Record ID: 28d23b1b-ec45-488b-bb1a-27cfaccedf96
[2025-10-27T10:32:38.752Z] [LOG] 
======================================================================
[2025-10-27T10:32:38.753Z] [LOG] 🧮 CALCULATING PAYROLL: Sithira null (EMP000039)
[2025-10-27T10:32:38.753Z] [LOG] ======================================================================
[2025-10-27T10:32:39.698Z] [LOG] 🔍 Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-27T10:32:39.698Z] [LOG]    Total components: 13
[2025-10-27T10:32:39.699Z] [LOG]    Applicable components: 13
[2025-10-27T10:32:39.699Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-27T10:32:41.075Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:32:41.076Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:32:41.301Z] [LOG] 📊 Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:41.521Z] [LOG] 📊 Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:41.740Z] [LOG] 📊 Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:41.741Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:32:41.742Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:32:42.294Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:32:42.294Z] [LOG]    👤 Employee: Sithira null (EMP000039)
[2025-10-27T10:32:42.295Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:32:42.295Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:32:42.295Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-27T10:32:42.296Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:32:42.603Z] [LOG] 
   💵 Pre-calculated Rates for Sithira null (EMP000039):
[2025-10-27T10:32:42.604Z] [LOG]       Daily Salary: Rs.1538.46
[2025-10-27T10:32:42.605Z] [LOG]       Weekday Hourly Rate: Rs.181.00
[2025-10-27T10:32:42.605Z] [LOG]       Saturday Hourly Rate: Rs.341.88
[2025-10-27T10:32:42.606Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:32:42.606Z] [LOG] 
   📊 Full Period Working Days for Sithira null (EMP000039):
[2025-10-27T10:32:42.608Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:32:43.478Z] [LOG] 
   📊 Working Days for Expected Calculation for Sithira null (EMP000039):
[2025-10-27T10:32:43.479Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:32:43.479Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:32:43.771Z] [LOG] 
   ⏰ Calculating Completed Hours for Sithira null (EMP000039) - All completed sessions:
[2025-10-27T10:32:43.772Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:32:43.773Z] [LOG]       Total completed sessions found: 14
[2025-10-27T10:32:43.774Z] [LOG] 
      📋 Attendance Breakdown for Sithira null (EMP000039):
[2025-10-27T10:32:43.775Z] [LOG]          1. 2025-10-02 (Weekday): 8.47h
[2025-10-27T10:32:43.776Z] [LOG]          2. 2025-10-03 (Weekday): 8.35h
[2025-10-27T10:32:43.777Z] [LOG]          3. 2025-10-04 (Saturday): 4.18h
[2025-10-27T10:32:43.777Z] [LOG]          4. 2025-10-08 (Weekday): 8.31h
[2025-10-27T10:32:43.778Z] [LOG]          5. 2025-10-09 (Weekday): 8.40h
[2025-10-27T10:32:43.779Z] [LOG]          6. 2025-10-10 (Weekday): 8.29h
[2025-10-27T10:32:43.779Z] [LOG]          7. 2025-10-11 (Saturday): 4.31h
[2025-10-27T10:32:43.780Z] [LOG]          8. 2025-10-13 (Weekday): 8.40h
[2025-10-27T10:32:43.781Z] [LOG]          9. 2025-10-14 (Weekday): 7.96h
[2025-10-27T10:32:43.781Z] [LOG]          10. 2025-10-20 (Weekday): 7.54h
[2025-10-27T10:32:43.782Z] [LOG]          11. 2025-10-21 (Weekday): 8.00h
[2025-10-27T10:32:43.782Z] [LOG]          12. 2025-10-22 (Weekday): 7.12h
[2025-10-27T10:32:43.783Z] [LOG]          13. 2025-10-23 (Weekday): 8.00h
[2025-10-27T10:32:43.783Z] [LOG]          14. 2025-10-24 (Weekday): 7.89h
[2025-10-27T10:32:44.055Z] [LOG] 
      📊 Aggregated Totals for Sithira null (EMP000039):
[2025-10-27T10:32:44.055Z] [LOG]          Weekday: 96.73h
[2025-10-27T10:32:44.055Z] [LOG]          Saturday: 8.49h
[2025-10-27T10:32:44.056Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:32:44.056Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:32:44.056Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Sithira null (EMP000039) - completed sessions only:
[2025-10-27T10:32:44.057Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:32:44.057Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:32:44.057Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:32:44.058Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:32:44.058Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Sithira null (EMP000039) - completed sessions only:
[2025-10-27T10:32:44.058Z] [LOG]       Weekday: 96.73h
[2025-10-27T10:32:44.058Z] [LOG]       Saturday: 8.49h
[2025-10-27T10:32:44.059Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:32:44.059Z] [LOG]       Total Actual: 105.22h
[2025-10-27T10:32:44.059Z] [LOG] 
   💵 EXPECTED Earned Salary for Sithira null (EMP000039) - until NOW:
[2025-10-27T10:32:44.059Z] [LOG]       Weekday: 153.00h × Rs.181.00 = Rs.27693.00
[2025-10-27T10:32:44.059Z] [LOG]       Saturday: 18.00h × Rs.341.88 = Rs.6153.84
[2025-10-27T10:32:44.060Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:32:44.060Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:44.060Z] [LOG]       Total Expected Earned: Rs.33846.84
[2025-10-27T10:32:44.060Z] [LOG] 
   💵 ACTUAL Earned Salary for Sithira null (EMP000039) - including live session:
[2025-10-27T10:32:44.061Z] [LOG]       Weekday: 96.73h × Rs.181.00 = Rs.17508.13
[2025-10-27T10:32:44.061Z] [LOG]       Saturday: 8.49h × Rs.341.88 = Rs.2902.56
[2025-10-27T10:32:44.061Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:32:44.061Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:44.061Z] [LOG]       Total Actual Earned: Rs.20410.69
[2025-10-27T10:32:44.062Z] [LOG] 
   📊 FINAL CALCULATION for Sithira null (EMP000039):
[2025-10-27T10:32:44.062Z] [LOG]       Calculated At: Oct 27, 2025, 16:02:44
[2025-10-27T10:32:44.062Z] [LOG]       Expected Earned: Rs.33846.84
[2025-10-27T10:32:44.063Z] [LOG]       Actual Earned: Rs.20410.69
[2025-10-27T10:32:44.063Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:44.063Z] [LOG]       Attendance Deduction: Rs.13436.15
[2025-10-27T10:32:44.063Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:32:44.063Z] [LOG]       📉 Shortfall for Sithira null: 65.78 hours (39.70% of expected)
[2025-10-27T10:32:44.064Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:32:44.064Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-27T10:32:44.064Z] [LOG]    Actual Earned Base: Rs.20410.69
[2025-10-27T10:32:44.064Z] [LOG]    Attendance Shortfall: Rs.13436.15
[2025-10-27T10:32:44.064Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:32:44.065Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:32:44.065Z] [LOG]    Gross Salary: 20410.6912
[2025-10-27T10:32:44.065Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:32:44.065Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:32:44.065Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:44.066Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:32:44.066Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:44.066Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:32:44.066Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:44.066Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:32:44.066Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:44.067Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:32:44.067Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:44.067Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:32:44.067Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:44.067Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:32:44.068Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:44.068Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:32:44.068Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:44.068Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:32:44.068Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:44.068Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:32:44.069Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:44.069Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:32:44.069Z] [LOG]    EPF/ETF calculated on: Rs.20410.69
[2025-10-27T10:32:44.069Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:32:44.069Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:32:44.069Z] [LOG] 💰 GROSS CALCULATION for Sithira null:
[2025-10-27T10:32:44.070Z] [LOG]    Base Salary: 40000
[2025-10-27T10:32:44.070Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:32:44.070Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:32:44.070Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:44.070Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:32:44.071Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:44.071Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:32:44.071Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:44.362Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:32:44.363Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:32:44.363Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:32:44.364Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:32:44.365Z] [LOG]    Actual Earned Base: Rs.20410.69
[2025-10-27T10:32:44.366Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:32:44.366Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:32:44.367Z] [LOG]    = Gross Salary: Rs.20410.69
[2025-10-27T10:32:44.368Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:32:44.369Z] [LOG]    Attendance Shortfall (Info): Rs.13436.15
[2025-10-27T10:32:44.370Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:32:44.370Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:32:44.371Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:32:44.371Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:32:44.372Z] [LOG]    Gross Salary: Rs.20410.69
[2025-10-27T10:32:44.372Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:32:44.372Z] [LOG]    = NET SALARY: Rs.20410.69
[2025-10-27T10:32:44.373Z] [LOG] 
💾 Database Update:
[2025-10-27T10:32:44.373Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:32:44.376Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:32:44.667Z] [LOG] 
📝 Components to save:
[2025-10-27T10:32:44.668Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:32:44.668Z] [LOG]    Deduction components: 1
[2025-10-27T10:32:44.669Z] [LOG] Creating components for record 28d23b1b-ec45-488b-bb1a-27cfaccedf96: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:32:44.671Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 20410.6912
}
[2025-10-27T10:32:44.974Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:32:45.249Z] [LOG] Created payroll_record_component: 34ae5229-0409-484e-8807-4c8d13e40398 for Base Salary
[2025-10-27T10:32:45.249Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 13436.148799999995
}
[2025-10-27T10:32:45.526Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:32:45.808Z] [LOG] Created payroll_record_component: 7d2d3403-ba99-45c4-b92e-b1787d347da1 for Attendance Shortfall (Info)
[2025-10-27T10:32:46.359Z] [LOG] ✅ Financial balances updated successfully for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:46.359Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:32:46.360Z] [LOG] 
======================================================================
[2025-10-27T10:32:46.361Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sithira null
[2025-10-27T10:32:46.361Z] [LOG] ======================================================================
[2025-10-27T10:32:46.362Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-27T10:32:46.362Z] [LOG]    Actual Earned Base (Attendance-based): Rs.20410.69
[2025-10-27T10:32:46.363Z] [LOG]    Attendance Shortfall: Rs.13436.15
[2025-10-27T10:32:46.364Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:46.364Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:32:46.365Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:32:46.366Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:46.366Z] [LOG]    GROSS SALARY: Rs.20410.69
[2025-10-27T10:32:46.367Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:46.368Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:32:46.368Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:32:46.369Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:32:46.370Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:32:46.370Z] [LOG]       - Attendance Shortfall (Info): Rs.13436.15
[2025-10-27T10:32:46.371Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:32:46.371Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:46.372Z] [LOG]    NET SALARY: Rs.20410.69
[2025-10-27T10:32:46.373Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:32:46.373Z] [LOG] ======================================================================

[2025-10-27T10:32:46.374Z] [LOG] ✅ Sithira null: Calculation completed successfully
[2025-10-27T10:32:46.375Z] [LOG] 📊 Progress: 6/34 (17.6%)
[2025-10-27T10:32:46.376Z] [LOG] 
🧮 Processing: Hari null (EMP000017)
[2025-10-27T10:32:46.376Z] [LOG] 📋 Record ID: 325b6230-46a8-4cb4-96f6-2b19a6b48fd0
[2025-10-27T10:32:46.377Z] [LOG] 
======================================================================
[2025-10-27T10:32:46.378Z] [LOG] 🧮 CALCULATING PAYROLL: Hari null (EMP000017)
[2025-10-27T10:32:46.379Z] [LOG] ======================================================================
[2025-10-27T10:32:47.562Z] [LOG] 🔍 Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-27T10:32:47.563Z] [LOG]    Total components: 13
[2025-10-27T10:32:47.564Z] [LOG]    Applicable components: 13
[2025-10-27T10:32:47.564Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T10:32:48.656Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:32:48.662Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:32:48.995Z] [LOG] 📊 Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:49.265Z] [LOG] 📊 Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:49.539Z] [LOG] 📊 Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:49.539Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:32:49.541Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:32:50.107Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:32:50.109Z] [LOG]    👤 Employee: Hari null (EMP000017)
[2025-10-27T10:32:50.110Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:32:50.110Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:32:50.111Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T10:32:50.112Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:32:50.417Z] [LOG] 
   💵 Pre-calculated Rates for Hari null (EMP000017):
[2025-10-27T10:32:50.418Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-27T10:32:50.418Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-27T10:32:50.419Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-27T10:32:50.419Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:32:50.420Z] [LOG] 
   📊 Full Period Working Days for Hari null (EMP000017):
[2025-10-27T10:32:50.421Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:32:51.249Z] [LOG] 
   📊 Working Days for Expected Calculation for Hari null (EMP000017):
[2025-10-27T10:32:51.250Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:32:51.250Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:32:51.532Z] [LOG] 
   ⏰ Calculating Completed Hours for Hari null (EMP000017) - All completed sessions:
[2025-10-27T10:32:51.532Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:32:51.533Z] [LOG]       Total completed sessions found: 17
[2025-10-27T10:32:51.533Z] [LOG] 
      📋 Attendance Breakdown for Hari null (EMP000017):
[2025-10-27T10:32:51.534Z] [LOG]          1. 2025-10-01 (Weekday): 7.50h
[2025-10-27T10:32:51.535Z] [LOG]          2. 2025-10-02 (Weekday): 7.00h
[2025-10-27T10:32:51.535Z] [LOG]          3. 2025-10-03 (Weekday): 4.00h
[2025-10-27T10:32:51.536Z] [LOG]          4. 2025-10-04 (Saturday): 3.50h
[2025-10-27T10:32:51.537Z] [LOG]          5. 2025-10-07 (Weekday): 7.00h
[2025-10-27T10:32:51.537Z] [LOG]          6. 2025-10-08 (Weekday): 8.00h
[2025-10-27T10:32:51.538Z] [LOG]          7. 2025-10-09 (Weekday): 8.50h
[2025-10-27T10:32:51.538Z] [LOG]          8. 2025-10-10 (Weekday): 8.00h
[2025-10-27T10:32:51.539Z] [LOG]          9. 2025-10-11 (Saturday): 4.33h
[2025-10-27T10:32:51.540Z] [LOG]          10. 2025-10-14 (Weekday): 7.67h
[2025-10-27T10:32:51.542Z] [LOG]          11. 2025-10-15 (Weekday): 8.50h
[2025-10-27T10:32:51.543Z] [LOG]          12. 2025-10-16 (Weekday): 7.00h
[2025-10-27T10:32:51.543Z] [LOG]          13. 2025-10-17 (Weekday): 7.75h
[2025-10-27T10:32:51.544Z] [LOG]          14. 2025-10-18 (Saturday): 3.83h
[2025-10-27T10:32:51.545Z] [LOG]          15. 2025-10-22 (Weekday): 8.25h
[2025-10-27T10:32:51.545Z] [LOG]          16. 2025-10-23 (Weekday): 7.75h
[2025-10-27T10:32:51.546Z] [LOG]          17. 2025-10-24 (Weekday): 0.00h
[2025-10-27T10:32:51.836Z] [LOG] 
      📊 Aggregated Totals for Hari null (EMP000017):
[2025-10-27T10:32:51.837Z] [LOG]          Weekday: 96.92h
[2025-10-27T10:32:51.837Z] [LOG]          Saturday: 11.66h
[2025-10-27T10:32:51.838Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:32:51.839Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:32:51.839Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Hari null (EMP000017) - completed sessions only:
[2025-10-27T10:32:51.840Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:32:51.841Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:32:51.841Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:32:51.842Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:32:51.843Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Hari null (EMP000017) - completed sessions only:
[2025-10-27T10:32:51.844Z] [LOG]       Weekday: 96.92h
[2025-10-27T10:32:51.844Z] [LOG]       Saturday: 11.66h
[2025-10-27T10:32:51.845Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:32:51.846Z] [LOG]       Total Actual: 108.58h
[2025-10-27T10:32:51.846Z] [LOG] 
   💵 EXPECTED Earned Salary for Hari null (EMP000017) - until NOW:
[2025-10-27T10:32:51.847Z] [LOG]       Weekday: 153.00h × Rs.226.24 = Rs.34614.72
[2025-10-27T10:32:51.847Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-27T10:32:51.848Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:32:51.849Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:51.849Z] [LOG]       Total Expected Earned: Rs.42307.02
[2025-10-27T10:32:51.850Z] [LOG] 
   💵 ACTUAL Earned Salary for Hari null (EMP000017) - including live session:
[2025-10-27T10:32:51.850Z] [LOG]       Weekday: 96.92h × Rs.226.24 = Rs.21927.18
[2025-10-27T10:32:51.851Z] [LOG]       Saturday: 11.66h × Rs.427.35 = Rs.4982.90
[2025-10-27T10:32:51.852Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:32:51.852Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:51.853Z] [LOG]       Total Actual Earned: Rs.26910.08
[2025-10-27T10:32:51.854Z] [LOG] 
   📊 FINAL CALCULATION for Hari null (EMP000017):
[2025-10-27T10:32:51.855Z] [LOG]       Calculated At: Oct 27, 2025, 16:02:51
[2025-10-27T10:32:51.856Z] [LOG]       Expected Earned: Rs.42307.02
[2025-10-27T10:32:51.856Z] [LOG]       Actual Earned: Rs.26910.08
[2025-10-27T10:32:51.857Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:51.860Z] [LOG]       Attendance Deduction: Rs.15396.94
[2025-10-27T10:32:51.860Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:32:51.861Z] [LOG]       📉 Shortfall for Hari null: 62.42 hours (36.39% of expected)
[2025-10-27T10:32:51.861Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:32:51.862Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:32:51.863Z] [LOG]    Actual Earned Base: Rs.26910.08
[2025-10-27T10:32:51.863Z] [LOG]    Attendance Shortfall: Rs.15396.94
[2025-10-27T10:32:51.864Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:32:51.865Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:32:51.865Z] [LOG]    Gross Salary: 26910.081800000004
[2025-10-27T10:32:51.866Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:32:51.866Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:32:51.867Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:51.867Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:32:51.868Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:51.868Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:32:51.869Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:51.870Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:32:51.870Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:51.871Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:32:51.871Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:51.871Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:32:51.871Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:51.872Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:32:51.872Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:51.872Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:32:51.872Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:51.873Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:32:51.873Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:51.873Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:32:51.874Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:51.874Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:32:51.874Z] [LOG]    EPF/ETF calculated on: Rs.26910.08
[2025-10-27T10:32:51.875Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:32:51.875Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:32:51.875Z] [LOG] 💰 GROSS CALCULATION for Hari null:
[2025-10-27T10:32:51.876Z] [LOG]    Base Salary: 50000
[2025-10-27T10:32:51.876Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:32:51.876Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:32:51.876Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:51.877Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:32:51.877Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:51.877Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:32:51.878Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:52.146Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:32:52.147Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:32:52.148Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:32:52.149Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:32:52.149Z] [LOG]    Actual Earned Base: Rs.26910.08
[2025-10-27T10:32:52.150Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:32:52.151Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:32:52.151Z] [LOG]    = Gross Salary: Rs.26910.08
[2025-10-27T10:32:52.152Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:32:52.153Z] [LOG]    Attendance Shortfall (Info): Rs.15396.94
[2025-10-27T10:32:52.154Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:32:52.154Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:32:52.155Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:32:52.155Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:32:52.156Z] [LOG]    Gross Salary: Rs.26910.08
[2025-10-27T10:32:52.159Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:32:52.160Z] [LOG]    = NET SALARY: Rs.26910.08
[2025-10-27T10:32:52.161Z] [LOG] 
💾 Database Update:
[2025-10-27T10:32:52.162Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:32:52.163Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:32:52.462Z] [LOG] 
📝 Components to save:
[2025-10-27T10:32:52.463Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:32:52.463Z] [LOG]    Deduction components: 1
[2025-10-27T10:32:52.464Z] [LOG] Creating components for record 325b6230-46a8-4cb4-96f6-2b19a6b48fd0: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:32:52.466Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 26910.081800000004
}
[2025-10-27T10:32:52.742Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:32:53.006Z] [LOG] Created payroll_record_component: 2a66bbe2-6d06-4c37-8ee7-c6dfcd45d131 for Base Salary
[2025-10-27T10:32:53.006Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 15396.9382
}
[2025-10-27T10:32:53.277Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:32:53.563Z] [LOG] Created payroll_record_component: 25577675-4328-49bc-9617-fa06209ecbfd for Attendance Shortfall (Info)
[2025-10-27T10:32:54.146Z] [LOG] ✅ Financial balances updated successfully for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:54.147Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:32:54.148Z] [LOG] 
======================================================================
[2025-10-27T10:32:54.148Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Hari null
[2025-10-27T10:32:54.149Z] [LOG] ======================================================================
[2025-10-27T10:32:54.150Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:32:54.150Z] [LOG]    Actual Earned Base (Attendance-based): Rs.26910.08
[2025-10-27T10:32:54.151Z] [LOG]    Attendance Shortfall: Rs.15396.94
[2025-10-27T10:32:54.151Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:54.152Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:32:54.153Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:32:54.154Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:54.155Z] [LOG]    GROSS SALARY: Rs.26910.08
[2025-10-27T10:32:54.155Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:54.156Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:32:54.157Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:32:54.157Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:32:54.158Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:32:54.159Z] [LOG]       - Attendance Shortfall (Info): Rs.15396.94
[2025-10-27T10:32:54.160Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:32:54.160Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:32:54.161Z] [LOG]    NET SALARY: Rs.26910.08
[2025-10-27T10:32:54.161Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:32:54.162Z] [LOG] ======================================================================

[2025-10-27T10:32:54.162Z] [LOG] ✅ Hari null: Calculation completed successfully
[2025-10-27T10:32:54.163Z] [LOG] 📊 Progress: 7/34 (20.6%)
[2025-10-27T10:32:54.164Z] [LOG] 
🧮 Processing: Ammaar Ilham (EMP000023)
[2025-10-27T10:32:54.165Z] [LOG] 📋 Record ID: 33200af2-dd99-4732-bb4e-068c9925a8bb
[2025-10-27T10:32:54.165Z] [LOG] 
======================================================================
[2025-10-27T10:32:54.166Z] [LOG] 🧮 CALCULATING PAYROLL: Ammaar Ilham (EMP000023)
[2025-10-27T10:32:54.167Z] [LOG] ======================================================================
[2025-10-27T10:32:55.258Z] [LOG] 🔍 Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-27T10:32:55.259Z] [LOG]    Total components: 13
[2025-10-27T10:32:55.259Z] [LOG]    Applicable components: 13
[2025-10-27T10:32:55.260Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T10:32:56.412Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:32:56.412Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:32:56.678Z] [LOG] 📊 Found 0 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:57.400Z] [LOG] 📊 Found 0 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:57.604Z] [LOG] 📊 Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-27T10:32:57.605Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:32:57.607Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:32:58.015Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:32:58.015Z] [LOG]    👤 Employee: Ammaar Ilham (EMP000023)
[2025-10-27T10:32:58.015Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:32:58.015Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:32:58.016Z] [LOG]    Base Salary (Full Month): Rs.70000.00
[2025-10-27T10:32:58.016Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:32:58.227Z] [LOG] 
   💵 Pre-calculated Rates for Ammaar Ilham (EMP000023):
[2025-10-27T10:32:58.228Z] [LOG]       Daily Salary: Rs.2692.31
[2025-10-27T10:32:58.228Z] [LOG]       Weekday Hourly Rate: Rs.316.74
[2025-10-27T10:32:58.228Z] [LOG]       Saturday Hourly Rate: Rs.598.29
[2025-10-27T10:32:58.229Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:32:58.229Z] [LOG] 
   📊 Full Period Working Days for Ammaar Ilham (EMP000023):
[2025-10-27T10:32:58.229Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:32:58.851Z] [LOG] 
   📊 Working Days for Expected Calculation for Ammaar Ilham (EMP000023):
[2025-10-27T10:32:58.851Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:32:58.851Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:32:59.051Z] [LOG] 
   ⏰ Calculating Completed Hours for Ammaar Ilham (EMP000023) - All completed sessions:
[2025-10-27T10:32:59.052Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:32:59.052Z] [LOG]       Total completed sessions found: 19
[2025-10-27T10:32:59.052Z] [LOG] 
      📋 Attendance Breakdown for Ammaar Ilham (EMP000023):
[2025-10-27T10:32:59.053Z] [LOG]          1. 2025-10-01 (Weekday): 8.23h
[2025-10-27T10:32:59.053Z] [LOG]          2. 2025-10-02 (Weekday): 7.59h
[2025-10-27T10:32:59.054Z] [LOG]          3. 2025-10-03 (Weekday): 7.91h
[2025-10-27T10:32:59.054Z] [LOG]          4. 2025-10-04 (Saturday): 4.01h
[2025-10-27T10:32:59.054Z] [LOG]          5. 2025-10-07 (Weekday): 6.83h
[2025-10-27T10:32:59.055Z] [LOG]          6. 2025-10-08 (Weekday): 8.04h
[2025-10-27T10:32:59.055Z] [LOG]          7. 2025-10-09 (Weekday): 8.24h
[2025-10-27T10:32:59.055Z] [LOG]          8. 2025-10-10 (Weekday): 7.97h
[2025-10-27T10:32:59.055Z] [LOG]          9. 2025-10-11 (Saturday): 4.48h
[2025-10-27T10:32:59.056Z] [LOG]          10. 2025-10-13 (Weekday): 7.88h
[2025-10-27T10:32:59.056Z] [LOG]          11. 2025-10-15 (Weekday): 8.35h
[2025-10-27T10:32:59.056Z] [LOG]          12. 2025-10-16 (Weekday): 8.07h
[2025-10-27T10:32:59.057Z] [LOG]          13. 2025-10-17 (Weekday): 8.37h
[2025-10-27T10:32:59.057Z] [LOG]          14. 2025-10-18 (Saturday): 3.86h
[2025-10-27T10:32:59.057Z] [LOG]          15. 2025-10-20 (Weekday): 7.89h
[2025-10-27T10:32:59.058Z] [LOG]          16. 2025-10-22 (Weekday): 8.17h
[2025-10-27T10:32:59.058Z] [LOG]          17. 2025-10-23 (Weekday): 7.68h
[2025-10-27T10:32:59.059Z] [LOG]          18. 2025-10-24 (Weekday): 8.05h
[2025-10-27T10:32:59.059Z] [LOG]          19. 2025-10-25 (Saturday): 4.25h
[2025-10-27T10:32:59.262Z] [LOG] 
      📊 Aggregated Totals for Ammaar Ilham (EMP000023):
[2025-10-27T10:32:59.263Z] [LOG]          Weekday: 119.27h
[2025-10-27T10:32:59.263Z] [LOG]          Saturday: 16.60h
[2025-10-27T10:32:59.264Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:32:59.264Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:32:59.265Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ammaar Ilham (EMP000023) - completed sessions only:
[2025-10-27T10:32:59.266Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:32:59.267Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:32:59.268Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:32:59.269Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:32:59.270Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ammaar Ilham (EMP000023) - completed sessions only:
[2025-10-27T10:32:59.271Z] [LOG]       Weekday: 119.27h
[2025-10-27T10:32:59.272Z] [LOG]       Saturday: 16.60h
[2025-10-27T10:32:59.272Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:32:59.273Z] [LOG]       Total Actual: 135.87h
[2025-10-27T10:32:59.274Z] [LOG] 
   💵 EXPECTED Earned Salary for Ammaar Ilham (EMP000023) - until NOW:
[2025-10-27T10:32:59.275Z] [LOG]       Weekday: 153.00h × Rs.316.74 = Rs.48461.22
[2025-10-27T10:32:59.276Z] [LOG]       Saturday: 18.00h × Rs.598.29 = Rs.10769.22
[2025-10-27T10:32:59.278Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:32:59.279Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:59.279Z] [LOG]       Total Expected Earned: Rs.59230.44
[2025-10-27T10:32:59.280Z] [LOG] 
   💵 ACTUAL Earned Salary for Ammaar Ilham (EMP000023) - including live session:
[2025-10-27T10:32:59.282Z] [LOG]       Weekday: 119.27h × Rs.316.74 = Rs.37777.58
[2025-10-27T10:32:59.282Z] [LOG]       Saturday: 16.60h × Rs.598.29 = Rs.9931.61
[2025-10-27T10:32:59.283Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:32:59.284Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:59.284Z] [LOG]       Total Actual Earned: Rs.47709.19
[2025-10-27T10:32:59.285Z] [LOG] 
   📊 FINAL CALCULATION for Ammaar Ilham (EMP000023):
[2025-10-27T10:32:59.285Z] [LOG]       Calculated At: Oct 27, 2025, 16:02:59
[2025-10-27T10:32:59.286Z] [LOG]       Expected Earned: Rs.59230.44
[2025-10-27T10:32:59.286Z] [LOG]       Actual Earned: Rs.47709.19
[2025-10-27T10:32:59.286Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:32:59.286Z] [LOG]       Attendance Deduction: Rs.11521.25
[2025-10-27T10:32:59.287Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:32:59.287Z] [LOG]       📉 Shortfall for Ammaar Ilham: 35.13 hours (19.45% of expected)
[2025-10-27T10:32:59.287Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:32:59.288Z] [LOG]    Base Salary (Full): Rs.70000.00
[2025-10-27T10:32:59.288Z] [LOG]    Actual Earned Base: Rs.47709.19
[2025-10-27T10:32:59.288Z] [LOG]    Attendance Shortfall: Rs.11521.25
[2025-10-27T10:32:59.289Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:32:59.289Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:32:59.290Z] [LOG]    Gross Salary: 47709.1938
[2025-10-27T10:32:59.290Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:32:59.290Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:32:59.291Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:59.291Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:32:59.292Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:59.292Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:32:59.293Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:59.293Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:32:59.293Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:59.293Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:32:59.294Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:59.294Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:32:59.295Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:59.295Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:32:59.295Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:59.295Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:32:59.296Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:59.296Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:32:59.296Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:59.297Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:32:59.297Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:59.297Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:32:59.298Z] [LOG]    EPF/ETF calculated on: Rs.47709.19
[2025-10-27T10:32:59.298Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:32:59.298Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:32:59.298Z] [LOG] 💰 GROSS CALCULATION for Ammaar Ilham:
[2025-10-27T10:32:59.299Z] [LOG]    Base Salary: 70000
[2025-10-27T10:32:59.299Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:32:59.300Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:32:59.300Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:59.300Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:32:59.300Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:59.301Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:32:59.301Z] [LOG]    Fixed amount: 0
[2025-10-27T10:32:59.505Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:32:59.506Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:32:59.506Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:32:59.507Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:32:59.508Z] [LOG]    Actual Earned Base: Rs.47709.19
[2025-10-27T10:32:59.509Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:32:59.509Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:32:59.510Z] [LOG]    = Gross Salary: Rs.47709.19
[2025-10-27T10:32:59.510Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:32:59.511Z] [LOG]    Attendance Shortfall (Info): Rs.11521.25
[2025-10-27T10:32:59.512Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:32:59.513Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:32:59.514Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:32:59.514Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:32:59.515Z] [LOG]    Gross Salary: Rs.47709.19
[2025-10-27T10:32:59.516Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:32:59.516Z] [LOG]    = NET SALARY: Rs.47709.19
[2025-10-27T10:32:59.517Z] [LOG] 
💾 Database Update:
[2025-10-27T10:32:59.518Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:32:59.518Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:32:59.723Z] [LOG] 
📝 Components to save:
[2025-10-27T10:32:59.724Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:32:59.725Z] [LOG]    Deduction components: 1
[2025-10-27T10:32:59.725Z] [LOG] Creating components for record 33200af2-dd99-4732-bb4e-068c9925a8bb: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:32:59.727Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 47709.1938
}
[2025-10-27T10:32:59.928Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:33:00.127Z] [LOG] Created payroll_record_component: 12a2ef7c-bd95-4a44-bea3-fbf442cf4907 for Base Salary
[2025-10-27T10:33:00.128Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 11521.246200000001
}
[2025-10-27T10:33:00.342Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:33:00.557Z] [LOG] Created payroll_record_component: 2d2fd624-c9c3-4bbb-86cf-762d38b305ec for Attendance Shortfall (Info)
[2025-10-27T10:33:00.976Z] [LOG] ✅ Financial balances updated successfully for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:00.977Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:33:00.978Z] [LOG] 
======================================================================
[2025-10-27T10:33:00.978Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ammaar Ilham
[2025-10-27T10:33:00.979Z] [LOG] ======================================================================
[2025-10-27T10:33:00.980Z] [LOG]    Base Salary (Full): Rs.70000.00
[2025-10-27T10:33:00.980Z] [LOG]    Actual Earned Base (Attendance-based): Rs.47709.19
[2025-10-27T10:33:00.981Z] [LOG]    Attendance Shortfall: Rs.11521.25
[2025-10-27T10:33:00.981Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:00.982Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:00.983Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:33:00.984Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:00.984Z] [LOG]    GROSS SALARY: Rs.47709.19
[2025-10-27T10:33:00.985Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:00.986Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:33:00.986Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:33:00.987Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:33:00.987Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:33:00.988Z] [LOG]       - Attendance Shortfall (Info): Rs.11521.25
[2025-10-27T10:33:00.989Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:00.989Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:00.990Z] [LOG]    NET SALARY: Rs.47709.19
[2025-10-27T10:33:00.991Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:33:00.991Z] [LOG] ======================================================================

[2025-10-27T10:33:00.992Z] [LOG] ✅ Ammaar Ilham: Calculation completed successfully
[2025-10-27T10:33:00.993Z] [LOG] 📊 Progress: 8/34 (23.5%)
[2025-10-27T10:33:00.994Z] [LOG] 
🧮 Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-27T10:33:00.994Z] [LOG] 📋 Record ID: 36968e22-daf3-459f-a223-350025735939
[2025-10-27T10:33:00.995Z] [LOG] 
======================================================================
[2025-10-27T10:33:00.996Z] [LOG] 🧮 CALCULATING PAYROLL: Nimdiya Ranasinghe null (EMP000045)
[2025-10-27T10:33:00.996Z] [LOG] ======================================================================
[2025-10-27T10:33:01.824Z] [LOG] 🔍 Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-27T10:33:01.825Z] [LOG]    Total components: 13
[2025-10-27T10:33:01.826Z] [LOG]    Applicable components: 13
[2025-10-27T10:33:01.827Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T10:33:02.664Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:33:02.665Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:33:02.880Z] [LOG] 📊 Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:03.087Z] [LOG] 📊 Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:03.292Z] [LOG] 📊 Found 0 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:03.293Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:33:03.294Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:33:03.719Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:33:03.720Z] [LOG]    👤 Employee: Nimdiya Ranasinghe null (EMP000045)
[2025-10-27T10:33:03.721Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:33:03.721Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:33:03.722Z] [LOG]    Base Salary (Full Month): Rs.35000.00
[2025-10-27T10:33:03.722Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:33:03.931Z] [LOG] 
   💵 Pre-calculated Rates for Nimdiya Ranasinghe null (EMP000045):
[2025-10-27T10:33:03.932Z] [LOG]       Daily Salary: Rs.1346.15
[2025-10-27T10:33:03.932Z] [LOG]       Weekday Hourly Rate: Rs.158.37
[2025-10-27T10:33:03.933Z] [LOG]       Saturday Hourly Rate: Rs.299.15
[2025-10-27T10:33:03.933Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:33:03.934Z] [LOG] 
   📊 Full Period Working Days for Nimdiya Ranasinghe null (EMP000045):
[2025-10-27T10:33:03.935Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:04.572Z] [LOG] 
   📊 Working Days for Expected Calculation for Nimdiya Ranasinghe null (EMP000045):
[2025-10-27T10:33:04.573Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:33:04.574Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:04.781Z] [LOG] 
   ⏰ Calculating Completed Hours for Nimdiya Ranasinghe null (EMP000045) - All completed sessions:
[2025-10-27T10:33:04.782Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:33:04.783Z] [LOG]       Total completed sessions found: 16
[2025-10-27T10:33:04.783Z] [LOG] 
      📋 Attendance Breakdown for Nimdiya Ranasinghe null (EMP000045):
[2025-10-27T10:33:04.784Z] [LOG]          1. 2025-10-02 (Weekday): 8.47h
[2025-10-27T10:33:04.785Z] [LOG]          2. 2025-10-03 (Weekday): 8.50h
[2025-10-27T10:33:04.786Z] [LOG]          3. 2025-10-04 (Saturday): 4.50h
[2025-10-27T10:33:04.786Z] [LOG]          4. 2025-10-08 (Weekday): 8.50h
[2025-10-27T10:33:04.787Z] [LOG]          5. 2025-10-09 (Weekday): 8.50h
[2025-10-27T10:33:04.788Z] [LOG]          6. 2025-10-10 (Weekday): 8.50h
[2025-10-27T10:33:04.789Z] [LOG]          7. 2025-10-11 (Saturday): 4.50h
[2025-10-27T10:33:04.789Z] [LOG]          8. 2025-10-13 (Weekday): 8.50h
[2025-10-27T10:33:04.790Z] [LOG]          9. 2025-10-14 (Weekday): 8.50h
[2025-10-27T10:33:04.791Z] [LOG]          10. 2025-10-15 (Weekday): 8.50h
[2025-10-27T10:33:04.792Z] [LOG]          11. 2025-10-16 (Weekday): 8.50h
[2025-10-27T10:33:04.792Z] [LOG]          12. 2025-10-17 (Weekday): 8.17h
[2025-10-27T10:33:04.794Z] [LOG]          13. 2025-10-18 (Saturday): 4.50h
[2025-10-27T10:33:04.795Z] [LOG]          14. 2025-10-22 (Weekday): 5.50h
[2025-10-27T10:33:04.796Z] [LOG]          15. 2025-10-23 (Weekday): 8.47h
[2025-10-27T10:33:04.796Z] [LOG]          16. 2025-10-24 (Weekday): 8.00h
[2025-10-27T10:33:05.013Z] [LOG] 
      📊 Aggregated Totals for Nimdiya Ranasinghe null (EMP000045):
[2025-10-27T10:33:05.014Z] [LOG]          Weekday: 106.61h
[2025-10-27T10:33:05.015Z] [LOG]          Saturday: 13.50h
[2025-10-27T10:33:05.015Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:33:05.016Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:33:05.016Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Nimdiya Ranasinghe null (EMP000045) - completed sessions only:
[2025-10-27T10:33:05.017Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:33:05.018Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:33:05.018Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:05.019Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:33:05.019Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Nimdiya Ranasinghe null (EMP000045) - completed sessions only:
[2025-10-27T10:33:05.020Z] [LOG]       Weekday: 106.61h
[2025-10-27T10:33:05.021Z] [LOG]       Saturday: 13.50h
[2025-10-27T10:33:05.022Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:05.022Z] [LOG]       Total Actual: 120.11h
[2025-10-27T10:33:05.023Z] [LOG] 
   💵 EXPECTED Earned Salary for Nimdiya Ranasinghe null (EMP000045) - until NOW:
[2025-10-27T10:33:05.024Z] [LOG]       Weekday: 153.00h × Rs.158.37 = Rs.24230.61
[2025-10-27T10:33:05.025Z] [LOG]       Saturday: 18.00h × Rs.299.15 = Rs.5384.70
[2025-10-27T10:33:05.026Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:05.026Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:05.027Z] [LOG]       Total Expected Earned: Rs.29615.31
[2025-10-27T10:33:05.028Z] [LOG] 
   💵 ACTUAL Earned Salary for Nimdiya Ranasinghe null (EMP000045) - including live session:
[2025-10-27T10:33:05.029Z] [LOG]       Weekday: 106.61h × Rs.158.37 = Rs.16883.83
[2025-10-27T10:33:05.029Z] [LOG]       Saturday: 13.50h × Rs.299.15 = Rs.4038.52
[2025-10-27T10:33:05.030Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:05.030Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:05.031Z] [LOG]       Total Actual Earned: Rs.20922.35
[2025-10-27T10:33:05.032Z] [LOG] 
   📊 FINAL CALCULATION for Nimdiya Ranasinghe null (EMP000045):
[2025-10-27T10:33:05.033Z] [LOG]       Calculated At: Oct 27, 2025, 16:03:05
[2025-10-27T10:33:05.034Z] [LOG]       Expected Earned: Rs.29615.31
[2025-10-27T10:33:05.034Z] [LOG]       Actual Earned: Rs.20922.35
[2025-10-27T10:33:05.035Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:05.035Z] [LOG]       Attendance Deduction: Rs.8692.96
[2025-10-27T10:33:05.036Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:33:05.036Z] [LOG]       📉 Shortfall for Nimdiya Ranasinghe null: 50.89 hours (29.35% of expected)
[2025-10-27T10:33:05.037Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:33:05.039Z] [LOG]    Base Salary (Full): Rs.35000.00
[2025-10-27T10:33:05.039Z] [LOG]    Actual Earned Base: Rs.20922.35
[2025-10-27T10:33:05.040Z] [LOG]    Attendance Shortfall: Rs.8692.96
[2025-10-27T10:33:05.041Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:33:05.042Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:33:05.042Z] [LOG]    Gross Salary: 20922.350700000003
[2025-10-27T10:33:05.042Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:33:05.043Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:33:05.043Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:05.043Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:33:05.044Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:05.044Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:33:05.044Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:05.045Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:33:05.045Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:05.045Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:33:05.045Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:05.046Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:33:05.046Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:05.046Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:33:05.046Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:05.047Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:33:05.047Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:05.047Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:33:05.047Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:05.048Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:33:05.048Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:05.048Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:33:05.049Z] [LOG]    EPF/ETF calculated on: Rs.20922.35
[2025-10-27T10:33:05.049Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:33:05.049Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:33:05.050Z] [LOG] 💰 GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-27T10:33:05.050Z] [LOG]    Base Salary: 35000
[2025-10-27T10:33:05.050Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:33:05.050Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:33:05.051Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:05.051Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:33:05.051Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:05.052Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:33:05.052Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:05.251Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:33:05.252Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:05.252Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:33:05.253Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:33:05.253Z] [LOG]    Actual Earned Base: Rs.20922.35
[2025-10-27T10:33:05.254Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:33:05.254Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:33:05.254Z] [LOG]    = Gross Salary: Rs.20922.35
[2025-10-27T10:33:05.255Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:33:05.255Z] [LOG]    Attendance Shortfall (Info): Rs.8692.96
[2025-10-27T10:33:05.255Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:33:05.256Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:05.256Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:33:05.257Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:33:05.258Z] [LOG]    Gross Salary: Rs.20922.35
[2025-10-27T10:33:05.258Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:33:05.259Z] [LOG]    = NET SALARY: Rs.20922.35
[2025-10-27T10:33:05.259Z] [LOG] 
💾 Database Update:
[2025-10-27T10:33:05.260Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:33:05.260Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:33:05.472Z] [LOG] 
📝 Components to save:
[2025-10-27T10:33:05.472Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:33:05.473Z] [LOG]    Deduction components: 1
[2025-10-27T10:33:05.473Z] [LOG] Creating components for record 36968e22-daf3-459f-a223-350025735939: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:33:05.474Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 20922.350700000003
}
[2025-10-27T10:33:05.700Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:33:05.913Z] [LOG] Created payroll_record_component: f0f2eb5b-15d2-4d2b-9fd8-c0b06ed221b3 for Base Salary
[2025-10-27T10:33:05.914Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 8692.959299999999
}
[2025-10-27T10:33:06.116Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:33:06.333Z] [LOG] Created payroll_record_component: b7028fa1-0795-446b-b8d9-27beb94854c0 for Attendance Shortfall (Info)
[2025-10-27T10:33:06.758Z] [LOG] ✅ Financial balances updated successfully for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:06.759Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:33:06.759Z] [LOG] 
======================================================================
[2025-10-27T10:33:06.760Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Nimdiya Ranasinghe null
[2025-10-27T10:33:06.761Z] [LOG] ======================================================================
[2025-10-27T10:33:06.761Z] [LOG]    Base Salary (Full): Rs.35000.00
[2025-10-27T10:33:06.762Z] [LOG]    Actual Earned Base (Attendance-based): Rs.20922.35
[2025-10-27T10:33:06.762Z] [LOG]    Attendance Shortfall: Rs.8692.96
[2025-10-27T10:33:06.763Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:06.764Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:06.765Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:33:06.766Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:06.767Z] [LOG]    GROSS SALARY: Rs.20922.35
[2025-10-27T10:33:06.767Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:06.768Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:33:06.769Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:33:06.770Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:33:06.770Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:33:06.771Z] [LOG]       - Attendance Shortfall (Info): Rs.8692.96
[2025-10-27T10:33:06.771Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:06.772Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:06.773Z] [LOG]    NET SALARY: Rs.20922.35
[2025-10-27T10:33:06.773Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:33:06.774Z] [LOG] ======================================================================

[2025-10-27T10:33:06.776Z] [LOG] ✅ Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-27T10:33:06.777Z] [LOG] 📊 Progress: 9/34 (26.5%)
[2025-10-27T10:33:06.778Z] [LOG] 
🧮 Processing: Saru null (EMP000022)
[2025-10-27T10:33:06.779Z] [LOG] 📋 Record ID: 37d86ce4-dafa-4bcb-9819-cae39a8e4f92
[2025-10-27T10:33:06.779Z] [LOG] 
======================================================================
[2025-10-27T10:33:06.780Z] [LOG] 🧮 CALCULATING PAYROLL: Saru null (EMP000022)
[2025-10-27T10:33:06.781Z] [LOG] ======================================================================
[2025-10-27T10:33:07.622Z] [LOG] 🔍 Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-27T10:33:07.623Z] [LOG]    Total components: 13
[2025-10-27T10:33:07.623Z] [LOG]    Applicable components: 13
[2025-10-27T10:33:07.624Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T10:33:08.464Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:33:08.465Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:33:08.677Z] [LOG] 📊 Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:08.888Z] [LOG] 📊 Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:09.098Z] [LOG] 📊 Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:09.099Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:33:09.100Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:33:09.530Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:33:09.530Z] [LOG]    👤 Employee: Saru null (EMP000022)
[2025-10-27T10:33:09.531Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:33:09.532Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:33:09.532Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T10:33:09.533Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:33:09.741Z] [LOG] 
   💵 Pre-calculated Rates for Saru null (EMP000022):
[2025-10-27T10:33:09.742Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-27T10:33:09.742Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-27T10:33:09.743Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-27T10:33:09.744Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:33:09.744Z] [LOG] 
   📊 Full Period Working Days for Saru null (EMP000022):
[2025-10-27T10:33:09.745Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:10.372Z] [LOG] 
   📊 Working Days for Expected Calculation for Saru null (EMP000022):
[2025-10-27T10:33:10.373Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:33:10.374Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:10.585Z] [LOG] 
   ⏰ Calculating Completed Hours for Saru null (EMP000022) - All completed sessions:
[2025-10-27T10:33:10.586Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:33:10.586Z] [LOG]       Total completed sessions found: 15
[2025-10-27T10:33:10.587Z] [LOG] 
      📋 Attendance Breakdown for Saru null (EMP000022):
[2025-10-27T10:33:10.588Z] [LOG]          1. 2025-10-01 (Weekday): 8.50h
[2025-10-27T10:33:10.588Z] [LOG]          2. 2025-10-02 (Weekday): 8.50h
[2025-10-27T10:33:10.589Z] [LOG]          3. 2025-10-03 (Weekday): 8.00h
[2025-10-27T10:33:10.590Z] [LOG]          4. 2025-10-04 (Saturday): 3.73h
[2025-10-27T10:33:10.590Z] [LOG]          5. 2025-10-07 (Weekday): 8.50h
[2025-10-27T10:33:10.592Z] [LOG]          6. 2025-10-10 (Weekday): 8.00h
[2025-10-27T10:33:10.592Z] [LOG]          7. 2025-10-11 (Saturday): 4.50h
[2025-10-27T10:33:10.593Z] [LOG]          8. 2025-10-13 (Weekday): 8.50h
[2025-10-27T10:33:10.593Z] [LOG]          9. 2025-10-14 (Weekday): 8.50h
[2025-10-27T10:33:10.593Z] [LOG]          10. 2025-10-15 (Weekday): 8.50h
[2025-10-27T10:33:10.593Z] [LOG]          11. 2025-10-21 (Weekday): 7.47h
[2025-10-27T10:33:10.594Z] [LOG]          12. 2025-10-22 (Weekday): 8.50h
[2025-10-27T10:33:10.594Z] [LOG]          13. 2025-10-23 (Weekday): 7.62h
[2025-10-27T10:33:10.594Z] [LOG]          14. 2025-10-24 (Weekday): 7.78h
[2025-10-27T10:33:10.594Z] [LOG]          15. 2025-10-25 (Saturday): 4.50h
[2025-10-27T10:33:10.815Z] [LOG] 
      📊 Aggregated Totals for Saru null (EMP000022):
[2025-10-27T10:33:10.815Z] [LOG]          Weekday: 98.37h
[2025-10-27T10:33:10.815Z] [LOG]          Saturday: 12.73h
[2025-10-27T10:33:10.816Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:33:10.816Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:33:10.816Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Saru null (EMP000022) - completed sessions only:
[2025-10-27T10:33:10.816Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:33:10.816Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:33:10.817Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:10.817Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:33:10.817Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Saru null (EMP000022) - completed sessions only:
[2025-10-27T10:33:10.818Z] [LOG]       Weekday: 98.37h
[2025-10-27T10:33:10.818Z] [LOG]       Saturday: 12.73h
[2025-10-27T10:33:10.818Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:10.818Z] [LOG]       Total Actual: 111.10h
[2025-10-27T10:33:10.818Z] [LOG] 
   💵 EXPECTED Earned Salary for Saru null (EMP000022) - until NOW:
[2025-10-27T10:33:10.819Z] [LOG]       Weekday: 153.00h × Rs.226.24 = Rs.34614.72
[2025-10-27T10:33:10.819Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-27T10:33:10.819Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:10.820Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:10.820Z] [LOG]       Total Expected Earned: Rs.42307.02
[2025-10-27T10:33:10.820Z] [LOG] 
   💵 ACTUAL Earned Salary for Saru null (EMP000022) - including live session:
[2025-10-27T10:33:10.820Z] [LOG]       Weekday: 98.37h × Rs.226.24 = Rs.22255.23
[2025-10-27T10:33:10.821Z] [LOG]       Saturday: 12.73h × Rs.427.35 = Rs.5440.17
[2025-10-27T10:33:10.821Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:10.821Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:10.821Z] [LOG]       Total Actual Earned: Rs.27695.39
[2025-10-27T10:33:10.822Z] [LOG] 
   📊 FINAL CALCULATION for Saru null (EMP000022):
[2025-10-27T10:33:10.822Z] [LOG]       Calculated At: Oct 27, 2025, 16:03:10
[2025-10-27T10:33:10.822Z] [LOG]       Expected Earned: Rs.42307.02
[2025-10-27T10:33:10.823Z] [LOG]       Actual Earned: Rs.27695.39
[2025-10-27T10:33:10.823Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:10.823Z] [LOG]       Attendance Deduction: Rs.14611.63
[2025-10-27T10:33:10.823Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:33:10.823Z] [LOG]       📉 Shortfall for Saru null: 59.90 hours (34.54% of expected)
[2025-10-27T10:33:10.824Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:33:10.824Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:33:10.825Z] [LOG]    Actual Earned Base: Rs.27695.39
[2025-10-27T10:33:10.825Z] [LOG]    Attendance Shortfall: Rs.14611.63
[2025-10-27T10:33:10.825Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:33:10.825Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:33:10.825Z] [LOG]    Gross Salary: 27695.3943
[2025-10-27T10:33:10.826Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:33:10.826Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:33:10.826Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:10.827Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:33:10.827Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:10.827Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:33:10.827Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:10.828Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:33:10.828Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:10.828Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:33:10.828Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:10.829Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:33:10.829Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:10.829Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:33:10.829Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:10.830Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:33:10.830Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:10.830Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:33:10.830Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:10.831Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:33:10.831Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:10.831Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:33:10.831Z] [LOG]    EPF/ETF calculated on: Rs.27695.39
[2025-10-27T10:33:10.831Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:33:10.832Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:33:10.832Z] [LOG] 💰 GROSS CALCULATION for Saru null:
[2025-10-27T10:33:10.832Z] [LOG]    Base Salary: 50000
[2025-10-27T10:33:10.832Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:33:10.833Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:33:10.833Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:10.833Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:33:10.833Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:10.834Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:33:10.834Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:11.043Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:33:11.044Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:11.045Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:33:11.045Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:33:11.046Z] [LOG]    Actual Earned Base: Rs.27695.39
[2025-10-27T10:33:11.047Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:33:11.047Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:33:11.048Z] [LOG]    = Gross Salary: Rs.27695.39
[2025-10-27T10:33:11.048Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:33:11.049Z] [LOG]    Attendance Shortfall (Info): Rs.14611.63
[2025-10-27T10:33:11.050Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:33:11.051Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:11.051Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:33:11.052Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:33:11.054Z] [LOG]    Gross Salary: Rs.27695.39
[2025-10-27T10:33:11.054Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:33:11.055Z] [LOG]    = NET SALARY: Rs.27695.39
[2025-10-27T10:33:11.056Z] [LOG] 
💾 Database Update:
[2025-10-27T10:33:11.056Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:33:11.057Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:33:11.269Z] [LOG] 
📝 Components to save:
[2025-10-27T10:33:11.269Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:33:11.270Z] [LOG]    Deduction components: 1
[2025-10-27T10:33:11.271Z] [LOG] Creating components for record 37d86ce4-dafa-4bcb-9819-cae39a8e4f92: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:33:11.272Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 27695.3943
}
[2025-10-27T10:33:11.477Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:33:11.688Z] [LOG] Created payroll_record_component: 356b6665-36c2-4a2d-be97-6d150956afd8 for Base Salary
[2025-10-27T10:33:11.688Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 14611.625700000004
}
[2025-10-27T10:33:11.901Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:33:12.113Z] [LOG] Created payroll_record_component: 5d68bdef-43c3-4267-a500-99758712cff8 for Attendance Shortfall (Info)
[2025-10-27T10:33:12.554Z] [LOG] ✅ Financial balances updated successfully for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:12.555Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:33:12.555Z] [LOG] 
======================================================================
[2025-10-27T10:33:12.556Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saru null
[2025-10-27T10:33:12.556Z] [LOG] ======================================================================
[2025-10-27T10:33:12.556Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:33:12.557Z] [LOG]    Actual Earned Base (Attendance-based): Rs.27695.39
[2025-10-27T10:33:12.557Z] [LOG]    Attendance Shortfall: Rs.14611.63
[2025-10-27T10:33:12.558Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:12.559Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:12.559Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:33:12.560Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:12.560Z] [LOG]    GROSS SALARY: Rs.27695.39
[2025-10-27T10:33:12.560Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:12.561Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:33:12.561Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:33:12.561Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:33:12.561Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:33:12.562Z] [LOG]       - Attendance Shortfall (Info): Rs.14611.63
[2025-10-27T10:33:12.562Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:12.562Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:12.563Z] [LOG]    NET SALARY: Rs.27695.39
[2025-10-27T10:33:12.563Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:33:12.563Z] [LOG] ======================================================================

[2025-10-27T10:33:12.563Z] [LOG] ✅ Saru null: Calculation completed successfully
[2025-10-27T10:33:12.564Z] [LOG] 📊 Progress: 10/34 (29.4%)
[2025-10-27T10:33:12.564Z] [LOG] 
🧮 Processing: Faizan Faizan (EMP000003)
[2025-10-27T10:33:12.564Z] [LOG] 📋 Record ID: 3bee9c80-2a70-4979-9cb0-fd8fb7272a78
[2025-10-27T10:33:12.564Z] [LOG] 
======================================================================
[2025-10-27T10:33:12.565Z] [LOG] 🧮 CALCULATING PAYROLL: Faizan Faizan (EMP000003)
[2025-10-27T10:33:12.565Z] [LOG] ======================================================================
[2025-10-27T10:33:13.415Z] [LOG] 🔍 Component filtering for employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-27T10:33:13.415Z] [LOG]    Total components: 13
[2025-10-27T10:33:13.415Z] [LOG]    Applicable components: 13
[2025-10-27T10:33:13.416Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-27T10:33:14.270Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:33:14.271Z] [LOG] 🔄 Processing financial records for employee 0143a057-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:33:14.573Z] [LOG] 📊 Found 0 active loans for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:14.786Z] [LOG] 📊 Found 0 active advances for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:15.005Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:15.006Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:33:15.007Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:33:15.433Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:33:15.434Z] [LOG]    👤 Employee: Faizan Faizan (EMP000003)
[2025-10-27T10:33:15.434Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:33:15.435Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:33:15.436Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T10:33:15.436Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:33:15.644Z] [LOG] 
   💵 Pre-calculated Rates for Faizan Faizan (EMP000003):
[2025-10-27T10:33:15.647Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-27T10:33:15.648Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-27T10:33:15.649Z] [LOG]       Saturday Hourly Rate: Rs.226.24
[2025-10-27T10:33:15.650Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:33:15.651Z] [LOG] 
   📊 Full Period Working Days for Faizan Faizan (EMP000003):
[2025-10-27T10:33:15.653Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:16.286Z] [LOG] 
   📊 Working Days for Expected Calculation for Faizan Faizan (EMP000003):
[2025-10-27T10:33:16.286Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:33:16.286Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:16.492Z] [LOG] 
   ⏰ Calculating Completed Hours for Faizan Faizan (EMP000003) - All completed sessions:
[2025-10-27T10:33:16.493Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:33:16.494Z] [LOG]       Total completed sessions found: 0
[2025-10-27T10:33:16.702Z] [LOG] 
      📊 Aggregated Totals for Faizan Faizan (EMP000003):
[2025-10-27T10:33:16.703Z] [LOG]          Weekday: 0.00h
[2025-10-27T10:33:16.703Z] [LOG]          Saturday: 0.00h
[2025-10-27T10:33:16.704Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:33:16.704Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:33:16.704Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Faizan Faizan (EMP000003) - completed sessions only:
[2025-10-27T10:33:16.705Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:33:16.705Z] [LOG]       Saturday: 34.00h
[2025-10-27T10:33:16.706Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:16.706Z] [LOG]       Total Expected: 187.00h
[2025-10-27T10:33:16.706Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Faizan Faizan (EMP000003) - completed sessions only:
[2025-10-27T10:33:16.707Z] [LOG]       Weekday: 0.00h
[2025-10-27T10:33:16.707Z] [LOG]       Saturday: 0.00h
[2025-10-27T10:33:16.707Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:16.708Z] [LOG]       Total Actual: 0.00h
[2025-10-27T10:33:16.708Z] [LOG] 
   💵 EXPECTED Earned Salary for Faizan Faizan (EMP000003) - until NOW:
[2025-10-27T10:33:16.709Z] [LOG]       Weekday: 153.00h × Rs.226.24 = Rs.34614.72
[2025-10-27T10:33:16.710Z] [LOG]       Saturday: 34.00h × Rs.226.24 = Rs.7692.16
[2025-10-27T10:33:16.710Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:16.710Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:16.711Z] [LOG]       Total Expected Earned: Rs.42306.88
[2025-10-27T10:33:16.711Z] [LOG] 
   💵 ACTUAL Earned Salary for Faizan Faizan (EMP000003) - including live session:
[2025-10-27T10:33:16.711Z] [LOG]       Weekday: 0.00h × Rs.226.24 = Rs.0.00
[2025-10-27T10:33:16.712Z] [LOG]       Saturday: 0.00h × Rs.226.24 = Rs.0.00
[2025-10-27T10:33:16.712Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:16.712Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:16.713Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-27T10:33:16.714Z] [LOG] 
   📊 FINAL CALCULATION for Faizan Faizan (EMP000003):
[2025-10-27T10:33:16.714Z] [LOG]       Calculated At: Oct 27, 2025, 16:03:16
[2025-10-27T10:33:16.715Z] [LOG]       Expected Earned: Rs.42306.88
[2025-10-27T10:33:16.715Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-27T10:33:16.715Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:16.716Z] [LOG]       Attendance Deduction: Rs.42306.88
[2025-10-27T10:33:16.716Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:33:16.717Z] [LOG]       📉 Shortfall for Faizan Faizan: 187.00 hours (100.00% of expected)
[2025-10-27T10:33:16.717Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:33:16.717Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:33:16.718Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:33:16.718Z] [LOG]    Attendance Shortfall: Rs.42306.88
[2025-10-27T10:33:16.719Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:33:16.719Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:33:16.719Z] [LOG]    Gross Salary: 0
[2025-10-27T10:33:16.720Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:33:16.720Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:33:16.721Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:16.721Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:33:16.721Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:16.721Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:33:16.722Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:16.722Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:33:16.722Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:16.723Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:33:16.723Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:16.724Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:33:16.724Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:16.724Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:33:16.725Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:16.725Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:33:16.725Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:16.726Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:33:16.726Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:16.726Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:33:16.727Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:16.727Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:33:16.727Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-27T10:33:16.728Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:33:16.728Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:33:16.729Z] [LOG] 💰 GROSS CALCULATION for Faizan Faizan:
[2025-10-27T10:33:16.729Z] [LOG]    Base Salary: 50000
[2025-10-27T10:33:16.729Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:33:16.729Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:33:16.730Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:16.730Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:33:16.730Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:16.731Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:33:16.731Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:16.933Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:33:16.934Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:16.935Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:33:16.935Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:33:16.936Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:33:16.936Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:33:16.937Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:33:16.938Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-27T10:33:16.938Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:33:16.939Z] [LOG]    Attendance Shortfall (Info): Rs.42306.88
[2025-10-27T10:33:16.939Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:33:16.941Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:16.941Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:33:16.942Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:33:16.943Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-27T10:33:16.943Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:33:16.944Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-27T10:33:16.945Z] [LOG] 
💾 Database Update:
[2025-10-27T10:33:16.946Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:33:16.946Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:33:17.158Z] [LOG] 
📝 Components to save:
[2025-10-27T10:33:17.158Z] [LOG]    Gross/Earnings components: 0
[2025-10-27T10:33:17.159Z] [LOG]    Deduction components: 1
[2025-10-27T10:33:17.160Z] [LOG] Creating components for record 3bee9c80-2a70-4979-9cb0-fd8fb7272a78: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:33:17.162Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 42306.880000000005
}
[2025-10-27T10:33:17.381Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:33:17.611Z] [LOG] Created payroll_record_component: 01c17239-3f22-4d33-909c-20d649585025 for Attendance Shortfall (Info)
[2025-10-27T10:33:18.025Z] [LOG] ✅ Financial balances updated successfully for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:18.025Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:33:18.026Z] [LOG] 
======================================================================
[2025-10-27T10:33:18.026Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Faizan Faizan
[2025-10-27T10:33:18.027Z] [LOG] ======================================================================
[2025-10-27T10:33:18.028Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:33:18.028Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-27T10:33:18.029Z] [LOG]    Attendance Shortfall: Rs.42306.88
[2025-10-27T10:33:18.029Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:18.030Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:18.030Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:33:18.031Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:18.032Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-27T10:33:18.032Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:18.033Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:33:18.033Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:33:18.034Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:33:18.034Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:33:18.034Z] [LOG]       - Attendance Shortfall (Info): Rs.42306.88
[2025-10-27T10:33:18.035Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:18.035Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:18.036Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-27T10:33:18.036Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:33:18.036Z] [LOG] ======================================================================

[2025-10-27T10:33:18.037Z] [LOG] ✅ Faizan Faizan: Calculation completed successfully
[2025-10-27T10:33:18.038Z] [LOG] 📊 Progress: 11/34 (32.4%)
[2025-10-27T10:33:18.038Z] [LOG] 
🧮 Processing: Piyumi null (EMP000025)
[2025-10-27T10:33:18.039Z] [LOG] 📋 Record ID: 47eb8d62-441c-402e-b14e-18d91925f648
[2025-10-27T10:33:18.039Z] [LOG] 
======================================================================
[2025-10-27T10:33:18.039Z] [LOG] 🧮 CALCULATING PAYROLL: Piyumi null (EMP000025)
[2025-10-27T10:33:18.040Z] [LOG] ======================================================================
[2025-10-27T10:33:18.899Z] [LOG] 🔍 Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-27T10:33:18.899Z] [LOG]    Total components: 13
[2025-10-27T10:33:18.900Z] [LOG]    Applicable components: 13
[2025-10-27T10:33:18.900Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T10:33:19.716Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:33:19.718Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:33:19.924Z] [LOG] 📊 Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:20.127Z] [LOG] 📊 Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:20.328Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:20.329Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:33:20.329Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:33:20.747Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:33:20.747Z] [LOG]    👤 Employee: Piyumi null (EMP000025)
[2025-10-27T10:33:20.748Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:33:20.748Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:33:20.749Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T10:33:20.749Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:33:20.954Z] [LOG] 
   💵 Pre-calculated Rates for Piyumi null (EMP000025):
[2025-10-27T10:33:20.955Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-27T10:33:20.955Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-27T10:33:20.956Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-27T10:33:20.957Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:33:20.957Z] [LOG] 
   📊 Full Period Working Days for Piyumi null (EMP000025):
[2025-10-27T10:33:20.958Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:21.650Z] [LOG] 
   📊 Working Days for Expected Calculation for Piyumi null (EMP000025):
[2025-10-27T10:33:21.650Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:33:21.651Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:21.864Z] [LOG] 
   ⏰ Calculating Completed Hours for Piyumi null (EMP000025) - All completed sessions:
[2025-10-27T10:33:21.864Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:33:21.864Z] [LOG]       Total completed sessions found: 19
[2025-10-27T10:33:21.865Z] [LOG] 
      📋 Attendance Breakdown for Piyumi null (EMP000025):
[2025-10-27T10:33:21.865Z] [LOG]          1. 2025-10-01 (Weekday): 8.50h
[2025-10-27T10:33:21.865Z] [LOG]          2. 2025-10-02 (Weekday): 8.50h
[2025-10-27T10:33:21.866Z] [LOG]          3. 2025-10-03 (Weekday): 7.09h
[2025-10-27T10:33:21.866Z] [LOG]          4. 2025-10-04 (Saturday): 3.78h
[2025-10-27T10:33:21.866Z] [LOG]          5. 2025-10-07 (Weekday): 8.50h
[2025-10-27T10:33:21.867Z] [LOG]          6. 2025-10-08 (Weekday): 8.50h
[2025-10-27T10:33:21.867Z] [LOG]          7. 2025-10-09 (Weekday): 7.68h
[2025-10-27T10:33:21.867Z] [LOG]          8. 2025-10-10 (Weekday): 8.50h
[2025-10-27T10:33:21.867Z] [LOG]          9. 2025-10-11 (Saturday): 4.50h
[2025-10-27T10:33:21.868Z] [LOG]          10. 2025-10-13 (Weekday): 8.50h
[2025-10-27T10:33:21.868Z] [LOG]          11. 2025-10-14 (Weekday): 8.50h
[2025-10-27T10:33:21.868Z] [LOG]          12. 2025-10-16 (Weekday): 8.50h
[2025-10-27T10:33:21.869Z] [LOG]          13. 2025-10-17 (Weekday): 8.50h
[2025-10-27T10:33:21.869Z] [LOG]          14. 2025-10-18 (Saturday): 3.26h
[2025-10-27T10:33:21.869Z] [LOG]          15. 2025-10-20 (Weekday): 8.50h
[2025-10-27T10:33:21.870Z] [LOG]          16. 2025-10-21 (Weekday): 8.50h
[2025-10-27T10:33:21.870Z] [LOG]          17. 2025-10-22 (Weekday): 8.50h
[2025-10-27T10:33:21.870Z] [LOG]          18. 2025-10-23 (Weekday): 8.50h
[2025-10-27T10:33:21.870Z] [LOG]          19. 2025-10-24 (Weekday): 8.50h
[2025-10-27T10:33:22.078Z] [LOG] 
      📊 Aggregated Totals for Piyumi null (EMP000025):
[2025-10-27T10:33:22.088Z] [LOG]          Weekday: 133.77h
[2025-10-27T10:33:22.092Z] [LOG]          Saturday: 11.54h
[2025-10-27T10:33:22.094Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:33:22.095Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:33:22.095Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Piyumi null (EMP000025) - completed sessions only:
[2025-10-27T10:33:22.095Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:33:22.096Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:33:22.098Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:22.098Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:33:22.098Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Piyumi null (EMP000025) - completed sessions only:
[2025-10-27T10:33:22.099Z] [LOG]       Weekday: 133.77h
[2025-10-27T10:33:22.099Z] [LOG]       Saturday: 11.54h
[2025-10-27T10:33:22.099Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:22.101Z] [LOG]       Total Actual: 145.31h
[2025-10-27T10:33:22.102Z] [LOG] 
   💵 EXPECTED Earned Salary for Piyumi null (EMP000025) - until NOW:
[2025-10-27T10:33:22.103Z] [LOG]       Weekday: 153.00h × Rs.226.24 = Rs.34614.72
[2025-10-27T10:33:22.103Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-27T10:33:22.103Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:22.104Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:22.104Z] [LOG]       Total Expected Earned: Rs.42307.02
[2025-10-27T10:33:22.104Z] [LOG] 
   💵 ACTUAL Earned Salary for Piyumi null (EMP000025) - including live session:
[2025-10-27T10:33:22.105Z] [LOG]       Weekday: 133.77h × Rs.226.24 = Rs.30264.12
[2025-10-27T10:33:22.105Z] [LOG]       Saturday: 11.54h × Rs.427.35 = Rs.4931.62
[2025-10-27T10:33:22.105Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:22.106Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:22.106Z] [LOG]       Total Actual Earned: Rs.35195.74
[2025-10-27T10:33:22.106Z] [LOG] 
   📊 FINAL CALCULATION for Piyumi null (EMP000025):
[2025-10-27T10:33:22.107Z] [LOG]       Calculated At: Oct 27, 2025, 16:03:22
[2025-10-27T10:33:22.107Z] [LOG]       Expected Earned: Rs.42307.02
[2025-10-27T10:33:22.108Z] [LOG]       Actual Earned: Rs.35195.74
[2025-10-27T10:33:22.108Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:22.108Z] [LOG]       Attendance Deduction: Rs.7111.28
[2025-10-27T10:33:22.109Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:33:22.109Z] [LOG]       📉 Shortfall for Piyumi null: 25.69 hours (16.81% of expected)
[2025-10-27T10:33:22.109Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:33:22.110Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:33:22.110Z] [LOG]    Actual Earned Base: Rs.35195.74
[2025-10-27T10:33:22.110Z] [LOG]    Attendance Shortfall: Rs.7111.28
[2025-10-27T10:33:22.110Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:33:22.111Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:33:22.111Z] [LOG]    Gross Salary: 35195.743800000004
[2025-10-27T10:33:22.112Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:33:22.112Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:33:22.112Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:22.112Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:33:22.113Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:22.113Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:33:22.113Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:22.113Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:33:22.114Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:22.114Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:33:22.114Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:22.115Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:33:22.115Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:22.115Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:33:22.115Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:22.116Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:33:22.116Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:22.116Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:33:22.116Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:22.117Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:33:22.117Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:22.117Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:33:22.117Z] [LOG]    EPF/ETF calculated on: Rs.35195.74
[2025-10-27T10:33:22.117Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:33:22.118Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:33:22.118Z] [LOG] 💰 GROSS CALCULATION for Piyumi null:
[2025-10-27T10:33:22.118Z] [LOG]    Base Salary: 50000
[2025-10-27T10:33:22.118Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:33:22.119Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:33:22.119Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:22.119Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:33:22.119Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:22.120Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:33:22.120Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:22.337Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:33:22.337Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:22.338Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:33:22.338Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:33:22.339Z] [LOG]    Actual Earned Base: Rs.35195.74
[2025-10-27T10:33:22.340Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:33:22.340Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:33:22.341Z] [LOG]    = Gross Salary: Rs.35195.74
[2025-10-27T10:33:22.341Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:33:22.342Z] [LOG]    Attendance Shortfall (Info): Rs.7111.28
[2025-10-27T10:33:22.343Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:33:22.344Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:22.344Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:33:22.345Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:33:22.346Z] [LOG]    Gross Salary: Rs.35195.74
[2025-10-27T10:33:22.347Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:33:22.347Z] [LOG]    = NET SALARY: Rs.35195.74
[2025-10-27T10:33:22.348Z] [LOG] 
💾 Database Update:
[2025-10-27T10:33:22.349Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:33:22.349Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:33:22.556Z] [LOG] 
📝 Components to save:
[2025-10-27T10:33:22.557Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:33:22.557Z] [LOG]    Deduction components: 1
[2025-10-27T10:33:22.558Z] [LOG] Creating components for record 47eb8d62-441c-402e-b14e-18d91925f648: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:33:22.560Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 35195.743800000004
}
[2025-10-27T10:33:22.786Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:33:22.996Z] [LOG] Created payroll_record_component: 55889e43-7e65-41c9-889d-735dee3df642 for Base Salary
[2025-10-27T10:33:22.997Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 7111.2762
}
[2025-10-27T10:33:23.205Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:33:23.429Z] [LOG] Created payroll_record_component: 0a79ffed-198e-4360-bebb-4379d86ea04e for Attendance Shortfall (Info)
[2025-10-27T10:33:23.916Z] [LOG] ✅ Financial balances updated successfully for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:23.917Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:33:23.917Z] [LOG] 
======================================================================
[2025-10-27T10:33:23.918Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Piyumi null
[2025-10-27T10:33:23.918Z] [LOG] ======================================================================
[2025-10-27T10:33:23.919Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:33:23.919Z] [LOG]    Actual Earned Base (Attendance-based): Rs.35195.74
[2025-10-27T10:33:23.920Z] [LOG]    Attendance Shortfall: Rs.7111.28
[2025-10-27T10:33:23.920Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:23.921Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:23.922Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:33:23.922Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:23.923Z] [LOG]    GROSS SALARY: Rs.35195.74
[2025-10-27T10:33:23.924Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:23.925Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:33:23.925Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:33:23.926Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:33:23.926Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:33:23.927Z] [LOG]       - Attendance Shortfall (Info): Rs.7111.28
[2025-10-27T10:33:23.928Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:23.928Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:23.929Z] [LOG]    NET SALARY: Rs.35195.74
[2025-10-27T10:33:23.929Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:33:23.930Z] [LOG] ======================================================================

[2025-10-27T10:33:23.931Z] [LOG] ✅ Piyumi null: Calculation completed successfully
[2025-10-27T10:33:23.931Z] [LOG] 📊 Progress: 12/34 (35.3%)
[2025-10-27T10:33:23.932Z] [LOG] 
🧮 Processing: Franklin null (EMP000018)
[2025-10-27T10:33:23.933Z] [LOG] 📋 Record ID: 4ceb8942-3092-40a5-91fe-ded1ca8e1c6f
[2025-10-27T10:33:23.933Z] [LOG] 
======================================================================
[2025-10-27T10:33:23.934Z] [LOG] 🧮 CALCULATING PAYROLL: Franklin null (EMP000018)
[2025-10-27T10:33:23.935Z] [LOG] ======================================================================
[2025-10-27T10:33:24.796Z] [LOG] 🔍 Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-27T10:33:24.797Z] [LOG]    Total components: 13
[2025-10-27T10:33:24.797Z] [LOG]    Applicable components: 13
[2025-10-27T10:33:24.797Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-27T10:33:25.618Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:33:25.619Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:33:25.826Z] [LOG] 📊 Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:26.044Z] [LOG] 📊 Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:26.255Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:26.256Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:33:26.257Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:33:26.677Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:33:26.678Z] [LOG]    👤 Employee: Franklin null (EMP000018)
[2025-10-27T10:33:26.679Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:33:26.679Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:33:26.680Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T10:33:26.681Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:33:26.884Z] [LOG] 
   💵 Pre-calculated Rates for Franklin null (EMP000018):
[2025-10-27T10:33:26.884Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-27T10:33:26.885Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-27T10:33:26.886Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-27T10:33:26.886Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:33:26.887Z] [LOG] 
   📊 Full Period Working Days for Franklin null (EMP000018):
[2025-10-27T10:33:26.888Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:27.643Z] [LOG] 
   📊 Working Days for Expected Calculation for Franklin null (EMP000018):
[2025-10-27T10:33:27.644Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:33:27.644Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:27.912Z] [LOG] 
   ⏰ Calculating Completed Hours for Franklin null (EMP000018) - All completed sessions:
[2025-10-27T10:33:27.912Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:33:27.912Z] [LOG]       Total completed sessions found: 17
[2025-10-27T10:33:27.913Z] [LOG] 
      📋 Attendance Breakdown for Franklin null (EMP000018):
[2025-10-27T10:33:27.913Z] [LOG]          1. 2025-10-01 (Weekday): 7.18h
[2025-10-27T10:33:27.913Z] [LOG]          2. 2025-10-02 (Weekday): 6.03h
[2025-10-27T10:33:27.914Z] [LOG]          3. 2025-10-03 (Weekday): 7.28h
[2025-10-27T10:33:27.914Z] [LOG]          4. 2025-10-07 (Weekday): 6.87h
[2025-10-27T10:33:27.914Z] [LOG]          5. 2025-10-09 (Weekday): 7.99h
[2025-10-27T10:33:27.915Z] [LOG]          6. 2025-10-10 (Weekday): 8.28h
[2025-10-27T10:33:27.915Z] [LOG]          7. 2025-10-11 (Saturday): 2.08h
[2025-10-27T10:33:27.915Z] [LOG]          8. 2025-10-13 (Weekday): 7.22h
[2025-10-27T10:33:27.915Z] [LOG]          9. 2025-10-14 (Weekday): 8.24h
[2025-10-27T10:33:27.916Z] [LOG]          10. 2025-10-16 (Weekday): 7.12h
[2025-10-27T10:33:27.916Z] [LOG]          11. 2025-10-17 (Weekday): 7.62h
[2025-10-27T10:33:27.916Z] [LOG]          12. 2025-10-18 (Saturday): 2.55h
[2025-10-27T10:33:27.916Z] [LOG]          13. 2025-10-20 (Weekday): 6.65h
[2025-10-27T10:33:27.917Z] [LOG]          14. 2025-10-21 (Weekday): 6.79h
[2025-10-27T10:33:27.917Z] [LOG]          15. 2025-10-23 (Weekday): 6.45h
[2025-10-27T10:33:27.917Z] [LOG]          16. 2025-10-24 (Weekday): 8.26h
[2025-10-27T10:33:27.917Z] [LOG]          17. 2025-10-25 (Saturday): 0.00h
[2025-10-27T10:33:28.190Z] [LOG] 
      📊 Aggregated Totals for Franklin null (EMP000018):
[2025-10-27T10:33:28.191Z] [LOG]          Weekday: 101.98h
[2025-10-27T10:33:28.191Z] [LOG]          Saturday: 4.63h
[2025-10-27T10:33:28.191Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:33:28.192Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:33:28.193Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Franklin null (EMP000018) - completed sessions only:
[2025-10-27T10:33:28.193Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:33:28.194Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:33:28.195Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:28.195Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:33:28.196Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Franklin null (EMP000018) - completed sessions only:
[2025-10-27T10:33:28.197Z] [LOG]       Weekday: 101.98h
[2025-10-27T10:33:28.198Z] [LOG]       Saturday: 4.63h
[2025-10-27T10:33:28.198Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:28.199Z] [LOG]       Total Actual: 106.61h
[2025-10-27T10:33:28.200Z] [LOG] 
   💵 EXPECTED Earned Salary for Franklin null (EMP000018) - until NOW:
[2025-10-27T10:33:28.200Z] [LOG]       Weekday: 153.00h × Rs.226.24 = Rs.34614.72
[2025-10-27T10:33:28.201Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-27T10:33:28.202Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:28.202Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:28.203Z] [LOG]       Total Expected Earned: Rs.42307.02
[2025-10-27T10:33:28.204Z] [LOG] 
   💵 ACTUAL Earned Salary for Franklin null (EMP000018) - including live session:
[2025-10-27T10:33:28.204Z] [LOG]       Weekday: 101.98h × Rs.226.24 = Rs.23071.96
[2025-10-27T10:33:28.205Z] [LOG]       Saturday: 4.63h × Rs.427.35 = Rs.1978.63
[2025-10-27T10:33:28.205Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:28.206Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:28.207Z] [LOG]       Total Actual Earned: Rs.25050.59
[2025-10-27T10:33:28.208Z] [LOG] 
   📊 FINAL CALCULATION for Franklin null (EMP000018):
[2025-10-27T10:33:28.209Z] [LOG]       Calculated At: Oct 27, 2025, 16:03:28
[2025-10-27T10:33:28.209Z] [LOG]       Expected Earned: Rs.42307.02
[2025-10-27T10:33:28.210Z] [LOG]       Actual Earned: Rs.25050.59
[2025-10-27T10:33:28.210Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:28.211Z] [LOG]       Attendance Deduction: Rs.17256.43
[2025-10-27T10:33:28.211Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:33:28.212Z] [LOG]       📉 Shortfall for Franklin null: 64.39 hours (40.79% of expected)
[2025-10-27T10:33:28.214Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:33:28.215Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:33:28.216Z] [LOG]    Actual Earned Base: Rs.25050.59
[2025-10-27T10:33:28.216Z] [LOG]    Attendance Shortfall: Rs.17256.43
[2025-10-27T10:33:28.217Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:33:28.218Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:33:28.219Z] [LOG]    Gross Salary: 25050.5857
[2025-10-27T10:33:28.220Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:33:28.221Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:33:28.221Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:28.222Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:33:28.222Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:28.223Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:33:28.224Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:28.225Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:33:28.225Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:28.226Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:33:28.227Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:28.228Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:33:28.230Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:28.231Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:33:28.232Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:28.232Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:33:28.233Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:28.233Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:33:28.234Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:28.234Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:33:28.235Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:28.235Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:33:28.235Z] [LOG]    EPF/ETF calculated on: Rs.25050.59
[2025-10-27T10:33:28.236Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:33:28.236Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:33:28.236Z] [LOG] 💰 GROSS CALCULATION for Franklin null:
[2025-10-27T10:33:28.236Z] [LOG]    Base Salary: 50000
[2025-10-27T10:33:28.237Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:33:28.237Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:33:28.237Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:28.237Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:33:28.238Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:28.238Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:33:28.238Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:28.495Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:33:28.496Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:28.496Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:33:28.496Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:33:28.497Z] [LOG]    Actual Earned Base: Rs.25050.59
[2025-10-27T10:33:28.497Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:33:28.498Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:33:28.498Z] [LOG]    = Gross Salary: Rs.25050.59
[2025-10-27T10:33:28.498Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:33:28.499Z] [LOG]    Attendance Shortfall (Info): Rs.17256.43
[2025-10-27T10:33:28.499Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:33:28.500Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:28.500Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:33:28.500Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:33:28.501Z] [LOG]    Gross Salary: Rs.25050.59
[2025-10-27T10:33:28.501Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:33:28.502Z] [LOG]    = NET SALARY: Rs.25050.59
[2025-10-27T10:33:28.502Z] [LOG] 
💾 Database Update:
[2025-10-27T10:33:28.503Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:33:28.503Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:33:28.759Z] [LOG] 
📝 Components to save:
[2025-10-27T10:33:28.759Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:33:28.760Z] [LOG]    Deduction components: 1
[2025-10-27T10:33:28.760Z] [LOG] Creating components for record 4ceb8942-3092-40a5-91fe-ded1ca8e1c6f: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:33:28.761Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 25050.5857
}
[2025-10-27T10:33:29.034Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:33:29.290Z] [LOG] Created payroll_record_component: 88f217b5-cf56-4fc3-98c7-1d6fc3eff835 for Base Salary
[2025-10-27T10:33:29.290Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 17256.434300000004
}
[2025-10-27T10:33:29.547Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:33:29.823Z] [LOG] Created payroll_record_component: a6129944-6a3d-4019-a1ef-6fe1cac0a999 for Attendance Shortfall (Info)
[2025-10-27T10:33:30.314Z] [LOG] ✅ Financial balances updated successfully for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:30.314Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:33:30.315Z] [LOG] 
======================================================================
[2025-10-27T10:33:30.316Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Franklin null
[2025-10-27T10:33:30.316Z] [LOG] ======================================================================
[2025-10-27T10:33:30.317Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:33:30.317Z] [LOG]    Actual Earned Base (Attendance-based): Rs.25050.59
[2025-10-27T10:33:30.318Z] [LOG]    Attendance Shortfall: Rs.17256.43
[2025-10-27T10:33:30.319Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:30.319Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:30.320Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:33:30.321Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:30.321Z] [LOG]    GROSS SALARY: Rs.25050.59
[2025-10-27T10:33:30.322Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:30.323Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:33:30.323Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:33:30.324Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:33:30.325Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:33:30.325Z] [LOG]       - Attendance Shortfall (Info): Rs.17256.43
[2025-10-27T10:33:30.326Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:30.326Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:30.327Z] [LOG]    NET SALARY: Rs.25050.59
[2025-10-27T10:33:30.328Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:33:30.328Z] [LOG] ======================================================================

[2025-10-27T10:33:30.329Z] [LOG] ✅ Franklin null: Calculation completed successfully
[2025-10-27T10:33:30.330Z] [LOG] 📊 Progress: 13/34 (38.2%)
[2025-10-27T10:33:30.330Z] [LOG] 
🧮 Processing: Anoj null (EMP000014)
[2025-10-27T10:33:30.331Z] [LOG] 📋 Record ID: 4e36bb7d-d217-41ee-a351-a7ef2b511cc9
[2025-10-27T10:33:30.332Z] [LOG] 
======================================================================
[2025-10-27T10:33:30.332Z] [LOG] 🧮 CALCULATING PAYROLL: Anoj null (EMP000014)
[2025-10-27T10:33:30.333Z] [LOG] ======================================================================
[2025-10-27T10:33:31.365Z] [LOG] 🔍 Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-27T10:33:31.365Z] [LOG]    Total components: 13
[2025-10-27T10:33:31.366Z] [LOG]    Applicable components: 13
[2025-10-27T10:33:31.366Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T10:33:32.416Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:33:32.417Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:33:32.688Z] [LOG] 📊 Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:32.949Z] [LOG] 📊 Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:33.200Z] [LOG] 📊 Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:33.201Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:33:33.202Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:33:33.700Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:33:33.701Z] [LOG]    👤 Employee: Anoj null (EMP000014)
[2025-10-27T10:33:33.702Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:33:33.702Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:33:33.703Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T10:33:33.704Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:33:33.957Z] [LOG] 
   💵 Pre-calculated Rates for Anoj null (EMP000014):
[2025-10-27T10:33:33.959Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-27T10:33:33.960Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-27T10:33:33.961Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-27T10:33:33.961Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:33:33.962Z] [LOG] 
   📊 Full Period Working Days for Anoj null (EMP000014):
[2025-10-27T10:33:33.962Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:34.725Z] [LOG] 
   📊 Working Days for Expected Calculation for Anoj null (EMP000014):
[2025-10-27T10:33:34.726Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:33:34.726Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:34.997Z] [LOG] 
   ⏰ Calculating Completed Hours for Anoj null (EMP000014) - All completed sessions:
[2025-10-27T10:33:34.997Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:33:34.997Z] [LOG]       Total completed sessions found: 16
[2025-10-27T10:33:34.998Z] [LOG] 
      📋 Attendance Breakdown for Anoj null (EMP000014):
[2025-10-27T10:33:34.998Z] [LOG]          1. 2025-10-01 (Weekday): 8.50h
[2025-10-27T10:33:34.999Z] [LOG]          2. 2025-10-02 (Weekday): 6.04h
[2025-10-27T10:33:34.999Z] [LOG]          3. 2025-10-03 (Weekday): 7.22h
[2025-10-27T10:33:34.999Z] [LOG]          4. 2025-10-04 (Saturday): 4.23h
[2025-10-27T10:33:35.000Z] [LOG]          5. 2025-10-07 (Weekday): 8.50h
[2025-10-27T10:33:35.000Z] [LOG]          6. 2025-10-08 (Weekday): 7.50h
[2025-10-27T10:33:35.000Z] [LOG]          7. 2025-10-09 (Weekday): 8.50h
[2025-10-27T10:33:35.001Z] [LOG]          8. 2025-10-10 (Weekday): 8.50h
[2025-10-27T10:33:35.001Z] [LOG]          9. 2025-10-11 (Saturday): 4.50h
[2025-10-27T10:33:35.001Z] [LOG]          10. 2025-10-13 (Weekday): 7.88h
[2025-10-27T10:33:35.002Z] [LOG]          11. 2025-10-17 (Weekday): 7.42h
[2025-10-27T10:33:35.002Z] [LOG]          12. 2025-10-18 (Saturday): 3.88h
[2025-10-27T10:33:35.003Z] [LOG]          13. 2025-10-21 (Weekday): 8.00h
[2025-10-27T10:33:35.003Z] [LOG]          14. 2025-10-22 (Weekday): 8.50h
[2025-10-27T10:33:35.003Z] [LOG]          15. 2025-10-23 (Weekday): 7.00h
[2025-10-27T10:33:35.004Z] [LOG]          16. 2025-10-24 (Weekday): 0.00h
[2025-10-27T10:33:35.256Z] [LOG] 
      📊 Aggregated Totals for Anoj null (EMP000014):
[2025-10-27T10:33:35.257Z] [LOG]          Weekday: 93.56h
[2025-10-27T10:33:35.257Z] [LOG]          Saturday: 12.61h
[2025-10-27T10:33:35.258Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:33:35.258Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:33:35.259Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Anoj null (EMP000014) - completed sessions only:
[2025-10-27T10:33:35.259Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:33:35.259Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:33:35.260Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:35.260Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:33:35.260Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Anoj null (EMP000014) - completed sessions only:
[2025-10-27T10:33:35.260Z] [LOG]       Weekday: 93.56h
[2025-10-27T10:33:35.261Z] [LOG]       Saturday: 12.61h
[2025-10-27T10:33:35.261Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:35.261Z] [LOG]       Total Actual: 106.17h
[2025-10-27T10:33:35.261Z] [LOG] 
   💵 EXPECTED Earned Salary for Anoj null (EMP000014) - until NOW:
[2025-10-27T10:33:35.262Z] [LOG]       Weekday: 153.00h × Rs.226.24 = Rs.34614.72
[2025-10-27T10:33:35.262Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-27T10:33:35.262Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:35.263Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:35.263Z] [LOG]       Total Expected Earned: Rs.42307.02
[2025-10-27T10:33:35.263Z] [LOG] 
   💵 ACTUAL Earned Salary for Anoj null (EMP000014) - including live session:
[2025-10-27T10:33:35.263Z] [LOG]       Weekday: 93.56h × Rs.226.24 = Rs.21167.01
[2025-10-27T10:33:35.264Z] [LOG]       Saturday: 12.61h × Rs.427.35 = Rs.5388.88
[2025-10-27T10:33:35.264Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:35.264Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:35.264Z] [LOG]       Total Actual Earned: Rs.26555.90
[2025-10-27T10:33:35.265Z] [LOG] 
   📊 FINAL CALCULATION for Anoj null (EMP000014):
[2025-10-27T10:33:35.265Z] [LOG]       Calculated At: Oct 27, 2025, 16:03:35
[2025-10-27T10:33:35.266Z] [LOG]       Expected Earned: Rs.42307.02
[2025-10-27T10:33:35.266Z] [LOG]       Actual Earned: Rs.26555.90
[2025-10-27T10:33:35.266Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:35.266Z] [LOG]       Attendance Deduction: Rs.15751.12
[2025-10-27T10:33:35.267Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:33:35.267Z] [LOG]       📉 Shortfall for Anoj null: 64.83 hours (37.23% of expected)
[2025-10-27T10:33:35.267Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:33:35.268Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:33:35.268Z] [LOG]    Actual Earned Base: Rs.26555.90
[2025-10-27T10:33:35.268Z] [LOG]    Attendance Shortfall: Rs.15751.12
[2025-10-27T10:33:35.268Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:33:35.269Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:33:35.269Z] [LOG]    Gross Salary: 26555.8979
[2025-10-27T10:33:35.269Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:33:35.270Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:33:35.270Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:35.270Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:33:35.270Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:35.271Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:33:35.271Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:35.271Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:33:35.271Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:35.272Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:33:35.272Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:35.273Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:33:35.273Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:35.273Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:33:35.274Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:35.274Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:33:35.275Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:35.275Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:33:35.275Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:35.276Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:33:35.276Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:35.276Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:33:35.277Z] [LOG]    EPF/ETF calculated on: Rs.26555.90
[2025-10-27T10:33:35.277Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:33:35.278Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:33:35.278Z] [LOG] 💰 GROSS CALCULATION for Anoj null:
[2025-10-27T10:33:35.278Z] [LOG]    Base Salary: 50000
[2025-10-27T10:33:35.279Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:33:35.279Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:33:35.279Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:35.280Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:33:35.280Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:35.280Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:33:35.281Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:35.528Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:33:35.528Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:35.529Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:33:35.529Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:33:35.530Z] [LOG]    Actual Earned Base: Rs.26555.90
[2025-10-27T10:33:35.531Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:33:35.531Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:33:35.532Z] [LOG]    = Gross Salary: Rs.26555.90
[2025-10-27T10:33:35.532Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:33:35.533Z] [LOG]    Attendance Shortfall (Info): Rs.15751.12
[2025-10-27T10:33:35.534Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:33:35.535Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:35.535Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:33:35.536Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:33:35.536Z] [LOG]    Gross Salary: Rs.26555.90
[2025-10-27T10:33:35.537Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:33:35.538Z] [LOG]    = NET SALARY: Rs.26555.90
[2025-10-27T10:33:35.538Z] [LOG] 
💾 Database Update:
[2025-10-27T10:33:35.539Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:33:35.540Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:33:35.799Z] [LOG] 
📝 Components to save:
[2025-10-27T10:33:35.800Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:33:35.800Z] [LOG]    Deduction components: 1
[2025-10-27T10:33:35.800Z] [LOG] Creating components for record 4e36bb7d-d217-41ee-a351-a7ef2b511cc9: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:33:35.801Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 26555.8979
}
[2025-10-27T10:33:36.070Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:33:36.325Z] [LOG] Created payroll_record_component: 907f8c21-6a55-4e95-8e9c-531a8633cbfb for Base Salary
[2025-10-27T10:33:36.325Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 15751.122100000004
}
[2025-10-27T10:33:36.585Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:33:36.836Z] [LOG] Created payroll_record_component: caaa12ba-7631-4130-90a5-addb55999b8b for Attendance Shortfall (Info)
[2025-10-27T10:33:37.380Z] [LOG] ✅ Financial balances updated successfully for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:37.381Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:33:37.381Z] [LOG] 
======================================================================
[2025-10-27T10:33:37.382Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Anoj null
[2025-10-27T10:33:37.383Z] [LOG] ======================================================================
[2025-10-27T10:33:37.384Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:33:37.385Z] [LOG]    Actual Earned Base (Attendance-based): Rs.26555.90
[2025-10-27T10:33:37.385Z] [LOG]    Attendance Shortfall: Rs.15751.12
[2025-10-27T10:33:37.386Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:37.387Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:37.387Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:33:37.388Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:37.388Z] [LOG]    GROSS SALARY: Rs.26555.90
[2025-10-27T10:33:37.389Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:37.389Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:33:37.389Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:33:37.390Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:33:37.390Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:33:37.397Z] [LOG]       - Attendance Shortfall (Info): Rs.15751.12
[2025-10-27T10:33:37.397Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:37.398Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:37.399Z] [LOG]    NET SALARY: Rs.26555.90
[2025-10-27T10:33:37.399Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:33:37.400Z] [LOG] ======================================================================

[2025-10-27T10:33:37.400Z] [LOG] ✅ Anoj null: Calculation completed successfully
[2025-10-27T10:33:37.402Z] [LOG] 📊 Progress: 14/34 (41.2%)
[2025-10-27T10:33:37.403Z] [LOG] 
🧮 Processing: Maryam null (EMP000035)
[2025-10-27T10:33:37.404Z] [LOG] 📋 Record ID: 4f42fa0a-40e1-4fc6-9116-2667c19aa448
[2025-10-27T10:33:37.404Z] [LOG] 
======================================================================
[2025-10-27T10:33:37.405Z] [LOG] 🧮 CALCULATING PAYROLL: Maryam null (EMP000035)
[2025-10-27T10:33:37.405Z] [LOG] ======================================================================
[2025-10-27T10:33:38.523Z] [LOG] 🔍 Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-27T10:33:38.524Z] [LOG]    Total components: 13
[2025-10-27T10:33:38.526Z] [LOG]    Applicable components: 13
[2025-10-27T10:33:38.527Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-27T10:33:39.556Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:33:39.556Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:33:39.808Z] [LOG] 📊 Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:40.096Z] [LOG] 📊 Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:40.369Z] [LOG] 📊 Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:40.369Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:33:40.370Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:33:40.892Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:33:40.893Z] [LOG]    👤 Employee: Maryam null (EMP000035)
[2025-10-27T10:33:40.893Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:33:40.894Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:33:40.895Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-27T10:33:40.895Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:33:41.160Z] [LOG] 
   💵 Pre-calculated Rates for Maryam null (EMP000035):
[2025-10-27T10:33:41.161Z] [LOG]       Daily Salary: Rs.1538.46
[2025-10-27T10:33:41.162Z] [LOG]       Weekday Hourly Rate: Rs.181.00
[2025-10-27T10:33:41.162Z] [LOG]       Saturday Hourly Rate: Rs.341.88
[2025-10-27T10:33:41.163Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:33:41.163Z] [LOG] 
   📊 Full Period Working Days for Maryam null (EMP000035):
[2025-10-27T10:33:41.163Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:42.395Z] [LOG] 
   📊 Working Days for Expected Calculation for Maryam null (EMP000035):
[2025-10-27T10:33:42.396Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:33:42.396Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:42.620Z] [LOG] 
   ⏰ Calculating Completed Hours for Maryam null (EMP000035) - All completed sessions:
[2025-10-27T10:33:42.620Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:33:42.620Z] [LOG]       Total completed sessions found: 19
[2025-10-27T10:33:42.621Z] [LOG] 
      📋 Attendance Breakdown for Maryam null (EMP000035):
[2025-10-27T10:33:42.621Z] [LOG]          1. 2025-10-01 (Weekday): 7.61h
[2025-10-27T10:33:42.621Z] [LOG]          2. 2025-10-02 (Weekday): 8.25h
[2025-10-27T10:33:42.622Z] [LOG]          3. 2025-10-03 (Weekday): 7.79h
[2025-10-27T10:33:42.622Z] [LOG]          4. 2025-10-04 (Saturday): 4.23h
[2025-10-27T10:33:42.622Z] [LOG]          5. 2025-10-07 (Weekday): 8.18h
[2025-10-27T10:33:42.623Z] [LOG]          6. 2025-10-08 (Weekday): 8.38h
[2025-10-27T10:33:42.623Z] [LOG]          7. 2025-10-09 (Weekday): 8.05h
[2025-10-27T10:33:42.623Z] [LOG]          8. 2025-10-10 (Weekday): 7.92h
[2025-10-27T10:33:42.624Z] [LOG]          9. 2025-10-11 (Saturday): 4.50h
[2025-10-27T10:33:42.624Z] [LOG]          10. 2025-10-13 (Weekday): 8.16h
[2025-10-27T10:33:42.625Z] [LOG]          11. 2025-10-14 (Weekday): 8.39h
[2025-10-27T10:33:42.626Z] [LOG]          12. 2025-10-15 (Weekday): 8.17h
[2025-10-27T10:33:42.626Z] [LOG]          13. 2025-10-16 (Weekday): 7.92h
[2025-10-27T10:33:42.626Z] [LOG]          14. 2025-10-18 (Saturday): 4.50h
[2025-10-27T10:33:42.627Z] [LOG]          15. 2025-10-20 (Weekday): 8.06h
[2025-10-27T10:33:42.627Z] [LOG]          16. 2025-10-21 (Weekday): 7.79h
[2025-10-27T10:33:42.627Z] [LOG]          17. 2025-10-22 (Weekday): 8.13h
[2025-10-27T10:33:42.627Z] [LOG]          18. 2025-10-23 (Weekday): 8.22h
[2025-10-27T10:33:42.628Z] [LOG]          19. 2025-10-24 (Weekday): 7.08h
[2025-10-27T10:33:42.839Z] [LOG] 
      📊 Aggregated Totals for Maryam null (EMP000035):
[2025-10-27T10:33:42.839Z] [LOG]          Weekday: 128.10h
[2025-10-27T10:33:42.839Z] [LOG]          Saturday: 13.23h
[2025-10-27T10:33:42.839Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:33:42.839Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:33:42.840Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Maryam null (EMP000035) - completed sessions only:
[2025-10-27T10:33:42.840Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:33:42.840Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:33:42.840Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:42.840Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:33:42.843Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Maryam null (EMP000035) - completed sessions only:
[2025-10-27T10:33:42.843Z] [LOG]       Weekday: 128.10h
[2025-10-27T10:33:42.844Z] [LOG]       Saturday: 13.23h
[2025-10-27T10:33:42.844Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:42.845Z] [LOG]       Total Actual: 141.33h
[2025-10-27T10:33:42.845Z] [LOG] 
   💵 EXPECTED Earned Salary for Maryam null (EMP000035) - until NOW:
[2025-10-27T10:33:42.846Z] [LOG]       Weekday: 153.00h × Rs.181.00 = Rs.27693.00
[2025-10-27T10:33:42.846Z] [LOG]       Saturday: 18.00h × Rs.341.88 = Rs.6153.84
[2025-10-27T10:33:42.846Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:42.847Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:42.847Z] [LOG]       Total Expected Earned: Rs.33846.84
[2025-10-27T10:33:42.847Z] [LOG] 
   💵 ACTUAL Earned Salary for Maryam null (EMP000035) - including live session:
[2025-10-27T10:33:42.847Z] [LOG]       Weekday: 128.10h × Rs.181.00 = Rs.23186.10
[2025-10-27T10:33:42.847Z] [LOG]       Saturday: 13.23h × Rs.341.88 = Rs.4523.07
[2025-10-27T10:33:42.848Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:42.848Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:42.848Z] [LOG]       Total Actual Earned: Rs.27709.17
[2025-10-27T10:33:42.849Z] [LOG] 
   📊 FINAL CALCULATION for Maryam null (EMP000035):
[2025-10-27T10:33:42.850Z] [LOG]       Calculated At: Oct 27, 2025, 16:03:42
[2025-10-27T10:33:42.850Z] [LOG]       Expected Earned: Rs.33846.84
[2025-10-27T10:33:42.850Z] [LOG]       Actual Earned: Rs.27709.17
[2025-10-27T10:33:42.850Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:42.851Z] [LOG]       Attendance Deduction: Rs.6137.67
[2025-10-27T10:33:42.851Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:33:42.851Z] [LOG]       📉 Shortfall for Maryam null: 29.67 hours (18.13% of expected)
[2025-10-27T10:33:42.851Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:33:42.852Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-27T10:33:42.852Z] [LOG]    Actual Earned Base: Rs.27709.17
[2025-10-27T10:33:42.852Z] [LOG]    Attendance Shortfall: Rs.6137.67
[2025-10-27T10:33:42.852Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:33:42.852Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:33:42.853Z] [LOG]    Gross Salary: 27709.1724
[2025-10-27T10:33:42.853Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:33:42.853Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:33:42.853Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:42.854Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:33:42.854Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:42.854Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:33:42.854Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:42.854Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:33:42.855Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:42.855Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:33:42.855Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:42.855Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:33:42.855Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:42.855Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:33:42.856Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:42.856Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:33:42.856Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:42.856Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:33:42.856Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:42.857Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:33:42.857Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:42.857Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:33:42.858Z] [LOG]    EPF/ETF calculated on: Rs.27709.17
[2025-10-27T10:33:42.859Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:33:42.859Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:33:42.860Z] [LOG] 💰 GROSS CALCULATION for Maryam null:
[2025-10-27T10:33:42.860Z] [LOG]    Base Salary: 40000
[2025-10-27T10:33:42.860Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:33:42.861Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:33:42.861Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:42.861Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:33:42.861Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:42.862Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:33:42.862Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:43.066Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:33:43.066Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:43.067Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:33:43.067Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:33:43.067Z] [LOG]    Actual Earned Base: Rs.27709.17
[2025-10-27T10:33:43.067Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:33:43.067Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:33:43.068Z] [LOG]    = Gross Salary: Rs.27709.17
[2025-10-27T10:33:43.068Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:33:43.068Z] [LOG]    Attendance Shortfall (Info): Rs.6137.67
[2025-10-27T10:33:43.068Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:33:43.068Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:43.069Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:33:43.069Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:33:43.069Z] [LOG]    Gross Salary: Rs.27709.17
[2025-10-27T10:33:43.069Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:33:43.070Z] [LOG]    = NET SALARY: Rs.27709.17
[2025-10-27T10:33:43.070Z] [LOG] 
💾 Database Update:
[2025-10-27T10:33:43.070Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:33:43.070Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:33:43.286Z] [LOG] 
📝 Components to save:
[2025-10-27T10:33:43.287Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:33:43.287Z] [LOG]    Deduction components: 1
[2025-10-27T10:33:43.288Z] [LOG] Creating components for record 4f42fa0a-40e1-4fc6-9116-2667c19aa448: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:33:43.290Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 27709.1724
}
[2025-10-27T10:33:43.518Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:33:43.735Z] [LOG] Created payroll_record_component: eb85f5a1-fed2-41a1-9c3a-f9be6ff562a8 for Base Salary
[2025-10-27T10:33:43.735Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 6137.667599999997
}
[2025-10-27T10:33:43.954Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:33:44.164Z] [LOG] Created payroll_record_component: f3a9faa5-b8f3-4209-94a7-0123c9b1fb77 for Attendance Shortfall (Info)
[2025-10-27T10:33:44.596Z] [LOG] ✅ Financial balances updated successfully for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:44.596Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:33:44.596Z] [LOG] 
======================================================================
[2025-10-27T10:33:44.597Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Maryam null
[2025-10-27T10:33:44.597Z] [LOG] ======================================================================
[2025-10-27T10:33:44.597Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-27T10:33:44.598Z] [LOG]    Actual Earned Base (Attendance-based): Rs.27709.17
[2025-10-27T10:33:44.598Z] [LOG]    Attendance Shortfall: Rs.6137.67
[2025-10-27T10:33:44.598Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:44.599Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:44.599Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:33:44.599Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:44.599Z] [LOG]    GROSS SALARY: Rs.27709.17
[2025-10-27T10:33:44.600Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:44.600Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:33:44.600Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:33:44.601Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:33:44.601Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:33:44.601Z] [LOG]       - Attendance Shortfall (Info): Rs.6137.67
[2025-10-27T10:33:44.601Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:44.601Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:44.602Z] [LOG]    NET SALARY: Rs.27709.17
[2025-10-27T10:33:44.602Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:33:44.602Z] [LOG] ======================================================================

[2025-10-27T10:33:44.602Z] [LOG] ✅ Maryam null: Calculation completed successfully
[2025-10-27T10:33:44.603Z] [LOG] 📊 Progress: 15/34 (44.1%)
[2025-10-27T10:33:44.603Z] [LOG] 
🧮 Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-27T10:33:44.603Z] [LOG] 📋 Record ID: 5dea361d-7688-4e3b-89b6-257f9a987d1e
[2025-10-27T10:33:44.604Z] [LOG] 
======================================================================
[2025-10-27T10:33:44.604Z] [LOG] 🧮 CALCULATING PAYROLL: R. D.A Kaushalya null (EMP000044)
[2025-10-27T10:33:44.604Z] [LOG] ======================================================================
[2025-10-27T10:33:45.450Z] [LOG] 🔍 Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-27T10:33:45.451Z] [LOG]    Total components: 13
[2025-10-27T10:33:45.451Z] [LOG]    Applicable components: 13
[2025-10-27T10:33:45.452Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T10:33:46.303Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:33:46.303Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:33:46.523Z] [LOG] 📊 Found 0 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:46.739Z] [LOG] 📊 Found 0 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:46.959Z] [LOG] 📊 Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:46.960Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:33:46.960Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:33:47.390Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:33:47.391Z] [LOG]    👤 Employee: R. D.A Kaushalya null (EMP000044)
[2025-10-27T10:33:47.392Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:33:47.392Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:33:47.393Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T10:33:47.393Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:33:47.613Z] [LOG] 
   💵 Pre-calculated Rates for R. D.A Kaushalya null (EMP000044):
[2025-10-27T10:33:47.614Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-27T10:33:47.614Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-27T10:33:47.614Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-27T10:33:47.614Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:33:47.615Z] [LOG] 
   📊 Full Period Working Days for R. D.A Kaushalya null (EMP000044):
[2025-10-27T10:33:47.615Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:48.250Z] [LOG] 
   📊 Working Days for Expected Calculation for R. D.A Kaushalya null (EMP000044):
[2025-10-27T10:33:48.251Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:33:48.252Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:48.458Z] [LOG] 
   ⏰ Calculating Completed Hours for R. D.A Kaushalya null (EMP000044) - All completed sessions:
[2025-10-27T10:33:48.461Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:33:48.461Z] [LOG]       Total completed sessions found: 19
[2025-10-27T10:33:48.462Z] [LOG] 
      📋 Attendance Breakdown for R. D.A Kaushalya null (EMP000044):
[2025-10-27T10:33:48.462Z] [LOG]          1. 2025-10-01 (Weekday): 8.28h
[2025-10-27T10:33:48.462Z] [LOG]          2. 2025-10-02 (Weekday): 8.40h
[2025-10-27T10:33:48.462Z] [LOG]          3. 2025-10-03 (Weekday): 8.50h
[2025-10-27T10:33:48.463Z] [LOG]          4. 2025-10-04 (Saturday): 4.50h
[2025-10-27T10:33:48.463Z] [LOG]          5. 2025-10-07 (Weekday): 8.41h
[2025-10-27T10:33:48.463Z] [LOG]          6. 2025-10-08 (Weekday): 8.50h
[2025-10-27T10:33:48.463Z] [LOG]          7. 2025-10-10 (Weekday): 8.50h
[2025-10-27T10:33:48.463Z] [LOG]          8. 2025-10-11 (Saturday): 4.50h
[2025-10-27T10:33:48.464Z] [LOG]          9. 2025-10-13 (Weekday): 8.46h
[2025-10-27T10:33:48.464Z] [LOG]          10. 2025-10-14 (Weekday): 0.00h
[2025-10-27T10:33:48.464Z] [LOG]          11. 2025-10-15 (Weekday): 0.00h
[2025-10-27T10:33:48.464Z] [LOG]          12. 2025-10-17 (Weekday): 8.50h
[2025-10-27T10:33:48.464Z] [LOG]          13. 2025-10-18 (Saturday): 4.50h
[2025-10-27T10:33:48.464Z] [LOG]          14. 2025-10-20 (Weekday): 8.50h
[2025-10-27T10:33:48.465Z] [LOG]          15. 2025-10-21 (Weekday): 8.50h
[2025-10-27T10:33:48.465Z] [LOG]          16. 2025-10-22 (Weekday): 7.60h
[2025-10-27T10:33:48.465Z] [LOG]          17. 2025-10-23 (Weekday): 8.50h
[2025-10-27T10:33:48.465Z] [LOG]          18. 2025-10-24 (Weekday): 8.50h
[2025-10-27T10:33:48.465Z] [LOG]          19. 2025-10-25 (Saturday): 0.00h
[2025-10-27T10:33:48.681Z] [LOG] 
      📊 Aggregated Totals for R. D.A Kaushalya null (EMP000044):
[2025-10-27T10:33:48.681Z] [LOG]          Weekday: 109.15h
[2025-10-27T10:33:48.681Z] [LOG]          Saturday: 13.50h
[2025-10-27T10:33:48.681Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:33:48.682Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:33:48.682Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for R. D.A Kaushalya null (EMP000044) - completed sessions only:
[2025-10-27T10:33:48.682Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:33:48.682Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:33:48.683Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:48.683Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:33:48.683Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for R. D.A Kaushalya null (EMP000044) - completed sessions only:
[2025-10-27T10:33:48.683Z] [LOG]       Weekday: 109.15h
[2025-10-27T10:33:48.683Z] [LOG]       Saturday: 13.50h
[2025-10-27T10:33:48.684Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:48.684Z] [LOG]       Total Actual: 122.65h
[2025-10-27T10:33:48.684Z] [LOG] 
   💵 EXPECTED Earned Salary for R. D.A Kaushalya null (EMP000044) - until NOW:
[2025-10-27T10:33:48.684Z] [LOG]       Weekday: 153.00h × Rs.226.24 = Rs.34614.72
[2025-10-27T10:33:48.685Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-27T10:33:48.685Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:48.685Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:48.685Z] [LOG]       Total Expected Earned: Rs.42307.02
[2025-10-27T10:33:48.685Z] [LOG] 
   💵 ACTUAL Earned Salary for R. D.A Kaushalya null (EMP000044) - including live session:
[2025-10-27T10:33:48.686Z] [LOG]       Weekday: 109.15h × Rs.226.24 = Rs.24694.10
[2025-10-27T10:33:48.686Z] [LOG]       Saturday: 13.50h × Rs.427.35 = Rs.5769.23
[2025-10-27T10:33:48.686Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:48.687Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:48.687Z] [LOG]       Total Actual Earned: Rs.30463.32
[2025-10-27T10:33:48.687Z] [LOG] 
   📊 FINAL CALCULATION for R. D.A Kaushalya null (EMP000044):
[2025-10-27T10:33:48.688Z] [LOG]       Calculated At: Oct 27, 2025, 16:03:48
[2025-10-27T10:33:48.688Z] [LOG]       Expected Earned: Rs.42307.02
[2025-10-27T10:33:48.688Z] [LOG]       Actual Earned: Rs.30463.32
[2025-10-27T10:33:48.688Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:48.689Z] [LOG]       Attendance Deduction: Rs.11843.70
[2025-10-27T10:33:48.689Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:33:48.689Z] [LOG]       📉 Shortfall for R. D.A Kaushalya null: 48.35 hours (27.99% of expected)
[2025-10-27T10:33:48.689Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:33:48.690Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:33:48.690Z] [LOG]    Actual Earned Base: Rs.30463.32
[2025-10-27T10:33:48.690Z] [LOG]    Attendance Shortfall: Rs.11843.70
[2025-10-27T10:33:48.690Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:33:48.692Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:33:48.692Z] [LOG]    Gross Salary: 30463.321000000004
[2025-10-27T10:33:48.692Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:33:48.692Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:33:48.693Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:48.693Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:33:48.693Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:48.693Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:33:48.694Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:48.694Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:33:48.694Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:48.694Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:33:48.695Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:48.695Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:33:48.695Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:48.695Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:33:48.695Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:48.695Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:33:48.696Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:48.696Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:33:48.696Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:48.696Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:33:48.696Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:48.696Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:33:48.697Z] [LOG]    EPF/ETF calculated on: Rs.30463.32
[2025-10-27T10:33:48.697Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:33:48.697Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:33:48.697Z] [LOG] 💰 GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-27T10:33:48.697Z] [LOG]    Base Salary: 50000
[2025-10-27T10:33:48.698Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:33:48.698Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:33:48.698Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:48.698Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:33:48.698Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:48.698Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:33:48.699Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:48.914Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:33:48.915Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:48.915Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:33:48.915Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:33:48.916Z] [LOG]    Actual Earned Base: Rs.30463.32
[2025-10-27T10:33:48.916Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:33:48.916Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:33:48.917Z] [LOG]    = Gross Salary: Rs.30463.32
[2025-10-27T10:33:48.917Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:33:48.917Z] [LOG]    Attendance Shortfall (Info): Rs.11843.70
[2025-10-27T10:33:48.917Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:33:48.918Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:48.918Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:33:48.918Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:33:48.918Z] [LOG]    Gross Salary: Rs.30463.32
[2025-10-27T10:33:48.918Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:33:48.919Z] [LOG]    = NET SALARY: Rs.30463.32
[2025-10-27T10:33:48.919Z] [LOG] 
💾 Database Update:
[2025-10-27T10:33:48.919Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:33:48.919Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:33:49.131Z] [LOG] 
📝 Components to save:
[2025-10-27T10:33:49.131Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:33:49.131Z] [LOG]    Deduction components: 1
[2025-10-27T10:33:49.131Z] [LOG] Creating components for record 5dea361d-7688-4e3b-89b6-257f9a987d1e: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:33:49.133Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 30463.321000000004
}
[2025-10-27T10:33:49.352Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:33:49.562Z] [LOG] Created payroll_record_component: ab6a9b04-2b13-49a6-ad1c-0d6f7ad07e3e for Base Salary
[2025-10-27T10:33:49.563Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 11843.699
}
[2025-10-27T10:33:49.778Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:33:49.995Z] [LOG] Created payroll_record_component: 35a68fbc-90f2-4a9c-8369-a53be641808d for Attendance Shortfall (Info)
[2025-10-27T10:33:50.422Z] [LOG] ✅ Financial balances updated successfully for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:50.423Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:33:50.423Z] [LOG] 
======================================================================
[2025-10-27T10:33:50.423Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: R. D.A Kaushalya null
[2025-10-27T10:33:50.424Z] [LOG] ======================================================================
[2025-10-27T10:33:50.425Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:33:50.426Z] [LOG]    Actual Earned Base (Attendance-based): Rs.30463.32
[2025-10-27T10:33:50.426Z] [LOG]    Attendance Shortfall: Rs.11843.70
[2025-10-27T10:33:50.426Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:50.426Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:50.426Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:33:50.427Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:50.427Z] [LOG]    GROSS SALARY: Rs.30463.32
[2025-10-27T10:33:50.427Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:50.427Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:33:50.429Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:33:50.429Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:33:50.430Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:33:50.430Z] [LOG]       - Attendance Shortfall (Info): Rs.11843.70
[2025-10-27T10:33:50.431Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:50.431Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:50.431Z] [LOG]    NET SALARY: Rs.30463.32
[2025-10-27T10:33:50.432Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:33:50.432Z] [LOG] ======================================================================

[2025-10-27T10:33:50.432Z] [LOG] ✅ R. D.A Kaushalya null: Calculation completed successfully
[2025-10-27T10:33:50.432Z] [LOG] 📊 Progress: 16/34 (47.1%)
[2025-10-27T10:33:50.433Z] [LOG] 
🧮 Processing: Uthpala null (EMP000006)
[2025-10-27T10:33:50.434Z] [LOG] 📋 Record ID: 60fd7ba8-8ac8-4d5c-93b4-125b41f8a079
[2025-10-27T10:33:50.434Z] [LOG] 
======================================================================
[2025-10-27T10:33:50.434Z] [LOG] 🧮 CALCULATING PAYROLL: Uthpala null (EMP000006)
[2025-10-27T10:33:50.434Z] [LOG] ======================================================================
[2025-10-27T10:33:51.275Z] [LOG] 🔍 Component filtering for employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-27T10:33:51.275Z] [LOG]    Total components: 13
[2025-10-27T10:33:51.275Z] [LOG]    Applicable components: 13
[2025-10-27T10:33:51.276Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-27T10:33:52.127Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:33:52.128Z] [LOG] 🔄 Processing financial records for employee 0143a539-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:33:52.342Z] [LOG] 📊 Found 0 active loans for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:52.556Z] [LOG] 📊 Found 0 active advances for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:52.790Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:52.793Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:33:52.794Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:33:53.224Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:33:53.225Z] [LOG]    👤 Employee: Uthpala null (EMP000006)
[2025-10-27T10:33:53.226Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:33:53.226Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:33:53.226Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-27T10:33:53.226Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:33:53.448Z] [LOG] 
   💵 Pre-calculated Rates for Uthpala null (EMP000006):
[2025-10-27T10:33:53.449Z] [LOG]       Daily Salary: Rs.3846.15
[2025-10-27T10:33:53.450Z] [LOG]       Weekday Hourly Rate: Rs.480.77
[2025-10-27T10:33:53.451Z] [LOG]       Saturday Hourly Rate: Rs.854.70
[2025-10-27T10:33:53.451Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:33:53.452Z] [LOG] 
   📊 Full Period Working Days for Uthpala null (EMP000006):
[2025-10-27T10:33:53.453Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:54.099Z] [LOG] 
   📊 Working Days for Expected Calculation for Uthpala null (EMP000006):
[2025-10-27T10:33:54.099Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:33:54.099Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:33:54.625Z] [LOG] 
   ⏰ Calculating Completed Hours for Uthpala null (EMP000006) - All completed sessions:
[2025-10-27T10:33:54.626Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:33:54.626Z] [LOG]       Total completed sessions found: 15
[2025-10-27T10:33:54.627Z] [LOG] 
      📋 Attendance Breakdown for Uthpala null (EMP000006):
[2025-10-27T10:33:54.628Z] [LOG]          1. 2025-10-01 (Weekday): 7.33h
[2025-10-27T10:33:54.628Z] [LOG]          2. 2025-10-02 (Weekday): 6.50h
[2025-10-27T10:33:54.628Z] [LOG]          3. 2025-10-03 (Weekday): 6.50h
[2025-10-27T10:33:54.629Z] [LOG]          4. 2025-10-04 (Saturday): 2.41h
[2025-10-27T10:33:54.629Z] [LOG]          5. 2025-10-07 (Weekday): 4.50h
[2025-10-27T10:33:54.630Z] [LOG]          6. 2025-10-08 (Weekday): 6.00h
[2025-10-27T10:33:54.630Z] [LOG]          7. 2025-10-09 (Weekday): 7.00h
[2025-10-27T10:33:54.630Z] [LOG]          8. 2025-10-10 (Weekday): 6.54h
[2025-10-27T10:33:54.631Z] [LOG]          9. 2025-10-11 (Saturday): 2.42h
[2025-10-27T10:33:54.631Z] [LOG]          10. 2025-10-13 (Weekday): 7.00h
[2025-10-27T10:33:54.631Z] [LOG]          11. 2025-10-14 (Weekday): 7.50h
[2025-10-27T10:33:54.632Z] [LOG]          12. 2025-10-15 (Weekday): 6.08h
[2025-10-27T10:33:54.632Z] [LOG]          13. 2025-10-16 (Weekday): 5.91h
[2025-10-27T10:33:54.633Z] [LOG]          14. 2025-10-17 (Weekday): 7.48h
[2025-10-27T10:33:54.633Z] [LOG]          15. 2025-10-18 (Saturday): 3.36h
[2025-10-27T10:33:54.855Z] [LOG] 
      📊 Aggregated Totals for Uthpala null (EMP000006):
[2025-10-27T10:33:54.856Z] [LOG]          Weekday: 78.34h
[2025-10-27T10:33:54.856Z] [LOG]          Saturday: 8.19h
[2025-10-27T10:33:54.857Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:33:54.858Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:33:54.859Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Uthpala null (EMP000006) - completed sessions only:
[2025-10-27T10:33:54.860Z] [LOG]       Weekday: 144.00h
[2025-10-27T10:33:54.861Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:33:54.862Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:54.863Z] [LOG]       Total Expected: 162.00h
[2025-10-27T10:33:54.864Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Uthpala null (EMP000006) - completed sessions only:
[2025-10-27T10:33:54.864Z] [LOG]       Weekday: 78.34h
[2025-10-27T10:33:54.865Z] [LOG]       Saturday: 8.19h
[2025-10-27T10:33:54.865Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:33:54.866Z] [LOG]       Total Actual: 86.53h
[2025-10-27T10:33:54.867Z] [LOG] 
   💵 EXPECTED Earned Salary for Uthpala null (EMP000006) - until NOW:
[2025-10-27T10:33:54.867Z] [LOG]       Weekday: 144.00h × Rs.480.77 = Rs.69230.88
[2025-10-27T10:33:54.869Z] [LOG]       Saturday: 18.00h × Rs.854.70 = Rs.15384.60
[2025-10-27T10:33:54.869Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:54.870Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:54.871Z] [LOG]       Total Expected Earned: Rs.84615.48
[2025-10-27T10:33:54.871Z] [LOG] 
   💵 ACTUAL Earned Salary for Uthpala null (EMP000006) - including live session:
[2025-10-27T10:33:54.872Z] [LOG]       Weekday: 78.34h × Rs.480.77 = Rs.37663.52
[2025-10-27T10:33:54.872Z] [LOG]       Saturday: 8.19h × Rs.854.70 = Rs.6999.99
[2025-10-27T10:33:54.872Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:33:54.873Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:54.873Z] [LOG]       Total Actual Earned: Rs.44663.51
[2025-10-27T10:33:54.873Z] [LOG] 
   📊 FINAL CALCULATION for Uthpala null (EMP000006):
[2025-10-27T10:33:54.874Z] [LOG]       Calculated At: Oct 27, 2025, 16:03:54
[2025-10-27T10:33:54.875Z] [LOG]       Expected Earned: Rs.84615.48
[2025-10-27T10:33:54.876Z] [LOG]       Actual Earned: Rs.44663.51
[2025-10-27T10:33:54.876Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:33:54.876Z] [LOG]       Attendance Deduction: Rs.39951.97
[2025-10-27T10:33:54.876Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:33:54.877Z] [LOG]       📉 Shortfall for Uthpala null: 75.47 hours (47.22% of expected)
[2025-10-27T10:33:54.877Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:33:54.878Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-27T10:33:54.878Z] [LOG]    Actual Earned Base: Rs.44663.51
[2025-10-27T10:33:54.879Z] [LOG]    Attendance Shortfall: Rs.39951.97
[2025-10-27T10:33:54.879Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:33:54.879Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:33:54.880Z] [LOG]    Gross Salary: 44663.514800000004
[2025-10-27T10:33:54.880Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:33:54.880Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:33:54.880Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:54.881Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:33:54.881Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:54.881Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:33:54.882Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:54.882Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:33:54.882Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:54.882Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:33:54.883Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:54.883Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:33:54.883Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:54.883Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:33:54.884Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:54.884Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:33:54.884Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:54.884Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:33:54.885Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:54.885Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:33:54.885Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:54.885Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:33:54.886Z] [LOG]    EPF/ETF calculated on: Rs.44663.51
[2025-10-27T10:33:54.886Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:33:54.886Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:33:54.886Z] [LOG] 💰 GROSS CALCULATION for Uthpala null:
[2025-10-27T10:33:54.886Z] [LOG]    Base Salary: 100000
[2025-10-27T10:33:54.887Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:33:54.887Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:33:54.887Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:54.887Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:33:54.888Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:54.888Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:33:54.888Z] [LOG]    Fixed amount: 0
[2025-10-27T10:33:55.106Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:33:55.106Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:55.106Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:33:55.107Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:33:55.107Z] [LOG]    Actual Earned Base: Rs.44663.51
[2025-10-27T10:33:55.107Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:33:55.108Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:33:55.109Z] [LOG]    = Gross Salary: Rs.44663.51
[2025-10-27T10:33:55.109Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:33:55.110Z] [LOG]    Attendance Shortfall (Info): Rs.39951.97
[2025-10-27T10:33:55.110Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:33:55.110Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:55.111Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:33:55.111Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:33:55.111Z] [LOG]    Gross Salary: Rs.44663.51
[2025-10-27T10:33:55.111Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:33:55.112Z] [LOG]    = NET SALARY: Rs.44663.51
[2025-10-27T10:33:55.112Z] [LOG] 
💾 Database Update:
[2025-10-27T10:33:55.112Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:33:55.112Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:33:55.327Z] [LOG] 
📝 Components to save:
[2025-10-27T10:33:55.328Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:33:55.329Z] [LOG]    Deduction components: 1
[2025-10-27T10:33:55.330Z] [LOG] Creating components for record 60fd7ba8-8ac8-4d5c-93b4-125b41f8a079: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:33:55.331Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 44663.514800000004
}
[2025-10-27T10:33:55.559Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:33:55.770Z] [LOG] Created payroll_record_component: 28116a53-eab5-400b-8845-636a7cc6c4d9 for Base Salary
[2025-10-27T10:33:55.771Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 39951.965200000006
}
[2025-10-27T10:33:56.008Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:33:56.226Z] [LOG] Created payroll_record_component: 4b554df5-c32b-4703-a5f9-b63c92202eae for Attendance Shortfall (Info)
[2025-10-27T10:33:56.681Z] [LOG] ✅ Financial balances updated successfully for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:56.681Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:33:56.681Z] [LOG] 
======================================================================
[2025-10-27T10:33:56.682Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Uthpala null
[2025-10-27T10:33:56.682Z] [LOG] ======================================================================
[2025-10-27T10:33:56.682Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-27T10:33:56.682Z] [LOG]    Actual Earned Base (Attendance-based): Rs.44663.51
[2025-10-27T10:33:56.683Z] [LOG]    Attendance Shortfall: Rs.39951.97
[2025-10-27T10:33:56.683Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:56.683Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:33:56.683Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:33:56.684Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:56.684Z] [LOG]    GROSS SALARY: Rs.44663.51
[2025-10-27T10:33:56.684Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:56.684Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:33:56.684Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:33:56.685Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:33:56.685Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:33:56.685Z] [LOG]       - Attendance Shortfall (Info): Rs.39951.97
[2025-10-27T10:33:56.685Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:33:56.685Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:33:56.685Z] [LOG]    NET SALARY: Rs.44663.51
[2025-10-27T10:33:56.686Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:33:56.686Z] [LOG] ======================================================================

[2025-10-27T10:33:56.686Z] [LOG] ✅ Uthpala null: Calculation completed successfully
[2025-10-27T10:33:56.686Z] [LOG] 📊 Progress: 17/34 (50.0%)
[2025-10-27T10:33:56.686Z] [LOG] 
🧮 Processing: Office Team null (EMP000041)
[2025-10-27T10:33:56.687Z] [LOG] 📋 Record ID: 65efe0be-1351-4b00-a118-e404a3cbbc97
[2025-10-27T10:33:56.687Z] [LOG] 
======================================================================
[2025-10-27T10:33:56.687Z] [LOG] 🧮 CALCULATING PAYROLL: Office Team null (EMP000041)
[2025-10-27T10:33:56.687Z] [LOG] ======================================================================
[2025-10-27T10:33:57.544Z] [LOG] 🔍 Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-27T10:33:57.545Z] [LOG]    Total components: 13
[2025-10-27T10:33:57.546Z] [LOG]    Applicable components: 13
[2025-10-27T10:33:57.547Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-27T10:33:58.430Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:33:58.430Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:33:58.660Z] [LOG] 📊 Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:58.884Z] [LOG] 📊 Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:59.119Z] [LOG] 📊 Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-27T10:33:59.119Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:33:59.120Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:33:59.556Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:33:59.556Z] [LOG]    👤 Employee: Office Team null (EMP000041)
[2025-10-27T10:33:59.557Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:33:59.558Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:33:59.558Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-27T10:33:59.558Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:33:59.797Z] [LOG] 
   💵 Pre-calculated Rates for Office Team null (EMP000041):
[2025-10-27T10:33:59.797Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-27T10:33:59.798Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-27T10:33:59.798Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-27T10:33:59.798Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:33:59.798Z] [LOG] 
   📊 Full Period Working Days for Office Team null (EMP000041):
[2025-10-27T10:33:59.798Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:00.445Z] [LOG] 
   📊 Working Days for Expected Calculation for Office Team null (EMP000041):
[2025-10-27T10:34:00.445Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:34:00.446Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:00.678Z] [LOG] 
   ⏰ Calculating Completed Hours for Office Team null (EMP000041) - All completed sessions:
[2025-10-27T10:34:00.678Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:34:00.678Z] [LOG]       Total completed sessions found: 0
[2025-10-27T10:34:00.893Z] [LOG] 
      📊 Aggregated Totals for Office Team null (EMP000041):
[2025-10-27T10:34:00.894Z] [LOG]          Weekday: 0.00h
[2025-10-27T10:34:00.894Z] [LOG]          Saturday: 0.00h
[2025-10-27T10:34:00.894Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:34:00.894Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:34:00.894Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Office Team null (EMP000041) - completed sessions only:
[2025-10-27T10:34:00.895Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:34:00.895Z] [LOG]       Saturday: 34.00h
[2025-10-27T10:34:00.895Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:00.895Z] [LOG]       Total Expected: 187.00h
[2025-10-27T10:34:00.896Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Office Team null (EMP000041) - completed sessions only:
[2025-10-27T10:34:00.896Z] [LOG]       Weekday: 0.00h
[2025-10-27T10:34:00.896Z] [LOG]       Saturday: 0.00h
[2025-10-27T10:34:00.896Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:00.896Z] [LOG]       Total Actual: 0.00h
[2025-10-27T10:34:00.897Z] [LOG] 
   💵 EXPECTED Earned Salary for Office Team null (EMP000041) - until NOW:
[2025-10-27T10:34:00.897Z] [LOG]       Weekday: 153.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:00.897Z] [LOG]       Saturday: 34.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:00.897Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:00.897Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:00.898Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-27T10:34:00.898Z] [LOG] 
   💵 ACTUAL Earned Salary for Office Team null (EMP000041) - including live session:
[2025-10-27T10:34:00.898Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:00.899Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:00.899Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:00.899Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:00.899Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-27T10:34:00.900Z] [LOG] 
   📊 FINAL CALCULATION for Office Team null (EMP000041):
[2025-10-27T10:34:00.900Z] [LOG]       Calculated At: Oct 27, 2025, 16:04:00
[2025-10-27T10:34:00.900Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-27T10:34:00.900Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-27T10:34:00.901Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:00.901Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-27T10:34:00.901Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:34:00.901Z] [LOG]       ✅ No deduction - Office Team null worked all expected hours!
[2025-10-27T10:34:00.901Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:34:00.902Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-27T10:34:00.902Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:34:00.902Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-27T10:34:00.902Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:34:00.903Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:34:00.903Z] [LOG]    Gross Salary: 0
[2025-10-27T10:34:00.903Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:34:00.903Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:34:00.904Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:00.904Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:34:00.904Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:00.904Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:34:00.905Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:00.905Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:34:00.905Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:00.905Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:34:00.905Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:00.906Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:34:00.906Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:00.906Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:34:00.906Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:00.906Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:34:00.907Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:00.908Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:34:00.908Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:00.908Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:34:00.909Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:00.909Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:34:00.909Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-27T10:34:00.909Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:34:00.909Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:34:00.910Z] [LOG] 💰 GROSS CALCULATION for Office Team null:
[2025-10-27T10:34:00.910Z] [LOG]    Base Salary: 1
[2025-10-27T10:34:00.910Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:34:00.910Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:34:00.910Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:00.910Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:34:00.910Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:00.911Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:34:00.911Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:01.134Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:34:01.134Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:01.134Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:34:01.134Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:34:01.135Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:34:01.135Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:34:01.135Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:34:01.136Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-27T10:34:01.136Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:34:01.136Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:34:01.136Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:01.137Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:34:01.137Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:34:01.137Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-27T10:34:01.138Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:34:01.138Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-27T10:34:01.138Z] [LOG] 
💾 Database Update:
[2025-10-27T10:34:01.138Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:34:01.138Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:34:01.357Z] [LOG] 
📝 Components to save:
[2025-10-27T10:34:01.358Z] [LOG]    Gross/Earnings components: 0
[2025-10-27T10:34:01.358Z] [LOG]    Deduction components: 0
[2025-10-27T10:34:01.358Z] [LOG] Creating components for record 65efe0be-1351-4b00-a118-e404a3cbbc97: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-27T10:34:01.805Z] [LOG] ✅ Financial balances updated successfully for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:01.806Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:34:01.806Z] [LOG] 
======================================================================
[2025-10-27T10:34:01.811Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Office Team null
[2025-10-27T10:34:01.811Z] [LOG] ======================================================================
[2025-10-27T10:34:01.812Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-27T10:34:01.813Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-27T10:34:01.813Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-27T10:34:01.814Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:01.814Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:01.814Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:34:01.815Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:01.815Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-27T10:34:01.815Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:01.816Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:34:01.816Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:34:01.816Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:34:01.817Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:34:01.817Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-27T10:34:01.817Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:01.818Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:01.818Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-27T10:34:01.818Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:34:01.819Z] [LOG] ======================================================================

[2025-10-27T10:34:01.819Z] [LOG] ✅ Office Team null: Calculation completed successfully
[2025-10-27T10:34:01.820Z] [LOG] 📊 Progress: 18/34 (52.9%)
[2025-10-27T10:34:01.820Z] [LOG] 
🧮 Processing: Safna Nawas null (EMP000021)
[2025-10-27T10:34:01.820Z] [LOG] 📋 Record ID: 877133fc-59f0-49b1-8341-c5e5d5a7a71a
[2025-10-27T10:34:01.821Z] [LOG] 
======================================================================
[2025-10-27T10:34:01.821Z] [LOG] 🧮 CALCULATING PAYROLL: Safna Nawas null (EMP000021)
[2025-10-27T10:34:01.822Z] [LOG] ======================================================================
[2025-10-27T10:34:02.733Z] [LOG] 🔍 Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-27T10:34:02.734Z] [LOG]    Total components: 13
[2025-10-27T10:34:02.734Z] [LOG]    Applicable components: 13
[2025-10-27T10:34:02.734Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T10:34:03.635Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:34:03.636Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:34:03.853Z] [LOG] 📊 Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:04.072Z] [LOG] 📊 Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:04.285Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:04.286Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:34:04.287Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:34:04.745Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:34:04.745Z] [LOG]    👤 Employee: Safna Nawas null (EMP000021)
[2025-10-27T10:34:04.745Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:34:04.746Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:34:04.746Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T10:34:04.747Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:34:04.968Z] [LOG] 
   💵 Pre-calculated Rates for Safna Nawas null (EMP000021):
[2025-10-27T10:34:04.969Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-27T10:34:04.970Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-27T10:34:04.970Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-27T10:34:04.971Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:34:04.971Z] [LOG] 
   📊 Full Period Working Days for Safna Nawas null (EMP000021):
[2025-10-27T10:34:04.972Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:05.660Z] [LOG] 
   📊 Working Days for Expected Calculation for Safna Nawas null (EMP000021):
[2025-10-27T10:34:05.661Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:34:05.662Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:05.896Z] [LOG] 
   ⏰ Calculating Completed Hours for Safna Nawas null (EMP000021) - All completed sessions:
[2025-10-27T10:34:05.897Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:34:05.897Z] [LOG]       Total completed sessions found: 16
[2025-10-27T10:34:05.897Z] [LOG] 
      📋 Attendance Breakdown for Safna Nawas null (EMP000021):
[2025-10-27T10:34:05.898Z] [LOG]          1. 2025-10-01 (Weekday): 7.50h
[2025-10-27T10:34:05.898Z] [LOG]          2. 2025-10-02 (Weekday): 7.42h
[2025-10-27T10:34:05.898Z] [LOG]          3. 2025-10-03 (Weekday): 8.25h
[2025-10-27T10:34:05.898Z] [LOG]          4. 2025-10-04 (Saturday): 3.33h
[2025-10-27T10:34:05.898Z] [LOG]          5. 2025-10-07 (Weekday): 7.98h
[2025-10-27T10:34:05.899Z] [LOG]          6. 2025-10-08 (Weekday): 7.80h
[2025-10-27T10:34:05.899Z] [LOG]          7. 2025-10-09 (Weekday): 8.43h
[2025-10-27T10:34:05.899Z] [LOG]          8. 2025-10-10 (Weekday): 8.50h
[2025-10-27T10:34:05.899Z] [LOG]          9. 2025-10-11 (Saturday): 3.46h
[2025-10-27T10:34:05.899Z] [LOG]          10. 2025-10-13 (Weekday): 7.50h
[2025-10-27T10:34:05.899Z] [LOG]          11. 2025-10-14 (Weekday): 8.50h
[2025-10-27T10:34:05.900Z] [LOG]          12. 2025-10-15 (Weekday): 7.83h
[2025-10-27T10:34:05.900Z] [LOG]          13. 2025-10-16 (Weekday): 8.00h
[2025-10-27T10:34:05.900Z] [LOG]          14. 2025-10-17 (Weekday): 6.50h
[2025-10-27T10:34:05.900Z] [LOG]          15. 2025-10-18 (Saturday): 4.28h
[2025-10-27T10:34:05.901Z] [LOG]          16. 2025-10-25 (Saturday): 0.00h
[2025-10-27T10:34:06.125Z] [LOG] 
      📊 Aggregated Totals for Safna Nawas null (EMP000021):
[2025-10-27T10:34:06.126Z] [LOG]          Weekday: 94.21h
[2025-10-27T10:34:06.127Z] [LOG]          Saturday: 11.07h
[2025-10-27T10:34:06.127Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:34:06.128Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:34:06.128Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Safna Nawas null (EMP000021) - completed sessions only:
[2025-10-27T10:34:06.129Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:34:06.130Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:34:06.130Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:06.131Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:34:06.131Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Safna Nawas null (EMP000021) - completed sessions only:
[2025-10-27T10:34:06.133Z] [LOG]       Weekday: 94.21h
[2025-10-27T10:34:06.134Z] [LOG]       Saturday: 11.07h
[2025-10-27T10:34:06.134Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:06.135Z] [LOG]       Total Actual: 105.28h
[2025-10-27T10:34:06.135Z] [LOG] 
   💵 EXPECTED Earned Salary for Safna Nawas null (EMP000021) - until NOW:
[2025-10-27T10:34:06.136Z] [LOG]       Weekday: 153.00h × Rs.226.24 = Rs.34614.72
[2025-10-27T10:34:06.137Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-27T10:34:06.137Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:06.138Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:06.139Z] [LOG]       Total Expected Earned: Rs.42307.02
[2025-10-27T10:34:06.139Z] [LOG] 
   💵 ACTUAL Earned Salary for Safna Nawas null (EMP000021) - including live session:
[2025-10-27T10:34:06.140Z] [LOG]       Weekday: 94.21h × Rs.226.24 = Rs.21314.07
[2025-10-27T10:34:06.142Z] [LOG]       Saturday: 11.07h × Rs.427.35 = Rs.4730.76
[2025-10-27T10:34:06.143Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:06.144Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:06.144Z] [LOG]       Total Actual Earned: Rs.26044.83
[2025-10-27T10:34:06.145Z] [LOG] 
   📊 FINAL CALCULATION for Safna Nawas null (EMP000021):
[2025-10-27T10:34:06.146Z] [LOG]       Calculated At: Oct 27, 2025, 16:04:06
[2025-10-27T10:34:06.147Z] [LOG]       Expected Earned: Rs.42307.02
[2025-10-27T10:34:06.147Z] [LOG]       Actual Earned: Rs.26044.83
[2025-10-27T10:34:06.148Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:06.148Z] [LOG]       Attendance Deduction: Rs.16262.19
[2025-10-27T10:34:06.149Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:34:06.149Z] [LOG]       📉 Shortfall for Safna Nawas null: 65.72 hours (38.44% of expected)
[2025-10-27T10:34:06.150Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:34:06.151Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:34:06.151Z] [LOG]    Actual Earned Base: Rs.26044.83
[2025-10-27T10:34:06.151Z] [LOG]    Attendance Shortfall: Rs.16262.19
[2025-10-27T10:34:06.152Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:34:06.152Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:34:06.152Z] [LOG]    Gross Salary: 26044.8349
[2025-10-27T10:34:06.153Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:34:06.153Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:34:06.153Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:06.154Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:34:06.154Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:06.154Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:34:06.155Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:06.155Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:34:06.155Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:06.155Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:34:06.156Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:06.156Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:34:06.156Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:06.157Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:34:06.158Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:06.158Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:34:06.159Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:06.159Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:34:06.159Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:06.160Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:34:06.160Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:06.160Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:34:06.161Z] [LOG]    EPF/ETF calculated on: Rs.26044.83
[2025-10-27T10:34:06.161Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:34:06.161Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:34:06.162Z] [LOG] 💰 GROSS CALCULATION for Safna Nawas null:
[2025-10-27T10:34:06.162Z] [LOG]    Base Salary: 50000
[2025-10-27T10:34:06.162Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:34:06.163Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:34:06.163Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:06.163Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:34:06.163Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:06.164Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:34:06.164Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:06.388Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:34:06.389Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:06.390Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:34:06.392Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:34:06.393Z] [LOG]    Actual Earned Base: Rs.26044.83
[2025-10-27T10:34:06.393Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:34:06.394Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:34:06.394Z] [LOG]    = Gross Salary: Rs.26044.83
[2025-10-27T10:34:06.395Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:34:06.396Z] [LOG]    Attendance Shortfall (Info): Rs.16262.19
[2025-10-27T10:34:06.397Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:34:06.398Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:06.398Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:34:06.399Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:34:06.399Z] [LOG]    Gross Salary: Rs.26044.83
[2025-10-27T10:34:06.400Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:34:06.401Z] [LOG]    = NET SALARY: Rs.26044.83
[2025-10-27T10:34:06.401Z] [LOG] 
💾 Database Update:
[2025-10-27T10:34:06.402Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:34:06.403Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:34:06.627Z] [LOG] 
📝 Components to save:
[2025-10-27T10:34:06.627Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:34:06.627Z] [LOG]    Deduction components: 1
[2025-10-27T10:34:06.628Z] [LOG] Creating components for record 877133fc-59f0-49b1-8341-c5e5d5a7a71a: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:34:06.629Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 26044.8349
}
[2025-10-27T10:34:06.846Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:34:07.076Z] [LOG] Created payroll_record_component: 8d9dd2c4-40a5-4775-92a9-69922e3a8ba4 for Base Salary
[2025-10-27T10:34:07.076Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 16262.185100000002
}
[2025-10-27T10:34:07.304Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:34:07.545Z] [LOG] Created payroll_record_component: d20dc3a5-e676-4bd0-aaba-cadb68999ba8 for Attendance Shortfall (Info)
[2025-10-27T10:34:07.993Z] [LOG] ✅ Financial balances updated successfully for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:07.993Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:34:07.993Z] [LOG] 
======================================================================
[2025-10-27T10:34:07.993Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Safna Nawas null
[2025-10-27T10:34:07.994Z] [LOG] ======================================================================
[2025-10-27T10:34:07.994Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:34:07.994Z] [LOG]    Actual Earned Base (Attendance-based): Rs.26044.83
[2025-10-27T10:34:07.994Z] [LOG]    Attendance Shortfall: Rs.16262.19
[2025-10-27T10:34:07.995Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:07.995Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:07.995Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:34:07.995Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:07.996Z] [LOG]    GROSS SALARY: Rs.26044.83
[2025-10-27T10:34:07.996Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:07.996Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:34:07.996Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:34:07.997Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:34:07.997Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:34:07.997Z] [LOG]       - Attendance Shortfall (Info): Rs.16262.19
[2025-10-27T10:34:07.998Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:07.998Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:07.998Z] [LOG]    NET SALARY: Rs.26044.83
[2025-10-27T10:34:07.998Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:34:07.999Z] [LOG] ======================================================================

[2025-10-27T10:34:07.999Z] [LOG] ✅ Safna Nawas null: Calculation completed successfully
[2025-10-27T10:34:07.999Z] [LOG] 📊 Progress: 19/34 (55.9%)
[2025-10-27T10:34:08.000Z] [LOG] 
🧮 Processing: Sumaiya null (EMP000016)
[2025-10-27T10:34:08.000Z] [LOG] 📋 Record ID: 898201c9-62a0-429b-8df8-801e25884ccc
[2025-10-27T10:34:08.000Z] [LOG] 
======================================================================
[2025-10-27T10:34:08.000Z] [LOG] 🧮 CALCULATING PAYROLL: Sumaiya null (EMP000016)
[2025-10-27T10:34:08.001Z] [LOG] ======================================================================
[2025-10-27T10:34:08.910Z] [LOG] 🔍 Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-27T10:34:08.910Z] [LOG]    Total components: 13
[2025-10-27T10:34:08.910Z] [LOG]    Applicable components: 13
[2025-10-27T10:34:08.911Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T10:34:09.796Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:34:09.797Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:34:10.014Z] [LOG] 📊 Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:10.234Z] [LOG] 📊 Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:10.457Z] [LOG] 📊 Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:10.458Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:34:10.458Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:34:10.917Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:34:10.918Z] [LOG]    👤 Employee: Sumaiya null (EMP000016)
[2025-10-27T10:34:10.918Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:34:10.918Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:34:10.918Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-27T10:34:10.918Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:34:11.134Z] [LOG] 
   💵 Pre-calculated Rates for Sumaiya null (EMP000016):
[2025-10-27T10:34:11.135Z] [LOG]       Daily Salary: Rs.2307.69
[2025-10-27T10:34:11.135Z] [LOG]       Weekday Hourly Rate: Rs.271.49
[2025-10-27T10:34:11.135Z] [LOG]       Saturday Hourly Rate: Rs.512.82
[2025-10-27T10:34:11.135Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:34:11.135Z] [LOG] 
   📊 Full Period Working Days for Sumaiya null (EMP000016):
[2025-10-27T10:34:11.136Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:11.801Z] [LOG] 
   📊 Working Days for Expected Calculation for Sumaiya null (EMP000016):
[2025-10-27T10:34:11.801Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:34:11.801Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:12.030Z] [LOG] 
   ⏰ Calculating Completed Hours for Sumaiya null (EMP000016) - All completed sessions:
[2025-10-27T10:34:12.031Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:34:12.032Z] [LOG]       Total completed sessions found: 21
[2025-10-27T10:34:12.032Z] [LOG] 
      📋 Attendance Breakdown for Sumaiya null (EMP000016):
[2025-10-27T10:34:12.033Z] [LOG]          1. 2025-10-01 (Weekday): 8.19h
[2025-10-27T10:34:12.034Z] [LOG]          2. 2025-10-02 (Weekday): 6.36h
[2025-10-27T10:34:12.034Z] [LOG]          3. 2025-10-03 (Weekday): 8.50h
[2025-10-27T10:34:12.035Z] [LOG]          4. 2025-10-04 (Saturday): 4.50h
[2025-10-27T10:34:12.035Z] [LOG]          5. 2025-10-07 (Weekday): 7.83h
[2025-10-27T10:34:12.036Z] [LOG]          6. 2025-10-08 (Weekday): 8.50h
[2025-10-27T10:34:12.036Z] [LOG]          7. 2025-10-09 (Weekday): 8.50h
[2025-10-27T10:34:12.037Z] [LOG]          8. 2025-10-10 (Weekday): 8.48h
[2025-10-27T10:34:12.039Z] [LOG]          9. 2025-10-11 (Saturday): 4.50h
[2025-10-27T10:34:12.039Z] [LOG]          10. 2025-10-13 (Weekday): 5.37h
[2025-10-27T10:34:12.040Z] [LOG]          11. 2025-10-14 (Weekday): 7.46h
[2025-10-27T10:34:12.043Z] [LOG]          12. 2025-10-15 (Weekday): 8.37h
[2025-10-27T10:34:12.044Z] [LOG]          13. 2025-10-16 (Weekday): 8.14h
[2025-10-27T10:34:12.044Z] [LOG]          14. 2025-10-17 (Weekday): 8.50h
[2025-10-27T10:34:12.045Z] [LOG]          15. 2025-10-18 (Saturday): 4.50h
[2025-10-27T10:34:12.046Z] [LOG]          16. 2025-10-20 (Weekday): 8.38h
[2025-10-27T10:34:12.047Z] [LOG]          17. 2025-10-21 (Weekday): 6.98h
[2025-10-27T10:34:12.047Z] [LOG]          18. 2025-10-22 (Weekday): 8.50h
[2025-10-27T10:34:12.048Z] [LOG]          19. 2025-10-23 (Weekday): 8.42h
[2025-10-27T10:34:12.048Z] [LOG]          20. 2025-10-24 (Weekday): 8.42h
[2025-10-27T10:34:12.049Z] [LOG]          21. 2025-10-25 (Saturday): 4.46h
[2025-10-27T10:34:12.268Z] [LOG] 
      📊 Aggregated Totals for Sumaiya null (EMP000016):
[2025-10-27T10:34:12.269Z] [LOG]          Weekday: 134.90h
[2025-10-27T10:34:12.269Z] [LOG]          Saturday: 17.96h
[2025-10-27T10:34:12.269Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:34:12.270Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:34:12.270Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Sumaiya null (EMP000016) - completed sessions only:
[2025-10-27T10:34:12.271Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:34:12.271Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:34:12.271Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:12.272Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:34:12.272Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Sumaiya null (EMP000016) - completed sessions only:
[2025-10-27T10:34:12.272Z] [LOG]       Weekday: 134.90h
[2025-10-27T10:34:12.273Z] [LOG]       Saturday: 17.96h
[2025-10-27T10:34:12.273Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:12.273Z] [LOG]       Total Actual: 152.86h
[2025-10-27T10:34:12.274Z] [LOG] 
   💵 EXPECTED Earned Salary for Sumaiya null (EMP000016) - until NOW:
[2025-10-27T10:34:12.274Z] [LOG]       Weekday: 153.00h × Rs.271.49 = Rs.41537.97
[2025-10-27T10:34:12.275Z] [LOG]       Saturday: 18.00h × Rs.512.82 = Rs.9230.76
[2025-10-27T10:34:12.275Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:12.275Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:12.275Z] [LOG]       Total Expected Earned: Rs.50768.73
[2025-10-27T10:34:12.276Z] [LOG] 
   💵 ACTUAL Earned Salary for Sumaiya null (EMP000016) - including live session:
[2025-10-27T10:34:12.276Z] [LOG]       Weekday: 134.90h × Rs.271.49 = Rs.36624.00
[2025-10-27T10:34:12.276Z] [LOG]       Saturday: 17.96h × Rs.512.82 = Rs.9210.25
[2025-10-27T10:34:12.276Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:12.277Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:12.277Z] [LOG]       Total Actual Earned: Rs.45834.25
[2025-10-27T10:34:12.277Z] [LOG] 
   📊 FINAL CALCULATION for Sumaiya null (EMP000016):
[2025-10-27T10:34:12.278Z] [LOG]       Calculated At: Oct 27, 2025, 16:04:12
[2025-10-27T10:34:12.278Z] [LOG]       Expected Earned: Rs.50768.73
[2025-10-27T10:34:12.278Z] [LOG]       Actual Earned: Rs.45834.25
[2025-10-27T10:34:12.278Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:12.279Z] [LOG]       Attendance Deduction: Rs.4934.48
[2025-10-27T10:34:12.279Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:34:12.279Z] [LOG]       📉 Shortfall for Sumaiya null: 18.14 hours (9.72% of expected)
[2025-10-27T10:34:12.279Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:34:12.279Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-27T10:34:12.280Z] [LOG]    Actual Earned Base: Rs.45834.25
[2025-10-27T10:34:12.280Z] [LOG]    Attendance Shortfall: Rs.4934.48
[2025-10-27T10:34:12.280Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:34:12.280Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:34:12.281Z] [LOG]    Gross Salary: 45834.2482
[2025-10-27T10:34:12.281Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:34:12.281Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:34:12.281Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:12.281Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:34:12.282Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:12.282Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:34:12.282Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:12.282Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:34:12.282Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:12.283Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:34:12.283Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:12.283Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:34:12.283Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:12.283Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:34:12.284Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:12.284Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:34:12.284Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:12.284Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:34:12.284Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:12.285Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:34:12.285Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:12.285Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:34:12.285Z] [LOG]    EPF/ETF calculated on: Rs.45834.25
[2025-10-27T10:34:12.285Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:34:12.285Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:34:12.286Z] [LOG] 💰 GROSS CALCULATION for Sumaiya null:
[2025-10-27T10:34:12.286Z] [LOG]    Base Salary: 60000
[2025-10-27T10:34:12.286Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:34:12.286Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:34:12.287Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:12.287Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:34:12.287Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:12.287Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:34:12.287Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:12.513Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:34:12.513Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:12.514Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:34:12.514Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:34:12.514Z] [LOG]    Actual Earned Base: Rs.45834.25
[2025-10-27T10:34:12.514Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:34:12.515Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:34:12.515Z] [LOG]    = Gross Salary: Rs.45834.25
[2025-10-27T10:34:12.515Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:34:12.515Z] [LOG]    Attendance Shortfall (Info): Rs.4934.48
[2025-10-27T10:34:12.515Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:34:12.516Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:12.516Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:34:12.516Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:34:12.516Z] [LOG]    Gross Salary: Rs.45834.25
[2025-10-27T10:34:12.516Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:34:12.517Z] [LOG]    = NET SALARY: Rs.45834.25
[2025-10-27T10:34:12.517Z] [LOG] 
💾 Database Update:
[2025-10-27T10:34:12.517Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:34:12.517Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:34:12.737Z] [LOG] 
📝 Components to save:
[2025-10-27T10:34:12.738Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:34:12.738Z] [LOG]    Deduction components: 1
[2025-10-27T10:34:12.739Z] [LOG] Creating components for record 898201c9-62a0-429b-8df8-801e25884ccc: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:34:12.742Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 45834.2482
}
[2025-10-27T10:34:12.967Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:34:13.189Z] [LOG] Created payroll_record_component: e83b2be0-a548-4ff0-bb3a-5a52c1afc739 for Base Salary
[2025-10-27T10:34:13.189Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 4934.481800000001
}
[2025-10-27T10:34:13.398Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:34:13.627Z] [LOG] Created payroll_record_component: 48fd1d0b-1450-4e4d-8f65-efbc95711965 for Attendance Shortfall (Info)
[2025-10-27T10:34:14.073Z] [LOG] ✅ Financial balances updated successfully for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:14.074Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:34:14.075Z] [LOG] 
======================================================================
[2025-10-27T10:34:14.076Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sumaiya null
[2025-10-27T10:34:14.077Z] [LOG] ======================================================================
[2025-10-27T10:34:14.077Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-27T10:34:14.078Z] [LOG]    Actual Earned Base (Attendance-based): Rs.45834.25
[2025-10-27T10:34:14.078Z] [LOG]    Attendance Shortfall: Rs.4934.48
[2025-10-27T10:34:14.079Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:14.079Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:14.080Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:34:14.081Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:14.082Z] [LOG]    GROSS SALARY: Rs.45834.25
[2025-10-27T10:34:14.083Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:14.083Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:34:14.084Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:34:14.084Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:34:14.085Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:34:14.085Z] [LOG]       - Attendance Shortfall (Info): Rs.4934.48
[2025-10-27T10:34:14.087Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:14.088Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:14.088Z] [LOG]    NET SALARY: Rs.45834.25
[2025-10-27T10:34:14.089Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:34:14.089Z] [LOG] ======================================================================

[2025-10-27T10:34:14.092Z] [LOG] ✅ Sumaiya null: Calculation completed successfully
[2025-10-27T10:34:14.094Z] [LOG] 📊 Progress: 20/34 (58.8%)
[2025-10-27T10:34:14.094Z] [LOG] 
🧮 Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-27T10:34:14.096Z] [LOG] 📋 Record ID: 8a9516fb-1fc7-4921-a567-5651ec1429cb
[2025-10-27T10:34:14.096Z] [LOG] 
======================================================================
[2025-10-27T10:34:14.097Z] [LOG] 🧮 CALCULATING PAYROLL: Ruvindu Hewabandu null (EMP000027)
[2025-10-27T10:34:14.097Z] [LOG] ======================================================================
[2025-10-27T10:34:15.003Z] [LOG] 🔍 Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-27T10:34:15.003Z] [LOG]    Total components: 13
[2025-10-27T10:34:15.004Z] [LOG]    Applicable components: 13
[2025-10-27T10:34:15.004Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-27T10:34:15.878Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:34:15.878Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:34:16.101Z] [LOG] 📊 Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:16.317Z] [LOG] 📊 Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:16.529Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:16.530Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:34:16.530Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:34:16.966Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:34:16.967Z] [LOG]    👤 Employee: Ruvindu Hewabandu null (EMP000027)
[2025-10-27T10:34:16.967Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:34:16.968Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:34:16.968Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-27T10:34:16.968Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:34:17.193Z] [LOG] 
   💵 Pre-calculated Rates for Ruvindu Hewabandu null (EMP000027):
[2025-10-27T10:34:17.194Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-27T10:34:17.195Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-27T10:34:17.196Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-27T10:34:17.196Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:34:17.196Z] [LOG] 
   📊 Full Period Working Days for Ruvindu Hewabandu null (EMP000027):
[2025-10-27T10:34:17.197Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:17.862Z] [LOG] 
   📊 Working Days for Expected Calculation for Ruvindu Hewabandu null (EMP000027):
[2025-10-27T10:34:17.862Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:34:17.863Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:18.082Z] [LOG] 
   ⏰ Calculating Completed Hours for Ruvindu Hewabandu null (EMP000027) - All completed sessions:
[2025-10-27T10:34:18.083Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:34:18.083Z] [LOG]       Total completed sessions found: 0
[2025-10-27T10:34:18.296Z] [LOG] 
      📊 Aggregated Totals for Ruvindu Hewabandu null (EMP000027):
[2025-10-27T10:34:18.296Z] [LOG]          Weekday: 0.00h
[2025-10-27T10:34:18.296Z] [LOG]          Saturday: 0.00h
[2025-10-27T10:34:18.297Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:34:18.297Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:34:18.297Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ruvindu Hewabandu null (EMP000027) - completed sessions only:
[2025-10-27T10:34:18.298Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:34:18.298Z] [LOG]       Saturday: 34.00h
[2025-10-27T10:34:18.298Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:18.299Z] [LOG]       Total Expected: 187.00h
[2025-10-27T10:34:18.299Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ruvindu Hewabandu null (EMP000027) - completed sessions only:
[2025-10-27T10:34:18.299Z] [LOG]       Weekday: 0.00h
[2025-10-27T10:34:18.299Z] [LOG]       Saturday: 0.00h
[2025-10-27T10:34:18.300Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:18.300Z] [LOG]       Total Actual: 0.00h
[2025-10-27T10:34:18.300Z] [LOG] 
   💵 EXPECTED Earned Salary for Ruvindu Hewabandu null (EMP000027) - until NOW:
[2025-10-27T10:34:18.301Z] [LOG]       Weekday: 153.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:18.301Z] [LOG]       Saturday: 34.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:18.301Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:18.302Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:18.302Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-27T10:34:18.302Z] [LOG] 
   💵 ACTUAL Earned Salary for Ruvindu Hewabandu null (EMP000027) - including live session:
[2025-10-27T10:34:18.303Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:18.303Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:18.303Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:18.304Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:18.304Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-27T10:34:18.304Z] [LOG] 
   📊 FINAL CALCULATION for Ruvindu Hewabandu null (EMP000027):
[2025-10-27T10:34:18.305Z] [LOG]       Calculated At: Oct 27, 2025, 16:04:18
[2025-10-27T10:34:18.305Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-27T10:34:18.305Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-27T10:34:18.305Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:18.306Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-27T10:34:18.306Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:34:18.306Z] [LOG]       ✅ No deduction - Ruvindu Hewabandu null worked all expected hours!
[2025-10-27T10:34:18.306Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:34:18.308Z] [LOG]    Base Salary (Full): Rs.NaN
[2025-10-27T10:34:18.308Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:34:18.309Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-27T10:34:18.309Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:34:18.309Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:34:18.310Z] [LOG]    Gross Salary: 0
[2025-10-27T10:34:18.310Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:34:18.310Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:34:18.311Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:18.311Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:34:18.312Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:18.312Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:34:18.312Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:18.313Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:34:18.313Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:18.313Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:34:18.314Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:18.314Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:34:18.314Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:18.314Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:34:18.315Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:18.315Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:34:18.315Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:18.315Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:34:18.316Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:18.316Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:34:18.316Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:18.317Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:34:18.317Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-27T10:34:18.317Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:34:18.317Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:34:18.318Z] [LOG] 💰 GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-27T10:34:18.318Z] [LOG]    Base Salary: 0
[2025-10-27T10:34:18.318Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:34:18.319Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:34:18.319Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:18.319Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:34:18.319Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:18.320Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:34:18.320Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:18.529Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:34:18.530Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:18.530Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:34:18.530Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:34:18.531Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:34:18.531Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:34:18.531Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:34:18.532Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-27T10:34:18.532Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:34:18.532Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:34:18.533Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:18.533Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:34:18.533Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:34:18.534Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-27T10:34:18.534Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:34:18.534Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-27T10:34:18.534Z] [LOG] 
💾 Database Update:
[2025-10-27T10:34:18.535Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:34:18.535Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:34:18.756Z] [LOG] 
📝 Components to save:
[2025-10-27T10:34:18.758Z] [LOG]    Gross/Earnings components: 0
[2025-10-27T10:34:18.759Z] [LOG]    Deduction components: 0
[2025-10-27T10:34:18.760Z] [LOG] Creating components for record 8a9516fb-1fc7-4921-a567-5651ec1429cb: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-27T10:34:19.190Z] [LOG] ✅ Financial balances updated successfully for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:19.192Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:34:19.192Z] [LOG] 
======================================================================
[2025-10-27T10:34:19.193Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ruvindu Hewabandu null
[2025-10-27T10:34:19.194Z] [LOG] ======================================================================
[2025-10-27T10:34:19.194Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-27T10:34:19.195Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-27T10:34:19.196Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-27T10:34:19.196Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:19.197Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:19.198Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:34:19.199Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:19.200Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-27T10:34:19.200Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:19.201Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:34:19.201Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:34:19.202Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:34:19.202Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:34:19.202Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-27T10:34:19.203Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:19.203Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:19.203Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-27T10:34:19.203Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:34:19.204Z] [LOG] ======================================================================

[2025-10-27T10:34:19.204Z] [LOG] ✅ Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-27T10:34:19.204Z] [LOG] 📊 Progress: 21/34 (61.8%)
[2025-10-27T10:34:19.205Z] [LOG] 
🧮 Processing: Chemil null (EMP000040)
[2025-10-27T10:34:19.205Z] [LOG] 📋 Record ID: 90376108-0dd2-4668-a44e-7f81a7c81416
[2025-10-27T10:34:19.205Z] [LOG] 
======================================================================
[2025-10-27T10:34:19.206Z] [LOG] 🧮 CALCULATING PAYROLL: Chemil null (EMP000040)
[2025-10-27T10:34:19.206Z] [LOG] ======================================================================
[2025-10-27T10:34:20.093Z] [LOG] 🔍 Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-27T10:34:20.093Z] [LOG]    Total components: 13
[2025-10-27T10:34:20.093Z] [LOG]    Applicable components: 13
[2025-10-27T10:34:20.094Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T10:34:20.953Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:34:20.953Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:34:21.174Z] [LOG] 📊 Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:21.403Z] [LOG] 📊 Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:21.621Z] [LOG] 📊 Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:21.622Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:34:21.623Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:34:22.041Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:34:22.042Z] [LOG]    👤 Employee: Chemil null (EMP000040)
[2025-10-27T10:34:22.042Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:34:22.042Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:34:22.043Z] [LOG]    Base Salary (Full Month): Rs.250000.00
[2025-10-27T10:34:22.043Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:34:22.265Z] [LOG] 
   💵 Pre-calculated Rates for Chemil null (EMP000040):
[2025-10-27T10:34:22.266Z] [LOG]       Daily Salary: Rs.9615.38
[2025-10-27T10:34:22.266Z] [LOG]       Weekday Hourly Rate: Rs.1131.22
[2025-10-27T10:34:22.266Z] [LOG]       Saturday Hourly Rate: Rs.2136.75
[2025-10-27T10:34:22.266Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:34:22.267Z] [LOG] 
   📊 Full Period Working Days for Chemil null (EMP000040):
[2025-10-27T10:34:22.267Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:22.906Z] [LOG] 
   📊 Working Days for Expected Calculation for Chemil null (EMP000040):
[2025-10-27T10:34:22.907Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:34:22.909Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:23.121Z] [LOG] 
   ⏰ Calculating Completed Hours for Chemil null (EMP000040) - All completed sessions:
[2025-10-27T10:34:23.121Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:34:23.121Z] [LOG]       Total completed sessions found: 15
[2025-10-27T10:34:23.121Z] [LOG] 
      📋 Attendance Breakdown for Chemil null (EMP000040):
[2025-10-27T10:34:23.121Z] [LOG]          1. 2025-10-03 (Weekday): 7.00h
[2025-10-27T10:34:23.122Z] [LOG]          2. 2025-10-04 (Saturday): 4.50h
[2025-10-27T10:34:23.122Z] [LOG]          3. 2025-10-07 (Weekday): 8.50h
[2025-10-27T10:34:23.122Z] [LOG]          4. 2025-10-08 (Weekday): 8.50h
[2025-10-27T10:34:23.122Z] [LOG]          5. 2025-10-09 (Weekday): 8.50h
[2025-10-27T10:34:23.122Z] [LOG]          6. 2025-10-10 (Weekday): 8.50h
[2025-10-27T10:34:23.122Z] [LOG]          7. 2025-10-11 (Saturday): 4.50h
[2025-10-27T10:34:23.123Z] [LOG]          8. 2025-10-13 (Weekday): 8.50h
[2025-10-27T10:34:23.123Z] [LOG]          9. 2025-10-17 (Weekday): 8.50h
[2025-10-27T10:34:23.123Z] [LOG]          10. 2025-10-20 (Weekday): 8.50h
[2025-10-27T10:34:23.123Z] [LOG]          11. 2025-10-21 (Weekday): 8.50h
[2025-10-27T10:34:23.123Z] [LOG]          12. 2025-10-22 (Weekday): 8.50h
[2025-10-27T10:34:23.123Z] [LOG]          13. 2025-10-23 (Weekday): 8.50h
[2025-10-27T10:34:23.124Z] [LOG]          14. 2025-10-24 (Weekday): 8.50h
[2025-10-27T10:34:23.124Z] [LOG]          15. 2025-10-25 (Saturday): 4.25h
[2025-10-27T10:34:23.333Z] [LOG] 
      📊 Aggregated Totals for Chemil null (EMP000040):
[2025-10-27T10:34:23.333Z] [LOG]          Weekday: 100.50h
[2025-10-27T10:34:23.334Z] [LOG]          Saturday: 13.25h
[2025-10-27T10:34:23.334Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:34:23.334Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:34:23.334Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Chemil null (EMP000040) - completed sessions only:
[2025-10-27T10:34:23.334Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:34:23.334Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:34:23.334Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:23.335Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:34:23.335Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Chemil null (EMP000040) - completed sessions only:
[2025-10-27T10:34:23.335Z] [LOG]       Weekday: 100.50h
[2025-10-27T10:34:23.335Z] [LOG]       Saturday: 13.25h
[2025-10-27T10:34:23.335Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:23.335Z] [LOG]       Total Actual: 113.75h
[2025-10-27T10:34:23.335Z] [LOG] 
   💵 EXPECTED Earned Salary for Chemil null (EMP000040) - until NOW:
[2025-10-27T10:34:23.336Z] [LOG]       Weekday: 153.00h × Rs.1131.22 = Rs.173076.66
[2025-10-27T10:34:23.336Z] [LOG]       Saturday: 18.00h × Rs.2136.75 = Rs.38461.50
[2025-10-27T10:34:23.336Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:23.336Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:23.336Z] [LOG]       Total Expected Earned: Rs.211538.16
[2025-10-27T10:34:23.336Z] [LOG] 
   💵 ACTUAL Earned Salary for Chemil null (EMP000040) - including live session:
[2025-10-27T10:34:23.337Z] [LOG]       Weekday: 100.50h × Rs.1131.22 = Rs.113687.61
[2025-10-27T10:34:23.337Z] [LOG]       Saturday: 13.25h × Rs.2136.75 = Rs.28311.94
[2025-10-27T10:34:23.337Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:23.337Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:23.337Z] [LOG]       Total Actual Earned: Rs.141999.55
[2025-10-27T10:34:23.338Z] [LOG] 
   📊 FINAL CALCULATION for Chemil null (EMP000040):
[2025-10-27T10:34:23.338Z] [LOG]       Calculated At: Oct 27, 2025, 16:04:23
[2025-10-27T10:34:23.338Z] [LOG]       Expected Earned: Rs.211538.16
[2025-10-27T10:34:23.338Z] [LOG]       Actual Earned: Rs.141999.55
[2025-10-27T10:34:23.338Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:23.339Z] [LOG]       Attendance Deduction: Rs.69538.61
[2025-10-27T10:34:23.339Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:34:23.339Z] [LOG]       📉 Shortfall for Chemil null: 57.25 hours (32.87% of expected)
[2025-10-27T10:34:23.339Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:34:23.340Z] [LOG]    Base Salary (Full): Rs.250000.00
[2025-10-27T10:34:23.340Z] [LOG]    Actual Earned Base: Rs.141999.55
[2025-10-27T10:34:23.340Z] [LOG]    Attendance Shortfall: Rs.69538.61
[2025-10-27T10:34:23.341Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:34:23.341Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:34:23.341Z] [LOG]    Gross Salary: 141999.5475
[2025-10-27T10:34:23.342Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:34:23.342Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:34:23.342Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:23.342Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:34:23.343Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:23.343Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:34:23.343Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:23.343Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:34:23.343Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:23.343Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:34:23.344Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:23.344Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:34:23.344Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:23.344Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:34:23.345Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:23.345Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:34:23.345Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:23.345Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:34:23.346Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:23.346Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:34:23.346Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:23.346Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:34:23.346Z] [LOG]    EPF/ETF calculated on: Rs.141999.55
[2025-10-27T10:34:23.347Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:34:23.347Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:34:23.347Z] [LOG] 💰 GROSS CALCULATION for Chemil null:
[2025-10-27T10:34:23.347Z] [LOG]    Base Salary: 250000
[2025-10-27T10:34:23.347Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:34:23.347Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:34:23.348Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:23.348Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:34:23.348Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:23.348Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:34:23.348Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:23.561Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:34:23.561Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:23.562Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:34:23.562Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:34:23.562Z] [LOG]    Actual Earned Base: Rs.141999.55
[2025-10-27T10:34:23.563Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:34:23.563Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:34:23.563Z] [LOG]    = Gross Salary: Rs.141999.55
[2025-10-27T10:34:23.564Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:34:23.564Z] [LOG]    Attendance Shortfall (Info): Rs.69538.61
[2025-10-27T10:34:23.565Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:34:23.565Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:23.565Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:34:23.566Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:34:23.566Z] [LOG]    Gross Salary: Rs.141999.55
[2025-10-27T10:34:23.567Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:34:23.567Z] [LOG]    = NET SALARY: Rs.141999.55
[2025-10-27T10:34:23.568Z] [LOG] 
💾 Database Update:
[2025-10-27T10:34:23.568Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:34:23.569Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:34:23.791Z] [LOG] 
📝 Components to save:
[2025-10-27T10:34:23.792Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:34:23.793Z] [LOG]    Deduction components: 1
[2025-10-27T10:34:23.793Z] [LOG] Creating components for record 90376108-0dd2-4668-a44e-7f81a7c81416: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:34:23.795Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 141999.5475
}
[2025-10-27T10:34:24.013Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:34:24.241Z] [LOG] Created payroll_record_component: 1725f698-79fc-4f00-a96c-c37beb71af4c for Base Salary
[2025-10-27T10:34:24.242Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 69538.61250000002
}
[2025-10-27T10:34:24.480Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:34:24.705Z] [LOG] Created payroll_record_component: e8fc529f-5e38-4acd-958a-47ca5dc843e4 for Attendance Shortfall (Info)
[2025-10-27T10:34:25.133Z] [LOG] ✅ Financial balances updated successfully for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:25.134Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:34:25.134Z] [LOG] 
======================================================================
[2025-10-27T10:34:25.135Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chemil null
[2025-10-27T10:34:25.136Z] [LOG] ======================================================================
[2025-10-27T10:34:25.136Z] [LOG]    Base Salary (Full): Rs.250000.00
[2025-10-27T10:34:25.137Z] [LOG]    Actual Earned Base (Attendance-based): Rs.141999.55
[2025-10-27T10:34:25.137Z] [LOG]    Attendance Shortfall: Rs.69538.61
[2025-10-27T10:34:25.138Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:25.139Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:25.139Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:34:25.142Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:25.143Z] [LOG]    GROSS SALARY: Rs.141999.55
[2025-10-27T10:34:25.143Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:25.144Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:34:25.144Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:34:25.144Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:34:25.145Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:34:25.145Z] [LOG]       - Attendance Shortfall (Info): Rs.69538.61
[2025-10-27T10:34:25.146Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:25.146Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:25.146Z] [LOG]    NET SALARY: Rs.141999.55
[2025-10-27T10:34:25.147Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:34:25.147Z] [LOG] ======================================================================

[2025-10-27T10:34:25.147Z] [LOG] ✅ Chemil null: Calculation completed successfully
[2025-10-27T10:34:25.148Z] [LOG] 📊 Progress: 22/34 (64.7%)
[2025-10-27T10:34:25.148Z] [LOG] 
🧮 Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-27T10:34:25.149Z] [LOG] 📋 Record ID: 9948adf2-e863-4671-804d-af257dd7475f
[2025-10-27T10:34:25.149Z] [LOG] 
======================================================================
[2025-10-27T10:34:25.150Z] [LOG] 🧮 CALCULATING PAYROLL: Sujevan Selvaratnam null (EMP000026)
[2025-10-27T10:34:25.150Z] [LOG] ======================================================================
[2025-10-27T10:34:26.011Z] [LOG] 🔍 Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-27T10:34:26.011Z] [LOG]    Total components: 13
[2025-10-27T10:34:26.012Z] [LOG]    Applicable components: 13
[2025-10-27T10:34:26.012Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-27T10:34:26.866Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:34:26.866Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:34:27.096Z] [LOG] 📊 Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:27.324Z] [LOG] 📊 Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:27.558Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:27.558Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:34:27.558Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:34:28.006Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:34:28.008Z] [LOG]    👤 Employee: Sujevan Selvaratnam null (EMP000026)
[2025-10-27T10:34:28.009Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:34:28.010Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:34:28.011Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-27T10:34:28.012Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:34:28.236Z] [LOG] 
   💵 Pre-calculated Rates for Sujevan Selvaratnam null (EMP000026):
[2025-10-27T10:34:28.237Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-27T10:34:28.238Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-27T10:34:28.238Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-27T10:34:28.239Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:34:28.239Z] [LOG] 
   📊 Full Period Working Days for Sujevan Selvaratnam null (EMP000026):
[2025-10-27T10:34:28.240Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:28.940Z] [LOG] 
   📊 Working Days for Expected Calculation for Sujevan Selvaratnam null (EMP000026):
[2025-10-27T10:34:28.942Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:34:28.942Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:29.185Z] [LOG] 
   ⏰ Calculating Completed Hours for Sujevan Selvaratnam null (EMP000026) - All completed sessions:
[2025-10-27T10:34:29.186Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:34:29.186Z] [LOG]       Total completed sessions found: 0
[2025-10-27T10:34:29.412Z] [LOG] 
      📊 Aggregated Totals for Sujevan Selvaratnam null (EMP000026):
[2025-10-27T10:34:29.412Z] [LOG]          Weekday: 0.00h
[2025-10-27T10:34:29.413Z] [LOG]          Saturday: 0.00h
[2025-10-27T10:34:29.413Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:34:29.414Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:34:29.415Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Sujevan Selvaratnam null (EMP000026) - completed sessions only:
[2025-10-27T10:34:29.415Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:34:29.416Z] [LOG]       Saturday: 34.00h
[2025-10-27T10:34:29.416Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:29.417Z] [LOG]       Total Expected: 187.00h
[2025-10-27T10:34:29.418Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Sujevan Selvaratnam null (EMP000026) - completed sessions only:
[2025-10-27T10:34:29.419Z] [LOG]       Weekday: 0.00h
[2025-10-27T10:34:29.420Z] [LOG]       Saturday: 0.00h
[2025-10-27T10:34:29.420Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:29.421Z] [LOG]       Total Actual: 0.00h
[2025-10-27T10:34:29.421Z] [LOG] 
   💵 EXPECTED Earned Salary for Sujevan Selvaratnam null (EMP000026) - until NOW:
[2025-10-27T10:34:29.422Z] [LOG]       Weekday: 153.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:29.423Z] [LOG]       Saturday: 34.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:29.425Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:29.426Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:29.426Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-27T10:34:29.427Z] [LOG] 
   💵 ACTUAL Earned Salary for Sujevan Selvaratnam null (EMP000026) - including live session:
[2025-10-27T10:34:29.428Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:29.429Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:29.429Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:29.430Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:29.430Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-27T10:34:29.431Z] [LOG] 
   📊 FINAL CALCULATION for Sujevan Selvaratnam null (EMP000026):
[2025-10-27T10:34:29.432Z] [LOG]       Calculated At: Oct 27, 2025, 16:04:29
[2025-10-27T10:34:29.433Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-27T10:34:29.434Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-27T10:34:29.434Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:29.435Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-27T10:34:29.435Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:34:29.436Z] [LOG]       ✅ No deduction - Sujevan Selvaratnam null worked all expected hours!
[2025-10-27T10:34:29.436Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:34:29.437Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-27T10:34:29.438Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:34:29.438Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-27T10:34:29.439Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:34:29.440Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:34:29.442Z] [LOG]    Gross Salary: 0
[2025-10-27T10:34:29.443Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:34:29.444Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:34:29.444Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:29.445Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:34:29.445Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:29.446Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:34:29.447Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:29.447Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:34:29.448Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:29.448Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:34:29.449Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:29.450Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:34:29.450Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:29.451Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:34:29.451Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:29.452Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:34:29.452Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:29.453Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:34:29.453Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:29.454Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:34:29.455Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:29.455Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:34:29.456Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-27T10:34:29.456Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:34:29.457Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:34:29.459Z] [LOG] 💰 GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-27T10:34:29.460Z] [LOG]    Base Salary: 1
[2025-10-27T10:34:29.461Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:34:29.461Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:34:29.462Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:29.462Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:34:29.462Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:29.463Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:34:29.463Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:29.747Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:34:29.748Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:29.749Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:34:29.749Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:34:29.750Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:34:29.750Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:34:29.751Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:34:29.751Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-27T10:34:29.752Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:34:29.753Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:34:29.753Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:29.754Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:34:29.755Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:34:29.756Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-27T10:34:29.756Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:34:29.759Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-27T10:34:29.760Z] [LOG] 
💾 Database Update:
[2025-10-27T10:34:29.760Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:34:29.761Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:34:29.993Z] [LOG] 
📝 Components to save:
[2025-10-27T10:34:29.994Z] [LOG]    Gross/Earnings components: 0
[2025-10-27T10:34:29.995Z] [LOG]    Deduction components: 0
[2025-10-27T10:34:29.995Z] [LOG] Creating components for record 9948adf2-e863-4671-804d-af257dd7475f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-27T10:34:30.464Z] [LOG] ✅ Financial balances updated successfully for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:30.465Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:34:30.466Z] [LOG] 
======================================================================
[2025-10-27T10:34:30.466Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sujevan Selvaratnam null
[2025-10-27T10:34:30.467Z] [LOG] ======================================================================
[2025-10-27T10:34:30.467Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-27T10:34:30.468Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-27T10:34:30.468Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-27T10:34:30.469Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:30.470Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:30.470Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:34:30.471Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:30.472Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-27T10:34:30.473Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:30.473Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:34:30.475Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:34:30.476Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:34:30.477Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:34:30.478Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-27T10:34:30.478Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:30.479Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:30.479Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-27T10:34:30.480Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:34:30.480Z] [LOG] ======================================================================

[2025-10-27T10:34:30.481Z] [LOG] ✅ Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-27T10:34:30.482Z] [LOG] 📊 Progress: 23/34 (67.6%)
[2025-10-27T10:34:30.482Z] [LOG] 
🧮 Processing: Prasanthan null (EMP000001)
[2025-10-27T10:34:30.483Z] [LOG] 📋 Record ID: 9a5b1647-0944-4041-9e0a-60c945b5d7ae
[2025-10-27T10:34:30.484Z] [LOG] 
======================================================================
[2025-10-27T10:34:30.484Z] [LOG] 🧮 CALCULATING PAYROLL: Prasanthan null (EMP000001)
[2025-10-27T10:34:30.485Z] [LOG] ======================================================================
[2025-10-27T10:34:31.407Z] [LOG] 🔍 Component filtering for employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-27T10:34:31.409Z] [LOG]    Total components: 13
[2025-10-27T10:34:31.409Z] [LOG]    Applicable components: 13
[2025-10-27T10:34:31.410Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-27T10:34:32.335Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:34:32.336Z] [LOG] 🔄 Processing financial records for employee 014397c7-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:34:32.565Z] [LOG] 📊 Found 0 active loans for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:32.791Z] [LOG] 📊 Found 0 active advances for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:33.023Z] [LOG] 📊 Found 0 approved bonuses for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:33.025Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:34:33.026Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:34:33.486Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:34:33.487Z] [LOG]    👤 Employee: Prasanthan null (EMP000001)
[2025-10-27T10:34:33.487Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:34:33.488Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:34:33.489Z] [LOG]    Base Salary (Full Month): Rs.150000.00
[2025-10-27T10:34:33.489Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:34:33.720Z] [LOG] 
   💵 Pre-calculated Rates for Prasanthan null (EMP000001):
[2025-10-27T10:34:33.721Z] [LOG]       Daily Salary: Rs.5769.23
[2025-10-27T10:34:33.722Z] [LOG]       Weekday Hourly Rate: Rs.678.73
[2025-10-27T10:34:33.722Z] [LOG]       Saturday Hourly Rate: Rs.678.73
[2025-10-27T10:34:33.723Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:34:33.724Z] [LOG] 
   📊 Full Period Working Days for Prasanthan null (EMP000001):
[2025-10-27T10:34:33.726Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:34.417Z] [LOG] 
   📊 Working Days for Expected Calculation for Prasanthan null (EMP000001):
[2025-10-27T10:34:34.418Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:34:34.418Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:34.647Z] [LOG] 
   ⏰ Calculating Completed Hours for Prasanthan null (EMP000001) - All completed sessions:
[2025-10-27T10:34:34.648Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:34:34.648Z] [LOG]       Total completed sessions found: 0
[2025-10-27T10:34:34.886Z] [LOG] 
      📊 Aggregated Totals for Prasanthan null (EMP000001):
[2025-10-27T10:34:34.887Z] [LOG]          Weekday: 0.00h
[2025-10-27T10:34:34.888Z] [LOG]          Saturday: 0.00h
[2025-10-27T10:34:34.888Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:34:34.889Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:34:34.889Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Prasanthan null (EMP000001) - completed sessions only:
[2025-10-27T10:34:34.890Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:34:34.891Z] [LOG]       Saturday: 34.00h
[2025-10-27T10:34:34.892Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:34.893Z] [LOG]       Total Expected: 187.00h
[2025-10-27T10:34:34.894Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Prasanthan null (EMP000001) - completed sessions only:
[2025-10-27T10:34:34.895Z] [LOG]       Weekday: 0.00h
[2025-10-27T10:34:34.896Z] [LOG]       Saturday: 0.00h
[2025-10-27T10:34:34.896Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:34.896Z] [LOG]       Total Actual: 0.00h
[2025-10-27T10:34:34.897Z] [LOG] 
   💵 EXPECTED Earned Salary for Prasanthan null (EMP000001) - until NOW:
[2025-10-27T10:34:34.898Z] [LOG]       Weekday: 153.00h × Rs.678.73 = Rs.103845.69
[2025-10-27T10:34:34.899Z] [LOG]       Saturday: 34.00h × Rs.678.73 = Rs.23076.82
[2025-10-27T10:34:34.899Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:34.900Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:34.901Z] [LOG]       Total Expected Earned: Rs.126922.51
[2025-10-27T10:34:34.901Z] [LOG] 
   💵 ACTUAL Earned Salary for Prasanthan null (EMP000001) - including live session:
[2025-10-27T10:34:34.902Z] [LOG]       Weekday: 0.00h × Rs.678.73 = Rs.0.00
[2025-10-27T10:34:34.903Z] [LOG]       Saturday: 0.00h × Rs.678.73 = Rs.0.00
[2025-10-27T10:34:34.903Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:34.904Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:34.905Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-27T10:34:34.906Z] [LOG] 
   📊 FINAL CALCULATION for Prasanthan null (EMP000001):
[2025-10-27T10:34:34.906Z] [LOG]       Calculated At: Oct 27, 2025, 16:04:34
[2025-10-27T10:34:34.910Z] [LOG]       Expected Earned: Rs.126922.51
[2025-10-27T10:34:34.910Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-27T10:34:34.911Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:34.911Z] [LOG]       Attendance Deduction: Rs.126922.51
[2025-10-27T10:34:34.912Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:34:34.912Z] [LOG]       📉 Shortfall for Prasanthan null: 187.00 hours (100.00% of expected)
[2025-10-27T10:34:34.913Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:34:34.914Z] [LOG]    Base Salary (Full): Rs.150000.00
[2025-10-27T10:34:34.914Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:34:34.915Z] [LOG]    Attendance Shortfall: Rs.126922.51
[2025-10-27T10:34:34.916Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:34:34.916Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:34:34.917Z] [LOG]    Gross Salary: 0
[2025-10-27T10:34:34.917Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:34:34.918Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:34:34.919Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:34.919Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:34:34.920Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:34.920Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:34:34.921Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:34.921Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:34:34.922Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:34.922Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:34:34.922Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:34.923Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:34:34.923Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:34.923Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:34:34.925Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:34.925Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:34:34.926Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:34.926Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:34:34.926Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:34.926Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:34:34.927Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:34.927Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:34:34.927Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-27T10:34:34.928Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:34:34.928Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:34:34.928Z] [LOG] 💰 GROSS CALCULATION for Prasanthan null:
[2025-10-27T10:34:34.929Z] [LOG]    Base Salary: 150000
[2025-10-27T10:34:34.929Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:34:34.929Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:34:34.930Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:34.930Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:34:34.930Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:34.931Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:34:34.931Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:35.151Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:34:35.151Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:35.152Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:34:35.152Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:34:35.153Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:34:35.154Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:34:35.154Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:34:35.155Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-27T10:34:35.155Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:34:35.156Z] [LOG]    Attendance Shortfall (Info): Rs.126922.51
[2025-10-27T10:34:35.157Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:34:35.159Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:35.160Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:34:35.161Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:34:35.161Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-27T10:34:35.162Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:34:35.162Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-27T10:34:35.163Z] [LOG] 
💾 Database Update:
[2025-10-27T10:34:35.164Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:34:35.164Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:34:35.404Z] [LOG] 
📝 Components to save:
[2025-10-27T10:34:35.404Z] [LOG]    Gross/Earnings components: 0
[2025-10-27T10:34:35.405Z] [LOG]    Deduction components: 1
[2025-10-27T10:34:35.406Z] [LOG] Creating components for record 9a5b1647-0944-4041-9e0a-60c945b5d7ae: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:34:35.409Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 126922.51000000001
}
[2025-10-27T10:34:35.645Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:34:35.875Z] [LOG] Created payroll_record_component: 21fd6002-bbd1-46bb-9cc5-e950523b005c for Attendance Shortfall (Info)
[2025-10-27T10:34:36.347Z] [LOG] ✅ Financial balances updated successfully for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:36.347Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:34:36.348Z] [LOG] 
======================================================================
[2025-10-27T10:34:36.349Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Prasanthan null
[2025-10-27T10:34:36.349Z] [LOG] ======================================================================
[2025-10-27T10:34:36.350Z] [LOG]    Base Salary (Full): Rs.150000.00
[2025-10-27T10:34:36.350Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-27T10:34:36.351Z] [LOG]    Attendance Shortfall: Rs.126922.51
[2025-10-27T10:34:36.352Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:36.352Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:36.353Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:34:36.354Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:36.355Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-27T10:34:36.355Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:36.356Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:34:36.356Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:34:36.359Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:34:36.359Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:34:36.360Z] [LOG]       - Attendance Shortfall (Info): Rs.126922.51
[2025-10-27T10:34:36.360Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:36.361Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:36.362Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-27T10:34:36.362Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:34:36.363Z] [LOG] ======================================================================

[2025-10-27T10:34:36.364Z] [LOG] ✅ Prasanthan null: Calculation completed successfully
[2025-10-27T10:34:36.364Z] [LOG] 📊 Progress: 24/34 (70.6%)
[2025-10-27T10:34:36.365Z] [LOG] 
🧮 Processing: customer null (EMP000036)
[2025-10-27T10:34:36.366Z] [LOG] 📋 Record ID: 9c7c07db-7f8b-4576-90f1-e675af14acfc
[2025-10-27T10:34:36.366Z] [LOG] 
======================================================================
[2025-10-27T10:34:36.367Z] [LOG] 🧮 CALCULATING PAYROLL: customer null (EMP000036)
[2025-10-27T10:34:36.368Z] [LOG] ======================================================================
[2025-10-27T10:34:37.285Z] [LOG] 🔍 Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-27T10:34:37.285Z] [LOG]    Total components: 13
[2025-10-27T10:34:37.286Z] [LOG]    Applicable components: 13
[2025-10-27T10:34:37.286Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-27T10:34:38.220Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:34:38.221Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:34:38.452Z] [LOG] 📊 Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:38.678Z] [LOG] 📊 Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:38.922Z] [LOG] 📊 Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:38.923Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:34:38.925Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:34:39.384Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:34:39.385Z] [LOG]    👤 Employee: customer null (EMP000036)
[2025-10-27T10:34:39.385Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:34:39.386Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:34:39.386Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-27T10:34:39.387Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:34:39.634Z] [LOG] 
   💵 Pre-calculated Rates for customer null (EMP000036):
[2025-10-27T10:34:39.635Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-27T10:34:39.635Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-27T10:34:39.636Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-27T10:34:39.636Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:34:39.637Z] [LOG] 
   📊 Full Period Working Days for customer null (EMP000036):
[2025-10-27T10:34:39.638Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:40.336Z] [LOG] 
   📊 Working Days for Expected Calculation for customer null (EMP000036):
[2025-10-27T10:34:40.337Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:34:40.338Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:40.563Z] [LOG] 
   ⏰ Calculating Completed Hours for customer null (EMP000036) - All completed sessions:
[2025-10-27T10:34:40.564Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:34:40.565Z] [LOG]       Total completed sessions found: 0
[2025-10-27T10:34:40.787Z] [LOG] 
      📊 Aggregated Totals for customer null (EMP000036):
[2025-10-27T10:34:40.788Z] [LOG]          Weekday: 0.00h
[2025-10-27T10:34:40.789Z] [LOG]          Saturday: 0.00h
[2025-10-27T10:34:40.789Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:34:40.790Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:34:40.791Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for customer null (EMP000036) - completed sessions only:
[2025-10-27T10:34:40.792Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:34:40.793Z] [LOG]       Saturday: 34.00h
[2025-10-27T10:34:40.793Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:40.794Z] [LOG]       Total Expected: 187.00h
[2025-10-27T10:34:40.795Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for customer null (EMP000036) - completed sessions only:
[2025-10-27T10:34:40.796Z] [LOG]       Weekday: 0.00h
[2025-10-27T10:34:40.796Z] [LOG]       Saturday: 0.00h
[2025-10-27T10:34:40.797Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:40.798Z] [LOG]       Total Actual: 0.00h
[2025-10-27T10:34:40.798Z] [LOG] 
   💵 EXPECTED Earned Salary for customer null (EMP000036) - until NOW:
[2025-10-27T10:34:40.799Z] [LOG]       Weekday: 153.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:40.800Z] [LOG]       Saturday: 34.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:40.801Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:40.801Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:40.802Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-27T10:34:40.802Z] [LOG] 
   💵 ACTUAL Earned Salary for customer null (EMP000036) - including live session:
[2025-10-27T10:34:40.803Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:40.804Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:40.804Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:40.805Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:40.805Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-27T10:34:40.807Z] [LOG] 
   📊 FINAL CALCULATION for customer null (EMP000036):
[2025-10-27T10:34:40.809Z] [LOG]       Calculated At: Oct 27, 2025, 16:04:40
[2025-10-27T10:34:40.810Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-27T10:34:40.811Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-27T10:34:40.811Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:40.812Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-27T10:34:40.812Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:34:40.814Z] [LOG]       ✅ No deduction - customer null worked all expected hours!
[2025-10-27T10:34:40.815Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:34:40.819Z] [LOG]    Base Salary (Full): Rs.NaN
[2025-10-27T10:34:40.819Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:34:40.822Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-27T10:34:40.823Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:34:40.826Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:34:40.827Z] [LOG]    Gross Salary: 0
[2025-10-27T10:34:40.828Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:34:40.830Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:34:40.830Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:40.831Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:34:40.831Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:40.831Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:34:40.832Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:40.832Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:34:40.832Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:40.833Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:34:40.833Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:40.833Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:34:40.833Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:40.834Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:34:40.834Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:40.834Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:34:40.835Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:40.835Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:34:40.835Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:40.836Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:34:40.836Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:40.836Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:34:40.836Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-27T10:34:40.837Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:34:40.837Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:34:40.837Z] [LOG] 💰 GROSS CALCULATION for customer null:
[2025-10-27T10:34:40.838Z] [LOG]    Base Salary: 0
[2025-10-27T10:34:40.838Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:34:40.838Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:34:40.839Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:40.839Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:34:40.839Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:40.840Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:34:40.840Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:41.067Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:34:41.068Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:41.068Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:34:41.069Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:34:41.070Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:34:41.070Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:34:41.071Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:34:41.071Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-27T10:34:41.073Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:34:41.079Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:34:41.079Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:41.080Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:34:41.080Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:34:41.081Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-27T10:34:41.082Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:34:41.083Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-27T10:34:41.083Z] [LOG] 
💾 Database Update:
[2025-10-27T10:34:41.084Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:34:41.085Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:34:41.325Z] [LOG] 
📝 Components to save:
[2025-10-27T10:34:41.326Z] [LOG]    Gross/Earnings components: 0
[2025-10-27T10:34:41.326Z] [LOG]    Deduction components: 0
[2025-10-27T10:34:41.326Z] [LOG] Creating components for record 9c7c07db-7f8b-4576-90f1-e675af14acfc: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-27T10:34:41.780Z] [LOG] ✅ Financial balances updated successfully for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:41.780Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:34:41.781Z] [LOG] 
======================================================================
[2025-10-27T10:34:41.781Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: customer null
[2025-10-27T10:34:41.782Z] [LOG] ======================================================================
[2025-10-27T10:34:41.782Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-27T10:34:41.783Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-27T10:34:41.783Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-27T10:34:41.783Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:41.784Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:41.784Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:34:41.785Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:41.785Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-27T10:34:41.785Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:41.786Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:34:41.786Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:34:41.787Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:34:41.787Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:34:41.787Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-27T10:34:41.788Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:41.788Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:41.789Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-27T10:34:41.789Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:34:41.789Z] [LOG] ======================================================================

[2025-10-27T10:34:41.790Z] [LOG] ✅ customer null: Calculation completed successfully
[2025-10-27T10:34:41.792Z] [LOG] 📊 Progress: 25/34 (73.5%)
[2025-10-27T10:34:41.792Z] [LOG] 
🧮 Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-27T10:34:41.793Z] [LOG] 📋 Record ID: 9cb867ec-b903-453d-b225-5f4b2799dc94
[2025-10-27T10:34:41.793Z] [LOG] 
======================================================================
[2025-10-27T10:34:41.794Z] [LOG] 🧮 CALCULATING PAYROLL: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-27T10:34:41.794Z] [LOG] ======================================================================
[2025-10-27T10:34:42.774Z] [LOG] 🔍 Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-27T10:34:42.775Z] [LOG]    Total components: 13
[2025-10-27T10:34:42.775Z] [LOG]    Applicable components: 13
[2025-10-27T10:34:42.776Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-27T10:34:43.769Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:34:43.770Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:34:44.012Z] [LOG] 📊 Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:44.256Z] [LOG] 📊 Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:44.505Z] [LOG] 📊 Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:44.506Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:34:44.508Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:34:45.006Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:34:45.006Z] [LOG]    👤 Employee: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-27T10:34:45.008Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:34:45.009Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:34:45.009Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T10:34:45.010Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:34:45.265Z] [LOG] 
   💵 Pre-calculated Rates for G.M Supathala Sadaru Madhushan null (EMP000042):
[2025-10-27T10:34:45.266Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-27T10:34:45.267Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-27T10:34:45.267Z] [LOG]       Saturday Hourly Rate: Rs.226.24
[2025-10-27T10:34:45.268Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:34:45.268Z] [LOG] 
   📊 Full Period Working Days for G.M Supathala Sadaru Madhushan null (EMP000042):
[2025-10-27T10:34:45.269Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:46.029Z] [LOG] 
   📊 Working Days for Expected Calculation for G.M Supathala Sadaru Madhushan null (EMP000042):
[2025-10-27T10:34:46.030Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:34:46.031Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:46.294Z] [LOG] 
   ⏰ Calculating Completed Hours for G.M Supathala Sadaru Madhushan null (EMP000042) - All completed sessions:
[2025-10-27T10:34:46.295Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:34:46.296Z] [LOG]       Total completed sessions found: 0
[2025-10-27T10:34:46.550Z] [LOG] 
      📊 Aggregated Totals for G.M Supathala Sadaru Madhushan null (EMP000042):
[2025-10-27T10:34:46.551Z] [LOG]          Weekday: 0.00h
[2025-10-27T10:34:46.551Z] [LOG]          Saturday: 0.00h
[2025-10-27T10:34:46.552Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:34:46.552Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:34:46.553Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for G.M Supathala Sadaru Madhushan null (EMP000042) - completed sessions only:
[2025-10-27T10:34:46.554Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:34:46.554Z] [LOG]       Saturday: 34.00h
[2025-10-27T10:34:46.555Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:46.556Z] [LOG]       Total Expected: 187.00h
[2025-10-27T10:34:46.556Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for G.M Supathala Sadaru Madhushan null (EMP000042) - completed sessions only:
[2025-10-27T10:34:46.559Z] [LOG]       Weekday: 0.00h
[2025-10-27T10:34:46.560Z] [LOG]       Saturday: 0.00h
[2025-10-27T10:34:46.561Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:46.561Z] [LOG]       Total Actual: 0.00h
[2025-10-27T10:34:46.562Z] [LOG] 
   💵 EXPECTED Earned Salary for G.M Supathala Sadaru Madhushan null (EMP000042) - until NOW:
[2025-10-27T10:34:46.562Z] [LOG]       Weekday: 153.00h × Rs.226.24 = Rs.34614.72
[2025-10-27T10:34:46.563Z] [LOG]       Saturday: 34.00h × Rs.226.24 = Rs.7692.16
[2025-10-27T10:34:46.563Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:46.564Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:46.565Z] [LOG]       Total Expected Earned: Rs.42306.88
[2025-10-27T10:34:46.565Z] [LOG] 
   💵 ACTUAL Earned Salary for G.M Supathala Sadaru Madhushan null (EMP000042) - including live session:
[2025-10-27T10:34:46.566Z] [LOG]       Weekday: 0.00h × Rs.226.24 = Rs.0.00
[2025-10-27T10:34:46.567Z] [LOG]       Saturday: 0.00h × Rs.226.24 = Rs.0.00
[2025-10-27T10:34:46.567Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:46.568Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:46.568Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-27T10:34:46.570Z] [LOG] 
   📊 FINAL CALCULATION for G.M Supathala Sadaru Madhushan null (EMP000042):
[2025-10-27T10:34:46.570Z] [LOG]       Calculated At: Oct 27, 2025, 16:04:46
[2025-10-27T10:34:46.571Z] [LOG]       Expected Earned: Rs.42306.88
[2025-10-27T10:34:46.571Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-27T10:34:46.572Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:46.573Z] [LOG]       Attendance Deduction: Rs.42306.88
[2025-10-27T10:34:46.573Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:34:46.576Z] [LOG]       📉 Shortfall for G.M Supathala Sadaru Madhushan null: 187.00 hours (100.00% of expected)
[2025-10-27T10:34:46.577Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:34:46.578Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:34:46.579Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:34:46.579Z] [LOG]    Attendance Shortfall: Rs.42306.88
[2025-10-27T10:34:46.580Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:34:46.581Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:34:46.581Z] [LOG]    Gross Salary: 0
[2025-10-27T10:34:46.582Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:34:46.583Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:34:46.583Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:46.584Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:34:46.584Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:46.585Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:34:46.586Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:46.586Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:34:46.587Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:46.587Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:34:46.588Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:46.588Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:34:46.589Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:46.590Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:34:46.591Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:46.592Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:34:46.593Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:46.593Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:34:46.593Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:46.594Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:34:46.594Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:46.594Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:34:46.595Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-27T10:34:46.595Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:34:46.595Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:34:46.596Z] [LOG] 💰 GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-27T10:34:46.596Z] [LOG]    Base Salary: 50000
[2025-10-27T10:34:46.597Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:34:46.597Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:34:46.597Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:46.598Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:34:46.598Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:46.598Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:34:46.599Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:46.844Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:34:46.845Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:46.846Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:34:46.846Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:34:46.847Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:34:46.847Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:34:46.848Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:34:46.848Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-27T10:34:46.849Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:34:46.850Z] [LOG]    Attendance Shortfall (Info): Rs.42306.88
[2025-10-27T10:34:46.850Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:34:46.851Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:46.852Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:34:46.852Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:34:46.853Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-27T10:34:46.854Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:34:46.854Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-27T10:34:46.855Z] [LOG] 
💾 Database Update:
[2025-10-27T10:34:46.856Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:34:46.856Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:34:47.124Z] [LOG] 
📝 Components to save:
[2025-10-27T10:34:47.125Z] [LOG]    Gross/Earnings components: 0
[2025-10-27T10:34:47.125Z] [LOG]    Deduction components: 1
[2025-10-27T10:34:47.125Z] [LOG] Creating components for record 9cb867ec-b903-453d-b225-5f4b2799dc94: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:34:47.126Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 42306.880000000005
}
[2025-10-27T10:34:47.381Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:34:47.636Z] [LOG] Created payroll_record_component: 39c6dc88-8e45-416e-bc52-56a46f308897 for Attendance Shortfall (Info)
[2025-10-27T10:34:48.136Z] [LOG] ✅ Financial balances updated successfully for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:48.136Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:34:48.137Z] [LOG] 
======================================================================
[2025-10-27T10:34:48.137Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: G.M Supathala Sadaru Madhushan null
[2025-10-27T10:34:48.138Z] [LOG] ======================================================================
[2025-10-27T10:34:48.138Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:34:48.138Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-27T10:34:48.139Z] [LOG]    Attendance Shortfall: Rs.42306.88
[2025-10-27T10:34:48.139Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:48.140Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:48.140Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:34:48.141Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:48.142Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-27T10:34:48.142Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:48.143Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:34:48.143Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:34:48.143Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:34:48.144Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:34:48.144Z] [LOG]       - Attendance Shortfall (Info): Rs.42306.88
[2025-10-27T10:34:48.145Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:48.145Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:48.145Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-27T10:34:48.146Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:34:48.146Z] [LOG] ======================================================================

[2025-10-27T10:34:48.147Z] [LOG] ✅ G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-27T10:34:48.147Z] [LOG] 📊 Progress: 26/34 (76.5%)
[2025-10-27T10:34:48.148Z] [LOG] 
🧮 Processing: Shandeep null (EMP000034)
[2025-10-27T10:34:48.148Z] [LOG] 📋 Record ID: a1e1d435-5db0-4c80-a34e-3c967bdd26d2
[2025-10-27T10:34:48.149Z] [LOG] 
======================================================================
[2025-10-27T10:34:48.149Z] [LOG] 🧮 CALCULATING PAYROLL: Shandeep null (EMP000034)
[2025-10-27T10:34:48.150Z] [LOG] ======================================================================
[2025-10-27T10:34:49.160Z] [LOG] 🔍 Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-27T10:34:49.168Z] [LOG]    Total components: 13
[2025-10-27T10:34:49.169Z] [LOG]    Applicable components: 13
[2025-10-27T10:34:49.169Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T10:34:50.177Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:34:50.178Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:34:50.425Z] [LOG] 📊 Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:50.678Z] [LOG] 📊 Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:50.935Z] [LOG] 📊 Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:50.935Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:34:50.936Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:34:51.448Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:34:51.449Z] [LOG]    👤 Employee: Shandeep null (EMP000034)
[2025-10-27T10:34:51.450Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:34:51.450Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:34:51.451Z] [LOG]    Base Salary (Full Month): Rs.80000.00
[2025-10-27T10:34:51.451Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:34:51.697Z] [LOG] 
   💵 Pre-calculated Rates for Shandeep null (EMP000034):
[2025-10-27T10:34:51.698Z] [LOG]       Daily Salary: Rs.3076.92
[2025-10-27T10:34:51.699Z] [LOG]       Weekday Hourly Rate: Rs.361.99
[2025-10-27T10:34:51.699Z] [LOG]       Saturday Hourly Rate: Rs.683.76
[2025-10-27T10:34:51.700Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:34:51.700Z] [LOG] 
   📊 Full Period Working Days for Shandeep null (EMP000034):
[2025-10-27T10:34:51.701Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:52.447Z] [LOG] 
   📊 Working Days for Expected Calculation for Shandeep null (EMP000034):
[2025-10-27T10:34:52.447Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:34:52.448Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:52.703Z] [LOG] 
   ⏰ Calculating Completed Hours for Shandeep null (EMP000034) - All completed sessions:
[2025-10-27T10:34:52.704Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:34:52.704Z] [LOG]       Total completed sessions found: 17
[2025-10-27T10:34:52.705Z] [LOG] 
      📋 Attendance Breakdown for Shandeep null (EMP000034):
[2025-10-27T10:34:52.706Z] [LOG]          1. 2025-10-01 (Weekday): 8.50h
[2025-10-27T10:34:52.707Z] [LOG]          2. 2025-10-02 (Weekday): 6.83h
[2025-10-27T10:34:52.709Z] [LOG]          3. 2025-10-04 (Saturday): 4.50h
[2025-10-27T10:34:52.710Z] [LOG]          4. 2025-10-07 (Weekday): 7.56h
[2025-10-27T10:34:52.711Z] [LOG]          5. 2025-10-08 (Weekday): 7.55h
[2025-10-27T10:34:52.712Z] [LOG]          6. 2025-10-09 (Weekday): 8.00h
[2025-10-27T10:34:52.712Z] [LOG]          7. 2025-10-10 (Weekday): 7.50h
[2025-10-27T10:34:52.713Z] [LOG]          8. 2025-10-11 (Saturday): 4.50h
[2025-10-27T10:34:52.714Z] [LOG]          9. 2025-10-13 (Weekday): 5.91h
[2025-10-27T10:34:52.714Z] [LOG]          10. 2025-10-14 (Weekday): 7.26h
[2025-10-27T10:34:52.715Z] [LOG]          11. 2025-10-15 (Weekday): 7.58h
[2025-10-27T10:34:52.716Z] [LOG]          12. 2025-10-16 (Weekday): 8.00h
[2025-10-27T10:34:52.716Z] [LOG]          13. 2025-10-17 (Weekday): 7.52h
[2025-10-27T10:34:52.717Z] [LOG]          14. 2025-10-18 (Saturday): 4.50h
[2025-10-27T10:34:52.718Z] [LOG]          15. 2025-10-22 (Weekday): 7.00h
[2025-10-27T10:34:52.718Z] [LOG]          16. 2025-10-23 (Weekday): 7.56h
[2025-10-27T10:34:52.719Z] [LOG]          17. 2025-10-24 (Weekday): 0.00h
[2025-10-27T10:34:52.968Z] [LOG] 
      📊 Aggregated Totals for Shandeep null (EMP000034):
[2025-10-27T10:34:52.969Z] [LOG]          Weekday: 96.77h
[2025-10-27T10:34:52.969Z] [LOG]          Saturday: 13.50h
[2025-10-27T10:34:52.970Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:34:52.970Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:34:52.971Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Shandeep null (EMP000034) - completed sessions only:
[2025-10-27T10:34:52.972Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:34:52.972Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:34:52.973Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:52.973Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:34:52.976Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Shandeep null (EMP000034) - completed sessions only:
[2025-10-27T10:34:52.977Z] [LOG]       Weekday: 96.77h
[2025-10-27T10:34:52.978Z] [LOG]       Saturday: 13.50h
[2025-10-27T10:34:52.978Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:52.979Z] [LOG]       Total Actual: 110.27h
[2025-10-27T10:34:52.979Z] [LOG] 
   💵 EXPECTED Earned Salary for Shandeep null (EMP000034) - until NOW:
[2025-10-27T10:34:52.980Z] [LOG]       Weekday: 153.00h × Rs.361.99 = Rs.55384.47
[2025-10-27T10:34:52.981Z] [LOG]       Saturday: 18.00h × Rs.683.76 = Rs.12307.68
[2025-10-27T10:34:52.982Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:52.982Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:52.983Z] [LOG]       Total Expected Earned: Rs.67692.15
[2025-10-27T10:34:52.983Z] [LOG] 
   💵 ACTUAL Earned Salary for Shandeep null (EMP000034) - including live session:
[2025-10-27T10:34:52.984Z] [LOG]       Weekday: 96.77h × Rs.361.99 = Rs.35029.77
[2025-10-27T10:34:52.985Z] [LOG]       Saturday: 13.50h × Rs.683.76 = Rs.9230.76
[2025-10-27T10:34:52.985Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:52.986Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:52.986Z] [LOG]       Total Actual Earned: Rs.44260.53
[2025-10-27T10:34:52.987Z] [LOG] 
   📊 FINAL CALCULATION for Shandeep null (EMP000034):
[2025-10-27T10:34:52.988Z] [LOG]       Calculated At: Oct 27, 2025, 16:04:52
[2025-10-27T10:34:52.989Z] [LOG]       Expected Earned: Rs.67692.15
[2025-10-27T10:34:52.989Z] [LOG]       Actual Earned: Rs.44260.53
[2025-10-27T10:34:52.990Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:52.993Z] [LOG]       Attendance Deduction: Rs.23431.62
[2025-10-27T10:34:52.994Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:34:52.994Z] [LOG]       📉 Shortfall for Shandeep null: 60.73 hours (34.61% of expected)
[2025-10-27T10:34:52.995Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:34:52.996Z] [LOG]    Base Salary (Full): Rs.80000.00
[2025-10-27T10:34:52.996Z] [LOG]    Actual Earned Base: Rs.44260.53
[2025-10-27T10:34:52.997Z] [LOG]    Attendance Shortfall: Rs.23431.62
[2025-10-27T10:34:52.997Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:34:52.998Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:34:52.999Z] [LOG]    Gross Salary: 44260.5323
[2025-10-27T10:34:52.999Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:34:53.000Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:34:53.000Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:53.001Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:34:53.002Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:53.002Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:34:53.003Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:53.003Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:34:53.004Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:53.004Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:34:53.005Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:53.006Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:34:53.006Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:53.007Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:34:53.009Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:53.010Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:34:53.011Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:53.011Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:34:53.012Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:53.012Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:34:53.012Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:53.013Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:34:53.013Z] [LOG]    EPF/ETF calculated on: Rs.44260.53
[2025-10-27T10:34:53.013Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:34:53.014Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:34:53.014Z] [LOG] 💰 GROSS CALCULATION for Shandeep null:
[2025-10-27T10:34:53.014Z] [LOG]    Base Salary: 80000
[2025-10-27T10:34:53.015Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:34:53.015Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:34:53.015Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:53.016Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:34:53.016Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:53.016Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:34:53.017Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:53.260Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:34:53.261Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:53.261Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:34:53.262Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:34:53.263Z] [LOG]    Actual Earned Base: Rs.44260.53
[2025-10-27T10:34:53.263Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:34:53.264Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:34:53.264Z] [LOG]    = Gross Salary: Rs.44260.53
[2025-10-27T10:34:53.265Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:34:53.266Z] [LOG]    Attendance Shortfall (Info): Rs.23431.62
[2025-10-27T10:34:53.266Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:34:53.267Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:53.267Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:34:53.268Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:34:53.269Z] [LOG]    Gross Salary: Rs.44260.53
[2025-10-27T10:34:53.270Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:34:53.270Z] [LOG]    = NET SALARY: Rs.44260.53
[2025-10-27T10:34:53.271Z] [LOG] 
💾 Database Update:
[2025-10-27T10:34:53.272Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:34:53.272Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:34:53.522Z] [LOG] 
📝 Components to save:
[2025-10-27T10:34:53.522Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:34:53.523Z] [LOG]    Deduction components: 1
[2025-10-27T10:34:53.523Z] [LOG] Creating components for record a1e1d435-5db0-4c80-a34e-3c967bdd26d2: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:34:53.526Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 44260.5323
}
[2025-10-27T10:34:53.776Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:34:54.036Z] [LOG] Created payroll_record_component: f42faa3b-ba0e-4a76-ac21-61be26282525 for Base Salary
[2025-10-27T10:34:54.037Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 23431.617699999995
}
[2025-10-27T10:34:54.284Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:34:54.537Z] [LOG] Created payroll_record_component: b7b625d4-05c2-4a6c-9ddd-c27b6a2a1fd1 for Attendance Shortfall (Info)
[2025-10-27T10:34:55.032Z] [LOG] ✅ Financial balances updated successfully for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:55.033Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:34:55.033Z] [LOG] 
======================================================================
[2025-10-27T10:34:55.034Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Shandeep null
[2025-10-27T10:34:55.034Z] [LOG] ======================================================================
[2025-10-27T10:34:55.035Z] [LOG]    Base Salary (Full): Rs.80000.00
[2025-10-27T10:34:55.036Z] [LOG]    Actual Earned Base (Attendance-based): Rs.44260.53
[2025-10-27T10:34:55.036Z] [LOG]    Attendance Shortfall: Rs.23431.62
[2025-10-27T10:34:55.037Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:55.037Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:55.038Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:34:55.039Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:55.039Z] [LOG]    GROSS SALARY: Rs.44260.53
[2025-10-27T10:34:55.040Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:55.042Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:34:55.043Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:34:55.044Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:34:55.045Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:34:55.045Z] [LOG]       - Attendance Shortfall (Info): Rs.23431.62
[2025-10-27T10:34:55.046Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:55.046Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:34:55.047Z] [LOG]    NET SALARY: Rs.44260.53
[2025-10-27T10:34:55.047Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:34:55.048Z] [LOG] ======================================================================

[2025-10-27T10:34:55.049Z] [LOG] ✅ Shandeep null: Calculation completed successfully
[2025-10-27T10:34:55.049Z] [LOG] 📊 Progress: 27/34 (79.4%)
[2025-10-27T10:34:55.050Z] [LOG] 
🧮 Processing: Rasanga null (EMP000028)
[2025-10-27T10:34:55.051Z] [LOG] 📋 Record ID: aafaf91e-cd3d-43ef-af5a-740422b9e000
[2025-10-27T10:34:55.051Z] [LOG] 
======================================================================
[2025-10-27T10:34:55.052Z] [LOG] 🧮 CALCULATING PAYROLL: Rasanga null (EMP000028)
[2025-10-27T10:34:55.052Z] [LOG] ======================================================================
[2025-10-27T10:34:56.073Z] [LOG] 🔍 Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-27T10:34:56.073Z] [LOG]    Total components: 13
[2025-10-27T10:34:56.075Z] [LOG]    Applicable components: 13
[2025-10-27T10:34:56.076Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-27T10:34:57.062Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:34:57.063Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:34:57.262Z] [LOG] 📊 Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:57.471Z] [LOG] 📊 Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:57.678Z] [LOG] 📊 Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-27T10:34:57.679Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:34:57.680Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:34:58.108Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:34:58.108Z] [LOG]    👤 Employee: Rasanga null (EMP000028)
[2025-10-27T10:34:58.108Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:34:58.109Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:34:58.109Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T10:34:58.109Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:34:58.342Z] [LOG] 
   💵 Pre-calculated Rates for Rasanga null (EMP000028):
[2025-10-27T10:34:58.342Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-27T10:34:58.343Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-27T10:34:58.343Z] [LOG]       Saturday Hourly Rate: Rs.226.24
[2025-10-27T10:34:58.343Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:34:58.343Z] [LOG] 
   📊 Full Period Working Days for Rasanga null (EMP000028):
[2025-10-27T10:34:58.344Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:58.956Z] [LOG] 
   📊 Working Days for Expected Calculation for Rasanga null (EMP000028):
[2025-10-27T10:34:58.956Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:34:58.956Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:34:59.164Z] [LOG] 
   ⏰ Calculating Completed Hours for Rasanga null (EMP000028) - All completed sessions:
[2025-10-27T10:34:59.164Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:34:59.164Z] [LOG]       Total completed sessions found: 0
[2025-10-27T10:34:59.370Z] [LOG] 
      📊 Aggregated Totals for Rasanga null (EMP000028):
[2025-10-27T10:34:59.370Z] [LOG]          Weekday: 0.00h
[2025-10-27T10:34:59.370Z] [LOG]          Saturday: 0.00h
[2025-10-27T10:34:59.370Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:34:59.370Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:34:59.371Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Rasanga null (EMP000028) - completed sessions only:
[2025-10-27T10:34:59.371Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:34:59.371Z] [LOG]       Saturday: 34.00h
[2025-10-27T10:34:59.371Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:59.371Z] [LOG]       Total Expected: 187.00h
[2025-10-27T10:34:59.371Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Rasanga null (EMP000028) - completed sessions only:
[2025-10-27T10:34:59.371Z] [LOG]       Weekday: 0.00h
[2025-10-27T10:34:59.372Z] [LOG]       Saturday: 0.00h
[2025-10-27T10:34:59.372Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:34:59.372Z] [LOG]       Total Actual: 0.00h
[2025-10-27T10:34:59.372Z] [LOG] 
   💵 EXPECTED Earned Salary for Rasanga null (EMP000028) - until NOW:
[2025-10-27T10:34:59.372Z] [LOG]       Weekday: 153.00h × Rs.226.24 = Rs.34614.72
[2025-10-27T10:34:59.372Z] [LOG]       Saturday: 34.00h × Rs.226.24 = Rs.7692.16
[2025-10-27T10:34:59.372Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:59.372Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:59.372Z] [LOG]       Total Expected Earned: Rs.42306.88
[2025-10-27T10:34:59.373Z] [LOG] 
   💵 ACTUAL Earned Salary for Rasanga null (EMP000028) - including live session:
[2025-10-27T10:34:59.373Z] [LOG]       Weekday: 0.00h × Rs.226.24 = Rs.0.00
[2025-10-27T10:34:59.373Z] [LOG]       Saturday: 0.00h × Rs.226.24 = Rs.0.00
[2025-10-27T10:34:59.373Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:34:59.373Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:59.373Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-27T10:34:59.374Z] [LOG] 
   📊 FINAL CALCULATION for Rasanga null (EMP000028):
[2025-10-27T10:34:59.374Z] [LOG]       Calculated At: Oct 27, 2025, 16:04:59
[2025-10-27T10:34:59.374Z] [LOG]       Expected Earned: Rs.42306.88
[2025-10-27T10:34:59.374Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-27T10:34:59.375Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:34:59.375Z] [LOG]       Attendance Deduction: Rs.42306.88
[2025-10-27T10:34:59.375Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:34:59.375Z] [LOG]       📉 Shortfall for Rasanga null: 187.00 hours (100.00% of expected)
[2025-10-27T10:34:59.375Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:34:59.376Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:34:59.376Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:34:59.376Z] [LOG]    Attendance Shortfall: Rs.42306.88
[2025-10-27T10:34:59.376Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:34:59.376Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:34:59.376Z] [LOG]    Gross Salary: 0
[2025-10-27T10:34:59.376Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:34:59.376Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:34:59.377Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:59.377Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:34:59.377Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:59.377Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:34:59.377Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:59.377Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:34:59.377Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:59.377Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:34:59.377Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:59.378Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:34:59.378Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:59.378Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:34:59.378Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:59.378Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:34:59.378Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:59.378Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:34:59.378Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:59.379Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:34:59.379Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:59.379Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:34:59.379Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-27T10:34:59.379Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:34:59.379Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:34:59.379Z] [LOG] 💰 GROSS CALCULATION for Rasanga null:
[2025-10-27T10:34:59.380Z] [LOG]    Base Salary: 50000
[2025-10-27T10:34:59.380Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:34:59.380Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:34:59.380Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:59.380Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:34:59.380Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:59.380Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:34:59.380Z] [LOG]    Fixed amount: 0
[2025-10-27T10:34:59.582Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:34:59.582Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:34:59.582Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:34:59.583Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:34:59.583Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:34:59.583Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:34:59.583Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:34:59.584Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-27T10:34:59.584Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:34:59.584Z] [LOG]    Attendance Shortfall (Info): Rs.42306.88
[2025-10-27T10:34:59.585Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:34:59.585Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:34:59.585Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:34:59.585Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:34:59.586Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-27T10:34:59.586Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:34:59.586Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-27T10:34:59.586Z] [LOG] 
💾 Database Update:
[2025-10-27T10:34:59.587Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:34:59.587Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:34:59.804Z] [LOG] 
📝 Components to save:
[2025-10-27T10:34:59.804Z] [LOG]    Gross/Earnings components: 0
[2025-10-27T10:34:59.804Z] [LOG]    Deduction components: 1
[2025-10-27T10:34:59.804Z] [LOG] Creating components for record aafaf91e-cd3d-43ef-af5a-740422b9e000: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:34:59.804Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 42306.880000000005
}
[2025-10-27T10:35:00.014Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:35:00.217Z] [LOG] Created payroll_record_component: 0037fe2c-e532-4abb-a2eb-cc6c5d729d8a for Attendance Shortfall (Info)
[2025-10-27T10:35:00.629Z] [LOG] ✅ Financial balances updated successfully for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:00.629Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:35:00.629Z] [LOG] 
======================================================================
[2025-10-27T10:35:00.630Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Rasanga null
[2025-10-27T10:35:00.630Z] [LOG] ======================================================================
[2025-10-27T10:35:00.630Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:35:00.630Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-27T10:35:00.631Z] [LOG]    Attendance Shortfall: Rs.42306.88
[2025-10-27T10:35:00.631Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:00.631Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:35:00.631Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:35:00.632Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:00.632Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-27T10:35:00.632Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:00.632Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:35:00.632Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:35:00.632Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:35:00.633Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:35:00.633Z] [LOG]       - Attendance Shortfall (Info): Rs.42306.88
[2025-10-27T10:35:00.633Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:35:00.633Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:00.634Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-27T10:35:00.634Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:35:00.634Z] [LOG] ======================================================================

[2025-10-27T10:35:00.634Z] [LOG] ✅ Rasanga null: Calculation completed successfully
[2025-10-27T10:35:00.635Z] [LOG] 📊 Progress: 28/34 (82.4%)
[2025-10-27T10:35:00.635Z] [LOG] 
🧮 Processing: Saruban null (EMP000007)
[2025-10-27T10:35:00.635Z] [LOG] 📋 Record ID: c0d6f1c3-1e58-4dd9-9f07-598928f1e750
[2025-10-27T10:35:00.635Z] [LOG] 
======================================================================
[2025-10-27T10:35:00.636Z] [LOG] 🧮 CALCULATING PAYROLL: Saruban null (EMP000007)
[2025-10-27T10:35:00.636Z] [LOG] ======================================================================
[2025-10-27T10:35:01.450Z] [LOG] 🔍 Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-27T10:35:01.451Z] [LOG]    Total components: 13
[2025-10-27T10:35:01.451Z] [LOG]    Applicable components: 13
[2025-10-27T10:35:01.451Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-27T10:35:02.282Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:35:02.283Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:35:02.490Z] [LOG] 📊 Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:02.696Z] [LOG] 📊 Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:02.899Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:02.899Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:35:02.899Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:35:03.302Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:35:03.302Z] [LOG]    👤 Employee: Saruban null (EMP000007)
[2025-10-27T10:35:03.303Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:35:03.303Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:35:03.303Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-27T10:35:03.303Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:35:03.502Z] [LOG] 
   💵 Pre-calculated Rates for Saruban null (EMP000007):
[2025-10-27T10:35:03.503Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-27T10:35:03.503Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-27T10:35:03.503Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-27T10:35:03.504Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:35:03.504Z] [LOG] 
   📊 Full Period Working Days for Saruban null (EMP000007):
[2025-10-27T10:35:03.504Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:35:04.110Z] [LOG] 
   📊 Working Days for Expected Calculation for Saruban null (EMP000007):
[2025-10-27T10:35:04.110Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:35:04.110Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:35:04.316Z] [LOG] 
   ⏰ Calculating Completed Hours for Saruban null (EMP000007) - All completed sessions:
[2025-10-27T10:35:04.316Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:35:04.316Z] [LOG]       Total completed sessions found: 0
[2025-10-27T10:35:04.526Z] [LOG] 
      📊 Aggregated Totals for Saruban null (EMP000007):
[2025-10-27T10:35:04.526Z] [LOG]          Weekday: 0.00h
[2025-10-27T10:35:04.526Z] [LOG]          Saturday: 0.00h
[2025-10-27T10:35:04.526Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:35:04.527Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:35:04.527Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Saruban null (EMP000007) - completed sessions only:
[2025-10-27T10:35:04.527Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:35:04.528Z] [LOG]       Saturday: 34.00h
[2025-10-27T10:35:04.528Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:35:04.528Z] [LOG]       Total Expected: 187.00h
[2025-10-27T10:35:04.528Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Saruban null (EMP000007) - completed sessions only:
[2025-10-27T10:35:04.529Z] [LOG]       Weekday: 0.00h
[2025-10-27T10:35:04.529Z] [LOG]       Saturday: 0.00h
[2025-10-27T10:35:04.529Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:35:04.529Z] [LOG]       Total Actual: 0.00h
[2025-10-27T10:35:04.530Z] [LOG] 
   💵 EXPECTED Earned Salary for Saruban null (EMP000007) - until NOW:
[2025-10-27T10:35:04.530Z] [LOG]       Weekday: 153.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:35:04.530Z] [LOG]       Saturday: 34.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:35:04.530Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:35:04.530Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:04.531Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-27T10:35:04.531Z] [LOG] 
   💵 ACTUAL Earned Salary for Saruban null (EMP000007) - including live session:
[2025-10-27T10:35:04.531Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:35:04.531Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:35:04.532Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:35:04.532Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:04.532Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-27T10:35:04.533Z] [LOG] 
   📊 FINAL CALCULATION for Saruban null (EMP000007):
[2025-10-27T10:35:04.533Z] [LOG]       Calculated At: Oct 27, 2025, 16:05:04
[2025-10-27T10:35:04.533Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-27T10:35:04.534Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-27T10:35:04.534Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:04.534Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-27T10:35:04.534Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:35:04.535Z] [LOG]       ✅ No deduction - Saruban null worked all expected hours!
[2025-10-27T10:35:04.535Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:35:04.535Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-27T10:35:04.535Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:35:04.535Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-27T10:35:04.536Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:35:04.536Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:35:04.536Z] [LOG]    Gross Salary: 0
[2025-10-27T10:35:04.536Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:35:04.537Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:35:04.537Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:04.537Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:35:04.537Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:04.537Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:35:04.538Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:04.538Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:35:04.538Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:04.538Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:35:04.538Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:04.539Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:35:04.539Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:04.539Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:35:04.539Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:04.539Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:35:04.540Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:04.540Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:35:04.540Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:04.542Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:35:04.542Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:04.542Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:35:04.542Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-27T10:35:04.542Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:35:04.542Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:35:04.543Z] [LOG] 💰 GROSS CALCULATION for Saruban null:
[2025-10-27T10:35:04.543Z] [LOG]    Base Salary: 0
[2025-10-27T10:35:04.543Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:35:04.543Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:35:04.544Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:04.544Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:35:04.544Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:04.545Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:35:04.545Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:04.746Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:35:04.747Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:35:04.747Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:35:04.747Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:35:04.747Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:35:04.747Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:35:04.747Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:35:04.748Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-27T10:35:04.748Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:35:04.748Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:35:04.748Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:35:04.748Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:35:04.748Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:35:04.748Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-27T10:35:04.748Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:35:04.749Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-27T10:35:04.749Z] [LOG] 
💾 Database Update:
[2025-10-27T10:35:04.749Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:35:04.749Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:35:04.953Z] [LOG] 
📝 Components to save:
[2025-10-27T10:35:04.953Z] [LOG]    Gross/Earnings components: 0
[2025-10-27T10:35:04.954Z] [LOG]    Deduction components: 0
[2025-10-27T10:35:04.954Z] [LOG] Creating components for record c0d6f1c3-1e58-4dd9-9f07-598928f1e750: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-27T10:35:05.358Z] [LOG] ✅ Financial balances updated successfully for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:05.358Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:35:05.358Z] [LOG] 
======================================================================
[2025-10-27T10:35:05.358Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saruban null
[2025-10-27T10:35:05.358Z] [LOG] ======================================================================
[2025-10-27T10:35:05.359Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-27T10:35:05.359Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-27T10:35:05.359Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-27T10:35:05.359Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:05.359Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:35:05.360Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:35:05.360Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:05.360Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-27T10:35:05.360Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:05.360Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:35:05.361Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:35:05.361Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:35:05.361Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:35:05.361Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-27T10:35:05.361Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:35:05.362Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:05.362Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-27T10:35:05.362Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:35:05.362Z] [LOG] ======================================================================

[2025-10-27T10:35:05.362Z] [LOG] ✅ Saruban null: Calculation completed successfully
[2025-10-27T10:35:05.363Z] [LOG] 📊 Progress: 29/34 (85.3%)
[2025-10-27T10:35:05.363Z] [LOG] 
🧮 Processing: Chamodi null (EMP000032)
[2025-10-27T10:35:05.363Z] [LOG] 📋 Record ID: c588ebd3-5304-4844-adfc-cb20c7d9bd2d
[2025-10-27T10:35:05.363Z] [LOG] 
======================================================================
[2025-10-27T10:35:05.363Z] [LOG] 🧮 CALCULATING PAYROLL: Chamodi null (EMP000032)
[2025-10-27T10:35:05.364Z] [LOG] ======================================================================
[2025-10-27T10:35:06.178Z] [LOG] 🔍 Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-27T10:35:06.178Z] [LOG]    Total components: 13
[2025-10-27T10:35:06.179Z] [LOG]    Applicable components: 13
[2025-10-27T10:35:06.179Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T10:35:07.005Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:35:07.005Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:35:07.214Z] [LOG] 📊 Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:07.415Z] [LOG] 📊 Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:07.619Z] [LOG] 📊 Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:07.619Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:35:07.620Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:35:08.022Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:35:08.023Z] [LOG]    👤 Employee: Chamodi null (EMP000032)
[2025-10-27T10:35:08.024Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:35:08.026Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:35:08.026Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T10:35:08.027Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:35:08.239Z] [LOG] 
   💵 Pre-calculated Rates for Chamodi null (EMP000032):
[2025-10-27T10:35:08.240Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-27T10:35:08.242Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-27T10:35:08.243Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-27T10:35:08.243Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:35:08.244Z] [LOG] 
   📊 Full Period Working Days for Chamodi null (EMP000032):
[2025-10-27T10:35:08.245Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:35:08.851Z] [LOG] 
   📊 Working Days for Expected Calculation for Chamodi null (EMP000032):
[2025-10-27T10:35:08.851Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:35:08.852Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:35:09.066Z] [LOG] 
   ⏰ Calculating Completed Hours for Chamodi null (EMP000032) - All completed sessions:
[2025-10-27T10:35:09.067Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:35:09.068Z] [LOG]       Total completed sessions found: 21
[2025-10-27T10:35:09.068Z] [LOG] 
      📋 Attendance Breakdown for Chamodi null (EMP000032):
[2025-10-27T10:35:09.069Z] [LOG]          1. 2025-10-01 (Weekday): 7.87h
[2025-10-27T10:35:09.070Z] [LOG]          2. 2025-10-02 (Weekday): 8.33h
[2025-10-27T10:35:09.070Z] [LOG]          3. 2025-10-03 (Weekday): 8.13h
[2025-10-27T10:35:09.071Z] [LOG]          4. 2025-10-04 (Saturday): 4.44h
[2025-10-27T10:35:09.071Z] [LOG]          5. 2025-10-07 (Weekday): 8.26h
[2025-10-27T10:35:09.072Z] [LOG]          6. 2025-10-08 (Weekday): 7.70h
[2025-10-27T10:35:09.072Z] [LOG]          7. 2025-10-09 (Weekday): 6.75h
[2025-10-27T10:35:09.073Z] [LOG]          8. 2025-10-10 (Weekday): 8.16h
[2025-10-27T10:35:09.076Z] [LOG]          9. 2025-10-11 (Saturday): 4.23h
[2025-10-27T10:35:09.077Z] [LOG]          10. 2025-10-13 (Weekday): 7.79h
[2025-10-27T10:35:09.077Z] [LOG]          11. 2025-10-14 (Weekday): 7.62h
[2025-10-27T10:35:09.078Z] [LOG]          12. 2025-10-15 (Weekday): 4.58h
[2025-10-27T10:35:09.079Z] [LOG]          13. 2025-10-16 (Weekday): 8.32h
[2025-10-27T10:35:09.080Z] [LOG]          14. 2025-10-17 (Weekday): 8.50h
[2025-10-27T10:35:09.080Z] [LOG]          15. 2025-10-18 (Saturday): 4.50h
[2025-10-27T10:35:09.081Z] [LOG]          16. 2025-10-20 (Weekday): 7.78h
[2025-10-27T10:35:09.081Z] [LOG]          17. 2025-10-21 (Weekday): 7.36h
[2025-10-27T10:35:09.082Z] [LOG]          18. 2025-10-22 (Weekday): 7.79h
[2025-10-27T10:35:09.083Z] [LOG]          19. 2025-10-23 (Weekday): 7.68h
[2025-10-27T10:35:09.083Z] [LOG]          20. 2025-10-24 (Weekday): 7.89h
[2025-10-27T10:35:09.084Z] [LOG]          21. 2025-10-25 (Saturday): 4.01h
[2025-10-27T10:35:09.291Z] [LOG] 
      📊 Aggregated Totals for Chamodi null (EMP000032):
[2025-10-27T10:35:09.292Z] [LOG]          Weekday: 130.51h
[2025-10-27T10:35:09.292Z] [LOG]          Saturday: 17.18h
[2025-10-27T10:35:09.292Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:35:09.292Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:35:09.293Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Chamodi null (EMP000032) - completed sessions only:
[2025-10-27T10:35:09.293Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:35:09.293Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:35:09.293Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:35:09.293Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:35:09.294Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Chamodi null (EMP000032) - completed sessions only:
[2025-10-27T10:35:09.294Z] [LOG]       Weekday: 130.51h
[2025-10-27T10:35:09.294Z] [LOG]       Saturday: 17.18h
[2025-10-27T10:35:09.294Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:35:09.294Z] [LOG]       Total Actual: 147.69h
[2025-10-27T10:35:09.295Z] [LOG] 
   💵 EXPECTED Earned Salary for Chamodi null (EMP000032) - until NOW:
[2025-10-27T10:35:09.295Z] [LOG]       Weekday: 153.00h × Rs.226.24 = Rs.34614.72
[2025-10-27T10:35:09.295Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-27T10:35:09.295Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:35:09.295Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:09.296Z] [LOG]       Total Expected Earned: Rs.42307.02
[2025-10-27T10:35:09.296Z] [LOG] 
   💵 ACTUAL Earned Salary for Chamodi null (EMP000032) - including live session:
[2025-10-27T10:35:09.296Z] [LOG]       Weekday: 130.51h × Rs.226.24 = Rs.29526.58
[2025-10-27T10:35:09.296Z] [LOG]       Saturday: 17.18h × Rs.427.35 = Rs.7341.87
[2025-10-27T10:35:09.296Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:35:09.297Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:09.297Z] [LOG]       Total Actual Earned: Rs.36868.46
[2025-10-27T10:35:09.297Z] [LOG] 
   📊 FINAL CALCULATION for Chamodi null (EMP000032):
[2025-10-27T10:35:09.297Z] [LOG]       Calculated At: Oct 27, 2025, 16:05:09
[2025-10-27T10:35:09.298Z] [LOG]       Expected Earned: Rs.42307.02
[2025-10-27T10:35:09.298Z] [LOG]       Actual Earned: Rs.36868.46
[2025-10-27T10:35:09.298Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:09.298Z] [LOG]       Attendance Deduction: Rs.5438.56
[2025-10-27T10:35:09.298Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:35:09.298Z] [LOG]       📉 Shortfall for Chamodi null: 23.31 hours (12.85% of expected)
[2025-10-27T10:35:09.299Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:35:09.299Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:35:09.299Z] [LOG]    Actual Earned Base: Rs.36868.46
[2025-10-27T10:35:09.299Z] [LOG]    Attendance Shortfall: Rs.5438.56
[2025-10-27T10:35:09.299Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:35:09.300Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:35:09.300Z] [LOG]    Gross Salary: 36868.4554
[2025-10-27T10:35:09.300Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:35:09.300Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:35:09.300Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:09.300Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:35:09.301Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:09.301Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:35:09.301Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:09.301Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:35:09.301Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:09.301Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:35:09.302Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:09.302Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:35:09.302Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:09.302Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:35:09.302Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:09.302Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:35:09.303Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:09.303Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:35:09.303Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:09.303Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:35:09.303Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:09.303Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:35:09.304Z] [LOG]    EPF/ETF calculated on: Rs.36868.46
[2025-10-27T10:35:09.304Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:35:09.304Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:35:09.304Z] [LOG] 💰 GROSS CALCULATION for Chamodi null:
[2025-10-27T10:35:09.304Z] [LOG]    Base Salary: 50000
[2025-10-27T10:35:09.304Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:35:09.304Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:35:09.304Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:09.305Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:35:09.305Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:09.305Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:35:09.305Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:09.514Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:35:09.514Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:35:09.515Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:35:09.516Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:35:09.516Z] [LOG]    Actual Earned Base: Rs.36868.46
[2025-10-27T10:35:09.517Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:35:09.517Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:35:09.518Z] [LOG]    = Gross Salary: Rs.36868.46
[2025-10-27T10:35:09.518Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:35:09.519Z] [LOG]    Attendance Shortfall (Info): Rs.5438.56
[2025-10-27T10:35:09.520Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:35:09.520Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:35:09.521Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:35:09.522Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:35:09.523Z] [LOG]    Gross Salary: Rs.36868.46
[2025-10-27T10:35:09.523Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:35:09.526Z] [LOG]    = NET SALARY: Rs.36868.46
[2025-10-27T10:35:09.527Z] [LOG] 
💾 Database Update:
[2025-10-27T10:35:09.528Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:35:09.528Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:35:09.737Z] [LOG] 
📝 Components to save:
[2025-10-27T10:35:09.738Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:35:09.739Z] [LOG]    Deduction components: 1
[2025-10-27T10:35:09.739Z] [LOG] Creating components for record c588ebd3-5304-4844-adfc-cb20c7d9bd2d: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:35:09.743Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 36868.4554
}
[2025-10-27T10:35:09.942Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:35:10.150Z] [LOG] Created payroll_record_component: f0a64b97-49f9-4783-a479-0228e354a5ad for Base Salary
[2025-10-27T10:35:10.151Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 5438.564600000005
}
[2025-10-27T10:35:10.354Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:35:10.559Z] [LOG] Created payroll_record_component: 28db9166-93d2-40d4-b7d6-7aa4dac30358 for Attendance Shortfall (Info)
[2025-10-27T10:35:10.970Z] [LOG] ✅ Financial balances updated successfully for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:10.971Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:35:10.971Z] [LOG] 
======================================================================
[2025-10-27T10:35:10.971Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chamodi null
[2025-10-27T10:35:10.971Z] [LOG] ======================================================================
[2025-10-27T10:35:10.972Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:35:10.972Z] [LOG]    Actual Earned Base (Attendance-based): Rs.36868.46
[2025-10-27T10:35:10.972Z] [LOG]    Attendance Shortfall: Rs.5438.56
[2025-10-27T10:35:10.973Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:10.973Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:35:10.973Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:35:10.973Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:10.974Z] [LOG]    GROSS SALARY: Rs.36868.46
[2025-10-27T10:35:10.974Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:10.975Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:35:10.975Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:35:10.975Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:35:10.976Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:35:10.976Z] [LOG]       - Attendance Shortfall (Info): Rs.5438.56
[2025-10-27T10:35:10.976Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:35:10.977Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:10.977Z] [LOG]    NET SALARY: Rs.36868.46
[2025-10-27T10:35:10.977Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:35:10.977Z] [LOG] ======================================================================

[2025-10-27T10:35:10.978Z] [LOG] ✅ Chamodi null: Calculation completed successfully
[2025-10-27T10:35:10.978Z] [LOG] 📊 Progress: 30/34 (88.2%)
[2025-10-27T10:35:10.978Z] [LOG] 
🧮 Processing: Kaushal Thambi (EMP465256103)
[2025-10-27T10:35:10.979Z] [LOG] 📋 Record ID: cf32fdc5-fd56-4720-9c3f-8ccd0574afcc
[2025-10-27T10:35:10.979Z] [LOG] 
======================================================================
[2025-10-27T10:35:10.979Z] [LOG] 🧮 CALCULATING PAYROLL: Kaushal Thambi (EMP465256103)
[2025-10-27T10:35:10.979Z] [LOG] ======================================================================
[2025-10-27T10:35:11.806Z] [LOG] 🔍 Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-27T10:35:11.807Z] [LOG]    Total components: 13
[2025-10-27T10:35:11.809Z] [LOG]    Applicable components: 13
[2025-10-27T10:35:11.810Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-27T10:35:12.630Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:35:12.630Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:35:12.834Z] [LOG] 📊 Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-27T10:35:13.046Z] [LOG] 📊 Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-27T10:35:13.263Z] [LOG] 📊 Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-27T10:35:13.264Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:35:13.265Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:35:13.678Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:35:13.679Z] [LOG]    👤 Employee: Kaushal Thambi (EMP465256103)
[2025-10-27T10:35:13.680Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:35:13.680Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:35:13.681Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T10:35:13.681Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:35:13.893Z] [LOG] 
   💵 Pre-calculated Rates for Kaushal Thambi (EMP465256103):
[2025-10-27T10:35:13.894Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-27T10:35:13.894Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-27T10:35:13.895Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-27T10:35:13.895Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:35:13.896Z] [LOG] 
   📊 Full Period Working Days for Kaushal Thambi (EMP465256103):
[2025-10-27T10:35:13.897Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:35:14.521Z] [LOG] 
   📊 Working Days for Expected Calculation for Kaushal Thambi (EMP465256103):
[2025-10-27T10:35:14.522Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:35:14.523Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:35:14.734Z] [LOG] 
   ⏰ Calculating Completed Hours for Kaushal Thambi (EMP465256103) - All completed sessions:
[2025-10-27T10:35:14.735Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:35:14.735Z] [LOG]       Total completed sessions found: 21
[2025-10-27T10:35:14.736Z] [LOG] 
      📋 Attendance Breakdown for Kaushal Thambi (EMP465256103):
[2025-10-27T10:35:14.737Z] [LOG]          1. 2025-10-01 (Weekday): 8.50h
[2025-10-27T10:35:14.738Z] [LOG]          2. 2025-10-02 (Weekday): 8.34h
[2025-10-27T10:35:14.738Z] [LOG]          3. 2025-10-03 (Weekday): 8.02h
[2025-10-27T10:35:14.739Z] [LOG]          4. 2025-10-04 (Saturday): 4.50h
[2025-10-27T10:35:14.739Z] [LOG]          5. 2025-10-07 (Weekday): 8.26h
[2025-10-27T10:35:14.743Z] [LOG]          6. 2025-10-08 (Weekday): 8.50h
[2025-10-27T10:35:14.743Z] [LOG]          7. 2025-10-09 (Weekday): 8.50h
[2025-10-27T10:35:14.744Z] [LOG]          8. 2025-10-10 (Weekday): 8.09h
[2025-10-27T10:35:14.745Z] [LOG]          9. 2025-10-11 (Saturday): 4.50h
[2025-10-27T10:35:14.746Z] [LOG]          10. 2025-10-13 (Weekday): 8.44h
[2025-10-27T10:35:14.747Z] [LOG]          11. 2025-10-14 (Weekday): 8.50h
[2025-10-27T10:35:14.747Z] [LOG]          12. 2025-10-15 (Weekday): 8.25h
[2025-10-27T10:35:14.748Z] [LOG]          13. 2025-10-16 (Weekday): 8.48h
[2025-10-27T10:35:14.748Z] [LOG]          14. 2025-10-17 (Weekday): 8.50h
[2025-10-27T10:35:14.749Z] [LOG]          15. 2025-10-18 (Saturday): 4.50h
[2025-10-27T10:35:14.750Z] [LOG]          16. 2025-10-20 (Weekday): 8.50h
[2025-10-27T10:35:14.750Z] [LOG]          17. 2025-10-21 (Weekday): 8.32h
[2025-10-27T10:35:14.751Z] [LOG]          18. 2025-10-22 (Weekday): 8.50h
[2025-10-27T10:35:14.752Z] [LOG]          19. 2025-10-23 (Weekday): 8.36h
[2025-10-27T10:35:14.752Z] [LOG]          20. 2025-10-24 (Weekday): 8.50h
[2025-10-27T10:35:14.753Z] [LOG]          21. 2025-10-25 (Saturday): 4.39h
[2025-10-27T10:35:14.962Z] [LOG] 
      📊 Aggregated Totals for Kaushal Thambi (EMP465256103):
[2025-10-27T10:35:14.963Z] [LOG]          Weekday: 142.56h
[2025-10-27T10:35:14.963Z] [LOG]          Saturday: 17.89h
[2025-10-27T10:35:14.964Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:35:14.964Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:35:14.964Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Kaushal Thambi (EMP465256103) - completed sessions only:
[2025-10-27T10:35:14.965Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:35:14.965Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:35:14.965Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:35:14.966Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:35:14.966Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Kaushal Thambi (EMP465256103) - completed sessions only:
[2025-10-27T10:35:14.966Z] [LOG]       Weekday: 142.56h
[2025-10-27T10:35:14.967Z] [LOG]       Saturday: 17.89h
[2025-10-27T10:35:14.967Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:35:14.967Z] [LOG]       Total Actual: 160.45h
[2025-10-27T10:35:14.968Z] [LOG] 
   💵 EXPECTED Earned Salary for Kaushal Thambi (EMP465256103) - until NOW:
[2025-10-27T10:35:14.968Z] [LOG]       Weekday: 153.00h × Rs.226.24 = Rs.34614.72
[2025-10-27T10:35:14.969Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-27T10:35:14.969Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:35:14.969Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:14.970Z] [LOG]       Total Expected Earned: Rs.42307.02
[2025-10-27T10:35:14.970Z] [LOG] 
   💵 ACTUAL Earned Salary for Kaushal Thambi (EMP465256103) - including live session:
[2025-10-27T10:35:14.970Z] [LOG]       Weekday: 142.56h × Rs.226.24 = Rs.32252.77
[2025-10-27T10:35:14.971Z] [LOG]       Saturday: 17.89h × Rs.427.35 = Rs.7645.29
[2025-10-27T10:35:14.971Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:35:14.971Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:14.971Z] [LOG]       Total Actual Earned: Rs.39898.07
[2025-10-27T10:35:14.972Z] [LOG] 
   📊 FINAL CALCULATION for Kaushal Thambi (EMP465256103):
[2025-10-27T10:35:14.972Z] [LOG]       Calculated At: Oct 27, 2025, 16:05:14
[2025-10-27T10:35:14.973Z] [LOG]       Expected Earned: Rs.42307.02
[2025-10-27T10:35:14.973Z] [LOG]       Actual Earned: Rs.39898.07
[2025-10-27T10:35:14.973Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:14.974Z] [LOG]       Attendance Deduction: Rs.2408.95
[2025-10-27T10:35:14.975Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:35:14.976Z] [LOG]       📉 Shortfall for Kaushal Thambi: 10.55 hours (5.69% of expected)
[2025-10-27T10:35:14.976Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:35:14.976Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:35:14.977Z] [LOG]    Actual Earned Base: Rs.39898.07
[2025-10-27T10:35:14.977Z] [LOG]    Attendance Shortfall: Rs.2408.95
[2025-10-27T10:35:14.977Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:35:14.978Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:35:14.978Z] [LOG]    Gross Salary: 39898.0659
[2025-10-27T10:35:14.978Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:35:14.979Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:35:14.979Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:14.979Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:35:14.979Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:14.980Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:35:14.980Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:14.980Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:35:14.980Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:14.981Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:35:14.981Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:14.981Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:35:14.982Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:14.982Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:35:14.982Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:14.982Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:35:14.983Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:14.983Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:35:14.983Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:14.984Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:35:14.984Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:14.984Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:35:14.984Z] [LOG]    EPF/ETF calculated on: Rs.39898.07
[2025-10-27T10:35:14.985Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:35:14.985Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:35:14.985Z] [LOG] 💰 GROSS CALCULATION for Kaushal Thambi:
[2025-10-27T10:35:14.985Z] [LOG]    Base Salary: 50000
[2025-10-27T10:35:14.986Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:35:14.986Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:35:14.986Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:14.986Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:35:14.987Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:14.987Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:35:14.987Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:15.193Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:35:15.193Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:35:15.194Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:35:15.194Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:35:15.195Z] [LOG]    Actual Earned Base: Rs.39898.07
[2025-10-27T10:35:15.196Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:35:15.196Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:35:15.197Z] [LOG]    = Gross Salary: Rs.39898.07
[2025-10-27T10:35:15.197Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:35:15.198Z] [LOG]    Attendance Shortfall (Info): Rs.2408.95
[2025-10-27T10:35:15.199Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:35:15.200Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:35:15.200Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:35:15.201Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:35:15.202Z] [LOG]    Gross Salary: Rs.39898.07
[2025-10-27T10:35:15.202Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:35:15.203Z] [LOG]    = NET SALARY: Rs.39898.07
[2025-10-27T10:35:15.203Z] [LOG] 
💾 Database Update:
[2025-10-27T10:35:15.205Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:35:15.205Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:35:15.427Z] [LOG] 
📝 Components to save:
[2025-10-27T10:35:15.428Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:35:15.429Z] [LOG]    Deduction components: 1
[2025-10-27T10:35:15.429Z] [LOG] Creating components for record cf32fdc5-fd56-4720-9c3f-8ccd0574afcc: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:35:15.431Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 39898.0659
}
[2025-10-27T10:35:15.637Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:35:15.837Z] [LOG] Created payroll_record_component: 1b263d41-3fc4-4398-a92d-579261369642 for Base Salary
[2025-10-27T10:35:15.838Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 2408.9541000000027
}
[2025-10-27T10:35:16.058Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:35:16.265Z] [LOG] Created payroll_record_component: 8c707dbd-ad6a-4d2f-841f-07e57b7ba3a4 for Attendance Shortfall (Info)
[2025-10-27T10:35:16.673Z] [LOG] ✅ Financial balances updated successfully for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-27T10:35:16.673Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:35:16.675Z] [LOG] 
======================================================================
[2025-10-27T10:35:16.677Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Kaushal Thambi
[2025-10-27T10:35:16.677Z] [LOG] ======================================================================
[2025-10-27T10:35:16.678Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:35:16.679Z] [LOG]    Actual Earned Base (Attendance-based): Rs.39898.07
[2025-10-27T10:35:16.679Z] [LOG]    Attendance Shortfall: Rs.2408.95
[2025-10-27T10:35:16.680Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:16.681Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:35:16.682Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:35:16.682Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:16.683Z] [LOG]    GROSS SALARY: Rs.39898.07
[2025-10-27T10:35:16.683Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:16.684Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:35:16.685Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:35:16.685Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:35:16.686Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:35:16.687Z] [LOG]       - Attendance Shortfall (Info): Rs.2408.95
[2025-10-27T10:35:16.687Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:35:16.688Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:16.688Z] [LOG]    NET SALARY: Rs.39898.07
[2025-10-27T10:35:16.689Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:35:16.690Z] [LOG] ======================================================================

[2025-10-27T10:35:16.690Z] [LOG] ✅ Kaushal Thambi: Calculation completed successfully
[2025-10-27T10:35:16.694Z] [LOG] 📊 Progress: 31/34 (91.2%)
[2025-10-27T10:35:16.694Z] [LOG] 
🧮 Processing: Ishara null (EMP000011)
[2025-10-27T10:35:16.695Z] [LOG] 📋 Record ID: e6b0005d-0d2e-4fac-beb6-ea1077f52c4b
[2025-10-27T10:35:16.696Z] [LOG] 
======================================================================
[2025-10-27T10:35:16.697Z] [LOG] 🧮 CALCULATING PAYROLL: Ishara null (EMP000011)
[2025-10-27T10:35:16.697Z] [LOG] ======================================================================
[2025-10-27T10:35:17.529Z] [LOG] 🔍 Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-27T10:35:17.529Z] [LOG]    Total components: 13
[2025-10-27T10:35:17.530Z] [LOG]    Applicable components: 13
[2025-10-27T10:35:17.530Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-27T10:35:18.353Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:35:18.354Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:35:18.557Z] [LOG] 📊 Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:18.769Z] [LOG] 📊 Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:18.974Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:18.976Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:35:18.977Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:35:19.389Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:35:19.390Z] [LOG]    👤 Employee: Ishara null (EMP000011)
[2025-10-27T10:35:19.390Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:35:19.393Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:35:19.393Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T10:35:19.394Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:35:19.614Z] [LOG] 
   💵 Pre-calculated Rates for Ishara null (EMP000011):
[2025-10-27T10:35:19.615Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-27T10:35:19.615Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-27T10:35:19.616Z] [LOG]       Saturday Hourly Rate: Rs.226.24
[2025-10-27T10:35:19.617Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:35:19.617Z] [LOG] 
   📊 Full Period Working Days for Ishara null (EMP000011):
[2025-10-27T10:35:19.618Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:35:20.241Z] [LOG] 
   📊 Working Days for Expected Calculation for Ishara null (EMP000011):
[2025-10-27T10:35:20.242Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:35:20.243Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:35:20.450Z] [LOG] 
   ⏰ Calculating Completed Hours for Ishara null (EMP000011) - All completed sessions:
[2025-10-27T10:35:20.451Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:35:20.451Z] [LOG]       Total completed sessions found: 0
[2025-10-27T10:35:20.654Z] [LOG] 
      📊 Aggregated Totals for Ishara null (EMP000011):
[2025-10-27T10:35:20.655Z] [LOG]          Weekday: 0.00h
[2025-10-27T10:35:20.656Z] [LOG]          Saturday: 0.00h
[2025-10-27T10:35:20.656Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:35:20.657Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:35:20.659Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ishara null (EMP000011) - completed sessions only:
[2025-10-27T10:35:20.660Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:35:20.661Z] [LOG]       Saturday: 34.00h
[2025-10-27T10:35:20.661Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:35:20.662Z] [LOG]       Total Expected: 187.00h
[2025-10-27T10:35:20.663Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ishara null (EMP000011) - completed sessions only:
[2025-10-27T10:35:20.664Z] [LOG]       Weekday: 0.00h
[2025-10-27T10:35:20.664Z] [LOG]       Saturday: 0.00h
[2025-10-27T10:35:20.665Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:35:20.665Z] [LOG]       Total Actual: 0.00h
[2025-10-27T10:35:20.666Z] [LOG] 
   💵 EXPECTED Earned Salary for Ishara null (EMP000011) - until NOW:
[2025-10-27T10:35:20.667Z] [LOG]       Weekday: 153.00h × Rs.226.24 = Rs.34614.72
[2025-10-27T10:35:20.668Z] [LOG]       Saturday: 34.00h × Rs.226.24 = Rs.7692.16
[2025-10-27T10:35:20.668Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:35:20.669Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:20.669Z] [LOG]       Total Expected Earned: Rs.42306.88
[2025-10-27T10:35:20.670Z] [LOG] 
   💵 ACTUAL Earned Salary for Ishara null (EMP000011) - including live session:
[2025-10-27T10:35:20.671Z] [LOG]       Weekday: 0.00h × Rs.226.24 = Rs.0.00
[2025-10-27T10:35:20.671Z] [LOG]       Saturday: 0.00h × Rs.226.24 = Rs.0.00
[2025-10-27T10:35:20.672Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:35:20.672Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:20.673Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-27T10:35:20.675Z] [LOG] 
   📊 FINAL CALCULATION for Ishara null (EMP000011):
[2025-10-27T10:35:20.678Z] [LOG]       Calculated At: Oct 27, 2025, 16:05:20
[2025-10-27T10:35:20.678Z] [LOG]       Expected Earned: Rs.42306.88
[2025-10-27T10:35:20.679Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-27T10:35:20.680Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:20.681Z] [LOG]       Attendance Deduction: Rs.42306.88
[2025-10-27T10:35:20.681Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:35:20.682Z] [LOG]       📉 Shortfall for Ishara null: 187.00 hours (100.00% of expected)
[2025-10-27T10:35:20.682Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:35:20.683Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:35:20.684Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:35:20.685Z] [LOG]    Attendance Shortfall: Rs.42306.88
[2025-10-27T10:35:20.719Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:35:20.720Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:35:20.720Z] [LOG]    Gross Salary: 0
[2025-10-27T10:35:20.721Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:35:20.721Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:35:20.722Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:20.722Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:35:20.722Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:20.723Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:35:20.723Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:20.725Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:35:20.728Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:20.755Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:35:20.756Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:20.756Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:35:20.762Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:20.772Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:35:20.773Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:20.773Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:35:20.773Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:20.773Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:35:20.774Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:20.774Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:35:20.775Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:20.776Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:35:20.776Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-27T10:35:20.776Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:35:20.776Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:35:20.777Z] [LOG] 💰 GROSS CALCULATION for Ishara null:
[2025-10-27T10:35:20.777Z] [LOG]    Base Salary: 50000
[2025-10-27T10:35:20.777Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:35:20.777Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:35:20.777Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:20.778Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:35:20.778Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:20.778Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:35:20.778Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:20.985Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:35:20.986Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:35:20.986Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:35:20.986Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:35:20.986Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T10:35:20.987Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:35:20.987Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:35:20.987Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-27T10:35:20.988Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:35:20.988Z] [LOG]    Attendance Shortfall (Info): Rs.42306.88
[2025-10-27T10:35:20.988Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:35:20.989Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:35:20.989Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:35:20.989Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:35:20.990Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-27T10:35:20.990Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:35:20.990Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-27T10:35:20.990Z] [LOG] 
💾 Database Update:
[2025-10-27T10:35:20.992Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:35:20.993Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:35:21.209Z] [LOG] 
📝 Components to save:
[2025-10-27T10:35:21.210Z] [LOG]    Gross/Earnings components: 0
[2025-10-27T10:35:21.210Z] [LOG]    Deduction components: 1
[2025-10-27T10:35:21.211Z] [LOG] Creating components for record e6b0005d-0d2e-4fac-beb6-ea1077f52c4b: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:35:21.213Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 42306.880000000005
}
[2025-10-27T10:35:21.418Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:35:21.626Z] [LOG] Created payroll_record_component: caa4fef6-6e9d-4105-8273-51d4488f3cf0 for Attendance Shortfall (Info)
[2025-10-27T10:35:22.030Z] [LOG] ✅ Financial balances updated successfully for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:22.030Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:35:22.031Z] [LOG] 
======================================================================
[2025-10-27T10:35:22.031Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ishara null
[2025-10-27T10:35:22.032Z] [LOG] ======================================================================
[2025-10-27T10:35:22.033Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:35:22.033Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-27T10:35:22.034Z] [LOG]    Attendance Shortfall: Rs.42306.88
[2025-10-27T10:35:22.034Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:22.035Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:35:22.035Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:35:22.036Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:22.037Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-27T10:35:22.038Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:22.038Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:35:22.039Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:35:22.039Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:35:22.040Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:35:22.042Z] [LOG]       - Attendance Shortfall (Info): Rs.42306.88
[2025-10-27T10:35:22.043Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:35:22.044Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:22.044Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-27T10:35:22.045Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:35:22.045Z] [LOG] ======================================================================

[2025-10-27T10:35:22.046Z] [LOG] ✅ Ishara null: Calculation completed successfully
[2025-10-27T10:35:22.047Z] [LOG] 📊 Progress: 32/34 (94.1%)
[2025-10-27T10:35:22.047Z] [LOG] 
🧮 Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-27T10:35:22.048Z] [LOG] 📋 Record ID: efc01095-3a8b-42a3-a33f-69ff57d7a77c
[2025-10-27T10:35:22.049Z] [LOG] 
======================================================================
[2025-10-27T10:35:22.049Z] [LOG] 🧮 CALCULATING PAYROLL: Viruna Damsiha Cooray null (EMP000038)
[2025-10-27T10:35:22.050Z] [LOG] ======================================================================
[2025-10-27T10:35:22.883Z] [LOG] 🔍 Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-27T10:35:22.883Z] [LOG]    Total components: 13
[2025-10-27T10:35:22.884Z] [LOG]    Applicable components: 13
[2025-10-27T10:35:22.884Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T10:35:23.731Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:35:23.731Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:35:23.939Z] [LOG] 📊 Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:24.143Z] [LOG] 📊 Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:24.354Z] [LOG] 📊 Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:24.354Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:35:24.355Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:35:24.765Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:35:24.766Z] [LOG]    👤 Employee: Viruna Damsiha Cooray null (EMP000038)
[2025-10-27T10:35:24.767Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:35:24.767Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:35:24.768Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T10:35:24.769Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:35:24.969Z] [LOG] 
   💵 Pre-calculated Rates for Viruna Damsiha Cooray null (EMP000038):
[2025-10-27T10:35:24.970Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-27T10:35:24.971Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-27T10:35:24.971Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-27T10:35:24.972Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:35:24.973Z] [LOG] 
   📊 Full Period Working Days for Viruna Damsiha Cooray null (EMP000038):
[2025-10-27T10:35:24.973Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:35:25.585Z] [LOG] 
   📊 Working Days for Expected Calculation for Viruna Damsiha Cooray null (EMP000038):
[2025-10-27T10:35:25.586Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:35:25.587Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:35:25.794Z] [LOG] 
   ⏰ Calculating Completed Hours for Viruna Damsiha Cooray null (EMP000038) - All completed sessions:
[2025-10-27T10:35:25.795Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:35:25.795Z] [LOG]       Total completed sessions found: 19
[2025-10-27T10:35:25.796Z] [LOG] 
      📋 Attendance Breakdown for Viruna Damsiha Cooray null (EMP000038):
[2025-10-27T10:35:25.797Z] [LOG]          1. 2025-10-01 (Weekday): 8.00h
[2025-10-27T10:35:25.797Z] [LOG]          2. 2025-10-02 (Weekday): 8.00h
[2025-10-27T10:35:25.798Z] [LOG]          3. 2025-10-03 (Weekday): 8.25h
[2025-10-27T10:35:25.798Z] [LOG]          4. 2025-10-04 (Saturday): 3.78h
[2025-10-27T10:35:25.799Z] [LOG]          5. 2025-10-07 (Weekday): 8.50h
[2025-10-27T10:35:25.799Z] [LOG]          6. 2025-10-08 (Weekday): 8.50h
[2025-10-27T10:35:25.800Z] [LOG]          7. 2025-10-09 (Weekday): 8.34h
[2025-10-27T10:35:25.801Z] [LOG]          8. 2025-10-10 (Weekday): 8.36h
[2025-10-27T10:35:25.802Z] [LOG]          9. 2025-10-11 (Saturday): 4.23h
[2025-10-27T10:35:25.803Z] [LOG]          10. 2025-10-13 (Weekday): 8.50h
[2025-10-27T10:35:25.803Z] [LOG]          11. 2025-10-15 (Weekday): 8.50h
[2025-10-27T10:35:25.804Z] [LOG]          12. 2025-10-16 (Weekday): 8.35h
[2025-10-27T10:35:25.804Z] [LOG]          13. 2025-10-17 (Weekday): 8.50h
[2025-10-27T10:35:25.806Z] [LOG]          14. 2025-10-18 (Saturday): 4.50h
[2025-10-27T10:35:25.806Z] [LOG]          15. 2025-10-20 (Weekday): 8.50h
[2025-10-27T10:35:25.807Z] [LOG]          16. 2025-10-21 (Weekday): 8.50h
[2025-10-27T10:35:25.810Z] [LOG]          17. 2025-10-22 (Weekday): 8.50h
[2025-10-27T10:35:25.811Z] [LOG]          18. 2025-10-23 (Weekday): 8.50h
[2025-10-27T10:35:25.812Z] [LOG]          19. 2025-10-24 (Weekday): 8.50h
[2025-10-27T10:35:26.038Z] [LOG] 
      📊 Aggregated Totals for Viruna Damsiha Cooray null (EMP000038):
[2025-10-27T10:35:26.039Z] [LOG]          Weekday: 134.30h
[2025-10-27T10:35:26.040Z] [LOG]          Saturday: 12.51h
[2025-10-27T10:35:26.040Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:35:26.041Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:35:26.043Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Viruna Damsiha Cooray null (EMP000038) - completed sessions only:
[2025-10-27T10:35:26.043Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:35:26.044Z] [LOG]       Saturday: 18.00h
[2025-10-27T10:35:26.045Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:35:26.045Z] [LOG]       Total Expected: 171.00h
[2025-10-27T10:35:26.046Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Viruna Damsiha Cooray null (EMP000038) - completed sessions only:
[2025-10-27T10:35:26.047Z] [LOG]       Weekday: 134.30h
[2025-10-27T10:35:26.048Z] [LOG]       Saturday: 12.51h
[2025-10-27T10:35:26.048Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:35:26.049Z] [LOG]       Total Actual: 146.81h
[2025-10-27T10:35:26.050Z] [LOG] 
   💵 EXPECTED Earned Salary for Viruna Damsiha Cooray null (EMP000038) - until NOW:
[2025-10-27T10:35:26.051Z] [LOG]       Weekday: 153.00h × Rs.226.24 = Rs.34614.72
[2025-10-27T10:35:26.051Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-27T10:35:26.052Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:35:26.052Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:26.053Z] [LOG]       Total Expected Earned: Rs.42307.02
[2025-10-27T10:35:26.054Z] [LOG] 
   💵 ACTUAL Earned Salary for Viruna Damsiha Cooray null (EMP000038) - including live session:
[2025-10-27T10:35:26.054Z] [LOG]       Weekday: 134.30h × Rs.226.24 = Rs.30384.03
[2025-10-27T10:35:26.055Z] [LOG]       Saturday: 12.51h × Rs.427.35 = Rs.5346.15
[2025-10-27T10:35:26.056Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:35:26.056Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:26.057Z] [LOG]       Total Actual Earned: Rs.35730.18
[2025-10-27T10:35:26.060Z] [LOG] 
   📊 FINAL CALCULATION for Viruna Damsiha Cooray null (EMP000038):
[2025-10-27T10:35:26.061Z] [LOG]       Calculated At: Oct 27, 2025, 16:05:26
[2025-10-27T10:35:26.062Z] [LOG]       Expected Earned: Rs.42307.02
[2025-10-27T10:35:26.063Z] [LOG]       Actual Earned: Rs.35730.18
[2025-10-27T10:35:26.063Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:26.064Z] [LOG]       Attendance Deduction: Rs.6576.84
[2025-10-27T10:35:26.064Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:35:26.065Z] [LOG]       📉 Shortfall for Viruna Damsiha Cooray null: 24.19 hours (15.55% of expected)
[2025-10-27T10:35:26.065Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:35:26.066Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:35:26.067Z] [LOG]    Actual Earned Base: Rs.35730.18
[2025-10-27T10:35:26.068Z] [LOG]    Attendance Shortfall: Rs.6576.84
[2025-10-27T10:35:26.068Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:35:26.069Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:35:26.070Z] [LOG]    Gross Salary: 35730.1805
[2025-10-27T10:35:26.070Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:35:26.071Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:35:26.071Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:26.072Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:35:26.072Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:26.072Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:35:26.073Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:26.073Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:35:26.073Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:26.074Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:35:26.075Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:26.076Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:35:26.076Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:26.077Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:35:26.077Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:26.077Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:35:26.077Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:26.078Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:35:26.078Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:26.078Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:35:26.079Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:26.079Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:35:26.079Z] [LOG]    EPF/ETF calculated on: Rs.35730.18
[2025-10-27T10:35:26.080Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:35:26.080Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:35:26.080Z] [LOG] 💰 GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-27T10:35:26.081Z] [LOG]    Base Salary: 50000
[2025-10-27T10:35:26.081Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:35:26.081Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:35:26.082Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:26.082Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:35:26.082Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:26.083Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:35:26.083Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:26.284Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:35:26.285Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:35:26.286Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:35:26.286Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:35:26.287Z] [LOG]    Actual Earned Base: Rs.35730.18
[2025-10-27T10:35:26.287Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:35:26.288Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:35:26.289Z] [LOG]    = Gross Salary: Rs.35730.18
[2025-10-27T10:35:26.289Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:35:26.290Z] [LOG]    Attendance Shortfall (Info): Rs.6576.84
[2025-10-27T10:35:26.290Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:35:26.293Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:35:26.293Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:35:26.294Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:35:26.295Z] [LOG]    Gross Salary: Rs.35730.18
[2025-10-27T10:35:26.296Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:35:26.296Z] [LOG]    = NET SALARY: Rs.35730.18
[2025-10-27T10:35:26.297Z] [LOG] 
💾 Database Update:
[2025-10-27T10:35:26.298Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:35:26.298Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:35:26.513Z] [LOG] 
📝 Components to save:
[2025-10-27T10:35:26.514Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:35:26.514Z] [LOG]    Deduction components: 1
[2025-10-27T10:35:26.515Z] [LOG] Creating components for record efc01095-3a8b-42a3-a33f-69ff57d7a77c: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:35:26.516Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 35730.1805
}
[2025-10-27T10:35:26.740Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:35:26.973Z] [LOG] Created payroll_record_component: 28c64a9f-75aa-49d6-8150-0869b0195af8 for Base Salary
[2025-10-27T10:35:26.976Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 6576.839500000002
}
[2025-10-27T10:35:27.173Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:35:27.377Z] [LOG] Created payroll_record_component: ab2c2fdd-dcb3-455a-954d-d09cee33aa65 for Attendance Shortfall (Info)
[2025-10-27T10:35:27.775Z] [LOG] ✅ Financial balances updated successfully for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:27.776Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:35:27.776Z] [LOG] 
======================================================================
[2025-10-27T10:35:27.777Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Viruna Damsiha Cooray null
[2025-10-27T10:35:27.778Z] [LOG] ======================================================================
[2025-10-27T10:35:27.778Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T10:35:27.779Z] [LOG]    Actual Earned Base (Attendance-based): Rs.35730.18
[2025-10-27T10:35:27.779Z] [LOG]    Attendance Shortfall: Rs.6576.84
[2025-10-27T10:35:27.780Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:27.780Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:35:27.781Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:35:27.782Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:27.783Z] [LOG]    GROSS SALARY: Rs.35730.18
[2025-10-27T10:35:27.783Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:27.784Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:35:27.784Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:35:27.785Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:35:27.786Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:35:27.786Z] [LOG]       - Attendance Shortfall (Info): Rs.6576.84
[2025-10-27T10:35:27.787Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:35:27.787Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:27.788Z] [LOG]    NET SALARY: Rs.35730.18
[2025-10-27T10:35:27.788Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:35:27.789Z] [LOG] ======================================================================

[2025-10-27T10:35:27.790Z] [LOG] ✅ Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-27T10:35:27.790Z] [LOG] 📊 Progress: 33/34 (97.1%)
[2025-10-27T10:35:27.796Z] [LOG] 
🧮 Processing: Jessie null (EMP000013)
[2025-10-27T10:35:27.798Z] [LOG] 📋 Record ID: fe2ed3cf-e293-4116-8370-6897fa023e9c
[2025-10-27T10:35:27.799Z] [LOG] 
======================================================================
[2025-10-27T10:35:27.800Z] [LOG] 🧮 CALCULATING PAYROLL: Jessie null (EMP000013)
[2025-10-27T10:35:27.801Z] [LOG] ======================================================================
[2025-10-27T10:35:28.626Z] [LOG] 🔍 Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-27T10:35:28.627Z] [LOG]    Total components: 13
[2025-10-27T10:35:28.627Z] [LOG]    Applicable components: 13
[2025-10-27T10:35:28.627Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T10:35:29.456Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T10:35:29.457Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T10:35:29.662Z] [LOG] 📊 Found 0 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:29.858Z] [LOG] 📊 Found 0 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:30.054Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:30.054Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T10:35:30.055Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T10:35:30.462Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T10:35:30.463Z] [LOG]    👤 Employee: Jessie null (EMP000013)
[2025-10-27T10:35:30.463Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T10:35:30.464Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T10:35:30.464Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-27T10:35:30.465Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T10:35:30.677Z] [LOG] 
   💵 Pre-calculated Rates for Jessie null (EMP000013):
[2025-10-27T10:35:30.678Z] [LOG]       Daily Salary: Rs.2307.69
[2025-10-27T10:35:30.678Z] [LOG]       Weekday Hourly Rate: Rs.271.49
[2025-10-27T10:35:30.679Z] [LOG]       Saturday Hourly Rate: Rs.271.49
[2025-10-27T10:35:30.679Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T10:35:30.680Z] [LOG] 
   📊 Full Period Working Days for Jessie null (EMP000013):
[2025-10-27T10:35:30.681Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-27T10:35:31.286Z] [LOG] 
   📊 Working Days for Expected Calculation for Jessie null (EMP000013):
[2025-10-27T10:35:31.287Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T10:35:31.288Z] [LOG]       Weekdays: 18, Saturdays: 4, Sundays: 0
[2025-10-27T10:35:31.494Z] [LOG] 
   ⏰ Calculating Completed Hours for Jessie null (EMP000013) - All completed sessions:
[2025-10-27T10:35:31.495Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T10:35:31.496Z] [LOG]       Total completed sessions found: 15
[2025-10-27T10:35:31.496Z] [LOG] 
      📋 Attendance Breakdown for Jessie null (EMP000013):
[2025-10-27T10:35:31.497Z] [LOG]          1. 2025-10-01 (Weekday): 6.75h
[2025-10-27T10:35:31.498Z] [LOG]          2. 2025-10-02 (Weekday): 7.97h
[2025-10-27T10:35:31.498Z] [LOG]          3. 2025-10-03 (Weekday): 7.81h
[2025-10-27T10:35:31.499Z] [LOG]          4. 2025-10-07 (Weekday): 7.58h
[2025-10-27T10:35:31.499Z] [LOG]          5. 2025-10-08 (Weekday): 7.71h
[2025-10-27T10:35:31.500Z] [LOG]          6. 2025-10-10 (Weekday): 7.69h
[2025-10-27T10:35:31.500Z] [LOG]          7. 2025-10-13 (Weekday): 8.11h
[2025-10-27T10:35:31.501Z] [LOG]          8. 2025-10-14 (Weekday): 7.71h
[2025-10-27T10:35:31.502Z] [LOG]          9. 2025-10-15 (Weekday): 8.08h
[2025-10-27T10:35:31.503Z] [LOG]          10. 2025-10-16 (Weekday): 7.48h
[2025-10-27T10:35:31.503Z] [LOG]          11. 2025-10-17 (Weekday): 7.81h
[2025-10-27T10:35:31.504Z] [LOG]          12. 2025-10-21 (Weekday): 7.25h
[2025-10-27T10:35:31.504Z] [LOG]          13. 2025-10-22 (Weekday): 7.31h
[2025-10-27T10:35:31.505Z] [LOG]          14. 2025-10-23 (Weekday): 7.68h
[2025-10-27T10:35:31.506Z] [LOG]          15. 2025-10-24 (Weekday): 7.15h
[2025-10-27T10:35:31.710Z] [LOG] 
      📊 Aggregated Totals for Jessie null (EMP000013):
[2025-10-27T10:35:31.710Z] [LOG]          Weekday: 114.09h
[2025-10-27T10:35:31.711Z] [LOG]          Saturday: 0.00h
[2025-10-27T10:35:31.711Z] [LOG]          Sunday: 0.00h
[2025-10-27T10:35:31.712Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T10:35:31.713Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Jessie null (EMP000013) - completed sessions only:
[2025-10-27T10:35:31.713Z] [LOG]       Weekday: 153.00h
[2025-10-27T10:35:31.714Z] [LOG]       Saturday: 34.00h
[2025-10-27T10:35:31.714Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:35:31.715Z] [LOG]       Total Expected: 187.00h
[2025-10-27T10:35:31.716Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Jessie null (EMP000013) - completed sessions only:
[2025-10-27T10:35:31.716Z] [LOG]       Weekday: 114.09h
[2025-10-27T10:35:31.717Z] [LOG]       Saturday: 0.00h
[2025-10-27T10:35:31.718Z] [LOG]       Sunday: 0.00h
[2025-10-27T10:35:31.719Z] [LOG]       Total Actual: 114.09h
[2025-10-27T10:35:31.719Z] [LOG] 
   💵 EXPECTED Earned Salary for Jessie null (EMP000013) - until NOW:
[2025-10-27T10:35:31.720Z] [LOG]       Weekday: 153.00h × Rs.271.49 = Rs.41537.97
[2025-10-27T10:35:31.721Z] [LOG]       Saturday: 34.00h × Rs.271.49 = Rs.9230.66
[2025-10-27T10:35:31.721Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:35:31.722Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:31.722Z] [LOG]       Total Expected Earned: Rs.50768.63
[2025-10-27T10:35:31.723Z] [LOG] 
   💵 ACTUAL Earned Salary for Jessie null (EMP000013) - including live session:
[2025-10-27T10:35:31.724Z] [LOG]       Weekday: 114.09h × Rs.271.49 = Rs.30974.29
[2025-10-27T10:35:31.726Z] [LOG]       Saturday: 0.00h × Rs.271.49 = Rs.0.00
[2025-10-27T10:35:31.727Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T10:35:31.728Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:31.728Z] [LOG]       Total Actual Earned: Rs.30974.29
[2025-10-27T10:35:31.729Z] [LOG] 
   📊 FINAL CALCULATION for Jessie null (EMP000013):
[2025-10-27T10:35:31.730Z] [LOG]       Calculated At: Oct 27, 2025, 16:05:31
[2025-10-27T10:35:31.731Z] [LOG]       Expected Earned: Rs.50768.63
[2025-10-27T10:35:31.731Z] [LOG]       Actual Earned: Rs.30974.29
[2025-10-27T10:35:31.732Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T10:35:31.733Z] [LOG]       Attendance Deduction: Rs.19794.34
[2025-10-27T10:35:31.734Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T10:35:31.734Z] [LOG]       📉 Shortfall for Jessie null: 72.91 hours (38.99% of expected)
[2025-10-27T10:35:31.735Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T10:35:31.736Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-27T10:35:31.737Z] [LOG]    Actual Earned Base: Rs.30974.29
[2025-10-27T10:35:31.737Z] [LOG]    Attendance Shortfall: Rs.19794.34
[2025-10-27T10:35:31.739Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T10:35:31.740Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T10:35:31.742Z] [LOG]    Gross Salary: 30974.294100000003
[2025-10-27T10:35:31.743Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T10:35:31.743Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T10:35:31.744Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:31.744Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T10:35:31.744Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:31.745Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T10:35:31.745Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:31.745Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T10:35:31.746Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:31.746Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T10:35:31.746Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:31.747Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T10:35:31.747Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:31.747Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T10:35:31.747Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:31.747Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T10:35:31.748Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:31.748Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T10:35:31.748Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:31.749Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T10:35:31.749Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:31.749Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T10:35:31.749Z] [LOG]    EPF/ETF calculated on: Rs.30974.29
[2025-10-27T10:35:31.750Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T10:35:31.750Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T10:35:31.750Z] [LOG] 💰 GROSS CALCULATION for Jessie null:
[2025-10-27T10:35:31.751Z] [LOG]    Base Salary: 60000
[2025-10-27T10:35:31.751Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T10:35:31.751Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T10:35:31.751Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:31.752Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T10:35:31.752Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:31.752Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T10:35:31.752Z] [LOG]    Fixed amount: 0
[2025-10-27T10:35:31.957Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T10:35:31.959Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:35:31.960Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T10:35:31.960Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T10:35:31.961Z] [LOG]    Actual Earned Base: Rs.30974.29
[2025-10-27T10:35:31.961Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T10:35:31.962Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T10:35:31.963Z] [LOG]    = Gross Salary: Rs.30974.29
[2025-10-27T10:35:31.963Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T10:35:31.964Z] [LOG]    Attendance Shortfall (Info): Rs.19794.34
[2025-10-27T10:35:31.964Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T10:35:31.965Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T10:35:31.966Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T10:35:31.967Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T10:35:31.967Z] [LOG]    Gross Salary: Rs.30974.29
[2025-10-27T10:35:31.968Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T10:35:31.969Z] [LOG]    = NET SALARY: Rs.30974.29
[2025-10-27T10:35:31.969Z] [LOG] 
💾 Database Update:
[2025-10-27T10:35:31.970Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T10:35:31.971Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T10:35:32.182Z] [LOG] 
📝 Components to save:
[2025-10-27T10:35:32.183Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T10:35:32.184Z] [LOG]    Deduction components: 1
[2025-10-27T10:35:32.184Z] [LOG] Creating components for record fe2ed3cf-e293-4116-8370-6897fa023e9c: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T10:35:32.186Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 30974.294100000003
}
[2025-10-27T10:35:32.389Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T10:35:32.589Z] [LOG] Created payroll_record_component: 9f27b694-6f5c-42e9-9528-108f146dce85 for Base Salary
[2025-10-27T10:35:32.590Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 19794.335900000002
}
[2025-10-27T10:35:32.790Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T10:35:32.993Z] [LOG] Created payroll_record_component: 137c0bf8-1fb4-4f79-925e-aa60e3c5d1e8 for Attendance Shortfall (Info)
[2025-10-27T10:35:33.399Z] [LOG] ✅ Financial balances updated successfully for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-27T10:35:33.400Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T10:35:33.400Z] [LOG] 
======================================================================
[2025-10-27T10:35:33.401Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Jessie null
[2025-10-27T10:35:33.402Z] [LOG] ======================================================================
[2025-10-27T10:35:33.402Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-27T10:35:33.403Z] [LOG]    Actual Earned Base (Attendance-based): Rs.30974.29
[2025-10-27T10:35:33.403Z] [LOG]    Attendance Shortfall: Rs.19794.34
[2025-10-27T10:35:33.404Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:33.405Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T10:35:33.405Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T10:35:33.406Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:33.407Z] [LOG]    GROSS SALARY: Rs.30974.29
[2025-10-27T10:35:33.409Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:33.409Z] [LOG]    Deductions Breakdown:
[2025-10-27T10:35:33.410Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T10:35:33.411Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T10:35:33.411Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T10:35:33.412Z] [LOG]       - Attendance Shortfall (Info): Rs.19794.34
[2025-10-27T10:35:33.412Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T10:35:33.413Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T10:35:33.414Z] [LOG]    NET SALARY: Rs.30974.29
[2025-10-27T10:35:33.414Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T10:35:33.415Z] [LOG] ======================================================================

[2025-10-27T10:35:33.416Z] [LOG] ✅ Jessie null: Calculation completed successfully
[2025-10-27T10:35:33.417Z] [LOG] 📊 Progress: 34/34 (100.0%)
[2025-10-27T10:35:33.418Z] [LOG] 
============================================================
[2025-10-27T10:35:33.419Z] [LOG] 📈 Processing Summary: 34 successful, 0 failed
[2025-10-27T10:35:35.237Z] [LOG] 🎉 Payroll calculation completed successfully!
[2025-10-27T10:35:35.238Z] [LOG] 📊 Final Summary: 34 processed, 0 errors
[2025-10-27T10:35:35.238Z] [INFO] ================================================================================
[2025-10-27T10:35:35.238Z] [INFO] ⏰ Completed at: 2025-10-27T10:35:35.238Z
[2025-10-27T10:35:35.238Z] [INFO] 📊 Total log entries: 6075