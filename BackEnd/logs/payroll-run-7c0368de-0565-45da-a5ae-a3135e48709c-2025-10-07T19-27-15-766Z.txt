[2025-10-07T19:27:15.767Z] [INFO] 🚀 Payroll calculation logging started for run: 7c0368de-0565-45da-a5ae-a3135e48709c
[2025-10-07T19:27:15.767Z] [INFO] 📁 Log file: E:\smart_attendance_system\BackEnd\logs\payroll-run-7c0368de-0565-45da-a5ae-a3135e48709c-2025-10-07T19-27-15-766Z.txt
[2025-10-07T19:27:15.767Z] [INFO] ⏰ Started at: 2025-10-07T19:27:15.767Z
[2025-10-07T19:27:15.767Z] [INFO] ================================================================================
[2025-10-07T19:27:15.767Z] [LOG] 🚀 Starting payroll calculation for run: 7c0368de-0565-45da-a5ae-a3135e48709c
[2025-10-07T19:27:15.768Z] [LOG] 👤 Client ID: it-signature, User ID: 059304ea-24a5-4d78-a290-cf09b9e53c4c
[2025-10-07T19:27:16.177Z] [LOG] ✅ Payroll run verified: october (MONTHLY_2025_10_REGULAR)
[2025-10-07T19:27:16.424Z] [LOG] 📊 Status updated to 'calculating'
[2025-10-07T19:27:16.869Z] [LOG] 👥 Processing 34 employee records:
[2025-10-07T19:27:16.870Z] [LOG] ============================================================
[2025-10-07T19:27:16.870Z] [LOG] 
🧮 Processing: Chemil null (EMP000040)
[2025-10-07T19:27:16.871Z] [LOG] 📋 Record ID: 03a40f56-4f6c-40b5-904d-a7ffab6a4ce2
[2025-10-07T19:27:17.999Z] [LOG] 🔍 Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:18.000Z] [LOG]    Total components: 7
[2025-10-07T19:27:18.001Z] [LOG]    Applicable components: 7
[2025-10-07T19:27:18.001Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-07T19:27:19.555Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:27:19.842Z] [LOG] 🔍 Fetched 5 attendance records for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:20.092Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:27:20.632Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:21.410Z] [LOG] Employee 01442599-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:27:21.410Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:27:21.411Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:27:21.414Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:27:21.421Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:21.422Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:27:21.422Z] [LOG] ================================================================================
[2025-10-07T19:27:21.423Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:21.423Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:21.424Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:21.425Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:21.425Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:21.426Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:21.428Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:27:21.429Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:27:21.431Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:21.431Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:21.432Z] [LOG] ================================================================================
[2025-10-07T19:27:21.434Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:27:21.434Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:27:21.435Z] [LOG]    Expected hours: 34h
[2025-10-07T19:27:21.435Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:27:21.436Z] [LOG] ================================================================================
[2025-10-07T19:27:21.719Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430...
[2025-10-07T19:27:21.720Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:27:22.005Z] [LOG] 📊 Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:22.272Z] [LOG] 📊 Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:22.532Z] [LOG] 📊 Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:22.534Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:27:22.537Z] [LOG] 💰 GROSS CALCULATION for Chemil null:
[2025-10-07T19:27:22.538Z] [LOG]    Base Salary: 250000
[2025-10-07T19:27:22.538Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:27:22.796Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:27:23.036Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:23.541Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:27:23.793Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:27:23.911Z] [LOG] Employee 01442599-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:27:23.915Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:27:23.915Z] [LOG] ============================================================
[2025-10-07T19:27:23.917Z] [LOG] 👤 Employee ID: 01442599-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:23.926Z] [LOG] 💰 Base Salary: 250,000
[2025-10-07T19:27:23.926Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:27:23.927Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:27:23.929Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:27:23.930Z] [LOG] 💵 Per-Day Salary: 50000.00
[2025-10-07T19:27:23.931Z] [LOG] ⏱️  Hourly Rate: 5882.35
[2025-10-07T19:27:23.932Z] [LOG] 
[2025-10-07T19:27:23.932Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:27:23.932Z] [LOG]    Expected Hours: 34
[2025-10-07T19:27:23.933Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:27:23.934Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:27:23.935Z] [LOG]    Worked Hours: 34
[2025-10-07T19:27:23.935Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:27:23.936Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:27:23.936Z] [LOG] ============================================================
[2025-10-07T19:27:24.353Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:27:24.354Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:27:24.486Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:24.741Z] [LOG] 📅 Weekend absence check for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:24.741Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:27:24.742Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:27:24.742Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:27:24.744Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:27:24.744Z] [LOG]    Gross Salary: 250000
[2025-10-07T19:27:24.745Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:27:24.749Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:27:24.750Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:24.751Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:27:24.751Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:24.752Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:27:24.753Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:24.754Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:27:24.754Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:24.755Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:27:24.756Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:24.756Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:27:24.757Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:24.757Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:27:24.758Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:24.759Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:27:24.760Z] [LOG] Regular deductions for Chemil null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:27:24.761Z] [LOG] Combined deductions for Chemil null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:27:25.082Z] [LOG] Creating components for record 03a40f56-4f6c-40b5-904d-a7ffab6a4ce2: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 1
}
[2025-10-07T19:27:25.083Z] [LOG] Processing component: {
  "name": "Income Tax",
  "type": "tax",
  "amount": 12000
}
[2025-10-07T19:27:25.632Z] [ERROR] Failed to create component INCOME_TAX: Data truncated for column 'component_type' at row 1
[2025-10-07T19:27:25.633Z] [ERROR] Component data: {
  "code": "INCOME_TAX",
  "name": "Income Tax",
  "type": "tax",
  "category": "tax",
  "amount": 12000
}
[2025-10-07T19:27:25.634Z] [ERROR] Full error: {
  "message": "Data truncated for column 'component_type' at row 1",
  "code": "WARN_DATA_TRUNCATED",
  "errno": 1265,
  "sql": "\n                        INSERT INTO payroll_components (\n                            id, client_id, component_name, component_type, category, \n                            calculation_type, is_taxable, is_mandatory\n                        ) VALUES (?, ?, ?, ?, ?, 'fixed', ?, ?)\n                    ",
  "sqlState": "01000",
  "sqlMessage": "Data truncated for column 'component_type' at row 1"
}
[2025-10-07T19:27:25.636Z] [LOG] Attempting alternative insertion for component: Income Tax
[2025-10-07T19:27:26.134Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:27:26.136Z] [ERROR] ❌ Error updating financial balances for employee 01442599-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:27:26.140Z] [LOG] ✅ Chemil null: Calculation completed successfully
[2025-10-07T19:27:26.140Z] [LOG] 📊 Progress: 1/34 (2.9%)
[2025-10-07T19:27:26.141Z] [LOG] 
🧮 Processing: Waruni null (EMP000024)
[2025-10-07T19:27:26.142Z] [LOG] 📋 Record ID: 0979cc70-4806-4134-aa95-73c539b158bb
[2025-10-07T19:27:26.691Z] [LOG] 🔍 Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:26.691Z] [LOG]    Total components: 7
[2025-10-07T19:27:26.692Z] [LOG]    Applicable components: 7
[2025-10-07T19:27:26.692Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-07T19:27:27.724Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:27:27.855Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:27.985Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:27:28.231Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:28.607Z] [LOG] Employee 0143e40c-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:27:28.608Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:27:28.609Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:27:28.610Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:27:28.611Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:28.614Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:27:28.614Z] [LOG] ================================================================================
[2025-10-07T19:27:28.615Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:28.616Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:28.617Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:28.618Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:28.619Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:28.620Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:28.621Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:27:28.621Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:27:28.622Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:28.623Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:28.624Z] [LOG] ================================================================================
[2025-10-07T19:27:28.624Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:27:28.625Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:27:28.625Z] [LOG]    Expected hours: 34h
[2025-10-07T19:27:28.626Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:27:28.626Z] [LOG] ================================================================================
[2025-10-07T19:27:28.774Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430...
[2025-10-07T19:27:28.775Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:27:28.909Z] [LOG] 📊 Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:29.039Z] [LOG] 📊 Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:29.171Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:29.172Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:27:29.173Z] [LOG] 💰 GROSS CALCULATION for Waruni null:
[2025-10-07T19:27:29.174Z] [LOG]    Base Salary: 50000
[2025-10-07T19:27:29.175Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:27:29.299Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:27:29.418Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:29.794Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:27:29.916Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:27:30.051Z] [LOG] Employee 0143e40c-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:27:30.054Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:27:30.054Z] [LOG] ============================================================
[2025-10-07T19:27:30.055Z] [LOG] 👤 Employee ID: 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:30.056Z] [LOG] 💰 Base Salary: 50,000
[2025-10-07T19:27:30.056Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:27:30.056Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:27:30.057Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:27:30.057Z] [LOG] 💵 Per-Day Salary: 10000.00
[2025-10-07T19:27:30.058Z] [LOG] ⏱️  Hourly Rate: 1176.47
[2025-10-07T19:27:30.059Z] [LOG] 
[2025-10-07T19:27:30.061Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:27:30.063Z] [LOG]    Expected Hours: 34
[2025-10-07T19:27:30.063Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:27:30.065Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:27:30.065Z] [LOG]    Worked Hours: 34
[2025-10-07T19:27:30.066Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:27:30.066Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:27:30.067Z] [LOG] ============================================================
[2025-10-07T19:27:30.336Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:27:30.337Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:27:30.476Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:30.617Z] [LOG] 📅 Weekend absence check for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:30.617Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:27:30.618Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:27:30.618Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:27:30.619Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:27:30.619Z] [LOG]    Gross Salary: 50000
[2025-10-07T19:27:30.619Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:27:30.620Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:27:30.620Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:30.621Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:27:30.621Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:30.622Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:27:30.622Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:30.623Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:27:30.624Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:30.625Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:27:30.626Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:30.627Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:27:30.628Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:30.630Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:27:30.631Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:30.632Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:27:30.632Z] [LOG] Regular deductions for Waruni null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:27:30.633Z] [LOG] Combined deductions for Waruni null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:27:30.776Z] [LOG] Creating components for record 0979cc70-4806-4134-aa95-73c539b158bb: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:27:31.149Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:27:31.151Z] [ERROR] ❌ Error updating financial balances for employee 0143e40c-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:27:31.152Z] [LOG] ✅ Waruni null: Calculation completed successfully
[2025-10-07T19:27:31.153Z] [LOG] 📊 Progress: 2/34 (5.9%)
[2025-10-07T19:27:31.154Z] [LOG] 
🧮 Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-07T19:27:31.155Z] [LOG] 📋 Record ID: 0c19fc08-543a-494b-8312-38edf4a663c4
[2025-10-07T19:27:31.714Z] [LOG] 🔍 Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:31.715Z] [LOG]    Total components: 7
[2025-10-07T19:27:31.715Z] [LOG]    Applicable components: 7
[2025-10-07T19:27:31.716Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-07T19:27:32.474Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:27:32.608Z] [LOG] 🔍 Fetched 5 attendance records for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:32.735Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:27:32.990Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:33.366Z] [LOG] Employee 01443963-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:27:33.367Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:27:33.367Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:27:33.368Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:27:33.370Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:33.370Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:27:33.371Z] [LOG] ================================================================================
[2025-10-07T19:27:33.371Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:33.372Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:33.372Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:33.373Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:33.374Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:33.375Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:33.376Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:27:33.376Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:27:33.377Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:33.378Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:33.380Z] [LOG] ================================================================================
[2025-10-07T19:27:33.381Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:27:33.381Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:27:33.382Z] [LOG]    Expected hours: 34h
[2025-10-07T19:27:33.383Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:27:33.384Z] [LOG] ================================================================================
[2025-10-07T19:27:33.529Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430...
[2025-10-07T19:27:33.530Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:27:33.649Z] [LOG] 📊 Found 0 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:33.798Z] [LOG] 📊 Found 0 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:33.926Z] [LOG] 📊 Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:33.927Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:27:33.928Z] [LOG] 💰 GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-07T19:27:33.928Z] [LOG]    Base Salary: 50000
[2025-10-07T19:27:33.930Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:27:34.067Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:27:34.191Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:34.566Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:27:34.694Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:27:34.826Z] [LOG] Employee 01443963-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:27:34.827Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:27:34.827Z] [LOG] ============================================================
[2025-10-07T19:27:34.828Z] [LOG] 👤 Employee ID: 01443963-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:34.828Z] [LOG] 💰 Base Salary: 50,000
[2025-10-07T19:27:34.830Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:27:34.831Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:27:34.833Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:27:34.834Z] [LOG] 💵 Per-Day Salary: 10000.00
[2025-10-07T19:27:34.834Z] [LOG] ⏱️  Hourly Rate: 1176.47
[2025-10-07T19:27:34.835Z] [LOG] 
[2025-10-07T19:27:34.835Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:27:34.836Z] [LOG]    Expected Hours: 34
[2025-10-07T19:27:34.836Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:27:34.837Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:27:34.837Z] [LOG]    Worked Hours: 34
[2025-10-07T19:27:34.838Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:27:34.838Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:27:34.840Z] [LOG] ============================================================
[2025-10-07T19:27:35.093Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:27:35.094Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:27:35.222Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:35.363Z] [LOG] 📅 Weekend absence check for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:35.363Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:27:35.364Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:27:35.364Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:27:35.365Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:27:35.366Z] [LOG]    Gross Salary: 50000
[2025-10-07T19:27:35.366Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:27:35.367Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:27:35.367Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:35.368Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:27:35.368Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:35.369Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:27:35.369Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:35.369Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:27:35.372Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:35.373Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:27:35.373Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:35.374Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:27:35.374Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:35.375Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:27:35.375Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:35.376Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:27:35.376Z] [LOG] Regular deductions for R. D.A Kaushalya null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:27:35.378Z] [LOG] Combined deductions for R. D.A Kaushalya null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:27:35.505Z] [LOG] Creating components for record 0c19fc08-543a-494b-8312-38edf4a663c4: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:27:35.877Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:27:35.882Z] [ERROR] ❌ Error updating financial balances for employee 01443963-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:27:35.883Z] [LOG] ✅ R. D.A Kaushalya null: Calculation completed successfully
[2025-10-07T19:27:35.884Z] [LOG] 📊 Progress: 3/34 (8.8%)
[2025-10-07T19:27:35.884Z] [LOG] 
🧮 Processing: Shandeep null (EMP000034)
[2025-10-07T19:27:35.885Z] [LOG] 📋 Record ID: 12897ab0-39d9-4d0b-b342-ccc0dd21ca7e
[2025-10-07T19:27:36.392Z] [LOG] 🔍 Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:36.392Z] [LOG]    Total components: 7
[2025-10-07T19:27:36.393Z] [LOG]    Applicable components: 7
[2025-10-07T19:27:36.393Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-07T19:27:37.143Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:27:37.265Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:37.392Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:27:37.675Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:38.033Z] [LOG] Employee 0143fc5a-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:27:38.034Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:27:38.035Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:27:38.035Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:27:38.037Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:38.037Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:27:38.038Z] [LOG] ================================================================================
[2025-10-07T19:27:38.038Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:38.039Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:38.040Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:38.040Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:38.042Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:38.043Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:38.044Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:27:38.048Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:27:38.049Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:38.050Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:38.050Z] [LOG] ================================================================================
[2025-10-07T19:27:38.051Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:27:38.051Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:27:38.052Z] [LOG]    Expected hours: 34h
[2025-10-07T19:27:38.052Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:27:38.053Z] [LOG] ================================================================================
[2025-10-07T19:27:38.196Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430...
[2025-10-07T19:27:38.196Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:27:38.340Z] [LOG] 📊 Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:38.483Z] [LOG] 📊 Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:38.635Z] [LOG] 📊 Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:38.635Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:27:38.636Z] [LOG] 💰 GROSS CALCULATION for Shandeep null:
[2025-10-07T19:27:38.637Z] [LOG]    Base Salary: 80000
[2025-10-07T19:27:38.637Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:27:38.759Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:27:38.885Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:39.246Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:27:39.369Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:27:39.489Z] [LOG] Employee 0143fc5a-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:27:39.490Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:27:39.490Z] [LOG] ============================================================
[2025-10-07T19:27:39.491Z] [LOG] 👤 Employee ID: 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:39.491Z] [LOG] 💰 Base Salary: 80,000
[2025-10-07T19:27:39.492Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:27:39.492Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:27:39.493Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:27:39.493Z] [LOG] 💵 Per-Day Salary: 16000.00
[2025-10-07T19:27:39.494Z] [LOG] ⏱️  Hourly Rate: 1882.35
[2025-10-07T19:27:39.494Z] [LOG] 
[2025-10-07T19:27:39.495Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:27:39.497Z] [LOG]    Expected Hours: 34
[2025-10-07T19:27:39.498Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:27:39.499Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:27:39.499Z] [LOG]    Worked Hours: 34
[2025-10-07T19:27:39.500Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:27:39.501Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:27:39.501Z] [LOG] ============================================================
[2025-10-07T19:27:39.760Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:27:39.761Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:27:39.900Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:40.037Z] [LOG] 📅 Weekend absence check for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:40.038Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:27:40.039Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:27:40.039Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:27:40.040Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:27:40.040Z] [LOG]    Gross Salary: 80000
[2025-10-07T19:27:40.041Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:27:40.041Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:27:40.041Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:40.042Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:27:40.042Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:40.043Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:27:40.043Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:40.043Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:27:40.045Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:40.048Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:27:40.049Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:40.049Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:27:40.050Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:40.050Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:27:40.052Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:40.052Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:27:40.053Z] [LOG] Regular deductions for Shandeep null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:27:40.053Z] [LOG] Combined deductions for Shandeep null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:27:40.204Z] [LOG] Creating components for record 12897ab0-39d9-4d0b-b342-ccc0dd21ca7e: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:27:40.569Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:27:40.572Z] [ERROR] ❌ Error updating financial balances for employee 0143fc5a-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:27:40.574Z] [LOG] ✅ Shandeep null: Calculation completed successfully
[2025-10-07T19:27:40.575Z] [LOG] 📊 Progress: 4/34 (11.8%)
[2025-10-07T19:27:40.575Z] [LOG] 
🧮 Processing: Dharshika null (EMP000009)
[2025-10-07T19:27:40.576Z] [LOG] 📋 Record ID: 28795e42-2faf-408c-a772-217067bc0242
[2025-10-07T19:27:41.124Z] [LOG] 🔍 Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:41.125Z] [LOG]    Total components: 7
[2025-10-07T19:27:41.125Z] [LOG]    Applicable components: 7
[2025-10-07T19:27:41.126Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-07T19:27:41.904Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:27:42.040Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:42.164Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:27:42.417Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:42.947Z] [LOG] Employee 0143a994-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:27:42.949Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:27:42.949Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:27:42.950Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:27:42.951Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:42.952Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:27:42.953Z] [LOG] ================================================================================
[2025-10-07T19:27:42.954Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:42.955Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:42.956Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:42.958Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:42.958Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:42.959Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:42.960Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:27:42.960Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:27:42.964Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:42.964Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:42.966Z] [LOG] ================================================================================
[2025-10-07T19:27:42.966Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:27:42.968Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:27:42.968Z] [LOG]    Expected hours: 34h
[2025-10-07T19:27:42.970Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:27:42.970Z] [LOG] ================================================================================
[2025-10-07T19:27:43.116Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430...
[2025-10-07T19:27:43.116Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:27:43.245Z] [LOG] 📊 Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:43.382Z] [LOG] 📊 Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:43.509Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:43.510Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:27:43.511Z] [LOG] 💰 GROSS CALCULATION for Dharshika null:
[2025-10-07T19:27:43.513Z] [LOG]    Base Salary: 100000
[2025-10-07T19:27:43.514Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:27:43.640Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:27:43.766Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:44.177Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:27:44.297Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:27:44.418Z] [LOG] Employee 0143a994-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:27:44.419Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:27:44.420Z] [LOG] ============================================================
[2025-10-07T19:27:44.420Z] [LOG] 👤 Employee ID: 0143a994-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:44.420Z] [LOG] 💰 Base Salary: 100,000
[2025-10-07T19:27:44.421Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:27:44.421Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:27:44.422Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:27:44.422Z] [LOG] 💵 Per-Day Salary: 20000.00
[2025-10-07T19:27:44.423Z] [LOG] ⏱️  Hourly Rate: 2352.94
[2025-10-07T19:27:44.423Z] [LOG] 
[2025-10-07T19:27:44.424Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:27:44.424Z] [LOG]    Expected Hours: 34
[2025-10-07T19:27:44.425Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:27:44.427Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:27:44.428Z] [LOG]    Worked Hours: 34
[2025-10-07T19:27:44.428Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:27:44.432Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:27:44.432Z] [LOG] ============================================================
[2025-10-07T19:27:44.676Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:27:44.676Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:27:44.804Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:44.932Z] [LOG] 📅 Weekend absence check for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:44.932Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:27:44.933Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:27:44.934Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:27:44.934Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:27:44.934Z] [LOG]    Gross Salary: 100000
[2025-10-07T19:27:44.935Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:27:44.935Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:27:44.936Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:44.936Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:27:44.937Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:44.937Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:27:44.938Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:44.939Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:27:44.940Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:44.941Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:27:44.941Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:44.941Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:27:44.942Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:44.942Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:27:44.943Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:44.945Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:27:44.946Z] [LOG] Regular deductions for Dharshika null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:27:44.948Z] [LOG] Combined deductions for Dharshika null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:27:45.103Z] [LOG] Creating components for record 28795e42-2faf-408c-a772-217067bc0242: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:27:45.474Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:27:45.475Z] [ERROR] ❌ Error updating financial balances for employee 0143a994-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:27:45.477Z] [LOG] ✅ Dharshika null: Calculation completed successfully
[2025-10-07T19:27:45.477Z] [LOG] 📊 Progress: 5/34 (14.7%)
[2025-10-07T19:27:45.478Z] [LOG] 
🧮 Processing: Ratheeshanan null (EMP000047)
[2025-10-07T19:27:45.478Z] [LOG] 📋 Record ID: 4c64db22-0611-410b-b790-f73627e2a2eb
[2025-10-07T19:27:45.968Z] [LOG] 🔍 Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:45.968Z] [LOG]    Total components: 7
[2025-10-07T19:27:45.969Z] [LOG]    Applicable components: 7
[2025-10-07T19:27:45.969Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-07T19:27:46.739Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:27:46.858Z] [LOG] 🔍 Fetched 5 attendance records for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:46.985Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:27:47.263Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:47.936Z] [LOG] Employee 01444966-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:27:47.938Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:27:47.939Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:27:47.940Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:27:47.942Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:47.944Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:27:47.944Z] [LOG] ================================================================================
[2025-10-07T19:27:47.947Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:47.948Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:47.949Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:47.950Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:47.953Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:47.954Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:47.955Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:27:47.955Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:27:47.956Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:47.956Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:47.958Z] [LOG] ================================================================================
[2025-10-07T19:27:47.959Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:27:47.959Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:27:47.960Z] [LOG]    Expected hours: 34h
[2025-10-07T19:27:47.960Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:27:47.961Z] [LOG] ================================================================================
[2025-10-07T19:27:48.124Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430...
[2025-10-07T19:27:48.124Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:27:48.246Z] [LOG] 📊 Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:48.366Z] [LOG] 📊 Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:48.800Z] [LOG] 📊 Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:48.801Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:27:48.803Z] [LOG] 💰 GROSS CALCULATION for Ratheeshanan null:
[2025-10-07T19:27:48.804Z] [LOG]    Base Salary: 25000
[2025-10-07T19:27:48.804Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:27:48.924Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:27:49.044Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:49.413Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:27:49.545Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:27:49.681Z] [LOG] Employee 01444966-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:27:49.681Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:27:49.682Z] [LOG] ============================================================
[2025-10-07T19:27:49.682Z] [LOG] 👤 Employee ID: 01444966-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:49.683Z] [LOG] 💰 Base Salary: 25,000
[2025-10-07T19:27:49.683Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:27:49.683Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:27:49.684Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:27:49.684Z] [LOG] 💵 Per-Day Salary: 5000.00
[2025-10-07T19:27:49.684Z] [LOG] ⏱️  Hourly Rate: 588.24
[2025-10-07T19:27:49.685Z] [LOG] 
[2025-10-07T19:27:49.685Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:27:49.686Z] [LOG]    Expected Hours: 34
[2025-10-07T19:27:49.686Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:27:49.687Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:27:49.688Z] [LOG]    Worked Hours: 34
[2025-10-07T19:27:49.688Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:27:49.689Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:27:49.689Z] [LOG] ============================================================
[2025-10-07T19:27:49.954Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:27:49.955Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:27:50.074Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:50.195Z] [LOG] 📅 Weekend absence check for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:50.196Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:27:50.197Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:27:50.197Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:27:50.198Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:27:50.198Z] [LOG]    Gross Salary: 25000
[2025-10-07T19:27:50.199Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:27:50.199Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:27:50.200Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:50.200Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:27:50.200Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:50.201Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:27:50.202Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:50.203Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:27:50.204Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:50.204Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:27:50.205Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:50.205Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:27:50.206Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:50.206Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:27:50.206Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:50.206Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:27:50.207Z] [LOG] Regular deductions for Ratheeshanan null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:27:50.207Z] [LOG] Combined deductions for Ratheeshanan null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:27:50.327Z] [LOG] Creating components for record 4c64db22-0611-410b-b790-f73627e2a2eb: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:27:50.712Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:27:50.714Z] [ERROR] ❌ Error updating financial balances for employee 01444966-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:27:50.715Z] [LOG] ✅ Ratheeshanan null: Calculation completed successfully
[2025-10-07T19:27:50.716Z] [LOG] 📊 Progress: 6/34 (17.6%)
[2025-10-07T19:27:50.716Z] [LOG] 
🧮 Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-07T19:27:50.716Z] [LOG] 📋 Record ID: 4caa10a0-aa40-4f58-8781-744c765c2e04
[2025-10-07T19:27:51.243Z] [LOG] 🔍 Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:51.244Z] [LOG]    Total components: 7
[2025-10-07T19:27:51.245Z] [LOG]    Applicable components: 7
[2025-10-07T19:27:51.246Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-07T19:27:51.997Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:27:52.118Z] [LOG] 🔍 Fetched 5 attendance records for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:52.267Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:27:52.544Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:52.920Z] [LOG] Employee 0144315c-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:27:52.921Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:27:52.921Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:27:52.922Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:27:52.923Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:52.923Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:27:52.924Z] [LOG] ================================================================================
[2025-10-07T19:27:52.924Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:52.925Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:52.925Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:52.925Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:52.925Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:52.926Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:52.926Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:27:52.926Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:27:52.926Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:52.926Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:52.927Z] [LOG] ================================================================================
[2025-10-07T19:27:52.928Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:27:52.928Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:27:52.929Z] [LOG]    Expected hours: 34h
[2025-10-07T19:27:52.929Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:27:52.929Z] [LOG] ================================================================================
[2025-10-07T19:27:53.075Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430...
[2025-10-07T19:27:53.075Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:27:53.208Z] [LOG] 📊 Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:53.341Z] [LOG] 📊 Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:53.487Z] [LOG] 📊 Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:53.488Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:27:53.489Z] [LOG] 💰 GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-07T19:27:53.489Z] [LOG]    Base Salary: 50000
[2025-10-07T19:27:53.490Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:27:53.612Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:27:53.763Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:54.180Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:27:54.306Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:27:54.426Z] [LOG] Employee 0144315c-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:27:54.427Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:27:54.427Z] [LOG] ============================================================
[2025-10-07T19:27:54.428Z] [LOG] 👤 Employee ID: 0144315c-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:54.428Z] [LOG] 💰 Base Salary: 50,000
[2025-10-07T19:27:54.429Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:27:54.429Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:27:54.430Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:27:54.430Z] [LOG] 💵 Per-Day Salary: 10000.00
[2025-10-07T19:27:54.430Z] [LOG] ⏱️  Hourly Rate: 1176.47
[2025-10-07T19:27:54.431Z] [LOG] 
[2025-10-07T19:27:54.431Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:27:54.432Z] [LOG]    Expected Hours: 34
[2025-10-07T19:27:54.432Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:27:54.433Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:27:54.434Z] [LOG]    Worked Hours: 34
[2025-10-07T19:27:54.434Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:27:54.434Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:27:54.435Z] [LOG] ============================================================
[2025-10-07T19:27:54.694Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:27:54.695Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:27:54.835Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:54.966Z] [LOG] 📅 Weekend absence check for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:54.966Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:27:54.967Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:27:54.967Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:27:54.967Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:27:54.968Z] [LOG]    Gross Salary: 50000
[2025-10-07T19:27:54.968Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:27:54.969Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:27:54.969Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:54.969Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:27:54.970Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:54.970Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:27:54.971Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:54.971Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:27:54.971Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:54.972Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:27:54.972Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:54.974Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:27:54.975Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:54.976Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:27:54.976Z] [LOG]    Fixed amount: 0
[2025-10-07T19:27:54.976Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:27:54.977Z] [LOG] Regular deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:27:54.980Z] [LOG] Combined deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:27:55.115Z] [LOG] Creating components for record 4caa10a0-aa40-4f58-8781-744c765c2e04: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:27:55.518Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:27:55.520Z] [ERROR] ❌ Error updating financial balances for employee 0144315c-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:27:55.521Z] [LOG] ✅ G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-07T19:27:55.522Z] [LOG] 📊 Progress: 7/34 (20.6%)
[2025-10-07T19:27:55.522Z] [LOG] 
🧮 Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-07T19:27:55.522Z] [LOG] 📋 Record ID: 50340a9b-d262-4b3b-8b7d-96247848e97d
[2025-10-07T19:27:56.093Z] [LOG] 🔍 Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:56.093Z] [LOG]    Total components: 7
[2025-10-07T19:27:56.094Z] [LOG]    Applicable components: 7
[2025-10-07T19:27:56.094Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-07T19:27:57.029Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:27:57.163Z] [LOG] 🔍 Fetched 5 attendance records for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:57.295Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:27:57.537Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:58.052Z] [LOG] Employee 014435dc-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:27:58.054Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:27:58.054Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:27:58.055Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:27:58.056Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-07T19:27:58.056Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:27:58.057Z] [LOG] ================================================================================
[2025-10-07T19:27:58.057Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:58.058Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:58.058Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:58.058Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:58.059Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:58.060Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:58.060Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:27:58.060Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:27:58.061Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:27:58.061Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:27:58.063Z] [LOG] ================================================================================
[2025-10-07T19:27:58.063Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:27:58.065Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:27:58.066Z] [LOG]    Expected hours: 34h
[2025-10-07T19:27:58.067Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:27:58.068Z] [LOG] ================================================================================
[2025-10-07T19:27:58.192Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430...
[2025-10-07T19:27:58.192Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:27:58.350Z] [LOG] 📊 Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:58.503Z] [LOG] 📊 Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:58.637Z] [LOG] 📊 Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:58.638Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:27:58.639Z] [LOG] 💰 GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-07T19:27:58.639Z] [LOG]    Base Salary: 50000
[2025-10-07T19:27:58.639Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:27:58.775Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:27:58.903Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:27:59.293Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:27:59.419Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:27:59.576Z] [LOG] Employee 014435dc-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:27:59.577Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:27:59.578Z] [LOG] ============================================================
[2025-10-07T19:27:59.578Z] [LOG] 👤 Employee ID: 014435dc-7105-11f0-a50f-98e743540430
[2025-10-07T19:27:59.578Z] [LOG] 💰 Base Salary: 50,000
[2025-10-07T19:27:59.579Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:27:59.579Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:27:59.580Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:27:59.580Z] [LOG] 💵 Per-Day Salary: 10000.00
[2025-10-07T19:27:59.580Z] [LOG] ⏱️  Hourly Rate: 1176.47
[2025-10-07T19:27:59.580Z] [LOG] 
[2025-10-07T19:27:59.581Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:27:59.581Z] [LOG]    Expected Hours: 34
[2025-10-07T19:27:59.581Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:27:59.582Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:27:59.582Z] [LOG]    Worked Hours: 34
[2025-10-07T19:27:59.582Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:27:59.582Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:27:59.583Z] [LOG] ============================================================
[2025-10-07T19:27:59.916Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:27:59.917Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:28:00.064Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:00.224Z] [LOG] 📅 Weekend absence check for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:00.225Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:28:00.225Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:28:00.225Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:28:00.226Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:28:00.226Z] [LOG]    Gross Salary: 50000
[2025-10-07T19:28:00.226Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:28:00.227Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:28:00.227Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:00.227Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:28:00.228Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:00.228Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:28:00.228Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:00.229Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:28:00.229Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:00.229Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:28:00.229Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:00.230Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:28:00.230Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:00.230Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:28:00.231Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:00.231Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:28:00.232Z] [LOG] Regular deductions for P.D.P Dilini Madushani null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:00.232Z] [LOG] Combined deductions for P.D.P Dilini Madushani null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:00.392Z] [LOG] Creating components for record 50340a9b-d262-4b3b-8b7d-96247848e97d: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:28:00.817Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:00.818Z] [ERROR] ❌ Error updating financial balances for employee 014435dc-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:00.820Z] [LOG] ✅ P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-07T19:28:00.821Z] [LOG] 📊 Progress: 8/34 (23.5%)
[2025-10-07T19:28:00.821Z] [LOG] 
🧮 Processing: Uthpala null (EMP000006)
[2025-10-07T19:28:00.822Z] [LOG] 📋 Record ID: 50f403a8-5483-4e20-aa30-ad2b33916c4c
[2025-10-07T19:28:01.337Z] [LOG] 🔍 Component filtering for employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:01.337Z] [LOG]    Total components: 7
[2025-10-07T19:28:01.338Z] [LOG]    Applicable components: 7
[2025-10-07T19:28:01.338Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-07T19:28:02.176Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:28:02.417Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:28:02.659Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:28:02.894Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:28:03.149Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:28:03.292Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:03.431Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:28:03.684Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:04.058Z] [LOG] Employee 0143a539-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 09:30:00 - 17:30:00 = 8 hours
[2025-10-07T19:28:04.058Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8h = 32h
[2025-10-07T19:28:04.059Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:28:04.059Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:28:04.061Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:04.061Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:28:04.061Z] [LOG] ================================================================================
[2025-10-07T19:28:04.062Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 7.5h counted → OVERLAP 09:30-17:00 = 7.500h (attendance table)
[2025-10-07T19:28:04.062Z] [LOG]    ✅ Added to weekday total: 7.5h
[2025-10-07T19:28:04.062Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 7.5h counted → OVERLAP 09:30-17:00 = 7.500h (attendance table)
[2025-10-07T19:28:04.063Z] [LOG]    ✅ Added to weekday total: 7.5h
[2025-10-07T19:28:04.063Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 7.5h counted → OVERLAP 09:30-17:00 = 7.500h (attendance table)
[2025-10-07T19:28:04.064Z] [LOG]    ✅ Added to weekday total: 7.5h
[2025-10-07T19:28:04.064Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:28:04.064Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:28:04.065Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 7.5h counted → OVERLAP 09:30-17:00 = 7.500h (attendance table)
[2025-10-07T19:28:04.065Z] [LOG]    ✅ Added to weekday total: 7.5h
[2025-10-07T19:28:04.065Z] [LOG] ================================================================================
[2025-10-07T19:28:04.066Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:28:04.066Z] [LOG]    Sum of all daily counted hours (rounded): 30h
[2025-10-07T19:28:04.066Z] [LOG]    Expected hours: 32h
[2025-10-07T19:28:04.066Z] [LOG]    Shortfall: 2.00h
[2025-10-07T19:28:04.067Z] [LOG] ================================================================================
[2025-10-07T19:28:04.191Z] [LOG] 🔄 Processing financial records for employee 0143a539-7105-11f0-a50f-98e743540430...
[2025-10-07T19:28:04.192Z] [LOG] 🔄 Processing financial records for employee 0143a539-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:28:04.316Z] [LOG] 📊 Found 0 active loans for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:04.452Z] [LOG] 📊 Found 0 active advances for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:04.596Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:04.597Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:28:04.597Z] [LOG] 💰 GROSS CALCULATION for Uthpala null:
[2025-10-07T19:28:04.598Z] [LOG]    Base Salary: 100000
[2025-10-07T19:28:04.598Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:28:04.735Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:28:04.853Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:05.241Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:28:05.361Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:28:05.499Z] [LOG] Employee 0143a539-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 09:30:00 - 17:30:00 = 8 hours
[2025-10-07T19:28:05.500Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:28:05.500Z] [LOG] ============================================================
[2025-10-07T19:28:05.500Z] [LOG] 👤 Employee ID: 0143a539-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:05.501Z] [LOG] 💰 Base Salary: 100,000
[2025-10-07T19:28:05.501Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:28:05.501Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:28:05.502Z] [LOG] ⏰ Employee Daily Hours: 8h/day
[2025-10-07T19:28:05.502Z] [LOG] 💵 Per-Day Salary: 20000.00
[2025-10-07T19:28:05.502Z] [LOG] ⏱️  Hourly Rate: 2500.00
[2025-10-07T19:28:05.502Z] [LOG] 
[2025-10-07T19:28:05.503Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:28:05.503Z] [LOG]    Expected Hours: 32
[2025-10-07T19:28:05.503Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8h = 40.00h
[2025-10-07T19:28:05.504Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:28:05.504Z] [LOG]    Worked Hours: 30
[2025-10-07T19:28:05.504Z] [LOG]    ⚠️  Shortfall Hours: 2
[2025-10-07T19:28:05.504Z] [LOG]    💸 Shortfall Deduction: 2h × 2500.00 = 5000.00
[2025-10-07T19:28:05.506Z] [LOG] ============================================================
[2025-10-07T19:28:05.789Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:28:05.790Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:28:05.928Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:06.054Z] [LOG] 📅 Weekend absence check for employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:06.055Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:28:06.055Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:28:06.055Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:28:06.055Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:28:06.055Z] [LOG]    Gross Salary: 100000
[2025-10-07T19:28:06.056Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:28:06.056Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:28:06.056Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:06.056Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:28:06.056Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:06.056Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:28:06.057Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:06.057Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:28:06.057Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:06.057Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:28:06.057Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:06.057Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:28:06.057Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:06.058Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:28:06.058Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:06.058Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:28:06.058Z] [LOG] Regular deductions for Uthpala null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:06.058Z] [LOG] Combined deductions for Uthpala null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 5000,
      "details": "2 hours × 2500.00"
    }
  ],
  "total": 5000
}
[2025-10-07T19:28:06.184Z] [LOG] Creating components for record 50f403a8-5483-4e20-aa30-ad2b33916c4c: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-07T19:28:06.185Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 5000
}
[2025-10-07T19:28:06.317Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-07T19:28:06.591Z] [LOG] Created payroll_record_component: 08596ac9-1b00-48c8-b9bb-0472d461ce1e for Working Hours Shortfall
[2025-10-07T19:28:06.962Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:06.964Z] [ERROR] ❌ Error updating financial balances for employee 0143a539-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:06.965Z] [LOG] ✅ Uthpala null: Calculation completed successfully
[2025-10-07T19:28:06.965Z] [LOG] 📊 Progress: 9/34 (26.5%)
[2025-10-07T19:28:06.966Z] [LOG] 
🧮 Processing: Ishara null (EMP000011)
[2025-10-07T19:28:06.966Z] [LOG] 📋 Record ID: 63675251-46d1-42bd-878d-9d649d9c9073
[2025-10-07T19:28:07.444Z] [LOG] 🔍 Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:07.445Z] [LOG]    Total components: 7
[2025-10-07T19:28:07.445Z] [LOG]    Applicable components: 7
[2025-10-07T19:28:07.446Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-07T19:28:08.231Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:28:08.376Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:08.506Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:28:08.770Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:09.137Z] [LOG] Employee 0143ac0c-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:09.138Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:28:09.138Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:28:09.138Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:28:09.139Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:09.139Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:28:09.139Z] [LOG] ================================================================================
[2025-10-07T19:28:09.139Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:09.140Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:09.140Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:09.140Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:09.140Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:09.140Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:09.141Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:28:09.141Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:28:09.141Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:09.141Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:09.142Z] [LOG] ================================================================================
[2025-10-07T19:28:09.142Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:28:09.142Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:28:09.142Z] [LOG]    Expected hours: 34h
[2025-10-07T19:28:09.142Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:28:09.142Z] [LOG] ================================================================================
[2025-10-07T19:28:09.264Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430...
[2025-10-07T19:28:09.265Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:28:09.383Z] [LOG] 📊 Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:09.513Z] [LOG] 📊 Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:09.641Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:09.642Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:28:09.643Z] [LOG] 💰 GROSS CALCULATION for Ishara null:
[2025-10-07T19:28:09.643Z] [LOG]    Base Salary: 50000
[2025-10-07T19:28:09.643Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:28:09.761Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:28:09.892Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:10.293Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:28:10.411Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:28:10.537Z] [LOG] Employee 0143ac0c-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:10.537Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:28:10.537Z] [LOG] ============================================================
[2025-10-07T19:28:10.537Z] [LOG] 👤 Employee ID: 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:10.538Z] [LOG] 💰 Base Salary: 50,000
[2025-10-07T19:28:10.538Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:28:10.538Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:28:10.538Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:28:10.538Z] [LOG] 💵 Per-Day Salary: 10000.00
[2025-10-07T19:28:10.538Z] [LOG] ⏱️  Hourly Rate: 1176.47
[2025-10-07T19:28:10.538Z] [LOG] 
[2025-10-07T19:28:10.539Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:28:10.539Z] [LOG]    Expected Hours: 34
[2025-10-07T19:28:10.539Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:28:10.539Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:28:10.539Z] [LOG]    Worked Hours: 34
[2025-10-07T19:28:10.539Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:28:10.539Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:28:10.540Z] [LOG] ============================================================
[2025-10-07T19:28:10.791Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:28:10.791Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:28:10.935Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:11.075Z] [LOG] 📅 Weekend absence check for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:11.076Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:28:11.076Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:28:11.076Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:28:11.077Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:28:11.077Z] [LOG]    Gross Salary: 50000
[2025-10-07T19:28:11.077Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:28:11.078Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:28:11.078Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:11.078Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:28:11.079Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:11.079Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:28:11.079Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:11.080Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:28:11.080Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:11.080Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:28:11.081Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:11.081Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:28:11.081Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:11.082Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:28:11.082Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:11.082Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:28:11.083Z] [LOG] Regular deductions for Ishara null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:11.083Z] [LOG] Combined deductions for Ishara null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:11.243Z] [LOG] Creating components for record 63675251-46d1-42bd-878d-9d649d9c9073: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:28:11.630Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:11.632Z] [ERROR] ❌ Error updating financial balances for employee 0143ac0c-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:11.632Z] [LOG] ✅ Ishara null: Calculation completed successfully
[2025-10-07T19:28:11.633Z] [LOG] 📊 Progress: 10/34 (29.4%)
[2025-10-07T19:28:11.633Z] [LOG] 
🧮 Processing: Piyumi null (EMP000025)
[2025-10-07T19:28:11.633Z] [LOG] 📋 Record ID: 67de6f98-d9db-4b89-9c24-3db00b2ae2eb
[2025-10-07T19:28:12.129Z] [LOG] 🔍 Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:12.129Z] [LOG]    Total components: 7
[2025-10-07T19:28:12.130Z] [LOG]    Applicable components: 7
[2025-10-07T19:28:12.130Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-07T19:28:12.875Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:28:13.004Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:13.132Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:28:13.422Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:13.818Z] [LOG] Employee 0143e565-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:13.818Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:28:13.819Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:28:13.819Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:28:13.820Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:13.820Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:28:13.821Z] [LOG] ================================================================================
[2025-10-07T19:28:13.821Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:13.821Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:13.822Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:13.822Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:13.822Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:13.823Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:13.823Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:28:13.823Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:28:13.824Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:13.824Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:13.824Z] [LOG] ================================================================================
[2025-10-07T19:28:13.824Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:28:13.825Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:28:13.825Z] [LOG]    Expected hours: 34h
[2025-10-07T19:28:13.825Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:28:13.826Z] [LOG] ================================================================================
[2025-10-07T19:28:13.960Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430...
[2025-10-07T19:28:13.960Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:28:14.091Z] [LOG] 📊 Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:14.237Z] [LOG] 📊 Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:14.392Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:14.393Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:28:14.394Z] [LOG] 💰 GROSS CALCULATION for Piyumi null:
[2025-10-07T19:28:14.394Z] [LOG]    Base Salary: 50000
[2025-10-07T19:28:14.395Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:28:14.528Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:28:14.655Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:15.017Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:28:15.136Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:28:15.277Z] [LOG] Employee 0143e565-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:15.277Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:28:15.277Z] [LOG] ============================================================
[2025-10-07T19:28:15.278Z] [LOG] 👤 Employee ID: 0143e565-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:15.278Z] [LOG] 💰 Base Salary: 50,000
[2025-10-07T19:28:15.278Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:28:15.279Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:28:15.279Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:28:15.280Z] [LOG] 💵 Per-Day Salary: 10000.00
[2025-10-07T19:28:15.280Z] [LOG] ⏱️  Hourly Rate: 1176.47
[2025-10-07T19:28:15.280Z] [LOG] 
[2025-10-07T19:28:15.281Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:28:15.281Z] [LOG]    Expected Hours: 34
[2025-10-07T19:28:15.281Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:28:15.281Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:28:15.282Z] [LOG]    Worked Hours: 34
[2025-10-07T19:28:15.282Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:28:15.282Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:28:15.283Z] [LOG] ============================================================
[2025-10-07T19:28:15.541Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:28:15.541Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:28:15.694Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:15.811Z] [LOG] 📅 Weekend absence check for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:15.812Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:28:15.812Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:28:15.813Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:28:15.813Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:28:15.814Z] [LOG]    Gross Salary: 50000
[2025-10-07T19:28:15.814Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:28:15.814Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:28:15.815Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:15.815Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:28:15.815Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:15.816Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:28:15.816Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:15.816Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:28:15.817Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:15.817Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:28:15.817Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:15.818Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:28:15.818Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:15.819Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:28:15.819Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:15.820Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:28:15.820Z] [LOG] Regular deductions for Piyumi null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:15.820Z] [LOG] Combined deductions for Piyumi null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:15.941Z] [LOG] Creating components for record 67de6f98-d9db-4b89-9c24-3db00b2ae2eb: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:28:16.310Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:16.313Z] [ERROR] ❌ Error updating financial balances for employee 0143e565-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:16.315Z] [LOG] ✅ Piyumi null: Calculation completed successfully
[2025-10-07T19:28:16.316Z] [LOG] 📊 Progress: 11/34 (32.4%)
[2025-10-07T19:28:16.316Z] [LOG] 
🧮 Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-07T19:28:16.317Z] [LOG] 📋 Record ID: 6b0aa3b5-ec3e-48c0-b44a-eafd8e748c65
[2025-10-07T19:28:16.935Z] [LOG] 🔍 Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:16.936Z] [LOG]    Total components: 7
[2025-10-07T19:28:16.936Z] [LOG]    Applicable components: 7
[2025-10-07T19:28:16.937Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-07T19:28:17.937Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:28:18.114Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:18.294Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:28:18.641Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:19.066Z] [LOG] Employee 0143e915-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:19.067Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:28:19.067Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:28:19.068Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:28:19.069Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:19.069Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:28:19.070Z] [LOG] ================================================================================
[2025-10-07T19:28:19.070Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:19.070Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:19.071Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:19.071Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:19.071Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:19.072Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:19.072Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:28:19.072Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:28:19.073Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:19.073Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:19.073Z] [LOG] ================================================================================
[2025-10-07T19:28:19.073Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:28:19.074Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:28:19.074Z] [LOG]    Expected hours: 34h
[2025-10-07T19:28:19.074Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:28:19.075Z] [LOG] ================================================================================
[2025-10-07T19:28:19.192Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430...
[2025-10-07T19:28:19.193Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:28:19.327Z] [LOG] 📊 Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:19.466Z] [LOG] 📊 Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:19.582Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:19.583Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:28:19.583Z] [LOG] 💰 GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-07T19:28:19.584Z] [LOG]    Base Salary: 0
[2025-10-07T19:28:19.584Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:28:19.704Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:28:19.826Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:20.187Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:28:20.308Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:28:20.429Z] [LOG] Employee 0143e915-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:20.430Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:28:20.431Z] [LOG] ============================================================
[2025-10-07T19:28:20.431Z] [LOG] 👤 Employee ID: 0143e915-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:20.432Z] [LOG] 💰 Base Salary: 0
[2025-10-07T19:28:20.432Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:28:20.432Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:28:20.433Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:28:20.433Z] [LOG] 💵 Per-Day Salary: 0.00
[2025-10-07T19:28:20.434Z] [LOG] ⏱️  Hourly Rate: 0.00
[2025-10-07T19:28:20.434Z] [LOG] 
[2025-10-07T19:28:20.434Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:28:20.434Z] [LOG]    Expected Hours: 34
[2025-10-07T19:28:20.435Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:28:20.435Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:28:20.435Z] [LOG]    Worked Hours: 34
[2025-10-07T19:28:20.435Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:28:20.435Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:28:20.435Z] [LOG] ============================================================
[2025-10-07T19:28:20.693Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:28:20.693Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:28:20.830Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:20.961Z] [LOG] 📅 Weekend absence check for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:20.961Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:28:20.962Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:28:20.962Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:28:20.962Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:28:20.964Z] [LOG]    Gross Salary: 0
[2025-10-07T19:28:20.965Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:28:20.966Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:28:20.966Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:20.967Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:28:20.968Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:20.968Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:28:20.968Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:20.969Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:28:20.969Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:20.970Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:28:20.970Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:20.970Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:28:20.971Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:20.971Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:28:20.971Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:20.972Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:28:20.972Z] [LOG] Regular deductions for Ruvindu Hewabandu null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:20.974Z] [LOG] Combined deductions for Ruvindu Hewabandu null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:21.107Z] [LOG] Creating components for record 6b0aa3b5-ec3e-48c0-b44a-eafd8e748c65: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:28:21.484Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:21.485Z] [ERROR] ❌ Error updating financial balances for employee 0143e915-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:21.486Z] [LOG] ✅ Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-07T19:28:21.487Z] [LOG] 📊 Progress: 12/34 (35.3%)
[2025-10-07T19:28:21.487Z] [LOG] 
🧮 Processing: Chamodi null (EMP000032)
[2025-10-07T19:28:21.487Z] [LOG] 📋 Record ID: 6dd5a17c-5afc-49e1-8bb9-2f15c60842a9
[2025-10-07T19:28:21.992Z] [LOG] 🔍 Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:21.993Z] [LOG]    Total components: 7
[2025-10-07T19:28:21.993Z] [LOG]    Applicable components: 7
[2025-10-07T19:28:21.993Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-07T19:28:22.733Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:28:22.851Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:22.979Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:28:23.227Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:23.649Z] [LOG] Employee 0143f302-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:23.649Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:28:23.649Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:28:23.650Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:28:23.651Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:23.651Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:28:23.651Z] [LOG] ================================================================================
[2025-10-07T19:28:23.651Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:23.651Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:23.651Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:23.652Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:23.652Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:23.652Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:23.652Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:28:23.652Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:28:23.653Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:23.653Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:23.653Z] [LOG] ================================================================================
[2025-10-07T19:28:23.653Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:28:23.653Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:28:23.653Z] [LOG]    Expected hours: 34h
[2025-10-07T19:28:23.654Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:28:23.654Z] [LOG] ================================================================================
[2025-10-07T19:28:23.789Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430...
[2025-10-07T19:28:23.790Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:28:23.923Z] [LOG] 📊 Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:24.049Z] [LOG] 📊 Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:24.174Z] [LOG] 📊 Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:24.175Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:28:24.175Z] [LOG] 💰 GROSS CALCULATION for Chamodi null:
[2025-10-07T19:28:24.175Z] [LOG]    Base Salary: 50000
[2025-10-07T19:28:24.175Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:28:24.293Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:28:24.419Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:24.808Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:28:24.928Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:28:25.043Z] [LOG] Employee 0143f302-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:25.043Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:28:25.044Z] [LOG] ============================================================
[2025-10-07T19:28:25.044Z] [LOG] 👤 Employee ID: 0143f302-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:25.044Z] [LOG] 💰 Base Salary: 50,000
[2025-10-07T19:28:25.044Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:28:25.044Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:28:25.044Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:28:25.044Z] [LOG] 💵 Per-Day Salary: 10000.00
[2025-10-07T19:28:25.045Z] [LOG] ⏱️  Hourly Rate: 1176.47
[2025-10-07T19:28:25.045Z] [LOG] 
[2025-10-07T19:28:25.045Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:28:25.045Z] [LOG]    Expected Hours: 34
[2025-10-07T19:28:25.045Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:28:25.045Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:28:25.046Z] [LOG]    Worked Hours: 34
[2025-10-07T19:28:25.046Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:28:25.046Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:28:25.046Z] [LOG] ============================================================
[2025-10-07T19:28:25.291Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:28:25.292Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:28:25.427Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:25.575Z] [LOG] 📅 Weekend absence check for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:25.576Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:28:25.576Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:28:25.576Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:28:25.576Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:28:25.576Z] [LOG]    Gross Salary: 50000
[2025-10-07T19:28:25.576Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:28:25.576Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:28:25.576Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:25.577Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:28:25.577Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:25.577Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:28:25.577Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:25.577Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:28:25.578Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:25.578Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:28:25.578Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:25.578Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:28:25.578Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:25.578Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:28:25.578Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:25.578Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:28:25.579Z] [LOG] Regular deductions for Chamodi null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:25.579Z] [LOG] Combined deductions for Chamodi null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:25.708Z] [LOG] Creating components for record 6dd5a17c-5afc-49e1-8bb9-2f15c60842a9: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:28:26.066Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:26.067Z] [ERROR] ❌ Error updating financial balances for employee 0143f302-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:26.068Z] [LOG] ✅ Chamodi null: Calculation completed successfully
[2025-10-07T19:28:26.068Z] [LOG] 📊 Progress: 13/34 (38.2%)
[2025-10-07T19:28:26.068Z] [LOG] 
🧮 Processing: Anoj null (EMP000014)
[2025-10-07T19:28:26.069Z] [LOG] 📋 Record ID: 70a481a2-0fed-467f-a06a-109b1097a6ed
[2025-10-07T19:28:26.605Z] [LOG] 🔍 Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:26.606Z] [LOG]    Total components: 7
[2025-10-07T19:28:26.606Z] [LOG]    Applicable components: 7
[2025-10-07T19:28:26.607Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-07T19:28:27.369Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:28:27.492Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:27.627Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:28:27.871Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:28.233Z] [LOG] Employee 0143afc6-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:28.234Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:28:28.234Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:28:28.235Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:28:28.237Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:28.237Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:28:28.237Z] [LOG] ================================================================================
[2025-10-07T19:28:28.238Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:28.238Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:28.238Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:28.239Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:28.239Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:28.239Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:28.240Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:28:28.240Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:28:28.240Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:28.241Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:28.241Z] [LOG] ================================================================================
[2025-10-07T19:28:28.242Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:28:28.242Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:28:28.242Z] [LOG]    Expected hours: 34h
[2025-10-07T19:28:28.242Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:28:28.243Z] [LOG] ================================================================================
[2025-10-07T19:28:28.385Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430...
[2025-10-07T19:28:28.386Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:28:28.536Z] [LOG] 📊 Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:28.653Z] [LOG] 📊 Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:28.793Z] [LOG] 📊 Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:28.795Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:28:28.795Z] [LOG] 💰 GROSS CALCULATION for Anoj null:
[2025-10-07T19:28:28.796Z] [LOG]    Base Salary: 50000
[2025-10-07T19:28:28.798Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:28:28.937Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:28:29.056Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:29.437Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:28:29.558Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:28:29.677Z] [LOG] Employee 0143afc6-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:29.679Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:28:29.679Z] [LOG] ============================================================
[2025-10-07T19:28:29.680Z] [LOG] 👤 Employee ID: 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:29.681Z] [LOG] 💰 Base Salary: 50,000
[2025-10-07T19:28:29.681Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:28:29.682Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:28:29.683Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:28:29.684Z] [LOG] 💵 Per-Day Salary: 10000.00
[2025-10-07T19:28:29.684Z] [LOG] ⏱️  Hourly Rate: 1176.47
[2025-10-07T19:28:29.685Z] [LOG] 
[2025-10-07T19:28:29.685Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:28:29.685Z] [LOG]    Expected Hours: 34
[2025-10-07T19:28:29.686Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:28:29.686Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:28:29.686Z] [LOG]    Worked Hours: 34
[2025-10-07T19:28:29.687Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:28:29.687Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:28:29.687Z] [LOG] ============================================================
[2025-10-07T19:28:29.941Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:28:29.942Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:28:30.072Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:30.191Z] [LOG] 📅 Weekend absence check for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:30.191Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:28:30.192Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:28:30.192Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:28:30.193Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:28:30.193Z] [LOG]    Gross Salary: 50000
[2025-10-07T19:28:30.193Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:28:30.195Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:28:30.196Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:30.197Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:28:30.198Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:30.198Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:28:30.198Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:30.199Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:28:30.200Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:30.200Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:28:30.201Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:30.201Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:28:30.201Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:30.201Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:28:30.202Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:30.202Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:28:30.202Z] [LOG] Regular deductions for Anoj null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:30.203Z] [LOG] Combined deductions for Anoj null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:30.334Z] [LOG] Creating components for record 70a481a2-0fed-467f-a06a-109b1097a6ed: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:28:30.710Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:30.712Z] [ERROR] ❌ Error updating financial balances for employee 0143afc6-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:30.713Z] [LOG] ✅ Anoj null: Calculation completed successfully
[2025-10-07T19:28:30.714Z] [LOG] 📊 Progress: 14/34 (41.2%)
[2025-10-07T19:28:30.714Z] [LOG] 
🧮 Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-07T19:28:30.715Z] [LOG] 📋 Record ID: 74d4b607-7f85-45df-b922-283d46a50ccf
[2025-10-07T19:28:31.214Z] [LOG] 🔍 Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:31.215Z] [LOG]    Total components: 7
[2025-10-07T19:28:31.215Z] [LOG]    Applicable components: 7
[2025-10-07T19:28:31.216Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-07T19:28:31.961Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:28:32.093Z] [LOG] 🔍 Fetched 5 attendance records for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:32.211Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:28:32.452Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:32.832Z] [LOG] Employee 01444074-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:32.833Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:28:32.833Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:28:32.834Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:28:32.835Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:32.835Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:28:32.836Z] [LOG] ================================================================================
[2025-10-07T19:28:32.836Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:32.836Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:32.836Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:32.837Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:32.837Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:32.838Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:32.841Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:28:32.841Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:28:32.841Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:32.842Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:32.842Z] [LOG] ================================================================================
[2025-10-07T19:28:32.842Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:28:32.842Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:28:32.843Z] [LOG]    Expected hours: 34h
[2025-10-07T19:28:32.843Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:28:32.843Z] [LOG] ================================================================================
[2025-10-07T19:28:32.998Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430...
[2025-10-07T19:28:32.998Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:28:33.117Z] [LOG] 📊 Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:33.246Z] [LOG] 📊 Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:33.381Z] [LOG] 📊 Found 0 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:33.381Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:28:33.382Z] [LOG] 💰 GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-07T19:28:33.382Z] [LOG]    Base Salary: 35000
[2025-10-07T19:28:33.382Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:28:33.509Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:28:33.623Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:34.037Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:28:34.156Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:28:34.277Z] [LOG] Employee 01444074-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:34.277Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:28:34.278Z] [LOG] ============================================================
[2025-10-07T19:28:34.278Z] [LOG] 👤 Employee ID: 01444074-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:34.278Z] [LOG] 💰 Base Salary: 35,000
[2025-10-07T19:28:34.279Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:28:34.279Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:28:34.279Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:28:34.280Z] [LOG] 💵 Per-Day Salary: 7000.00
[2025-10-07T19:28:34.280Z] [LOG] ⏱️  Hourly Rate: 823.53
[2025-10-07T19:28:34.281Z] [LOG] 
[2025-10-07T19:28:34.281Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:28:34.281Z] [LOG]    Expected Hours: 34
[2025-10-07T19:28:34.282Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:28:34.282Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:28:34.282Z] [LOG]    Worked Hours: 34
[2025-10-07T19:28:34.283Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:28:34.283Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:28:34.283Z] [LOG] ============================================================
[2025-10-07T19:28:35.122Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:28:35.122Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:28:35.242Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:35.359Z] [LOG] 📅 Weekend absence check for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:35.359Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:28:35.360Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:28:35.360Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:28:35.360Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:28:35.361Z] [LOG]    Gross Salary: 35000
[2025-10-07T19:28:35.361Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:28:35.361Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:28:35.362Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:35.362Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:28:35.362Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:35.363Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:28:35.363Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:35.364Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:28:35.364Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:35.365Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:28:35.366Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:35.366Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:28:35.367Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:35.367Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:28:35.368Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:35.369Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:28:35.369Z] [LOG] Regular deductions for Nimdiya Ranasinghe null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:35.370Z] [LOG] Combined deductions for Nimdiya Ranasinghe null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:35.488Z] [LOG] Creating components for record 74d4b607-7f85-45df-b922-283d46a50ccf: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:28:35.908Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:35.909Z] [ERROR] ❌ Error updating financial balances for employee 01444074-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:35.911Z] [LOG] ✅ Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-07T19:28:35.911Z] [LOG] 📊 Progress: 15/34 (44.1%)
[2025-10-07T19:28:35.911Z] [LOG] 
🧮 Processing: Jessie null (EMP000013)
[2025-10-07T19:28:35.912Z] [LOG] 📋 Record ID: 76fb47a5-5fb1-46cc-ba64-4ac82bd1c7bc
[2025-10-07T19:28:36.438Z] [LOG] 🔍 Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:36.439Z] [LOG]    Total components: 7
[2025-10-07T19:28:36.439Z] [LOG]    Applicable components: 7
[2025-10-07T19:28:36.439Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-07T19:28:37.165Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:28:37.291Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:37.417Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:28:37.735Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:38.149Z] [LOG] Employee 0143ae6e-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:38.151Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:28:38.152Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:28:38.153Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:28:38.154Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:38.154Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:28:38.155Z] [LOG] ================================================================================
[2025-10-07T19:28:38.155Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:38.158Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:38.158Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:38.159Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:38.159Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:38.159Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:38.160Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:28:38.161Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:28:38.161Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:38.162Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:38.163Z] [LOG] ================================================================================
[2025-10-07T19:28:38.164Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:28:38.165Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:28:38.165Z] [LOG]    Expected hours: 34h
[2025-10-07T19:28:38.165Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:28:38.166Z] [LOG] ================================================================================
[2025-10-07T19:28:38.294Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430...
[2025-10-07T19:28:38.295Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:28:38.416Z] [LOG] 📊 Found 1 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:38.534Z] [LOG] 📊 Found 1 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:38.669Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:38.670Z] [LOG] 💰 Loan 9b6e1dda-8dcb-4c30-9d68-604489d94453: Deducting LKR 5012.5 (Remaining: LKR 10025.01)
[2025-10-07T19:28:38.670Z] [LOG] 💸 Advance d1db4f71-1c1e-4611-a1c5-6cec09c476d8: Deducting LKR 17000 (Remaining: LKR 17000)
[2025-10-07T19:28:38.671Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 5012.5,
  "advances": 17000,
  "bonuses": 0,
  "netAdjustment": -22012.5
}
[2025-10-07T19:28:38.671Z] [LOG] 💰 GROSS CALCULATION for Jessie null:
[2025-10-07T19:28:38.672Z] [LOG]    Base Salary: 60000
[2025-10-07T19:28:38.672Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:28:38.793Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:28:38.920Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:39.328Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:28:39.453Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:28:39.571Z] [LOG] Employee 0143ae6e-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:39.572Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:28:39.573Z] [LOG] ============================================================
[2025-10-07T19:28:39.573Z] [LOG] 👤 Employee ID: 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:39.573Z] [LOG] 💰 Base Salary: 60,000
[2025-10-07T19:28:39.574Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:28:39.574Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:28:39.575Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:28:39.576Z] [LOG] 💵 Per-Day Salary: 12000.00
[2025-10-07T19:28:39.579Z] [LOG] ⏱️  Hourly Rate: 1411.76
[2025-10-07T19:28:39.579Z] [LOG] 
[2025-10-07T19:28:39.580Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:28:39.581Z] [LOG]    Expected Hours: 34
[2025-10-07T19:28:39.581Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:28:39.582Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:28:39.583Z] [LOG]    Worked Hours: 34
[2025-10-07T19:28:39.583Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:28:39.584Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:28:39.584Z] [LOG] ============================================================
[2025-10-07T19:28:39.859Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:28:39.859Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:28:39.983Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:40.108Z] [LOG] 📅 Weekend absence check for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:40.109Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:28:40.109Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:28:40.110Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:28:40.110Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:28:40.110Z] [LOG]    Gross Salary: 60000
[2025-10-07T19:28:40.111Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:28:40.111Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:28:40.111Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:40.112Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:28:40.112Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:40.112Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:28:40.113Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:40.114Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:28:40.114Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:40.116Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:28:40.116Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:40.117Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:28:40.117Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:40.117Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:28:40.118Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:40.119Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:28:40.119Z] [LOG] Regular deductions for Jessie null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:40.122Z] [LOG] Combined deductions for Jessie null: {
  "components": [
    {
      "code": "LOAN_DED",
      "name": "Loan Deductions",
      "type": "deduction",
      "category": "loan",
      "amount": 5012.5,
      "details": "1 loan(s)"
    },
    {
      "code": "ADVANCE_DED",
      "name": "Advance Deductions",
      "type": "deduction",
      "category": "other",
      "amount": 17000,
      "details": "1 advance(s)"
    }
  ],
  "total": 22012.5
}
[2025-10-07T19:28:40.284Z] [LOG] Creating components for record 76fb47a5-5fb1-46cc-ba64-4ac82bd1c7bc: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-07T19:28:40.284Z] [LOG] Processing component: {
  "name": "Loan Deductions",
  "type": "deduction",
  "amount": 5012.5
}
[2025-10-07T19:28:40.407Z] [LOG] Using existing component ID: 64a0d7d8-8fdb-4968-a7a2-057590b481c7
[2025-10-07T19:28:40.527Z] [LOG] Created payroll_record_component: b928aaaf-0996-4b4c-a953-3c36628e4136 for Loan Deductions
[2025-10-07T19:28:40.527Z] [LOG] Processing component: {
  "name": "Advance Deductions",
  "type": "deduction",
  "amount": 17000
}
[2025-10-07T19:28:40.657Z] [LOG] Using existing component ID: 212471aa-dc59-47a4-9969-235f68be2fa4
[2025-10-07T19:28:40.778Z] [LOG] Created payroll_record_component: 8e2589c1-ffda-4ab5-9a9d-ae9830881a4b for Advance Deductions
[2025-10-07T19:28:41.143Z] [LOG] ✅ Updated loan 9b6e1dda-8dcb-4c30-9d68-604489d94453: Remaining LKR 5012.51, Status: active
[2025-10-07T19:28:41.393Z] [LOG] ✅ Updated advance d1db4f71-1c1e-4611-a1c5-6cec09c476d8: Remaining LKR 0, Status: completed
[2025-10-07T19:28:41.647Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:41.650Z] [ERROR] ❌ Error updating financial balances for employee 0143ae6e-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:41.651Z] [LOG] ✅ Jessie null: Calculation completed successfully
[2025-10-07T19:28:41.653Z] [LOG] 📊 Progress: 16/34 (47.1%)
[2025-10-07T19:28:41.653Z] [LOG] 
🧮 Processing: customer null (EMP000036)
[2025-10-07T19:28:41.654Z] [LOG] 📋 Record ID: 7e00d6db-8cfa-4922-b0cc-7af2b5c7a6b7
[2025-10-07T19:28:42.167Z] [LOG] 🔍 Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:42.167Z] [LOG]    Total components: 7
[2025-10-07T19:28:42.168Z] [LOG]    Applicable components: 7
[2025-10-07T19:28:42.168Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-07T19:28:42.925Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:28:43.055Z] [LOG] 🔍 Fetched 5 attendance records for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:43.181Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:28:43.439Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:43.824Z] [LOG] Employee 014409a2-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:43.825Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:28:43.825Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:28:43.826Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:28:43.827Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:43.827Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:28:43.828Z] [LOG] ================================================================================
[2025-10-07T19:28:43.829Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:43.829Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:43.831Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:43.831Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:43.832Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:43.832Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:43.833Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:28:43.833Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:28:43.834Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:43.834Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:43.836Z] [LOG] ================================================================================
[2025-10-07T19:28:43.836Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:28:43.836Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:28:43.837Z] [LOG]    Expected hours: 34h
[2025-10-07T19:28:43.837Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:28:43.837Z] [LOG] ================================================================================
[2025-10-07T19:28:43.978Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430...
[2025-10-07T19:28:43.978Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:28:44.115Z] [LOG] 📊 Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:44.237Z] [LOG] 📊 Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:44.365Z] [LOG] 📊 Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:44.366Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:28:44.366Z] [LOG] 💰 GROSS CALCULATION for customer null:
[2025-10-07T19:28:44.367Z] [LOG]    Base Salary: 0
[2025-10-07T19:28:44.367Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:28:44.485Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:28:44.607Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:44.995Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:28:45.112Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:28:45.239Z] [LOG] Employee 014409a2-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:45.239Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:28:45.240Z] [LOG] ============================================================
[2025-10-07T19:28:45.240Z] [LOG] 👤 Employee ID: 014409a2-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:45.240Z] [LOG] 💰 Base Salary: 0
[2025-10-07T19:28:45.241Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:28:45.241Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:28:45.241Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:28:45.242Z] [LOG] 💵 Per-Day Salary: 0.00
[2025-10-07T19:28:45.242Z] [LOG] ⏱️  Hourly Rate: 0.00
[2025-10-07T19:28:45.242Z] [LOG] 
[2025-10-07T19:28:45.243Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:28:45.243Z] [LOG]    Expected Hours: 34
[2025-10-07T19:28:45.243Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:28:45.244Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:28:45.246Z] [LOG]    Worked Hours: 34
[2025-10-07T19:28:45.247Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:28:45.248Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:28:45.248Z] [LOG] ============================================================
[2025-10-07T19:28:45.543Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:28:45.544Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:28:45.698Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:45.820Z] [LOG] 📅 Weekend absence check for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:45.820Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:28:45.821Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:28:45.821Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:28:45.821Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:28:45.822Z] [LOG]    Gross Salary: 0
[2025-10-07T19:28:45.822Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:28:45.822Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:28:45.823Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:45.823Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:28:45.823Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:45.823Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:28:45.824Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:45.824Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:28:45.825Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:45.825Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:28:45.827Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:45.828Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:28:45.829Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:45.829Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:28:45.831Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:45.831Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:28:45.832Z] [LOG] Regular deductions for customer null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:45.833Z] [LOG] Combined deductions for customer null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:45.953Z] [LOG] Creating components for record 7e00d6db-8cfa-4922-b0cc-7af2b5c7a6b7: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:28:46.313Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:46.315Z] [ERROR] ❌ Error updating financial balances for employee 014409a2-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:46.317Z] [LOG] ✅ customer null: Calculation completed successfully
[2025-10-07T19:28:46.317Z] [LOG] 📊 Progress: 17/34 (50.0%)
[2025-10-07T19:28:46.318Z] [LOG] 
🧮 Processing: Faizan Faizan (EMP000003)
[2025-10-07T19:28:46.318Z] [LOG] 📋 Record ID: 7f800e05-b2a5-4a30-9b21-a4095c88ea8d
[2025-10-07T19:28:46.805Z] [LOG] 🔍 Component filtering for employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:46.805Z] [LOG]    Total components: 7
[2025-10-07T19:28:46.805Z] [LOG]    Applicable components: 7
[2025-10-07T19:28:46.806Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-07T19:28:47.533Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:28:47.655Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:47.774Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:28:48.333Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:48.754Z] [LOG] Employee 0143a057-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:48.754Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:28:48.754Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:28:48.755Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:28:48.756Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:48.756Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:28:48.757Z] [LOG] ================================================================================
[2025-10-07T19:28:48.757Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:48.757Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:48.758Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:48.758Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:48.759Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:48.759Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:48.759Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:28:48.760Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:28:48.760Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:48.761Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:48.761Z] [LOG] ================================================================================
[2025-10-07T19:28:48.761Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:28:48.762Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:28:48.763Z] [LOG]    Expected hours: 34h
[2025-10-07T19:28:48.763Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:28:48.764Z] [LOG] ================================================================================
[2025-10-07T19:28:48.910Z] [LOG] 🔄 Processing financial records for employee 0143a057-7105-11f0-a50f-98e743540430...
[2025-10-07T19:28:48.911Z] [LOG] 🔄 Processing financial records for employee 0143a057-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:28:49.043Z] [LOG] 📊 Found 0 active loans for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:49.194Z] [LOG] 📊 Found 0 active advances for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:49.337Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:49.338Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:28:49.338Z] [LOG] 💰 GROSS CALCULATION for Faizan Faizan:
[2025-10-07T19:28:49.339Z] [LOG]    Base Salary: 50000
[2025-10-07T19:28:49.339Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:28:49.460Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:28:49.586Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:49.961Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:28:50.094Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:28:50.223Z] [LOG] Employee 0143a057-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:50.224Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:28:50.224Z] [LOG] ============================================================
[2025-10-07T19:28:50.224Z] [LOG] 👤 Employee ID: 0143a057-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:50.224Z] [LOG] 💰 Base Salary: 50,000
[2025-10-07T19:28:50.225Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:28:50.225Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:28:50.225Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:28:50.225Z] [LOG] 💵 Per-Day Salary: 10000.00
[2025-10-07T19:28:50.226Z] [LOG] ⏱️  Hourly Rate: 1176.47
[2025-10-07T19:28:50.226Z] [LOG] 
[2025-10-07T19:28:50.226Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:28:50.227Z] [LOG]    Expected Hours: 34
[2025-10-07T19:28:50.227Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:28:50.227Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:28:50.228Z] [LOG]    Worked Hours: 34
[2025-10-07T19:28:50.228Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:28:50.229Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:28:50.229Z] [LOG] ============================================================
[2025-10-07T19:28:50.471Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:28:50.472Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:28:50.599Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:50.735Z] [LOG] 📅 Weekend absence check for employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:50.735Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:28:50.736Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:28:50.736Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:28:50.736Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:28:50.737Z] [LOG]    Gross Salary: 50000
[2025-10-07T19:28:50.737Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:28:50.737Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:28:50.738Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:50.738Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:28:50.739Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:50.739Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:28:50.739Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:50.740Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:28:50.740Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:50.741Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:28:50.741Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:50.742Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:28:50.743Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:50.744Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:28:50.744Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:50.745Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:28:50.746Z] [LOG] Regular deductions for Faizan Faizan: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:50.748Z] [LOG] Combined deductions for Faizan Faizan: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:50.905Z] [LOG] Creating components for record 7f800e05-b2a5-4a30-9b21-a4095c88ea8d: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:28:51.265Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:51.266Z] [ERROR] ❌ Error updating financial balances for employee 0143a057-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:51.267Z] [LOG] ✅ Faizan Faizan: Calculation completed successfully
[2025-10-07T19:28:51.268Z] [LOG] 📊 Progress: 18/34 (52.9%)
[2025-10-07T19:28:51.269Z] [LOG] 
🧮 Processing: Prasanthan null (EMP000001)
[2025-10-07T19:28:51.269Z] [LOG] 📋 Record ID: 830342e3-c4d1-414a-a874-3166721a891d
[2025-10-07T19:28:51.794Z] [LOG] 🔍 Component filtering for employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:51.794Z] [LOG]    Total components: 7
[2025-10-07T19:28:51.794Z] [LOG]    Applicable components: 7
[2025-10-07T19:28:51.794Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-07T19:28:52.525Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:28:52.652Z] [LOG] 🔍 Fetched 5 attendance records for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:52.794Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:28:53.060Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:53.434Z] [LOG] Employee 014397c7-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:53.434Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:28:53.435Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:28:53.435Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:28:53.437Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:53.437Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:28:53.438Z] [LOG] ================================================================================
[2025-10-07T19:28:53.438Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:53.439Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:53.439Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:53.440Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:53.442Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:53.443Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:53.443Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:28:53.444Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:28:53.445Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:53.447Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:53.448Z] [LOG] ================================================================================
[2025-10-07T19:28:53.449Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:28:53.450Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:28:53.451Z] [LOG]    Expected hours: 34h
[2025-10-07T19:28:53.452Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:28:53.452Z] [LOG] ================================================================================
[2025-10-07T19:28:53.598Z] [LOG] 🔄 Processing financial records for employee 014397c7-7105-11f0-a50f-98e743540430...
[2025-10-07T19:28:53.599Z] [LOG] 🔄 Processing financial records for employee 014397c7-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:28:53.729Z] [LOG] 📊 Found 0 active loans for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:53.856Z] [LOG] 📊 Found 0 active advances for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:53.994Z] [LOG] 📊 Found 0 approved bonuses for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:53.995Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:28:53.996Z] [LOG] 💰 GROSS CALCULATION for Prasanthan null:
[2025-10-07T19:28:53.996Z] [LOG]    Base Salary: 150000
[2025-10-07T19:28:53.996Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:28:54.131Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:28:54.252Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:54.645Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:28:54.759Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:28:54.894Z] [LOG] Employee 014397c7-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:54.895Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:28:54.895Z] [LOG] ============================================================
[2025-10-07T19:28:54.895Z] [LOG] 👤 Employee ID: 014397c7-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:54.896Z] [LOG] 💰 Base Salary: 150,000
[2025-10-07T19:28:54.896Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:28:54.897Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:28:54.897Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:28:54.897Z] [LOG] 💵 Per-Day Salary: 30000.00
[2025-10-07T19:28:54.898Z] [LOG] ⏱️  Hourly Rate: 3529.41
[2025-10-07T19:28:54.898Z] [LOG] 
[2025-10-07T19:28:54.899Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:28:54.899Z] [LOG]    Expected Hours: 34
[2025-10-07T19:28:54.899Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:28:54.900Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:28:54.900Z] [LOG]    Worked Hours: 34
[2025-10-07T19:28:54.900Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:28:54.900Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:28:54.900Z] [LOG] ============================================================
[2025-10-07T19:28:55.226Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:28:55.226Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:28:55.354Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:55.494Z] [LOG] 📅 Weekend absence check for employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:55.495Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:28:55.495Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:28:55.496Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:28:55.497Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:28:55.498Z] [LOG]    Gross Salary: 150000
[2025-10-07T19:28:55.498Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:28:55.499Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:28:55.499Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:55.499Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:28:55.500Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:55.500Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:28:55.500Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:55.501Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:28:55.501Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:55.501Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:28:55.502Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:55.502Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:28:55.502Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:55.503Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:28:55.503Z] [LOG]    Fixed amount: 0
[2025-10-07T19:28:55.503Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:28:55.503Z] [LOG] Regular deductions for Prasanthan null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:55.504Z] [LOG] Combined deductions for Prasanthan null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:28:55.664Z] [LOG] Creating components for record 830342e3-c4d1-414a-a874-3166721a891d: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 1
}
[2025-10-07T19:28:55.665Z] [LOG] Processing component: {
  "name": "Income Tax",
  "type": "tax",
  "amount": 3000
}
[2025-10-07T19:28:55.917Z] [ERROR] Failed to create component INCOME_TAX: Data truncated for column 'component_type' at row 1
[2025-10-07T19:28:55.918Z] [ERROR] Component data: {
  "code": "INCOME_TAX",
  "name": "Income Tax",
  "type": "tax",
  "category": "tax",
  "amount": 3000
}
[2025-10-07T19:28:55.918Z] [ERROR] Full error: {
  "message": "Data truncated for column 'component_type' at row 1",
  "code": "WARN_DATA_TRUNCATED",
  "errno": 1265,
  "sql": "\n                        INSERT INTO payroll_components (\n                            id, client_id, component_name, component_type, category, \n                            calculation_type, is_taxable, is_mandatory\n                        ) VALUES (?, ?, ?, ?, ?, 'fixed', ?, ?)\n                    ",
  "sqlState": "01000",
  "sqlMessage": "Data truncated for column 'component_type' at row 1"
}
[2025-10-07T19:28:55.919Z] [LOG] Attempting alternative insertion for component: Income Tax
[2025-10-07T19:28:56.290Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:56.291Z] [ERROR] ❌ Error updating financial balances for employee 014397c7-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:28:56.292Z] [LOG] ✅ Prasanthan null: Calculation completed successfully
[2025-10-07T19:28:56.292Z] [LOG] 📊 Progress: 19/34 (55.9%)
[2025-10-07T19:28:56.293Z] [LOG] 
🧮 Processing: Saru null (EMP000022)
[2025-10-07T19:28:56.293Z] [LOG] 📋 Record ID: 86f56247-ac32-4c4e-be76-37c1a7fd8375
[2025-10-07T19:28:56.856Z] [LOG] 🔍 Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:56.856Z] [LOG]    Total components: 7
[2025-10-07T19:28:56.857Z] [LOG]    Applicable components: 7
[2025-10-07T19:28:56.857Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-07T19:28:57.619Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:28:57.748Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:57.867Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:28:58.134Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:58.557Z] [LOG] Employee 0143cc7e-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:58.558Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:28:58.559Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:28:58.559Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:28:58.560Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-07T19:28:58.561Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:28:58.561Z] [LOG] ================================================================================
[2025-10-07T19:28:58.562Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:58.562Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:58.563Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:58.565Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:58.565Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:58.566Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:58.566Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:28:58.567Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:28:58.567Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:28:58.568Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:28:58.568Z] [LOG] ================================================================================
[2025-10-07T19:28:58.569Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:28:58.569Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:28:58.570Z] [LOG]    Expected hours: 34h
[2025-10-07T19:28:58.571Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:28:58.571Z] [LOG] ================================================================================
[2025-10-07T19:28:58.695Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430...
[2025-10-07T19:28:58.696Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:28:58.821Z] [LOG] 📊 Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:58.940Z] [LOG] 📊 Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:59.077Z] [LOG] 📊 Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:59.078Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:28:59.078Z] [LOG] 💰 GROSS CALCULATION for Saru null:
[2025-10-07T19:28:59.079Z] [LOG]    Base Salary: 50000
[2025-10-07T19:28:59.079Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:28:59.196Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:28:59.320Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:28:59.699Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:28:59.824Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:28:59.945Z] [LOG] Employee 0143cc7e-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:28:59.946Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:28:59.947Z] [LOG] ============================================================
[2025-10-07T19:28:59.948Z] [LOG] 👤 Employee ID: 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-07T19:28:59.948Z] [LOG] 💰 Base Salary: 50,000
[2025-10-07T19:28:59.948Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:28:59.949Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:28:59.949Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:28:59.949Z] [LOG] 💵 Per-Day Salary: 10000.00
[2025-10-07T19:28:59.950Z] [LOG] ⏱️  Hourly Rate: 1176.47
[2025-10-07T19:28:59.950Z] [LOG] 
[2025-10-07T19:28:59.950Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:28:59.951Z] [LOG]    Expected Hours: 34
[2025-10-07T19:28:59.951Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:28:59.951Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:28:59.952Z] [LOG]    Worked Hours: 34
[2025-10-07T19:28:59.952Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:28:59.952Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:28:59.953Z] [LOG] ============================================================
[2025-10-07T19:29:00.197Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:29:00.197Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:29:00.317Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:00.441Z] [LOG] 📅 Weekend absence check for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:00.441Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:29:00.441Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:29:00.441Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:29:00.441Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:29:00.441Z] [LOG]    Gross Salary: 50000
[2025-10-07T19:29:00.441Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:29:00.441Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:29:00.442Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:00.442Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:29:00.442Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:00.442Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:29:00.442Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:00.442Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:29:00.442Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:00.442Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:29:00.442Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:00.443Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:29:00.443Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:00.443Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:29:00.443Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:00.443Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:29:00.443Z] [LOG] Regular deductions for Saru null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:00.444Z] [LOG] Combined deductions for Saru null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:00.597Z] [LOG] Creating components for record 86f56247-ac32-4c4e-be76-37c1a7fd8375: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:29:01.009Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:01.011Z] [ERROR] ❌ Error updating financial balances for employee 0143cc7e-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:01.012Z] [LOG] ✅ Saru null: Calculation completed successfully
[2025-10-07T19:29:01.012Z] [LOG] 📊 Progress: 20/34 (58.8%)
[2025-10-07T19:29:01.013Z] [LOG] 
🧮 Processing: Kaushal Thambi (EMP465256103)
[2025-10-07T19:29:01.013Z] [LOG] 📋 Record ID: 9e870b10-195e-4e67-b3c3-90eeecb5e2d1
[2025-10-07T19:29:01.511Z] [LOG] 🔍 Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-07T19:29:01.512Z] [LOG]    Total components: 7
[2025-10-07T19:29:01.512Z] [LOG]    Applicable components: 7
[2025-10-07T19:29:01.512Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-07T19:29:02.253Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:29:02.368Z] [LOG] 🔍 Fetched 5 attendance records for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-07T19:29:02.487Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:29:02.723Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:03.095Z] [LOG] Employee 9e8125c4-ce58-411a-b617-9f75d481c613 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:03.096Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:29:03.096Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:29:03.097Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:29:03.098Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-07T19:29:03.098Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:29:03.098Z] [LOG] ================================================================================
[2025-10-07T19:29:03.099Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:03.099Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:03.099Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:03.100Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:03.100Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:03.101Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:03.101Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:29:03.101Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:29:03.101Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:03.102Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:03.102Z] [LOG] ================================================================================
[2025-10-07T19:29:03.102Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:29:03.103Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:29:03.103Z] [LOG]    Expected hours: 34h
[2025-10-07T19:29:03.103Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:29:03.103Z] [LOG] ================================================================================
[2025-10-07T19:29:03.225Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613...
[2025-10-07T19:29:03.225Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:29:03.347Z] [LOG] 📊 Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-07T19:29:03.467Z] [LOG] 📊 Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-07T19:29:03.594Z] [LOG] 📊 Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-07T19:29:03.595Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:29:03.595Z] [LOG] 💰 GROSS CALCULATION for Kaushal Thambi:
[2025-10-07T19:29:03.596Z] [LOG]    Base Salary: 50000
[2025-10-07T19:29:03.596Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:29:03.714Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:29:03.847Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:04.239Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:29:04.371Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:29:04.494Z] [LOG] Employee 9e8125c4-ce58-411a-b617-9f75d481c613 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:04.495Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:29:04.495Z] [LOG] ============================================================
[2025-10-07T19:29:04.495Z] [LOG] 👤 Employee ID: 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-07T19:29:04.496Z] [LOG] 💰 Base Salary: 50,000
[2025-10-07T19:29:04.496Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:29:04.496Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:29:04.496Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:29:04.497Z] [LOG] 💵 Per-Day Salary: 10000.00
[2025-10-07T19:29:04.497Z] [LOG] ⏱️  Hourly Rate: 1176.47
[2025-10-07T19:29:04.497Z] [LOG] 
[2025-10-07T19:29:04.498Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:29:04.498Z] [LOG]    Expected Hours: 34
[2025-10-07T19:29:04.498Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:29:04.499Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:29:04.499Z] [LOG]    Worked Hours: 34
[2025-10-07T19:29:04.499Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:29:04.499Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:29:04.499Z] [LOG] ============================================================
[2025-10-07T19:29:04.746Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:29:04.746Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:29:04.875Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:04.997Z] [LOG] 📅 Weekend absence check for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-07T19:29:04.997Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:29:04.997Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:29:04.997Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:29:04.998Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:29:04.998Z] [LOG]    Gross Salary: 50000
[2025-10-07T19:29:04.998Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:29:04.998Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:29:04.998Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:04.998Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:29:04.998Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:04.998Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:29:04.999Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:04.999Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:29:04.999Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:04.999Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:29:04.999Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:04.999Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:29:04.999Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:04.999Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:29:05.000Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:05.000Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:29:05.000Z] [LOG] Regular deductions for Kaushal Thambi: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:05.000Z] [LOG] Combined deductions for Kaushal Thambi: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:05.124Z] [LOG] Creating components for record 9e870b10-195e-4e67-b3c3-90eeecb5e2d1: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:29:05.489Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:05.491Z] [ERROR] ❌ Error updating financial balances for employee 9e8125c4-ce58-411a-b617-9f75d481c613: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:05.492Z] [LOG] ✅ Kaushal Thambi: Calculation completed successfully
[2025-10-07T19:29:05.492Z] [LOG] 📊 Progress: 21/34 (61.8%)
[2025-10-07T19:29:05.492Z] [LOG] 
🧮 Processing: Safna Nawas null (EMP000021)
[2025-10-07T19:29:05.493Z] [LOG] 📋 Record ID: a330569d-92e8-4b55-89e2-02db37a72da5
[2025-10-07T19:29:06.033Z] [LOG] 🔍 Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:06.034Z] [LOG]    Total components: 7
[2025-10-07T19:29:06.034Z] [LOG]    Applicable components: 7
[2025-10-07T19:29:06.034Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-07T19:29:06.896Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:29:07.017Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:07.151Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:29:07.399Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:07.764Z] [LOG] Employee 0143c977-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:07.765Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:29:07.765Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:29:07.765Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:29:07.765Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:07.766Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:29:07.766Z] [LOG] ================================================================================
[2025-10-07T19:29:07.766Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:07.766Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:07.766Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:07.766Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:07.766Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:07.767Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:07.767Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:29:07.767Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:29:07.767Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:07.767Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:07.767Z] [LOG] ================================================================================
[2025-10-07T19:29:07.767Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:29:07.767Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:29:07.768Z] [LOG]    Expected hours: 34h
[2025-10-07T19:29:07.768Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:29:07.768Z] [LOG] ================================================================================
[2025-10-07T19:29:07.887Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430...
[2025-10-07T19:29:07.888Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:29:08.005Z] [LOG] 📊 Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:08.121Z] [LOG] 📊 Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:08.242Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:08.243Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:29:08.243Z] [LOG] 💰 GROSS CALCULATION for Safna Nawas null:
[2025-10-07T19:29:08.244Z] [LOG]    Base Salary: 50000
[2025-10-07T19:29:08.244Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:29:08.394Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:29:08.523Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:08.906Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:29:09.039Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:29:09.158Z] [LOG] Employee 0143c977-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:09.159Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:29:09.159Z] [LOG] ============================================================
[2025-10-07T19:29:09.159Z] [LOG] 👤 Employee ID: 0143c977-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:09.159Z] [LOG] 💰 Base Salary: 50,000
[2025-10-07T19:29:09.160Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:29:09.160Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:29:09.160Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:29:09.160Z] [LOG] 💵 Per-Day Salary: 10000.00
[2025-10-07T19:29:09.161Z] [LOG] ⏱️  Hourly Rate: 1176.47
[2025-10-07T19:29:09.161Z] [LOG] 
[2025-10-07T19:29:09.161Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:29:09.161Z] [LOG]    Expected Hours: 34
[2025-10-07T19:29:09.162Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:29:09.162Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:29:09.162Z] [LOG]    Worked Hours: 34
[2025-10-07T19:29:09.162Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:29:09.163Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:29:09.163Z] [LOG] ============================================================
[2025-10-07T19:29:09.431Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:29:09.432Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:29:09.576Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:09.704Z] [LOG] 📅 Weekend absence check for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:09.705Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:29:09.705Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:29:09.705Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:29:09.705Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:29:09.706Z] [LOG]    Gross Salary: 50000
[2025-10-07T19:29:09.706Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:29:09.707Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:29:09.707Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:09.707Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:29:09.707Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:09.708Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:29:09.708Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:09.708Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:29:09.708Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:09.709Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:29:09.709Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:09.709Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:29:09.710Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:09.710Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:29:09.710Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:09.710Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:29:09.710Z] [LOG] Regular deductions for Safna Nawas null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:09.712Z] [LOG] Combined deductions for Safna Nawas null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:09.856Z] [LOG] Creating components for record a330569d-92e8-4b55-89e2-02db37a72da5: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:29:10.221Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:10.222Z] [ERROR] ❌ Error updating financial balances for employee 0143c977-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:10.223Z] [LOG] ✅ Safna Nawas null: Calculation completed successfully
[2025-10-07T19:29:10.223Z] [LOG] 📊 Progress: 22/34 (64.7%)
[2025-10-07T19:29:10.224Z] [LOG] 
🧮 Processing: Ammaar Ilham (EMP000023)
[2025-10-07T19:29:10.224Z] [LOG] 📋 Record ID: c0e85f62-f06b-4e15-a87b-05d0da860f54
[2025-10-07T19:29:10.761Z] [LOG] 🔍 Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:10.761Z] [LOG]    Total components: 7
[2025-10-07T19:29:10.762Z] [LOG]    Applicable components: 7
[2025-10-07T19:29:10.762Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-07T19:29:11.599Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:29:11.728Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:11.850Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:29:12.143Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:12.563Z] [LOG] Employee 0143de00-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:12.563Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:29:12.564Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:29:12.564Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:29:12.565Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:12.565Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:29:12.565Z] [LOG] ================================================================================
[2025-10-07T19:29:12.565Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:12.565Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:12.565Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:12.566Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:12.566Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:12.566Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:12.566Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:29:12.566Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:29:12.566Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:12.567Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:12.567Z] [LOG] ================================================================================
[2025-10-07T19:29:12.567Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:29:12.567Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:29:12.567Z] [LOG]    Expected hours: 34h
[2025-10-07T19:29:12.567Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:29:12.568Z] [LOG] ================================================================================
[2025-10-07T19:29:12.689Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430...
[2025-10-07T19:29:12.689Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:29:12.807Z] [LOG] 📊 Found 0 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:12.942Z] [LOG] 📊 Found 0 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:13.088Z] [LOG] 📊 Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:13.088Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:29:13.088Z] [LOG] 💰 GROSS CALCULATION for Ammaar Ilham:
[2025-10-07T19:29:13.089Z] [LOG]    Base Salary: 70000
[2025-10-07T19:29:13.089Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:29:13.228Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:29:13.361Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:13.725Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:29:13.845Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:29:13.972Z] [LOG] Employee 0143de00-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:13.972Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:29:13.972Z] [LOG] ============================================================
[2025-10-07T19:29:13.973Z] [LOG] 👤 Employee ID: 0143de00-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:13.973Z] [LOG] 💰 Base Salary: 70,000
[2025-10-07T19:29:13.973Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:29:13.973Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:29:13.973Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:29:13.973Z] [LOG] 💵 Per-Day Salary: 14000.00
[2025-10-07T19:29:13.973Z] [LOG] ⏱️  Hourly Rate: 1647.06
[2025-10-07T19:29:13.974Z] [LOG] 
[2025-10-07T19:29:13.974Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:29:13.974Z] [LOG]    Expected Hours: 34
[2025-10-07T19:29:13.974Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:29:13.974Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:29:13.974Z] [LOG]    Worked Hours: 34
[2025-10-07T19:29:13.974Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:29:13.975Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:29:13.975Z] [LOG] ============================================================
[2025-10-07T19:29:14.231Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:29:14.231Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:29:14.351Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:14.479Z] [LOG] 📅 Weekend absence check for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:14.480Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:29:14.480Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:29:14.481Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:29:14.481Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:29:14.481Z] [LOG]    Gross Salary: 70000
[2025-10-07T19:29:14.481Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:29:14.482Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:29:14.482Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:14.482Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:29:14.482Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:14.483Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:29:14.483Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:14.483Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:29:14.483Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:14.484Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:29:14.484Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:14.484Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:29:14.484Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:14.485Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:29:14.485Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:14.485Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:29:14.485Z] [LOG] Regular deductions for Ammaar Ilham: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:14.486Z] [LOG] Combined deductions for Ammaar Ilham: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:14.647Z] [LOG] Creating components for record c0e85f62-f06b-4e15-a87b-05d0da860f54: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:29:15.007Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:15.008Z] [ERROR] ❌ Error updating financial balances for employee 0143de00-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:15.010Z] [LOG] ✅ Ammaar Ilham: Calculation completed successfully
[2025-10-07T19:29:15.010Z] [LOG] 📊 Progress: 23/34 (67.6%)
[2025-10-07T19:29:15.010Z] [LOG] 
🧮 Processing: Sithira null (EMP000039)
[2025-10-07T19:29:15.010Z] [LOG] 📋 Record ID: c6dfdc79-a280-4880-b981-b2c7f1975866
[2025-10-07T19:29:15.511Z] [LOG] 🔍 Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:15.511Z] [LOG]    Total components: 7
[2025-10-07T19:29:15.512Z] [LOG]    Applicable components: 7
[2025-10-07T19:29:15.512Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-07T19:29:16.274Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:29:16.394Z] [LOG] 🔍 Fetched 5 attendance records for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:16.525Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:29:16.773Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:17.144Z] [LOG] Employee 01441e19-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:17.145Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:29:17.145Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:29:17.146Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:29:17.147Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:17.147Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:29:17.147Z] [LOG] ================================================================================
[2025-10-07T19:29:17.148Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:17.148Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:17.148Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:17.148Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:17.149Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:17.149Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:17.149Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:29:17.150Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:29:17.150Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:17.150Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:17.150Z] [LOG] ================================================================================
[2025-10-07T19:29:17.151Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:29:17.151Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:29:17.151Z] [LOG]    Expected hours: 34h
[2025-10-07T19:29:17.151Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:29:17.152Z] [LOG] ================================================================================
[2025-10-07T19:29:17.309Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430...
[2025-10-07T19:29:17.309Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:29:17.448Z] [LOG] 📊 Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:17.564Z] [LOG] 📊 Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:17.702Z] [LOG] 📊 Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:17.702Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:29:17.703Z] [LOG] 💰 GROSS CALCULATION for Sithira null:
[2025-10-07T19:29:17.703Z] [LOG]    Base Salary: 40000
[2025-10-07T19:29:17.703Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:29:17.823Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:29:17.953Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:18.317Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:29:18.436Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:29:18.570Z] [LOG] Employee 01441e19-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:18.570Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:29:18.571Z] [LOG] ============================================================
[2025-10-07T19:29:18.571Z] [LOG] 👤 Employee ID: 01441e19-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:18.572Z] [LOG] 💰 Base Salary: 40,000
[2025-10-07T19:29:18.572Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:29:18.572Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:29:18.573Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:29:18.573Z] [LOG] 💵 Per-Day Salary: 8000.00
[2025-10-07T19:29:18.573Z] [LOG] ⏱️  Hourly Rate: 941.18
[2025-10-07T19:29:18.573Z] [LOG] 
[2025-10-07T19:29:18.574Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:29:18.574Z] [LOG]    Expected Hours: 34
[2025-10-07T19:29:18.574Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:29:18.575Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:29:18.575Z] [LOG]    Worked Hours: 34
[2025-10-07T19:29:18.575Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:29:18.576Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:29:18.576Z] [LOG] ============================================================
[2025-10-07T19:29:18.840Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:29:18.840Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:29:18.980Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:19.096Z] [LOG] 📅 Weekend absence check for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:19.097Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:29:19.097Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:29:19.097Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:29:19.098Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:29:19.098Z] [LOG]    Gross Salary: 40000
[2025-10-07T19:29:19.098Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:29:19.098Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:29:19.099Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:19.099Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:29:19.099Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:19.099Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:29:19.100Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:19.100Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:29:19.100Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:19.101Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:29:19.101Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:19.101Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:29:19.101Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:19.102Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:29:19.102Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:19.102Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:29:19.103Z] [LOG] Regular deductions for Sithira null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:19.103Z] [LOG] Combined deductions for Sithira null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:19.226Z] [LOG] Creating components for record c6dfdc79-a280-4880-b981-b2c7f1975866: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:29:19.628Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:19.629Z] [ERROR] ❌ Error updating financial balances for employee 01441e19-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:19.630Z] [LOG] ✅ Sithira null: Calculation completed successfully
[2025-10-07T19:29:19.630Z] [LOG] 📊 Progress: 24/34 (70.6%)
[2025-10-07T19:29:19.631Z] [LOG] 
🧮 Processing: Saruban null (EMP000007)
[2025-10-07T19:29:19.631Z] [LOG] 📋 Record ID: cf953d6e-10e1-4ddb-acff-a7093d730579
[2025-10-07T19:29:20.152Z] [LOG] 🔍 Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:20.153Z] [LOG]    Total components: 7
[2025-10-07T19:29:20.153Z] [LOG]    Applicable components: 7
[2025-10-07T19:29:20.153Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-07T19:29:20.947Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:29:21.075Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:21.202Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:29:21.448Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:21.839Z] [LOG] Employee 0143a6e3-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:21.839Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:29:21.839Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:29:21.840Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:29:21.841Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:21.841Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:29:21.841Z] [LOG] ================================================================================
[2025-10-07T19:29:21.841Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:21.842Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:21.842Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:21.842Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:21.842Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:21.843Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:21.843Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:29:21.843Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:29:21.843Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:21.844Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:21.844Z] [LOG] ================================================================================
[2025-10-07T19:29:21.844Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:29:21.844Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:29:21.844Z] [LOG]    Expected hours: 34h
[2025-10-07T19:29:21.844Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:29:21.845Z] [LOG] ================================================================================
[2025-10-07T19:29:21.997Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430...
[2025-10-07T19:29:21.997Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:29:22.130Z] [LOG] 📊 Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:22.247Z] [LOG] 📊 Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:22.370Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:22.371Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:29:22.371Z] [LOG] 💰 GROSS CALCULATION for Saruban null:
[2025-10-07T19:29:22.371Z] [LOG]    Base Salary: 0
[2025-10-07T19:29:22.372Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:29:22.488Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:29:22.605Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:22.970Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:29:23.091Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:29:23.216Z] [LOG] Employee 0143a6e3-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:23.216Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:29:23.216Z] [LOG] ============================================================
[2025-10-07T19:29:23.217Z] [LOG] 👤 Employee ID: 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:23.217Z] [LOG] 💰 Base Salary: 0
[2025-10-07T19:29:23.217Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:29:23.217Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:29:23.217Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:29:23.217Z] [LOG] 💵 Per-Day Salary: 0.00
[2025-10-07T19:29:23.217Z] [LOG] ⏱️  Hourly Rate: 0.00
[2025-10-07T19:29:23.218Z] [LOG] 
[2025-10-07T19:29:23.218Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:29:23.218Z] [LOG]    Expected Hours: 34
[2025-10-07T19:29:23.218Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:29:23.218Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:29:23.218Z] [LOG]    Worked Hours: 34
[2025-10-07T19:29:23.218Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:29:23.218Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:29:23.219Z] [LOG] ============================================================
[2025-10-07T19:29:23.463Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:29:23.464Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:29:23.590Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:23.715Z] [LOG] 📅 Weekend absence check for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:23.716Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:29:23.716Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:29:23.716Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:29:23.717Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:29:23.717Z] [LOG]    Gross Salary: 0
[2025-10-07T19:29:23.717Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:29:23.717Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:29:23.718Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:23.718Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:29:23.718Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:23.718Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:29:23.719Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:23.719Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:29:23.719Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:23.720Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:29:23.720Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:23.720Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:29:23.720Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:23.721Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:29:23.721Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:23.721Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:29:23.721Z] [LOG] Regular deductions for Saruban null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:23.722Z] [LOG] Combined deductions for Saruban null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:23.871Z] [LOG] Creating components for record cf953d6e-10e1-4ddb-acff-a7093d730579: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:29:24.229Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:24.231Z] [ERROR] ❌ Error updating financial balances for employee 0143a6e3-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:24.232Z] [LOG] ✅ Saruban null: Calculation completed successfully
[2025-10-07T19:29:24.232Z] [LOG] 📊 Progress: 25/34 (73.5%)
[2025-10-07T19:29:24.232Z] [LOG] 
🧮 Processing: Maryam null (EMP000035)
[2025-10-07T19:29:24.233Z] [LOG] 📋 Record ID: d18e4efb-5273-4f8c-8bae-5f7e188650f0
[2025-10-07T19:29:24.721Z] [LOG] 🔍 Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:24.721Z] [LOG]    Total components: 7
[2025-10-07T19:29:24.721Z] [LOG]    Applicable components: 7
[2025-10-07T19:29:24.721Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-07T19:29:25.456Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:29:25.590Z] [LOG] 🔍 Fetched 5 attendance records for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:25.730Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:29:26.006Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:26.406Z] [LOG] Employee 01440221-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:26.406Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:29:26.407Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:29:26.407Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:29:26.408Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:26.408Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:29:26.408Z] [LOG] ================================================================================
[2025-10-07T19:29:26.408Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:26.409Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:26.409Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:26.409Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:26.409Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:26.409Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:26.409Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:29:26.410Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:29:26.410Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:26.410Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:26.410Z] [LOG] ================================================================================
[2025-10-07T19:29:26.410Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:29:26.410Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:29:26.411Z] [LOG]    Expected hours: 34h
[2025-10-07T19:29:26.411Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:29:26.411Z] [LOG] ================================================================================
[2025-10-07T19:29:26.530Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430...
[2025-10-07T19:29:26.531Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:29:26.649Z] [LOG] 📊 Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:26.784Z] [LOG] 📊 Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:26.908Z] [LOG] 📊 Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:26.908Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:29:26.908Z] [LOG] 💰 GROSS CALCULATION for Maryam null:
[2025-10-07T19:29:26.909Z] [LOG]    Base Salary: 40000
[2025-10-07T19:29:26.909Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:29:27.047Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:29:27.186Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:27.618Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:29:27.778Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:29:27.914Z] [LOG] Employee 01440221-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:27.915Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:29:27.916Z] [LOG] ============================================================
[2025-10-07T19:29:27.916Z] [LOG] 👤 Employee ID: 01440221-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:27.916Z] [LOG] 💰 Base Salary: 40,000
[2025-10-07T19:29:27.917Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:29:27.917Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:29:27.917Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:29:27.918Z] [LOG] 💵 Per-Day Salary: 8000.00
[2025-10-07T19:29:27.918Z] [LOG] ⏱️  Hourly Rate: 941.18
[2025-10-07T19:29:27.918Z] [LOG] 
[2025-10-07T19:29:27.918Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:29:27.919Z] [LOG]    Expected Hours: 34
[2025-10-07T19:29:27.919Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:29:27.919Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:29:27.920Z] [LOG]    Worked Hours: 34
[2025-10-07T19:29:27.920Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:29:27.921Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:29:27.922Z] [LOG] ============================================================
[2025-10-07T19:29:28.185Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:29:28.185Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:29:28.338Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:28.467Z] [LOG] 📅 Weekend absence check for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:28.467Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:29:28.468Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:29:28.469Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:29:28.469Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:29:28.470Z] [LOG]    Gross Salary: 40000
[2025-10-07T19:29:28.471Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:29:28.472Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:29:28.472Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:28.472Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:29:28.472Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:28.473Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:29:28.473Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:28.473Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:29:28.473Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:28.474Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:29:28.475Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:28.475Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:29:28.476Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:28.476Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:29:28.476Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:28.477Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:29:28.477Z] [LOG] Regular deductions for Maryam null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:28.477Z] [LOG] Combined deductions for Maryam null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:28.617Z] [LOG] Creating components for record d18e4efb-5273-4f8c-8bae-5f7e188650f0: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:29:28.981Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:28.983Z] [ERROR] ❌ Error updating financial balances for employee 01440221-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:28.984Z] [LOG] ✅ Maryam null: Calculation completed successfully
[2025-10-07T19:29:28.984Z] [LOG] 📊 Progress: 26/34 (76.5%)
[2025-10-07T19:29:28.985Z] [LOG] 
🧮 Processing: Sumaiya null (EMP000016)
[2025-10-07T19:29:28.985Z] [LOG] 📋 Record ID: d1d9a870-93fe-49d3-9686-d3afa923bb95
[2025-10-07T19:29:29.578Z] [LOG] 🔍 Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:29.578Z] [LOG]    Total components: 7
[2025-10-07T19:29:29.578Z] [LOG]    Applicable components: 7
[2025-10-07T19:29:29.579Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-07T19:29:30.424Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:29:30.545Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:30.684Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:29:30.947Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:31.313Z] [LOG] Employee 0143b22f-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:31.314Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:29:31.314Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:29:31.315Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:29:31.317Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:31.317Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:29:31.318Z] [LOG] ================================================================================
[2025-10-07T19:29:31.318Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:31.318Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:31.319Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:31.319Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:31.321Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:31.322Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:31.322Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:29:31.323Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:29:31.323Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:31.323Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:31.323Z] [LOG] ================================================================================
[2025-10-07T19:29:31.324Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:29:31.324Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:29:31.325Z] [LOG]    Expected hours: 34h
[2025-10-07T19:29:31.325Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:29:31.326Z] [LOG] ================================================================================
[2025-10-07T19:29:31.453Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430...
[2025-10-07T19:29:31.453Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:29:31.579Z] [LOG] 📊 Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:31.726Z] [LOG] 📊 Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:31.847Z] [LOG] 📊 Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:31.848Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:29:31.848Z] [LOG] 💰 GROSS CALCULATION for Sumaiya null:
[2025-10-07T19:29:31.848Z] [LOG]    Base Salary: 60000
[2025-10-07T19:29:31.849Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:29:31.973Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:29:32.098Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:32.471Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:29:32.600Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:29:32.726Z] [LOG] Employee 0143b22f-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:32.726Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:29:32.726Z] [LOG] ============================================================
[2025-10-07T19:29:32.726Z] [LOG] 👤 Employee ID: 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:32.726Z] [LOG] 💰 Base Salary: 60,000
[2025-10-07T19:29:32.726Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:29:32.727Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:29:32.727Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:29:32.727Z] [LOG] 💵 Per-Day Salary: 12000.00
[2025-10-07T19:29:32.727Z] [LOG] ⏱️  Hourly Rate: 1411.76
[2025-10-07T19:29:32.727Z] [LOG] 
[2025-10-07T19:29:32.727Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:29:32.728Z] [LOG]    Expected Hours: 34
[2025-10-07T19:29:32.728Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:29:32.728Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:29:32.728Z] [LOG]    Worked Hours: 34
[2025-10-07T19:29:32.728Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:29:32.728Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:29:32.728Z] [LOG] ============================================================
[2025-10-07T19:29:32.984Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:29:32.984Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:29:33.111Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:33.237Z] [LOG] 📅 Weekend absence check for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:33.238Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:29:33.238Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:29:33.238Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:29:33.238Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:29:33.238Z] [LOG]    Gross Salary: 60000
[2025-10-07T19:29:33.238Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:29:33.238Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:29:33.239Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:33.239Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:29:33.239Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:33.240Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:29:33.240Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:33.240Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:29:33.240Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:33.240Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:29:33.240Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:33.240Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:29:33.240Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:33.240Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:29:33.241Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:33.241Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:29:33.241Z] [LOG] Regular deductions for Sumaiya null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:33.241Z] [LOG] Combined deductions for Sumaiya null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:33.368Z] [LOG] Creating components for record d1d9a870-93fe-49d3-9686-d3afa923bb95: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:29:33.729Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:33.730Z] [ERROR] ❌ Error updating financial balances for employee 0143b22f-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:33.732Z] [LOG] ✅ Sumaiya null: Calculation completed successfully
[2025-10-07T19:29:33.732Z] [LOG] 📊 Progress: 27/34 (79.4%)
[2025-10-07T19:29:33.732Z] [LOG] 
🧮 Processing: Franklin null (EMP000018)
[2025-10-07T19:29:33.733Z] [LOG] 📋 Record ID: dda9fce4-2cf4-4868-af8f-f21d8114ad45
[2025-10-07T19:29:34.272Z] [LOG] 🔍 Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:34.273Z] [LOG]    Total components: 7
[2025-10-07T19:29:34.273Z] [LOG]    Applicable components: 7
[2025-10-07T19:29:34.274Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-07T19:29:34.993Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:29:35.114Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:35.235Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:29:35.487Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:35.872Z] [LOG] Employee 0143c037-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:35.873Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:29:35.874Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:29:35.874Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:29:35.875Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:35.876Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:29:35.876Z] [LOG] ================================================================================
[2025-10-07T19:29:35.876Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:35.877Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:35.877Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:35.878Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:35.878Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:35.879Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:35.880Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:29:35.881Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:29:35.881Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:35.882Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:35.882Z] [LOG] ================================================================================
[2025-10-07T19:29:35.882Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:29:35.882Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:29:35.883Z] [LOG]    Expected hours: 34h
[2025-10-07T19:29:35.883Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:29:35.883Z] [LOG] ================================================================================
[2025-10-07T19:29:36.043Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430...
[2025-10-07T19:29:36.044Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:29:36.174Z] [LOG] 📊 Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:36.313Z] [LOG] 📊 Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:36.455Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:36.455Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:29:36.456Z] [LOG] 💰 GROSS CALCULATION for Franklin null:
[2025-10-07T19:29:36.456Z] [LOG]    Base Salary: 50000
[2025-10-07T19:29:36.457Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:29:36.585Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:29:36.713Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:37.109Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:29:37.274Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:29:37.416Z] [LOG] Employee 0143c037-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:37.417Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:29:37.417Z] [LOG] ============================================================
[2025-10-07T19:29:37.417Z] [LOG] 👤 Employee ID: 0143c037-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:37.417Z] [LOG] 💰 Base Salary: 50,000
[2025-10-07T19:29:37.418Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:29:37.418Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:29:37.418Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:29:37.418Z] [LOG] 💵 Per-Day Salary: 10000.00
[2025-10-07T19:29:37.419Z] [LOG] ⏱️  Hourly Rate: 1176.47
[2025-10-07T19:29:37.419Z] [LOG] 
[2025-10-07T19:29:37.419Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:29:37.419Z] [LOG]    Expected Hours: 34
[2025-10-07T19:29:37.420Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:29:37.420Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:29:37.420Z] [LOG]    Worked Hours: 34
[2025-10-07T19:29:37.420Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:29:37.420Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:29:37.421Z] [LOG] ============================================================
[2025-10-07T19:29:37.673Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:29:37.674Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:29:37.792Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:37.919Z] [LOG] 📅 Weekend absence check for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:37.919Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:29:37.920Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:29:37.920Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:29:37.920Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:29:37.921Z] [LOG]    Gross Salary: 50000
[2025-10-07T19:29:37.921Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:29:37.921Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:29:37.922Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:37.922Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:29:37.923Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:37.923Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:29:37.923Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:37.924Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:29:37.924Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:37.925Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:29:37.925Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:37.926Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:29:37.928Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:37.929Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:29:37.930Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:37.933Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:29:37.934Z] [LOG] Regular deductions for Franklin null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:37.934Z] [LOG] Combined deductions for Franklin null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:38.104Z] [LOG] Creating components for record dda9fce4-2cf4-4868-af8f-f21d8114ad45: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:29:38.497Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:38.499Z] [ERROR] ❌ Error updating financial balances for employee 0143c037-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:38.500Z] [LOG] ✅ Franklin null: Calculation completed successfully
[2025-10-07T19:29:38.501Z] [LOG] 📊 Progress: 28/34 (82.4%)
[2025-10-07T19:29:38.501Z] [LOG] 
🧮 Processing: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-07T19:29:38.501Z] [LOG] 📋 Record ID: e29d9b96-6a6b-4b26-8330-8d33422e06bd
[2025-10-07T19:29:39.039Z] [LOG] 🔍 Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:39.040Z] [LOG]    Total components: 7
[2025-10-07T19:29:39.040Z] [LOG]    Applicable components: 7
[2025-10-07T19:29:39.041Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-07T19:29:39.803Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:29:39.922Z] [LOG] 🔍 Fetched 5 attendance records for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:40.044Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:29:40.294Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:40.672Z] [LOG] Employee 0144461e-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:40.672Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:29:40.672Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:29:40.673Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:29:40.674Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:40.675Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:29:40.675Z] [LOG] ================================================================================
[2025-10-07T19:29:40.676Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:40.676Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:40.676Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:40.677Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:40.677Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:40.677Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:40.680Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:29:40.681Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:29:40.681Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:40.682Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:40.682Z] [LOG] ================================================================================
[2025-10-07T19:29:40.683Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:29:40.684Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:29:40.684Z] [LOG]    Expected hours: 34h
[2025-10-07T19:29:40.684Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:29:40.684Z] [LOG] ================================================================================
[2025-10-07T19:29:40.857Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430...
[2025-10-07T19:29:40.858Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:29:40.991Z] [LOG] 📊 Found 0 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:41.128Z] [LOG] 📊 Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:41.256Z] [LOG] 📊 Found 0 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:41.256Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:29:41.257Z] [LOG] 💰 GROSS CALCULATION for Ashen Nirmal Wadugodapitiya null:
[2025-10-07T19:29:41.257Z] [LOG]    Base Salary: 50000
[2025-10-07T19:29:41.257Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:29:41.378Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:29:41.514Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:41.901Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:29:42.027Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:29:42.175Z] [LOG] Employee 0144461e-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:42.175Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:29:42.176Z] [LOG] ============================================================
[2025-10-07T19:29:42.176Z] [LOG] 👤 Employee ID: 0144461e-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:42.177Z] [LOG] 💰 Base Salary: 50,000
[2025-10-07T19:29:42.177Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:29:42.177Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:29:42.178Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:29:42.178Z] [LOG] 💵 Per-Day Salary: 10000.00
[2025-10-07T19:29:42.178Z] [LOG] ⏱️  Hourly Rate: 1176.47
[2025-10-07T19:29:42.179Z] [LOG] 
[2025-10-07T19:29:42.179Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:29:42.180Z] [LOG]    Expected Hours: 34
[2025-10-07T19:29:42.180Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:29:42.181Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:29:42.181Z] [LOG]    Worked Hours: 34
[2025-10-07T19:29:42.181Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:29:42.182Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:29:42.182Z] [LOG] ============================================================
[2025-10-07T19:29:42.445Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:29:42.445Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:29:42.568Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:42.704Z] [LOG] 📅 Weekend absence check for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:42.704Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:29:42.705Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:29:42.705Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:29:42.705Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:29:42.706Z] [LOG]    Gross Salary: 50000
[2025-10-07T19:29:42.706Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:29:42.706Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:29:42.707Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:42.707Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:29:42.707Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:42.708Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:29:42.708Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:42.708Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:29:42.709Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:42.709Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:29:42.710Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:42.710Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:29:42.710Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:42.711Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:29:42.711Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:42.712Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:29:42.712Z] [LOG] Regular deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:42.713Z] [LOG] Combined deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:42.857Z] [LOG] Creating components for record e29d9b96-6a6b-4b26-8330-8d33422e06bd: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:29:43.221Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:43.223Z] [ERROR] ❌ Error updating financial balances for employee 0144461e-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:43.224Z] [LOG] ✅ Ashen Nirmal Wadugodapitiya null: Calculation completed successfully
[2025-10-07T19:29:43.224Z] [LOG] 📊 Progress: 29/34 (85.3%)
[2025-10-07T19:29:43.225Z] [LOG] 
🧮 Processing: Rasanga null (EMP000028)
[2025-10-07T19:29:43.225Z] [LOG] 📋 Record ID: f531e2a3-e3e0-4ffa-becd-d49cccf20c6b
[2025-10-07T19:29:43.756Z] [LOG] 🔍 Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:43.756Z] [LOG]    Total components: 7
[2025-10-07T19:29:43.757Z] [LOG]    Applicable components: 7
[2025-10-07T19:29:43.757Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-07T19:29:44.548Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:29:44.675Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:44.800Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:29:45.068Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:45.446Z] [LOG] Employee 0143eaec-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:45.447Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:29:45.447Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:29:45.448Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:29:45.449Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:45.449Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:29:45.450Z] [LOG] ================================================================================
[2025-10-07T19:29:45.450Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:45.450Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:45.451Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:45.451Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:45.451Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:45.452Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:45.452Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:29:45.454Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:29:45.455Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:45.455Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:45.455Z] [LOG] ================================================================================
[2025-10-07T19:29:45.456Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:29:45.456Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:29:45.456Z] [LOG]    Expected hours: 34h
[2025-10-07T19:29:45.457Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:29:45.457Z] [LOG] ================================================================================
[2025-10-07T19:29:45.608Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430...
[2025-10-07T19:29:45.610Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:29:45.733Z] [LOG] 📊 Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:45.859Z] [LOG] 📊 Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:45.993Z] [LOG] 📊 Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:45.994Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:29:45.994Z] [LOG] 💰 GROSS CALCULATION for Rasanga null:
[2025-10-07T19:29:45.995Z] [LOG]    Base Salary: 50000
[2025-10-07T19:29:45.995Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:29:46.161Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:29:46.296Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:46.672Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:29:46.807Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:29:46.934Z] [LOG] Employee 0143eaec-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:46.935Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:29:46.935Z] [LOG] ============================================================
[2025-10-07T19:29:46.935Z] [LOG] 👤 Employee ID: 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:46.936Z] [LOG] 💰 Base Salary: 50,000
[2025-10-07T19:29:46.936Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:29:46.937Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:29:46.937Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:29:46.937Z] [LOG] 💵 Per-Day Salary: 10000.00
[2025-10-07T19:29:46.938Z] [LOG] ⏱️  Hourly Rate: 1176.47
[2025-10-07T19:29:46.938Z] [LOG] 
[2025-10-07T19:29:46.938Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:29:46.938Z] [LOG]    Expected Hours: 34
[2025-10-07T19:29:46.939Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:29:46.939Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:29:46.940Z] [LOG]    Worked Hours: 34
[2025-10-07T19:29:46.940Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:29:46.942Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:29:46.943Z] [LOG] ============================================================
[2025-10-07T19:29:47.221Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:29:47.222Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:29:47.343Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:47.489Z] [LOG] 📅 Weekend absence check for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:47.489Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:29:47.490Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:29:47.490Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:29:47.491Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:29:47.491Z] [LOG]    Gross Salary: 50000
[2025-10-07T19:29:47.491Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:29:47.492Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:29:47.492Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:47.492Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:29:47.493Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:47.493Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:29:47.493Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:47.494Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:29:47.494Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:47.495Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:29:47.495Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:47.496Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:29:47.497Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:47.497Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:29:47.497Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:47.498Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:29:47.498Z] [LOG] Regular deductions for Rasanga null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:47.498Z] [LOG] Combined deductions for Rasanga null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:47.652Z] [LOG] Creating components for record f531e2a3-e3e0-4ffa-becd-d49cccf20c6b: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:29:48.062Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:48.064Z] [ERROR] ❌ Error updating financial balances for employee 0143eaec-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:48.065Z] [LOG] ✅ Rasanga null: Calculation completed successfully
[2025-10-07T19:29:48.065Z] [LOG] 📊 Progress: 30/34 (88.2%)
[2025-10-07T19:29:48.066Z] [LOG] 
🧮 Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-07T19:29:48.066Z] [LOG] 📋 Record ID: fb7fde5d-4147-4346-a4b3-ef46d9db4758
[2025-10-07T19:29:48.620Z] [LOG] 🔍 Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:48.621Z] [LOG]    Total components: 7
[2025-10-07T19:29:48.621Z] [LOG]    Applicable components: 7
[2025-10-07T19:29:48.622Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-07T19:29:49.421Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:29:49.548Z] [LOG] 🔍 Fetched 5 attendance records for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:49.671Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:29:49.932Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:50.325Z] [LOG] Employee 01441633-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:50.326Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:29:50.326Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:29:50.327Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:29:50.328Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:50.328Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:29:50.328Z] [LOG] ================================================================================
[2025-10-07T19:29:50.329Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:50.329Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:50.330Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:50.330Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:50.331Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:50.331Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:50.332Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:29:50.332Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:29:50.333Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:50.335Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:50.336Z] [LOG] ================================================================================
[2025-10-07T19:29:50.336Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:29:50.339Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:29:50.339Z] [LOG]    Expected hours: 34h
[2025-10-07T19:29:50.341Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:29:50.341Z] [LOG] ================================================================================
[2025-10-07T19:29:50.476Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430...
[2025-10-07T19:29:50.476Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:29:50.604Z] [LOG] 📊 Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:50.734Z] [LOG] 📊 Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:50.872Z] [LOG] 📊 Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:50.873Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:29:50.873Z] [LOG] 💰 GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-07T19:29:50.874Z] [LOG]    Base Salary: 50000
[2025-10-07T19:29:50.874Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:29:51.004Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:29:51.152Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:51.580Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:29:51.708Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:29:51.845Z] [LOG] Employee 01441633-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:51.846Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:29:51.847Z] [LOG] ============================================================
[2025-10-07T19:29:51.847Z] [LOG] 👤 Employee ID: 01441633-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:51.847Z] [LOG] 💰 Base Salary: 50,000
[2025-10-07T19:29:51.848Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:29:51.848Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:29:51.848Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:29:51.849Z] [LOG] 💵 Per-Day Salary: 10000.00
[2025-10-07T19:29:51.849Z] [LOG] ⏱️  Hourly Rate: 1176.47
[2025-10-07T19:29:51.849Z] [LOG] 
[2025-10-07T19:29:51.849Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:29:51.850Z] [LOG]    Expected Hours: 34
[2025-10-07T19:29:51.850Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:29:51.850Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:29:51.851Z] [LOG]    Worked Hours: 34
[2025-10-07T19:29:51.852Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:29:51.854Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:29:51.854Z] [LOG] ============================================================
[2025-10-07T19:29:52.136Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:29:52.137Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:29:52.256Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:52.374Z] [LOG] 📅 Weekend absence check for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:52.374Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:29:52.375Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:29:52.375Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:29:52.375Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:29:52.376Z] [LOG]    Gross Salary: 50000
[2025-10-07T19:29:52.376Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:29:52.376Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:29:52.377Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:52.377Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:29:52.378Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:52.378Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:29:52.378Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:52.379Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:29:52.379Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:52.381Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:29:52.381Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:52.382Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:29:52.382Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:52.382Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:29:52.383Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:52.383Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:29:52.385Z] [LOG] Regular deductions for Viruna Damsiha Cooray null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:52.386Z] [LOG] Combined deductions for Viruna Damsiha Cooray null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:52.504Z] [LOG] Creating components for record fb7fde5d-4147-4346-a4b3-ef46d9db4758: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:29:52.870Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:52.871Z] [ERROR] ❌ Error updating financial balances for employee 01441633-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:52.872Z] [LOG] ✅ Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-07T19:29:52.873Z] [LOG] 📊 Progress: 31/34 (91.2%)
[2025-10-07T19:29:52.873Z] [LOG] 
🧮 Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-07T19:29:52.874Z] [LOG] 📋 Record ID: fbc2dea7-ced7-495d-86bc-bd6b08760365
[2025-10-07T19:29:53.353Z] [LOG] 🔍 Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:53.354Z] [LOG]    Total components: 7
[2025-10-07T19:29:53.354Z] [LOG]    Applicable components: 7
[2025-10-07T19:29:53.354Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-07T19:29:54.117Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:29:54.245Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:54.376Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:29:54.650Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:55.048Z] [LOG] Employee 0143e6c3-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:55.048Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:29:55.049Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:29:55.050Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:29:55.051Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:55.052Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:29:55.054Z] [LOG] ================================================================================
[2025-10-07T19:29:55.054Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:55.055Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:55.055Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:55.055Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:55.056Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:55.056Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:55.056Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:29:55.056Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:29:55.057Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:55.057Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:55.057Z] [LOG] ================================================================================
[2025-10-07T19:29:55.058Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:29:55.058Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:29:55.058Z] [LOG]    Expected hours: 34h
[2025-10-07T19:29:55.058Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:29:55.059Z] [LOG] ================================================================================
[2025-10-07T19:29:55.189Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430...
[2025-10-07T19:29:55.190Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:29:55.307Z] [LOG] 📊 Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:55.426Z] [LOG] 📊 Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:55.544Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:55.545Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:29:55.546Z] [LOG] 💰 GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-07T19:29:55.547Z] [LOG]    Base Salary: 1
[2025-10-07T19:29:55.548Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:29:55.674Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:29:55.795Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:56.157Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:29:56.281Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:29:56.420Z] [LOG] Employee 0143e6c3-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:56.421Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:29:56.421Z] [LOG] ============================================================
[2025-10-07T19:29:56.422Z] [LOG] 👤 Employee ID: 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:56.422Z] [LOG] 💰 Base Salary: 1
[2025-10-07T19:29:56.422Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:29:56.423Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:29:56.423Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:29:56.423Z] [LOG] 💵 Per-Day Salary: 0.20
[2025-10-07T19:29:56.424Z] [LOG] ⏱️  Hourly Rate: 0.02
[2025-10-07T19:29:56.424Z] [LOG] 
[2025-10-07T19:29:56.425Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:29:56.425Z] [LOG]    Expected Hours: 34
[2025-10-07T19:29:56.425Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:29:56.426Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:29:56.426Z] [LOG]    Worked Hours: 34
[2025-10-07T19:29:56.427Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:29:56.428Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:29:56.428Z] [LOG] ============================================================
[2025-10-07T19:29:56.694Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:29:56.695Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:29:56.812Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:56.945Z] [LOG] 📅 Weekend absence check for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:56.957Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:29:56.958Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:29:56.959Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:29:56.959Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:29:56.959Z] [LOG]    Gross Salary: 1
[2025-10-07T19:29:56.959Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:29:56.959Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:29:56.959Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:56.960Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:29:56.960Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:56.960Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:29:56.960Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:56.961Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:29:56.961Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:56.962Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:29:56.962Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:56.962Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:29:56.963Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:56.964Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:29:56.964Z] [LOG]    Fixed amount: 0
[2025-10-07T19:29:56.964Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:29:56.964Z] [LOG] Regular deductions for Sujevan Selvaratnam null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:56.965Z] [LOG] Combined deductions for Sujevan Selvaratnam null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:29:57.107Z] [LOG] Creating components for record fbc2dea7-ced7-495d-86bc-bd6b08760365: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:29:57.518Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:57.522Z] [ERROR] ❌ Error updating financial balances for employee 0143e6c3-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:29:57.523Z] [LOG] ✅ Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-07T19:29:57.523Z] [LOG] 📊 Progress: 32/34 (94.1%)
[2025-10-07T19:29:57.524Z] [LOG] 
🧮 Processing: Office Team null (EMP000041)
[2025-10-07T19:29:57.524Z] [LOG] 📋 Record ID: fbebdeda-b9c5-444c-94a2-aeb424b35c91
[2025-10-07T19:29:58.015Z] [LOG] 🔍 Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:58.018Z] [LOG]    Total components: 7
[2025-10-07T19:29:58.018Z] [LOG]    Applicable components: 7
[2025-10-07T19:29:58.019Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-07T19:29:58.771Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:29:58.922Z] [LOG] 🔍 Fetched 5 attendance records for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-07T19:29:59.069Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:29:59.328Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:29:59.718Z] [LOG] Employee 01442b21-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:29:59.718Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:29:59.719Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:29:59.719Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:29:59.720Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-07T19:29:59.721Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:29:59.721Z] [LOG] ================================================================================
[2025-10-07T19:29:59.722Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:59.722Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:59.722Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:59.723Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:59.723Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:59.723Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:59.724Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:29:59.724Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:29:59.724Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:29:59.725Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:29:59.725Z] [LOG] ================================================================================
[2025-10-07T19:29:59.725Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:29:59.725Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:29:59.726Z] [LOG]    Expected hours: 34h
[2025-10-07T19:29:59.726Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:29:59.727Z] [LOG] ================================================================================
[2025-10-07T19:29:59.872Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430...
[2025-10-07T19:29:59.873Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:29:59.998Z] [LOG] 📊 Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-07T19:30:00.116Z] [LOG] 📊 Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-07T19:30:00.249Z] [LOG] 📊 Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-07T19:30:00.250Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:30:00.251Z] [LOG] 💰 GROSS CALCULATION for Office Team null:
[2025-10-07T19:30:00.251Z] [LOG]    Base Salary: 1
[2025-10-07T19:30:00.251Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:30:00.370Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:30:00.489Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:30:00.871Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:30:00.998Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:30:01.119Z] [LOG] Employee 01442b21-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:30:01.120Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:30:01.120Z] [LOG] ============================================================
[2025-10-07T19:30:01.121Z] [LOG] 👤 Employee ID: 01442b21-7105-11f0-a50f-98e743540430
[2025-10-07T19:30:01.121Z] [LOG] 💰 Base Salary: 1
[2025-10-07T19:30:01.121Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:30:01.122Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:30:01.122Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:30:01.123Z] [LOG] 💵 Per-Day Salary: 0.20
[2025-10-07T19:30:01.123Z] [LOG] ⏱️  Hourly Rate: 0.02
[2025-10-07T19:30:01.123Z] [LOG] 
[2025-10-07T19:30:01.124Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:30:01.124Z] [LOG]    Expected Hours: 34
[2025-10-07T19:30:01.124Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:30:01.125Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:30:01.125Z] [LOG]    Worked Hours: 34
[2025-10-07T19:30:01.126Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:30:01.127Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:30:01.127Z] [LOG] ============================================================
[2025-10-07T19:30:01.379Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:30:01.380Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:30:01.521Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:30:01.681Z] [LOG] 📅 Weekend absence check for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-07T19:30:01.682Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:30:01.682Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:30:01.682Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:30:01.682Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:30:01.683Z] [LOG]    Gross Salary: 1
[2025-10-07T19:30:01.683Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:30:01.683Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:30:01.683Z] [LOG]    Fixed amount: 0
[2025-10-07T19:30:01.684Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:30:01.684Z] [LOG]    Fixed amount: 0
[2025-10-07T19:30:01.684Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:30:01.684Z] [LOG]    Fixed amount: 0
[2025-10-07T19:30:01.685Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:30:01.685Z] [LOG]    Fixed amount: 0
[2025-10-07T19:30:01.685Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:30:01.686Z] [LOG]    Fixed amount: 0
[2025-10-07T19:30:01.686Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:30:01.686Z] [LOG]    Fixed amount: 0
[2025-10-07T19:30:01.687Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:30:01.687Z] [LOG]    Fixed amount: 0
[2025-10-07T19:30:01.687Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:30:01.687Z] [LOG] Regular deductions for Office Team null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:30:01.688Z] [LOG] Combined deductions for Office Team null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:30:01.823Z] [LOG] Creating components for record fbebdeda-b9c5-444c-94a2-aeb424b35c91: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:30:02.207Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:30:02.209Z] [ERROR] ❌ Error updating financial balances for employee 01442b21-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:30:02.210Z] [LOG] ✅ Office Team null: Calculation completed successfully
[2025-10-07T19:30:02.211Z] [LOG] 📊 Progress: 33/34 (97.1%)
[2025-10-07T19:30:02.211Z] [LOG] 
🧮 Processing: Hari null (EMP000017)
[2025-10-07T19:30:02.211Z] [LOG] 📋 Record ID: ff644457-8002-409f-976a-745e6e95edfd
[2025-10-07T19:30:02.742Z] [LOG] 🔍 Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-07T19:30:02.742Z] [LOG]    Total components: 7
[2025-10-07T19:30:02.743Z] [LOG]    Applicable components: 7
[2025-10-07T19:30:02.743Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-07T19:30:03.528Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-07T19:30:03.671Z] [LOG] 🔍 Fetched 5 attendance records for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-07T19:30:03.816Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-07T19:30:04.097Z] [LOG] 📅 Calculating expected hours from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:30:04.465Z] [LOG] Employee 0143bc58-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to Wed Oct 08 2025 00:00:00 GMT+0530 (India Standard Time)): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:30:04.465Z] [LOG] ✅ Expected hours calculation (WEEKDAYS ONLY): 4 weekday days × 8.5h = 34h
[2025-10-07T19:30:04.466Z] [LOG]    📊 Working days breakdown: Total=5, Weekdays=4, Weekend=1
[2025-10-07T19:30:04.467Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-07T19:30:04.468Z] [LOG] 
📊 DAILY WORKED HOURS BREAKDOWN for Employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-07T19:30:04.469Z] [LOG] ⚙️  Overtime Enabled: NO
[2025-10-07T19:30:04.469Z] [LOG] ================================================================================
[2025-10-07T19:30:04.469Z] [LOG] 📅 2025-10-01 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:30:04.470Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:30:04.470Z] [LOG] 📅 2025-10-02 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:30:04.471Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:30:04.471Z] [LOG] 📅 2025-10-03 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:30:04.471Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:30:04.473Z] [LOG] 📅 2025-10-04 (WEEKEND): 8.5h worked → 4.5h counted → OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-07T19:30:04.473Z] [LOG]    ⏭️  Skipped weekend hours (handled separately): 4.5h
[2025-10-07T19:30:04.474Z] [LOG] 📅 2025-10-07 (WEEKDAY): 8.5h worked → 8.5h counted → OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-07T19:30:04.474Z] [LOG]    ✅ Added to weekday total: 8.5h
[2025-10-07T19:30:04.474Z] [LOG] ================================================================================
[2025-10-07T19:30:04.475Z] [LOG] 📊 TOTAL WORKED HOURS CALCULATION:
[2025-10-07T19:30:04.475Z] [LOG]    Sum of all daily counted hours (rounded): 34h
[2025-10-07T19:30:04.476Z] [LOG]    Expected hours: 34h
[2025-10-07T19:30:04.476Z] [LOG]    Shortfall: 0.00h
[2025-10-07T19:30:04.478Z] [LOG] ================================================================================
[2025-10-07T19:30:04.640Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430...
[2025-10-07T19:30:04.640Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-07T19:30:04.777Z] [LOG] 📊 Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-07T19:30:04.907Z] [LOG] 📊 Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-07T19:30:05.035Z] [LOG] 📊 Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-07T19:30:05.036Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-07T19:30:05.037Z] [LOG] 💰 GROSS CALCULATION for Hari null:
[2025-10-07T19:30:05.037Z] [LOG]    Base Salary: 50000
[2025-10-07T19:30:05.037Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-07T19:30:05.152Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-07T19:30:05.288Z] [LOG] 🗓️  PAYROLL PERIOD: 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:30:05.667Z] [LOG] 📊 CALCULATED WORKING DAYS: 5 days (excluding weekends & holidays)
[2025-10-07T19:30:05.805Z] [LOG] 🏗️  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 4,
  "weekend_working_days": 1,
  "weekend_full_day_weight": 1,
  "weekend_proportional_days": 0,
  "effective_working_days": 5
}
[2025-10-07T19:30:05.938Z] [LOG] Employee 0143bc58-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-10-01 to 2025-10-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-07T19:30:05.939Z] [LOG] 
📊 PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-07T19:30:05.939Z] [LOG] ============================================================
[2025-10-07T19:30:05.940Z] [LOG] 👤 Employee ID: 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-07T19:30:05.940Z] [LOG] 💰 Base Salary: 50,000
[2025-10-07T19:30:05.940Z] [LOG] 📅 Working Days: 5 (Raw: 5)
[2025-10-07T19:30:05.941Z] [LOG] 🎯 Effective Working Days (with weekend weights): 5
[2025-10-07T19:30:05.941Z] [LOG] ⏰ Employee Daily Hours: 8.5h/day
[2025-10-07T19:30:05.942Z] [LOG] 💵 Per-Day Salary: 10000.00
[2025-10-07T19:30:05.942Z] [LOG] ⏱️  Hourly Rate: 1176.47
[2025-10-07T19:30:05.942Z] [LOG] 
[2025-10-07T19:30:05.942Z] [LOG] 📈 ATTENDANCE SUMMARY:
[2025-10-07T19:30:05.943Z] [LOG]    Expected Hours: 34
[2025-10-07T19:30:05.943Z] [LOG]    📋 CALCULATION CHECK: 5 days × 8.5h = 42.50h
[2025-10-07T19:30:05.943Z] [LOG]    ❗ DISCREPANCY: YES - Values don't match!
[2025-10-07T19:30:05.944Z] [LOG]    Worked Hours: 34
[2025-10-07T19:30:05.944Z] [LOG]    ⚠️  Shortfall Hours: 0
[2025-10-07T19:30:05.945Z] [LOG]    ✅ No Shortfall - Employee met required hours
[2025-10-07T19:30:05.945Z] [LOG] ============================================================
[2025-10-07T19:30:06.197Z] [LOG] ✅ Weekend Day Met: 2025-10-04 (Saturday)
[2025-10-07T19:30:06.198Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-07T19:30:06.327Z] [LOG] 📅 Checking weekend absences from 2025-10-01 to 2025-10-07 (today or period end)
[2025-10-07T19:30:06.444Z] [LOG] 📅 Weekend absence check for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-07T19:30:06.445Z] [LOG]    Scheduled weekend dates: 1 days
[2025-10-07T19:30:06.445Z] [LOG]    Attended weekend dates: 1 days
[2025-10-07T19:30:06.445Z] [LOG]    Absent weekend dates: 0 days
[2025-10-07T19:30:06.445Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-07T19:30:06.446Z] [LOG]    Gross Salary: 50000
[2025-10-07T19:30:06.446Z] [LOG]    📋 Processing 7 configured deduction components
[2025-10-07T19:30:06.447Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-07T19:30:06.447Z] [LOG]    Fixed amount: 0
[2025-10-07T19:30:06.447Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-07T19:30:06.447Z] [LOG]    Fixed amount: 0
[2025-10-07T19:30:06.447Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-07T19:30:06.448Z] [LOG]    Fixed amount: 0
[2025-10-07T19:30:06.448Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-07T19:30:06.448Z] [LOG]    Fixed amount: 0
[2025-10-07T19:30:06.448Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-07T19:30:06.449Z] [LOG]    Fixed amount: 0
[2025-10-07T19:30:06.449Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-07T19:30:06.449Z] [LOG]    Fixed amount: 0
[2025-10-07T19:30:06.449Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-07T19:30:06.449Z] [LOG]    Fixed amount: 0
[2025-10-07T19:30:06.450Z] [LOG]    📊 Total Deductions: 0
[2025-10-07T19:30:06.450Z] [LOG] Regular deductions for Hari null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:30:06.450Z] [LOG] Combined deductions for Hari null: {
  "components": [],
  "total": 0
}
[2025-10-07T19:30:06.579Z] [LOG] Creating components for record ff644457-8002-409f-976a-745e6e95edfd: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-07T19:30:06.953Z] [ERROR] ❌ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:30:06.955Z] [ERROR] ❌ Error updating financial balances for employee 0143bc58-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-07T19:30:06.956Z] [LOG] ✅ Hari null: Calculation completed successfully
[2025-10-07T19:30:06.956Z] [LOG] 📊 Progress: 34/34 (100.0%)
[2025-10-07T19:30:06.957Z] [LOG] 
============================================================
[2025-10-07T19:30:06.957Z] [LOG] 📈 Processing Summary: 34 successful, 0 failed
[2025-10-07T19:30:07.996Z] [LOG] 🎉 Payroll calculation completed successfully!
[2025-10-07T19:30:07.996Z] [LOG] 📊 Final Summary: 34 processed, 0 errors
[2025-10-07T19:30:07.997Z] [INFO] ================================================================================
[2025-10-07T19:30:07.997Z] [INFO] ⏰ Completed at: 2025-10-07T19:30:07.997Z
[2025-10-07T19:30:07.997Z] [INFO] 📊 Total log entries: 3341