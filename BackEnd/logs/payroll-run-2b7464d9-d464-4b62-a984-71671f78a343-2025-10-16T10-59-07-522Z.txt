[2025-10-16T10:59:07.522Z] [INFO] 🚀 Payroll calculation logging started for run: 2b7464d9-d464-4b62-a984-71671f78a343
[2025-10-16T10:59:07.522Z] [INFO] 📁 Log file: D:\attendance-system\BackEnd\logs\payroll-run-2b7464d9-d464-4b62-a984-71671f78a343-2025-10-16T10-59-07-522Z.txt
[2025-10-16T10:59:07.522Z] [INFO] ⏰ Started at: 2025-10-16T10:59:07.522Z
[2025-10-16T10:59:07.522Z] [INFO] ================================================================================
[2025-10-16T10:59:07.522Z] [LOG] 🚀 Starting payroll calculation for run: 2b7464d9-d464-4b62-a984-71671f78a343
[2025-10-16T10:59:07.524Z] [LOG] 👤 Client ID: it-signature, User ID: 059304ea-24a5-4d78-a290-cf09b9e53c4c
[2025-10-16T10:59:07.574Z] [LOG] Created payroll_record_component: 79a73041-d427-4132-a056-3e8f69e8ebe2 for Attendance Deduction
[2025-10-16T10:59:08.046Z] [LOG] ✅ Financial balances updated successfully for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:08.046Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T10:59:08.047Z] [LOG] 
======================================================================
[2025-10-16T10:59:08.048Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Uthpala null
[2025-10-16T10:59:08.048Z] [LOG] ======================================================================
[2025-10-16T10:59:08.049Z] [LOG]    Gross Salary: Rs.100000.00
[2025-10-16T10:59:08.050Z] [LOG]    Total Deductions: Rs.18077.76
[2025-10-16T10:59:08.050Z] [LOG]       - Attendance Deduction: Rs.18077.76
[2025-10-16T10:59:08.051Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T10:59:08.052Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T10:59:08.053Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T10:59:08.054Z] [LOG]    NET SALARY: Rs.81922.24
[2025-10-16T10:59:08.054Z] [LOG] ======================================================================

[2025-10-16T10:59:08.055Z] [LOG] ✅ Uthpala null: Calculation completed successfully
[2025-10-16T10:59:08.058Z] [LOG] 📊 Progress: 3/34 (8.8%)
[2025-10-16T10:59:08.061Z] [LOG] 
🧮 Processing: Saruban null (EMP000007)
[2025-10-16T10:59:08.062Z] [LOG] 📋 Record ID: 1a10fb21-bf98-44bb-92c5-833844c5ea9e
[2025-10-16T10:59:08.063Z] [LOG] 
======================================================================
[2025-10-16T10:59:08.064Z] [LOG] 🧮 CALCULATING PAYROLL: Saruban null (EMP000007)
[2025-10-16T10:59:08.065Z] [LOG] ======================================================================
[2025-10-16T10:59:08.430Z] [LOG] ✅ Payroll run verified: august (MONTHLY_2025_08_REGULAR)
[2025-10-16T10:59:08.884Z] [LOG] 📊 Status updated to 'calculating'
[2025-10-16T10:59:09.003Z] [LOG] 🔍 Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-16T10:59:09.004Z] [LOG]    Total components: 9
[2025-10-16T10:59:09.004Z] [LOG]    Applicable components: 9
[2025-10-16T10:59:09.005Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-16T10:59:09.566Z] [LOG] 👥 Processing 31 employee records:
[2025-10-16T10:59:09.567Z] [LOG] ============================================================
[2025-10-16T10:59:09.568Z] [LOG] 
🧮 Processing: Waruni null (EMP000024)
[2025-10-16T10:59:09.568Z] [LOG] 📋 Record ID: 0939e9c5-3371-4224-bb7e-aefa394e2ee2
[2025-10-16T10:59:09.569Z] [LOG] 
======================================================================
[2025-10-16T10:59:09.570Z] [LOG] 🧮 CALCULATING PAYROLL: Waruni null (EMP000024)
[2025-10-16T10:59:09.571Z] [LOG] ======================================================================
[2025-10-16T10:59:09.940Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T10:59:09.941Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T10:59:10.174Z] [LOG] 📊 Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:10.410Z] [LOG] 📊 Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:10.643Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:10.645Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T10:59:10.646Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T10:59:10.648Z] [LOG] 💰 GROSS CALCULATION for Saruban null:
[2025-10-16T10:59:10.648Z] [LOG]    Base Salary: 0
[2025-10-16T10:59:10.649Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T10:59:10.886Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T10:59:11.121Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T10:59:11.122Z] [LOG]    Employee ID: 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:11.123Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T10:59:11.124Z] [LOG]    Base Salary: Rs.0.00
[2025-10-16T10:59:11.357Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T10:59:11.358Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-16T10:59:11.358Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-16T10:59:11.358Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-16T10:59:11.359Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T10:59:11.405Z] [LOG] 🔍 Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-16T10:59:11.406Z] [LOG]    Total components: 9
[2025-10-16T10:59:11.408Z] [LOG]    Applicable components: 9
[2025-10-16T10:59:11.410Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T10:59:11.596Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T10:59:11.597Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T10:59:11.597Z] [LOG]       Saturday: 0.00h
[2025-10-16T10:59:11.598Z] [LOG]       Sunday: 0.00h
[2025-10-16T10:59:11.598Z] [LOG]       Total Worked: 0.00h
[2025-10-16T10:59:11.599Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T10:59:11.600Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T10:59:11.600Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T10:59:11.601Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T10:59:11.602Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:11.602Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T10:59:11.603Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T10:59:11.604Z] [LOG]       Base Salary: Rs.0.00
[2025-10-16T10:59:11.605Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T10:59:11.605Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:11.610Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-16T10:59:11.611Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-16T10:59:11.612Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T10:59:11.613Z] [LOG]    Gross Salary: 0
[2025-10-16T10:59:11.613Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T10:59:11.614Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T10:59:11.615Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:11.615Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T10:59:11.616Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:11.617Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T10:59:11.618Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:11.618Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T10:59:11.619Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:11.620Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T10:59:11.620Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:11.621Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T10:59:11.621Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:11.621Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T10:59:11.622Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:11.622Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T10:59:11.625Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:11.626Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T10:59:11.627Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:11.627Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T10:59:11.628Z] [LOG] Regular deductions for Saruban null: {
  "components": [],
  "total": 0
}
[2025-10-16T10:59:11.628Z] [LOG] Combined deductions for Saruban null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 0
}
[2025-10-16T10:59:11.865Z] [LOG] Creating components for record 1a10fb21-bf98-44bb-92c5-833844c5ea9e: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T10:59:11.867Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-16T10:59:12.101Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T10:59:12.337Z] [LOG] Created payroll_record_component: 8074a356-ff52-4b84-8363-bbab417a4efc for Attendance Deduction
[2025-10-16T10:59:12.832Z] [LOG] ✅ Financial balances updated successfully for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:12.833Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T10:59:12.833Z] [LOG] 
======================================================================
[2025-10-16T10:59:12.834Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saruban null
[2025-10-16T10:59:12.835Z] [LOG] ======================================================================
[2025-10-16T10:59:12.835Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-16T10:59:12.836Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-16T10:59:12.837Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-16T10:59:12.837Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T10:59:12.838Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T10:59:12.838Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T10:59:12.841Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T10:59:12.842Z] [LOG] ======================================================================

[2025-10-16T10:59:12.843Z] [LOG] ✅ Saruban null: Calculation completed successfully
[2025-10-16T10:59:12.846Z] [LOG] 📊 Progress: 4/34 (11.8%)
[2025-10-16T10:59:12.847Z] [LOG] 
🧮 Processing: Dharshika null (EMP000009)
[2025-10-16T10:59:12.848Z] [LOG] 📋 Record ID: db9d9a20-20f7-49d9-8667-0ccaf018ddd6
[2025-10-16T10:59:12.849Z] [LOG] 
======================================================================
[2025-10-16T10:59:12.850Z] [LOG] 🧮 CALCULATING PAYROLL: Dharshika null (EMP000009)
[2025-10-16T10:59:12.851Z] [LOG] ======================================================================
[2025-10-16T10:59:13.823Z] [LOG] 🔍 Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-16T10:59:13.824Z] [LOG]    Total components: 9
[2025-10-16T10:59:13.825Z] [LOG]    Applicable components: 9
[2025-10-16T10:59:13.826Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T10:59:22.335Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T10:59:22.336Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T10:59:22.721Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T10:59:22.722Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T10:59:22.812Z] [LOG] 📊 Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:22.963Z] [LOG] 📊 Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:23.202Z] [LOG] 📊 Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:23.292Z] [LOG] 📊 Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:23.466Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:23.467Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T10:59:23.468Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T10:59:23.469Z] [LOG] 💰 GROSS CALCULATION for Dharshika null:
[2025-10-16T10:59:23.470Z] [LOG]    Base Salary: 100000
[2025-10-16T10:59:23.470Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T10:59:23.706Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T10:59:23.826Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:23.827Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T10:59:23.828Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T10:59:23.829Z] [LOG] 💰 GROSS CALCULATION for Waruni null:
[2025-10-16T10:59:23.830Z] [LOG]    Base Salary: 50000
[2025-10-16T10:59:23.830Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T10:59:23.940Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T10:59:23.941Z] [LOG]    Employee ID: 0143a994-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:23.942Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T10:59:23.943Z] [LOG]    Base Salary: Rs.100000.00
[2025-10-16T10:59:24.224Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T10:59:24.225Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-16T10:59:24.226Z] [LOG]       Weekday Hourly Rate: Rs.470.59
[2025-10-16T10:59:24.226Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-16T10:59:24.227Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T10:59:24.297Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T10:59:24.465Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T10:59:24.466Z] [LOG]       Weekday (Mon-Fri): 138.73h
[2025-10-16T10:59:24.467Z] [LOG]       Saturday: 11.06h
[2025-10-16T10:59:24.467Z] [LOG]       Sunday: 0.00h
[2025-10-16T10:59:24.468Z] [LOG]       Total Worked: 149.79h
[2025-10-16T10:59:24.469Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T10:59:24.469Z] [LOG]       Weekday: 138.73h × Rs.470.59 = Rs.65284.95
[2025-10-16T10:59:24.470Z] [LOG]       Saturday: 11.06h × Rs.888.89 = Rs.9831.12
[2025-10-16T10:59:24.471Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T10:59:24.471Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:24.472Z] [LOG]       Total Earned Salary: Rs.75116.07
[2025-10-16T10:59:24.475Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T10:59:24.477Z] [LOG]       Base Salary: Rs.100000.00
[2025-10-16T10:59:24.478Z] [LOG]       Earned Salary: Rs.75116.07
[2025-10-16T10:59:24.479Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:24.480Z] [LOG]       Attendance Deduction: Rs.24883.93
[2025-10-16T10:59:24.480Z] [LOG]       📉 Deduction is 24.88% of base salary
[2025-10-16T10:59:24.481Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T10:59:24.482Z] [LOG]    Gross Salary: 100000
[2025-10-16T10:59:24.482Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T10:59:24.483Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T10:59:24.484Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:24.484Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T10:59:24.485Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:24.486Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T10:59:24.486Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:24.487Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T10:59:24.488Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:24.488Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T10:59:24.489Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:24.491Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T10:59:24.492Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:24.492Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T10:59:24.492Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:24.493Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T10:59:24.494Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:24.494Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T10:59:24.495Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:24.495Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T10:59:24.496Z] [LOG] Regular deductions for Dharshika null: {
  "components": [],
  "total": 0
}
[2025-10-16T10:59:24.496Z] [LOG] Combined deductions for Dharshika null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 24883.925900000002,
      "details": "Based on worked hours (149.79h total)"
    }
  ],
  "total": 24883.925900000002
}
[2025-10-16T10:59:24.734Z] [LOG] Creating components for record db9d9a20-20f7-49d9-8667-0ccaf018ddd6: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T10:59:24.736Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 24883.925900000002
}
[2025-10-16T10:59:24.752Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T10:59:24.753Z] [LOG]    Employee ID: 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:24.754Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T10:59:24.754Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T10:59:24.971Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T10:59:25.205Z] [LOG] Created payroll_record_component: 86a99ac1-965a-4eb3-bb8e-a968ee8cbffa for Attendance Deduction
[2025-10-16T10:59:25.213Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T10:59:25.214Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T10:59:25.214Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T10:59:25.215Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T10:59:25.216Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T10:59:25.671Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T10:59:25.672Z] [LOG]       Weekday (Mon-Fri): 169.52h
[2025-10-16T10:59:25.672Z] [LOG]       Saturday: 22.39h
[2025-10-16T10:59:25.674Z] [LOG]       Sunday: 0.00h
[2025-10-16T10:59:25.674Z] [LOG]       Total Worked: 191.91h
[2025-10-16T10:59:25.675Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T10:59:25.676Z] [LOG]       Weekday: 169.52h × Rs.235.29 = Rs.39886.36
[2025-10-16T10:59:25.677Z] [LOG]       Saturday: 22.39h × Rs.444.44 = Rs.9951.01
[2025-10-16T10:59:25.677Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T10:59:25.678Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:25.679Z] [LOG]       Total Earned Salary: Rs.49837.37
[2025-10-16T10:59:25.680Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T10:59:25.680Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T10:59:25.681Z] [LOG]       Earned Salary: Rs.49837.37
[2025-10-16T10:59:25.682Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:25.683Z] [LOG]       Attendance Deduction: Rs.162.63
[2025-10-16T10:59:25.684Z] [LOG]       📉 Deduction is 0.33% of base salary
[2025-10-16T10:59:25.685Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T10:59:25.686Z] [LOG]    Gross Salary: 50000
[2025-10-16T10:59:25.687Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T10:59:25.687Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T10:59:25.688Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:25.688Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T10:59:25.691Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:25.692Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T10:59:25.693Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:25.693Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T10:59:25.696Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:25.697Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T10:59:25.698Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:25.699Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T10:59:25.699Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:25.700Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T10:59:25.700Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:25.701Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T10:59:25.702Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:25.702Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T10:59:25.703Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:25.704Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T10:59:25.704Z] [LOG] Regular deductions for Waruni null: {
  "components": [],
  "total": 0
}
[2025-10-16T10:59:25.705Z] [LOG] Combined deductions for Waruni null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 162.6275999999998,
      "details": "Based on worked hours (191.91000000000003h total)"
    }
  ],
  "total": 162.6275999999998
}
[2025-10-16T10:59:25.716Z] [LOG] ✅ Financial balances updated successfully for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:25.717Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T10:59:25.718Z] [LOG] 
======================================================================
[2025-10-16T10:59:25.718Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Dharshika null
[2025-10-16T10:59:25.719Z] [LOG] ======================================================================
[2025-10-16T10:59:25.720Z] [LOG]    Gross Salary: Rs.100000.00
[2025-10-16T10:59:25.720Z] [LOG]    Total Deductions: Rs.24883.93
[2025-10-16T10:59:25.721Z] [LOG]       - Attendance Deduction: Rs.24883.93
[2025-10-16T10:59:25.721Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T10:59:25.721Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T10:59:25.722Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T10:59:25.722Z] [LOG]    NET SALARY: Rs.75116.07
[2025-10-16T10:59:25.723Z] [LOG] ======================================================================

[2025-10-16T10:59:25.724Z] [LOG] ✅ Dharshika null: Calculation completed successfully
[2025-10-16T10:59:25.724Z] [LOG] 📊 Progress: 5/34 (14.7%)
[2025-10-16T10:59:25.725Z] [LOG] 
🧮 Processing: Ishara null (EMP000011)
[2025-10-16T10:59:25.726Z] [LOG] 📋 Record ID: 584dd913-255e-4592-9109-48b156626392
[2025-10-16T10:59:25.726Z] [LOG] 
======================================================================
[2025-10-16T10:59:25.727Z] [LOG] 🧮 CALCULATING PAYROLL: Ishara null (EMP000011)
[2025-10-16T10:59:25.727Z] [LOG] ======================================================================
[2025-10-16T10:59:26.171Z] [LOG] Creating components for record 0939e9c5-3371-4224-bb7e-aefa394e2ee2: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T10:59:26.174Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 162.6275999999998
}
[2025-10-16T10:59:26.636Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T10:59:26.663Z] [LOG] 🔍 Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-16T10:59:26.663Z] [LOG]    Total components: 9
[2025-10-16T10:59:26.664Z] [LOG]    Applicable components: 9
[2025-10-16T10:59:26.664Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-16T10:59:27.092Z] [LOG] Created payroll_record_component: c283b397-330c-4801-8256-2d989ddc7308 for Attendance Deduction
[2025-10-16T10:59:27.603Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T10:59:27.604Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T10:59:27.775Z] [LOG] ✅ Financial balances updated successfully for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:27.775Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T10:59:27.776Z] [LOG] 
======================================================================
[2025-10-16T10:59:27.777Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Waruni null
[2025-10-16T10:59:27.777Z] [LOG] ======================================================================
[2025-10-16T10:59:27.778Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T10:59:27.779Z] [LOG]    Total Deductions: Rs.162.63
[2025-10-16T10:59:27.779Z] [LOG]       - Attendance Deduction: Rs.162.63
[2025-10-16T10:59:27.780Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T10:59:27.781Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T10:59:27.782Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T10:59:27.782Z] [LOG]    NET SALARY: Rs.49837.37
[2025-10-16T10:59:27.783Z] [LOG] ======================================================================

[2025-10-16T10:59:27.784Z] [LOG] ✅ Waruni null: Calculation completed successfully
[2025-10-16T10:59:27.784Z] [LOG] 📊 Progress: 1/31 (3.2%)
[2025-10-16T10:59:27.785Z] [LOG] 
🧮 Processing: Jessie null (EMP000013)
[2025-10-16T10:59:27.787Z] [LOG] 📋 Record ID: 10bb7b9e-ea23-4cf9-a5d1-b271e8580173
[2025-10-16T10:59:27.788Z] [LOG] 
======================================================================
[2025-10-16T10:59:27.791Z] [LOG] 🧮 CALCULATING PAYROLL: Jessie null (EMP000013)
[2025-10-16T10:59:27.792Z] [LOG] ======================================================================
[2025-10-16T10:59:27.872Z] [LOG] 📊 Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:28.108Z] [LOG] 📊 Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:28.340Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:28.341Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T10:59:28.343Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T10:59:28.343Z] [LOG] 💰 GROSS CALCULATION for Ishara null:
[2025-10-16T10:59:28.344Z] [LOG]    Base Salary: 50000
[2025-10-16T10:59:28.345Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T10:59:28.576Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T10:59:28.711Z] [LOG] 🔍 Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-16T10:59:28.712Z] [LOG]    Total components: 9
[2025-10-16T10:59:28.713Z] [LOG]    Applicable components: 9
[2025-10-16T10:59:28.713Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T10:59:28.811Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T10:59:28.812Z] [LOG]    Employee ID: 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:28.812Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T10:59:28.813Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T10:59:29.046Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T10:59:29.047Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T10:59:29.047Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T10:59:29.048Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-16T10:59:29.048Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T10:59:29.280Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T10:59:29.280Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T10:59:29.281Z] [LOG]       Saturday: 0.00h
[2025-10-16T10:59:29.282Z] [LOG]       Sunday: 0.00h
[2025-10-16T10:59:29.282Z] [LOG]       Total Worked: 0.00h
[2025-10-16T10:59:29.283Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T10:59:29.284Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T10:59:29.284Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T10:59:29.285Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T10:59:29.286Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:29.287Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T10:59:29.287Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T10:59:29.288Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T10:59:29.289Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T10:59:29.294Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:29.295Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-16T10:59:29.296Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-16T10:59:29.297Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T10:59:29.297Z] [LOG]    Gross Salary: 50000
[2025-10-16T10:59:29.298Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T10:59:29.298Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T10:59:29.299Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:29.300Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T10:59:29.301Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:29.301Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T10:59:29.302Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:29.303Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T10:59:29.303Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:29.304Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T10:59:29.305Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:29.305Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T10:59:29.309Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:29.310Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T10:59:29.312Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:29.312Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T10:59:29.313Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:29.314Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T10:59:29.314Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:29.315Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T10:59:29.315Z] [LOG] Regular deductions for Ishara null: {
  "components": [],
  "total": 0
}
[2025-10-16T10:59:29.317Z] [LOG] Combined deductions for Ishara null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-16T10:59:29.557Z] [LOG] Creating components for record 584dd913-255e-4592-9109-48b156626392: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T10:59:29.561Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-16T10:59:29.795Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T10:59:30.030Z] [LOG] Created payroll_record_component: d6c7b226-b9ce-4001-87e2-2af9c96f9947 for Attendance Deduction
[2025-10-16T10:59:30.500Z] [LOG] ✅ Financial balances updated successfully for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:30.501Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T10:59:30.502Z] [LOG] 
======================================================================
[2025-10-16T10:59:30.503Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ishara null
[2025-10-16T10:59:30.503Z] [LOG] ======================================================================
[2025-10-16T10:59:30.504Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T10:59:30.504Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-16T10:59:30.505Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-16T10:59:30.506Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T10:59:30.508Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T10:59:30.509Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T10:59:30.510Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T10:59:30.510Z] [LOG] ======================================================================

[2025-10-16T10:59:30.511Z] [LOG] ✅ Ishara null: Calculation completed successfully
[2025-10-16T10:59:30.512Z] [LOG] 📊 Progress: 6/34 (17.6%)
[2025-10-16T10:59:30.513Z] [LOG] 
🧮 Processing: Jessie null (EMP000013)
[2025-10-16T10:59:30.515Z] [LOG] 📋 Record ID: 10bb7b9e-ea23-4cf9-a5d1-b271e8580173
[2025-10-16T10:59:30.516Z] [LOG] 
======================================================================
[2025-10-16T10:59:30.516Z] [LOG] 🧮 CALCULATING PAYROLL: Jessie null (EMP000013)
[2025-10-16T10:59:30.517Z] [LOG] ======================================================================
[2025-10-16T10:59:31.486Z] [LOG] 🔍 Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-16T10:59:31.486Z] [LOG]    Total components: 9
[2025-10-16T10:59:31.487Z] [LOG]    Applicable components: 9
[2025-10-16T10:59:31.488Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T10:59:37.397Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T10:59:37.398Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T10:59:37.624Z] [LOG] 📊 Found 0 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:37.854Z] [LOG] 📊 Found 0 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:38.084Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:38.085Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T10:59:38.086Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T10:59:38.087Z] [LOG] 💰 GROSS CALCULATION for Jessie null:
[2025-10-16T10:59:38.087Z] [LOG]    Base Salary: 60000
[2025-10-16T10:59:38.088Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T10:59:38.323Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T10:59:38.583Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T10:59:38.584Z] [LOG]    Employee ID: 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:38.585Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T10:59:38.585Z] [LOG]    Base Salary: Rs.60000.00
[2025-10-16T10:59:38.813Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T10:59:38.814Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-16T10:59:38.815Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-16T10:59:38.815Z] [LOG]       Saturday Hourly Rate: Rs.282.35
[2025-10-16T10:59:38.816Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T10:59:39.046Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T10:59:39.047Z] [LOG]       Weekday (Mon-Fri): 136.18h
[2025-10-16T10:59:39.048Z] [LOG]       Saturday: 0.00h
[2025-10-16T10:59:39.048Z] [LOG]       Sunday: 0.00h
[2025-10-16T10:59:39.049Z] [LOG]       Total Worked: 136.18h
[2025-10-16T10:59:39.049Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T10:59:39.050Z] [LOG]       Weekday: 136.18h × Rs.282.35 = Rs.38450.42
[2025-10-16T10:59:39.051Z] [LOG]       Saturday: 0.00h × Rs.282.35 = Rs.0.00
[2025-10-16T10:59:39.052Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T10:59:39.053Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:39.054Z] [LOG]       Total Earned Salary: Rs.38450.42
[2025-10-16T10:59:39.054Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T10:59:39.055Z] [LOG]       Base Salary: Rs.60000.00
[2025-10-16T10:59:39.056Z] [LOG]       Earned Salary: Rs.38450.42
[2025-10-16T10:59:39.061Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:39.061Z] [LOG]       Attendance Deduction: Rs.21549.58
[2025-10-16T10:59:39.062Z] [LOG]       📉 Deduction is 35.92% of base salary
[2025-10-16T10:59:39.063Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T10:59:39.064Z] [LOG]    Gross Salary: 60000
[2025-10-16T10:59:39.064Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T10:59:39.065Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T10:59:39.065Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:39.066Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T10:59:39.067Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:39.068Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T10:59:39.068Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:39.069Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T10:59:39.069Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:39.070Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T10:59:39.070Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:39.071Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T10:59:39.071Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:39.072Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T10:59:39.072Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:39.075Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T10:59:39.075Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:39.076Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T10:59:39.076Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:39.077Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T10:59:39.077Z] [LOG] Regular deductions for Jessie null: {
  "components": [],
  "total": 0
}
[2025-10-16T10:59:39.078Z] [LOG] Combined deductions for Jessie null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 21549.576999999997,
      "details": "Based on worked hours (136.18h total)"
    }
  ],
  "total": 21549.576999999997
}
[2025-10-16T10:59:39.310Z] [LOG] Creating components for record 10bb7b9e-ea23-4cf9-a5d1-b271e8580173: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T10:59:39.312Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 21549.576999999997
}
[2025-10-16T10:59:39.541Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T10:59:39.768Z] [LOG] Created payroll_record_component: 6fcea37f-51d9-49dc-8497-ea631bb20b9d for Attendance Deduction
[2025-10-16T10:59:40.221Z] [LOG] ✅ Financial balances updated successfully for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:40.221Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T10:59:40.222Z] [LOG] 
======================================================================
[2025-10-16T10:59:40.224Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Jessie null
[2025-10-16T10:59:40.225Z] [LOG] ======================================================================
[2025-10-16T10:59:40.225Z] [LOG]    Gross Salary: Rs.60000.00
[2025-10-16T10:59:40.226Z] [LOG]    Total Deductions: Rs.21549.58
[2025-10-16T10:59:40.227Z] [LOG]       - Attendance Deduction: Rs.21549.58
[2025-10-16T10:59:40.227Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T10:59:40.228Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T10:59:40.229Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T10:59:40.229Z] [LOG]    NET SALARY: Rs.38450.42
[2025-10-16T10:59:40.230Z] [LOG] ======================================================================

[2025-10-16T10:59:40.232Z] [LOG] ✅ Jessie null: Calculation completed successfully
[2025-10-16T10:59:40.233Z] [LOG] 📊 Progress: 2/31 (6.5%)
[2025-10-16T10:59:40.234Z] [LOG] 
🧮 Processing: Saruban null (EMP000007)
[2025-10-16T10:59:40.236Z] [LOG] 📋 Record ID: 1a10fb21-bf98-44bb-92c5-833844c5ea9e
[2025-10-16T10:59:40.236Z] [LOG] 
======================================================================
[2025-10-16T10:59:40.237Z] [LOG] 🧮 CALCULATING PAYROLL: Saruban null (EMP000007)
[2025-10-16T10:59:40.238Z] [LOG] ======================================================================
[2025-10-16T10:59:40.404Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T10:59:40.405Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T10:59:40.644Z] [LOG] 📊 Found 0 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:40.881Z] [LOG] 📊 Found 0 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:41.116Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:41.118Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T10:59:41.119Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T10:59:41.120Z] [LOG] 💰 GROSS CALCULATION for Jessie null:
[2025-10-16T10:59:41.120Z] [LOG]    Base Salary: 60000
[2025-10-16T10:59:41.121Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T10:59:41.144Z] [LOG] 🔍 Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-16T10:59:41.145Z] [LOG]    Total components: 9
[2025-10-16T10:59:41.146Z] [LOG]    Applicable components: 9
[2025-10-16T10:59:41.146Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-16T10:59:41.357Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T10:59:41.592Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T10:59:41.593Z] [LOG]    Employee ID: 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:41.594Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T10:59:41.594Z] [LOG]    Base Salary: Rs.60000.00
[2025-10-16T10:59:41.829Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T10:59:41.830Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-16T10:59:41.830Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-16T10:59:41.831Z] [LOG]       Saturday Hourly Rate: Rs.282.35
[2025-10-16T10:59:41.832Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T10:59:42.052Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T10:59:42.053Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T10:59:42.072Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T10:59:42.075Z] [LOG]       Weekday (Mon-Fri): 136.18h
[2025-10-16T10:59:42.075Z] [LOG]       Saturday: 0.00h
[2025-10-16T10:59:42.077Z] [LOG]       Sunday: 0.00h
[2025-10-16T10:59:42.077Z] [LOG]       Total Worked: 136.18h
[2025-10-16T10:59:42.078Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T10:59:42.079Z] [LOG]       Weekday: 136.18h × Rs.282.35 = Rs.38450.42
[2025-10-16T10:59:42.079Z] [LOG]       Saturday: 0.00h × Rs.282.35 = Rs.0.00
[2025-10-16T10:59:42.080Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T10:59:42.081Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:42.081Z] [LOG]       Total Earned Salary: Rs.38450.42
[2025-10-16T10:59:42.082Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T10:59:42.083Z] [LOG]       Base Salary: Rs.60000.00
[2025-10-16T10:59:42.084Z] [LOG]       Earned Salary: Rs.38450.42
[2025-10-16T10:59:42.084Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:42.085Z] [LOG]       Attendance Deduction: Rs.21549.58
[2025-10-16T10:59:42.085Z] [LOG]       📉 Deduction is 35.92% of base salary
[2025-10-16T10:59:42.087Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T10:59:42.088Z] [LOG]    Gross Salary: 60000
[2025-10-16T10:59:42.088Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T10:59:42.089Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T10:59:42.092Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:42.093Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T10:59:42.096Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:42.096Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T10:59:42.097Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:42.098Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T10:59:42.098Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:42.099Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T10:59:42.099Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:42.100Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T10:59:42.101Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:42.101Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T10:59:42.102Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:42.102Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T10:59:42.102Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:42.103Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T10:59:42.103Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:42.103Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T10:59:42.104Z] [LOG] Regular deductions for Jessie null: {
  "components": [],
  "total": 0
}
[2025-10-16T10:59:42.104Z] [LOG] Combined deductions for Jessie null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 21549.576999999997,
      "details": "Based on worked hours (136.18h total)"
    }
  ],
  "total": 21549.576999999997
}
[2025-10-16T10:59:42.283Z] [LOG] 📊 Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:42.344Z] [LOG] Creating components for record 10bb7b9e-ea23-4cf9-a5d1-b271e8580173: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T10:59:42.346Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 21549.576999999997
}
[2025-10-16T10:59:42.510Z] [LOG] 📊 Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:42.579Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T10:59:42.737Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:42.738Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T10:59:42.739Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T10:59:42.741Z] [LOG] 💰 GROSS CALCULATION for Saruban null:
[2025-10-16T10:59:42.741Z] [LOG]    Base Salary: 0
[2025-10-16T10:59:42.742Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T10:59:42.812Z] [LOG] Created payroll_record_component: 07edb6dc-f2fc-4398-a990-ee7da35891c9 for Attendance Deduction
[2025-10-16T10:59:42.970Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T10:59:43.200Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T10:59:43.201Z] [LOG]    Employee ID: 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:43.201Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T10:59:43.202Z] [LOG]    Base Salary: Rs.0.00
[2025-10-16T10:59:43.281Z] [LOG] ✅ Financial balances updated successfully for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:43.283Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T10:59:43.283Z] [LOG] 
======================================================================
[2025-10-16T10:59:43.284Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Jessie null
[2025-10-16T10:59:43.285Z] [LOG] ======================================================================
[2025-10-16T10:59:43.285Z] [LOG]    Gross Salary: Rs.60000.00
[2025-10-16T10:59:43.286Z] [LOG]    Total Deductions: Rs.21549.58
[2025-10-16T10:59:43.287Z] [LOG]       - Attendance Deduction: Rs.21549.58
[2025-10-16T10:59:43.288Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T10:59:43.292Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T10:59:43.293Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T10:59:43.294Z] [LOG]    NET SALARY: Rs.38450.42
[2025-10-16T10:59:43.297Z] [LOG] ======================================================================

[2025-10-16T10:59:43.298Z] [LOG] ✅ Jessie null: Calculation completed successfully
[2025-10-16T10:59:43.298Z] [LOG] 📊 Progress: 7/34 (20.6%)
[2025-10-16T10:59:43.299Z] [LOG] 
🧮 Processing: Anoj null (EMP000014)
[2025-10-16T10:59:43.300Z] [LOG] 📋 Record ID: 29a927ed-50a8-4b40-b8ed-a155b11bd541
[2025-10-16T10:59:43.300Z] [LOG] 
======================================================================
[2025-10-16T10:59:43.301Z] [LOG] 🧮 CALCULATING PAYROLL: Anoj null (EMP000014)
[2025-10-16T10:59:43.302Z] [LOG] ======================================================================
[2025-10-16T10:59:43.433Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T10:59:43.433Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-16T10:59:43.434Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-16T10:59:43.435Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-16T10:59:43.435Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T10:59:43.662Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T10:59:43.663Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T10:59:43.664Z] [LOG]       Saturday: 0.00h
[2025-10-16T10:59:43.664Z] [LOG]       Sunday: 0.00h
[2025-10-16T10:59:43.665Z] [LOG]       Total Worked: 0.00h
[2025-10-16T10:59:43.665Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T10:59:43.666Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T10:59:43.667Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T10:59:43.667Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T10:59:43.668Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:43.669Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T10:59:43.670Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T10:59:43.671Z] [LOG]       Base Salary: Rs.0.00
[2025-10-16T10:59:43.672Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T10:59:43.679Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:43.680Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-16T10:59:43.680Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-16T10:59:43.681Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T10:59:43.682Z] [LOG]    Gross Salary: 0
[2025-10-16T10:59:43.682Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T10:59:43.683Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T10:59:43.685Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:43.685Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T10:59:43.686Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:43.687Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T10:59:43.687Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:43.688Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T10:59:43.689Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:43.693Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T10:59:43.693Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:43.693Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T10:59:43.694Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:43.694Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T10:59:43.694Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:43.694Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T10:59:43.695Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:43.695Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T10:59:43.695Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:43.696Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T10:59:43.696Z] [LOG] Regular deductions for Saruban null: {
  "components": [],
  "total": 0
}
[2025-10-16T10:59:43.696Z] [LOG] Combined deductions for Saruban null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 0
}
[2025-10-16T10:59:43.939Z] [LOG] Creating components for record 1a10fb21-bf98-44bb-92c5-833844c5ea9e: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T10:59:43.942Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-16T10:59:44.171Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T10:59:44.234Z] [LOG] 🔍 Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-16T10:59:44.234Z] [LOG]    Total components: 9
[2025-10-16T10:59:44.235Z] [LOG]    Applicable components: 9
[2025-10-16T10:59:44.236Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T10:59:44.398Z] [LOG] Created payroll_record_component: b5abeb01-ac22-4a0e-bce4-2d748dfd2b31 for Attendance Deduction
[2025-10-16T10:59:44.850Z] [LOG] ✅ Financial balances updated successfully for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:44.851Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T10:59:44.851Z] [LOG] 
======================================================================
[2025-10-16T10:59:44.852Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saruban null
[2025-10-16T10:59:44.853Z] [LOG] ======================================================================
[2025-10-16T10:59:44.853Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-16T10:59:44.854Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-16T10:59:44.855Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-16T10:59:44.855Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T10:59:44.856Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T10:59:44.858Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T10:59:44.859Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T10:59:44.860Z] [LOG] ======================================================================

[2025-10-16T10:59:44.860Z] [LOG] ✅ Saruban null: Calculation completed successfully
[2025-10-16T10:59:44.861Z] [LOG] 📊 Progress: 3/31 (9.7%)
[2025-10-16T10:59:44.862Z] [LOG] 
🧮 Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-16T10:59:44.863Z] [LOG] 📋 Record ID: 252943a1-bf77-492a-bb33-7236ef91cf91
[2025-10-16T10:59:44.865Z] [LOG] 
======================================================================
[2025-10-16T10:59:44.866Z] [LOG] 🧮 CALCULATING PAYROLL: Nimdiya Ranasinghe null (EMP000045)
[2025-10-16T10:59:44.866Z] [LOG] ======================================================================
[2025-10-16T10:59:45.778Z] [LOG] 🔍 Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-16T10:59:45.779Z] [LOG]    Total components: 9
[2025-10-16T10:59:45.780Z] [LOG]    Applicable components: 9
[2025-10-16T10:59:45.780Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T10:59:53.069Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T10:59:53.070Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T10:59:53.330Z] [LOG] 📊 Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:53.564Z] [LOG] 📊 Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:53.819Z] [LOG] 📊 Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:53.820Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T10:59:53.821Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T10:59:53.822Z] [LOG] 💰 GROSS CALCULATION for Anoj null:
[2025-10-16T10:59:53.822Z] [LOG]    Base Salary: 50000
[2025-10-16T10:59:53.823Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T10:59:54.072Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T10:59:54.307Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T10:59:54.308Z] [LOG]    Employee ID: 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:54.308Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T10:59:54.308Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T10:59:54.545Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T10:59:54.545Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T10:59:54.545Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T10:59:54.545Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T10:59:54.546Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T10:59:54.678Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T10:59:54.678Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T10:59:54.780Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T10:59:54.781Z] [LOG]       Weekday (Mon-Fri): 108.53h
[2025-10-16T10:59:54.781Z] [LOG]       Saturday: 16.72h
[2025-10-16T10:59:54.781Z] [LOG]       Sunday: 0.00h
[2025-10-16T10:59:54.781Z] [LOG]       Total Worked: 125.25h
[2025-10-16T10:59:54.782Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T10:59:54.782Z] [LOG]       Weekday: 108.53h × Rs.235.29 = Rs.25536.02
[2025-10-16T10:59:54.782Z] [LOG]       Saturday: 16.72h × Rs.444.44 = Rs.7431.04
[2025-10-16T10:59:54.783Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T10:59:54.783Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:54.783Z] [LOG]       Total Earned Salary: Rs.32967.06
[2025-10-16T10:59:54.783Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T10:59:54.784Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T10:59:54.784Z] [LOG]       Earned Salary: Rs.32967.06
[2025-10-16T10:59:54.784Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:54.784Z] [LOG]       Attendance Deduction: Rs.17032.94
[2025-10-16T10:59:54.785Z] [LOG]       📉 Deduction is 34.07% of base salary
[2025-10-16T10:59:54.785Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T10:59:54.785Z] [LOG]    Gross Salary: 50000
[2025-10-16T10:59:54.786Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T10:59:54.786Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T10:59:54.786Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:54.786Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T10:59:54.787Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:54.787Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T10:59:54.787Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:54.787Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T10:59:54.788Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:54.788Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T10:59:54.788Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:54.788Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T10:59:54.789Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:54.789Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T10:59:54.789Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:54.790Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T10:59:54.790Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:54.790Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T10:59:54.791Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:54.791Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T10:59:54.791Z] [LOG] Regular deductions for Anoj null: {
  "components": [],
  "total": 0
}
[2025-10-16T10:59:54.792Z] [LOG] Combined deductions for Anoj null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 17032.9395,
      "details": "Based on worked hours (125.25h total)"
    }
  ],
  "total": 17032.9395
}
[2025-10-16T10:59:54.906Z] [LOG] 📊 Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:55.029Z] [LOG] Creating components for record 29a927ed-50a8-4b40-b8ed-a155b11bd541: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T10:59:55.030Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 17032.9395
}
[2025-10-16T10:59:55.137Z] [LOG] 📊 Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:55.264Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T10:59:55.369Z] [LOG] 📊 Found 0 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:55.370Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T10:59:55.370Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T10:59:55.370Z] [LOG] 💰 GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-16T10:59:55.370Z] [LOG]    Base Salary: 35000
[2025-10-16T10:59:55.371Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T10:59:55.500Z] [LOG] Created payroll_record_component: 5e238436-6b5f-4345-847d-ad347a7eb23c for Attendance Deduction
[2025-10-16T10:59:55.601Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T10:59:55.828Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T10:59:55.828Z] [LOG]    Employee ID: 01444074-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:55.828Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T10:59:55.828Z] [LOG]    Base Salary: Rs.35000.00
[2025-10-16T10:59:55.969Z] [LOG] ✅ Financial balances updated successfully for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:55.969Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T10:59:55.969Z] [LOG] 
======================================================================
[2025-10-16T10:59:55.969Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Anoj null
[2025-10-16T10:59:55.969Z] [LOG] ======================================================================
[2025-10-16T10:59:55.970Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T10:59:55.970Z] [LOG]    Total Deductions: Rs.17032.94
[2025-10-16T10:59:55.970Z] [LOG]       - Attendance Deduction: Rs.17032.94
[2025-10-16T10:59:55.970Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T10:59:55.970Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T10:59:55.970Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T10:59:55.970Z] [LOG]    NET SALARY: Rs.32967.06
[2025-10-16T10:59:55.970Z] [LOG] ======================================================================

[2025-10-16T10:59:55.971Z] [LOG] ✅ Anoj null: Calculation completed successfully
[2025-10-16T10:59:55.971Z] [LOG] 📊 Progress: 8/34 (23.5%)
[2025-10-16T10:59:55.971Z] [LOG] 
🧮 Processing: Sumaiya null (EMP000016)
[2025-10-16T10:59:55.971Z] [LOG] 📋 Record ID: b8ec7d5f-58fd-4e6a-b015-6cc512c9ba88
[2025-10-16T10:59:55.971Z] [LOG] 
======================================================================
[2025-10-16T10:59:55.971Z] [LOG] 🧮 CALCULATING PAYROLL: Sumaiya null (EMP000016)
[2025-10-16T10:59:55.971Z] [LOG] ======================================================================
[2025-10-16T10:59:56.060Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T10:59:56.060Z] [LOG]       Daily Salary: Rs.1400.00
[2025-10-16T10:59:56.060Z] [LOG]       Weekday Hourly Rate: Rs.164.71
[2025-10-16T10:59:56.061Z] [LOG]       Saturday Hourly Rate: Rs.311.11
[2025-10-16T10:59:56.061Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T10:59:56.287Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T10:59:56.288Z] [LOG]       Weekday (Mon-Fri): 147.82h
[2025-10-16T10:59:56.288Z] [LOG]       Saturday: 22.50h
[2025-10-16T10:59:56.288Z] [LOG]       Sunday: 0.00h
[2025-10-16T10:59:56.288Z] [LOG]       Total Worked: 170.32h
[2025-10-16T10:59:56.289Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T10:59:56.289Z] [LOG]       Weekday: 147.82h × Rs.164.71 = Rs.24347.43
[2025-10-16T10:59:56.289Z] [LOG]       Saturday: 22.50h × Rs.311.11 = Rs.6999.98
[2025-10-16T10:59:56.289Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T10:59:56.290Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:56.290Z] [LOG]       Total Earned Salary: Rs.31347.41
[2025-10-16T10:59:56.290Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T10:59:56.290Z] [LOG]       Base Salary: Rs.35000.00
[2025-10-16T10:59:56.291Z] [LOG]       Earned Salary: Rs.31347.41
[2025-10-16T10:59:56.291Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T10:59:56.291Z] [LOG]       Attendance Deduction: Rs.3652.59
[2025-10-16T10:59:56.291Z] [LOG]       📉 Deduction is 10.44% of base salary
[2025-10-16T10:59:56.292Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T10:59:56.292Z] [LOG]    Gross Salary: 35000
[2025-10-16T10:59:56.292Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T10:59:56.292Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T10:59:56.293Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:56.293Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T10:59:56.293Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:56.293Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T10:59:56.293Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:56.294Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T10:59:56.294Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:56.294Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T10:59:56.294Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:56.294Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T10:59:56.294Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:56.295Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T10:59:56.295Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:56.295Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T10:59:56.295Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:56.296Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T10:59:56.296Z] [LOG]    Fixed amount: 0
[2025-10-16T10:59:56.296Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T10:59:56.296Z] [LOG] Regular deductions for Nimdiya Ranasinghe null: {
  "components": [],
  "total": 0
}
[2025-10-16T10:59:56.297Z] [LOG] Combined deductions for Nimdiya Ranasinghe null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 3652.5927999999985,
      "details": "Based on worked hours (170.32h total)"
    }
  ],
  "total": 3652.5927999999985
}
[2025-10-16T10:59:56.529Z] [LOG] Creating components for record 252943a1-bf77-492a-bb33-7236ef91cf91: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T10:59:56.530Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 3652.5927999999985
}
[2025-10-16T10:59:56.761Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T10:59:56.913Z] [LOG] 🔍 Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-16T10:59:56.913Z] [LOG]    Total components: 9
[2025-10-16T10:59:56.914Z] [LOG]    Applicable components: 9
[2025-10-16T10:59:56.914Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T10:59:56.993Z] [LOG] Created payroll_record_component: c255d371-632a-47e1-999d-6f9d1efc3a13 for Attendance Deduction
[2025-10-16T10:59:57.449Z] [LOG] ✅ Financial balances updated successfully for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-16T10:59:57.449Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T10:59:57.450Z] [LOG] 
======================================================================
[2025-10-16T10:59:57.450Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Nimdiya Ranasinghe null
[2025-10-16T10:59:57.450Z] [LOG] ======================================================================
[2025-10-16T10:59:57.451Z] [LOG]    Gross Salary: Rs.35000.00
[2025-10-16T10:59:57.451Z] [LOG]    Total Deductions: Rs.3652.59
[2025-10-16T10:59:57.451Z] [LOG]       - Attendance Deduction: Rs.3652.59
[2025-10-16T10:59:57.451Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T10:59:57.451Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T10:59:57.452Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T10:59:57.452Z] [LOG]    NET SALARY: Rs.31347.41
[2025-10-16T10:59:57.452Z] [LOG] ======================================================================

[2025-10-16T10:59:57.452Z] [LOG] ✅ Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-16T10:59:57.452Z] [LOG] 📊 Progress: 4/31 (12.9%)
[2025-10-16T10:59:57.453Z] [LOG] 
🧮 Processing: Anoj null (EMP000014)
[2025-10-16T10:59:57.453Z] [LOG] 📋 Record ID: 29a927ed-50a8-4b40-b8ed-a155b11bd541
[2025-10-16T10:59:57.453Z] [LOG] 
======================================================================
[2025-10-16T10:59:57.453Z] [LOG] 🧮 CALCULATING PAYROLL: Anoj null (EMP000014)
[2025-10-16T10:59:57.454Z] [LOG] ======================================================================
[2025-10-16T10:59:58.364Z] [LOG] 🔍 Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-16T10:59:58.365Z] [LOG]    Total components: 9
[2025-10-16T10:59:58.365Z] [LOG]    Applicable components: 9
[2025-10-16T10:59:58.365Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T11:00:05.905Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:00:05.907Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:00:06.143Z] [LOG] 📊 Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:06.159Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:00:06.160Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:00:06.376Z] [LOG] 📊 Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:06.387Z] [LOG] 📊 Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:06.610Z] [LOG] 📊 Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:06.611Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:00:06.612Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:00:06.613Z] [LOG] 💰 GROSS CALCULATION for Sumaiya null:
[2025-10-16T11:00:06.614Z] [LOG]    Base Salary: 60000
[2025-10-16T11:00:06.614Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:00:06.616Z] [LOG] 📊 Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:06.844Z] [LOG] 📊 Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:06.845Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:00:06.846Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:00:06.847Z] [LOG] 💰 GROSS CALCULATION for Anoj null:
[2025-10-16T11:00:06.847Z] [LOG]    Base Salary: 50000
[2025-10-16T11:00:06.848Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:00:06.850Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:00:07.077Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:00:07.083Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:00:07.084Z] [LOG]    Employee ID: 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:07.084Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:00:07.085Z] [LOG]    Base Salary: Rs.60000.00
[2025-10-16T11:00:07.304Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:00:07.305Z] [LOG]    Employee ID: 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:07.306Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:00:07.307Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:00:07.318Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:00:07.319Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-16T11:00:07.320Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-16T11:00:07.321Z] [LOG]       Saturday Hourly Rate: Rs.533.33
[2025-10-16T11:00:07.322Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:00:07.537Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:00:07.538Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:00:07.538Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:00:07.539Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:00:07.540Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:00:07.559Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:00:07.559Z] [LOG]       Weekday (Mon-Fri): 162.15h
[2025-10-16T11:00:07.560Z] [LOG]       Saturday: 22.50h
[2025-10-16T11:00:07.561Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:00:07.562Z] [LOG]       Total Worked: 184.65h
[2025-10-16T11:00:07.562Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:00:07.564Z] [LOG]       Weekday: 162.15h × Rs.282.35 = Rs.45783.05
[2025-10-16T11:00:07.564Z] [LOG]       Saturday: 22.50h × Rs.533.33 = Rs.11999.93
[2025-10-16T11:00:07.566Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:00:07.567Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:07.567Z] [LOG]       Total Earned Salary: Rs.57782.98
[2025-10-16T11:00:07.568Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:00:07.569Z] [LOG]       Base Salary: Rs.60000.00
[2025-10-16T11:00:07.569Z] [LOG]       Earned Salary: Rs.57782.98
[2025-10-16T11:00:07.570Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:07.571Z] [LOG]       Attendance Deduction: Rs.2217.02
[2025-10-16T11:00:07.571Z] [LOG]       📉 Deduction is 3.70% of base salary
[2025-10-16T11:00:07.572Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:00:07.575Z] [LOG]    Gross Salary: 60000
[2025-10-16T11:00:07.576Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:00:07.576Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:00:07.578Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.579Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:00:07.580Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.581Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:00:07.581Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.582Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:00:07.583Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.583Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:00:07.584Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.584Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:00:07.585Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.586Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:00:07.586Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.587Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:00:07.587Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.588Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:00:07.589Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.592Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:00:07.593Z] [LOG] Regular deductions for Sumaiya null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:00:07.594Z] [LOG] Combined deductions for Sumaiya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 2217.022499999992,
      "details": "Based on worked hours (184.65h total)"
    }
  ],
  "total": 2217.022499999992
}
[2025-10-16T11:00:07.770Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:00:07.771Z] [LOG]       Weekday (Mon-Fri): 108.53h
[2025-10-16T11:00:07.771Z] [LOG]       Saturday: 16.72h
[2025-10-16T11:00:07.772Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:00:07.773Z] [LOG]       Total Worked: 125.25h
[2025-10-16T11:00:07.774Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:00:07.775Z] [LOG]       Weekday: 108.53h × Rs.235.29 = Rs.25536.02
[2025-10-16T11:00:07.776Z] [LOG]       Saturday: 16.72h × Rs.444.44 = Rs.7431.04
[2025-10-16T11:00:07.776Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:00:07.777Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:07.778Z] [LOG]       Total Earned Salary: Rs.32967.06
[2025-10-16T11:00:07.779Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:00:07.780Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:00:07.781Z] [LOG]       Earned Salary: Rs.32967.06
[2025-10-16T11:00:07.782Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:07.784Z] [LOG]       Attendance Deduction: Rs.17032.94
[2025-10-16T11:00:07.785Z] [LOG]       📉 Deduction is 34.07% of base salary
[2025-10-16T11:00:07.786Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:00:07.787Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:00:07.787Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:00:07.788Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:00:07.789Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.793Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:00:07.794Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.795Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:00:07.796Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.797Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:00:07.798Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.798Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:00:07.799Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.800Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:00:07.800Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.801Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:00:07.801Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.802Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:00:07.802Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.803Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:00:07.804Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:07.804Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:00:07.805Z] [LOG] Regular deductions for Anoj null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:00:07.811Z] [LOG] Combined deductions for Anoj null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 17032.9395,
      "details": "Based on worked hours (125.25h total)"
    }
  ],
  "total": 17032.9395
}
[2025-10-16T11:00:07.835Z] [LOG] Creating components for record b8ec7d5f-58fd-4e6a-b015-6cc512c9ba88: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:00:07.836Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 2217.022499999992
}
[2025-10-16T11:00:08.042Z] [LOG] Creating components for record 29a927ed-50a8-4b40-b8ed-a155b11bd541: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:00:08.044Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 17032.9395
}
[2025-10-16T11:00:08.070Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:00:08.270Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:00:08.306Z] [LOG] Created payroll_record_component: ca18f6a9-885e-427a-915d-a85215df05b7 for Attendance Deduction
[2025-10-16T11:00:08.498Z] [LOG] Created payroll_record_component: a9446be2-6321-40a5-ba7a-9e062a0d336c for Attendance Deduction
[2025-10-16T11:00:08.778Z] [LOG] ✅ Financial balances updated successfully for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:08.779Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:00:08.780Z] [LOG] 
======================================================================
[2025-10-16T11:00:08.780Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sumaiya null
[2025-10-16T11:00:08.781Z] [LOG] ======================================================================
[2025-10-16T11:00:08.782Z] [LOG]    Gross Salary: Rs.60000.00
[2025-10-16T11:00:08.782Z] [LOG]    Total Deductions: Rs.2217.02
[2025-10-16T11:00:08.783Z] [LOG]       - Attendance Deduction: Rs.2217.02
[2025-10-16T11:00:08.783Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:00:08.784Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:00:08.785Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:00:08.786Z] [LOG]    NET SALARY: Rs.57782.98
[2025-10-16T11:00:08.786Z] [LOG] ======================================================================

[2025-10-16T11:00:08.787Z] [LOG] ✅ Sumaiya null: Calculation completed successfully
[2025-10-16T11:00:08.788Z] [LOG] 📊 Progress: 9/34 (26.5%)
[2025-10-16T11:00:08.788Z] [LOG] 
🧮 Processing: Hari null (EMP000017)
[2025-10-16T11:00:08.793Z] [LOG] 📋 Record ID: 548e632f-1ea1-4c1b-90a4-f7abf5e380c6
[2025-10-16T11:00:08.794Z] [LOG] 
======================================================================
[2025-10-16T11:00:08.795Z] [LOG] 🧮 CALCULATING PAYROLL: Hari null (EMP000017)
[2025-10-16T11:00:08.796Z] [LOG] ======================================================================
[2025-10-16T11:00:08.951Z] [LOG] ✅ Financial balances updated successfully for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:08.952Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:00:08.953Z] [LOG] 
======================================================================
[2025-10-16T11:00:08.953Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Anoj null
[2025-10-16T11:00:08.954Z] [LOG] ======================================================================
[2025-10-16T11:00:08.955Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:00:08.955Z] [LOG]    Total Deductions: Rs.17032.94
[2025-10-16T11:00:08.956Z] [LOG]       - Attendance Deduction: Rs.17032.94
[2025-10-16T11:00:08.957Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:00:08.958Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:00:08.959Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:00:08.960Z] [LOG]    NET SALARY: Rs.32967.06
[2025-10-16T11:00:08.961Z] [LOG] ======================================================================

[2025-10-16T11:00:08.961Z] [LOG] ✅ Anoj null: Calculation completed successfully
[2025-10-16T11:00:08.962Z] [LOG] 📊 Progress: 5/31 (16.1%)
[2025-10-16T11:00:08.963Z] [LOG] 
🧮 Processing: Safna Nawas null (EMP000021)
[2025-10-16T11:00:08.965Z] [LOG] 📋 Record ID: 316ad994-e8d6-4dc0-8c8c-de6e0060c177
[2025-10-16T11:00:08.966Z] [LOG] 
======================================================================
[2025-10-16T11:00:08.967Z] [LOG] 🧮 CALCULATING PAYROLL: Safna Nawas null (EMP000021)
[2025-10-16T11:00:08.968Z] [LOG] ======================================================================
[2025-10-16T11:00:09.763Z] [LOG] 🔍 Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-16T11:00:09.764Z] [LOG]    Total components: 9
[2025-10-16T11:00:09.764Z] [LOG]    Applicable components: 9
[2025-10-16T11:00:09.765Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T11:00:09.877Z] [LOG] 🔍 Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-16T11:00:09.877Z] [LOG]    Total components: 9
[2025-10-16T11:00:09.878Z] [LOG]    Applicable components: 9
[2025-10-16T11:00:09.878Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T11:00:14.024Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:00:14.025Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:00:14.279Z] [LOG] 📊 Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:14.522Z] [LOG] 📊 Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:14.764Z] [LOG] 📊 Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:14.765Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:00:14.766Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:00:14.767Z] [LOG] 💰 GROSS CALCULATION for Hari null:
[2025-10-16T11:00:14.768Z] [LOG]    Base Salary: 50000
[2025-10-16T11:00:14.768Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:00:15.002Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:00:15.235Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:00:15.236Z] [LOG]    Employee ID: 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:15.236Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:00:15.237Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:00:15.472Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:00:15.474Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:00:15.474Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:00:15.475Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:00:15.475Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:00:15.712Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:00:15.713Z] [LOG]       Weekday (Mon-Fri): 114.85h
[2025-10-16T11:00:15.713Z] [LOG]       Saturday: 16.84h
[2025-10-16T11:00:15.714Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:00:15.715Z] [LOG]       Total Worked: 131.69h
[2025-10-16T11:00:15.715Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:00:15.716Z] [LOG]       Weekday: 114.85h × Rs.235.29 = Rs.27023.06
[2025-10-16T11:00:15.717Z] [LOG]       Saturday: 16.84h × Rs.444.44 = Rs.7484.37
[2025-10-16T11:00:15.717Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:00:15.718Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:15.719Z] [LOG]       Total Earned Salary: Rs.34507.43
[2025-10-16T11:00:15.719Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:00:15.720Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:00:15.721Z] [LOG]       Earned Salary: Rs.34507.43
[2025-10-16T11:00:15.721Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:15.726Z] [LOG]       Attendance Deduction: Rs.15492.57
[2025-10-16T11:00:15.728Z] [LOG]       📉 Deduction is 30.99% of base salary
[2025-10-16T11:00:15.729Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:00:15.729Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:00:15.730Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:00:15.730Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:00:15.731Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:15.732Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:00:15.732Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:15.733Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:00:15.734Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:15.734Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:00:15.735Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:15.736Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:00:15.736Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:15.737Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:00:15.737Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:15.738Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:00:15.742Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:15.743Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:00:15.744Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:15.745Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:00:15.746Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:15.746Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:00:15.747Z] [LOG] Regular deductions for Hari null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:00:15.748Z] [LOG] Combined deductions for Hari null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 15492.573900000003,
      "details": "Based on worked hours (131.69h total)"
    }
  ],
  "total": 15492.573900000003
}
[2025-10-16T11:00:15.987Z] [LOG] Creating components for record 548e632f-1ea1-4c1b-90a4-f7abf5e380c6: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:00:15.991Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 15492.573900000003
}
[2025-10-16T11:00:16.226Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:00:16.461Z] [LOG] Created payroll_record_component: 3e10fd0d-4730-4bfc-8837-9475a91d77fb for Attendance Deduction
[2025-10-16T11:00:16.926Z] [LOG] ✅ Financial balances updated successfully for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:16.927Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:00:16.927Z] [LOG] 
======================================================================
[2025-10-16T11:00:16.928Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Hari null
[2025-10-16T11:00:16.929Z] [LOG] ======================================================================
[2025-10-16T11:00:16.929Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:00:16.930Z] [LOG]    Total Deductions: Rs.15492.57
[2025-10-16T11:00:16.930Z] [LOG]       - Attendance Deduction: Rs.15492.57
[2025-10-16T11:00:16.931Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:00:16.932Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:00:16.932Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:00:16.933Z] [LOG]    NET SALARY: Rs.34507.43
[2025-10-16T11:00:16.934Z] [LOG] ======================================================================

[2025-10-16T11:00:16.935Z] [LOG] ✅ Hari null: Calculation completed successfully
[2025-10-16T11:00:16.935Z] [LOG] 📊 Progress: 10/34 (29.4%)
[2025-10-16T11:00:16.936Z] [LOG] 
🧮 Processing: Franklin null (EMP000018)
[2025-10-16T11:00:16.939Z] [LOG] 📋 Record ID: 582bab68-b5da-4383-a1e6-3b9999d02341
[2025-10-16T11:00:16.942Z] [LOG] 
======================================================================
[2025-10-16T11:00:16.943Z] [LOG] 🧮 CALCULATING PAYROLL: Franklin null (EMP000018)
[2025-10-16T11:00:16.944Z] [LOG] ======================================================================
[2025-10-16T11:00:17.720Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:00:17.721Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:00:17.892Z] [LOG] 🔍 Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-16T11:00:17.893Z] [LOG]    Total components: 9
[2025-10-16T11:00:17.893Z] [LOG]    Applicable components: 9
[2025-10-16T11:00:17.894Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-16T11:00:17.947Z] [LOG] 📊 Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:18.174Z] [LOG] 📊 Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:18.404Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:18.405Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:00:18.407Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:00:18.408Z] [LOG] 💰 GROSS CALCULATION for Safna Nawas null:
[2025-10-16T11:00:18.409Z] [LOG]    Base Salary: 50000
[2025-10-16T11:00:18.409Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:00:18.640Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:00:18.866Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:00:18.867Z] [LOG]    Employee ID: 0143c977-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:18.868Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:00:18.868Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:00:19.114Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:00:19.115Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:00:19.115Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:00:19.115Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:00:19.116Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:00:19.345Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:00:19.346Z] [LOG]       Weekday (Mon-Fri): 141.03h
[2025-10-16T11:00:19.346Z] [LOG]       Saturday: 17.47h
[2025-10-16T11:00:19.347Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:00:19.348Z] [LOG]       Total Worked: 158.50h
[2025-10-16T11:00:19.348Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:00:19.349Z] [LOG]       Weekday: 141.03h × Rs.235.29 = Rs.33182.95
[2025-10-16T11:00:19.350Z] [LOG]       Saturday: 17.47h × Rs.444.44 = Rs.7764.37
[2025-10-16T11:00:19.350Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:00:19.351Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:19.352Z] [LOG]       Total Earned Salary: Rs.40947.32
[2025-10-16T11:00:19.352Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:00:19.353Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:00:19.354Z] [LOG]       Earned Salary: Rs.40947.32
[2025-10-16T11:00:19.354Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:19.355Z] [LOG]       Attendance Deduction: Rs.9052.68
[2025-10-16T11:00:19.360Z] [LOG]       📉 Deduction is 18.11% of base salary
[2025-10-16T11:00:19.361Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:00:19.362Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:00:19.363Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:00:19.363Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:00:19.364Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:19.365Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:00:19.365Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:19.366Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:00:19.367Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:19.367Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:00:19.368Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:19.368Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:00:19.369Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:19.370Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:00:19.370Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:19.371Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:00:19.372Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:19.375Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:00:19.376Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:19.377Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:00:19.377Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:19.378Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:00:19.379Z] [LOG] Regular deductions for Safna Nawas null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:00:19.380Z] [LOG] Combined deductions for Safna Nawas null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 9052.684500000003,
      "details": "Based on worked hours (158.5h total)"
    }
  ],
  "total": 9052.684500000003
}
[2025-10-16T11:00:19.611Z] [LOG] Creating components for record 316ad994-e8d6-4dc0-8c8c-de6e0060c177: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:00:19.612Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 9052.684500000003
}
[2025-10-16T11:00:19.841Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:00:20.073Z] [LOG] Created payroll_record_component: 26ccfc41-5a25-496d-a502-08cef7519078 for Attendance Deduction
[2025-10-16T11:00:20.526Z] [LOG] ✅ Financial balances updated successfully for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:20.526Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:00:20.527Z] [LOG] 
======================================================================
[2025-10-16T11:00:20.528Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Safna Nawas null
[2025-10-16T11:00:20.528Z] [LOG] ======================================================================
[2025-10-16T11:00:20.529Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:00:20.529Z] [LOG]    Total Deductions: Rs.9052.68
[2025-10-16T11:00:20.530Z] [LOG]       - Attendance Deduction: Rs.9052.68
[2025-10-16T11:00:20.531Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:00:20.531Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:00:20.532Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:00:20.533Z] [LOG]    NET SALARY: Rs.40947.32
[2025-10-16T11:00:20.534Z] [LOG] ======================================================================

[2025-10-16T11:00:20.535Z] [LOG] ✅ Safna Nawas null: Calculation completed successfully
[2025-10-16T11:00:20.536Z] [LOG] 📊 Progress: 6/31 (19.4%)
[2025-10-16T11:00:20.536Z] [LOG] 
🧮 Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-16T11:00:20.539Z] [LOG] 📋 Record ID: 33bdbc12-b0c9-48b5-a079-15abb6da75d7
[2025-10-16T11:00:20.542Z] [LOG] 
======================================================================
[2025-10-16T11:00:20.543Z] [LOG] 🧮 CALCULATING PAYROLL: Viruna Damsiha Cooray null (EMP000038)
[2025-10-16T11:00:20.544Z] [LOG] ======================================================================
[2025-10-16T11:00:21.455Z] [LOG] 🔍 Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-16T11:00:21.457Z] [LOG]    Total components: 9
[2025-10-16T11:00:21.458Z] [LOG]    Applicable components: 9
[2025-10-16T11:00:21.459Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T11:00:23.096Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:00:23.097Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:00:23.333Z] [LOG] 📊 Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:23.567Z] [LOG] 📊 Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:23.803Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:23.804Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:00:23.805Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:00:23.806Z] [LOG] 💰 GROSS CALCULATION for Franklin null:
[2025-10-16T11:00:23.807Z] [LOG]    Base Salary: 50000
[2025-10-16T11:00:23.808Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:00:24.044Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:00:24.283Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:00:24.284Z] [LOG]    Employee ID: 0143c037-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:24.285Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:00:24.285Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:00:24.520Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:00:24.521Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:00:24.521Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:00:24.521Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:00:24.521Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:00:24.756Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:00:24.757Z] [LOG]       Weekday (Mon-Fri): 121.77h
[2025-10-16T11:00:24.757Z] [LOG]       Saturday: 11.61h
[2025-10-16T11:00:24.757Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:00:24.758Z] [LOG]       Total Worked: 133.38h
[2025-10-16T11:00:24.758Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:00:24.758Z] [LOG]       Weekday: 121.77h × Rs.235.29 = Rs.28651.26
[2025-10-16T11:00:24.759Z] [LOG]       Saturday: 11.61h × Rs.444.44 = Rs.5159.95
[2025-10-16T11:00:24.759Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:00:24.759Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:24.760Z] [LOG]       Total Earned Salary: Rs.33811.21
[2025-10-16T11:00:24.760Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:00:24.761Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:00:24.761Z] [LOG]       Earned Salary: Rs.33811.21
[2025-10-16T11:00:24.761Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:24.762Z] [LOG]       Attendance Deduction: Rs.16188.79
[2025-10-16T11:00:24.762Z] [LOG]       📉 Deduction is 32.38% of base salary
[2025-10-16T11:00:24.762Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:00:24.763Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:00:24.763Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:00:24.763Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:00:24.764Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:24.764Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:00:24.764Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:24.765Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:00:24.765Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:24.766Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:00:24.766Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:24.767Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:00:24.767Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:24.767Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:00:24.768Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:24.768Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:00:24.768Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:24.769Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:00:24.769Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:24.769Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:00:24.769Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:24.770Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:00:24.770Z] [LOG] Regular deductions for Franklin null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:00:24.770Z] [LOG] Combined deductions for Franklin null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 16188.7883,
      "details": "Based on worked hours (133.38h total)"
    }
  ],
  "total": 16188.7883
}
[2025-10-16T11:00:25.014Z] [LOG] Creating components for record 582bab68-b5da-4383-a1e6-3b9999d02341: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:00:25.016Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 16188.7883
}
[2025-10-16T11:00:25.248Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:00:25.487Z] [LOG] Created payroll_record_component: 58c96996-44bf-4a24-b587-2d96e1c5ac6e for Attendance Deduction
[2025-10-16T11:00:25.956Z] [LOG] ✅ Financial balances updated successfully for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:25.958Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:00:25.958Z] [LOG] 
======================================================================
[2025-10-16T11:00:25.959Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Franklin null
[2025-10-16T11:00:25.960Z] [LOG] ======================================================================
[2025-10-16T11:00:25.960Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:00:25.961Z] [LOG]    Total Deductions: Rs.16188.79
[2025-10-16T11:00:25.962Z] [LOG]       - Attendance Deduction: Rs.16188.79
[2025-10-16T11:00:25.962Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:00:25.963Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:00:25.964Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:00:25.966Z] [LOG]    NET SALARY: Rs.33811.21
[2025-10-16T11:00:25.966Z] [LOG] ======================================================================

[2025-10-16T11:00:25.967Z] [LOG] ✅ Franklin null: Calculation completed successfully
[2025-10-16T11:00:25.968Z] [LOG] 📊 Progress: 11/34 (32.4%)
[2025-10-16T11:00:25.970Z] [LOG] 
🧮 Processing: Safna Nawas null (EMP000021)
[2025-10-16T11:00:25.971Z] [LOG] 📋 Record ID: 316ad994-e8d6-4dc0-8c8c-de6e0060c177
[2025-10-16T11:00:25.971Z] [LOG] 
======================================================================
[2025-10-16T11:00:25.974Z] [LOG] 🧮 CALCULATING PAYROLL: Safna Nawas null (EMP000021)
[2025-10-16T11:00:25.975Z] [LOG] ======================================================================
[2025-10-16T11:00:26.917Z] [LOG] 🔍 Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-16T11:00:26.917Z] [LOG]    Total components: 9
[2025-10-16T11:00:26.918Z] [LOG]    Applicable components: 9
[2025-10-16T11:00:26.918Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T11:00:31.524Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:00:31.525Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:00:31.752Z] [LOG] 📊 Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:31.982Z] [LOG] 📊 Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:32.211Z] [LOG] 📊 Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:32.211Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:00:32.212Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:00:32.213Z] [LOG] 💰 GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-16T11:00:32.214Z] [LOG]    Base Salary: 50000
[2025-10-16T11:00:32.215Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:00:32.455Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:00:32.683Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:00:32.684Z] [LOG]    Employee ID: 01441633-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:32.685Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:00:32.685Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:00:32.914Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:00:32.915Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:00:32.915Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:00:32.916Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:00:32.916Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:00:33.156Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:00:33.157Z] [LOG]       Weekday (Mon-Fri): 165.42h
[2025-10-16T11:00:33.158Z] [LOG]       Saturday: 21.57h
[2025-10-16T11:00:33.158Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:00:33.159Z] [LOG]       Total Worked: 186.99h
[2025-10-16T11:00:33.160Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:00:33.161Z] [LOG]       Weekday: 165.42h × Rs.235.29 = Rs.38921.67
[2025-10-16T11:00:33.161Z] [LOG]       Saturday: 21.57h × Rs.444.44 = Rs.9586.57
[2025-10-16T11:00:33.162Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:00:33.163Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:33.163Z] [LOG]       Total Earned Salary: Rs.48508.24
[2025-10-16T11:00:33.164Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:00:33.165Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:00:33.165Z] [LOG]       Earned Salary: Rs.48508.24
[2025-10-16T11:00:33.166Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:33.168Z] [LOG]       Attendance Deduction: Rs.1491.76
[2025-10-16T11:00:33.169Z] [LOG]       📉 Deduction is 2.98% of base salary
[2025-10-16T11:00:33.170Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:00:33.171Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:00:33.171Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:00:33.174Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:00:33.175Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:33.177Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:00:33.178Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:33.178Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:00:33.179Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:33.180Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:00:33.181Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:33.181Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:00:33.182Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:33.183Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:00:33.183Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:33.184Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:00:33.184Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:33.185Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:00:33.186Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:33.187Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:00:33.188Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:33.188Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:00:33.191Z] [LOG] Regular deductions for Viruna Damsiha Cooray null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:00:33.191Z] [LOG] Combined deductions for Viruna Damsiha Cooray null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1491.7574000000022,
      "details": "Based on worked hours (186.98999999999998h total)"
    }
  ],
  "total": 1491.7574000000022
}
[2025-10-16T11:00:33.423Z] [LOG] Creating components for record 33bdbc12-b0c9-48b5-a079-15abb6da75d7: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:00:33.425Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1491.7574000000022
}
[2025-10-16T11:00:33.654Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:00:33.888Z] [LOG] Created payroll_record_component: b55eb70b-73c1-4fad-b704-e5154480164f for Attendance Deduction
[2025-10-16T11:00:34.342Z] [LOG] ✅ Financial balances updated successfully for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:34.343Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:00:34.344Z] [LOG] 
======================================================================
[2025-10-16T11:00:34.344Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Viruna Damsiha Cooray null
[2025-10-16T11:00:34.345Z] [LOG] ======================================================================
[2025-10-16T11:00:34.346Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:00:34.347Z] [LOG]    Total Deductions: Rs.1491.76
[2025-10-16T11:00:34.349Z] [LOG]       - Attendance Deduction: Rs.1491.76
[2025-10-16T11:00:34.353Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:00:34.360Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:00:34.361Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:00:34.361Z] [LOG]    NET SALARY: Rs.48508.24
[2025-10-16T11:00:34.362Z] [LOG] ======================================================================

[2025-10-16T11:00:34.362Z] [LOG] ✅ Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-16T11:00:34.363Z] [LOG] 📊 Progress: 7/31 (22.6%)
[2025-10-16T11:00:34.363Z] [LOG] 
🧮 Processing: Shandeep null (EMP000034)
[2025-10-16T11:00:34.364Z] [LOG] 📋 Record ID: 36627eb2-87aa-430e-80df-a9b305b338a6
[2025-10-16T11:00:34.364Z] [LOG] 
======================================================================
[2025-10-16T11:00:34.365Z] [LOG] 🧮 CALCULATING PAYROLL: Shandeep null (EMP000034)
[2025-10-16T11:00:34.365Z] [LOG] ======================================================================
[2025-10-16T11:00:34.971Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:00:34.972Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:00:35.210Z] [LOG] 📊 Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:35.278Z] [LOG] 🔍 Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-16T11:00:35.279Z] [LOG]    Total components: 9
[2025-10-16T11:00:35.279Z] [LOG]    Applicable components: 9
[2025-10-16T11:00:35.280Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T11:00:35.462Z] [LOG] 📊 Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:35.701Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:35.701Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:00:35.703Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:00:35.703Z] [LOG] 💰 GROSS CALCULATION for Safna Nawas null:
[2025-10-16T11:00:35.704Z] [LOG]    Base Salary: 50000
[2025-10-16T11:00:35.705Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:00:35.941Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:00:36.176Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:00:36.177Z] [LOG]    Employee ID: 0143c977-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:36.178Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:00:36.178Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:00:36.411Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:00:36.412Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:00:36.412Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:00:36.413Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:00:36.414Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:00:36.665Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:00:36.667Z] [LOG]       Weekday (Mon-Fri): 141.03h
[2025-10-16T11:00:36.669Z] [LOG]       Saturday: 17.47h
[2025-10-16T11:00:36.670Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:00:36.671Z] [LOG]       Total Worked: 158.50h
[2025-10-16T11:00:36.671Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:00:36.674Z] [LOG]       Weekday: 141.03h × Rs.235.29 = Rs.33182.95
[2025-10-16T11:00:36.675Z] [LOG]       Saturday: 17.47h × Rs.444.44 = Rs.7764.37
[2025-10-16T11:00:36.676Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:00:36.676Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:36.677Z] [LOG]       Total Earned Salary: Rs.40947.32
[2025-10-16T11:00:36.677Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:00:36.680Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:00:36.680Z] [LOG]       Earned Salary: Rs.40947.32
[2025-10-16T11:00:36.681Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:36.682Z] [LOG]       Attendance Deduction: Rs.9052.68
[2025-10-16T11:00:36.683Z] [LOG]       📉 Deduction is 18.11% of base salary
[2025-10-16T11:00:36.683Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:00:36.685Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:00:36.686Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:00:36.686Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:00:36.687Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:36.687Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:00:36.688Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:36.689Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:00:36.693Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:36.695Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:00:36.696Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:36.697Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:00:36.697Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:36.698Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:00:36.699Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:36.700Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:00:36.700Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:36.700Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:00:36.701Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:36.701Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:00:36.701Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:36.702Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:00:36.702Z] [LOG] Regular deductions for Safna Nawas null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:00:36.702Z] [LOG] Combined deductions for Safna Nawas null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 9052.684500000003,
      "details": "Based on worked hours (158.5h total)"
    }
  ],
  "total": 9052.684500000003
}
[2025-10-16T11:00:36.943Z] [LOG] Creating components for record 316ad994-e8d6-4dc0-8c8c-de6e0060c177: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:00:36.945Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 9052.684500000003
}
[2025-10-16T11:00:37.182Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:00:37.417Z] [LOG] Created payroll_record_component: 5606515f-40fe-473f-b26c-eedf516cc852 for Attendance Deduction
[2025-10-16T11:00:37.887Z] [LOG] ✅ Financial balances updated successfully for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:37.888Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:00:37.889Z] [LOG] 
======================================================================
[2025-10-16T11:00:37.890Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Safna Nawas null
[2025-10-16T11:00:37.891Z] [LOG] ======================================================================
[2025-10-16T11:00:37.892Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:00:37.892Z] [LOG]    Total Deductions: Rs.9052.68
[2025-10-16T11:00:37.893Z] [LOG]       - Attendance Deduction: Rs.9052.68
[2025-10-16T11:00:37.894Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:00:37.894Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:00:37.895Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:00:37.896Z] [LOG]    NET SALARY: Rs.40947.32
[2025-10-16T11:00:37.896Z] [LOG] ======================================================================

[2025-10-16T11:00:37.897Z] [LOG] ✅ Safna Nawas null: Calculation completed successfully
[2025-10-16T11:00:37.898Z] [LOG] 📊 Progress: 12/34 (35.3%)
[2025-10-16T11:00:37.898Z] [LOG] 
🧮 Processing: Saru null (EMP000022)
[2025-10-16T11:00:37.901Z] [LOG] 📋 Record ID: a4dc8689-2dee-4b0f-aece-afa54066dbeb
[2025-10-16T11:00:37.901Z] [LOG] 
======================================================================
[2025-10-16T11:00:37.902Z] [LOG] 🧮 CALCULATING PAYROLL: Saru null (EMP000022)
[2025-10-16T11:00:37.903Z] [LOG] ======================================================================
[2025-10-16T11:00:38.843Z] [LOG] 🔍 Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-16T11:00:38.844Z] [LOG]    Total components: 9
[2025-10-16T11:00:38.844Z] [LOG]    Applicable components: 9
[2025-10-16T11:00:38.844Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T11:00:40.261Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:00:40.261Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:00:40.495Z] [LOG] 📊 Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:40.731Z] [LOG] 📊 Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:40.968Z] [LOG] 📊 Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:40.969Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:00:40.970Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:00:40.970Z] [LOG] 💰 GROSS CALCULATION for Saru null:
[2025-10-16T11:00:40.971Z] [LOG]    Base Salary: 50000
[2025-10-16T11:00:40.972Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:00:41.207Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:00:41.445Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:00:41.446Z] [LOG]    Employee ID: 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:41.447Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:00:41.447Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:00:41.691Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:00:41.692Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:00:41.692Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:00:41.693Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:00:41.694Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:00:41.766Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:00:41.766Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:00:41.929Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:00:41.929Z] [LOG]       Weekday (Mon-Fri): 160.87h
[2025-10-16T11:00:41.930Z] [LOG]       Saturday: 21.25h
[2025-10-16T11:00:41.930Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:00:41.931Z] [LOG]       Total Worked: 182.12h
[2025-10-16T11:00:41.932Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:00:41.932Z] [LOG]       Weekday: 160.87h × Rs.235.29 = Rs.37851.10
[2025-10-16T11:00:41.933Z] [LOG]       Saturday: 21.25h × Rs.444.44 = Rs.9444.35
[2025-10-16T11:00:41.934Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:00:41.934Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:41.935Z] [LOG]       Total Earned Salary: Rs.47295.45
[2025-10-16T11:00:41.935Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:00:41.937Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:00:41.937Z] [LOG]       Earned Salary: Rs.47295.45
[2025-10-16T11:00:41.938Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:41.939Z] [LOG]       Attendance Deduction: Rs.2704.55
[2025-10-16T11:00:41.942Z] [LOG]       📉 Deduction is 5.41% of base salary
[2025-10-16T11:00:41.945Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:00:41.946Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:00:41.946Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:00:41.947Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:00:41.947Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:41.948Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:00:41.949Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:41.949Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:00:41.950Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:41.950Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:00:41.951Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:41.951Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:00:41.952Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:41.952Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:00:41.952Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:41.953Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:00:41.953Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:41.954Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:00:41.955Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:41.955Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:00:41.958Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:41.958Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:00:41.959Z] [LOG] Regular deductions for Saru null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:00:41.960Z] [LOG] Combined deductions for Saru null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 2704.547700000003,
      "details": "Based on worked hours (182.12h total)"
    }
  ],
  "total": 2704.547700000003
}
[2025-10-16T11:00:41.994Z] [LOG] 📊 Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:42.197Z] [LOG] Creating components for record a4dc8689-2dee-4b0f-aece-afa54066dbeb: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:00:42.199Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 2704.547700000003
}
[2025-10-16T11:00:42.223Z] [LOG] 📊 Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:42.433Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:00:42.455Z] [LOG] 📊 Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:42.455Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:00:42.460Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:00:42.461Z] [LOG] 💰 GROSS CALCULATION for Shandeep null:
[2025-10-16T11:00:42.463Z] [LOG]    Base Salary: 80000
[2025-10-16T11:00:42.463Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:00:42.673Z] [LOG] Created payroll_record_component: 94458a03-1f0b-4418-b10d-16ebbf13c6cf for Attendance Deduction
[2025-10-16T11:00:42.695Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:00:42.921Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:00:42.922Z] [LOG]    Employee ID: 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:42.923Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:00:42.924Z] [LOG]    Base Salary: Rs.80000.00
[2025-10-16T11:00:43.148Z] [LOG] ✅ Financial balances updated successfully for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:43.149Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:00:43.150Z] [LOG] 
======================================================================
[2025-10-16T11:00:43.150Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saru null
[2025-10-16T11:00:43.151Z] [LOG] ======================================================================
[2025-10-16T11:00:43.152Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:00:43.152Z] [LOG]    Total Deductions: Rs.2704.55
[2025-10-16T11:00:43.153Z] [LOG]       - Attendance Deduction: Rs.2704.55
[2025-10-16T11:00:43.153Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:00:43.154Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:00:43.154Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:00:43.155Z] [LOG]    NET SALARY: Rs.47295.45
[2025-10-16T11:00:43.158Z] [LOG] ======================================================================

[2025-10-16T11:00:43.159Z] [LOG] ✅ Saru null: Calculation completed successfully
[2025-10-16T11:00:43.160Z] [LOG] 📊 Progress: 13/34 (38.2%)
[2025-10-16T11:00:43.160Z] [LOG] 
🧮 Processing: Ammaar Ilham (EMP000023)
[2025-10-16T11:00:43.163Z] [LOG] 📋 Record ID: 3f8e8b38-0b5e-4ce1-abc6-9eed29cd4fbc
[2025-10-16T11:00:43.164Z] [LOG] 
======================================================================
[2025-10-16T11:00:43.165Z] [LOG] 🧮 CALCULATING PAYROLL: Ammaar Ilham (EMP000023)
[2025-10-16T11:00:43.166Z] [LOG] ======================================================================
[2025-10-16T11:00:43.167Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:00:43.168Z] [LOG]       Daily Salary: Rs.3200.00
[2025-10-16T11:00:43.169Z] [LOG]       Weekday Hourly Rate: Rs.376.47
[2025-10-16T11:00:43.169Z] [LOG]       Saturday Hourly Rate: Rs.711.11
[2025-10-16T11:00:43.170Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:00:43.408Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:00:43.409Z] [LOG]       Weekday (Mon-Fri): 139.35h
[2025-10-16T11:00:43.410Z] [LOG]       Saturday: 22.50h
[2025-10-16T11:00:43.410Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:00:43.411Z] [LOG]       Total Worked: 161.85h
[2025-10-16T11:00:43.411Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:00:43.412Z] [LOG]       Weekday: 139.35h × Rs.376.47 = Rs.52461.09
[2025-10-16T11:00:43.413Z] [LOG]       Saturday: 22.50h × Rs.711.11 = Rs.15999.98
[2025-10-16T11:00:43.413Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:00:43.414Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:43.414Z] [LOG]       Total Earned Salary: Rs.68461.07
[2025-10-16T11:00:43.415Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:00:43.416Z] [LOG]       Base Salary: Rs.80000.00
[2025-10-16T11:00:43.417Z] [LOG]       Earned Salary: Rs.68461.07
[2025-10-16T11:00:43.417Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:43.418Z] [LOG]       Attendance Deduction: Rs.11538.93
[2025-10-16T11:00:43.418Z] [LOG]       📉 Deduction is 14.42% of base salary
[2025-10-16T11:00:43.420Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:00:43.421Z] [LOG]    Gross Salary: 80000
[2025-10-16T11:00:43.422Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:00:43.424Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:00:43.425Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:43.426Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:00:43.428Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:43.428Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:00:43.429Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:43.430Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:00:43.431Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:43.431Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:00:43.432Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:43.433Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:00:43.433Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:43.434Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:00:43.434Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:43.435Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:00:43.435Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:43.436Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:00:43.437Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:43.437Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:00:43.438Z] [LOG] Regular deductions for Shandeep null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:00:43.439Z] [LOG] Combined deductions for Shandeep null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 11538.930500000002,
      "details": "Based on worked hours (161.85h total)"
    }
  ],
  "total": 11538.930500000002
}
[2025-10-16T11:00:43.675Z] [LOG] Creating components for record 36627eb2-87aa-430e-80df-a9b305b338a6: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:00:43.677Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 11538.930500000002
}
[2025-10-16T11:00:43.906Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:00:44.112Z] [LOG] 🔍 Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-16T11:00:44.112Z] [LOG]    Total components: 9
[2025-10-16T11:00:44.113Z] [LOG]    Applicable components: 9
[2025-10-16T11:00:44.114Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T11:00:44.137Z] [LOG] Created payroll_record_component: f8e43bf5-0008-454e-9b2c-99b7998be8d6 for Attendance Deduction
[2025-10-16T11:00:44.590Z] [LOG] ✅ Financial balances updated successfully for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:44.590Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:00:44.591Z] [LOG] 
======================================================================
[2025-10-16T11:00:44.591Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Shandeep null
[2025-10-16T11:00:44.591Z] [LOG] ======================================================================
[2025-10-16T11:00:44.592Z] [LOG]    Gross Salary: Rs.80000.00
[2025-10-16T11:00:44.592Z] [LOG]    Total Deductions: Rs.11538.93
[2025-10-16T11:00:44.592Z] [LOG]       - Attendance Deduction: Rs.11538.93
[2025-10-16T11:00:44.593Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:00:44.593Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:00:44.593Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:00:44.594Z] [LOG]    NET SALARY: Rs.68461.07
[2025-10-16T11:00:44.594Z] [LOG] ======================================================================

[2025-10-16T11:00:44.594Z] [LOG] ✅ Shandeep null: Calculation completed successfully
[2025-10-16T11:00:44.595Z] [LOG] 📊 Progress: 8/31 (25.8%)
[2025-10-16T11:00:44.595Z] [LOG] 
🧮 Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-16T11:00:44.595Z] [LOG] 📋 Record ID: 3beb22ea-35c7-42f6-bec6-1e1ab0631eb8
[2025-10-16T11:00:44.596Z] [LOG] 
======================================================================
[2025-10-16T11:00:44.596Z] [LOG] 🧮 CALCULATING PAYROLL: R. D.A Kaushalya null (EMP000044)
[2025-10-16T11:00:44.597Z] [LOG] ======================================================================
[2025-10-16T11:00:45.505Z] [LOG] 🔍 Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-16T11:00:45.507Z] [LOG]    Total components: 9
[2025-10-16T11:00:45.508Z] [LOG]    Applicable components: 9
[2025-10-16T11:00:45.508Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T11:00:51.652Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:00:51.653Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:00:51.887Z] [LOG] 📊 Found 0 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:52.125Z] [LOG] 📊 Found 0 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:52.379Z] [LOG] 📊 Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:52.380Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:00:52.381Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:00:52.382Z] [LOG] 💰 GROSS CALCULATION for Ammaar Ilham:
[2025-10-16T11:00:52.382Z] [LOG]    Base Salary: 70000
[2025-10-16T11:00:52.383Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:00:52.734Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:00:52.970Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:00:52.971Z] [LOG]    Employee ID: 0143de00-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:52.971Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:00:52.972Z] [LOG]    Base Salary: Rs.70000.00
[2025-10-16T11:00:53.206Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:00:53.206Z] [LOG]       Daily Salary: Rs.2800.00
[2025-10-16T11:00:53.206Z] [LOG]       Weekday Hourly Rate: Rs.329.41
[2025-10-16T11:00:53.207Z] [LOG]       Saturday Hourly Rate: Rs.622.22
[2025-10-16T11:00:53.207Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:00:53.466Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:00:53.467Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:00:53.467Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:00:53.467Z] [LOG]       Weekday (Mon-Fri): 157.19h
[2025-10-16T11:00:53.468Z] [LOG]       Saturday: 21.33h
[2025-10-16T11:00:53.468Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:00:53.468Z] [LOG]       Total Worked: 178.52h
[2025-10-16T11:00:53.468Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:00:53.469Z] [LOG]       Weekday: 157.19h × Rs.329.41 = Rs.51779.96
[2025-10-16T11:00:53.469Z] [LOG]       Saturday: 21.33h × Rs.622.22 = Rs.13271.95
[2025-10-16T11:00:53.469Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:00:53.469Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:53.469Z] [LOG]       Total Earned Salary: Rs.65051.91
[2025-10-16T11:00:53.470Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:00:53.470Z] [LOG]       Base Salary: Rs.70000.00
[2025-10-16T11:00:53.470Z] [LOG]       Earned Salary: Rs.65051.91
[2025-10-16T11:00:53.470Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:53.471Z] [LOG]       Attendance Deduction: Rs.4948.09
[2025-10-16T11:00:53.471Z] [LOG]       📉 Deduction is 7.07% of base salary
[2025-10-16T11:00:53.471Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:00:53.471Z] [LOG]    Gross Salary: 70000
[2025-10-16T11:00:53.472Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:00:53.472Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:00:53.472Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:53.472Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:00:53.473Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:53.473Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:00:53.473Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:53.473Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:00:53.473Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:53.473Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:00:53.474Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:53.474Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:00:53.475Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:53.475Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:00:53.475Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:53.476Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:00:53.476Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:53.477Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:00:53.477Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:53.477Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:00:53.478Z] [LOG] Regular deductions for Ammaar Ilham: {
  "components": [],
  "total": 0
}
[2025-10-16T11:00:53.478Z] [LOG] Combined deductions for Ammaar Ilham: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 4948.089500000002,
      "details": "Based on worked hours (178.51999999999998h total)"
    }
  ],
  "total": 4948.089500000002
}
[2025-10-16T11:00:53.892Z] [LOG] 📊 Found 0 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:53.907Z] [LOG] Creating components for record 3f8e8b38-0b5e-4ce1-abc6-9eed29cd4fbc: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:00:53.910Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 4948.089500000002
}
[2025-10-16T11:00:54.119Z] [LOG] 📊 Found 0 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:54.152Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:00:54.347Z] [LOG] 📊 Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:54.348Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:00:54.349Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:00:54.349Z] [LOG] 💰 GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-16T11:00:54.349Z] [LOG]    Base Salary: 50000
[2025-10-16T11:00:54.350Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:00:54.387Z] [LOG] Created payroll_record_component: 4625a73e-3650-4870-9594-6710ea1bac1d for Attendance Deduction
[2025-10-16T11:00:54.577Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:00:54.807Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:00:54.808Z] [LOG]    Employee ID: 01443963-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:54.808Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:00:54.808Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:00:54.855Z] [LOG] ✅ Financial balances updated successfully for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:54.855Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:00:54.856Z] [LOG] 
======================================================================
[2025-10-16T11:00:54.857Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ammaar Ilham
[2025-10-16T11:00:54.857Z] [LOG] ======================================================================
[2025-10-16T11:00:54.858Z] [LOG]    Gross Salary: Rs.70000.00
[2025-10-16T11:00:54.858Z] [LOG]    Total Deductions: Rs.4948.09
[2025-10-16T11:00:54.858Z] [LOG]       - Attendance Deduction: Rs.4948.09
[2025-10-16T11:00:54.859Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:00:54.859Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:00:54.859Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:00:54.859Z] [LOG]    NET SALARY: Rs.65051.91
[2025-10-16T11:00:54.859Z] [LOG] ======================================================================

[2025-10-16T11:00:54.860Z] [LOG] ✅ Ammaar Ilham: Calculation completed successfully
[2025-10-16T11:00:54.860Z] [LOG] 📊 Progress: 14/34 (41.2%)
[2025-10-16T11:00:54.860Z] [LOG] 
🧮 Processing: Waruni null (EMP000024)
[2025-10-16T11:00:54.861Z] [LOG] 📋 Record ID: 0939e9c5-3371-4224-bb7e-aefa394e2ee2
[2025-10-16T11:00:54.861Z] [LOG] 
======================================================================
[2025-10-16T11:00:54.861Z] [LOG] 🧮 CALCULATING PAYROLL: Waruni null (EMP000024)
[2025-10-16T11:00:54.862Z] [LOG] ======================================================================
[2025-10-16T11:00:55.037Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:00:55.037Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:00:55.038Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:00:55.038Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:00:55.038Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:00:55.268Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:00:55.268Z] [LOG]       Weekday (Mon-Fri): 162.20h
[2025-10-16T11:00:55.268Z] [LOG]       Saturday: 22.50h
[2025-10-16T11:00:55.268Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:00:55.268Z] [LOG]       Total Worked: 184.70h
[2025-10-16T11:00:55.269Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:00:55.269Z] [LOG]       Weekday: 162.20h × Rs.235.29 = Rs.38164.04
[2025-10-16T11:00:55.269Z] [LOG]       Saturday: 22.50h × Rs.444.44 = Rs.9999.90
[2025-10-16T11:00:55.269Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:00:55.270Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:55.270Z] [LOG]       Total Earned Salary: Rs.48163.94
[2025-10-16T11:00:55.270Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:00:55.270Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:00:55.271Z] [LOG]       Earned Salary: Rs.48163.94
[2025-10-16T11:00:55.271Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:00:55.271Z] [LOG]       Attendance Deduction: Rs.1836.06
[2025-10-16T11:00:55.271Z] [LOG]       📉 Deduction is 3.67% of base salary
[2025-10-16T11:00:55.271Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:00:55.271Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:00:55.272Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:00:55.272Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:00:55.273Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:55.274Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:00:55.276Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:55.277Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:00:55.278Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:55.278Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:00:55.278Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:55.278Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:00:55.278Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:55.278Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:00:55.279Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:55.279Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:00:55.279Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:55.279Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:00:55.280Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:55.280Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:00:55.280Z] [LOG]    Fixed amount: 0
[2025-10-16T11:00:55.280Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:00:55.281Z] [LOG] Regular deductions for R. D.A Kaushalya null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:00:55.281Z] [LOG] Combined deductions for R. D.A Kaushalya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1836.0620000000054,
      "details": "Based on worked hours (184.7h total)"
    }
  ],
  "total": 1836.0620000000054
}
[2025-10-16T11:00:55.511Z] [LOG] Creating components for record 3beb22ea-35c7-42f6-bec6-1e1ab0631eb8: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:00:55.512Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1836.0620000000054
}
[2025-10-16T11:00:55.736Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:00:55.793Z] [LOG] 🔍 Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-16T11:00:55.793Z] [LOG]    Total components: 9
[2025-10-16T11:00:55.793Z] [LOG]    Applicable components: 9
[2025-10-16T11:00:55.793Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T11:00:55.964Z] [LOG] Created payroll_record_component: f186a7f7-e006-4ada-bc4b-6d53307447ff for Attendance Deduction
[2025-10-16T11:00:56.419Z] [LOG] ✅ Financial balances updated successfully for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-16T11:00:56.419Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:00:56.419Z] [LOG] 
======================================================================
[2025-10-16T11:00:56.420Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: R. D.A Kaushalya null
[2025-10-16T11:00:56.420Z] [LOG] ======================================================================
[2025-10-16T11:00:56.420Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:00:56.421Z] [LOG]    Total Deductions: Rs.1836.06
[2025-10-16T11:00:56.421Z] [LOG]       - Attendance Deduction: Rs.1836.06
[2025-10-16T11:00:56.421Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:00:56.422Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:00:56.422Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:00:56.422Z] [LOG]    NET SALARY: Rs.48163.94
[2025-10-16T11:00:56.422Z] [LOG] ======================================================================

[2025-10-16T11:00:56.423Z] [LOG] ✅ R. D.A Kaushalya null: Calculation completed successfully
[2025-10-16T11:00:56.423Z] [LOG] 📊 Progress: 9/31 (29.0%)
[2025-10-16T11:00:56.424Z] [LOG] 
🧮 Processing: Ammaar Ilham (EMP000023)
[2025-10-16T11:00:56.424Z] [LOG] 📋 Record ID: 3f8e8b38-0b5e-4ce1-abc6-9eed29cd4fbc
[2025-10-16T11:00:56.424Z] [LOG] 
======================================================================
[2025-10-16T11:00:56.425Z] [LOG] 🧮 CALCULATING PAYROLL: Ammaar Ilham (EMP000023)
[2025-10-16T11:00:56.425Z] [LOG] ======================================================================
[2025-10-16T11:00:57.337Z] [LOG] 🔍 Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-16T11:00:57.337Z] [LOG]    Total components: 9
[2025-10-16T11:00:57.337Z] [LOG]    Applicable components: 9
[2025-10-16T11:00:57.337Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T11:01:04.680Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:01:04.680Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:01:04.811Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:01:04.811Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:01:04.908Z] [LOG] 📊 Found 0 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:05.044Z] [LOG] 📊 Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:05.136Z] [LOG] 📊 Found 0 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:05.278Z] [LOG] 📊 Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:05.363Z] [LOG] 📊 Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:05.364Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:01:05.365Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:01:05.366Z] [LOG] 💰 GROSS CALCULATION for Ammaar Ilham:
[2025-10-16T11:01:05.366Z] [LOG]    Base Salary: 70000
[2025-10-16T11:01:05.367Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:01:05.554Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:05.555Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:01:05.556Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:01:05.557Z] [LOG] 💰 GROSS CALCULATION for Waruni null:
[2025-10-16T11:01:05.557Z] [LOG]    Base Salary: 50000
[2025-10-16T11:01:05.558Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:01:05.593Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:01:05.791Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:01:05.822Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:01:05.823Z] [LOG]    Employee ID: 0143de00-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:05.824Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:01:05.824Z] [LOG]    Base Salary: Rs.70000.00
[2025-10-16T11:01:06.025Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:01:06.026Z] [LOG]    Employee ID: 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:06.027Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:01:06.027Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:01:06.052Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:01:06.053Z] [LOG]       Daily Salary: Rs.2800.00
[2025-10-16T11:01:06.053Z] [LOG]       Weekday Hourly Rate: Rs.329.41
[2025-10-16T11:01:06.054Z] [LOG]       Saturday Hourly Rate: Rs.622.22
[2025-10-16T11:01:06.054Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:01:06.266Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:01:06.267Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:01:06.267Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:01:06.268Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:01:06.268Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:01:06.287Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:01:06.288Z] [LOG]       Weekday (Mon-Fri): 157.19h
[2025-10-16T11:01:06.288Z] [LOG]       Saturday: 21.33h
[2025-10-16T11:01:06.289Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:01:06.290Z] [LOG]       Total Worked: 178.52h
[2025-10-16T11:01:06.291Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:01:06.292Z] [LOG]       Weekday: 157.19h × Rs.329.41 = Rs.51779.96
[2025-10-16T11:01:06.293Z] [LOG]       Saturday: 21.33h × Rs.622.22 = Rs.13271.95
[2025-10-16T11:01:06.294Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:06.295Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:06.295Z] [LOG]       Total Earned Salary: Rs.65051.91
[2025-10-16T11:01:06.296Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:01:06.297Z] [LOG]       Base Salary: Rs.70000.00
[2025-10-16T11:01:06.297Z] [LOG]       Earned Salary: Rs.65051.91
[2025-10-16T11:01:06.298Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:06.299Z] [LOG]       Attendance Deduction: Rs.4948.09
[2025-10-16T11:01:06.299Z] [LOG]       📉 Deduction is 7.07% of base salary
[2025-10-16T11:01:06.301Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:01:06.302Z] [LOG]    Gross Salary: 70000
[2025-10-16T11:01:06.303Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:01:06.304Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:01:06.305Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.309Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:01:06.310Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.311Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:01:06.311Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.312Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:01:06.312Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.313Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:01:06.313Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.313Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:01:06.314Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.314Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:01:06.315Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.315Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:01:06.315Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.315Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:01:06.316Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.316Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:01:06.316Z] [LOG] Regular deductions for Ammaar Ilham: {
  "components": [],
  "total": 0
}
[2025-10-16T11:01:06.317Z] [LOG] Combined deductions for Ammaar Ilham: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 4948.089500000002,
      "details": "Based on worked hours (178.51999999999998h total)"
    }
  ],
  "total": 4948.089500000002
}
[2025-10-16T11:01:06.505Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:01:06.505Z] [LOG]       Weekday (Mon-Fri): 169.52h
[2025-10-16T11:01:06.506Z] [LOG]       Saturday: 22.39h
[2025-10-16T11:01:06.507Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:01:06.507Z] [LOG]       Total Worked: 191.91h
[2025-10-16T11:01:06.508Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:01:06.509Z] [LOG]       Weekday: 169.52h × Rs.235.29 = Rs.39886.36
[2025-10-16T11:01:06.509Z] [LOG]       Saturday: 22.39h × Rs.444.44 = Rs.9951.01
[2025-10-16T11:01:06.510Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:06.511Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:06.511Z] [LOG]       Total Earned Salary: Rs.49837.37
[2025-10-16T11:01:06.512Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:01:06.513Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:01:06.514Z] [LOG]       Earned Salary: Rs.49837.37
[2025-10-16T11:01:06.514Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:06.515Z] [LOG]       Attendance Deduction: Rs.162.63
[2025-10-16T11:01:06.517Z] [LOG]       📉 Deduction is 0.33% of base salary
[2025-10-16T11:01:06.518Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:01:06.518Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:01:06.519Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:01:06.520Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:01:06.520Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.521Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:01:06.522Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.523Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:01:06.524Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.524Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:01:06.525Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.526Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:01:06.526Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.527Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:01:06.528Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.530Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:01:06.531Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.531Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:01:06.532Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.532Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:01:06.533Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:06.534Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:01:06.534Z] [LOG] Regular deductions for Waruni null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:01:06.535Z] [LOG] Combined deductions for Waruni null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 162.6275999999998,
      "details": "Based on worked hours (191.91000000000003h total)"
    }
  ],
  "total": 162.6275999999998
}
[2025-10-16T11:01:06.546Z] [LOG] Creating components for record 3f8e8b38-0b5e-4ce1-abc6-9eed29cd4fbc: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:01:06.548Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 4948.089500000002
}
[2025-10-16T11:01:06.796Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:01:06.803Z] [LOG] Creating components for record 0939e9c5-3371-4224-bb7e-aefa394e2ee2: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:01:06.805Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 162.6275999999998
}
[2025-10-16T11:01:07.022Z] [LOG] Created payroll_record_component: 7bda9e11-9363-4550-ad23-fdac197c13a1 for Attendance Deduction
[2025-10-16T11:01:07.043Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:01:07.277Z] [LOG] Created payroll_record_component: b7bf74e0-2d34-4380-b1b6-5481bea7c310 for Attendance Deduction
[2025-10-16T11:01:07.475Z] [LOG] ✅ Financial balances updated successfully for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:07.475Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:01:07.476Z] [LOG] 
======================================================================
[2025-10-16T11:01:07.477Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ammaar Ilham
[2025-10-16T11:01:07.477Z] [LOG] ======================================================================
[2025-10-16T11:01:07.478Z] [LOG]    Gross Salary: Rs.70000.00
[2025-10-16T11:01:07.478Z] [LOG]    Total Deductions: Rs.4948.09
[2025-10-16T11:01:07.479Z] [LOG]       - Attendance Deduction: Rs.4948.09
[2025-10-16T11:01:07.480Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:01:07.480Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:01:07.481Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:01:07.482Z] [LOG]    NET SALARY: Rs.65051.91
[2025-10-16T11:01:07.482Z] [LOG] ======================================================================

[2025-10-16T11:01:07.483Z] [LOG] ✅ Ammaar Ilham: Calculation completed successfully
[2025-10-16T11:01:07.484Z] [LOG] 📊 Progress: 10/31 (32.3%)
[2025-10-16T11:01:07.484Z] [LOG] 
🧮 Processing: Sithira null (EMP000039)
[2025-10-16T11:01:07.485Z] [LOG] 📋 Record ID: 4dbc6e6d-edf9-4868-8a2d-0835b6202853
[2025-10-16T11:01:07.487Z] [LOG] 
======================================================================
[2025-10-16T11:01:07.488Z] [LOG] 🧮 CALCULATING PAYROLL: Sithira null (EMP000039)
[2025-10-16T11:01:07.490Z] [LOG] ======================================================================
[2025-10-16T11:01:07.744Z] [LOG] ✅ Financial balances updated successfully for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:07.745Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:01:07.745Z] [LOG] 
======================================================================
[2025-10-16T11:01:07.746Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Waruni null
[2025-10-16T11:01:07.747Z] [LOG] ======================================================================
[2025-10-16T11:01:07.747Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:01:07.748Z] [LOG]    Total Deductions: Rs.162.63
[2025-10-16T11:01:07.748Z] [LOG]       - Attendance Deduction: Rs.162.63
[2025-10-16T11:01:07.749Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:01:07.750Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:01:07.750Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:01:07.751Z] [LOG]    NET SALARY: Rs.49837.37
[2025-10-16T11:01:07.752Z] [LOG] ======================================================================

[2025-10-16T11:01:07.752Z] [LOG] ✅ Waruni null: Calculation completed successfully
[2025-10-16T11:01:07.753Z] [LOG] 📊 Progress: 15/34 (44.1%)
[2025-10-16T11:01:07.754Z] [LOG] 
🧮 Processing: Piyumi null (EMP000025)
[2025-10-16T11:01:07.756Z] [LOG] 📋 Record ID: 56c07dc9-893d-4064-9173-ea1eb780c8a6
[2025-10-16T11:01:07.757Z] [LOG] 
======================================================================
[2025-10-16T11:01:07.759Z] [LOG] 🧮 CALCULATING PAYROLL: Piyumi null (EMP000025)
[2025-10-16T11:01:07.760Z] [LOG] ======================================================================
[2025-10-16T11:01:08.418Z] [LOG] 🔍 Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-16T11:01:08.419Z] [LOG]    Total components: 9
[2025-10-16T11:01:08.419Z] [LOG]    Applicable components: 9
[2025-10-16T11:01:08.420Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-16T11:01:08.729Z] [LOG] 🔍 Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-16T11:01:08.730Z] [LOG]    Total components: 9
[2025-10-16T11:01:08.731Z] [LOG]    Applicable components: 9
[2025-10-16T11:01:08.731Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T11:01:10.143Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:01:10.144Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:01:10.378Z] [LOG] 📊 Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:10.610Z] [LOG] 📊 Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:10.843Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:10.845Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:01:10.846Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:01:10.847Z] [LOG] 💰 GROSS CALCULATION for Piyumi null:
[2025-10-16T11:01:10.848Z] [LOG]    Base Salary: 50000
[2025-10-16T11:01:10.848Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:01:11.084Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:01:11.322Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:01:11.323Z] [LOG]    Employee ID: 0143e565-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:11.324Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:01:11.324Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:01:11.559Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:01:11.560Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:01:11.561Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:01:11.561Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:01:11.562Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:01:11.801Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:01:11.801Z] [LOG]       Weekday (Mon-Fri): 139.96h
[2025-10-16T11:01:11.802Z] [LOG]       Saturday: 16.11h
[2025-10-16T11:01:11.802Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:01:11.803Z] [LOG]       Total Worked: 156.07h
[2025-10-16T11:01:11.803Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:01:11.804Z] [LOG]       Weekday: 139.96h × Rs.235.29 = Rs.32931.19
[2025-10-16T11:01:11.805Z] [LOG]       Saturday: 16.11h × Rs.444.44 = Rs.7159.93
[2025-10-16T11:01:11.806Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:11.806Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:11.807Z] [LOG]       Total Earned Salary: Rs.40091.12
[2025-10-16T11:01:11.807Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:01:11.809Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:01:11.809Z] [LOG]       Earned Salary: Rs.40091.12
[2025-10-16T11:01:11.810Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:11.810Z] [LOG]       Attendance Deduction: Rs.9908.88
[2025-10-16T11:01:11.811Z] [LOG]       📉 Deduction is 19.82% of base salary
[2025-10-16T11:01:11.813Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:01:11.813Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:01:11.814Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:01:11.815Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:01:11.816Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:11.816Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:01:11.817Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:11.817Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:01:11.819Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:11.819Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:01:11.820Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:11.820Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:01:11.821Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:11.822Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:01:11.823Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:11.824Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:01:11.825Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:11.825Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:01:11.827Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:11.827Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:01:11.828Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:11.829Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:01:11.830Z] [LOG] Regular deductions for Piyumi null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:01:11.831Z] [LOG] Combined deductions for Piyumi null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 9908.883200000004,
      "details": "Based on worked hours (156.07h total)"
    }
  ],
  "total": 9908.883200000004
}
[2025-10-16T11:01:12.077Z] [LOG] Creating components for record 56c07dc9-893d-4064-9173-ea1eb780c8a6: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:01:12.079Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 9908.883200000004
}
[2025-10-16T11:01:12.316Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:01:12.553Z] [LOG] Created payroll_record_component: 4de35bfa-8c3f-4508-98d0-6268975d6756 for Attendance Deduction
[2025-10-16T11:01:13.027Z] [LOG] ✅ Financial balances updated successfully for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:13.028Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:01:13.029Z] [LOG] 
======================================================================
[2025-10-16T11:01:13.030Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Piyumi null
[2025-10-16T11:01:13.031Z] [LOG] ======================================================================
[2025-10-16T11:01:13.032Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:01:13.033Z] [LOG]    Total Deductions: Rs.9908.88
[2025-10-16T11:01:13.033Z] [LOG]       - Attendance Deduction: Rs.9908.88
[2025-10-16T11:01:13.034Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:01:13.035Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:01:13.035Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:01:13.036Z] [LOG]    NET SALARY: Rs.40091.12
[2025-10-16T11:01:13.037Z] [LOG] ======================================================================

[2025-10-16T11:01:13.038Z] [LOG] ✅ Piyumi null: Calculation completed successfully
[2025-10-16T11:01:13.040Z] [LOG] 📊 Progress: 16/34 (47.1%)
[2025-10-16T11:01:13.041Z] [LOG] 
🧮 Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-16T11:01:13.042Z] [LOG] 📋 Record ID: db0d41cd-e8f7-4f3c-b88b-d808e1fb9ced
[2025-10-16T11:01:13.043Z] [LOG] 
======================================================================
[2025-10-16T11:01:13.044Z] [LOG] 🧮 CALCULATING PAYROLL: Sujevan Selvaratnam null (EMP000026)
[2025-10-16T11:01:13.044Z] [LOG] ======================================================================
[2025-10-16T11:01:13.931Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:01:13.931Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:01:13.991Z] [LOG] 🔍 Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-16T11:01:13.992Z] [LOG]    Total components: 9
[2025-10-16T11:01:13.992Z] [LOG]    Applicable components: 9
[2025-10-16T11:01:13.993Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-16T11:01:14.161Z] [LOG] 📊 Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:14.390Z] [LOG] 📊 Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:14.622Z] [LOG] 📊 Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:14.622Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:01:14.623Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:01:14.624Z] [LOG] 💰 GROSS CALCULATION for Sithira null:
[2025-10-16T11:01:14.624Z] [LOG]    Base Salary: 40000
[2025-10-16T11:01:14.625Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:01:14.854Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:01:14.937Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:01:14.938Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:01:15.146Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:01:15.171Z] [LOG]    Employee ID: 01441e19-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:15.172Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:01:15.172Z] [LOG]    Base Salary: Rs.40000.00
[2025-10-16T11:01:15.188Z] [LOG] 📊 Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:15.401Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:01:15.401Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-16T11:01:15.402Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-16T11:01:15.402Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-16T11:01:15.402Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:01:15.452Z] [LOG] 📊 Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:15.629Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:01:15.629Z] [LOG]       Weekday (Mon-Fri): 153.71h
[2025-10-16T11:01:15.630Z] [LOG]       Saturday: 8.53h
[2025-10-16T11:01:15.630Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:01:15.631Z] [LOG]       Total Worked: 162.24h
[2025-10-16T11:01:15.631Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:01:15.632Z] [LOG]       Weekday: 153.71h × Rs.188.24 = Rs.28934.37
[2025-10-16T11:01:15.632Z] [LOG]       Saturday: 8.53h × Rs.355.56 = Rs.3032.93
[2025-10-16T11:01:15.633Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:15.633Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:15.634Z] [LOG]       Total Earned Salary: Rs.31967.30
[2025-10-16T11:01:15.634Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:01:15.635Z] [LOG]       Base Salary: Rs.40000.00
[2025-10-16T11:01:15.635Z] [LOG]       Earned Salary: Rs.31967.30
[2025-10-16T11:01:15.636Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:15.636Z] [LOG]       Attendance Deduction: Rs.8032.70
[2025-10-16T11:01:15.637Z] [LOG]       📉 Deduction is 20.08% of base salary
[2025-10-16T11:01:15.637Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:01:15.638Z] [LOG]    Gross Salary: 40000
[2025-10-16T11:01:15.638Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:01:15.639Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:01:15.639Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:15.641Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:01:15.642Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:15.643Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:01:15.644Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:15.645Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:01:15.646Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:15.647Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:01:15.648Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:15.648Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:01:15.649Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:15.649Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:01:15.650Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:15.650Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:01:15.650Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:15.651Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:01:15.651Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:15.652Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:01:15.653Z] [LOG] Regular deductions for Sithira null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:01:15.653Z] [LOG] Combined deductions for Sithira null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 8032.7027999999955,
      "details": "Based on worked hours (162.24h total)"
    }
  ],
  "total": 8032.7027999999955
}
[2025-10-16T11:01:15.689Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:15.690Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:01:15.691Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:01:15.692Z] [LOG] 💰 GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-16T11:01:15.693Z] [LOG]    Base Salary: 1
[2025-10-16T11:01:15.694Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:01:15.885Z] [LOG] Creating components for record 4dbc6e6d-edf9-4868-8a2d-0835b6202853: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:01:15.887Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 8032.7027999999955
}
[2025-10-16T11:01:15.927Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:01:16.121Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:01:16.164Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:01:16.165Z] [LOG]    Employee ID: 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:16.166Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:01:16.166Z] [LOG]    Base Salary: Rs.1.00
[2025-10-16T11:01:16.353Z] [LOG] Created payroll_record_component: 550385ad-326e-44dd-ad4c-93cf45c861ac for Attendance Deduction
[2025-10-16T11:01:16.404Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:01:16.405Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-16T11:01:16.405Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-16T11:01:16.406Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-16T11:01:16.406Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:01:16.641Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:01:16.642Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T11:01:16.642Z] [LOG]       Saturday: 0.00h
[2025-10-16T11:01:16.643Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:01:16.643Z] [LOG]       Total Worked: 0.00h
[2025-10-16T11:01:16.644Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:01:16.645Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:16.645Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:16.646Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:16.646Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:16.647Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T11:01:16.648Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:01:16.649Z] [LOG]       Base Salary: Rs.1.00
[2025-10-16T11:01:16.649Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T11:01:16.650Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:16.651Z] [LOG]       Attendance Deduction: Rs.1.00
[2025-10-16T11:01:16.652Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-16T11:01:16.653Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:01:16.655Z] [LOG]    Gross Salary: 1
[2025-10-16T11:01:16.656Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:01:16.656Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:01:16.657Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:16.658Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:01:16.658Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:16.660Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:01:16.661Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:16.662Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:01:16.662Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:16.663Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:01:16.664Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:16.664Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:01:16.665Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:16.665Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:01:16.666Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:16.667Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:01:16.667Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:16.668Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:01:16.668Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:16.669Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:01:16.670Z] [LOG] Regular deductions for Sujevan Selvaratnam null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:01:16.671Z] [LOG] Combined deductions for Sujevan Selvaratnam null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 1
}
[2025-10-16T11:01:16.809Z] [LOG] ✅ Financial balances updated successfully for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:16.810Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:01:16.810Z] [LOG] 
======================================================================
[2025-10-16T11:01:16.811Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sithira null
[2025-10-16T11:01:16.812Z] [LOG] ======================================================================
[2025-10-16T11:01:16.812Z] [LOG]    Gross Salary: Rs.40000.00
[2025-10-16T11:01:16.813Z] [LOG]    Total Deductions: Rs.8032.70
[2025-10-16T11:01:16.813Z] [LOG]       - Attendance Deduction: Rs.8032.70
[2025-10-16T11:01:16.814Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:01:16.815Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:01:16.815Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:01:16.816Z] [LOG]    NET SALARY: Rs.31967.30
[2025-10-16T11:01:16.817Z] [LOG] ======================================================================

[2025-10-16T11:01:16.817Z] [LOG] ✅ Sithira null: Calculation completed successfully
[2025-10-16T11:01:16.818Z] [LOG] 📊 Progress: 11/31 (35.5%)
[2025-10-16T11:01:16.819Z] [LOG] 
🧮 Processing: Hari null (EMP000017)
[2025-10-16T11:01:16.820Z] [LOG] 📋 Record ID: 548e632f-1ea1-4c1b-90a4-f7abf5e380c6
[2025-10-16T11:01:16.821Z] [LOG] 
======================================================================
[2025-10-16T11:01:16.823Z] [LOG] 🧮 CALCULATING PAYROLL: Hari null (EMP000017)
[2025-10-16T11:01:16.825Z] [LOG] ======================================================================
[2025-10-16T11:01:16.916Z] [LOG] Creating components for record db0d41cd-e8f7-4f3c-b88b-d808e1fb9ced: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:01:16.917Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1
}
[2025-10-16T11:01:17.151Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:01:17.387Z] [LOG] Created payroll_record_component: 9dc92735-18ba-4128-a508-c3251342a1fb for Attendance Deduction
[2025-10-16T11:01:17.741Z] [LOG] 🔍 Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-16T11:01:17.742Z] [LOG]    Total components: 9
[2025-10-16T11:01:17.743Z] [LOG]    Applicable components: 9
[2025-10-16T11:01:17.743Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T11:01:17.856Z] [LOG] ✅ Financial balances updated successfully for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:17.857Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:01:17.858Z] [LOG] 
======================================================================
[2025-10-16T11:01:17.858Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sujevan Selvaratnam null
[2025-10-16T11:01:17.859Z] [LOG] ======================================================================
[2025-10-16T11:01:17.859Z] [LOG]    Gross Salary: Rs.1.00
[2025-10-16T11:01:17.860Z] [LOG]    Total Deductions: Rs.1.00
[2025-10-16T11:01:17.861Z] [LOG]       - Attendance Deduction: Rs.1.00
[2025-10-16T11:01:17.861Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:01:17.862Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:01:17.862Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:01:17.864Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T11:01:17.864Z] [LOG] ======================================================================

[2025-10-16T11:01:17.865Z] [LOG] ✅ Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-16T11:01:17.865Z] [LOG] 📊 Progress: 17/34 (50.0%)
[2025-10-16T11:01:17.866Z] [LOG] 
🧮 Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-16T11:01:17.867Z] [LOG] 📋 Record ID: cb268127-a7bc-42ca-8b92-3136b15784f9
[2025-10-16T11:01:17.868Z] [LOG] 
======================================================================
[2025-10-16T11:01:17.870Z] [LOG] 🧮 CALCULATING PAYROLL: Ruvindu Hewabandu null (EMP000027)
[2025-10-16T11:01:17.871Z] [LOG] ======================================================================
[2025-10-16T11:01:18.814Z] [LOG] 🔍 Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-16T11:01:18.815Z] [LOG]    Total components: 9
[2025-10-16T11:01:18.816Z] [LOG]    Applicable components: 9
[2025-10-16T11:01:18.816Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-16T11:01:19.752Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:01:19.753Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:01:19.992Z] [LOG] 📊 Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:20.227Z] [LOG] 📊 Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:20.465Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:20.466Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:01:20.466Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:01:20.466Z] [LOG] 💰 GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-16T11:01:20.467Z] [LOG]    Base Salary: 0
[2025-10-16T11:01:20.467Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:01:20.712Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:01:21.031Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:01:21.032Z] [LOG]    Employee ID: 0143e915-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:21.032Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:01:21.032Z] [LOG]    Base Salary: Rs.0.00
[2025-10-16T11:01:21.283Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:01:21.284Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-16T11:01:21.284Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-16T11:01:21.285Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-16T11:01:21.285Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:01:21.521Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:01:21.522Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T11:01:21.523Z] [LOG]       Saturday: 0.00h
[2025-10-16T11:01:21.523Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:01:21.524Z] [LOG]       Total Worked: 0.00h
[2025-10-16T11:01:21.524Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:01:21.525Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:21.526Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:21.526Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:21.527Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:21.527Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T11:01:21.528Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:01:21.529Z] [LOG]       Base Salary: Rs.0.00
[2025-10-16T11:01:21.530Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T11:01:21.530Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:21.531Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-16T11:01:21.531Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-16T11:01:21.533Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:01:21.534Z] [LOG]    Gross Salary: 0
[2025-10-16T11:01:21.535Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:01:21.535Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:01:21.536Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:21.537Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:01:21.537Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:21.538Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:01:21.539Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:21.540Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:01:21.540Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:21.541Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:01:21.541Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:21.542Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:01:21.543Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:21.543Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:01:21.544Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:21.545Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:01:21.546Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:21.546Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:01:21.547Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:21.548Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:01:21.548Z] [LOG] Regular deductions for Ruvindu Hewabandu null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:01:21.549Z] [LOG] Combined deductions for Ruvindu Hewabandu null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 0
}
[2025-10-16T11:01:21.784Z] [LOG] Creating components for record cb268127-a7bc-42ca-8b92-3136b15784f9: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:01:21.785Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-16T11:01:21.985Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:01:21.986Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:01:22.019Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:01:22.212Z] [LOG] 📊 Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:22.255Z] [LOG] Created payroll_record_component: 9d4592bc-0df1-437c-967a-31105618ebc8 for Attendance Deduction
[2025-10-16T11:01:22.447Z] [LOG] 📊 Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:22.675Z] [LOG] 📊 Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:22.676Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:01:22.677Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:01:22.678Z] [LOG] 💰 GROSS CALCULATION for Hari null:
[2025-10-16T11:01:22.678Z] [LOG]    Base Salary: 50000
[2025-10-16T11:01:22.679Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:01:22.719Z] [LOG] ✅ Financial balances updated successfully for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:22.720Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:01:22.722Z] [LOG] 
======================================================================
[2025-10-16T11:01:22.728Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ruvindu Hewabandu null
[2025-10-16T11:01:22.729Z] [LOG] ======================================================================
[2025-10-16T11:01:22.729Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-16T11:01:22.730Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-16T11:01:22.731Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-16T11:01:22.731Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:01:22.732Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:01:22.732Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:01:22.733Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T11:01:22.734Z] [LOG] ======================================================================

[2025-10-16T11:01:22.734Z] [LOG] ✅ Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-16T11:01:22.735Z] [LOG] 📊 Progress: 18/34 (52.9%)
[2025-10-16T11:01:22.736Z] [LOG] 
🧮 Processing: Rasanga null (EMP000028)
[2025-10-16T11:01:22.736Z] [LOG] 📋 Record ID: 55dd191d-771a-4986-bcfc-122d3f6eb597
[2025-10-16T11:01:22.737Z] [LOG] 
======================================================================
[2025-10-16T11:01:22.738Z] [LOG] 🧮 CALCULATING PAYROLL: Rasanga null (EMP000028)
[2025-10-16T11:01:22.739Z] [LOG] ======================================================================
[2025-10-16T11:01:22.909Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:01:23.140Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:01:23.141Z] [LOG]    Employee ID: 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:23.141Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:01:23.142Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:01:23.374Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:01:23.375Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:01:23.375Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:01:23.375Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:01:23.375Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:01:23.604Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:01:23.605Z] [LOG]       Weekday (Mon-Fri): 114.85h
[2025-10-16T11:01:23.605Z] [LOG]       Saturday: 16.84h
[2025-10-16T11:01:23.605Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:01:23.606Z] [LOG]       Total Worked: 131.69h
[2025-10-16T11:01:23.606Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:01:23.607Z] [LOG]       Weekday: 114.85h × Rs.235.29 = Rs.27023.06
[2025-10-16T11:01:23.607Z] [LOG]       Saturday: 16.84h × Rs.444.44 = Rs.7484.37
[2025-10-16T11:01:23.607Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:23.608Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:23.608Z] [LOG]       Total Earned Salary: Rs.34507.43
[2025-10-16T11:01:23.608Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:01:23.608Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:01:23.609Z] [LOG]       Earned Salary: Rs.34507.43
[2025-10-16T11:01:23.609Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:23.609Z] [LOG]       Attendance Deduction: Rs.15492.57
[2025-10-16T11:01:23.609Z] [LOG]       📉 Deduction is 30.99% of base salary
[2025-10-16T11:01:23.609Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:01:23.610Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:01:23.610Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:01:23.610Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:01:23.610Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:23.611Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:01:23.611Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:23.612Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:01:23.612Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:23.612Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:01:23.613Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:23.613Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:01:23.613Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:23.613Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:01:23.614Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:23.614Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:01:23.614Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:23.614Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:01:23.615Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:23.615Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:01:23.615Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:23.615Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:01:23.615Z] [LOG] Regular deductions for Hari null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:01:23.616Z] [LOG] Combined deductions for Hari null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 15492.573900000003,
      "details": "Based on worked hours (131.69h total)"
    }
  ],
  "total": 15492.573900000003
}
[2025-10-16T11:01:23.684Z] [LOG] 🔍 Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-16T11:01:23.685Z] [LOG]    Total components: 9
[2025-10-16T11:01:23.685Z] [LOG]    Applicable components: 9
[2025-10-16T11:01:23.685Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-16T11:01:23.846Z] [LOG] Creating components for record 548e632f-1ea1-4c1b-90a4-f7abf5e380c6: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:01:23.846Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 15492.573900000003
}
[2025-10-16T11:01:24.076Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:01:24.303Z] [LOG] Created payroll_record_component: 87b750fd-e271-47bd-aa54-46dd86c598c4 for Attendance Deduction
[2025-10-16T11:01:24.626Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:01:24.628Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:01:24.759Z] [LOG] ✅ Financial balances updated successfully for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:24.760Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:01:24.760Z] [LOG] 
======================================================================
[2025-10-16T11:01:24.761Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Hari null
[2025-10-16T11:01:24.761Z] [LOG] ======================================================================
[2025-10-16T11:01:24.761Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:01:24.762Z] [LOG]    Total Deductions: Rs.15492.57
[2025-10-16T11:01:24.762Z] [LOG]       - Attendance Deduction: Rs.15492.57
[2025-10-16T11:01:24.762Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:01:24.763Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:01:24.763Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:01:24.763Z] [LOG]    NET SALARY: Rs.34507.43
[2025-10-16T11:01:24.764Z] [LOG] ======================================================================

[2025-10-16T11:01:24.764Z] [LOG] ✅ Hari null: Calculation completed successfully
[2025-10-16T11:01:24.764Z] [LOG] 📊 Progress: 12/31 (38.7%)
[2025-10-16T11:01:24.764Z] [LOG] 
🧮 Processing: Rasanga null (EMP000028)
[2025-10-16T11:01:24.765Z] [LOG] 📋 Record ID: 55dd191d-771a-4986-bcfc-122d3f6eb597
[2025-10-16T11:01:24.765Z] [LOG] 
======================================================================
[2025-10-16T11:01:24.765Z] [LOG] 🧮 CALCULATING PAYROLL: Rasanga null (EMP000028)
[2025-10-16T11:01:24.766Z] [LOG] ======================================================================
[2025-10-16T11:01:24.863Z] [LOG] 📊 Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:25.098Z] [LOG] 📊 Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:25.333Z] [LOG] 📊 Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:25.333Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:01:25.334Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:01:25.335Z] [LOG] 💰 GROSS CALCULATION for Rasanga null:
[2025-10-16T11:01:25.336Z] [LOG]    Base Salary: 50000
[2025-10-16T11:01:25.336Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:01:25.681Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:01:25.788Z] [LOG] 🔍 Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-16T11:01:25.789Z] [LOG]    Total components: 9
[2025-10-16T11:01:25.789Z] [LOG]    Applicable components: 9
[2025-10-16T11:01:25.790Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-16T11:01:25.975Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:01:25.975Z] [LOG]    Employee ID: 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:25.975Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:01:25.976Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:01:26.215Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:01:26.216Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:01:26.216Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:01:26.217Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-16T11:01:26.217Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:01:26.454Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:01:26.455Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T11:01:26.456Z] [LOG]       Saturday: 0.00h
[2025-10-16T11:01:26.456Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:01:26.457Z] [LOG]       Total Worked: 0.00h
[2025-10-16T11:01:26.457Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:01:26.458Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:01:26.459Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:01:26.459Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:26.460Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:26.460Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T11:01:26.461Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:01:26.462Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:01:26.463Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T11:01:26.463Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:26.464Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-16T11:01:26.465Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-16T11:01:26.465Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:01:26.467Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:01:26.468Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:01:26.468Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:01:26.469Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:26.470Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:01:26.470Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:26.471Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:01:26.471Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:26.472Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:01:26.472Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:26.473Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:01:26.473Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:26.474Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:01:26.474Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:26.475Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:01:26.475Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:26.476Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:01:26.477Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:26.478Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:01:26.478Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:26.479Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:01:26.479Z] [LOG] Regular deductions for Rasanga null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:01:26.480Z] [LOG] Combined deductions for Rasanga null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-16T11:01:26.717Z] [LOG] Creating components for record 55dd191d-771a-4986-bcfc-122d3f6eb597: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:01:26.719Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-16T11:01:26.759Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:01:26.760Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:01:26.962Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:01:26.989Z] [LOG] 📊 Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:27.199Z] [LOG] Created payroll_record_component: d3537861-ea88-40c0-a3eb-281d13f34968 for Attendance Deduction
[2025-10-16T11:01:27.219Z] [LOG] 📊 Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:27.448Z] [LOG] 📊 Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:27.448Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:01:27.449Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:01:27.449Z] [LOG] 💰 GROSS CALCULATION for Rasanga null:
[2025-10-16T11:01:27.449Z] [LOG]    Base Salary: 50000
[2025-10-16T11:01:27.449Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:01:27.668Z] [LOG] ✅ Financial balances updated successfully for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:27.669Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:01:27.669Z] [LOG] 
======================================================================
[2025-10-16T11:01:27.670Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Rasanga null
[2025-10-16T11:01:27.671Z] [LOG] ======================================================================
[2025-10-16T11:01:27.671Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:01:27.672Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-16T11:01:27.672Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-16T11:01:27.673Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:01:27.674Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:01:27.674Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:01:27.675Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T11:01:27.675Z] [LOG] ======================================================================

[2025-10-16T11:01:27.676Z] [LOG] ✅ Rasanga null: Calculation completed successfully
[2025-10-16T11:01:27.677Z] [LOG] 📊 Progress: 19/34 (55.9%)
[2025-10-16T11:01:27.678Z] [LOG] 
🧮 Processing: Chamodi null (EMP000032)
[2025-10-16T11:01:27.678Z] [LOG] 📋 Record ID: 83d8253d-3b22-4341-9209-5ff9a001a404
[2025-10-16T11:01:27.679Z] [LOG] 
======================================================================
[2025-10-16T11:01:27.681Z] [LOG] 🧮 CALCULATING PAYROLL: Chamodi null (EMP000032)
[2025-10-16T11:01:27.682Z] [LOG] ======================================================================
[2025-10-16T11:01:27.684Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:01:27.915Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:01:27.916Z] [LOG]    Employee ID: 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:27.916Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:01:27.917Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:01:28.161Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:01:28.161Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:01:28.162Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:01:28.163Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-16T11:01:28.163Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:01:28.403Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:01:28.404Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T11:01:28.404Z] [LOG]       Saturday: 0.00h
[2025-10-16T11:01:28.405Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:01:28.405Z] [LOG]       Total Worked: 0.00h
[2025-10-16T11:01:28.406Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:01:28.407Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:01:28.407Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:01:28.408Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:28.408Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:28.410Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T11:01:28.410Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:01:28.411Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:01:28.412Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T11:01:28.413Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:28.413Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-16T11:01:28.417Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-16T11:01:28.421Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:01:28.421Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:01:28.421Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:01:28.422Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:01:28.423Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:28.424Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:01:28.425Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:28.425Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:01:28.426Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:28.426Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:01:28.427Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:28.427Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:01:28.427Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:28.427Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:01:28.428Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:28.429Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:01:28.429Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:28.430Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:01:28.431Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:28.431Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:01:28.431Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:28.432Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:01:28.432Z] [LOG] Regular deductions for Rasanga null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:01:28.433Z] [LOG] Combined deductions for Rasanga null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-16T11:01:28.664Z] [LOG] Creating components for record 55dd191d-771a-4986-bcfc-122d3f6eb597: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:01:28.666Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-16T11:01:28.671Z] [LOG] 🔍 Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-16T11:01:28.673Z] [LOG]    Total components: 9
[2025-10-16T11:01:28.674Z] [LOG]    Applicable components: 9
[2025-10-16T11:01:28.674Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T11:01:28.893Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:01:29.128Z] [LOG] Created payroll_record_component: 59831da0-caf7-4221-b1e8-7f86262ba261 for Attendance Deduction
[2025-10-16T11:01:29.595Z] [LOG] ✅ Financial balances updated successfully for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:29.595Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:01:29.596Z] [LOG] 
======================================================================
[2025-10-16T11:01:29.597Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Rasanga null
[2025-10-16T11:01:29.597Z] [LOG] ======================================================================
[2025-10-16T11:01:29.598Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:01:29.598Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-16T11:01:29.599Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-16T11:01:29.599Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:01:29.600Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:01:29.601Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:01:29.601Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T11:01:29.602Z] [LOG] ======================================================================

[2025-10-16T11:01:29.603Z] [LOG] ✅ Rasanga null: Calculation completed successfully
[2025-10-16T11:01:29.603Z] [LOG] 📊 Progress: 13/31 (41.9%)
[2025-10-16T11:01:29.604Z] [LOG] 
🧮 Processing: Piyumi null (EMP000025)
[2025-10-16T11:01:29.605Z] [LOG] 📋 Record ID: 56c07dc9-893d-4064-9173-ea1eb780c8a6
[2025-10-16T11:01:29.608Z] [LOG] 
======================================================================
[2025-10-16T11:01:29.609Z] [LOG] 🧮 CALCULATING PAYROLL: Piyumi null (EMP000025)
[2025-10-16T11:01:29.610Z] [LOG] ======================================================================
[2025-10-16T11:01:30.521Z] [LOG] 🔍 Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-16T11:01:30.521Z] [LOG]    Total components: 9
[2025-10-16T11:01:30.521Z] [LOG]    Applicable components: 9
[2025-10-16T11:01:30.521Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T11:01:31.884Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:01:31.885Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:01:32.115Z] [LOG] 📊 Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:32.345Z] [LOG] 📊 Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:32.575Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:32.575Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:01:32.577Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:01:32.577Z] [LOG] 💰 GROSS CALCULATION for Piyumi null:
[2025-10-16T11:01:32.578Z] [LOG]    Base Salary: 50000
[2025-10-16T11:01:32.578Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:01:32.804Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:01:33.069Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:01:33.070Z] [LOG]    Employee ID: 0143e565-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:33.070Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:01:33.071Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:01:33.298Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:01:33.299Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:01:33.300Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:01:33.300Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:01:33.301Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:01:33.529Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:01:33.530Z] [LOG]       Weekday (Mon-Fri): 139.96h
[2025-10-16T11:01:33.531Z] [LOG]       Saturday: 16.11h
[2025-10-16T11:01:33.531Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:01:33.532Z] [LOG]       Total Worked: 156.07h
[2025-10-16T11:01:33.532Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:01:33.533Z] [LOG]       Weekday: 139.96h × Rs.235.29 = Rs.32931.19
[2025-10-16T11:01:33.534Z] [LOG]       Saturday: 16.11h × Rs.444.44 = Rs.7159.93
[2025-10-16T11:01:33.534Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:33.535Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:33.536Z] [LOG]       Total Earned Salary: Rs.40091.12
[2025-10-16T11:01:33.536Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:01:33.537Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:01:33.538Z] [LOG]       Earned Salary: Rs.40091.12
[2025-10-16T11:01:33.538Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:33.539Z] [LOG]       Attendance Deduction: Rs.9908.88
[2025-10-16T11:01:33.540Z] [LOG]       📉 Deduction is 19.82% of base salary
[2025-10-16T11:01:33.541Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:01:33.543Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:01:33.544Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:01:33.544Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:01:33.545Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:33.551Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:01:33.552Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:33.552Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:01:33.553Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:33.554Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:01:33.554Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:33.555Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:01:33.555Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:33.559Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:01:33.560Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:33.561Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:01:33.561Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:33.562Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:01:33.562Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:33.562Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:01:33.563Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:33.563Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:01:33.563Z] [LOG] Regular deductions for Piyumi null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:01:33.564Z] [LOG] Combined deductions for Piyumi null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 9908.883200000004,
      "details": "Based on worked hours (156.07h total)"
    }
  ],
  "total": 9908.883200000004
}
[2025-10-16T11:01:33.796Z] [LOG] Creating components for record 56c07dc9-893d-4064-9173-ea1eb780c8a6: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:01:33.797Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 9908.883200000004
}
[2025-10-16T11:01:34.024Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:01:34.253Z] [LOG] Created payroll_record_component: 89d1fba6-e7e2-4f32-bd46-98132b2bfa1c for Attendance Deduction
[2025-10-16T11:01:34.717Z] [LOG] ✅ Financial balances updated successfully for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:34.717Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:01:34.717Z] [LOG] 
======================================================================
[2025-10-16T11:01:34.718Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Piyumi null
[2025-10-16T11:01:34.718Z] [LOG] ======================================================================
[2025-10-16T11:01:34.718Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:01:34.718Z] [LOG]    Total Deductions: Rs.9908.88
[2025-10-16T11:01:34.718Z] [LOG]       - Attendance Deduction: Rs.9908.88
[2025-10-16T11:01:34.719Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:01:34.719Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:01:34.719Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:01:34.719Z] [LOG]    NET SALARY: Rs.40091.12
[2025-10-16T11:01:34.719Z] [LOG] ======================================================================

[2025-10-16T11:01:34.720Z] [LOG] ✅ Piyumi null: Calculation completed successfully
[2025-10-16T11:01:34.720Z] [LOG] 📊 Progress: 14/31 (45.2%)
[2025-10-16T11:01:34.720Z] [LOG] 
🧮 Processing: Franklin null (EMP000018)
[2025-10-16T11:01:34.721Z] [LOG] 📋 Record ID: 582bab68-b5da-4383-a1e6-3b9999d02341
[2025-10-16T11:01:34.721Z] [LOG] 
======================================================================
[2025-10-16T11:01:34.722Z] [LOG] 🧮 CALCULATING PAYROLL: Franklin null (EMP000018)
[2025-10-16T11:01:34.723Z] [LOG] ======================================================================
[2025-10-16T11:01:34.978Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:01:34.983Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:01:35.220Z] [LOG] 📊 Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:35.460Z] [LOG] 📊 Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:35.644Z] [LOG] 🔍 Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-16T11:01:35.645Z] [LOG]    Total components: 9
[2025-10-16T11:01:35.645Z] [LOG]    Applicable components: 9
[2025-10-16T11:01:35.645Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-16T11:01:35.692Z] [LOG] 📊 Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:35.693Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:01:35.693Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:01:35.694Z] [LOG] 💰 GROSS CALCULATION for Chamodi null:
[2025-10-16T11:01:35.694Z] [LOG]    Base Salary: 50000
[2025-10-16T11:01:35.694Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:01:35.936Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:01:36.169Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:01:36.170Z] [LOG]    Employee ID: 0143f302-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:36.170Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:01:36.171Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:01:36.403Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:01:36.404Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:01:36.404Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:01:36.404Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:01:36.405Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:01:36.644Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:01:36.644Z] [LOG]       Weekday (Mon-Fri): 150.11h
[2025-10-16T11:01:36.645Z] [LOG]       Saturday: 18.09h
[2025-10-16T11:01:36.645Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:01:36.645Z] [LOG]       Total Worked: 168.20h
[2025-10-16T11:01:36.645Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:01:36.645Z] [LOG]       Weekday: 150.11h × Rs.235.29 = Rs.35319.38
[2025-10-16T11:01:36.646Z] [LOG]       Saturday: 18.09h × Rs.444.44 = Rs.8039.92
[2025-10-16T11:01:36.646Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:36.646Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:36.646Z] [LOG]       Total Earned Salary: Rs.43359.30
[2025-10-16T11:01:36.647Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:01:36.648Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:01:36.648Z] [LOG]       Earned Salary: Rs.43359.30
[2025-10-16T11:01:36.648Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:36.649Z] [LOG]       Attendance Deduction: Rs.6640.70
[2025-10-16T11:01:36.649Z] [LOG]       📉 Deduction is 13.28% of base salary
[2025-10-16T11:01:36.649Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:01:36.650Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:01:36.650Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:01:36.651Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:01:36.651Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:36.651Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:01:36.651Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:36.652Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:01:36.652Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:36.652Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:01:36.652Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:36.653Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:01:36.653Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:36.653Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:01:36.653Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:36.654Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:01:36.654Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:36.654Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:01:36.654Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:36.654Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:01:36.655Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:36.655Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:01:36.655Z] [LOG] Regular deductions for Chamodi null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:01:36.655Z] [LOG] Combined deductions for Chamodi null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 6640.698499999999,
      "details": "Based on worked hours (168.20000000000002h total)"
    }
  ],
  "total": 6640.698499999999
}
[2025-10-16T11:01:36.890Z] [LOG] Creating components for record 83d8253d-3b22-4341-9209-5ff9a001a404: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:01:36.891Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 6640.698499999999
}
[2025-10-16T11:01:37.125Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:01:37.362Z] [LOG] Created payroll_record_component: 0d8afc58-da44-4b61-8749-fabd746d3081 for Attendance Deduction
[2025-10-16T11:01:37.851Z] [LOG] ✅ Financial balances updated successfully for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:37.852Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:01:37.853Z] [LOG] 
======================================================================
[2025-10-16T11:01:37.853Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chamodi null
[2025-10-16T11:01:37.854Z] [LOG] ======================================================================
[2025-10-16T11:01:37.854Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:01:37.855Z] [LOG]    Total Deductions: Rs.6640.70
[2025-10-16T11:01:37.856Z] [LOG]       - Attendance Deduction: Rs.6640.70
[2025-10-16T11:01:37.857Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:01:37.857Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:01:37.858Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:01:37.859Z] [LOG]    NET SALARY: Rs.43359.30
[2025-10-16T11:01:37.859Z] [LOG] ======================================================================

[2025-10-16T11:01:37.860Z] [LOG] ✅ Chamodi null: Calculation completed successfully
[2025-10-16T11:01:37.861Z] [LOG] 📊 Progress: 20/34 (58.8%)
[2025-10-16T11:01:37.862Z] [LOG] 
🧮 Processing: Shandeep null (EMP000034)
[2025-10-16T11:01:37.863Z] [LOG] 📋 Record ID: 36627eb2-87aa-430e-80df-a9b305b338a6
[2025-10-16T11:01:37.863Z] [LOG] 
======================================================================
[2025-10-16T11:01:37.864Z] [LOG] 🧮 CALCULATING PAYROLL: Shandeep null (EMP000034)
[2025-10-16T11:01:37.865Z] [LOG] ======================================================================
[2025-10-16T11:01:38.801Z] [LOG] 🔍 Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-16T11:01:38.802Z] [LOG]    Total components: 9
[2025-10-16T11:01:38.802Z] [LOG]    Applicable components: 9
[2025-10-16T11:01:38.803Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T11:01:40.664Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:01:40.665Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:01:40.911Z] [LOG] 📊 Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:41.137Z] [LOG] 📊 Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:41.368Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:41.369Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:01:41.370Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:01:41.370Z] [LOG] 💰 GROSS CALCULATION for Franklin null:
[2025-10-16T11:01:41.371Z] [LOG]    Base Salary: 50000
[2025-10-16T11:01:41.372Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:01:41.599Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:01:41.828Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:01:41.828Z] [LOG]    Employee ID: 0143c037-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:41.829Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:01:41.830Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:01:42.058Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:01:42.059Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:01:42.059Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:01:42.059Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:01:42.060Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:01:42.290Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:01:42.292Z] [LOG]       Weekday (Mon-Fri): 121.77h
[2025-10-16T11:01:42.293Z] [LOG]       Saturday: 11.61h
[2025-10-16T11:01:42.293Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:01:42.293Z] [LOG]       Total Worked: 133.38h
[2025-10-16T11:01:42.294Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:01:42.294Z] [LOG]       Weekday: 121.77h × Rs.235.29 = Rs.28651.26
[2025-10-16T11:01:42.295Z] [LOG]       Saturday: 11.61h × Rs.444.44 = Rs.5159.95
[2025-10-16T11:01:42.295Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:42.295Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:42.296Z] [LOG]       Total Earned Salary: Rs.33811.21
[2025-10-16T11:01:42.297Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:01:42.297Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:01:42.297Z] [LOG]       Earned Salary: Rs.33811.21
[2025-10-16T11:01:42.298Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:42.298Z] [LOG]       Attendance Deduction: Rs.16188.79
[2025-10-16T11:01:42.298Z] [LOG]       📉 Deduction is 32.38% of base salary
[2025-10-16T11:01:42.298Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:01:42.299Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:01:42.299Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:01:42.299Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:01:42.299Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:42.300Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:01:42.300Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:42.300Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:01:42.300Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:42.301Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:01:42.301Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:42.301Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:01:42.302Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:42.302Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:01:42.302Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:42.303Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:01:42.303Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:42.303Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:01:42.303Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:42.304Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:01:42.304Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:42.304Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:01:42.304Z] [LOG] Regular deductions for Franklin null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:01:42.305Z] [LOG] Combined deductions for Franklin null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 16188.7883,
      "details": "Based on worked hours (133.38h total)"
    }
  ],
  "total": 16188.7883
}
[2025-10-16T11:01:42.596Z] [LOG] Creating components for record 582bab68-b5da-4383-a1e6-3b9999d02341: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:01:42.598Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 16188.7883
}
[2025-10-16T11:01:42.829Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:01:43.058Z] [LOG] Created payroll_record_component: d17df939-5f98-4845-9fad-f3e7f8aa7217 for Attendance Deduction
[2025-10-16T11:01:43.533Z] [LOG] ✅ Financial balances updated successfully for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:43.533Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:01:43.534Z] [LOG] 
======================================================================
[2025-10-16T11:01:43.535Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Franklin null
[2025-10-16T11:01:43.535Z] [LOG] ======================================================================
[2025-10-16T11:01:43.536Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:01:43.536Z] [LOG]    Total Deductions: Rs.16188.79
[2025-10-16T11:01:43.537Z] [LOG]       - Attendance Deduction: Rs.16188.79
[2025-10-16T11:01:43.538Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:01:43.538Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:01:43.539Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:01:43.540Z] [LOG]    NET SALARY: Rs.33811.21
[2025-10-16T11:01:43.540Z] [LOG] ======================================================================

[2025-10-16T11:01:43.541Z] [LOG] ✅ Franklin null: Calculation completed successfully
[2025-10-16T11:01:43.541Z] [LOG] 📊 Progress: 15/31 (48.4%)
[2025-10-16T11:01:43.541Z] [LOG] 
🧮 Processing: Ishara null (EMP000011)
[2025-10-16T11:01:43.542Z] [LOG] 📋 Record ID: 584dd913-255e-4592-9109-48b156626392
[2025-10-16T11:01:43.543Z] [LOG] 
======================================================================
[2025-10-16T11:01:43.544Z] [LOG] 🧮 CALCULATING PAYROLL: Ishara null (EMP000011)
[2025-10-16T11:01:43.544Z] [LOG] ======================================================================
[2025-10-16T11:01:44.474Z] [LOG] 🔍 Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-16T11:01:44.474Z] [LOG]    Total components: 9
[2025-10-16T11:01:44.475Z] [LOG]    Applicable components: 9
[2025-10-16T11:01:44.475Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-16T11:01:45.426Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:01:45.427Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:01:45.778Z] [LOG] 📊 Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:45.784Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:01:45.784Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:01:46.006Z] [LOG] 📊 Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:46.023Z] [LOG] 📊 Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:46.232Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:46.233Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:01:46.233Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:01:46.233Z] [LOG] 💰 GROSS CALCULATION for Ishara null:
[2025-10-16T11:01:46.234Z] [LOG]    Base Salary: 50000
[2025-10-16T11:01:46.234Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:01:46.263Z] [LOG] 📊 Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:46.468Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:01:46.525Z] [LOG] 📊 Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:46.526Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:01:46.526Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:01:46.526Z] [LOG] 💰 GROSS CALCULATION for Shandeep null:
[2025-10-16T11:01:46.527Z] [LOG]    Base Salary: 80000
[2025-10-16T11:01:46.527Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:01:46.893Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:01:46.893Z] [LOG]    Employee ID: 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:46.893Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:01:46.893Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:01:46.894Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:01:47.128Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:01:47.129Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:01:47.129Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:01:47.129Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-16T11:01:47.129Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:01:47.133Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:01:47.133Z] [LOG]    Employee ID: 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:47.133Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:01:47.133Z] [LOG]    Base Salary: Rs.80000.00
[2025-10-16T11:01:47.354Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:01:47.355Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T11:01:47.355Z] [LOG]       Saturday: 0.00h
[2025-10-16T11:01:47.355Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:01:47.355Z] [LOG]       Total Worked: 0.00h
[2025-10-16T11:01:47.355Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:01:47.356Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:01:47.356Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:01:47.356Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:47.356Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:47.356Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T11:01:47.356Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:01:47.356Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:01:47.357Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T11:01:47.357Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:47.357Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-16T11:01:47.357Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-16T11:01:47.357Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:01:47.358Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:01:47.358Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:01:47.358Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:01:47.358Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.358Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:01:47.359Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.359Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:01:47.359Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.359Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:01:47.359Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.360Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:01:47.360Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.360Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:01:47.360Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.360Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:01:47.360Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.360Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:01:47.361Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.361Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:01:47.361Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.361Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:01:47.361Z] [LOG] Regular deductions for Ishara null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:01:47.362Z] [LOG] Combined deductions for Ishara null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-16T11:01:47.367Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:01:47.367Z] [LOG]       Daily Salary: Rs.3200.00
[2025-10-16T11:01:47.367Z] [LOG]       Weekday Hourly Rate: Rs.376.47
[2025-10-16T11:01:47.368Z] [LOG]       Saturday Hourly Rate: Rs.711.11
[2025-10-16T11:01:47.368Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:01:47.591Z] [LOG] Creating components for record 584dd913-255e-4592-9109-48b156626392: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:01:47.592Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-16T11:01:47.602Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:01:47.602Z] [LOG]       Weekday (Mon-Fri): 139.35h
[2025-10-16T11:01:47.602Z] [LOG]       Saturday: 22.50h
[2025-10-16T11:01:47.603Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:01:47.603Z] [LOG]       Total Worked: 161.85h
[2025-10-16T11:01:47.603Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:01:47.603Z] [LOG]       Weekday: 139.35h × Rs.376.47 = Rs.52461.09
[2025-10-16T11:01:47.603Z] [LOG]       Saturday: 22.50h × Rs.711.11 = Rs.15999.98
[2025-10-16T11:01:47.604Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:47.604Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:47.604Z] [LOG]       Total Earned Salary: Rs.68461.07
[2025-10-16T11:01:47.605Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:01:47.605Z] [LOG]       Base Salary: Rs.80000.00
[2025-10-16T11:01:47.605Z] [LOG]       Earned Salary: Rs.68461.07
[2025-10-16T11:01:47.605Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:47.605Z] [LOG]       Attendance Deduction: Rs.11538.93
[2025-10-16T11:01:47.606Z] [LOG]       📉 Deduction is 14.42% of base salary
[2025-10-16T11:01:47.606Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:01:47.606Z] [LOG]    Gross Salary: 80000
[2025-10-16T11:01:47.606Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:01:47.606Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:01:47.607Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.607Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:01:47.607Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.607Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:01:47.608Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.608Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:01:47.608Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.608Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:01:47.609Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.609Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:01:47.609Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.609Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:01:47.609Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.609Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:01:47.610Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.610Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:01:47.610Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:47.610Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:01:47.610Z] [LOG] Regular deductions for Shandeep null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:01:47.611Z] [LOG] Combined deductions for Shandeep null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 11538.930500000002,
      "details": "Based on worked hours (161.85h total)"
    }
  ],
  "total": 11538.930500000002
}
[2025-10-16T11:01:47.825Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:01:48.013Z] [LOG] Creating components for record 36627eb2-87aa-430e-80df-a9b305b338a6: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:01:48.014Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 11538.930500000002
}
[2025-10-16T11:01:48.203Z] [LOG] Created payroll_record_component: 5764f35d-15f6-4711-8c7d-48b013030013 for Attendance Deduction
[2025-10-16T11:01:48.474Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:01:48.699Z] [LOG] ✅ Financial balances updated successfully for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:48.699Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:01:48.699Z] [LOG] 
======================================================================
[2025-10-16T11:01:48.699Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ishara null
[2025-10-16T11:01:48.699Z] [LOG] ======================================================================
[2025-10-16T11:01:48.699Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:01:48.700Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-16T11:01:48.700Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-16T11:01:48.700Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:01:48.700Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:01:48.700Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:01:48.701Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T11:01:48.701Z] [LOG] ======================================================================

[2025-10-16T11:01:48.701Z] [LOG] ✅ Ishara null: Calculation completed successfully
[2025-10-16T11:01:48.701Z] [LOG] 📊 Progress: 16/31 (51.6%)
[2025-10-16T11:01:48.702Z] [LOG] 
🧮 Processing: Kaushal Thambi (EMP465256103)
[2025-10-16T11:01:48.702Z] [LOG] 📋 Record ID: 5b41047a-92ba-4344-9921-7bd801e215ea
[2025-10-16T11:01:48.702Z] [LOG] 
======================================================================
[2025-10-16T11:01:48.702Z] [LOG] 🧮 CALCULATING PAYROLL: Kaushal Thambi (EMP465256103)
[2025-10-16T11:01:48.703Z] [LOG] ======================================================================
[2025-10-16T11:01:48.767Z] [LOG] Created payroll_record_component: be49b2af-7c6a-48d2-8a89-033cbf3f0afa for Attendance Deduction
[2025-10-16T11:01:49.236Z] [LOG] ✅ Financial balances updated successfully for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:49.236Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:01:49.236Z] [LOG] 
======================================================================
[2025-10-16T11:01:49.237Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Shandeep null
[2025-10-16T11:01:49.237Z] [LOG] ======================================================================
[2025-10-16T11:01:49.237Z] [LOG]    Gross Salary: Rs.80000.00
[2025-10-16T11:01:49.237Z] [LOG]    Total Deductions: Rs.11538.93
[2025-10-16T11:01:49.238Z] [LOG]       - Attendance Deduction: Rs.11538.93
[2025-10-16T11:01:49.238Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:01:49.238Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:01:49.238Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:01:49.238Z] [LOG]    NET SALARY: Rs.68461.07
[2025-10-16T11:01:49.239Z] [LOG] ======================================================================

[2025-10-16T11:01:49.239Z] [LOG] ✅ Shandeep null: Calculation completed successfully
[2025-10-16T11:01:49.239Z] [LOG] 📊 Progress: 21/34 (61.8%)
[2025-10-16T11:01:49.239Z] [LOG] 
🧮 Processing: Maryam null (EMP000035)
[2025-10-16T11:01:49.240Z] [LOG] 📋 Record ID: dbad8f2a-5664-499a-aacc-dc6ea6eb8cd1
[2025-10-16T11:01:49.240Z] [LOG] 
======================================================================
[2025-10-16T11:01:49.240Z] [LOG] 🧮 CALCULATING PAYROLL: Maryam null (EMP000035)
[2025-10-16T11:01:49.240Z] [LOG] ======================================================================
[2025-10-16T11:01:49.617Z] [LOG] 🔍 Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-16T11:01:49.617Z] [LOG]    Total components: 9
[2025-10-16T11:01:49.618Z] [LOG]    Applicable components: 9
[2025-10-16T11:01:49.618Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-16T11:01:50.194Z] [LOG] 🔍 Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-16T11:01:50.194Z] [LOG]    Total components: 9
[2025-10-16T11:01:50.194Z] [LOG]    Applicable components: 9
[2025-10-16T11:01:50.194Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-16T11:01:50.613Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:01:50.613Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:01:50.855Z] [LOG] 📊 Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-16T11:01:51.083Z] [LOG] 📊 Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-16T11:01:51.314Z] [LOG] 📊 Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-16T11:01:51.315Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:01:51.315Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:01:51.315Z] [LOG] 💰 GROSS CALCULATION for Kaushal Thambi:
[2025-10-16T11:01:51.315Z] [LOG]    Base Salary: 50000
[2025-10-16T11:01:51.316Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:01:51.567Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:01:51.839Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:01:51.840Z] [LOG]    Employee ID: 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-16T11:01:51.840Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:01:51.840Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:01:52.066Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:01:52.066Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:01:52.067Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:01:52.067Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-16T11:01:52.067Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:01:52.295Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:01:52.296Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T11:01:52.296Z] [LOG]       Saturday: 0.00h
[2025-10-16T11:01:52.296Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:01:52.296Z] [LOG]       Total Worked: 0.00h
[2025-10-16T11:01:52.297Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:01:52.297Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:01:52.297Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:01:52.297Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:01:52.298Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:52.298Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T11:01:52.298Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:01:52.299Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:01:52.299Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T11:01:52.299Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:01:52.299Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-16T11:01:52.299Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-16T11:01:52.300Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:01:52.300Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:01:52.300Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:01:52.300Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:01:52.300Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:52.301Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:01:52.301Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:52.301Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:01:52.301Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:52.301Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:01:52.301Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:52.302Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:01:52.302Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:52.302Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:01:52.302Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:52.303Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:01:52.303Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:52.303Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:01:52.303Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:52.304Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:01:52.304Z] [LOG]    Fixed amount: 0
[2025-10-16T11:01:52.304Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:01:52.304Z] [LOG] Regular deductions for Kaushal Thambi: {
  "components": [],
  "total": 0
}
[2025-10-16T11:01:52.305Z] [LOG] Combined deductions for Kaushal Thambi: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-16T11:01:52.541Z] [LOG] Creating components for record 5b41047a-92ba-4344-9921-7bd801e215ea: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:01:52.542Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-16T11:01:52.800Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:01:53.077Z] [LOG] Created payroll_record_component: be932795-a879-44fa-a11c-7f4c1737af72 for Attendance Deduction
[2025-10-16T11:01:53.706Z] [LOG] ✅ Financial balances updated successfully for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-16T11:01:53.706Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:01:53.706Z] [LOG] 
======================================================================
[2025-10-16T11:01:53.707Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Kaushal Thambi
[2025-10-16T11:01:53.707Z] [LOG] ======================================================================
[2025-10-16T11:01:53.707Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:01:53.707Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-16T11:01:53.708Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-16T11:01:53.708Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:01:53.708Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:01:53.708Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:01:53.708Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T11:01:53.708Z] [LOG] ======================================================================

[2025-10-16T11:01:53.709Z] [LOG] ✅ Kaushal Thambi: Calculation completed successfully
[2025-10-16T11:01:53.709Z] [LOG] 📊 Progress: 17/31 (54.8%)
[2025-10-16T11:01:53.709Z] [LOG] 
🧮 Processing: Chemil null (EMP000040)
[2025-10-16T11:01:53.710Z] [LOG] 📋 Record ID: 62823cf8-fd25-4a75-9852-942b0f750f0a
[2025-10-16T11:01:53.710Z] [LOG] 
======================================================================
[2025-10-16T11:01:53.710Z] [LOG] 🧮 CALCULATING PAYROLL: Chemil null (EMP000040)
[2025-10-16T11:01:53.710Z] [LOG] ======================================================================
[2025-10-16T11:01:54.637Z] [LOG] 🔍 Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-16T11:01:54.637Z] [LOG]    Total components: 9
[2025-10-16T11:01:54.637Z] [LOG]    Applicable components: 9
[2025-10-16T11:01:54.637Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T11:01:58.682Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:01:58.682Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:01:58.920Z] [LOG] 📊 Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:59.157Z] [LOG] 📊 Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:59.391Z] [LOG] 📊 Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:59.391Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:01:59.393Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:01:59.393Z] [LOG] 💰 GROSS CALCULATION for Maryam null:
[2025-10-16T11:01:59.394Z] [LOG]    Base Salary: 40000
[2025-10-16T11:01:59.395Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:01:59.629Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:01:59.656Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:01:59.658Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:01:59.862Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:01:59.862Z] [LOG]    Employee ID: 01440221-7105-11f0-a50f-98e743540430
[2025-10-16T11:01:59.863Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:01:59.863Z] [LOG]    Base Salary: Rs.40000.00
[2025-10-16T11:01:59.887Z] [LOG] 📊 Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:00.100Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:02:00.101Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-16T11:02:00.102Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-16T11:02:00.102Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-16T11:02:00.103Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:02:00.115Z] [LOG] 📊 Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:00.340Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:02:00.341Z] [LOG]       Weekday (Mon-Fri): 148.07h
[2025-10-16T11:02:00.341Z] [LOG]       Saturday: 21.75h
[2025-10-16T11:02:00.342Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:02:00.342Z] [LOG]       Total Worked: 169.82h
[2025-10-16T11:02:00.343Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:02:00.344Z] [LOG]       Weekday: 148.07h × Rs.188.24 = Rs.27872.70
[2025-10-16T11:02:00.344Z] [LOG]       Saturday: 21.75h × Rs.355.56 = Rs.7733.43
[2025-10-16T11:02:00.345Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:00.345Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:00.346Z] [LOG]       Total Earned Salary: Rs.35606.13
[2025-10-16T11:02:00.347Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:02:00.348Z] [LOG]       Base Salary: Rs.40000.00
[2025-10-16T11:02:00.349Z] [LOG]       Earned Salary: Rs.35606.13
[2025-10-16T11:02:00.349Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:00.350Z] [LOG]       Attendance Deduction: Rs.4393.87
[2025-10-16T11:02:00.352Z] [LOG]       📉 Deduction is 10.98% of base salary
[2025-10-16T11:02:00.353Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:02:00.353Z] [LOG]    Gross Salary: 40000
[2025-10-16T11:02:00.354Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:02:00.355Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:02:00.355Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:00.356Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:02:00.357Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:00.358Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:02:00.358Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:00.359Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:02:00.359Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:00.360Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:02:00.361Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:00.362Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:02:00.363Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:00.364Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:02:00.364Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:00.365Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:02:00.365Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:00.366Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:02:00.367Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:00.367Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:02:00.368Z] [LOG] Regular deductions for Maryam null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:02:00.369Z] [LOG] Combined deductions for Maryam null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 4393.873200000002,
      "details": "Based on worked hours (169.82h total)"
    }
  ],
  "total": 4393.873200000002
}
[2025-10-16T11:02:00.375Z] [LOG] 📊 Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:00.376Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:02:00.376Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:02:00.377Z] [LOG] 💰 GROSS CALCULATION for Chemil null:
[2025-10-16T11:02:00.377Z] [LOG]    Base Salary: 250000
[2025-10-16T11:02:00.377Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:02:00.655Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:02:00.662Z] [LOG] Creating components for record dbad8f2a-5664-499a-aacc-dc6ea6eb8cd1: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:02:00.663Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 4393.873200000002
}
[2025-10-16T11:02:00.884Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:02:00.885Z] [LOG]    Employee ID: 01442599-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:00.885Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:02:00.886Z] [LOG]    Base Salary: Rs.250000.00
[2025-10-16T11:02:00.900Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:02:01.125Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:02:01.126Z] [LOG]       Daily Salary: Rs.10000.00
[2025-10-16T11:02:01.126Z] [LOG]       Weekday Hourly Rate: Rs.1176.47
[2025-10-16T11:02:01.126Z] [LOG]       Saturday Hourly Rate: Rs.2222.22
[2025-10-16T11:02:01.127Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:02:01.138Z] [LOG] Created payroll_record_component: 694546f8-e8c8-4a5d-b219-72877a534f76 for Attendance Deduction
[2025-10-16T11:02:01.356Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:02:01.356Z] [LOG]       Weekday (Mon-Fri): 148.35h
[2025-10-16T11:02:01.357Z] [LOG]       Saturday: 9.00h
[2025-10-16T11:02:01.357Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:02:01.358Z] [LOG]       Total Worked: 157.35h
[2025-10-16T11:02:01.358Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:02:01.358Z] [LOG]       Weekday: 148.35h × Rs.1176.47 = Rs.174529.32
[2025-10-16T11:02:01.359Z] [LOG]       Saturday: 9.00h × Rs.2222.22 = Rs.19999.98
[2025-10-16T11:02:01.359Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:01.359Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:01.360Z] [LOG]       Total Earned Salary: Rs.194529.30
[2025-10-16T11:02:01.360Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:02:01.360Z] [LOG]       Base Salary: Rs.250000.00
[2025-10-16T11:02:01.361Z] [LOG]       Earned Salary: Rs.194529.30
[2025-10-16T11:02:01.361Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:01.361Z] [LOG]       Attendance Deduction: Rs.55470.70
[2025-10-16T11:02:01.362Z] [LOG]       📉 Deduction is 22.19% of base salary
[2025-10-16T11:02:01.362Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:02:01.363Z] [LOG]    Gross Salary: 250000
[2025-10-16T11:02:01.363Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:02:01.363Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:02:01.363Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:01.364Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:02:01.364Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:01.364Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:02:01.365Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:01.365Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:02:01.366Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:01.366Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:02:01.367Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:01.367Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:02:01.368Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:01.368Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:02:01.368Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:01.369Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:02:01.369Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:01.369Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:02:01.370Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:01.370Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:02:01.370Z] [LOG] Regular deductions for Chemil null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:02:01.371Z] [LOG] Combined deductions for Chemil null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 55470.6955,
      "details": "Based on worked hours (157.35h total)"
    }
  ],
  "total": 55470.6955
}
[2025-10-16T11:02:01.601Z] [LOG] Creating components for record 62823cf8-fd25-4a75-9852-942b0f750f0a: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 1
}
[2025-10-16T11:02:01.603Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 55470.6955
}
[2025-10-16T11:02:01.606Z] [LOG] ✅ Financial balances updated successfully for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:01.606Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:02:01.606Z] [LOG] 
======================================================================
[2025-10-16T11:02:01.607Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Maryam null
[2025-10-16T11:02:01.608Z] [LOG] ======================================================================
[2025-10-16T11:02:01.608Z] [LOG]    Gross Salary: Rs.40000.00
[2025-10-16T11:02:01.609Z] [LOG]    Total Deductions: Rs.4393.87
[2025-10-16T11:02:01.609Z] [LOG]       - Attendance Deduction: Rs.4393.87
[2025-10-16T11:02:01.610Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:02:01.611Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:02:01.612Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:02:01.613Z] [LOG]    NET SALARY: Rs.35606.13
[2025-10-16T11:02:01.614Z] [LOG] ======================================================================

[2025-10-16T11:02:01.614Z] [LOG] ✅ Maryam null: Calculation completed successfully
[2025-10-16T11:02:01.614Z] [LOG] 📊 Progress: 22/34 (64.7%)
[2025-10-16T11:02:01.615Z] [LOG] 
🧮 Processing: customer null (EMP000036)
[2025-10-16T11:02:01.615Z] [LOG] 📋 Record ID: c08fde69-5de4-4506-b9d0-ccbc13573b7d
[2025-10-16T11:02:01.616Z] [LOG] 
======================================================================
[2025-10-16T11:02:01.616Z] [LOG] 🧮 CALCULATING PAYROLL: customer null (EMP000036)
[2025-10-16T11:02:01.617Z] [LOG] ======================================================================
[2025-10-16T11:02:01.831Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:02:02.082Z] [LOG] Created payroll_record_component: da038388-a62d-4e3d-8066-be567f198237 for Attendance Deduction
[2025-10-16T11:02:02.083Z] [LOG] Processing component: {
  "name": "Income Tax",
  "type": "tax",
  "amount": 12000
}
[2025-10-16T11:02:02.310Z] [LOG] Using existing component ID: 72f98b53-4bd5-4713-98d0-e3a641ad8d0f
[2025-10-16T11:02:02.539Z] [LOG] Created payroll_record_component: a15f1549-02aa-42b6-8358-f76be1652b81 for Income Tax
[2025-10-16T11:02:02.558Z] [LOG] 🔍 Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-16T11:02:02.558Z] [LOG]    Total components: 9
[2025-10-16T11:02:02.558Z] [LOG]    Applicable components: 9
[2025-10-16T11:02:02.559Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-16T11:02:03.001Z] [LOG] ✅ Financial balances updated successfully for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:03.002Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:02:03.003Z] [LOG] 
======================================================================
[2025-10-16T11:02:03.003Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chemil null
[2025-10-16T11:02:03.004Z] [LOG] ======================================================================
[2025-10-16T11:02:03.004Z] [LOG]    Gross Salary: Rs.250000.00
[2025-10-16T11:02:03.005Z] [LOG]    Total Deductions: Rs.55470.70
[2025-10-16T11:02:03.006Z] [LOG]       - Attendance Deduction: Rs.55470.70
[2025-10-16T11:02:03.006Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:02:03.007Z] [LOG]    Total Taxes: Rs.12000.00
[2025-10-16T11:02:03.007Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:02:03.008Z] [LOG]    NET SALARY: Rs.182529.30
[2025-10-16T11:02:03.009Z] [LOG] ======================================================================

[2025-10-16T11:02:03.010Z] [LOG] ✅ Chemil null: Calculation completed successfully
[2025-10-16T11:02:03.011Z] [LOG] 📊 Progress: 18/31 (58.1%)
[2025-10-16T11:02:03.011Z] [LOG] 
🧮 Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-16T11:02:03.012Z] [LOG] 📋 Record ID: 7fa910ca-fa46-4538-aca1-83dded1c8c96
[2025-10-16T11:02:03.014Z] [LOG] 
======================================================================
[2025-10-16T11:02:03.016Z] [LOG] 🧮 CALCULATING PAYROLL: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-16T11:02:03.016Z] [LOG] ======================================================================
[2025-10-16T11:02:03.519Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:02:03.521Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:02:03.755Z] [LOG] 📊 Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:03.957Z] [LOG] 🔍 Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-16T11:02:03.958Z] [LOG]    Total components: 9
[2025-10-16T11:02:03.958Z] [LOG]    Applicable components: 9
[2025-10-16T11:02:03.958Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-16T11:02:03.991Z] [LOG] 📊 Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:04.257Z] [LOG] 📊 Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:04.258Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:02:04.259Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:02:04.260Z] [LOG] 💰 GROSS CALCULATION for customer null:
[2025-10-16T11:02:04.260Z] [LOG]    Base Salary: 0
[2025-10-16T11:02:04.261Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:02:04.499Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:02:04.737Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:02:04.737Z] [LOG]    Employee ID: 014409a2-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:04.738Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:02:04.738Z] [LOG]    Base Salary: Rs.0.00
[2025-10-16T11:02:04.962Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:02:04.963Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:02:04.981Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:02:04.981Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-16T11:02:04.982Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-16T11:02:04.982Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-16T11:02:04.982Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:02:05.214Z] [LOG] 📊 Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:05.220Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:02:05.220Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T11:02:05.221Z] [LOG]       Saturday: 0.00h
[2025-10-16T11:02:05.222Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:02:05.224Z] [LOG]       Total Worked: 0.00h
[2025-10-16T11:02:05.224Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:02:05.225Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:05.226Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:05.226Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:05.228Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:05.229Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T11:02:05.230Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:02:05.230Z] [LOG]       Base Salary: Rs.0.00
[2025-10-16T11:02:05.231Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T11:02:05.232Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:05.232Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-16T11:02:05.233Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-16T11:02:05.234Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:02:05.235Z] [LOG]    Gross Salary: 0
[2025-10-16T11:02:05.235Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:02:05.236Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:02:05.236Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:05.237Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:02:05.237Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:05.238Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:02:05.239Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:05.240Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:02:05.240Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:05.241Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:02:05.241Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:05.243Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:02:05.245Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:05.246Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:02:05.247Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:05.247Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:02:05.248Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:05.248Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:02:05.249Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:05.249Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:02:05.250Z] [LOG] Regular deductions for customer null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:02:05.251Z] [LOG] Combined deductions for customer null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 0
}
[2025-10-16T11:02:05.453Z] [LOG] 📊 Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:05.491Z] [LOG] Creating components for record c08fde69-5de4-4506-b9d0-ccbc13573b7d: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:02:05.492Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-16T11:02:05.706Z] [LOG] 📊 Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:05.706Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:02:05.708Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:02:05.709Z] [LOG] 💰 GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-16T11:02:05.709Z] [LOG]    Base Salary: 50000
[2025-10-16T11:02:05.710Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:02:05.726Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:02:05.939Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:02:05.971Z] [LOG] Created payroll_record_component: 141c1fee-1a9c-4149-9bc8-c97c793ddcfc for Attendance Deduction
[2025-10-16T11:02:06.165Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:02:06.165Z] [LOG]    Employee ID: 0144315c-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:06.165Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:02:06.165Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:02:06.392Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:02:06.393Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:02:06.394Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:02:06.394Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-16T11:02:06.395Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:02:06.447Z] [LOG] ✅ Financial balances updated successfully for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:06.448Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:02:06.449Z] [LOG] 
======================================================================
[2025-10-16T11:02:06.449Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: customer null
[2025-10-16T11:02:06.450Z] [LOG] ======================================================================
[2025-10-16T11:02:06.450Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-16T11:02:06.451Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-16T11:02:06.451Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-16T11:02:06.452Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:02:06.453Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:02:06.453Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:02:06.454Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T11:02:06.454Z] [LOG] ======================================================================

[2025-10-16T11:02:06.455Z] [LOG] ✅ customer null: Calculation completed successfully
[2025-10-16T11:02:06.456Z] [LOG] 📊 Progress: 23/34 (67.6%)
[2025-10-16T11:02:06.457Z] [LOG] 
🧮 Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-16T11:02:06.458Z] [LOG] 📋 Record ID: 33bdbc12-b0c9-48b5-a079-15abb6da75d7
[2025-10-16T11:02:06.458Z] [LOG] 
======================================================================
[2025-10-16T11:02:06.461Z] [LOG] 🧮 CALCULATING PAYROLL: Viruna Damsiha Cooray null (EMP000038)
[2025-10-16T11:02:06.461Z] [LOG] ======================================================================
[2025-10-16T11:02:06.627Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:02:06.628Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T11:02:06.628Z] [LOG]       Saturday: 0.00h
[2025-10-16T11:02:06.629Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:02:06.630Z] [LOG]       Total Worked: 0.00h
[2025-10-16T11:02:06.630Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:02:06.631Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:02:06.631Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:02:06.632Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:06.633Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:06.633Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T11:02:06.634Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:02:06.635Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:02:06.635Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T11:02:06.636Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:06.637Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-16T11:02:06.637Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-16T11:02:06.638Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:02:06.643Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:02:06.644Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:02:06.644Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:02:06.645Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:06.646Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:02:06.646Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:06.647Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:02:06.647Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:06.648Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:02:06.649Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:06.649Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:02:06.650Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:06.650Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:02:06.651Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:06.651Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:02:06.652Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:06.652Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:02:06.653Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:06.653Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:02:06.654Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:06.655Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:02:06.655Z] [LOG] Regular deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:02:06.657Z] [LOG] Combined deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-16T11:02:06.888Z] [LOG] Creating components for record 7fa910ca-fa46-4538-aca1-83dded1c8c96: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:02:06.890Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-16T11:02:07.117Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:02:07.349Z] [LOG] Created payroll_record_component: fca02628-604b-416b-a35f-30035082f83c for Attendance Deduction
[2025-10-16T11:02:07.404Z] [LOG] 🔍 Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-16T11:02:07.405Z] [LOG]    Total components: 9
[2025-10-16T11:02:07.405Z] [LOG]    Applicable components: 9
[2025-10-16T11:02:07.406Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T11:02:07.802Z] [LOG] ✅ Financial balances updated successfully for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:07.802Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:02:07.803Z] [LOG] 
======================================================================
[2025-10-16T11:02:07.804Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: G.M Supathala Sadaru Madhushan null
[2025-10-16T11:02:07.804Z] [LOG] ======================================================================
[2025-10-16T11:02:07.805Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:02:07.805Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-16T11:02:07.806Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-16T11:02:07.807Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:02:07.808Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:02:07.811Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:02:07.812Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T11:02:07.813Z] [LOG] ======================================================================

[2025-10-16T11:02:07.813Z] [LOG] ✅ G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-16T11:02:07.814Z] [LOG] 📊 Progress: 19/31 (61.3%)
[2025-10-16T11:02:07.815Z] [LOG] 
🧮 Processing: Chamodi null (EMP000032)
[2025-10-16T11:02:07.816Z] [LOG] 📋 Record ID: 83d8253d-3b22-4341-9209-5ff9a001a404
[2025-10-16T11:02:07.817Z] [LOG] 
======================================================================
[2025-10-16T11:02:07.818Z] [LOG] 🧮 CALCULATING PAYROLL: Chamodi null (EMP000032)
[2025-10-16T11:02:07.819Z] [LOG] ======================================================================
[2025-10-16T11:02:08.848Z] [LOG] 🔍 Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-16T11:02:08.849Z] [LOG]    Total components: 9
[2025-10-16T11:02:08.849Z] [LOG]    Applicable components: 9
[2025-10-16T11:02:08.850Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T11:02:14.800Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:02:14.801Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:02:15.031Z] [LOG] 📊 Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:15.262Z] [LOG] 📊 Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:15.492Z] [LOG] 📊 Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:15.493Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:02:15.493Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:02:15.493Z] [LOG] 💰 GROSS CALCULATION for Chamodi null:
[2025-10-16T11:02:15.493Z] [LOG]    Base Salary: 50000
[2025-10-16T11:02:15.493Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:02:15.726Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:02:15.952Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:02:15.953Z] [LOG]    Employee ID: 0143f302-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:15.953Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:02:15.954Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:02:16.184Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:02:16.184Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:02:16.184Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:02:16.185Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:02:16.185Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:02:16.414Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:02:16.415Z] [LOG]       Weekday (Mon-Fri): 150.11h
[2025-10-16T11:02:16.415Z] [LOG]       Saturday: 18.09h
[2025-10-16T11:02:16.415Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:02:16.415Z] [LOG]       Total Worked: 168.20h
[2025-10-16T11:02:16.416Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:02:16.416Z] [LOG]       Weekday: 150.11h × Rs.235.29 = Rs.35319.38
[2025-10-16T11:02:16.416Z] [LOG]       Saturday: 18.09h × Rs.444.44 = Rs.8039.92
[2025-10-16T11:02:16.416Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:16.416Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:16.417Z] [LOG]       Total Earned Salary: Rs.43359.30
[2025-10-16T11:02:16.417Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:02:16.417Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:02:16.417Z] [LOG]       Earned Salary: Rs.43359.30
[2025-10-16T11:02:16.418Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:16.418Z] [LOG]       Attendance Deduction: Rs.6640.70
[2025-10-16T11:02:16.418Z] [LOG]       📉 Deduction is 13.28% of base salary
[2025-10-16T11:02:16.418Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:02:16.418Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:02:16.419Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:02:16.419Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:02:16.419Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:16.419Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:02:16.420Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:16.420Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:02:16.420Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:16.420Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:02:16.420Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:16.420Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:02:16.421Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:16.421Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:02:16.421Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:16.421Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:02:16.421Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:16.422Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:02:16.422Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:16.422Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:02:16.423Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:16.423Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:02:16.424Z] [LOG] Regular deductions for Chamodi null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:02:16.424Z] [LOG] Combined deductions for Chamodi null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 6640.698499999999,
      "details": "Based on worked hours (168.20000000000002h total)"
    }
  ],
  "total": 6640.698499999999
}
[2025-10-16T11:02:16.655Z] [LOG] Creating components for record 83d8253d-3b22-4341-9209-5ff9a001a404: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:02:16.657Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 6640.698499999999
}
[2025-10-16T11:02:16.884Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:02:17.111Z] [LOG] Created payroll_record_component: 7135e7e6-d4b5-4334-b888-8251ea02acc4 for Attendance Deduction
[2025-10-16T11:02:17.565Z] [LOG] ✅ Financial balances updated successfully for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:17.565Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:02:17.566Z] [LOG] 
======================================================================
[2025-10-16T11:02:17.567Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chamodi null
[2025-10-16T11:02:17.567Z] [LOG] ======================================================================
[2025-10-16T11:02:17.568Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:02:17.568Z] [LOG]    Total Deductions: Rs.6640.70
[2025-10-16T11:02:17.569Z] [LOG]       - Attendance Deduction: Rs.6640.70
[2025-10-16T11:02:17.569Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:02:17.570Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:02:17.570Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:02:17.571Z] [LOG]    NET SALARY: Rs.43359.30
[2025-10-16T11:02:17.572Z] [LOG] ======================================================================

[2025-10-16T11:02:17.574Z] [LOG] ✅ Chamodi null: Calculation completed successfully
[2025-10-16T11:02:17.574Z] [LOG] 📊 Progress: 20/31 (64.5%)
[2025-10-16T11:02:17.575Z] [LOG] 
🧮 Processing: Ratheeshanan null (EMP000047)
[2025-10-16T11:02:17.576Z] [LOG] 📋 Record ID: 931efbc3-9457-4245-94cd-a09c66a6da53
[2025-10-16T11:02:17.578Z] [LOG] 
======================================================================
[2025-10-16T11:02:17.579Z] [LOG] 🧮 CALCULATING PAYROLL: Ratheeshanan null (EMP000047)
[2025-10-16T11:02:17.579Z] [LOG] ======================================================================
[2025-10-16T11:02:17.874Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:02:17.875Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:02:18.110Z] [LOG] 📊 Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:18.346Z] [LOG] 📊 Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:18.485Z] [LOG] 🔍 Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-16T11:02:18.486Z] [LOG]    Total components: 9
[2025-10-16T11:02:18.486Z] [LOG]    Applicable components: 9
[2025-10-16T11:02:18.487Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T11:02:18.581Z] [LOG] 📊 Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:18.582Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:02:18.583Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:02:18.584Z] [LOG] 💰 GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-16T11:02:18.584Z] [LOG]    Base Salary: 50000
[2025-10-16T11:02:18.585Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:02:18.827Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:02:19.062Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:02:19.063Z] [LOG]    Employee ID: 01441633-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:19.064Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:02:19.064Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:02:19.297Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:02:19.297Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:02:19.301Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:02:19.302Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:02:19.302Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:02:19.538Z] [LOG] session eka meka {
  "id": "1ee88e0e-aa6e-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "bd06b6ce-c449-4169-a768-abb59041eedb",
  "ip_address": "::1",
  "user_agent": "PostmanRuntime/7.48.0",
  "expires_at": "2025-10-17 08:57:19",
  "is_active": 1,
  "created_at": "2025-10-16 14:27:19",
  "user_active": 1
}
[2025-10-16T11:02:19.542Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:02:19.542Z] [LOG]       Weekday (Mon-Fri): 165.42h
[2025-10-16T11:02:19.543Z] [LOG]       Saturday: 21.57h
[2025-10-16T11:02:19.543Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:02:19.543Z] [LOG]       Total Worked: 186.99h
[2025-10-16T11:02:19.544Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:02:19.545Z] [LOG]       Weekday: 165.42h × Rs.235.29 = Rs.38921.67
[2025-10-16T11:02:19.546Z] [LOG]       Saturday: 21.57h × Rs.444.44 = Rs.9586.57
[2025-10-16T11:02:19.546Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:19.548Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:19.549Z] [LOG]       Total Earned Salary: Rs.48508.24
[2025-10-16T11:02:19.550Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:02:19.551Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:02:19.551Z] [LOG]       Earned Salary: Rs.48508.24
[2025-10-16T11:02:19.551Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:19.552Z] [LOG]       Attendance Deduction: Rs.1491.76
[2025-10-16T11:02:19.552Z] [LOG]       📉 Deduction is 2.98% of base salary
[2025-10-16T11:02:19.552Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:02:19.553Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:02:19.553Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:02:19.553Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:02:19.554Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:19.554Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:02:19.554Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:19.554Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:02:19.555Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:19.555Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:02:19.557Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:19.557Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:02:19.559Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:19.560Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:02:19.560Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:19.560Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:02:19.561Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:19.561Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:02:19.561Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:19.562Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:02:19.562Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:19.563Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:02:19.563Z] [LOG] Regular deductions for Viruna Damsiha Cooray null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:02:19.564Z] [LOG] Combined deductions for Viruna Damsiha Cooray null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1491.7574000000022,
      "details": "Based on worked hours (186.98999999999998h total)"
    }
  ],
  "total": 1491.7574000000022
}
[2025-10-16T11:02:19.802Z] [LOG] Creating components for record 33bdbc12-b0c9-48b5-a079-15abb6da75d7: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:02:19.802Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1491.7574000000022
}
[2025-10-16T11:02:20.035Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:02:20.268Z] [LOG] Created payroll_record_component: 74c453ca-1a98-458e-a083-1950be82dbdd for Attendance Deduction
[2025-10-16T11:02:20.738Z] [LOG] ✅ Financial balances updated successfully for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:20.739Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:02:20.739Z] [LOG] 
======================================================================
[2025-10-16T11:02:20.740Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Viruna Damsiha Cooray null
[2025-10-16T11:02:20.740Z] [LOG] ======================================================================
[2025-10-16T11:02:20.740Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:02:20.741Z] [LOG]    Total Deductions: Rs.1491.76
[2025-10-16T11:02:20.741Z] [LOG]       - Attendance Deduction: Rs.1491.76
[2025-10-16T11:02:20.741Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:02:20.742Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:02:20.742Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:02:20.742Z] [LOG]    NET SALARY: Rs.48508.24
[2025-10-16T11:02:20.743Z] [LOG] ======================================================================

[2025-10-16T11:02:20.743Z] [LOG] ✅ Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-16T11:02:20.743Z] [LOG] 📊 Progress: 24/34 (70.6%)
[2025-10-16T11:02:20.744Z] [LOG] 
🧮 Processing: Sithira null (EMP000039)
[2025-10-16T11:02:20.744Z] [LOG] 📋 Record ID: 4dbc6e6d-edf9-4868-8a2d-0835b6202853
[2025-10-16T11:02:20.746Z] [LOG] 
======================================================================
[2025-10-16T11:02:20.749Z] [LOG] 🧮 CALCULATING PAYROLL: Sithira null (EMP000039)
[2025-10-16T11:02:20.750Z] [LOG] ======================================================================
[2025-10-16T11:02:21.682Z] [LOG] 🔍 Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-16T11:02:21.682Z] [LOG]    Total components: 9
[2025-10-16T11:02:21.683Z] [LOG]    Applicable components: 9
[2025-10-16T11:02:21.683Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-16T11:02:22.130Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:02:22.130Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:02:22.357Z] [LOG] 📊 Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:22.583Z] [LOG] 📊 Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:22.810Z] [LOG] 📊 Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:22.810Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:02:22.811Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:02:22.812Z] [LOG] 💰 GROSS CALCULATION for Ratheeshanan null:
[2025-10-16T11:02:22.812Z] [LOG]    Base Salary: 25000
[2025-10-16T11:02:22.812Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:02:23.043Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:02:23.270Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:02:23.270Z] [LOG]    Employee ID: 01444966-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:23.271Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:02:23.271Z] [LOG]    Base Salary: Rs.25000.00
[2025-10-16T11:02:23.502Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:02:23.503Z] [LOG]       Daily Salary: Rs.1000.00
[2025-10-16T11:02:23.503Z] [LOG]       Weekday Hourly Rate: Rs.117.65
[2025-10-16T11:02:23.503Z] [LOG]       Saturday Hourly Rate: Rs.222.22
[2025-10-16T11:02:23.504Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:02:23.731Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:02:23.732Z] [LOG]       Weekday (Mon-Fri): 139.86h
[2025-10-16T11:02:23.732Z] [LOG]       Saturday: 22.50h
[2025-10-16T11:02:23.733Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:02:23.733Z] [LOG]       Total Worked: 162.36h
[2025-10-16T11:02:23.733Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:02:23.734Z] [LOG]       Weekday: 139.86h × Rs.117.65 = Rs.16454.53
[2025-10-16T11:02:23.734Z] [LOG]       Saturday: 22.50h × Rs.222.22 = Rs.4999.95
[2025-10-16T11:02:23.734Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:23.735Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:23.735Z] [LOG]       Total Earned Salary: Rs.21454.48
[2025-10-16T11:02:23.735Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:02:23.736Z] [LOG]       Base Salary: Rs.25000.00
[2025-10-16T11:02:23.736Z] [LOG]       Earned Salary: Rs.21454.48
[2025-10-16T11:02:23.736Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:23.737Z] [LOG]       Attendance Deduction: Rs.3545.52
[2025-10-16T11:02:23.737Z] [LOG]       📉 Deduction is 14.18% of base salary
[2025-10-16T11:02:23.738Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:02:23.738Z] [LOG]    Gross Salary: 25000
[2025-10-16T11:02:23.738Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:02:23.741Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:02:23.742Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:23.743Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:02:23.743Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:23.744Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:02:23.744Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:23.744Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:02:23.745Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:23.745Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:02:23.746Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:23.746Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:02:23.746Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:23.747Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:02:23.747Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:23.748Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:02:23.748Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:23.748Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:02:23.749Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:23.749Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:02:23.750Z] [LOG] Regular deductions for Ratheeshanan null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:02:23.750Z] [LOG] Combined deductions for Ratheeshanan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 3545.520999999997,
      "details": "Based on worked hours (162.36h total)"
    }
  ],
  "total": 3545.520999999997
}
[2025-10-16T11:02:24.003Z] [LOG] Creating components for record 931efbc3-9457-4245-94cd-a09c66a6da53: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:02:24.004Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 3545.520999999997
}
[2025-10-16T11:02:24.239Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:02:24.486Z] [LOG] Created payroll_record_component: 6aa6f236-3cb7-4f3d-99e4-d5bf9dae46b8 for Attendance Deduction
[2025-10-16T11:02:24.941Z] [LOG] ✅ Financial balances updated successfully for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:24.942Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:02:24.942Z] [LOG] 
======================================================================
[2025-10-16T11:02:24.942Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ratheeshanan null
[2025-10-16T11:02:24.943Z] [LOG] ======================================================================
[2025-10-16T11:02:24.943Z] [LOG]    Gross Salary: Rs.25000.00
[2025-10-16T11:02:24.943Z] [LOG]    Total Deductions: Rs.3545.52
[2025-10-16T11:02:24.943Z] [LOG]       - Attendance Deduction: Rs.3545.52
[2025-10-16T11:02:24.944Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:02:24.944Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:02:24.944Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:02:24.945Z] [LOG]    NET SALARY: Rs.21454.48
[2025-10-16T11:02:24.945Z] [LOG] ======================================================================

[2025-10-16T11:02:24.945Z] [LOG] ✅ Ratheeshanan null: Calculation completed successfully
[2025-10-16T11:02:24.946Z] [LOG] 📊 Progress: 21/31 (67.7%)
[2025-10-16T11:02:24.946Z] [LOG] 
🧮 Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-16T11:02:24.946Z] [LOG] 📋 Record ID: 9cfa944a-5dd0-446e-812c-e362cd1792af
[2025-10-16T11:02:24.947Z] [LOG] 
======================================================================
[2025-10-16T11:02:24.947Z] [LOG] 🧮 CALCULATING PAYROLL: P.D.P Dilini Madushani null (EMP000043)
[2025-10-16T11:02:24.948Z] [LOG] ======================================================================
[2025-10-16T11:02:25.856Z] [LOG] 🔍 Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-16T11:02:25.856Z] [LOG]    Total components: 9
[2025-10-16T11:02:25.857Z] [LOG]    Applicable components: 9
[2025-10-16T11:02:25.857Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-16T11:02:26.767Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:02:26.767Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:02:26.993Z] [LOG] 📊 Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:27.222Z] [LOG] 📊 Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:27.450Z] [LOG] 📊 Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:27.450Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:02:27.451Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:02:27.451Z] [LOG] 💰 GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-16T11:02:27.452Z] [LOG]    Base Salary: 50000
[2025-10-16T11:02:27.452Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:02:27.558Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:02:27.559Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:02:27.679Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:02:27.794Z] [LOG] 📊 Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:27.908Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:02:27.909Z] [LOG]    Employee ID: 014435dc-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:27.909Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:02:27.909Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:02:28.028Z] [LOG] 📊 Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:28.137Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:02:28.137Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:02:28.138Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:02:28.138Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-16T11:02:28.138Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:02:28.265Z] [LOG] 📊 Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:28.265Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:02:28.266Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:02:28.266Z] [LOG] 💰 GROSS CALCULATION for Sithira null:
[2025-10-16T11:02:28.267Z] [LOG]    Base Salary: 40000
[2025-10-16T11:02:28.267Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:02:28.369Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:02:28.370Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T11:02:28.371Z] [LOG]       Saturday: 0.00h
[2025-10-16T11:02:28.375Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:02:28.377Z] [LOG]       Total Worked: 0.00h
[2025-10-16T11:02:28.378Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:02:28.379Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:02:28.379Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:02:28.380Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:28.380Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:28.382Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T11:02:28.382Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:02:28.385Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:02:28.386Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T11:02:28.386Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:28.387Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-16T11:02:28.387Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-16T11:02:28.388Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:02:28.389Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:02:28.393Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:02:28.394Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:02:28.394Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:28.394Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:02:28.395Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:28.395Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:02:28.395Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:28.395Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:02:28.396Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:28.396Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:02:28.396Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:28.397Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:02:28.397Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:28.397Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:02:28.397Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:28.398Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:02:28.398Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:28.398Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:02:28.399Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:28.399Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:02:28.399Z] [LOG] Regular deductions for P.D.P Dilini Madushani null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:02:28.400Z] [LOG] Combined deductions for P.D.P Dilini Madushani null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-16T11:02:28.499Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:02:28.629Z] [LOG] Creating components for record 9cfa944a-5dd0-446e-812c-e362cd1792af: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:02:28.630Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-16T11:02:28.733Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:02:28.733Z] [LOG]    Employee ID: 01441e19-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:28.734Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:02:28.734Z] [LOG]    Base Salary: Rs.40000.00
[2025-10-16T11:02:28.866Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:02:28.983Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:02:28.984Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-16T11:02:28.984Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-16T11:02:28.984Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-16T11:02:28.985Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:02:29.098Z] [LOG] Created payroll_record_component: 3a6b24cd-7af0-4a61-9d41-9d85b27696d7 for Attendance Deduction
[2025-10-16T11:02:29.220Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:02:29.220Z] [LOG]       Weekday (Mon-Fri): 153.71h
[2025-10-16T11:02:29.221Z] [LOG]       Saturday: 8.53h
[2025-10-16T11:02:29.221Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:02:29.221Z] [LOG]       Total Worked: 162.24h
[2025-10-16T11:02:29.222Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:02:29.222Z] [LOG]       Weekday: 153.71h × Rs.188.24 = Rs.28934.37
[2025-10-16T11:02:29.223Z] [LOG]       Saturday: 8.53h × Rs.355.56 = Rs.3032.93
[2025-10-16T11:02:29.224Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:29.224Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:29.225Z] [LOG]       Total Earned Salary: Rs.31967.30
[2025-10-16T11:02:29.225Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:02:29.226Z] [LOG]       Base Salary: Rs.40000.00
[2025-10-16T11:02:29.226Z] [LOG]       Earned Salary: Rs.31967.30
[2025-10-16T11:02:29.227Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:29.227Z] [LOG]       Attendance Deduction: Rs.8032.70
[2025-10-16T11:02:29.228Z] [LOG]       📉 Deduction is 20.08% of base salary
[2025-10-16T11:02:29.228Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:02:29.229Z] [LOG]    Gross Salary: 40000
[2025-10-16T11:02:29.230Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:02:29.232Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:02:29.232Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:29.232Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:02:29.233Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:29.233Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:02:29.234Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:29.234Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:02:29.234Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:29.235Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:02:29.235Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:29.235Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:02:29.236Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:29.236Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:02:29.236Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:29.237Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:02:29.237Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:29.238Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:02:29.238Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:29.238Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:02:29.241Z] [LOG] Regular deductions for Sithira null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:02:29.242Z] [LOG] Combined deductions for Sithira null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 8032.7027999999955,
      "details": "Based on worked hours (162.24h total)"
    }
  ],
  "total": 8032.7027999999955
}
[2025-10-16T11:02:29.479Z] [LOG] Creating components for record 4dbc6e6d-edf9-4868-8a2d-0835b6202853: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:02:29.482Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 8032.7027999999955
}
[2025-10-16T11:02:29.547Z] [LOG] ✅ Financial balances updated successfully for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:29.547Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:02:29.547Z] [LOG] 
======================================================================
[2025-10-16T11:02:29.548Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: P.D.P Dilini Madushani null
[2025-10-16T11:02:29.548Z] [LOG] ======================================================================
[2025-10-16T11:02:29.548Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:02:29.549Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-16T11:02:29.549Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-16T11:02:29.549Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:02:29.549Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:02:29.550Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:02:29.550Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T11:02:29.550Z] [LOG] ======================================================================

[2025-10-16T11:02:29.550Z] [LOG] ✅ P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-16T11:02:29.551Z] [LOG] 📊 Progress: 22/31 (71.0%)
[2025-10-16T11:02:29.551Z] [LOG] 
🧮 Processing: Saru null (EMP000022)
[2025-10-16T11:02:29.551Z] [LOG] 📋 Record ID: a4dc8689-2dee-4b0f-aece-afa54066dbeb
[2025-10-16T11:02:29.552Z] [LOG] 
======================================================================
[2025-10-16T11:02:29.552Z] [LOG] 🧮 CALCULATING PAYROLL: Saru null (EMP000022)
[2025-10-16T11:02:29.552Z] [LOG] ======================================================================
[2025-10-16T11:02:29.716Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:02:29.952Z] [LOG] Created payroll_record_component: 6b974f40-cae2-4007-bcee-32161b576ca7 for Attendance Deduction
[2025-10-16T11:02:30.418Z] [LOG] ✅ Financial balances updated successfully for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:30.419Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:02:30.419Z] [LOG] 
======================================================================
[2025-10-16T11:02:30.420Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sithira null
[2025-10-16T11:02:30.420Z] [LOG] ======================================================================
[2025-10-16T11:02:30.421Z] [LOG]    Gross Salary: Rs.40000.00
[2025-10-16T11:02:30.421Z] [LOG]    Total Deductions: Rs.8032.70
[2025-10-16T11:02:30.421Z] [LOG]       - Attendance Deduction: Rs.8032.70
[2025-10-16T11:02:30.422Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:02:30.422Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:02:30.423Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:02:30.424Z] [LOG]    NET SALARY: Rs.31967.30
[2025-10-16T11:02:30.424Z] [LOG] ======================================================================

[2025-10-16T11:02:30.425Z] [LOG] ✅ Sithira null: Calculation completed successfully
[2025-10-16T11:02:30.426Z] [LOG] 📊 Progress: 25/34 (73.5%)
[2025-10-16T11:02:30.426Z] [LOG] 
🧮 Processing: Chemil null (EMP000040)
[2025-10-16T11:02:30.427Z] [LOG] 📋 Record ID: 62823cf8-fd25-4a75-9852-942b0f750f0a
[2025-10-16T11:02:30.427Z] [LOG] 
======================================================================
[2025-10-16T11:02:30.429Z] [LOG] 🧮 CALCULATING PAYROLL: Chemil null (EMP000040)
[2025-10-16T11:02:30.429Z] [LOG] ======================================================================
[2025-10-16T11:02:30.543Z] [LOG] 🔍 Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-16T11:02:30.543Z] [LOG]    Total components: 9
[2025-10-16T11:02:30.544Z] [LOG]    Applicable components: 9
[2025-10-16T11:02:30.544Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T11:02:31.377Z] [LOG] 🔍 Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-16T11:02:31.377Z] [LOG]    Total components: 9
[2025-10-16T11:02:31.378Z] [LOG]    Applicable components: 9
[2025-10-16T11:02:31.378Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T11:02:31.904Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:02:31.905Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:02:32.139Z] [LOG] 📊 Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:32.390Z] [LOG] 📊 Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:32.618Z] [LOG] 📊 Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:32.619Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:02:32.620Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:02:32.621Z] [LOG] 💰 GROSS CALCULATION for Saru null:
[2025-10-16T11:02:32.621Z] [LOG]    Base Salary: 50000
[2025-10-16T11:02:32.621Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:02:32.856Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:02:33.083Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:02:33.083Z] [LOG]    Employee ID: 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:33.084Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:02:33.084Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:02:33.311Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:02:33.311Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:02:33.312Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:02:33.312Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:02:33.312Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:02:33.541Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:02:33.542Z] [LOG]       Weekday (Mon-Fri): 160.87h
[2025-10-16T11:02:33.543Z] [LOG]       Saturday: 21.25h
[2025-10-16T11:02:33.544Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:02:33.544Z] [LOG]       Total Worked: 182.12h
[2025-10-16T11:02:33.545Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:02:33.546Z] [LOG]       Weekday: 160.87h × Rs.235.29 = Rs.37851.10
[2025-10-16T11:02:33.546Z] [LOG]       Saturday: 21.25h × Rs.444.44 = Rs.9444.35
[2025-10-16T11:02:33.547Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:33.547Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:33.548Z] [LOG]       Total Earned Salary: Rs.47295.45
[2025-10-16T11:02:33.549Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:02:33.550Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:02:33.551Z] [LOG]       Earned Salary: Rs.47295.45
[2025-10-16T11:02:33.551Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:33.551Z] [LOG]       Attendance Deduction: Rs.2704.55
[2025-10-16T11:02:33.552Z] [LOG]       📉 Deduction is 5.41% of base salary
[2025-10-16T11:02:33.552Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:02:33.553Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:02:33.554Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:02:33.554Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:02:33.555Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:33.555Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:02:33.555Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:33.557Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:02:33.560Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:33.561Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:02:33.561Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:33.561Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:02:33.562Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:33.562Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:02:33.562Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:33.563Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:02:33.563Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:33.563Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:02:33.563Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:33.564Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:02:33.564Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:33.564Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:02:33.565Z] [LOG] Regular deductions for Saru null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:02:33.565Z] [LOG] Combined deductions for Saru null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 2704.547700000003,
      "details": "Based on worked hours (182.12h total)"
    }
  ],
  "total": 2704.547700000003
}
[2025-10-16T11:02:33.800Z] [LOG] Creating components for record a4dc8689-2dee-4b0f-aece-afa54066dbeb: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:02:33.802Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 2704.547700000003
}
[2025-10-16T11:02:34.032Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:02:34.263Z] [LOG] Created payroll_record_component: 0f0179a2-7cd5-47f4-bc36-ff401b4c3179 for Attendance Deduction
[2025-10-16T11:02:34.780Z] [LOG] ✅ Financial balances updated successfully for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:34.781Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:02:34.781Z] [LOG] 
======================================================================
[2025-10-16T11:02:34.781Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saru null
[2025-10-16T11:02:34.782Z] [LOG] ======================================================================
[2025-10-16T11:02:34.782Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:02:34.783Z] [LOG]    Total Deductions: Rs.2704.55
[2025-10-16T11:02:34.783Z] [LOG]       - Attendance Deduction: Rs.2704.55
[2025-10-16T11:02:34.783Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:02:34.784Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:02:34.784Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:02:34.784Z] [LOG]    NET SALARY: Rs.47295.45
[2025-10-16T11:02:34.785Z] [LOG] ======================================================================

[2025-10-16T11:02:34.785Z] [LOG] ✅ Saru null: Calculation completed successfully
[2025-10-16T11:02:34.786Z] [LOG] 📊 Progress: 23/31 (74.2%)
[2025-10-16T11:02:34.786Z] [LOG] 
🧮 Processing: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-16T11:02:34.787Z] [LOG] 📋 Record ID: b34f52d5-6351-4d00-b0f9-26d92e0aca24
[2025-10-16T11:02:34.787Z] [LOG] 
======================================================================
[2025-10-16T11:02:34.788Z] [LOG] 🧮 CALCULATING PAYROLL: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-16T11:02:34.788Z] [LOG] ======================================================================
[2025-10-16T11:02:35.724Z] [LOG] 🔍 Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-16T11:02:35.725Z] [LOG]    Total components: 9
[2025-10-16T11:02:35.726Z] [LOG]    Applicable components: 9
[2025-10-16T11:02:35.726Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T11:02:36.687Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:02:36.688Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:02:36.924Z] [LOG] 📊 Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:37.161Z] [LOG] 📊 Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:37.396Z] [LOG] 📊 Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:37.397Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:02:37.398Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:02:37.399Z] [LOG] 💰 GROSS CALCULATION for Chemil null:
[2025-10-16T11:02:37.399Z] [LOG]    Base Salary: 250000
[2025-10-16T11:02:37.400Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:02:37.591Z] [LOG] GET /api/payroll-runs/live/all?month=8&year=2025 - 200 - 18234ms
[2025-10-16T11:02:37.632Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:02:37.866Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:02:37.866Z] [LOG]    Employee ID: 01442599-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:37.867Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:02:37.867Z] [LOG]    Base Salary: Rs.250000.00
[2025-10-16T11:02:38.105Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:02:38.105Z] [LOG]       Daily Salary: Rs.10000.00
[2025-10-16T11:02:38.105Z] [LOG]       Weekday Hourly Rate: Rs.1176.47
[2025-10-16T11:02:38.106Z] [LOG]       Saturday Hourly Rate: Rs.2222.22
[2025-10-16T11:02:38.107Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:02:38.341Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:02:38.342Z] [LOG]       Weekday (Mon-Fri): 148.35h
[2025-10-16T11:02:38.342Z] [LOG]       Saturday: 9.00h
[2025-10-16T11:02:38.342Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:02:38.343Z] [LOG]       Total Worked: 157.35h
[2025-10-16T11:02:38.343Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:02:38.343Z] [LOG]       Weekday: 148.35h × Rs.1176.47 = Rs.174529.32
[2025-10-16T11:02:38.344Z] [LOG]       Saturday: 9.00h × Rs.2222.22 = Rs.19999.98
[2025-10-16T11:02:38.344Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:38.344Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:38.345Z] [LOG]       Total Earned Salary: Rs.194529.30
[2025-10-16T11:02:38.345Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:02:38.345Z] [LOG]       Base Salary: Rs.250000.00
[2025-10-16T11:02:38.346Z] [LOG]       Earned Salary: Rs.194529.30
[2025-10-16T11:02:38.346Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:38.346Z] [LOG]       Attendance Deduction: Rs.55470.70
[2025-10-16T11:02:38.347Z] [LOG]       📉 Deduction is 22.19% of base salary
[2025-10-16T11:02:38.347Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:02:38.347Z] [LOG]    Gross Salary: 250000
[2025-10-16T11:02:38.348Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:02:38.348Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:02:38.348Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:38.350Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:02:38.350Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:38.351Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:02:38.351Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:38.351Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:02:38.351Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:38.352Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:02:38.352Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:38.352Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:02:38.352Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:38.353Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:02:38.353Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:38.353Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:02:38.353Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:38.354Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:02:38.354Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:38.354Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:02:38.355Z] [LOG] Regular deductions for Chemil null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:02:38.355Z] [LOG] Combined deductions for Chemil null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 55470.6955,
      "details": "Based on worked hours (157.35h total)"
    }
  ],
  "total": 55470.6955
}
[2025-10-16T11:02:38.593Z] [LOG] Creating components for record 62823cf8-fd25-4a75-9852-942b0f750f0a: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 1
}
[2025-10-16T11:02:38.594Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 55470.6955
}
[2025-10-16T11:02:38.827Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:02:39.069Z] [LOG] Created payroll_record_component: f5000200-88db-463d-b461-95763f3621be for Attendance Deduction
[2025-10-16T11:02:39.069Z] [LOG] Processing component: {
  "name": "Income Tax",
  "type": "tax",
  "amount": 12000
}
[2025-10-16T11:02:39.306Z] [LOG] Using existing component ID: 72f98b53-4bd5-4713-98d0-e3a641ad8d0f
[2025-10-16T11:02:39.542Z] [LOG] Created payroll_record_component: a3d93509-265b-43e1-91f6-d564ed4cec06 for Income Tax
[2025-10-16T11:02:40.018Z] [LOG] ✅ Financial balances updated successfully for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:40.018Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:02:40.019Z] [LOG] 
======================================================================
[2025-10-16T11:02:40.020Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chemil null
[2025-10-16T11:02:40.020Z] [LOG] ======================================================================
[2025-10-16T11:02:40.021Z] [LOG]    Gross Salary: Rs.250000.00
[2025-10-16T11:02:40.021Z] [LOG]    Total Deductions: Rs.55470.70
[2025-10-16T11:02:40.022Z] [LOG]       - Attendance Deduction: Rs.55470.70
[2025-10-16T11:02:40.023Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:02:40.023Z] [LOG]    Total Taxes: Rs.12000.00
[2025-10-16T11:02:40.024Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:02:40.024Z] [LOG]    NET SALARY: Rs.182529.30
[2025-10-16T11:02:40.025Z] [LOG] ======================================================================

[2025-10-16T11:02:40.026Z] [LOG] ✅ Chemil null: Calculation completed successfully
[2025-10-16T11:02:40.026Z] [LOG] 📊 Progress: 26/34 (76.5%)
[2025-10-16T11:02:40.027Z] [LOG] 
🧮 Processing: Office Team null (EMP000041)
[2025-10-16T11:02:40.028Z] [LOG] 📋 Record ID: ba021046-3a8d-4905-96ba-84568a1d56b3
[2025-10-16T11:02:40.030Z] [LOG] 
======================================================================
[2025-10-16T11:02:40.031Z] [LOG] 🧮 CALCULATING PAYROLL: Office Team null (EMP000041)
[2025-10-16T11:02:40.032Z] [LOG] ======================================================================
[2025-10-16T11:02:40.985Z] [LOG] 🔍 Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-16T11:02:40.986Z] [LOG]    Total components: 9
[2025-10-16T11:02:40.986Z] [LOG]    Applicable components: 9
[2025-10-16T11:02:40.986Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-16T11:02:41.934Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:02:41.935Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:02:42.175Z] [LOG] 📊 Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:42.410Z] [LOG] 📊 Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:42.644Z] [LOG] 📊 Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:42.644Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:02:42.645Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:02:42.646Z] [LOG] 💰 GROSS CALCULATION for Office Team null:
[2025-10-16T11:02:42.647Z] [LOG]    Base Salary: 1
[2025-10-16T11:02:42.647Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:02:42.880Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:02:43.113Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:02:43.114Z] [LOG]    Employee ID: 01442b21-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:43.114Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:02:43.115Z] [LOG]    Base Salary: Rs.1.00
[2025-10-16T11:02:43.405Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:02:43.406Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-16T11:02:43.407Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-16T11:02:43.407Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-16T11:02:43.408Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:02:43.669Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:02:43.669Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T11:02:43.670Z] [LOG]       Saturday: 0.00h
[2025-10-16T11:02:43.671Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:02:43.671Z] [LOG]       Total Worked: 0.00h
[2025-10-16T11:02:43.675Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:02:43.679Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:43.679Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:43.680Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:43.682Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:43.682Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T11:02:43.685Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:02:43.686Z] [LOG]       Base Salary: Rs.1.00
[2025-10-16T11:02:43.687Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T11:02:43.687Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:43.688Z] [LOG]       Attendance Deduction: Rs.1.00
[2025-10-16T11:02:43.688Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-16T11:02:43.691Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:02:43.692Z] [LOG]    Gross Salary: 1
[2025-10-16T11:02:43.692Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:02:43.693Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:02:43.693Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:43.694Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:02:43.694Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:43.694Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:02:43.695Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:43.695Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:02:43.695Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:43.695Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:02:43.696Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:43.696Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:02:43.696Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:43.697Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:02:43.697Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:43.697Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:02:43.697Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:43.697Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:02:43.698Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:43.698Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:02:43.698Z] [LOG] Regular deductions for Office Team null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:02:43.698Z] [LOG] Combined deductions for Office Team null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 1
}
[2025-10-16T11:02:43.938Z] [LOG] Creating components for record ba021046-3a8d-4905-96ba-84568a1d56b3: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:02:43.940Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1
}
[2025-10-16T11:02:44.180Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:02:44.468Z] [LOG] Created payroll_record_component: 84ed00be-541b-4bd4-bc54-53b38db46fc6 for Attendance Deduction
[2025-10-16T11:02:44.947Z] [LOG] ✅ Financial balances updated successfully for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:44.947Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:02:44.948Z] [LOG] 
======================================================================
[2025-10-16T11:02:44.949Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Office Team null
[2025-10-16T11:02:44.949Z] [LOG] ======================================================================
[2025-10-16T11:02:44.950Z] [LOG]    Gross Salary: Rs.1.00
[2025-10-16T11:02:44.950Z] [LOG]    Total Deductions: Rs.1.00
[2025-10-16T11:02:44.951Z] [LOG]       - Attendance Deduction: Rs.1.00
[2025-10-16T11:02:44.951Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:02:44.952Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:02:44.952Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:02:44.953Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T11:02:44.954Z] [LOG] ======================================================================

[2025-10-16T11:02:44.955Z] [LOG] ✅ Office Team null: Calculation completed successfully
[2025-10-16T11:02:44.955Z] [LOG] 📊 Progress: 27/34 (79.4%)
[2025-10-16T11:02:44.956Z] [LOG] 
🧮 Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-16T11:02:44.957Z] [LOG] 📋 Record ID: 7fa910ca-fa46-4538-aca1-83dded1c8c96
[2025-10-16T11:02:44.959Z] [LOG] 
======================================================================
[2025-10-16T11:02:44.961Z] [LOG] 🧮 CALCULATING PAYROLL: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-16T11:02:44.961Z] [LOG] ======================================================================
[2025-10-16T11:02:46.048Z] [LOG] 🔍 Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-16T11:02:46.048Z] [LOG]    Total components: 9
[2025-10-16T11:02:46.049Z] [LOG]    Applicable components: 9
[2025-10-16T11:02:46.049Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-16T11:02:46.064Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:02:46.064Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:02:46.292Z] [LOG] 📊 Found 0 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:46.521Z] [LOG] 📊 Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:46.747Z] [LOG] 📊 Found 0 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:46.747Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:02:46.747Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:02:46.748Z] [LOG] 💰 GROSS CALCULATION for Ashen Nirmal Wadugodapitiya null:
[2025-10-16T11:02:46.748Z] [LOG]    Base Salary: 50000
[2025-10-16T11:02:46.748Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:02:46.972Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:02:46.987Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:02:46.987Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:02:47.206Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:02:47.236Z] [LOG]    Employee ID: 0144461e-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:47.236Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:02:47.237Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:02:47.237Z] [LOG] 📊 Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:47.464Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:02:47.465Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:02:47.465Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:02:47.466Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:02:47.466Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:02:47.473Z] [LOG] 📊 Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:47.696Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:02:47.697Z] [LOG]       Weekday (Mon-Fri): 152.20h
[2025-10-16T11:02:47.698Z] [LOG]       Saturday: 22.50h
[2025-10-16T11:02:47.698Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:02:47.699Z] [LOG]       Total Worked: 174.70h
[2025-10-16T11:02:47.700Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:02:47.700Z] [LOG]       Weekday: 152.20h × Rs.235.29 = Rs.35811.14
[2025-10-16T11:02:47.701Z] [LOG]       Saturday: 22.50h × Rs.444.44 = Rs.9999.90
[2025-10-16T11:02:47.701Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:47.702Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:47.703Z] [LOG]       Total Earned Salary: Rs.45811.04
[2025-10-16T11:02:47.704Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:02:47.705Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:02:47.706Z] [LOG]       Earned Salary: Rs.45811.04
[2025-10-16T11:02:47.707Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:47.710Z] [LOG]       Attendance Deduction: Rs.4188.96
[2025-10-16T11:02:47.711Z] [LOG]       📉 Deduction is 8.38% of base salary
[2025-10-16T11:02:47.712Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:02:47.712Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:02:47.713Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:02:47.713Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:02:47.714Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:47.714Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:02:47.715Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:47.716Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:02:47.716Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:47.717Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:02:47.717Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:47.718Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:02:47.719Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:47.719Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:02:47.720Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:47.720Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:02:47.721Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:47.721Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:02:47.722Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:47.724Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:02:47.725Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:47.726Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:02:47.727Z] [LOG] Regular deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:02:47.728Z] [LOG] Combined deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 4188.9619999999995,
      "details": "Based on worked hours (174.7h total)"
    }
  ],
  "total": 4188.9619999999995
}
[2025-10-16T11:02:47.733Z] [LOG] 📊 Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:47.734Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:02:47.735Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:02:47.736Z] [LOG] 💰 GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-16T11:02:47.736Z] [LOG]    Base Salary: 50000
[2025-10-16T11:02:47.737Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:02:47.959Z] [LOG] Creating components for record b34f52d5-6351-4d00-b0f9-26d92e0aca24: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:02:47.961Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 4188.9619999999995
}
[2025-10-16T11:02:47.971Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:02:48.188Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:02:48.205Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:02:48.206Z] [LOG]    Employee ID: 0144315c-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:48.207Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:02:48.207Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:02:48.420Z] [LOG] Created payroll_record_component: d7c54c6d-1971-4fd0-aaa4-cada20e7173d for Attendance Deduction
[2025-10-16T11:02:48.452Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:02:48.453Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:02:48.453Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:02:48.454Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-16T11:02:48.455Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:02:48.687Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:02:48.688Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T11:02:48.688Z] [LOG]       Saturday: 0.00h
[2025-10-16T11:02:48.689Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:02:48.689Z] [LOG]       Total Worked: 0.00h
[2025-10-16T11:02:48.690Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:02:48.690Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:02:48.691Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:02:48.692Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:48.692Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:48.693Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T11:02:48.693Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:02:48.695Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:02:48.695Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T11:02:48.696Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:48.696Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-16T11:02:48.698Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-16T11:02:48.699Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:02:48.700Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:02:48.701Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:02:48.701Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:02:48.702Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:48.703Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:02:48.703Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:48.704Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:02:48.704Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:48.705Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:02:48.706Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:48.707Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:02:48.707Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:48.708Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:02:48.708Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:48.709Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:02:48.711Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:48.712Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:02:48.712Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:48.713Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:02:48.714Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:48.714Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:02:48.715Z] [LOG] Regular deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:02:48.716Z] [LOG] Combined deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-16T11:02:48.876Z] [LOG] ✅ Financial balances updated successfully for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:48.877Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:02:48.877Z] [LOG] 
======================================================================
[2025-10-16T11:02:48.878Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ashen Nirmal Wadugodapitiya null
[2025-10-16T11:02:48.878Z] [LOG] ======================================================================
[2025-10-16T11:02:48.879Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:02:48.879Z] [LOG]    Total Deductions: Rs.4188.96
[2025-10-16T11:02:48.879Z] [LOG]       - Attendance Deduction: Rs.4188.96
[2025-10-16T11:02:48.880Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:02:48.880Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:02:48.881Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:02:48.881Z] [LOG]    NET SALARY: Rs.45811.04
[2025-10-16T11:02:48.881Z] [LOG] ======================================================================

[2025-10-16T11:02:48.882Z] [LOG] ✅ Ashen Nirmal Wadugodapitiya null: Calculation completed successfully
[2025-10-16T11:02:48.882Z] [LOG] 📊 Progress: 24/31 (77.4%)
[2025-10-16T11:02:48.883Z] [LOG] 
🧮 Processing: Sumaiya null (EMP000016)
[2025-10-16T11:02:48.883Z] [LOG] 📋 Record ID: b8ec7d5f-58fd-4e6a-b015-6cc512c9ba88
[2025-10-16T11:02:48.884Z] [LOG] 
======================================================================
[2025-10-16T11:02:48.884Z] [LOG] 🧮 CALCULATING PAYROLL: Sumaiya null (EMP000016)
[2025-10-16T11:02:48.884Z] [LOG] ======================================================================
[2025-10-16T11:02:48.963Z] [LOG] Creating components for record 7fa910ca-fa46-4538-aca1-83dded1c8c96: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:02:48.964Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-16T11:02:49.208Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:02:49.466Z] [LOG] Created payroll_record_component: 11a3c1e9-edf0-432e-a098-4c048218f08c for Attendance Deduction
[2025-10-16T11:02:49.806Z] [LOG] 🔍 Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-16T11:02:49.808Z] [LOG]    Total components: 9
[2025-10-16T11:02:49.809Z] [LOG]    Applicable components: 9
[2025-10-16T11:02:49.810Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T11:02:49.933Z] [LOG] ✅ Financial balances updated successfully for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:49.933Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:02:49.934Z] [LOG] 
======================================================================
[2025-10-16T11:02:49.934Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: G.M Supathala Sadaru Madhushan null
[2025-10-16T11:02:49.935Z] [LOG] ======================================================================
[2025-10-16T11:02:49.936Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:02:49.936Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-16T11:02:49.937Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-16T11:02:49.937Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:02:49.938Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:02:49.938Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:02:49.940Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T11:02:49.941Z] [LOG] ======================================================================

[2025-10-16T11:02:49.941Z] [LOG] ✅ G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-16T11:02:49.942Z] [LOG] 📊 Progress: 28/34 (82.4%)
[2025-10-16T11:02:49.942Z] [LOG] 
🧮 Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-16T11:02:49.943Z] [LOG] 📋 Record ID: 9cfa944a-5dd0-446e-812c-e362cd1792af
[2025-10-16T11:02:49.944Z] [LOG] 
======================================================================
[2025-10-16T11:02:49.946Z] [LOG] 🧮 CALCULATING PAYROLL: P.D.P Dilini Madushani null (EMP000043)
[2025-10-16T11:02:49.947Z] [LOG] ======================================================================
[2025-10-16T11:02:50.885Z] [LOG] 🔍 Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-16T11:02:50.886Z] [LOG]    Total components: 9
[2025-10-16T11:02:50.886Z] [LOG]    Applicable components: 9
[2025-10-16T11:02:50.887Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-16T11:02:51.842Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:02:51.842Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:02:52.075Z] [LOG] 📊 Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:52.310Z] [LOG] 📊 Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:52.543Z] [LOG] 📊 Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:52.544Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:02:52.545Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:02:52.546Z] [LOG] 💰 GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-16T11:02:52.547Z] [LOG]    Base Salary: 50000
[2025-10-16T11:02:52.548Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:02:52.782Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:02:53.020Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:02:53.024Z] [LOG]    Employee ID: 014435dc-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:53.025Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:02:53.025Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:02:53.261Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:02:53.262Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:02:53.262Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:02:53.263Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-16T11:02:53.263Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:02:53.499Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:02:53.500Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T11:02:53.501Z] [LOG]       Saturday: 0.00h
[2025-10-16T11:02:53.501Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:02:53.502Z] [LOG]       Total Worked: 0.00h
[2025-10-16T11:02:53.502Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:02:53.503Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:02:53.504Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:02:53.505Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:02:53.505Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:53.506Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T11:02:53.508Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:02:53.509Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:02:53.509Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T11:02:53.510Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:02:53.510Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-16T11:02:53.511Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-16T11:02:53.513Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:02:53.514Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:02:53.515Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:02:53.515Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:02:53.516Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:53.516Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:02:53.517Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:53.518Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:02:53.518Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:53.519Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:02:53.520Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:53.520Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:02:53.521Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:53.521Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:02:53.522Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:53.524Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:02:53.524Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:53.525Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:02:53.526Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:53.527Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:02:53.528Z] [LOG]    Fixed amount: 0
[2025-10-16T11:02:53.529Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:02:53.530Z] [LOG] Regular deductions for P.D.P Dilini Madushani null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:02:53.531Z] [LOG] Combined deductions for P.D.P Dilini Madushani null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-16T11:02:53.770Z] [LOG] Creating components for record 9cfa944a-5dd0-446e-812c-e362cd1792af: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:02:53.771Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-16T11:02:54.030Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:02:54.312Z] [LOG] Created payroll_record_component: f82843fd-c586-4aee-84db-10c2c4b5f16e for Attendance Deduction
[2025-10-16T11:02:54.776Z] [LOG] ✅ Financial balances updated successfully for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:54.777Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:02:54.777Z] [LOG] 
======================================================================
[2025-10-16T11:02:54.778Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: P.D.P Dilini Madushani null
[2025-10-16T11:02:54.778Z] [LOG] ======================================================================
[2025-10-16T11:02:54.779Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:02:54.780Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-16T11:02:54.780Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-16T11:02:54.781Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:02:54.782Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:02:54.782Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:02:54.783Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T11:02:54.784Z] [LOG] ======================================================================

[2025-10-16T11:02:54.785Z] [LOG] ✅ P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-16T11:02:54.785Z] [LOG] 📊 Progress: 29/34 (85.3%)
[2025-10-16T11:02:54.786Z] [LOG] 
🧮 Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-16T11:02:54.788Z] [LOG] 📋 Record ID: 3beb22ea-35c7-42f6-bec6-1e1ab0631eb8
[2025-10-16T11:02:54.791Z] [LOG] 
======================================================================
[2025-10-16T11:02:54.792Z] [LOG] 🧮 CALCULATING PAYROLL: R. D.A Kaushalya null (EMP000044)
[2025-10-16T11:02:54.797Z] [LOG] ======================================================================
[2025-10-16T11:02:55.731Z] [LOG] 🔍 Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-16T11:02:55.731Z] [LOG]    Total components: 9
[2025-10-16T11:02:55.731Z] [LOG]    Applicable components: 9
[2025-10-16T11:02:55.732Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T11:02:58.627Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:02:58.628Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:02:58.857Z] [LOG] 📊 Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:59.094Z] [LOG] 📊 Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:59.326Z] [LOG] 📊 Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:59.327Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:02:59.328Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:02:59.329Z] [LOG] 💰 GROSS CALCULATION for Sumaiya null:
[2025-10-16T11:02:59.329Z] [LOG]    Base Salary: 60000
[2025-10-16T11:02:59.330Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:02:59.560Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:02:59.792Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:02:59.792Z] [LOG]    Employee ID: 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-16T11:02:59.793Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:02:59.793Z] [LOG]    Base Salary: Rs.60000.00
[2025-10-16T11:03:00.066Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:03:00.067Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-16T11:03:00.067Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-16T11:03:00.068Z] [LOG]       Saturday Hourly Rate: Rs.533.33
[2025-10-16T11:03:00.068Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:03:00.297Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:03:00.298Z] [LOG]       Weekday (Mon-Fri): 162.15h
[2025-10-16T11:03:00.298Z] [LOG]       Saturday: 22.50h
[2025-10-16T11:03:00.299Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:03:00.299Z] [LOG]       Total Worked: 184.65h
[2025-10-16T11:03:00.300Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:03:00.300Z] [LOG]       Weekday: 162.15h × Rs.282.35 = Rs.45783.05
[2025-10-16T11:03:00.300Z] [LOG]       Saturday: 22.50h × Rs.533.33 = Rs.11999.93
[2025-10-16T11:03:00.301Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:00.301Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:00.302Z] [LOG]       Total Earned Salary: Rs.57782.98
[2025-10-16T11:03:00.302Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:03:00.302Z] [LOG]       Base Salary: Rs.60000.00
[2025-10-16T11:03:00.303Z] [LOG]       Earned Salary: Rs.57782.98
[2025-10-16T11:03:00.303Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:00.303Z] [LOG]       Attendance Deduction: Rs.2217.02
[2025-10-16T11:03:00.304Z] [LOG]       📉 Deduction is 3.70% of base salary
[2025-10-16T11:03:00.304Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:03:00.305Z] [LOG]    Gross Salary: 60000
[2025-10-16T11:03:00.305Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:03:00.306Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:03:00.308Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:00.308Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:03:00.309Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:00.309Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:03:00.310Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:00.310Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:03:00.310Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:00.311Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:03:00.311Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:00.311Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:03:00.312Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:00.312Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:03:00.312Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:00.313Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:03:00.313Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:00.313Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:03:00.314Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:00.314Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:03:00.315Z] [LOG] Regular deductions for Sumaiya null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:03:00.315Z] [LOG] Combined deductions for Sumaiya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 2217.022499999992,
      "details": "Based on worked hours (184.65h total)"
    }
  ],
  "total": 2217.022499999992
}
[2025-10-16T11:03:00.545Z] [LOG] Creating components for record b8ec7d5f-58fd-4e6a-b015-6cc512c9ba88: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:03:00.546Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 2217.022499999992
}
[2025-10-16T11:03:00.775Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:03:01.005Z] [LOG] Created payroll_record_component: a11d536a-2e41-4e9f-9675-2843ec941b1d for Attendance Deduction
[2025-10-16T11:03:01.483Z] [LOG] ✅ Financial balances updated successfully for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:01.483Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:03:01.484Z] [LOG] 
======================================================================
[2025-10-16T11:03:01.484Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sumaiya null
[2025-10-16T11:03:01.484Z] [LOG] ======================================================================
[2025-10-16T11:03:01.484Z] [LOG]    Gross Salary: Rs.60000.00
[2025-10-16T11:03:01.485Z] [LOG]    Total Deductions: Rs.2217.02
[2025-10-16T11:03:01.485Z] [LOG]       - Attendance Deduction: Rs.2217.02
[2025-10-16T11:03:01.485Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:03:01.485Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:03:01.485Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:03:01.486Z] [LOG]    NET SALARY: Rs.57782.98
[2025-10-16T11:03:01.486Z] [LOG] ======================================================================

[2025-10-16T11:03:01.486Z] [LOG] ✅ Sumaiya null: Calculation completed successfully
[2025-10-16T11:03:01.486Z] [LOG] 📊 Progress: 25/31 (80.6%)
[2025-10-16T11:03:01.487Z] [LOG] 
🧮 Processing: Office Team null (EMP000041)
[2025-10-16T11:03:01.487Z] [LOG] 📋 Record ID: ba021046-3a8d-4905-96ba-84568a1d56b3
[2025-10-16T11:03:01.487Z] [LOG] 
======================================================================
[2025-10-16T11:03:01.487Z] [LOG] 🧮 CALCULATING PAYROLL: Office Team null (EMP000041)
[2025-10-16T11:03:01.488Z] [LOG] ======================================================================
[2025-10-16T11:03:01.705Z] [LOG] session eka meka {
  "id": "1ee88e0e-aa6e-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "bd06b6ce-c449-4169-a768-abb59041eedb",
  "ip_address": "::1",
  "user_agent": "PostmanRuntime/7.48.0",
  "expires_at": "2025-10-17 08:57:19",
  "is_active": 1,
  "created_at": "2025-10-16 14:27:19",
  "user_active": 1
}
[2025-10-16T11:03:02.409Z] [LOG] 🔍 Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-16T11:03:02.410Z] [LOG]    Total components: 9
[2025-10-16T11:03:02.411Z] [LOG]    Applicable components: 9
[2025-10-16T11:03:02.447Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-16T11:03:03.655Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:03:03.656Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:03:03.988Z] [LOG] 📊 Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:04.225Z] [LOG] 📊 Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:04.231Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:03:04.231Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:03:04.455Z] [LOG] 📊 Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:04.456Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:03:04.458Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:03:04.459Z] [LOG] 💰 GROSS CALCULATION for Office Team null:
[2025-10-16T11:03:04.460Z] [LOG]    Base Salary: 1
[2025-10-16T11:03:04.460Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:03:04.484Z] [LOG] 📊 Found 0 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:04.692Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:03:04.729Z] [LOG] 📊 Found 0 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:04.927Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:03:04.928Z] [LOG]    Employee ID: 01442b21-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:04.928Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:03:04.929Z] [LOG]    Base Salary: Rs.1.00
[2025-10-16T11:03:04.988Z] [LOG] 📊 Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:04.989Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:03:04.990Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:03:04.990Z] [LOG] 💰 GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-16T11:03:04.991Z] [LOG]    Base Salary: 50000
[2025-10-16T11:03:04.991Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:03:05.157Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:03:05.158Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-16T11:03:05.158Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-16T11:03:05.158Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-16T11:03:05.158Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:03:05.225Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:03:05.387Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:03:05.387Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T11:03:05.387Z] [LOG]       Saturday: 0.00h
[2025-10-16T11:03:05.388Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:03:05.388Z] [LOG]       Total Worked: 0.00h
[2025-10-16T11:03:05.389Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:03:05.389Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:05.390Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:05.390Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:05.391Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:05.391Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T11:03:05.392Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:03:05.392Z] [LOG]       Base Salary: Rs.1.00
[2025-10-16T11:03:05.392Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T11:03:05.393Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:05.394Z] [LOG]       Attendance Deduction: Rs.1.00
[2025-10-16T11:03:05.394Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-16T11:03:05.395Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:03:05.395Z] [LOG]    Gross Salary: 1
[2025-10-16T11:03:05.397Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:03:05.398Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:03:05.399Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.399Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:03:05.400Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.400Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:03:05.401Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.401Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:03:05.401Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.402Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:03:05.402Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.402Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:03:05.403Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.403Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:03:05.403Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.404Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:03:05.404Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.405Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:03:05.405Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.406Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:03:05.407Z] [LOG] Regular deductions for Office Team null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:03:05.408Z] [LOG] Combined deductions for Office Team null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 1
}
[2025-10-16T11:03:05.459Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:03:05.460Z] [LOG]    Employee ID: 01443963-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:05.460Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:03:05.460Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:03:05.645Z] [LOG] Creating components for record ba021046-3a8d-4905-96ba-84568a1d56b3: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:03:05.647Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1
}
[2025-10-16T11:03:05.701Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:03:05.701Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:03:05.702Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:03:05.702Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:03:05.702Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:03:05.879Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:03:05.935Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:03:05.936Z] [LOG]       Weekday (Mon-Fri): 162.20h
[2025-10-16T11:03:05.936Z] [LOG]       Saturday: 22.50h
[2025-10-16T11:03:05.936Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:03:05.937Z] [LOG]       Total Worked: 184.70h
[2025-10-16T11:03:05.937Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:03:05.937Z] [LOG]       Weekday: 162.20h × Rs.235.29 = Rs.38164.04
[2025-10-16T11:03:05.938Z] [LOG]       Saturday: 22.50h × Rs.444.44 = Rs.9999.90
[2025-10-16T11:03:05.938Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:05.938Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:05.940Z] [LOG]       Total Earned Salary: Rs.48163.94
[2025-10-16T11:03:05.940Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:03:05.940Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:03:05.942Z] [LOG]       Earned Salary: Rs.48163.94
[2025-10-16T11:03:05.942Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:05.942Z] [LOG]       Attendance Deduction: Rs.1836.06
[2025-10-16T11:03:05.943Z] [LOG]       📉 Deduction is 3.67% of base salary
[2025-10-16T11:03:05.943Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:03:05.943Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:03:05.944Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:03:05.944Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:03:05.945Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.945Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:03:05.945Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.946Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:03:05.946Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.947Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:03:05.947Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.947Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:03:05.948Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.948Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:03:05.948Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.949Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:03:05.949Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.949Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:03:05.950Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.950Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:03:05.950Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:05.950Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:03:05.951Z] [LOG] Regular deductions for R. D.A Kaushalya null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:03:05.951Z] [LOG] Combined deductions for R. D.A Kaushalya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1836.0620000000054,
      "details": "Based on worked hours (184.7h total)"
    }
  ],
  "total": 1836.0620000000054
}
[2025-10-16T11:03:06.134Z] [LOG] Created payroll_record_component: 8a97b9a3-713f-4c8a-9bec-f761cc846f5f for Attendance Deduction
[2025-10-16T11:03:06.185Z] [LOG] Creating components for record 3beb22ea-35c7-42f6-bec6-1e1ab0631eb8: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:03:06.186Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1836.0620000000054
}
[2025-10-16T11:03:06.420Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:03:06.606Z] [LOG] ✅ Financial balances updated successfully for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:06.606Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:03:06.607Z] [LOG] 
======================================================================
[2025-10-16T11:03:06.607Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Office Team null
[2025-10-16T11:03:06.607Z] [LOG] ======================================================================
[2025-10-16T11:03:06.608Z] [LOG]    Gross Salary: Rs.1.00
[2025-10-16T11:03:06.608Z] [LOG]    Total Deductions: Rs.1.00
[2025-10-16T11:03:06.608Z] [LOG]       - Attendance Deduction: Rs.1.00
[2025-10-16T11:03:06.608Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:03:06.609Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:03:06.609Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:03:06.609Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T11:03:06.609Z] [LOG] ======================================================================

[2025-10-16T11:03:06.610Z] [LOG] ✅ Office Team null: Calculation completed successfully
[2025-10-16T11:03:06.610Z] [LOG] 📊 Progress: 26/31 (83.9%)
[2025-10-16T11:03:06.610Z] [LOG] 
🧮 Processing: customer null (EMP000036)
[2025-10-16T11:03:06.611Z] [LOG] 📋 Record ID: c08fde69-5de4-4506-b9d0-ccbc13573b7d
[2025-10-16T11:03:06.611Z] [LOG] 
======================================================================
[2025-10-16T11:03:06.612Z] [LOG] 🧮 CALCULATING PAYROLL: customer null (EMP000036)
[2025-10-16T11:03:06.612Z] [LOG] ======================================================================
[2025-10-16T11:03:06.661Z] [LOG] Created payroll_record_component: 4dca4bfe-c4ae-4e99-974f-0443bcf1e0dc for Attendance Deduction
[2025-10-16T11:03:07.144Z] [LOG] ✅ Financial balances updated successfully for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:07.144Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:03:07.144Z] [LOG] 
======================================================================
[2025-10-16T11:03:07.145Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: R. D.A Kaushalya null
[2025-10-16T11:03:07.145Z] [LOG] ======================================================================
[2025-10-16T11:03:07.145Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:03:07.145Z] [LOG]    Total Deductions: Rs.1836.06
[2025-10-16T11:03:07.146Z] [LOG]       - Attendance Deduction: Rs.1836.06
[2025-10-16T11:03:07.146Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:03:07.146Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:03:07.147Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:03:07.147Z] [LOG]    NET SALARY: Rs.48163.94
[2025-10-16T11:03:07.147Z] [LOG] ======================================================================

[2025-10-16T11:03:07.148Z] [LOG] ✅ R. D.A Kaushalya null: Calculation completed successfully
[2025-10-16T11:03:07.148Z] [LOG] 📊 Progress: 30/34 (88.2%)
[2025-10-16T11:03:07.148Z] [LOG] 
🧮 Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-16T11:03:07.149Z] [LOG] 📋 Record ID: 252943a1-bf77-492a-bb33-7236ef91cf91
[2025-10-16T11:03:07.149Z] [LOG] 
======================================================================
[2025-10-16T11:03:07.149Z] [LOG] 🧮 CALCULATING PAYROLL: Nimdiya Ranasinghe null (EMP000045)
[2025-10-16T11:03:07.150Z] [LOG] ======================================================================
[2025-10-16T11:03:07.537Z] [LOG] 🔍 Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-16T11:03:07.538Z] [LOG]    Total components: 9
[2025-10-16T11:03:07.539Z] [LOG]    Applicable components: 9
[2025-10-16T11:03:07.540Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-16T11:03:08.112Z] [LOG] 🔍 Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-16T11:03:08.113Z] [LOG]    Total components: 9
[2025-10-16T11:03:08.113Z] [LOG]    Applicable components: 9
[2025-10-16T11:03:08.114Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T11:03:08.469Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:03:08.470Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:03:08.695Z] [LOG] 📊 Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:08.923Z] [LOG] 📊 Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:09.150Z] [LOG] 📊 Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:09.150Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:03:09.151Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:03:09.151Z] [LOG] 💰 GROSS CALCULATION for customer null:
[2025-10-16T11:03:09.152Z] [LOG]    Base Salary: 0
[2025-10-16T11:03:09.152Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:03:09.384Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:03:09.619Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:03:09.620Z] [LOG]    Employee ID: 014409a2-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:09.620Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:03:09.621Z] [LOG]    Base Salary: Rs.0.00
[2025-10-16T11:03:09.849Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:03:09.849Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-16T11:03:09.850Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-16T11:03:09.850Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-16T11:03:09.850Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:03:10.082Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:03:10.083Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T11:03:10.083Z] [LOG]       Saturday: 0.00h
[2025-10-16T11:03:10.084Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:03:10.084Z] [LOG]       Total Worked: 0.00h
[2025-10-16T11:03:10.084Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:03:10.085Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:10.085Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:10.085Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:10.086Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:10.086Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T11:03:10.086Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:03:10.087Z] [LOG]       Base Salary: Rs.0.00
[2025-10-16T11:03:10.087Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T11:03:10.087Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:10.088Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-16T11:03:10.088Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-16T11:03:10.088Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:03:10.090Z] [LOG]    Gross Salary: 0
[2025-10-16T11:03:10.090Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:03:10.091Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:03:10.091Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:10.092Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:03:10.092Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:10.092Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:03:10.093Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:10.093Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:03:10.093Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:10.094Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:03:10.094Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:10.094Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:03:10.094Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:10.095Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:03:10.095Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:10.095Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:03:10.095Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:10.096Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:03:10.096Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:10.097Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:03:10.097Z] [LOG] Regular deductions for customer null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:03:10.097Z] [LOG] Combined deductions for customer null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 0
}
[2025-10-16T11:03:10.450Z] [LOG] Creating components for record c08fde69-5de4-4506-b9d0-ccbc13573b7d: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:03:10.451Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-16T11:03:10.680Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:03:10.921Z] [LOG] Created payroll_record_component: ac5ef46b-c278-40e7-881e-d33df77cbd43 for Attendance Deduction
[2025-10-16T11:03:11.401Z] [LOG] ✅ Financial balances updated successfully for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:11.402Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:03:11.402Z] [LOG] 
======================================================================
[2025-10-16T11:03:11.402Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: customer null
[2025-10-16T11:03:11.403Z] [LOG] ======================================================================
[2025-10-16T11:03:11.403Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-16T11:03:11.403Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-16T11:03:11.403Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-16T11:03:11.403Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:03:11.404Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:03:11.404Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:03:11.404Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T11:03:11.404Z] [LOG] ======================================================================

[2025-10-16T11:03:11.405Z] [LOG] ✅ customer null: Calculation completed successfully
[2025-10-16T11:03:11.405Z] [LOG] 📊 Progress: 27/31 (87.1%)
[2025-10-16T11:03:11.405Z] [LOG] 
🧮 Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-16T11:03:11.406Z] [LOG] 📋 Record ID: cb268127-a7bc-42ca-8b92-3136b15784f9
[2025-10-16T11:03:11.407Z] [LOG] 
======================================================================
[2025-10-16T11:03:11.407Z] [LOG] 🧮 CALCULATING PAYROLL: Ruvindu Hewabandu null (EMP000027)
[2025-10-16T11:03:11.408Z] [LOG] ======================================================================
[2025-10-16T11:03:12.404Z] [LOG] 🔍 Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-16T11:03:12.404Z] [LOG]    Total components: 9
[2025-10-16T11:03:12.405Z] [LOG]    Applicable components: 9
[2025-10-16T11:03:12.406Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-16T11:03:13.591Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:03:13.593Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:03:13.863Z] [LOG] 📊 Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:14.089Z] [LOG] 📊 Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:14.332Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:14.333Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:03:14.334Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:03:14.335Z] [LOG] 💰 GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-16T11:03:14.336Z] [LOG]    Base Salary: 0
[2025-10-16T11:03:14.336Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:03:14.579Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:03:14.805Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:03:14.807Z] [LOG]    Employee ID: 0143e915-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:14.808Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:03:14.809Z] [LOG]    Base Salary: Rs.0.00
[2025-10-16T11:03:15.044Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:03:15.045Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-16T11:03:15.045Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-16T11:03:15.045Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-16T11:03:15.046Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:03:15.361Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:03:15.361Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T11:03:15.362Z] [LOG]       Saturday: 0.00h
[2025-10-16T11:03:15.362Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:03:15.362Z] [LOG]       Total Worked: 0.00h
[2025-10-16T11:03:15.363Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:03:15.363Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:15.364Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:15.364Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:15.365Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:15.365Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T11:03:15.365Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:03:15.366Z] [LOG]       Base Salary: Rs.0.00
[2025-10-16T11:03:15.366Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T11:03:15.367Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:15.367Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-16T11:03:15.368Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-16T11:03:15.368Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:03:15.368Z] [LOG]    Gross Salary: 0
[2025-10-16T11:03:15.369Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:03:15.369Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:03:15.370Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:15.370Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:03:15.371Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:15.372Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:03:15.372Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:15.373Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:03:15.375Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:15.377Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:03:15.379Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:15.379Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:03:15.380Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:15.380Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:03:15.380Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:15.381Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:03:15.381Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:15.382Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:03:15.382Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:15.382Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:03:15.383Z] [LOG] Regular deductions for Ruvindu Hewabandu null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:03:15.383Z] [LOG] Combined deductions for Ruvindu Hewabandu null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 0
}
[2025-10-16T11:03:15.720Z] [LOG] Creating components for record cb268127-a7bc-42ca-8b92-3136b15784f9: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:03:15.721Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-16T11:03:15.967Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:03:16.205Z] [LOG] Created payroll_record_component: 6e98274c-5e7a-415b-9d2b-d7cfb20ee0aa for Attendance Deduction
[2025-10-16T11:03:16.595Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:03:16.595Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:03:16.826Z] [LOG] ✅ Financial balances updated successfully for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:16.826Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:03:16.827Z] [LOG] 
======================================================================
[2025-10-16T11:03:16.828Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ruvindu Hewabandu null
[2025-10-16T11:03:16.829Z] [LOG] ======================================================================
[2025-10-16T11:03:16.829Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-16T11:03:16.830Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-16T11:03:16.830Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-16T11:03:16.831Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:03:16.831Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:03:16.832Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:03:16.833Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T11:03:16.834Z] [LOG] ======================================================================

[2025-10-16T11:03:16.835Z] [LOG] ✅ Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-16T11:03:16.836Z] [LOG] 📊 Progress: 28/31 (90.3%)
[2025-10-16T11:03:16.837Z] [LOG] 
🧮 Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-16T11:03:16.839Z] [LOG] 📋 Record ID: db0d41cd-e8f7-4f3c-b88b-d808e1fb9ced
[2025-10-16T11:03:16.843Z] [LOG] 
======================================================================
[2025-10-16T11:03:16.845Z] [LOG] 🧮 CALCULATING PAYROLL: Sujevan Selvaratnam null (EMP000026)
[2025-10-16T11:03:16.846Z] [LOG] ======================================================================
[2025-10-16T11:03:16.847Z] [LOG] 📊 Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:17.085Z] [LOG] 📊 Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:17.330Z] [LOG] 📊 Found 0 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:17.350Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:03:17.351Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:03:17.352Z] [LOG] 💰 GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-16T11:03:17.353Z] [LOG]    Base Salary: 35000
[2025-10-16T11:03:17.353Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:03:17.608Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:03:17.760Z] [LOG] 🔍 Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-16T11:03:17.761Z] [LOG]    Total components: 9
[2025-10-16T11:03:17.761Z] [LOG]    Applicable components: 9
[2025-10-16T11:03:17.761Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-16T11:03:17.844Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:03:17.844Z] [LOG]    Employee ID: 01444074-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:17.844Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:03:17.844Z] [LOG]    Base Salary: Rs.35000.00
[2025-10-16T11:03:18.082Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:03:18.083Z] [LOG]       Daily Salary: Rs.1400.00
[2025-10-16T11:03:18.083Z] [LOG]       Weekday Hourly Rate: Rs.164.71
[2025-10-16T11:03:18.083Z] [LOG]       Saturday Hourly Rate: Rs.311.11
[2025-10-16T11:03:18.083Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:03:18.359Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:03:18.360Z] [LOG]       Weekday (Mon-Fri): 147.82h
[2025-10-16T11:03:18.360Z] [LOG]       Saturday: 22.50h
[2025-10-16T11:03:18.360Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:03:18.361Z] [LOG]       Total Worked: 170.32h
[2025-10-16T11:03:18.361Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:03:18.362Z] [LOG]       Weekday: 147.82h × Rs.164.71 = Rs.24347.43
[2025-10-16T11:03:18.362Z] [LOG]       Saturday: 22.50h × Rs.311.11 = Rs.6999.98
[2025-10-16T11:03:18.363Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:18.363Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:18.363Z] [LOG]       Total Earned Salary: Rs.31347.41
[2025-10-16T11:03:18.364Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:03:18.364Z] [LOG]       Base Salary: Rs.35000.00
[2025-10-16T11:03:18.365Z] [LOG]       Earned Salary: Rs.31347.41
[2025-10-16T11:03:18.365Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:18.366Z] [LOG]       Attendance Deduction: Rs.3652.59
[2025-10-16T11:03:18.366Z] [LOG]       📉 Deduction is 10.44% of base salary
[2025-10-16T11:03:18.366Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:03:18.367Z] [LOG]    Gross Salary: 35000
[2025-10-16T11:03:18.368Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:03:18.368Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:03:18.369Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:18.370Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:03:18.371Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:18.371Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:03:18.372Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:18.372Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:03:18.375Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:18.378Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:03:18.379Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:18.379Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:03:18.379Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:18.380Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:03:18.380Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:18.381Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:03:18.381Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:18.382Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:03:18.382Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:18.382Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:03:18.383Z] [LOG] Regular deductions for Nimdiya Ranasinghe null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:03:18.385Z] [LOG] Combined deductions for Nimdiya Ranasinghe null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 3652.5927999999985,
      "details": "Based on worked hours (170.32h total)"
    }
  ],
  "total": 3652.5927999999985
}
[2025-10-16T11:03:18.636Z] [LOG] Creating components for record 252943a1-bf77-492a-bb33-7236ef91cf91: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:03:18.639Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 3652.5927999999985
}
[2025-10-16T11:03:18.680Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:03:18.681Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:03:18.873Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:03:18.935Z] [LOG] 📊 Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:19.117Z] [LOG] Created payroll_record_component: 78a76a57-61ba-4d66-afd0-a96f79de2cc4 for Attendance Deduction
[2025-10-16T11:03:19.173Z] [LOG] 📊 Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:19.404Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:19.405Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:03:19.406Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:03:19.408Z] [LOG] 💰 GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-16T11:03:19.409Z] [LOG]    Base Salary: 1
[2025-10-16T11:03:19.410Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:03:19.689Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:03:19.696Z] [LOG] ✅ Financial balances updated successfully for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:19.696Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:03:19.698Z] [LOG] 
======================================================================
[2025-10-16T11:03:19.700Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Nimdiya Ranasinghe null
[2025-10-16T11:03:19.701Z] [LOG] ======================================================================
[2025-10-16T11:03:19.703Z] [LOG]    Gross Salary: Rs.35000.00
[2025-10-16T11:03:19.704Z] [LOG]    Total Deductions: Rs.3652.59
[2025-10-16T11:03:19.704Z] [LOG]       - Attendance Deduction: Rs.3652.59
[2025-10-16T11:03:19.705Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:03:19.705Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:03:19.705Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:03:19.706Z] [LOG]    NET SALARY: Rs.31347.41
[2025-10-16T11:03:19.708Z] [LOG] ======================================================================

[2025-10-16T11:03:19.708Z] [LOG] ✅ Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-16T11:03:19.709Z] [LOG] 📊 Progress: 31/34 (91.2%)
[2025-10-16T11:03:19.710Z] [LOG] 
🧮 Processing: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-16T11:03:19.711Z] [LOG] 📋 Record ID: b34f52d5-6351-4d00-b0f9-26d92e0aca24
[2025-10-16T11:03:19.712Z] [LOG] 
======================================================================
[2025-10-16T11:03:19.712Z] [LOG] 🧮 CALCULATING PAYROLL: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-16T11:03:19.713Z] [LOG] ======================================================================
[2025-10-16T11:03:19.983Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:03:19.984Z] [LOG]    Employee ID: 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:19.984Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:03:19.985Z] [LOG]    Base Salary: Rs.1.00
[2025-10-16T11:03:20.249Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:03:20.250Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-16T11:03:20.250Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-16T11:03:20.250Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-16T11:03:20.251Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:03:20.477Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:03:20.478Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T11:03:20.478Z] [LOG]       Saturday: 0.00h
[2025-10-16T11:03:20.479Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:03:20.479Z] [LOG]       Total Worked: 0.00h
[2025-10-16T11:03:20.480Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:03:20.481Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:20.481Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:20.482Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:20.482Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:20.483Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T11:03:20.483Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:03:20.485Z] [LOG]       Base Salary: Rs.1.00
[2025-10-16T11:03:20.486Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T11:03:20.487Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:20.487Z] [LOG]       Attendance Deduction: Rs.1.00
[2025-10-16T11:03:20.488Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-16T11:03:20.489Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:03:20.497Z] [LOG]    Gross Salary: 1
[2025-10-16T11:03:20.497Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:03:20.498Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:03:20.498Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:20.499Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:03:20.499Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:20.500Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:03:20.500Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:20.501Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:03:20.501Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:20.502Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:03:20.502Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:20.502Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:03:20.503Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:20.503Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:03:20.503Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:20.503Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:03:20.504Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:20.504Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:03:20.504Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:20.505Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:03:20.505Z] [LOG] Regular deductions for Sujevan Selvaratnam null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:03:20.505Z] [LOG] Combined deductions for Sujevan Selvaratnam null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 1
}
[2025-10-16T11:03:20.743Z] [LOG] Creating components for record db0d41cd-e8f7-4f3c-b88b-d808e1fb9ced: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:03:20.745Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1
}
[2025-10-16T11:03:20.748Z] [LOG] 🔍 Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-16T11:03:20.749Z] [LOG]    Total components: 9
[2025-10-16T11:03:20.749Z] [LOG]    Applicable components: 9
[2025-10-16T11:03:20.750Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T11:03:20.991Z] [LOG] GET /api/payroll-runs/live/all?month=10&year=2025 - 200 - 19458ms
[2025-10-16T11:03:21.039Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:03:21.274Z] [LOG] Created payroll_record_component: 26e6ce93-3c19-408c-bd3e-415e5c528eeb for Attendance Deduction
[2025-10-16T11:03:21.770Z] [LOG] ✅ Financial balances updated successfully for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:21.771Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:03:21.771Z] [LOG] 
======================================================================
[2025-10-16T11:03:21.771Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sujevan Selvaratnam null
[2025-10-16T11:03:21.772Z] [LOG] ======================================================================
[2025-10-16T11:03:21.772Z] [LOG]    Gross Salary: Rs.1.00
[2025-10-16T11:03:21.774Z] [LOG]    Total Deductions: Rs.1.00
[2025-10-16T11:03:21.774Z] [LOG]       - Attendance Deduction: Rs.1.00
[2025-10-16T11:03:21.775Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:03:21.775Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:03:21.776Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:03:21.776Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T11:03:21.777Z] [LOG] ======================================================================

[2025-10-16T11:03:21.778Z] [LOG] ✅ Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-16T11:03:21.778Z] [LOG] 📊 Progress: 29/31 (93.5%)
[2025-10-16T11:03:21.779Z] [LOG] 
🧮 Processing: Dharshika null (EMP000009)
[2025-10-16T11:03:21.779Z] [LOG] 📋 Record ID: db9d9a20-20f7-49d9-8667-0ccaf018ddd6
[2025-10-16T11:03:21.780Z] [LOG] 
======================================================================
[2025-10-16T11:03:21.781Z] [LOG] 🧮 CALCULATING PAYROLL: Dharshika null (EMP000009)
[2025-10-16T11:03:21.781Z] [LOG] ======================================================================
[2025-10-16T11:03:22.935Z] [LOG] 🔍 Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-16T11:03:22.936Z] [LOG]    Total components: 9
[2025-10-16T11:03:22.936Z] [LOG]    Applicable components: 9
[2025-10-16T11:03:22.937Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-16T11:03:30.676Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:03:30.677Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:03:30.908Z] [LOG] 📊 Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:31.140Z] [LOG] 📊 Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:31.370Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:31.371Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:03:31.372Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:03:31.372Z] [LOG] 💰 GROSS CALCULATION for Dharshika null:
[2025-10-16T11:03:31.373Z] [LOG]    Base Salary: 100000
[2025-10-16T11:03:31.374Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:03:31.462Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:03:31.464Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:03:31.647Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:03:31.702Z] [LOG] 📊 Found 0 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:31.873Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:03:31.874Z] [LOG]    Employee ID: 0143a994-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:31.874Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:03:31.875Z] [LOG]    Base Salary: Rs.100000.00
[2025-10-16T11:03:31.964Z] [LOG] 📊 Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:32.102Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:03:32.103Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-16T11:03:32.104Z] [LOG]       Weekday Hourly Rate: Rs.470.59
[2025-10-16T11:03:32.104Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-16T11:03:32.105Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:03:32.197Z] [LOG] 📊 Found 0 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:32.197Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:03:32.199Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:03:32.199Z] [LOG] 💰 GROSS CALCULATION for Ashen Nirmal Wadugodapitiya null:
[2025-10-16T11:03:32.200Z] [LOG]    Base Salary: 50000
[2025-10-16T11:03:32.200Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:03:32.335Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:03:32.337Z] [LOG]       Weekday (Mon-Fri): 138.73h
[2025-10-16T11:03:32.337Z] [LOG]       Saturday: 11.06h
[2025-10-16T11:03:32.337Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:03:32.337Z] [LOG]       Total Worked: 149.79h
[2025-10-16T11:03:32.337Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:03:32.338Z] [LOG]       Weekday: 138.73h × Rs.470.59 = Rs.65284.95
[2025-10-16T11:03:32.338Z] [LOG]       Saturday: 11.06h × Rs.888.89 = Rs.9831.12
[2025-10-16T11:03:32.338Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:32.338Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:32.338Z] [LOG]       Total Earned Salary: Rs.75116.07
[2025-10-16T11:03:32.339Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:03:32.339Z] [LOG]       Base Salary: Rs.100000.00
[2025-10-16T11:03:32.340Z] [LOG]       Earned Salary: Rs.75116.07
[2025-10-16T11:03:32.340Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:32.340Z] [LOG]       Attendance Deduction: Rs.24883.93
[2025-10-16T11:03:32.340Z] [LOG]       📉 Deduction is 24.88% of base salary
[2025-10-16T11:03:32.341Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:03:32.341Z] [LOG]    Gross Salary: 100000
[2025-10-16T11:03:32.341Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:03:32.341Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:03:32.342Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:32.342Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:03:32.344Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:32.344Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:03:32.344Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:32.345Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:03:32.345Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:32.346Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:03:32.346Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:32.346Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:03:32.347Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:32.347Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:03:32.347Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:32.348Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:03:32.348Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:32.348Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:03:32.349Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:32.349Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:03:32.349Z] [LOG] Regular deductions for Dharshika null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:03:32.350Z] [LOG] Combined deductions for Dharshika null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 24883.925900000002,
      "details": "Based on worked hours (149.79h total)"
    }
  ],
  "total": 24883.925900000002
}
[2025-10-16T11:03:32.433Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:03:32.583Z] [LOG] Creating components for record db9d9a20-20f7-49d9-8667-0ccaf018ddd6: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:03:32.584Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 24883.925900000002
}
[2025-10-16T11:03:32.666Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:03:32.666Z] [LOG]    Employee ID: 0144461e-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:32.667Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:03:32.667Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:03:32.811Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:03:32.900Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:03:32.901Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:03:32.901Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:03:32.902Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-16T11:03:32.903Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:03:33.037Z] [LOG] Created payroll_record_component: b2b43e75-247e-4492-a9d6-522be8fb598c for Attendance Deduction
[2025-10-16T11:03:33.137Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:03:33.137Z] [LOG]       Weekday (Mon-Fri): 152.20h
[2025-10-16T11:03:33.138Z] [LOG]       Saturday: 22.50h
[2025-10-16T11:03:33.138Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:03:33.139Z] [LOG]       Total Worked: 174.70h
[2025-10-16T11:03:33.139Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:03:33.140Z] [LOG]       Weekday: 152.20h × Rs.235.29 = Rs.35811.14
[2025-10-16T11:03:33.141Z] [LOG]       Saturday: 22.50h × Rs.444.44 = Rs.9999.90
[2025-10-16T11:03:33.141Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:33.142Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:33.143Z] [LOG]       Total Earned Salary: Rs.45811.04
[2025-10-16T11:03:33.143Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:03:33.144Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:03:33.145Z] [LOG]       Earned Salary: Rs.45811.04
[2025-10-16T11:03:33.145Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:33.146Z] [LOG]       Attendance Deduction: Rs.4188.96
[2025-10-16T11:03:33.147Z] [LOG]       📉 Deduction is 8.38% of base salary
[2025-10-16T11:03:33.148Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:03:33.149Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:03:33.150Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:03:33.151Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:03:33.151Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:33.152Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:03:33.153Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:33.153Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:03:33.154Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:33.155Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:03:33.155Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:33.156Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:03:33.157Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:33.157Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:03:33.158Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:33.158Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:03:33.159Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:33.161Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:03:33.162Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:33.162Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:03:33.163Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:33.163Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:03:33.163Z] [LOG] Regular deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:03:33.164Z] [LOG] Combined deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 4188.9619999999995,
      "details": "Based on worked hours (174.7h total)"
    }
  ],
  "total": 4188.9619999999995
}
[2025-10-16T11:03:33.402Z] [LOG] Creating components for record b34f52d5-6351-4d00-b0f9-26d92e0aca24: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:03:33.404Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 4188.9619999999995
}
[2025-10-16T11:03:33.497Z] [LOG] ✅ Financial balances updated successfully for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:33.498Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:03:33.499Z] [LOG] 
======================================================================
[2025-10-16T11:03:33.499Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Dharshika null
[2025-10-16T11:03:33.500Z] [LOG] ======================================================================
[2025-10-16T11:03:33.500Z] [LOG]    Gross Salary: Rs.100000.00
[2025-10-16T11:03:33.501Z] [LOG]    Total Deductions: Rs.24883.93
[2025-10-16T11:03:33.502Z] [LOG]       - Attendance Deduction: Rs.24883.93
[2025-10-16T11:03:33.502Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:03:33.503Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:03:33.503Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:03:33.504Z] [LOG]    NET SALARY: Rs.75116.07
[2025-10-16T11:03:33.505Z] [LOG] ======================================================================

[2025-10-16T11:03:33.505Z] [LOG] ✅ Dharshika null: Calculation completed successfully
[2025-10-16T11:03:33.506Z] [LOG] 📊 Progress: 30/31 (96.8%)
[2025-10-16T11:03:33.507Z] [LOG] 
🧮 Processing: Maryam null (EMP000035)
[2025-10-16T11:03:33.508Z] [LOG] 📋 Record ID: dbad8f2a-5664-499a-aacc-dc6ea6eb8cd1
[2025-10-16T11:03:33.511Z] [LOG] 
======================================================================
[2025-10-16T11:03:33.512Z] [LOG] 🧮 CALCULATING PAYROLL: Maryam null (EMP000035)
[2025-10-16T11:03:33.512Z] [LOG] ======================================================================
[2025-10-16T11:03:33.638Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:03:33.873Z] [LOG] Created payroll_record_component: 598d2934-f939-4a79-9d9c-219826a9ac5b for Attendance Deduction
[2025-10-16T11:03:34.344Z] [LOG] ✅ Financial balances updated successfully for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:34.345Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:03:34.345Z] [LOG] 
======================================================================
[2025-10-16T11:03:34.346Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ashen Nirmal Wadugodapitiya null
[2025-10-16T11:03:34.347Z] [LOG] ======================================================================
[2025-10-16T11:03:34.347Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:03:34.348Z] [LOG]    Total Deductions: Rs.4188.96
[2025-10-16T11:03:34.348Z] [LOG]       - Attendance Deduction: Rs.4188.96
[2025-10-16T11:03:34.349Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:03:34.349Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:03:34.350Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:03:34.351Z] [LOG]    NET SALARY: Rs.45811.04
[2025-10-16T11:03:34.351Z] [LOG] ======================================================================

[2025-10-16T11:03:34.352Z] [LOG] ✅ Ashen Nirmal Wadugodapitiya null: Calculation completed successfully
[2025-10-16T11:03:34.352Z] [LOG] 📊 Progress: 32/34 (94.1%)
[2025-10-16T11:03:34.353Z] [LOG] 
🧮 Processing: Ratheeshanan null (EMP000047)
[2025-10-16T11:03:34.354Z] [LOG] 📋 Record ID: 931efbc3-9457-4245-94cd-a09c66a6da53
[2025-10-16T11:03:34.355Z] [LOG] 
======================================================================
[2025-10-16T11:03:34.362Z] [LOG] 🧮 CALCULATING PAYROLL: Ratheeshanan null (EMP000047)
[2025-10-16T11:03:34.362Z] [LOG] ======================================================================
[2025-10-16T11:03:34.419Z] [LOG] 🔍 Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-16T11:03:34.420Z] [LOG]    Total components: 9
[2025-10-16T11:03:34.420Z] [LOG]    Applicable components: 9
[2025-10-16T11:03:34.420Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-16T11:03:35.313Z] [LOG] 🔍 Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-16T11:03:35.313Z] [LOG]    Total components: 9
[2025-10-16T11:03:35.314Z] [LOG]    Applicable components: 9
[2025-10-16T11:03:35.314Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-16T11:03:39.103Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:03:39.104Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:03:39.342Z] [LOG] 📊 Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:39.608Z] [LOG] 📊 Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:39.876Z] [LOG] 📊 Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:39.876Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:03:39.877Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:03:39.878Z] [LOG] 💰 GROSS CALCULATION for Ratheeshanan null:
[2025-10-16T11:03:39.879Z] [LOG]    Base Salary: 25000
[2025-10-16T11:03:39.879Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:03:40.167Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:03:40.501Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:03:40.502Z] [LOG]    Employee ID: 01444966-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:40.502Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:03:40.503Z] [LOG]    Base Salary: Rs.25000.00
[2025-10-16T11:03:40.764Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:03:40.764Z] [LOG]       Daily Salary: Rs.1000.00
[2025-10-16T11:03:40.765Z] [LOG]       Weekday Hourly Rate: Rs.117.65
[2025-10-16T11:03:40.765Z] [LOG]       Saturday Hourly Rate: Rs.222.22
[2025-10-16T11:03:40.766Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:03:41.000Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:03:41.000Z] [LOG]       Weekday (Mon-Fri): 139.86h
[2025-10-16T11:03:41.001Z] [LOG]       Saturday: 22.50h
[2025-10-16T11:03:41.001Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:03:41.002Z] [LOG]       Total Worked: 162.36h
[2025-10-16T11:03:41.003Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:03:41.003Z] [LOG]       Weekday: 139.86h × Rs.117.65 = Rs.16454.53
[2025-10-16T11:03:41.004Z] [LOG]       Saturday: 22.50h × Rs.222.22 = Rs.4999.95
[2025-10-16T11:03:41.005Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:41.005Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:41.006Z] [LOG]       Total Earned Salary: Rs.21454.48
[2025-10-16T11:03:41.006Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:03:41.007Z] [LOG]       Base Salary: Rs.25000.00
[2025-10-16T11:03:41.008Z] [LOG]       Earned Salary: Rs.21454.48
[2025-10-16T11:03:41.009Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:41.009Z] [LOG]       Attendance Deduction: Rs.3545.52
[2025-10-16T11:03:41.010Z] [LOG]       📉 Deduction is 14.18% of base salary
[2025-10-16T11:03:41.011Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:03:41.012Z] [LOG]    Gross Salary: 25000
[2025-10-16T11:03:41.013Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:03:41.014Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:03:41.014Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:41.015Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:03:41.016Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:41.016Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:03:41.017Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:41.017Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:03:41.018Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:41.019Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:03:41.019Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:41.020Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:03:41.021Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:41.021Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:03:41.022Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:41.022Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:03:41.023Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:41.024Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:03:41.025Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:41.026Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:03:41.026Z] [LOG] Regular deductions for Ratheeshanan null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:03:41.028Z] [LOG] Combined deductions for Ratheeshanan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 3545.520999999997,
      "details": "Based on worked hours (162.36h total)"
    }
  ],
  "total": 3545.520999999997
}
[2025-10-16T11:03:41.291Z] [LOG] Creating components for record 931efbc3-9457-4245-94cd-a09c66a6da53: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:03:41.292Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 3545.520999999997
}
[2025-10-16T11:03:41.525Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:03:41.764Z] [LOG] Created payroll_record_component: a14b3b57-807c-492f-9bf6-008ff58e551b for Attendance Deduction
[2025-10-16T11:03:42.241Z] [LOG] ✅ Financial balances updated successfully for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:42.242Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:03:42.242Z] [LOG] 
======================================================================
[2025-10-16T11:03:42.243Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ratheeshanan null
[2025-10-16T11:03:42.243Z] [LOG] ======================================================================
[2025-10-16T11:03:42.244Z] [LOG]    Gross Salary: Rs.25000.00
[2025-10-16T11:03:42.245Z] [LOG]    Total Deductions: Rs.3545.52
[2025-10-16T11:03:42.245Z] [LOG]       - Attendance Deduction: Rs.3545.52
[2025-10-16T11:03:42.246Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:03:42.246Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:03:42.247Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:03:42.247Z] [LOG]    NET SALARY: Rs.21454.48
[2025-10-16T11:03:42.248Z] [LOG] ======================================================================

[2025-10-16T11:03:42.249Z] [LOG] ✅ Ratheeshanan null: Calculation completed successfully
[2025-10-16T11:03:42.250Z] [LOG] 📊 Progress: 33/34 (97.1%)
[2025-10-16T11:03:42.250Z] [LOG] 
🧮 Processing: Kaushal Thambi (EMP465256103)
[2025-10-16T11:03:42.251Z] [LOG] 📋 Record ID: 5b41047a-92ba-4344-9921-7bd801e215ea
[2025-10-16T11:03:42.252Z] [LOG] 
======================================================================
[2025-10-16T11:03:42.253Z] [LOG] 🧮 CALCULATING PAYROLL: Kaushal Thambi (EMP465256103)
[2025-10-16T11:03:42.255Z] [LOG] ======================================================================
[2025-10-16T11:03:42.584Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:03:42.585Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:03:42.818Z] [LOG] 📊 Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:43.088Z] [LOG] 📊 Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:43.217Z] [LOG] 🔍 Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-16T11:03:43.217Z] [LOG]    Total components: 9
[2025-10-16T11:03:43.218Z] [LOG]    Applicable components: 9
[2025-10-16T11:03:43.218Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-16T11:03:43.316Z] [LOG] 📊 Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:43.317Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:03:43.318Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:03:43.318Z] [LOG] 💰 GROSS CALCULATION for Maryam null:
[2025-10-16T11:03:43.319Z] [LOG]    Base Salary: 40000
[2025-10-16T11:03:43.320Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:03:43.547Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:03:43.774Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:03:43.775Z] [LOG]    Employee ID: 01440221-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:43.776Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:03:43.776Z] [LOG]    Base Salary: Rs.40000.00
[2025-10-16T11:03:44.004Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:03:44.005Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-16T11:03:44.006Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-16T11:03:44.006Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-16T11:03:44.007Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:03:44.162Z] [LOG] 
🔄 Processing financial records...
[2025-10-16T11:03:44.163Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-08-01 to 2025-08-31
[2025-10-16T11:03:44.235Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:03:44.235Z] [LOG]       Weekday (Mon-Fri): 148.07h
[2025-10-16T11:03:44.236Z] [LOG]       Saturday: 21.75h
[2025-10-16T11:03:44.236Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:03:44.237Z] [LOG]       Total Worked: 169.82h
[2025-10-16T11:03:44.237Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:03:44.238Z] [LOG]       Weekday: 148.07h × Rs.188.24 = Rs.27872.70
[2025-10-16T11:03:44.239Z] [LOG]       Saturday: 21.75h × Rs.355.56 = Rs.7733.43
[2025-10-16T11:03:44.240Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:44.242Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:44.243Z] [LOG]       Total Earned Salary: Rs.35606.13
[2025-10-16T11:03:44.243Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:03:44.244Z] [LOG]       Base Salary: Rs.40000.00
[2025-10-16T11:03:44.244Z] [LOG]       Earned Salary: Rs.35606.13
[2025-10-16T11:03:44.245Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:44.246Z] [LOG]       Attendance Deduction: Rs.4393.87
[2025-10-16T11:03:44.246Z] [LOG]       📉 Deduction is 10.98% of base salary
[2025-10-16T11:03:44.247Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:03:44.247Z] [LOG]    Gross Salary: 40000
[2025-10-16T11:03:44.248Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:03:44.248Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:03:44.249Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:44.250Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:03:44.250Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:44.251Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:03:44.251Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:44.252Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:03:44.252Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:44.253Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:03:44.254Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:44.254Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:03:44.255Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:44.255Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:03:44.256Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:44.256Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:03:44.257Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:44.258Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:03:44.258Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:44.259Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:03:44.259Z] [LOG] Regular deductions for Maryam null: {
  "components": [],
  "total": 0
}
[2025-10-16T11:03:44.260Z] [LOG] Combined deductions for Maryam null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 4393.873200000002,
      "details": "Based on worked hours (169.82h total)"
    }
  ],
  "total": 4393.873200000002
}
[2025-10-16T11:03:44.398Z] [LOG] 📊 Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-16T11:03:44.492Z] [LOG] Creating components for record dbad8f2a-5664-499a-aacc-dc6ea6eb8cd1: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:03:44.494Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 4393.873200000002
}
[2025-10-16T11:03:44.633Z] [LOG] 📊 Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-16T11:03:44.723Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:03:44.872Z] [LOG] 📊 Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-16T11:03:44.872Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-16T11:03:44.873Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-16T11:03:44.874Z] [LOG] 💰 GROSS CALCULATION for Kaushal Thambi:
[2025-10-16T11:03:44.875Z] [LOG]    Base Salary: 50000
[2025-10-16T11:03:44.875Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-16T11:03:44.965Z] [LOG] Created payroll_record_component: 85b3d717-243c-4c3e-9333-20e5d308531e for Attendance Deduction
[2025-10-16T11:03:45.107Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-16T11:03:45.339Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-16T11:03:45.340Z] [LOG]    Employee ID: 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-16T11:03:45.341Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-16T11:03:45.341Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-16T11:03:45.422Z] [LOG] ✅ Financial balances updated successfully for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-16T11:03:45.423Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:03:45.424Z] [LOG] 
======================================================================
[2025-10-16T11:03:45.425Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Maryam null
[2025-10-16T11:03:45.425Z] [LOG] ======================================================================
[2025-10-16T11:03:45.426Z] [LOG]    Gross Salary: Rs.40000.00
[2025-10-16T11:03:45.426Z] [LOG]    Total Deductions: Rs.4393.87
[2025-10-16T11:03:45.427Z] [LOG]       - Attendance Deduction: Rs.4393.87
[2025-10-16T11:03:45.428Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:03:45.428Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:03:45.429Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:03:45.430Z] [LOG]    NET SALARY: Rs.35606.13
[2025-10-16T11:03:45.430Z] [LOG] ======================================================================

[2025-10-16T11:03:45.431Z] [LOG] ✅ Maryam null: Calculation completed successfully
[2025-10-16T11:03:45.431Z] [LOG] 📊 Progress: 31/31 (100.0%)
[2025-10-16T11:03:45.432Z] [LOG] 
============================================================
[2025-10-16T11:03:45.433Z] [LOG] 📈 Processing Summary: 31 successful, 0 failed
[2025-10-16T11:03:45.575Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-16T11:03:45.576Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-16T11:03:45.576Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-16T11:03:45.577Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-16T11:03:45.578Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-16T11:03:45.812Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-16T11:03:45.813Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-16T11:03:45.813Z] [LOG]       Saturday: 0.00h
[2025-10-16T11:03:45.814Z] [LOG]       Sunday: 0.00h
[2025-10-16T11:03:45.814Z] [LOG]       Total Worked: 0.00h
[2025-10-16T11:03:45.815Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-16T11:03:45.816Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:03:45.816Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-16T11:03:45.817Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-16T11:03:45.817Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:45.818Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-16T11:03:45.819Z] [LOG] 
   📊 Final Calculation:
[2025-10-16T11:03:45.820Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-16T11:03:45.820Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-16T11:03:45.821Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-16T11:03:45.822Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-16T11:03:45.824Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-16T11:03:45.828Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-16T11:03:45.829Z] [LOG]    Gross Salary: 50000
[2025-10-16T11:03:45.829Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-16T11:03:45.830Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-16T11:03:45.830Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:45.831Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-16T11:03:45.832Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:45.832Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-16T11:03:45.834Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:45.834Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-16T11:03:45.835Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:45.835Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-16T11:03:45.836Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:45.836Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-16T11:03:45.837Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:45.837Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-16T11:03:45.838Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:45.839Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-16T11:03:45.842Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:45.843Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-16T11:03:45.844Z] [LOG]    Fixed amount: 0
[2025-10-16T11:03:45.844Z] [LOG]    📊 Total Deductions: 0
[2025-10-16T11:03:45.845Z] [LOG] Regular deductions for Kaushal Thambi: {
  "components": [],
  "total": 0
}
[2025-10-16T11:03:45.846Z] [LOG] Combined deductions for Kaushal Thambi: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-16T11:03:46.085Z] [LOG] Creating components for record 5b41047a-92ba-4344-9921-7bd801e215ea: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-16T11:03:46.085Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-16T11:03:46.323Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-16T11:03:46.560Z] [LOG] Created payroll_record_component: 41b9ed9f-8f28-4aa3-9a7c-4ecb88c3f9a5 for Attendance Deduction
[2025-10-16T11:03:47.027Z] [LOG] ✅ Financial balances updated successfully for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-16T11:03:47.027Z] [LOG] ✅ Financial balances updated successfully
[2025-10-16T11:03:47.027Z] [LOG] 
======================================================================
[2025-10-16T11:03:47.027Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Kaushal Thambi
[2025-10-16T11:03:47.027Z] [LOG] ======================================================================
[2025-10-16T11:03:47.028Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-16T11:03:47.028Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-16T11:03:47.028Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-16T11:03:47.028Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-16T11:03:47.028Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-16T11:03:47.029Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-16T11:03:47.029Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-16T11:03:47.029Z] [LOG] ======================================================================

[2025-10-16T11:03:47.029Z] [LOG] ✅ Kaushal Thambi: Calculation completed successfully
[2025-10-16T11:03:47.029Z] [LOG] 📊 Progress: 34/34 (100.0%)
[2025-10-16T11:03:47.029Z] [LOG] 
============================================================
[2025-10-16T11:03:47.030Z] [LOG] 📈 Processing Summary: 34 successful, 0 failed
[2025-10-16T11:03:47.484Z] [LOG] 🎉 Payroll calculation completed successfully!
[2025-10-16T11:03:47.485Z] [LOG] 📊 Final Summary: 31 processed, 0 errors
[2025-10-16T11:03:47.486Z] [INFO] ================================================================================
[2025-10-16T11:03:47.486Z] [INFO] ⏰ Completed at: 2025-10-16T11:03:47.486Z
[2025-10-16T11:03:47.486Z] [INFO] 📊 Total log entries: 5562