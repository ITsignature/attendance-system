[2025-10-23T04:28:59.763Z] [INFO] 🚀 Payroll calculation logging started for run: bd7b15f5-2d1b-461c-b2c3-4c49738be1c8
[2025-10-23T04:28:59.763Z] [INFO] 📁 Log file: E:\smart_attendance_system\BackEnd\logs\payroll-run-bd7b15f5-2d1b-461c-b2c3-4c49738be1c8-2025-10-23T04-28-59-762Z.txt
[2025-10-23T04:28:59.763Z] [INFO] ⏰ Started at: 2025-10-23T04:28:59.763Z
[2025-10-23T04:28:59.763Z] [INFO] ================================================================================
[2025-10-23T04:28:59.763Z] [LOG] 🚀 Starting payroll calculation for run: bd7b15f5-2d1b-461c-b2c3-4c49738be1c8
[2025-10-23T04:28:59.763Z] [LOG] 👤 Client ID: it-signature, User ID: 059304ea-24a5-4d78-a290-cf09b9e53c4c
[2025-10-23T04:29:00.550Z] [LOG] ✅ Payroll run verified: October (MONTHLY_2025_10_REGULAR)
[2025-10-23T04:29:01.367Z] [LOG] 📊 Status updated to 'calculating'
[2025-10-23T04:29:04.109Z] [LOG] 👥 Processing 34 employee records:
[2025-10-23T04:29:04.109Z] [LOG] ============================================================
[2025-10-23T04:29:04.110Z] [LOG] 
🧮 Processing: Office Team null (EMP000041)
[2025-10-23T04:29:04.110Z] [LOG] 📋 Record ID: 006b3d2f-fb5f-4959-b8bd-a413aa740245
[2025-10-23T04:29:04.110Z] [LOG] 
======================================================================
[2025-10-23T04:29:04.111Z] [LOG] 🧮 CALCULATING PAYROLL: Office Team null (EMP000041)
[2025-10-23T04:29:04.111Z] [LOG] ======================================================================
[2025-10-23T04:29:07.802Z] [LOG] 🔍 Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-23T04:29:07.803Z] [LOG]    Total components: 11
[2025-10-23T04:29:07.803Z] [LOG]    Applicable components: 11
[2025-10-23T04:29:07.803Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T04:29:11.705Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:29:11.705Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:29:12.190Z] [LOG] 📊 Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:12.908Z] [LOG] 📊 Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:13.548Z] [LOG] 📊 Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:13.549Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:29:13.549Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:29:14.115Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:29:14.116Z] [LOG]    Employee ID: 01442b21-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:14.116Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:29:14.117Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:29:14.117Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-23T04:29:14.766Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:29:14.766Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-23T04:29:14.766Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-23T04:29:14.766Z] [LOG]       Saturday Hourly Rate: Rs.0.01
[2025-10-23T04:29:14.767Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:29:14.767Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:29:14.767Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:29:17.042Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:29:17.042Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:29:17.706Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:29:17.707Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:29:17.707Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:29:17.707Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:29:17.707Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:29:17.708Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:29:17.708Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:29:17.708Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:29:18.550Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:29:18.551Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:29:18.551Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:29:18.551Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:29:19.072Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:29:19.073Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:29:19.073Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:29:19.074Z] [LOG]       Current Time: 09:59:19
[2025-10-23T04:29:19.075Z] [LOG]       Expected Hours (scheduled → now): 1.49h
[2025-10-23T04:29:19.075Z] [LOG]       Actual Hours (check-in → now): 1.49h
[2025-10-23T04:29:19.075Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:29:19.075Z] [LOG]       Weekday: 120.49h
[2025-10-23T04:29:19.075Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:29:19.075Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:29:19.075Z] [LOG]       Total Expected: 133.99h
[2025-10-23T04:29:19.076Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:29:19.076Z] [LOG]       Weekday: 26.99h (includes 1.49h live)
[2025-10-23T04:29:19.076Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:29:19.076Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:29:19.076Z] [LOG]       Total Actual: 31.49h
[2025-10-23T04:29:19.076Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:29:19.076Z] [LOG]       Weekday: 120.49h × Rs.0.00 = Rs.0.00
[2025-10-23T04:29:19.076Z] [LOG]       Saturday: 13.50h × Rs.0.01 = Rs.0.14
[2025-10-23T04:29:19.077Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:29:19.077Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:29:19.077Z] [LOG]       Total Expected Earned: Rs.0.14
[2025-10-23T04:29:19.077Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:29:19.077Z] [LOG]       Weekday: 26.99h × Rs.0.00 = Rs.0.00
[2025-10-23T04:29:19.077Z] [LOG]       Saturday: 4.50h × Rs.0.01 = Rs.0.04
[2025-10-23T04:29:19.077Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:29:19.077Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:29:19.078Z] [LOG]       Total Actual Earned: Rs.0.04
[2025-10-23T04:29:19.078Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:29:19.079Z] [LOG]       Calculated At: Oct 23, 2025, 09:59:19
[2025-10-23T04:29:19.079Z] [LOG]       Expected Earned (until NOW): Rs.0.14
[2025-10-23T04:29:19.079Z] [LOG]       Actual Earned (until NOW): Rs.0.04
[2025-10-23T04:29:19.079Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:29:19.079Z] [LOG]       Attendance Deduction: Rs.0.09
[2025-10-23T04:29:19.079Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:29:19.079Z] [LOG]       📉 Shortfall: 102.50 hours (66.67% of expected)
[2025-10-23T04:29:19.079Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:29:19.079Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:29:19.080Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-23T04:29:19.080Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-23T04:29:19.080Z] [LOG]    Attendance Shortfall: Rs.0.09
[2025-10-23T04:29:19.080Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:29:19.080Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:29:19.080Z] [LOG]    Gross Salary: 0.045
[2025-10-23T04:29:19.080Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:29:19.080Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:29:19.080Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:19.080Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:29:19.080Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:19.080Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:29:19.081Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:19.081Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:29:19.081Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:19.081Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:29:19.081Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:19.081Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:29:19.081Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:19.081Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:29:19.081Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:19.081Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:29:19.081Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:19.081Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:29:19.081Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:19.082Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:29:19.082Z] [LOG]    EPF/ETF calculated on: Rs.0.04
[2025-10-23T04:29:19.082Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:29:19.082Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:29:19.082Z] [LOG] 💰 GROSS CALCULATION for Office Team null:
[2025-10-23T04:29:19.082Z] [LOG]    Base Salary: 1
[2025-10-23T04:29:19.082Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:29:19.082Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:29:19.082Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:19.082Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:29:19.082Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:20.084Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:29:20.084Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:29:20.084Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:29:20.085Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:29:20.085Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-23T04:29:20.085Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:29:20.085Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:29:20.085Z] [LOG]    = Gross Salary: Rs.0.04
[2025-10-23T04:29:20.085Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:29:20.086Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:29:20.086Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:29:20.086Z] [LOG]    Gross Salary: Rs.0.04
[2025-10-23T04:29:20.086Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:29:20.086Z] [LOG]    = NET SALARY: Rs.0.04
[2025-10-23T04:29:20.582Z] [LOG] Creating components for record 006b3d2f-fb5f-4959-b8bd-a413aa740245: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:29:20.583Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 0.045
}
[2025-10-23T04:29:21.239Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:29:21.879Z] [LOG] Created payroll_record_component: 346cf295-21cd-4860-9a6d-7cef966a14e6 for Base Salary (Attendance-based)
[2025-10-23T04:29:22.963Z] [LOG] ✅ Financial balances updated successfully for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:22.963Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:29:22.964Z] [LOG] 
======================================================================
[2025-10-23T04:29:22.964Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Office Team null
[2025-10-23T04:29:22.964Z] [LOG] ======================================================================
[2025-10-23T04:29:22.964Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-23T04:29:22.964Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.04
[2025-10-23T04:29:22.965Z] [LOG]    Attendance Shortfall: Rs.0.09
[2025-10-23T04:29:22.965Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:22.965Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:29:22.965Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:29:22.965Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:22.966Z] [LOG]    GROSS SALARY: Rs.0.04
[2025-10-23T04:29:22.966Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:22.966Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:29:22.966Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:29:22.966Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:29:22.966Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:29:22.967Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:22.967Z] [LOG]    NET SALARY: Rs.0.04
[2025-10-23T04:29:22.967Z] [LOG] ======================================================================

[2025-10-23T04:29:22.967Z] [LOG] ✅ Office Team null: Calculation completed successfully
[2025-10-23T04:29:22.967Z] [LOG] 📊 Progress: 1/34 (2.9%)
[2025-10-23T04:29:22.968Z] [LOG] 
🧮 Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-23T04:29:22.968Z] [LOG] 📋 Record ID: 12ff1eeb-d421-4b37-b10e-6e141526a283
[2025-10-23T04:29:22.968Z] [LOG] 
======================================================================
[2025-10-23T04:29:22.969Z] [LOG] 🧮 CALCULATING PAYROLL: Nimdiya Ranasinghe null (EMP000045)
[2025-10-23T04:29:22.969Z] [LOG] ======================================================================
[2025-10-23T04:29:24.275Z] [LOG] 🔍 Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-23T04:29:24.275Z] [LOG]    Total components: 11
[2025-10-23T04:29:24.275Z] [LOG]    Applicable components: 11
[2025-10-23T04:29:24.276Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T04:29:26.266Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:29:26.266Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:29:26.506Z] [LOG] 📊 Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:27.151Z] [LOG] 📊 Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:27.477Z] [LOG] 📊 Found 0 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:27.478Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:29:27.478Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:29:27.787Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:29:27.787Z] [LOG]    Employee ID: 01444074-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:27.787Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:29:27.788Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:29:27.788Z] [LOG]    Base Salary (Full Month): Rs.35000.00
[2025-10-23T04:29:28.108Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:29:28.108Z] [LOG]       Daily Salary: Rs.1400.00
[2025-10-23T04:29:28.108Z] [LOG]       Weekday Hourly Rate: Rs.164.71
[2025-10-23T04:29:28.109Z] [LOG]       Saturday Hourly Rate: Rs.311.11
[2025-10-23T04:29:28.109Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:29:28.109Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:29:28.109Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:29:29.573Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:29:29.573Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:29:29.878Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:29:29.878Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:29:29.878Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:29:29.879Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:29:29.879Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:29:29.879Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:29:29.879Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:29:29.879Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:29:30.242Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:29:30.243Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:29:30.243Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:29:30.243Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:29:30.533Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:29:30.533Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:29:30.533Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:29:30.534Z] [LOG]       Current Time: 09:59:30
[2025-10-23T04:29:30.535Z] [LOG]       Expected Hours (scheduled → now): 1.49h
[2025-10-23T04:29:30.535Z] [LOG]       Actual Hours (check-in → now): 1.49h
[2025-10-23T04:29:30.535Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:29:30.535Z] [LOG]       Weekday: 120.49h
[2025-10-23T04:29:30.535Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:29:30.536Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:29:30.536Z] [LOG]       Total Expected: 133.99h
[2025-10-23T04:29:30.536Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:29:30.536Z] [LOG]       Weekday: 26.99h (includes 1.49h live)
[2025-10-23T04:29:30.537Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:29:30.537Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:29:30.537Z] [LOG]       Total Actual: 31.49h
[2025-10-23T04:29:30.537Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:29:30.537Z] [LOG]       Weekday: 120.49h × Rs.164.71 = Rs.19846.21
[2025-10-23T04:29:30.538Z] [LOG]       Saturday: 13.50h × Rs.311.11 = Rs.4199.99
[2025-10-23T04:29:30.538Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:29:30.538Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:29:30.538Z] [LOG]       Total Expected Earned: Rs.24046.19
[2025-10-23T04:29:30.539Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:29:30.539Z] [LOG]       Weekday: 26.99h × Rs.164.71 = Rs.4445.82
[2025-10-23T04:29:30.539Z] [LOG]       Saturday: 4.50h × Rs.311.11 = Rs.1400.00
[2025-10-23T04:29:30.539Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:29:30.539Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:29:30.539Z] [LOG]       Total Actual Earned: Rs.5845.82
[2025-10-23T04:29:30.540Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:29:30.540Z] [LOG]       Calculated At: Oct 23, 2025, 09:59:30
[2025-10-23T04:29:30.540Z] [LOG]       Expected Earned (until NOW): Rs.24046.19
[2025-10-23T04:29:30.540Z] [LOG]       Actual Earned (until NOW): Rs.5845.82
[2025-10-23T04:29:30.540Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:29:30.540Z] [LOG]       Attendance Deduction: Rs.18200.38
[2025-10-23T04:29:30.540Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:29:30.540Z] [LOG]       📉 Shortfall: 102.50 hours (75.69% of expected)
[2025-10-23T04:29:30.541Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:29:30.541Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:29:30.541Z] [LOG]    Base Salary (Full): Rs.35000.00
[2025-10-23T04:29:30.541Z] [LOG]    Actual Earned Base: Rs.5845.82
[2025-10-23T04:29:30.541Z] [LOG]    Attendance Shortfall: Rs.18200.38
[2025-10-23T04:29:30.541Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:29:30.541Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:29:30.541Z] [LOG]    Gross Salary: 5845.816802897222
[2025-10-23T04:29:30.541Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:29:30.541Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:29:30.541Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:30.541Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:29:30.542Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:30.542Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:29:30.542Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:30.542Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:29:30.542Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:30.542Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:29:30.542Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:30.542Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:29:30.542Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:30.542Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:29:30.542Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:30.542Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:29:30.542Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:30.543Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:29:30.543Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:30.543Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:29:30.543Z] [LOG]    EPF/ETF calculated on: Rs.5845.82
[2025-10-23T04:29:30.543Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:29:30.543Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:29:30.543Z] [LOG] 💰 GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-23T04:29:30.543Z] [LOG]    Base Salary: 35000
[2025-10-23T04:29:30.543Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:29:30.543Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:29:30.544Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:30.544Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:29:30.544Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:30.785Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:29:30.785Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:29:30.786Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:29:30.786Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:29:30.786Z] [LOG]    Actual Earned Base: Rs.5845.82
[2025-10-23T04:29:30.787Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:29:30.787Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:29:30.787Z] [LOG]    = Gross Salary: Rs.5845.82
[2025-10-23T04:29:30.787Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:29:30.788Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:29:30.788Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:29:30.788Z] [LOG]    Gross Salary: Rs.5845.82
[2025-10-23T04:29:30.788Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:29:30.788Z] [LOG]    = NET SALARY: Rs.5845.82
[2025-10-23T04:29:31.039Z] [LOG] Creating components for record 12ff1eeb-d421-4b37-b10e-6e141526a283: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:29:31.040Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 5845.816802897222
}
[2025-10-23T04:29:31.313Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:29:31.586Z] [LOG] Created payroll_record_component: d00bde47-9f76-4f76-9844-51df5daee21b for Base Salary (Attendance-based)
[2025-10-23T04:29:32.108Z] [LOG] ✅ Financial balances updated successfully for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:32.108Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:29:32.108Z] [LOG] 
======================================================================
[2025-10-23T04:29:32.108Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Nimdiya Ranasinghe null
[2025-10-23T04:29:32.108Z] [LOG] ======================================================================
[2025-10-23T04:29:32.109Z] [LOG]    Base Salary (Full): Rs.35000.00
[2025-10-23T04:29:32.109Z] [LOG]    Actual Earned Base (Attendance-based): Rs.5845.82
[2025-10-23T04:29:32.109Z] [LOG]    Attendance Shortfall: Rs.18200.38
[2025-10-23T04:29:32.109Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:32.109Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:29:32.109Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:29:32.109Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:32.110Z] [LOG]    GROSS SALARY: Rs.5845.82
[2025-10-23T04:29:32.110Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:32.110Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:29:32.110Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:29:32.110Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:29:32.110Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:29:32.110Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:32.111Z] [LOG]    NET SALARY: Rs.5845.82
[2025-10-23T04:29:32.111Z] [LOG] ======================================================================

[2025-10-23T04:29:32.111Z] [LOG] ✅ Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-23T04:29:32.111Z] [LOG] 📊 Progress: 2/34 (5.9%)
[2025-10-23T04:29:32.111Z] [LOG] 
🧮 Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-23T04:29:32.111Z] [LOG] 📋 Record ID: 299861e6-044c-4f36-8809-c3d5a4e6df44
[2025-10-23T04:29:32.111Z] [LOG] 
======================================================================
[2025-10-23T04:29:32.112Z] [LOG] 🧮 CALCULATING PAYROLL: Viruna Damsiha Cooray null (EMP000038)
[2025-10-23T04:29:32.112Z] [LOG] ======================================================================
[2025-10-23T04:29:33.388Z] [LOG] 🔍 Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-23T04:29:33.389Z] [LOG]    Total components: 11
[2025-10-23T04:29:33.389Z] [LOG]    Applicable components: 11
[2025-10-23T04:29:33.389Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T04:29:35.467Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:29:35.467Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:29:35.788Z] [LOG] 📊 Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:36.027Z] [LOG] 📊 Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:36.276Z] [LOG] 📊 Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:36.277Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:29:36.277Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:29:36.589Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:29:36.589Z] [LOG]    Employee ID: 01441633-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:36.589Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:29:36.590Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:29:36.590Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T04:29:36.921Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:29:36.921Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T04:29:36.921Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T04:29:36.921Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T04:29:36.921Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:29:36.921Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:29:36.922Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:29:37.867Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:29:37.868Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:29:38.111Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:29:38.112Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:29:38.112Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:29:38.112Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:29:38.112Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:29:38.112Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:29:38.112Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:29:38.113Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:29:38.329Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:29:38.330Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:29:38.330Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:29:38.330Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:29:38.682Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:29:38.682Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:29:38.683Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:29:38.683Z] [LOG]       Current Time: 09:59:38
[2025-10-23T04:29:38.683Z] [LOG]       Expected Hours (scheduled → now): 1.49h
[2025-10-23T04:29:38.684Z] [LOG]       Actual Hours (check-in → now): 1.49h
[2025-10-23T04:29:38.684Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:29:38.684Z] [LOG]       Weekday: 120.49h
[2025-10-23T04:29:38.684Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:29:38.684Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:29:38.685Z] [LOG]       Total Expected: 133.99h
[2025-10-23T04:29:38.685Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:29:38.685Z] [LOG]       Weekday: 26.99h (includes 1.49h live)
[2025-10-23T04:29:38.685Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:29:38.685Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:29:38.685Z] [LOG]       Total Actual: 31.49h
[2025-10-23T04:29:38.686Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:29:38.686Z] [LOG]       Weekday: 120.49h × Rs.235.29 = Rs.28351.05
[2025-10-23T04:29:38.686Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T04:29:38.686Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:29:38.686Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:29:38.687Z] [LOG]       Total Expected Earned: Rs.34350.99
[2025-10-23T04:29:38.687Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:29:38.687Z] [LOG]       Weekday: 26.99h × Rs.235.29 = Rs.6351.44
[2025-10-23T04:29:38.687Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T04:29:38.687Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:29:38.687Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:29:38.688Z] [LOG]       Total Actual Earned: Rs.8351.42
[2025-10-23T04:29:38.688Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:29:38.688Z] [LOG]       Calculated At: Oct 23, 2025, 09:59:38
[2025-10-23T04:29:38.688Z] [LOG]       Expected Earned (until NOW): Rs.34350.99
[2025-10-23T04:29:38.688Z] [LOG]       Actual Earned (until NOW): Rs.8351.42
[2025-10-23T04:29:38.688Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:29:38.689Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T04:29:38.689Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:29:38.689Z] [LOG]       📉 Shortfall: 102.50 hours (75.69% of expected)
[2025-10-23T04:29:38.689Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:29:38.689Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:29:38.689Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:29:38.689Z] [LOG]    Actual Earned Base: Rs.8351.42
[2025-10-23T04:29:38.689Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T04:29:38.689Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:29:38.689Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:29:38.690Z] [LOG]    Gross Salary: 8351.41669105
[2025-10-23T04:29:38.690Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:29:38.690Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:29:38.690Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:38.690Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:29:38.690Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:38.690Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:29:38.690Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:38.690Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:29:38.690Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:38.690Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:29:38.690Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:38.690Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:29:38.691Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:38.691Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:29:38.691Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:38.691Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:29:38.691Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:38.691Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:29:38.691Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:38.691Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:29:38.691Z] [LOG]    EPF/ETF calculated on: Rs.8351.42
[2025-10-23T04:29:38.691Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:29:38.691Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:29:38.691Z] [LOG] 💰 GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-23T04:29:38.691Z] [LOG]    Base Salary: 50000
[2025-10-23T04:29:38.692Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:29:38.692Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:29:38.692Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:38.692Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:29:38.692Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:38.989Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:29:38.989Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:29:38.989Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:29:38.990Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:29:38.990Z] [LOG]    Actual Earned Base: Rs.8351.42
[2025-10-23T04:29:38.990Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:29:38.990Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:29:38.991Z] [LOG]    = Gross Salary: Rs.8351.42
[2025-10-23T04:29:38.991Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:29:38.991Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:29:38.991Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:29:38.992Z] [LOG]    Gross Salary: Rs.8351.42
[2025-10-23T04:29:38.992Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:29:38.992Z] [LOG]    = NET SALARY: Rs.8351.42
[2025-10-23T04:29:39.240Z] [LOG] Creating components for record 299861e6-044c-4f36-8809-c3d5a4e6df44: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:29:39.241Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8351.41669105
}
[2025-10-23T04:29:39.482Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:29:39.787Z] [LOG] Created payroll_record_component: 07803b75-570f-4226-8ee9-39bd9935ab08 for Base Salary (Attendance-based)
[2025-10-23T04:29:40.426Z] [LOG] ✅ Financial balances updated successfully for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:40.427Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:29:40.427Z] [LOG] 
======================================================================
[2025-10-23T04:29:40.427Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Viruna Damsiha Cooray null
[2025-10-23T04:29:40.428Z] [LOG] ======================================================================
[2025-10-23T04:29:40.428Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:29:40.428Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8351.42
[2025-10-23T04:29:40.429Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T04:29:40.429Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:40.429Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:29:40.429Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:29:40.430Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:40.430Z] [LOG]    GROSS SALARY: Rs.8351.42
[2025-10-23T04:29:40.430Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:40.431Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:29:40.431Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:29:40.431Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:29:40.431Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:29:40.432Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:40.432Z] [LOG]    NET SALARY: Rs.8351.42
[2025-10-23T04:29:40.432Z] [LOG] ======================================================================

[2025-10-23T04:29:40.432Z] [LOG] ✅ Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-23T04:29:40.432Z] [LOG] 📊 Progress: 3/34 (8.8%)
[2025-10-23T04:29:40.433Z] [LOG] 
🧮 Processing: Sumaiya null (EMP000016)
[2025-10-23T04:29:40.433Z] [LOG] 📋 Record ID: 29dde7a1-9c5a-40d6-9750-a93505dab31f
[2025-10-23T04:29:40.433Z] [LOG] 
======================================================================
[2025-10-23T04:29:40.433Z] [LOG] 🧮 CALCULATING PAYROLL: Sumaiya null (EMP000016)
[2025-10-23T04:29:40.434Z] [LOG] ======================================================================
[2025-10-23T04:29:41.552Z] [LOG] 🔍 Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-23T04:29:41.553Z] [LOG]    Total components: 11
[2025-10-23T04:29:41.553Z] [LOG]    Applicable components: 11
[2025-10-23T04:29:41.553Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T04:29:43.189Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:29:43.190Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:29:43.433Z] [LOG] 📊 Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:43.655Z] [LOG] 📊 Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:43.887Z] [LOG] 📊 Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:43.888Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:29:43.888Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:29:44.122Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:29:44.123Z] [LOG]    Employee ID: 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:44.123Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:29:44.124Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:29:44.124Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-23T04:29:44.359Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:29:44.359Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-23T04:29:44.360Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-23T04:29:44.360Z] [LOG]       Saturday Hourly Rate: Rs.533.33
[2025-10-23T04:29:44.360Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:29:44.361Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:29:44.361Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:29:45.023Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:29:45.024Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:29:45.236Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:29:45.237Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:29:45.237Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:29:45.237Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:29:45.238Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:29:45.238Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:29:45.239Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:29:45.239Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:29:45.446Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:29:45.446Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:29:45.447Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:29:45.447Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:29:45.669Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:29:45.669Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:29:45.669Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:29:45.670Z] [LOG]       Current Time: 09:59:45
[2025-10-23T04:29:45.671Z] [LOG]       Expected Hours (scheduled → now): 1.50h
[2025-10-23T04:29:45.671Z] [LOG]       Actual Hours (check-in → now): 1.50h
[2025-10-23T04:29:45.671Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:29:45.672Z] [LOG]       Weekday: 120.50h
[2025-10-23T04:29:45.672Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:29:45.672Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:29:45.673Z] [LOG]       Total Expected: 134.00h
[2025-10-23T04:29:45.673Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:29:45.674Z] [LOG]       Weekday: 27.00h (includes 1.50h live)
[2025-10-23T04:29:45.674Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:29:45.674Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:29:45.675Z] [LOG]       Total Actual: 31.50h
[2025-10-23T04:29:45.675Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:29:45.675Z] [LOG]       Weekday: 120.50h × Rs.282.35 = Rs.34022.05
[2025-10-23T04:29:45.676Z] [LOG]       Saturday: 13.50h × Rs.533.33 = Rs.7199.96
[2025-10-23T04:29:45.676Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:29:45.676Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:29:45.677Z] [LOG]       Total Expected Earned: Rs.41222.01
[2025-10-23T04:29:45.677Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:29:45.677Z] [LOG]       Weekday: 27.00h × Rs.282.35 = Rs.7622.33
[2025-10-23T04:29:45.677Z] [LOG]       Saturday: 4.50h × Rs.533.33 = Rs.2399.99
[2025-10-23T04:29:45.678Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:29:45.678Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:29:45.678Z] [LOG]       Total Actual Earned: Rs.10022.31
[2025-10-23T04:29:45.679Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:29:45.679Z] [LOG]       Calculated At: Oct 23, 2025, 09:59:45
[2025-10-23T04:29:45.679Z] [LOG]       Expected Earned (until NOW): Rs.41222.01
[2025-10-23T04:29:45.680Z] [LOG]       Actual Earned (until NOW): Rs.10022.31
[2025-10-23T04:29:45.680Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:29:45.680Z] [LOG]       Attendance Deduction: Rs.31199.70
[2025-10-23T04:29:45.680Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:29:45.680Z] [LOG]       📉 Shortfall: 102.50 hours (75.69% of expected)
[2025-10-23T04:29:45.680Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:29:45.681Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:29:45.681Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-23T04:29:45.681Z] [LOG]    Actual Earned Base: Rs.10022.31
[2025-10-23T04:29:45.681Z] [LOG]    Attendance Shortfall: Rs.31199.70
[2025-10-23T04:29:45.681Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:29:45.681Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:29:45.681Z] [LOG]    Gross Salary: 10022.310933277779
[2025-10-23T04:29:45.681Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:29:45.681Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:29:45.682Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:45.682Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:29:45.682Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:45.682Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:29:45.682Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:45.682Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:29:45.682Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:45.682Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:29:45.682Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:45.682Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:29:45.682Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:45.682Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:29:45.682Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:45.682Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:29:45.682Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:45.682Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:29:45.682Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:45.683Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:29:45.683Z] [LOG]    EPF/ETF calculated on: Rs.10022.31
[2025-10-23T04:29:45.683Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:29:45.683Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:29:45.683Z] [LOG] 💰 GROSS CALCULATION for Sumaiya null:
[2025-10-23T04:29:45.683Z] [LOG]    Base Salary: 60000
[2025-10-23T04:29:45.683Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:29:45.683Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:29:45.683Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:45.683Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:29:45.683Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:45.891Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:29:45.892Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:29:45.892Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:29:45.893Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:29:45.893Z] [LOG]    Actual Earned Base: Rs.10022.31
[2025-10-23T04:29:45.893Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:29:45.894Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:29:45.894Z] [LOG]    = Gross Salary: Rs.10022.31
[2025-10-23T04:29:45.894Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:29:45.894Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:29:45.895Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:29:45.895Z] [LOG]    Gross Salary: Rs.10022.31
[2025-10-23T04:29:45.895Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:29:45.896Z] [LOG]    = NET SALARY: Rs.10022.31
[2025-10-23T04:29:46.121Z] [LOG] Creating components for record 29dde7a1-9c5a-40d6-9750-a93505dab31f: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:29:46.122Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 10022.310933277779
}
[2025-10-23T04:29:46.332Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:29:46.562Z] [LOG] Created payroll_record_component: e0661d3a-20dd-4507-93e5-4a8ff3c4f7c9 for Base Salary (Attendance-based)
[2025-10-23T04:29:47.049Z] [LOG] ✅ Financial balances updated successfully for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:47.050Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:29:47.050Z] [LOG] 
======================================================================
[2025-10-23T04:29:47.050Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sumaiya null
[2025-10-23T04:29:47.051Z] [LOG] ======================================================================
[2025-10-23T04:29:47.051Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-23T04:29:47.051Z] [LOG]    Actual Earned Base (Attendance-based): Rs.10022.31
[2025-10-23T04:29:47.052Z] [LOG]    Attendance Shortfall: Rs.31199.70
[2025-10-23T04:29:47.052Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:47.052Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:29:47.052Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:29:47.053Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:47.053Z] [LOG]    GROSS SALARY: Rs.10022.31
[2025-10-23T04:29:47.053Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:47.054Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:29:47.054Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:29:47.054Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:29:47.055Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:29:47.055Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:47.055Z] [LOG]    NET SALARY: Rs.10022.31
[2025-10-23T04:29:47.055Z] [LOG] ======================================================================

[2025-10-23T04:29:47.056Z] [LOG] ✅ Sumaiya null: Calculation completed successfully
[2025-10-23T04:29:47.056Z] [LOG] 📊 Progress: 4/34 (11.8%)
[2025-10-23T04:29:47.056Z] [LOG] 
🧮 Processing: Piyumi null (EMP000025)
[2025-10-23T04:29:47.056Z] [LOG] 📋 Record ID: 2b5cd803-656b-4071-b31d-37477c414c43
[2025-10-23T04:29:47.056Z] [LOG] 
======================================================================
[2025-10-23T04:29:47.056Z] [LOG] 🧮 CALCULATING PAYROLL: Piyumi null (EMP000025)
[2025-10-23T04:29:47.056Z] [LOG] ======================================================================
[2025-10-23T04:29:48.109Z] [LOG] 🔍 Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-23T04:29:48.110Z] [LOG]    Total components: 11
[2025-10-23T04:29:48.110Z] [LOG]    Applicable components: 11
[2025-10-23T04:29:48.110Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T04:29:49.653Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:29:49.654Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:29:49.867Z] [LOG] 📊 Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:50.192Z] [LOG] 📊 Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:50.464Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:50.464Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:29:50.465Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:29:50.806Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:29:50.807Z] [LOG]    Employee ID: 0143e565-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:50.807Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:29:50.807Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:29:50.808Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T04:29:51.148Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:29:51.148Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T04:29:51.149Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T04:29:51.149Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T04:29:51.149Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:29:51.150Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:29:51.150Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:29:51.887Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:29:51.887Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:29:52.110Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:29:52.110Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:29:52.110Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:29:52.111Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:29:52.111Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:29:52.111Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:29:52.112Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:29:52.112Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:29:52.477Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:29:52.478Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:29:52.478Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:29:52.478Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:29:52.819Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:29:52.819Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:29:52.820Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:29:52.820Z] [LOG]       Current Time: 09:59:52
[2025-10-23T04:29:52.820Z] [LOG]       Expected Hours (scheduled → now): 1.50h
[2025-10-23T04:29:52.821Z] [LOG]       Actual Hours (check-in → now): 1.50h
[2025-10-23T04:29:52.821Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:29:52.821Z] [LOG]       Weekday: 120.50h
[2025-10-23T04:29:52.821Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:29:52.821Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:29:52.822Z] [LOG]       Total Expected: 134.00h
[2025-10-23T04:29:52.822Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:29:52.822Z] [LOG]       Weekday: 27.00h (includes 1.50h live)
[2025-10-23T04:29:52.822Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:29:52.823Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:29:52.823Z] [LOG]       Total Actual: 31.50h
[2025-10-23T04:29:52.823Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:29:52.823Z] [LOG]       Weekday: 120.50h × Rs.235.29 = Rs.28351.98
[2025-10-23T04:29:52.823Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T04:29:52.823Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:29:52.823Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:29:52.824Z] [LOG]       Total Expected Earned: Rs.34351.92
[2025-10-23T04:29:52.824Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:29:52.824Z] [LOG]       Weekday: 27.00h × Rs.235.29 = Rs.6352.36
[2025-10-23T04:29:52.824Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T04:29:52.824Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:29:52.824Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:29:52.825Z] [LOG]       Total Actual Earned: Rs.8352.34
[2025-10-23T04:29:52.825Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:29:52.825Z] [LOG]       Calculated At: Oct 23, 2025, 09:59:52
[2025-10-23T04:29:52.825Z] [LOG]       Expected Earned (until NOW): Rs.34351.92
[2025-10-23T04:29:52.825Z] [LOG]       Actual Earned (until NOW): Rs.8352.34
[2025-10-23T04:29:52.825Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:29:52.825Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T04:29:52.825Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:29:52.826Z] [LOG]       📉 Shortfall: 102.50 hours (75.69% of expected)
[2025-10-23T04:29:52.826Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:29:52.826Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:29:52.826Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:29:52.826Z] [LOG]    Actual Earned Base: Rs.8352.34
[2025-10-23T04:29:52.826Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T04:29:52.826Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:29:52.826Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:29:52.826Z] [LOG]    Gross Salary: 8352.340661808334
[2025-10-23T04:29:52.826Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:29:52.826Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:29:52.826Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:52.826Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:29:52.826Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:52.826Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:29:52.827Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:52.827Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:29:52.827Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:52.827Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:29:52.827Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:52.827Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:29:52.827Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:52.827Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:29:52.827Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:52.827Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:29:52.827Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:52.827Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:29:52.827Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:52.827Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:29:52.827Z] [LOG]    EPF/ETF calculated on: Rs.8352.34
[2025-10-23T04:29:52.827Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:29:52.828Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:29:52.828Z] [LOG] 💰 GROSS CALCULATION for Piyumi null:
[2025-10-23T04:29:52.828Z] [LOG]    Base Salary: 50000
[2025-10-23T04:29:52.828Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:29:52.828Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:29:52.828Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:52.828Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:29:52.828Z] [LOG]    Fixed amount: 0
[2025-10-23T04:29:53.128Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:29:53.128Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:29:53.129Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:29:53.129Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:29:53.129Z] [LOG]    Actual Earned Base: Rs.8352.34
[2025-10-23T04:29:53.130Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:29:53.130Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:29:53.130Z] [LOG]    = Gross Salary: Rs.8352.34
[2025-10-23T04:29:53.131Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:29:53.131Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:29:53.131Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:29:53.132Z] [LOG]    Gross Salary: Rs.8352.34
[2025-10-23T04:29:53.132Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:29:53.132Z] [LOG]    = NET SALARY: Rs.8352.34
[2025-10-23T04:29:53.382Z] [LOG] Creating components for record 2b5cd803-656b-4071-b31d-37477c414c43: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:29:53.383Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8352.340661808334
}
[2025-10-23T04:29:53.624Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:29:53.878Z] [LOG] Created payroll_record_component: 14e1c70b-1d10-4cd0-b28e-3583c2cce680 for Base Salary (Attendance-based)
[2025-10-23T04:29:54.483Z] [LOG] ✅ Financial balances updated successfully for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:54.483Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:29:54.483Z] [LOG] 
======================================================================
[2025-10-23T04:29:54.484Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Piyumi null
[2025-10-23T04:29:54.484Z] [LOG] ======================================================================
[2025-10-23T04:29:54.484Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:29:54.485Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8352.34
[2025-10-23T04:29:54.485Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T04:29:54.485Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:54.486Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:29:54.486Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:29:54.486Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:54.487Z] [LOG]    GROSS SALARY: Rs.8352.34
[2025-10-23T04:29:54.487Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:54.487Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:29:54.488Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:29:54.488Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:29:54.488Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:29:54.489Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:29:54.489Z] [LOG]    NET SALARY: Rs.8352.34
[2025-10-23T04:29:54.489Z] [LOG] ======================================================================

[2025-10-23T04:29:54.490Z] [LOG] ✅ Piyumi null: Calculation completed successfully
[2025-10-23T04:29:54.490Z] [LOG] 📊 Progress: 5/34 (14.7%)
[2025-10-23T04:29:54.490Z] [LOG] 
🧮 Processing: Jessie null (EMP000013)
[2025-10-23T04:29:54.491Z] [LOG] 📋 Record ID: 334760cc-7c84-4790-8206-944c73ed6a54
[2025-10-23T04:29:54.491Z] [LOG] 
======================================================================
[2025-10-23T04:29:54.491Z] [LOG] 🧮 CALCULATING PAYROLL: Jessie null (EMP000013)
[2025-10-23T04:29:54.491Z] [LOG] ======================================================================
[2025-10-23T04:29:55.487Z] [LOG] 🔍 Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-23T04:29:55.488Z] [LOG]    Total components: 11
[2025-10-23T04:29:55.488Z] [LOG]    Applicable components: 11
[2025-10-23T04:29:55.489Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T04:29:56.987Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:29:56.988Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:29:57.227Z] [LOG] 📊 Found 0 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:57.548Z] [LOG] 📊 Found 0 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:57.890Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:57.890Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:29:57.891Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:29:58.187Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:29:58.188Z] [LOG]    Employee ID: 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-23T04:29:58.188Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:29:58.188Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:29:58.188Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-23T04:29:58.509Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:29:58.509Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-23T04:29:58.510Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-23T04:29:58.510Z] [LOG]       Saturday Hourly Rate: Rs.533.33
[2025-10-23T04:29:58.510Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:29:58.511Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:29:58.511Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:29:59.385Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:29:59.386Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:29:59.630Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:29:59.630Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:29:59.631Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:29:59.631Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:29:59.631Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:29:59.632Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:29:59.632Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:29:59.632Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:29:59.881Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:29:59.882Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:29:59.882Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:29:59.883Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:30:00.102Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:30:00.103Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:30:00.103Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:30:00.104Z] [LOG]       Current Time: 10:00:00
[2025-10-23T04:30:00.105Z] [LOG]       Expected Hours (scheduled → now): 1.50h
[2025-10-23T04:30:00.105Z] [LOG]       Actual Hours (check-in → now): 1.50h
[2025-10-23T04:30:00.105Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:30:00.106Z] [LOG]       Weekday: 120.50h
[2025-10-23T04:30:00.106Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:30:00.106Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:30:00.107Z] [LOG]       Total Expected: 134.00h
[2025-10-23T04:30:00.107Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:30:00.107Z] [LOG]       Weekday: 27.00h (includes 1.50h live)
[2025-10-23T04:30:00.108Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:30:00.108Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:30:00.108Z] [LOG]       Total Actual: 31.50h
[2025-10-23T04:30:00.109Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:30:00.109Z] [LOG]       Weekday: 120.50h × Rs.282.35 = Rs.34023.18
[2025-10-23T04:30:00.110Z] [LOG]       Saturday: 13.50h × Rs.533.33 = Rs.7199.96
[2025-10-23T04:30:00.110Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:00.110Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:00.111Z] [LOG]       Total Expected Earned: Rs.41223.14
[2025-10-23T04:30:00.111Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:30:00.112Z] [LOG]       Weekday: 27.00h × Rs.282.35 = Rs.7623.46
[2025-10-23T04:30:00.112Z] [LOG]       Saturday: 4.50h × Rs.533.33 = Rs.2399.99
[2025-10-23T04:30:00.112Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:00.113Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:00.113Z] [LOG]       Total Actual Earned: Rs.10023.44
[2025-10-23T04:30:00.113Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:30:00.114Z] [LOG]       Calculated At: Oct 23, 2025, 10:00:00
[2025-10-23T04:30:00.114Z] [LOG]       Expected Earned (until NOW): Rs.41223.14
[2025-10-23T04:30:00.114Z] [LOG]       Actual Earned (until NOW): Rs.10023.44
[2025-10-23T04:30:00.114Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:00.114Z] [LOG]       Attendance Deduction: Rs.31199.69
[2025-10-23T04:30:00.114Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:30:00.114Z] [LOG]       📉 Shortfall: 102.50 hours (75.68% of expected)
[2025-10-23T04:30:00.114Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:30:00.114Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:30:00.114Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-23T04:30:00.115Z] [LOG]    Actual Earned Base: Rs.10023.44
[2025-10-23T04:30:00.115Z] [LOG]    Attendance Shortfall: Rs.31199.69
[2025-10-23T04:30:00.115Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:30:00.115Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:30:00.115Z] [LOG]    Gross Salary: 10023.442999916668
[2025-10-23T04:30:00.115Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:30:00.115Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:30:00.115Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:00.115Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:30:00.115Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:00.115Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:30:00.115Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:00.116Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:30:00.116Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:00.116Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:30:00.116Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:00.116Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:30:00.116Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:00.116Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:30:00.116Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:00.116Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:30:00.116Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:00.116Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:30:00.116Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:00.116Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:30:00.116Z] [LOG]    EPF/ETF calculated on: Rs.10023.44
[2025-10-23T04:30:00.116Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:30:00.116Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:30:00.116Z] [LOG] 💰 GROSS CALCULATION for Jessie null:
[2025-10-23T04:30:00.117Z] [LOG]    Base Salary: 60000
[2025-10-23T04:30:00.117Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:30:00.117Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:30:00.117Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:00.117Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:30:00.117Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:00.428Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:30:00.429Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:30:00.429Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:30:00.430Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:30:00.430Z] [LOG]    Actual Earned Base: Rs.10023.44
[2025-10-23T04:30:00.430Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:30:00.431Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:30:00.431Z] [LOG]    = Gross Salary: Rs.10023.44
[2025-10-23T04:30:00.431Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:30:00.432Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:30:00.432Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:30:00.432Z] [LOG]    Gross Salary: Rs.10023.44
[2025-10-23T04:30:00.433Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:30:00.433Z] [LOG]    = NET SALARY: Rs.10023.44
[2025-10-23T04:30:00.747Z] [LOG] Creating components for record 334760cc-7c84-4790-8206-944c73ed6a54: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:30:00.748Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 10023.442999916668
}
[2025-10-23T04:30:01.070Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:30:01.324Z] [LOG] Created payroll_record_component: e3168de3-9d48-4365-b5f1-e770a202bd53 for Base Salary (Attendance-based)
[2025-10-23T04:30:01.785Z] [LOG] ✅ Financial balances updated successfully for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:01.786Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:30:01.786Z] [LOG] 
======================================================================
[2025-10-23T04:30:01.787Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Jessie null
[2025-10-23T04:30:01.787Z] [LOG] ======================================================================
[2025-10-23T04:30:01.787Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-23T04:30:01.787Z] [LOG]    Actual Earned Base (Attendance-based): Rs.10023.44
[2025-10-23T04:30:01.788Z] [LOG]    Attendance Shortfall: Rs.31199.69
[2025-10-23T04:30:01.788Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:01.788Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:30:01.789Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:30:01.789Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:01.789Z] [LOG]    GROSS SALARY: Rs.10023.44
[2025-10-23T04:30:01.789Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:01.790Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:30:01.790Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:30:01.790Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:30:01.790Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:30:01.791Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:01.791Z] [LOG]    NET SALARY: Rs.10023.44
[2025-10-23T04:30:01.791Z] [LOG] ======================================================================

[2025-10-23T04:30:01.792Z] [LOG] ✅ Jessie null: Calculation completed successfully
[2025-10-23T04:30:01.792Z] [LOG] 📊 Progress: 6/34 (17.6%)
[2025-10-23T04:30:01.792Z] [LOG] 
🧮 Processing: Ratheeshanan null (EMP000047)
[2025-10-23T04:30:01.792Z] [LOG] 📋 Record ID: 3c4c6b27-46d3-4529-9b3d-4581135b8e97
[2025-10-23T04:30:01.792Z] [LOG] 
======================================================================
[2025-10-23T04:30:01.792Z] [LOG] 🧮 CALCULATING PAYROLL: Ratheeshanan null (EMP000047)
[2025-10-23T04:30:01.792Z] [LOG] ======================================================================
[2025-10-23T04:30:02.741Z] [LOG] 🔍 Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-23T04:30:02.742Z] [LOG]    Total components: 11
[2025-10-23T04:30:02.742Z] [LOG]    Applicable components: 11
[2025-10-23T04:30:02.742Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T04:30:04.266Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:30:04.266Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:30:04.482Z] [LOG] 📊 Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:04.692Z] [LOG] 📊 Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:04.901Z] [LOG] 📊 Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:04.901Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:30:04.902Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:30:05.119Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:30:05.120Z] [LOG]    Employee ID: 01444966-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:05.120Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:30:05.121Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:30:05.121Z] [LOG]    Base Salary (Full Month): Rs.25000.00
[2025-10-23T04:30:05.345Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:30:05.345Z] [LOG]       Daily Salary: Rs.1000.00
[2025-10-23T04:30:05.346Z] [LOG]       Weekday Hourly Rate: Rs.117.65
[2025-10-23T04:30:05.346Z] [LOG]       Saturday Hourly Rate: Rs.222.22
[2025-10-23T04:30:05.346Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:30:05.347Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:30:05.347Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:30:06.007Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:30:06.007Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:30:06.228Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:30:06.229Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:30:06.229Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:30:06.229Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:30:06.230Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:30:06.230Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:30:06.230Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:30:06.231Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:30:06.450Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:30:06.451Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:30:06.451Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:30:06.451Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:30:06.667Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:30:06.668Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:30:06.668Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:30:06.669Z] [LOG]       Current Time: 10:00:06
[2025-10-23T04:30:06.669Z] [LOG]       Expected Hours (scheduled → now): 1.50h
[2025-10-23T04:30:06.670Z] [LOG]       Actual Hours (check-in → now): 1.50h
[2025-10-23T04:30:06.670Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:30:06.670Z] [LOG]       Weekday: 120.50h
[2025-10-23T04:30:06.671Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:30:06.671Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:30:06.671Z] [LOG]       Total Expected: 134.00h
[2025-10-23T04:30:06.672Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:30:06.672Z] [LOG]       Weekday: 27.00h (includes 1.50h live)
[2025-10-23T04:30:06.672Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:30:06.673Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:30:06.673Z] [LOG]       Total Actual: 31.50h
[2025-10-23T04:30:06.673Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:30:06.674Z] [LOG]       Weekday: 120.50h × Rs.117.65 = Rs.14177.04
[2025-10-23T04:30:06.674Z] [LOG]       Saturday: 13.50h × Rs.222.22 = Rs.2999.97
[2025-10-23T04:30:06.674Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:06.674Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:06.675Z] [LOG]       Total Expected Earned: Rs.17177.01
[2025-10-23T04:30:06.675Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:30:06.675Z] [LOG]       Weekday: 27.00h × Rs.117.65 = Rs.3176.77
[2025-10-23T04:30:06.675Z] [LOG]       Saturday: 4.50h × Rs.222.22 = Rs.999.99
[2025-10-23T04:30:06.675Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:06.675Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:06.675Z] [LOG]       Total Actual Earned: Rs.4176.76
[2025-10-23T04:30:06.676Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:30:06.676Z] [LOG]       Calculated At: Oct 23, 2025, 10:00:06
[2025-10-23T04:30:06.676Z] [LOG]       Expected Earned (until NOW): Rs.17177.01
[2025-10-23T04:30:06.676Z] [LOG]       Actual Earned (until NOW): Rs.4176.76
[2025-10-23T04:30:06.676Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:06.676Z] [LOG]       Attendance Deduction: Rs.13000.26
[2025-10-23T04:30:06.676Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:30:06.676Z] [LOG]       📉 Shortfall: 102.50 hours (75.68% of expected)
[2025-10-23T04:30:06.676Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:30:06.676Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:30:06.676Z] [LOG]    Base Salary (Full): Rs.25000.00
[2025-10-23T04:30:06.676Z] [LOG]    Actual Earned Base: Rs.4176.76
[2025-10-23T04:30:06.676Z] [LOG]    Attendance Shortfall: Rs.13000.26
[2025-10-23T04:30:06.677Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:30:06.677Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:30:06.677Z] [LOG]    Gross Salary: 4176.7578812638885
[2025-10-23T04:30:06.677Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:30:06.677Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:30:06.677Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:06.677Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:30:06.677Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:06.677Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:30:06.677Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:06.677Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:30:06.677Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:06.677Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:30:06.677Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:06.677Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:30:06.677Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:06.677Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:30:06.678Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:06.678Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:30:06.678Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:06.678Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:30:06.678Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:06.678Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:30:06.678Z] [LOG]    EPF/ETF calculated on: Rs.4176.76
[2025-10-23T04:30:06.678Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:30:06.678Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:30:06.678Z] [LOG] 💰 GROSS CALCULATION for Ratheeshanan null:
[2025-10-23T04:30:06.678Z] [LOG]    Base Salary: 25000
[2025-10-23T04:30:06.678Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:30:06.678Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:30:06.678Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:06.678Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:30:06.679Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:07.043Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:30:07.043Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:30:07.044Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:30:07.044Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:30:07.044Z] [LOG]    Actual Earned Base: Rs.4176.76
[2025-10-23T04:30:07.045Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:30:07.045Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:30:07.045Z] [LOG]    = Gross Salary: Rs.4176.76
[2025-10-23T04:30:07.046Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:30:07.046Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:30:07.046Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:30:07.047Z] [LOG]    Gross Salary: Rs.4176.76
[2025-10-23T04:30:07.047Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:30:07.047Z] [LOG]    = NET SALARY: Rs.4176.76
[2025-10-23T04:30:07.450Z] [LOG] Creating components for record 3c4c6b27-46d3-4529-9b3d-4581135b8e97: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:30:07.451Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 4176.7578812638885
}
[2025-10-23T04:30:07.801Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:30:08.186Z] [LOG] Created payroll_record_component: 34666c89-ea59-4506-b2bd-5562e85246da for Base Salary (Attendance-based)
[2025-10-23T04:30:08.745Z] [LOG] ✅ Financial balances updated successfully for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:08.745Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:30:08.746Z] [LOG] 
======================================================================
[2025-10-23T04:30:08.746Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ratheeshanan null
[2025-10-23T04:30:08.746Z] [LOG] ======================================================================
[2025-10-23T04:30:08.747Z] [LOG]    Base Salary (Full): Rs.25000.00
[2025-10-23T04:30:08.747Z] [LOG]    Actual Earned Base (Attendance-based): Rs.4176.76
[2025-10-23T04:30:08.747Z] [LOG]    Attendance Shortfall: Rs.13000.26
[2025-10-23T04:30:08.748Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:08.748Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:30:08.748Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:30:08.748Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:08.749Z] [LOG]    GROSS SALARY: Rs.4176.76
[2025-10-23T04:30:08.749Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:08.749Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:30:08.750Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:30:08.750Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:30:08.750Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:30:08.751Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:08.751Z] [LOG]    NET SALARY: Rs.4176.76
[2025-10-23T04:30:08.751Z] [LOG] ======================================================================

[2025-10-23T04:30:08.752Z] [LOG] ✅ Ratheeshanan null: Calculation completed successfully
[2025-10-23T04:30:08.752Z] [LOG] 📊 Progress: 7/34 (20.6%)
[2025-10-23T04:30:08.752Z] [LOG] 
🧮 Processing: Dharshika null (EMP000009)
[2025-10-23T04:30:08.753Z] [LOG] 📋 Record ID: 5cdc395b-7efe-4099-b6f9-4097eb0fdc40
[2025-10-23T04:30:08.753Z] [LOG] 
======================================================================
[2025-10-23T04:30:08.753Z] [LOG] 🧮 CALCULATING PAYROLL: Dharshika null (EMP000009)
[2025-10-23T04:30:08.754Z] [LOG] ======================================================================
[2025-10-23T04:30:10.027Z] [LOG] 🔍 Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-23T04:30:10.027Z] [LOG]    Total components: 11
[2025-10-23T04:30:10.027Z] [LOG]    Applicable components: 11
[2025-10-23T04:30:10.028Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T04:30:11.931Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:30:11.932Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:30:12.168Z] [LOG] 📊 Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:12.381Z] [LOG] 📊 Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:12.600Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:12.601Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:30:12.601Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:30:12.906Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:30:12.907Z] [LOG]    Employee ID: 0143a994-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:12.907Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:30:12.907Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:30:12.908Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-23T04:30:13.227Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:30:13.227Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-23T04:30:13.228Z] [LOG]       Weekday Hourly Rate: Rs.470.59
[2025-10-23T04:30:13.228Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-23T04:30:13.228Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:30:13.228Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:30:13.229Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:30:14.192Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:30:14.193Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:30:14.430Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:30:14.431Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:30:14.431Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:30:14.431Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:30:14.432Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:30:14.432Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:30:14.432Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:30:14.433Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:30:14.678Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:30:14.678Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:30:14.678Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:30:14.679Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:30:14.902Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:30:14.902Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:30:14.902Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:30:14.903Z] [LOG]       Current Time: 10:00:14
[2025-10-23T04:30:14.904Z] [LOG]       Expected Hours (scheduled → now): 1.50h
[2025-10-23T04:30:14.904Z] [LOG]       Actual Hours (check-in → now): 1.50h
[2025-10-23T04:30:14.904Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:30:14.904Z] [LOG]       Weekday: 120.50h
[2025-10-23T04:30:14.904Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:30:14.904Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:30:14.905Z] [LOG]       Total Expected: 134.00h
[2025-10-23T04:30:14.905Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:30:14.905Z] [LOG]       Weekday: 27.00h (includes 1.50h live)
[2025-10-23T04:30:14.905Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:30:14.905Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:30:14.905Z] [LOG]       Total Actual: 31.50h
[2025-10-23T04:30:14.905Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:30:14.906Z] [LOG]       Weekday: 120.50h × Rs.470.59 = Rs.56708.04
[2025-10-23T04:30:14.906Z] [LOG]       Saturday: 13.50h × Rs.888.89 = Rs.12000.01
[2025-10-23T04:30:14.906Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:14.906Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:14.906Z] [LOG]       Total Expected Earned: Rs.68708.06
[2025-10-23T04:30:14.906Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:30:14.906Z] [LOG]       Weekday: 27.00h × Rs.470.59 = Rs.12707.88
[2025-10-23T04:30:14.906Z] [LOG]       Saturday: 4.50h × Rs.888.89 = Rs.4000.01
[2025-10-23T04:30:14.906Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:14.907Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:14.907Z] [LOG]       Total Actual Earned: Rs.16707.88
[2025-10-23T04:30:14.907Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:30:14.907Z] [LOG]       Calculated At: Oct 23, 2025, 10:00:14
[2025-10-23T04:30:14.907Z] [LOG]       Expected Earned (until NOW): Rs.68708.06
[2025-10-23T04:30:14.908Z] [LOG]       Actual Earned (until NOW): Rs.16707.88
[2025-10-23T04:30:14.908Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:14.908Z] [LOG]       Attendance Deduction: Rs.52000.18
[2025-10-23T04:30:14.908Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:30:14.908Z] [LOG]       📉 Shortfall: 102.50 hours (75.68% of expected)
[2025-10-23T04:30:14.908Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:30:14.908Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:30:14.908Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-23T04:30:14.909Z] [LOG]    Actual Earned Base: Rs.16707.88
[2025-10-23T04:30:14.909Z] [LOG]    Attendance Shortfall: Rs.52000.18
[2025-10-23T04:30:14.909Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:30:14.909Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:30:14.909Z] [LOG]    Gross Salary: 16707.88298116111
[2025-10-23T04:30:14.909Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:30:14.910Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:30:14.910Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:14.910Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:30:14.910Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:14.910Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:30:14.910Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:14.910Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:30:14.910Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:14.910Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:30:14.910Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:14.910Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:30:14.911Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:14.911Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:30:14.911Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:14.911Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:30:14.911Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:14.911Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:30:14.911Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:14.911Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:30:14.911Z] [LOG]    EPF/ETF calculated on: Rs.16707.88
[2025-10-23T04:30:14.911Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:30:14.911Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:30:14.912Z] [LOG] 💰 GROSS CALCULATION for Dharshika null:
[2025-10-23T04:30:14.912Z] [LOG]    Base Salary: 100000
[2025-10-23T04:30:14.912Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:30:14.912Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:30:14.912Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:14.912Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:30:14.912Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:15.143Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:30:15.143Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:30:15.144Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:30:15.144Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:30:15.144Z] [LOG]    Actual Earned Base: Rs.16707.88
[2025-10-23T04:30:15.144Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:30:15.144Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:30:15.144Z] [LOG]    = Gross Salary: Rs.16707.88
[2025-10-23T04:30:15.144Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:30:15.144Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:30:15.144Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:30:15.145Z] [LOG]    Gross Salary: Rs.16707.88
[2025-10-23T04:30:15.145Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:30:15.145Z] [LOG]    = NET SALARY: Rs.16707.88
[2025-10-23T04:30:15.393Z] [LOG] Creating components for record 5cdc395b-7efe-4099-b6f9-4097eb0fdc40: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:30:15.394Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 16707.88298116111
}
[2025-10-23T04:30:15.632Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:30:15.884Z] [LOG] Created payroll_record_component: 3974af96-a95c-4b6d-af91-b22ea0201712 for Base Salary (Attendance-based)
[2025-10-23T04:30:16.431Z] [LOG] ✅ Financial balances updated successfully for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:16.431Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:30:16.432Z] [LOG] 
======================================================================
[2025-10-23T04:30:16.432Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Dharshika null
[2025-10-23T04:30:16.432Z] [LOG] ======================================================================
[2025-10-23T04:30:16.432Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-23T04:30:16.433Z] [LOG]    Actual Earned Base (Attendance-based): Rs.16707.88
[2025-10-23T04:30:16.433Z] [LOG]    Attendance Shortfall: Rs.52000.18
[2025-10-23T04:30:16.433Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:16.434Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:30:16.434Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:30:16.434Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:16.435Z] [LOG]    GROSS SALARY: Rs.16707.88
[2025-10-23T04:30:16.435Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:16.435Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:30:16.436Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:30:16.436Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:30:16.436Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:30:16.437Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:16.437Z] [LOG]    NET SALARY: Rs.16707.88
[2025-10-23T04:30:16.437Z] [LOG] ======================================================================

[2025-10-23T04:30:16.438Z] [LOG] ✅ Dharshika null: Calculation completed successfully
[2025-10-23T04:30:16.438Z] [LOG] 📊 Progress: 8/34 (23.5%)
[2025-10-23T04:30:16.438Z] [LOG] 
🧮 Processing: Ammaar Ilham (EMP000023)
[2025-10-23T04:30:16.439Z] [LOG] 📋 Record ID: 66e9d686-5921-4d1d-a17b-0c0832d56b64
[2025-10-23T04:30:16.439Z] [LOG] 
======================================================================
[2025-10-23T04:30:16.439Z] [LOG] 🧮 CALCULATING PAYROLL: Ammaar Ilham (EMP000023)
[2025-10-23T04:30:16.439Z] [LOG] ======================================================================
[2025-10-23T04:30:17.441Z] [LOG] 🔍 Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-23T04:30:17.442Z] [LOG]    Total components: 11
[2025-10-23T04:30:17.442Z] [LOG]    Applicable components: 11
[2025-10-23T04:30:17.442Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T04:30:18.849Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:30:18.850Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:30:19.079Z] [LOG] 📊 Found 0 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:19.307Z] [LOG] 📊 Found 0 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:19.632Z] [LOG] 📊 Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:19.632Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:30:19.633Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:30:19.953Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:30:19.953Z] [LOG]    Employee ID: 0143de00-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:19.953Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:30:19.954Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:30:19.954Z] [LOG]    Base Salary (Full Month): Rs.70000.00
[2025-10-23T04:30:20.272Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:30:20.272Z] [LOG]       Daily Salary: Rs.2800.00
[2025-10-23T04:30:20.273Z] [LOG]       Weekday Hourly Rate: Rs.329.41
[2025-10-23T04:30:20.273Z] [LOG]       Saturday Hourly Rate: Rs.622.22
[2025-10-23T04:30:20.273Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:30:20.273Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:30:20.273Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:30:21.071Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:30:21.071Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:30:21.317Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:30:21.318Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:30:21.318Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:30:21.318Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:30:21.318Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:30:21.319Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:30:21.319Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:30:21.319Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:30:21.543Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:30:21.543Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:30:21.543Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:30:21.544Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:30:21.752Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:30:21.752Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:30:21.752Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:30:21.753Z] [LOG]       Current Time: 10:00:21
[2025-10-23T04:30:21.753Z] [LOG]       Expected Hours (scheduled → now): 1.51h
[2025-10-23T04:30:21.753Z] [LOG]       Actual Hours (check-in → now): 1.51h
[2025-10-23T04:30:21.753Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:30:21.754Z] [LOG]       Weekday: 120.51h
[2025-10-23T04:30:21.754Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:30:21.754Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:30:21.754Z] [LOG]       Total Expected: 134.01h
[2025-10-23T04:30:21.754Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:30:21.754Z] [LOG]       Weekday: 27.01h (includes 1.51h live)
[2025-10-23T04:30:21.754Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:30:21.754Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:30:21.754Z] [LOG]       Total Actual: 31.51h
[2025-10-23T04:30:21.754Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:30:21.754Z] [LOG]       Weekday: 120.51h × Rs.329.41 = Rs.39695.90
[2025-10-23T04:30:21.755Z] [LOG]       Saturday: 13.50h × Rs.622.22 = Rs.8399.97
[2025-10-23T04:30:21.755Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:21.755Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:21.755Z] [LOG]       Total Expected Earned: Rs.48095.87
[2025-10-23T04:30:21.755Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:30:21.755Z] [LOG]       Weekday: 27.01h × Rs.329.41 = Rs.8896.06
[2025-10-23T04:30:21.755Z] [LOG]       Saturday: 4.50h × Rs.622.22 = Rs.2799.99
[2025-10-23T04:30:21.755Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:21.755Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:21.755Z] [LOG]       Total Actual Earned: Rs.11696.05
[2025-10-23T04:30:21.756Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:30:21.756Z] [LOG]       Calculated At: Oct 23, 2025, 10:00:21
[2025-10-23T04:30:21.757Z] [LOG]       Expected Earned (until NOW): Rs.48095.87
[2025-10-23T04:30:21.757Z] [LOG]       Actual Earned (until NOW): Rs.11696.05
[2025-10-23T04:30:21.757Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:21.758Z] [LOG]       Attendance Deduction: Rs.36399.82
[2025-10-23T04:30:21.759Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:30:21.759Z] [LOG]       📉 Shortfall: 102.50 hours (75.68% of expected)
[2025-10-23T04:30:21.759Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:30:21.759Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:30:21.760Z] [LOG]    Base Salary (Full): Rs.70000.00
[2025-10-23T04:30:21.760Z] [LOG]    Actual Earned Base: Rs.11696.05
[2025-10-23T04:30:21.760Z] [LOG]    Attendance Shortfall: Rs.36399.82
[2025-10-23T04:30:21.760Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:30:21.760Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:30:21.760Z] [LOG]    Gross Salary: 11696.050368422224
[2025-10-23T04:30:21.760Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:30:21.761Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:30:21.761Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:21.761Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:30:21.761Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:21.761Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:30:21.761Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:21.762Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:30:21.762Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:21.762Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:30:21.762Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:21.762Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:30:21.762Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:21.762Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:30:21.762Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:21.762Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:30:21.763Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:21.763Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:30:21.763Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:21.763Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:30:21.763Z] [LOG]    EPF/ETF calculated on: Rs.11696.05
[2025-10-23T04:30:21.763Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:30:21.763Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:30:21.763Z] [LOG] 💰 GROSS CALCULATION for Ammaar Ilham:
[2025-10-23T04:30:21.763Z] [LOG]    Base Salary: 70000
[2025-10-23T04:30:21.763Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:30:21.764Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:30:21.764Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:21.764Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:30:21.764Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:22.007Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:30:22.007Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:30:22.008Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:30:22.008Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:30:22.008Z] [LOG]    Actual Earned Base: Rs.11696.05
[2025-10-23T04:30:22.009Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:30:22.009Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:30:22.009Z] [LOG]    = Gross Salary: Rs.11696.05
[2025-10-23T04:30:22.009Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:30:22.010Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:30:22.010Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:30:22.010Z] [LOG]    Gross Salary: Rs.11696.05
[2025-10-23T04:30:22.010Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:30:22.011Z] [LOG]    = NET SALARY: Rs.11696.05
[2025-10-23T04:30:22.376Z] [LOG] Creating components for record 66e9d686-5921-4d1d-a17b-0c0832d56b64: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:30:22.376Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 11696.050368422224
}
[2025-10-23T04:30:22.588Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:30:22.828Z] [LOG] Created payroll_record_component: b3b07eab-73f5-4391-b9b1-8dbe5196a769 for Base Salary (Attendance-based)
[2025-10-23T04:30:23.564Z] [LOG] ✅ Financial balances updated successfully for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:23.564Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:30:23.564Z] [LOG] 
======================================================================
[2025-10-23T04:30:23.565Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ammaar Ilham
[2025-10-23T04:30:23.565Z] [LOG] ======================================================================
[2025-10-23T04:30:23.565Z] [LOG]    Base Salary (Full): Rs.70000.00
[2025-10-23T04:30:23.566Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11696.05
[2025-10-23T04:30:23.566Z] [LOG]    Attendance Shortfall: Rs.36399.82
[2025-10-23T04:30:23.566Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:23.566Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:30:23.567Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:30:23.567Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:23.567Z] [LOG]    GROSS SALARY: Rs.11696.05
[2025-10-23T04:30:23.567Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:23.568Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:30:23.568Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:30:23.568Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:30:23.569Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:30:23.569Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:23.569Z] [LOG]    NET SALARY: Rs.11696.05
[2025-10-23T04:30:23.570Z] [LOG] ======================================================================

[2025-10-23T04:30:23.570Z] [LOG] ✅ Ammaar Ilham: Calculation completed successfully
[2025-10-23T04:30:23.570Z] [LOG] 📊 Progress: 9/34 (26.5%)
[2025-10-23T04:30:23.570Z] [LOG] 
🧮 Processing: Safna Nawas null (EMP000021)
[2025-10-23T04:30:23.571Z] [LOG] 📋 Record ID: 6aaa1ae2-a4b5-4cbb-b810-37f39e27fbba
[2025-10-23T04:30:23.571Z] [LOG] 
======================================================================
[2025-10-23T04:30:23.571Z] [LOG] 🧮 CALCULATING PAYROLL: Safna Nawas null (EMP000021)
[2025-10-23T04:30:23.571Z] [LOG] ======================================================================
[2025-10-23T04:30:24.906Z] [LOG] 🔍 Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-23T04:30:24.906Z] [LOG]    Total components: 11
[2025-10-23T04:30:24.907Z] [LOG]    Applicable components: 11
[2025-10-23T04:30:24.907Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T04:30:26.829Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:30:26.829Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:30:27.165Z] [LOG] 📊 Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:27.413Z] [LOG] 📊 Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:27.700Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:27.700Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:30:27.700Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:30:27.947Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:30:27.947Z] [LOG]    Employee ID: 0143c977-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:27.947Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:30:27.948Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:30:27.948Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T04:30:28.278Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:30:28.278Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T04:30:28.279Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T04:30:28.279Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T04:30:28.279Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:30:28.279Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:30:28.279Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:30:29.228Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:30:29.228Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:30:29.551Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:30:29.552Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:30:29.552Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:30:29.552Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:30:29.553Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:30:29.553Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:30:29.553Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:30:29.553Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:30:29.871Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:30:29.871Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:30:29.871Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:30:29.872Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:30:30.146Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:30:30.148Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:30:30.152Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:30:30.153Z] [LOG]       Current Time: 10:00:30
[2025-10-23T04:30:30.154Z] [LOG]       Expected Hours (scheduled → now): 1.51h
[2025-10-23T04:30:30.155Z] [LOG]       Actual Hours (check-in → now): 1.51h
[2025-10-23T04:30:30.155Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:30:30.156Z] [LOG]       Weekday: 120.51h
[2025-10-23T04:30:30.156Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:30:30.156Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:30:30.156Z] [LOG]       Total Expected: 134.01h
[2025-10-23T04:30:30.156Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:30:30.157Z] [LOG]       Weekday: 27.01h (includes 1.51h live)
[2025-10-23T04:30:30.157Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:30:30.157Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:30:30.157Z] [LOG]       Total Actual: 31.51h
[2025-10-23T04:30:30.157Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:30:30.157Z] [LOG]       Weekday: 120.51h × Rs.235.29 = Rs.28354.42
[2025-10-23T04:30:30.157Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T04:30:30.158Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:30.158Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:30.158Z] [LOG]       Total Expected Earned: Rs.34354.36
[2025-10-23T04:30:30.158Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:30:30.158Z] [LOG]       Weekday: 27.01h × Rs.235.29 = Rs.6354.80
[2025-10-23T04:30:30.158Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T04:30:30.159Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:30.160Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:30.160Z] [LOG]       Total Actual Earned: Rs.8354.78
[2025-10-23T04:30:30.161Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:30:30.161Z] [LOG]       Calculated At: Oct 23, 2025, 10:00:30
[2025-10-23T04:30:30.161Z] [LOG]       Expected Earned (until NOW): Rs.34354.36
[2025-10-23T04:30:30.162Z] [LOG]       Actual Earned (until NOW): Rs.8354.78
[2025-10-23T04:30:30.162Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:30.162Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T04:30:30.162Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:30:30.162Z] [LOG]       📉 Shortfall: 102.50 hours (75.68% of expected)
[2025-10-23T04:30:30.163Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:30:30.163Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:30:30.164Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:30:30.164Z] [LOG]    Actual Earned Base: Rs.8354.78
[2025-10-23T04:30:30.164Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T04:30:30.165Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:30:30.165Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:30:30.166Z] [LOG]    Gross Salary: 8354.780292316667
[2025-10-23T04:30:30.167Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:30:30.167Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:30:30.168Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:30.168Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:30:30.168Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:30.169Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:30:30.169Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:30.169Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:30:30.169Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:30.170Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:30:30.171Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:30.172Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:30:30.173Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:30.174Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:30:30.176Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:30.178Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:30:30.180Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:30.180Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:30:30.180Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:30.181Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:30:30.181Z] [LOG]    EPF/ETF calculated on: Rs.8354.78
[2025-10-23T04:30:30.181Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:30:30.182Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:30:30.182Z] [LOG] 💰 GROSS CALCULATION for Safna Nawas null:
[2025-10-23T04:30:30.182Z] [LOG]    Base Salary: 50000
[2025-10-23T04:30:30.182Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:30:30.182Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:30:30.182Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:30.183Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:30:30.183Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:30.426Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:30:30.451Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:30:30.457Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:30:30.470Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:30:30.471Z] [LOG]    Actual Earned Base: Rs.8354.78
[2025-10-23T04:30:30.472Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:30:30.473Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:30:30.474Z] [LOG]    = Gross Salary: Rs.8354.78
[2025-10-23T04:30:30.486Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:30:30.486Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:30:30.491Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:30:30.495Z] [LOG]    Gross Salary: Rs.8354.78
[2025-10-23T04:30:30.498Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:30:30.499Z] [LOG]    = NET SALARY: Rs.8354.78
[2025-10-23T04:30:30.733Z] [LOG] Creating components for record 6aaa1ae2-a4b5-4cbb-b810-37f39e27fbba: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:30:30.734Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8354.780292316667
}
[2025-10-23T04:30:30.986Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:30:31.306Z] [LOG] Created payroll_record_component: 7788aa83-d0f6-4e29-929e-02ba7a240e9e for Base Salary (Attendance-based)
[2025-10-23T04:30:31.928Z] [LOG] ✅ Financial balances updated successfully for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:31.935Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:30:31.941Z] [LOG] 
======================================================================
[2025-10-23T04:30:31.941Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Safna Nawas null
[2025-10-23T04:30:31.942Z] [LOG] ======================================================================
[2025-10-23T04:30:31.942Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:30:31.947Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8354.78
[2025-10-23T04:30:31.947Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T04:30:31.948Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:31.948Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:30:31.948Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:30:31.948Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:31.949Z] [LOG]    GROSS SALARY: Rs.8354.78
[2025-10-23T04:30:31.949Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:31.949Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:30:31.949Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:30:31.949Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:30:31.949Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:30:31.949Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:31.950Z] [LOG]    NET SALARY: Rs.8354.78
[2025-10-23T04:30:31.950Z] [LOG] ======================================================================

[2025-10-23T04:30:31.950Z] [LOG] ✅ Safna Nawas null: Calculation completed successfully
[2025-10-23T04:30:31.950Z] [LOG] 📊 Progress: 10/34 (29.4%)
[2025-10-23T04:30:31.950Z] [LOG] 
🧮 Processing: Ishara null (EMP000011)
[2025-10-23T04:30:31.950Z] [LOG] 📋 Record ID: 6c3fc9f4-6c28-4e81-98fc-84509219de91
[2025-10-23T04:30:31.950Z] [LOG] 
======================================================================
[2025-10-23T04:30:31.951Z] [LOG] 🧮 CALCULATING PAYROLL: Ishara null (EMP000011)
[2025-10-23T04:30:31.951Z] [LOG] ======================================================================
[2025-10-23T04:30:32.867Z] [LOG] 🔍 Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-23T04:30:32.868Z] [LOG]    Total components: 11
[2025-10-23T04:30:32.868Z] [LOG]    Applicable components: 11
[2025-10-23T04:30:32.868Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-23T04:30:34.767Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:30:34.768Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:30:35.147Z] [LOG] 📊 Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:35.471Z] [LOG] 📊 Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:35.788Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:35.788Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:30:35.789Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:30:36.026Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:30:36.027Z] [LOG]    Employee ID: 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:36.027Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:30:36.027Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:30:36.028Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T04:30:36.267Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:30:36.267Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T04:30:36.267Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T04:30:36.267Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T04:30:36.268Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:30:36.268Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:30:36.268Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:30:37.227Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:30:37.227Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:30:37.470Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:30:37.470Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:30:37.471Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:30:37.471Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:30:37.471Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:30:37.471Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:30:37.471Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:30:37.472Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:30:37.738Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:30:37.738Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:30:37.739Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:30:37.739Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:30:37.991Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:30:37.991Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:30:37.991Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:30:37.993Z] [LOG]       Current Time: 10:00:37
[2025-10-23T04:30:37.993Z] [LOG]       Expected Hours (scheduled → now): 1.51h
[2025-10-23T04:30:37.993Z] [LOG]       Actual Hours (check-in → now): 1.51h
[2025-10-23T04:30:37.993Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:30:37.993Z] [LOG]       Weekday: 120.51h
[2025-10-23T04:30:37.993Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:30:37.994Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:30:37.994Z] [LOG]       Total Expected: 134.01h
[2025-10-23T04:30:37.994Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:30:37.994Z] [LOG]       Weekday: 27.01h (includes 1.51h live)
[2025-10-23T04:30:37.995Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:30:37.995Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:30:37.995Z] [LOG]       Total Actual: 31.51h
[2025-10-23T04:30:37.995Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:30:37.995Z] [LOG]       Weekday: 120.51h × Rs.235.29 = Rs.28354.93
[2025-10-23T04:30:37.996Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T04:30:37.996Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:37.996Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:37.996Z] [LOG]       Total Expected Earned: Rs.34354.87
[2025-10-23T04:30:37.996Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:30:37.996Z] [LOG]       Weekday: 27.01h × Rs.235.29 = Rs.6355.31
[2025-10-23T04:30:37.996Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T04:30:37.996Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:37.996Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:37.997Z] [LOG]       Total Actual Earned: Rs.8355.29
[2025-10-23T04:30:37.997Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:30:37.997Z] [LOG]       Calculated At: Oct 23, 2025, 10:00:37
[2025-10-23T04:30:37.997Z] [LOG]       Expected Earned (until NOW): Rs.34354.87
[2025-10-23T04:30:37.997Z] [LOG]       Actual Earned (until NOW): Rs.8355.29
[2025-10-23T04:30:37.997Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:37.997Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T04:30:37.998Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:30:37.998Z] [LOG]       📉 Shortfall: 102.50 hours (75.68% of expected)
[2025-10-23T04:30:37.998Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:30:37.998Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:30:37.998Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:30:37.998Z] [LOG]    Actual Earned Base: Rs.8355.29
[2025-10-23T04:30:37.998Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T04:30:37.998Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:30:37.998Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:30:37.998Z] [LOG]    Gross Salary: 8355.293028441667
[2025-10-23T04:30:37.998Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:30:37.999Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:30:37.999Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:37.999Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:30:37.999Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:37.999Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:30:37.999Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:37.999Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:30:37.999Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:37.999Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:30:37.999Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:37.999Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:30:38.000Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:38.000Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:30:38.000Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:38.000Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:30:38.000Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:38.000Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:30:38.000Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:38.000Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:30:38.000Z] [LOG]    EPF/ETF calculated on: Rs.8355.29
[2025-10-23T04:30:38.000Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:30:38.000Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:30:38.000Z] [LOG] 💰 GROSS CALCULATION for Ishara null:
[2025-10-23T04:30:38.000Z] [LOG]    Base Salary: 50000
[2025-10-23T04:30:38.001Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:30:38.001Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:30:38.001Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:38.001Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:30:38.001Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:38.347Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:30:38.347Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:30:38.348Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:30:38.348Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:30:38.348Z] [LOG]    Actual Earned Base: Rs.8355.29
[2025-10-23T04:30:38.348Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:30:38.348Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:30:38.349Z] [LOG]    = Gross Salary: Rs.8355.29
[2025-10-23T04:30:38.349Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:30:38.349Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:30:38.349Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:30:38.349Z] [LOG]    Gross Salary: Rs.8355.29
[2025-10-23T04:30:38.349Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:30:38.350Z] [LOG]    = NET SALARY: Rs.8355.29
[2025-10-23T04:30:38.673Z] [LOG] Creating components for record 6c3fc9f4-6c28-4e81-98fc-84509219de91: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:30:38.674Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8355.293028441667
}
[2025-10-23T04:30:38.999Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:30:39.307Z] [LOG] Created payroll_record_component: 0c74c3ee-e941-4f9f-a35b-b04c1f55421b for Base Salary (Attendance-based)
[2025-10-23T04:30:39.790Z] [LOG] ✅ Financial balances updated successfully for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:39.790Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:30:39.790Z] [LOG] 
======================================================================
[2025-10-23T04:30:39.790Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ishara null
[2025-10-23T04:30:39.790Z] [LOG] ======================================================================
[2025-10-23T04:30:39.791Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:30:39.791Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8355.29
[2025-10-23T04:30:39.791Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T04:30:39.791Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:39.791Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:30:39.791Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:30:39.791Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:39.791Z] [LOG]    GROSS SALARY: Rs.8355.29
[2025-10-23T04:30:39.792Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:39.792Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:30:39.792Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:30:39.792Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:30:39.792Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:30:39.792Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:39.792Z] [LOG]    NET SALARY: Rs.8355.29
[2025-10-23T04:30:39.792Z] [LOG] ======================================================================

[2025-10-23T04:30:39.792Z] [LOG] ✅ Ishara null: Calculation completed successfully
[2025-10-23T04:30:39.793Z] [LOG] 📊 Progress: 11/34 (32.4%)
[2025-10-23T04:30:39.793Z] [LOG] 
🧮 Processing: Faizan Faizan (EMP000003)
[2025-10-23T04:30:39.793Z] [LOG] 📋 Record ID: 6f02f156-6e4b-4d66-b1f2-ed5b373b5a06
[2025-10-23T04:30:39.793Z] [LOG] 
======================================================================
[2025-10-23T04:30:39.794Z] [LOG] 🧮 CALCULATING PAYROLL: Faizan Faizan (EMP000003)
[2025-10-23T04:30:39.795Z] [LOG] ======================================================================
[2025-10-23T04:30:40.906Z] [LOG] 🔍 Component filtering for employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-23T04:30:40.906Z] [LOG]    Total components: 11
[2025-10-23T04:30:40.906Z] [LOG]    Applicable components: 11
[2025-10-23T04:30:40.907Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-23T04:30:43.152Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:30:43.153Z] [LOG] 🔄 Processing financial records for employee 0143a057-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:30:43.469Z] [LOG] 📊 Found 0 active loans for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:43.742Z] [LOG] 📊 Found 0 active advances for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:43.988Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:43.988Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:30:43.989Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:30:44.277Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:30:44.278Z] [LOG]    Employee ID: 0143a057-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:44.278Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:30:44.278Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:30:44.278Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T04:30:44.527Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:30:44.527Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T04:30:44.528Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T04:30:44.528Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T04:30:44.529Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:30:44.529Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:30:44.530Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:30:45.246Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:30:45.246Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:30:45.469Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:30:45.470Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:30:45.470Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:30:45.470Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:30:45.471Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:30:45.471Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:30:45.471Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:30:45.472Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:30:45.714Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:30:45.715Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:30:45.715Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:30:45.715Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:30:45.918Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:30:45.918Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:30:45.919Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:30:45.919Z] [LOG]       Current Time: 10:00:45
[2025-10-23T04:30:45.919Z] [LOG]       Expected Hours (scheduled → now): 1.51h
[2025-10-23T04:30:45.920Z] [LOG]       Actual Hours (check-in → now): 1.51h
[2025-10-23T04:30:45.920Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:30:45.920Z] [LOG]       Weekday: 120.51h
[2025-10-23T04:30:45.920Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:30:45.920Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:30:45.920Z] [LOG]       Total Expected: 134.01h
[2025-10-23T04:30:45.921Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:30:45.921Z] [LOG]       Weekday: 27.01h (includes 1.51h live)
[2025-10-23T04:30:45.921Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:30:45.921Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:30:45.921Z] [LOG]       Total Actual: 31.51h
[2025-10-23T04:30:45.922Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:30:45.922Z] [LOG]       Weekday: 120.51h × Rs.235.29 = Rs.28355.45
[2025-10-23T04:30:45.922Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T04:30:45.923Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:45.923Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:45.923Z] [LOG]       Total Expected Earned: Rs.34355.39
[2025-10-23T04:30:45.923Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:30:45.924Z] [LOG]       Weekday: 27.01h × Rs.235.29 = Rs.6355.83
[2025-10-23T04:30:45.924Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T04:30:45.924Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:45.924Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:45.924Z] [LOG]       Total Actual Earned: Rs.8355.81
[2025-10-23T04:30:45.925Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:30:45.925Z] [LOG]       Calculated At: Oct 23, 2025, 10:00:45
[2025-10-23T04:30:45.925Z] [LOG]       Expected Earned (until NOW): Rs.34355.39
[2025-10-23T04:30:45.925Z] [LOG]       Actual Earned (until NOW): Rs.8355.81
[2025-10-23T04:30:45.926Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:45.926Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T04:30:45.926Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:30:45.926Z] [LOG]       📉 Shortfall: 102.50 hours (75.68% of expected)
[2025-10-23T04:30:45.926Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:30:45.926Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:30:45.927Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:30:45.927Z] [LOG]    Actual Earned Base: Rs.8355.81
[2025-10-23T04:30:45.927Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T04:30:45.927Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:30:45.927Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:30:45.927Z] [LOG]    Gross Salary: 8355.81112395
[2025-10-23T04:30:45.927Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:30:45.928Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:30:45.928Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:45.928Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:30:45.928Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:45.928Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:30:45.928Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:45.929Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:30:45.929Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:45.929Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:30:45.929Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:45.929Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:30:45.930Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:45.930Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:30:45.930Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:45.930Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:30:45.930Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:45.930Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:30:45.930Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:45.930Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:30:45.930Z] [LOG]    EPF/ETF calculated on: Rs.8355.81
[2025-10-23T04:30:45.931Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:30:45.931Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:30:45.931Z] [LOG] 💰 GROSS CALCULATION for Faizan Faizan:
[2025-10-23T04:30:45.931Z] [LOG]    Base Salary: 50000
[2025-10-23T04:30:45.931Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:30:45.931Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:30:45.931Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:45.931Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:30:45.931Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:46.206Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:30:46.206Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:30:46.207Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:30:46.207Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:30:46.207Z] [LOG]    Actual Earned Base: Rs.8355.81
[2025-10-23T04:30:46.208Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:30:46.208Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:30:46.208Z] [LOG]    = Gross Salary: Rs.8355.81
[2025-10-23T04:30:46.208Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:30:46.209Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:30:46.209Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:30:46.209Z] [LOG]    Gross Salary: Rs.8355.81
[2025-10-23T04:30:46.209Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:30:46.210Z] [LOG]    = NET SALARY: Rs.8355.81
[2025-10-23T04:30:46.514Z] [LOG] Creating components for record 6f02f156-6e4b-4d66-b1f2-ed5b373b5a06: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:30:46.515Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8355.81112395
}
[2025-10-23T04:30:46.841Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:30:47.308Z] [LOG] Created payroll_record_component: 63d8d2ed-1dfe-43a4-a2cc-7e3b89172bb6 for Base Salary (Attendance-based)
[2025-10-23T04:30:47.814Z] [LOG] ✅ Financial balances updated successfully for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:47.815Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:30:47.815Z] [LOG] 
======================================================================
[2025-10-23T04:30:47.816Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Faizan Faizan
[2025-10-23T04:30:47.816Z] [LOG] ======================================================================
[2025-10-23T04:30:47.816Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:30:47.817Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8355.81
[2025-10-23T04:30:47.817Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T04:30:47.817Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:47.818Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:30:47.818Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:30:47.818Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:47.819Z] [LOG]    GROSS SALARY: Rs.8355.81
[2025-10-23T04:30:47.819Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:47.819Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:30:47.820Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:30:47.820Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:30:47.820Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:30:47.821Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:47.821Z] [LOG]    NET SALARY: Rs.8355.81
[2025-10-23T04:30:47.821Z] [LOG] ======================================================================

[2025-10-23T04:30:47.822Z] [LOG] ✅ Faizan Faizan: Calculation completed successfully
[2025-10-23T04:30:47.822Z] [LOG] 📊 Progress: 12/34 (35.3%)
[2025-10-23T04:30:47.822Z] [LOG] 
🧮 Processing: customer null (EMP000036)
[2025-10-23T04:30:47.822Z] [LOG] 📋 Record ID: 73e27aa3-a382-4a89-8fd9-e5e9880ba95d
[2025-10-23T04:30:47.822Z] [LOG] 
======================================================================
[2025-10-23T04:30:47.822Z] [LOG] 🧮 CALCULATING PAYROLL: customer null (EMP000036)
[2025-10-23T04:30:47.822Z] [LOG] ======================================================================
[2025-10-23T04:30:49.075Z] [LOG] 🔍 Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-23T04:30:49.076Z] [LOG]    Total components: 11
[2025-10-23T04:30:49.076Z] [LOG]    Applicable components: 11
[2025-10-23T04:30:49.076Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T04:30:51.007Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:30:51.007Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:30:51.313Z] [LOG] 📊 Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:51.644Z] [LOG] 📊 Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:51.947Z] [LOG] 📊 Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:51.947Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:30:51.948Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:30:52.269Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:30:52.270Z] [LOG]    Employee ID: 014409a2-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:52.270Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:30:52.270Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:30:52.271Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-23T04:30:52.527Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:30:52.527Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-23T04:30:52.528Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-23T04:30:52.528Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-23T04:30:52.528Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:30:52.528Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:30:52.529Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:30:53.414Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:30:53.414Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:30:53.684Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:30:53.685Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:30:53.685Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:30:53.685Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:30:53.686Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:30:53.686Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:30:53.687Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:30:53.687Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:30:53.910Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:30:53.910Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:30:53.911Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:30:53.911Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:30:54.214Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:30:54.215Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:30:54.215Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:30:54.216Z] [LOG]       Current Time: 10:00:54
[2025-10-23T04:30:54.216Z] [LOG]       Expected Hours (scheduled → now): 1.52h
[2025-10-23T04:30:54.217Z] [LOG]       Actual Hours (check-in → now): 1.52h
[2025-10-23T04:30:54.217Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:30:54.217Z] [LOG]       Weekday: 120.52h
[2025-10-23T04:30:54.218Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:30:54.218Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:30:54.218Z] [LOG]       Total Expected: 134.02h
[2025-10-23T04:30:54.219Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:30:54.219Z] [LOG]       Weekday: 27.02h (includes 1.52h live)
[2025-10-23T04:30:54.219Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:30:54.219Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:30:54.220Z] [LOG]       Total Actual: 31.52h
[2025-10-23T04:30:54.220Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:30:54.220Z] [LOG]       Weekday: 120.52h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:54.221Z] [LOG]       Saturday: 13.50h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:54.221Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:54.221Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:54.222Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-23T04:30:54.222Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:30:54.222Z] [LOG]       Weekday: 27.02h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:54.223Z] [LOG]       Saturday: 4.50h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:54.223Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:30:54.223Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:54.223Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-23T04:30:54.224Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:30:54.225Z] [LOG]       Calculated At: Oct 23, 2025, 10:00:54
[2025-10-23T04:30:54.225Z] [LOG]       Expected Earned (until NOW): Rs.0.00
[2025-10-23T04:30:54.226Z] [LOG]       Actual Earned (until NOW): Rs.0.00
[2025-10-23T04:30:54.226Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:30:54.227Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-23T04:30:54.227Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:30:54.228Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-23T04:30:54.228Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:30:54.229Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:30:54.229Z] [LOG]    Base Salary (Full): Rs.NaN
[2025-10-23T04:30:54.229Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T04:30:54.230Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T04:30:54.230Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:30:54.230Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:30:54.230Z] [LOG]    Gross Salary: 0
[2025-10-23T04:30:54.231Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:30:54.231Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:30:54.231Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:54.232Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:30:54.232Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:54.232Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:30:54.233Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:54.233Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:30:54.233Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:54.234Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:30:54.234Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:54.234Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:30:54.235Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:54.235Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:30:54.235Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:54.236Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:30:54.236Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:54.236Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:30:54.237Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:54.237Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:30:54.237Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-23T04:30:54.237Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:30:54.238Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:30:54.238Z] [LOG] 💰 GROSS CALCULATION for customer null:
[2025-10-23T04:30:54.238Z] [LOG]    Base Salary: 0
[2025-10-23T04:30:54.238Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:30:54.239Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:30:54.239Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:54.239Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:30:54.240Z] [LOG]    Fixed amount: 0
[2025-10-23T04:30:54.511Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:30:54.511Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:30:54.512Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:30:54.512Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:30:54.512Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T04:30:54.512Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:30:54.513Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:30:54.513Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-23T04:30:54.513Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:30:54.514Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:30:54.514Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:30:54.514Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-23T04:30:54.514Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:30:54.515Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-23T04:30:54.754Z] [LOG] Creating components for record 73e27aa3-a382-4a89-8fd9-e5e9880ba95d: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:30:54.755Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 0
}
[2025-10-23T04:30:54.972Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:30:55.212Z] [LOG] Created payroll_record_component: bc16e045-20eb-4d06-98bd-a29684f279ff for Base Salary (Attendance-based)
[2025-10-23T04:30:55.836Z] [LOG] ✅ Financial balances updated successfully for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:55.837Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:30:55.837Z] [LOG] 
======================================================================
[2025-10-23T04:30:55.837Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: customer null
[2025-10-23T04:30:55.838Z] [LOG] ======================================================================
[2025-10-23T04:30:55.838Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-23T04:30:55.838Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-23T04:30:55.839Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T04:30:55.839Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:55.839Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:30:55.839Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:30:55.840Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:55.840Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-23T04:30:55.840Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:55.841Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:30:55.841Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:30:55.841Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:30:55.842Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:30:55.842Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:30:55.842Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-23T04:30:55.843Z] [LOG] ======================================================================

[2025-10-23T04:30:55.843Z] [LOG] ✅ customer null: Calculation completed successfully
[2025-10-23T04:30:55.844Z] [LOG] 📊 Progress: 13/34 (38.2%)
[2025-10-23T04:30:55.844Z] [LOG] 
🧮 Processing: Anoj null (EMP000014)
[2025-10-23T04:30:55.844Z] [LOG] 📋 Record ID: 76005add-9bad-41b1-bdaa-211811b94ae2
[2025-10-23T04:30:55.844Z] [LOG] 
======================================================================
[2025-10-23T04:30:55.845Z] [LOG] 🧮 CALCULATING PAYROLL: Anoj null (EMP000014)
[2025-10-23T04:30:55.845Z] [LOG] ======================================================================
[2025-10-23T04:30:56.855Z] [LOG] 🔍 Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-23T04:30:56.855Z] [LOG]    Total components: 11
[2025-10-23T04:30:56.856Z] [LOG]    Applicable components: 11
[2025-10-23T04:30:56.856Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T04:30:58.528Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:30:58.528Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:30:58.828Z] [LOG] 📊 Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:59.147Z] [LOG] 📊 Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:59.469Z] [LOG] 📊 Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:59.470Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:30:59.470Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:30:59.808Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:30:59.809Z] [LOG]    Employee ID: 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-23T04:30:59.809Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:30:59.809Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:30:59.809Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T04:31:00.116Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:31:00.116Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T04:31:00.117Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T04:31:00.117Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T04:31:00.117Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:31:00.118Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:31:00.118Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:31:01.074Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:31:01.074Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:31:01.321Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:31:01.322Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:31:01.322Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:31:01.322Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:31:01.323Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:31:01.323Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:31:01.323Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:31:01.323Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:31:01.556Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:31:01.557Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:31:01.557Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:31:01.558Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:31:01.890Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:31:01.891Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:31:01.891Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:31:01.892Z] [LOG]       Current Time: 10:01:01
[2025-10-23T04:31:01.892Z] [LOG]       Expected Hours (scheduled → now): 1.52h
[2025-10-23T04:31:01.892Z] [LOG]       Actual Hours (check-in → now): 1.52h
[2025-10-23T04:31:01.893Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:31:01.893Z] [LOG]       Weekday: 120.52h
[2025-10-23T04:31:01.894Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:31:01.894Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:31:01.894Z] [LOG]       Total Expected: 134.02h
[2025-10-23T04:31:01.895Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:31:01.895Z] [LOG]       Weekday: 27.02h (includes 1.52h live)
[2025-10-23T04:31:01.895Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:31:01.896Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:31:01.896Z] [LOG]       Total Actual: 31.52h
[2025-10-23T04:31:01.896Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:31:01.897Z] [LOG]       Weekday: 120.52h × Rs.235.29 = Rs.28356.49
[2025-10-23T04:31:01.897Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T04:31:01.897Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:01.897Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:01.898Z] [LOG]       Total Expected Earned: Rs.34356.43
[2025-10-23T04:31:01.898Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:31:01.898Z] [LOG]       Weekday: 27.02h × Rs.235.29 = Rs.6356.88
[2025-10-23T04:31:01.899Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T04:31:01.899Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:01.899Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:01.899Z] [LOG]       Total Actual Earned: Rs.8356.86
[2025-10-23T04:31:01.900Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:31:01.900Z] [LOG]       Calculated At: Oct 23, 2025, 10:01:01
[2025-10-23T04:31:01.901Z] [LOG]       Expected Earned (until NOW): Rs.34356.43
[2025-10-23T04:31:01.901Z] [LOG]       Actual Earned (until NOW): Rs.8356.86
[2025-10-23T04:31:01.902Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:01.902Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T04:31:01.902Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:31:01.903Z] [LOG]       📉 Shortfall: 102.50 hours (75.68% of expected)
[2025-10-23T04:31:01.903Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:31:01.903Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:31:01.904Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:31:01.904Z] [LOG]    Actual Earned Base: Rs.8356.86
[2025-10-23T04:31:01.904Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T04:31:01.905Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:31:01.905Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:31:01.905Z] [LOG]    Gross Salary: 8356.85502725
[2025-10-23T04:31:01.905Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:31:01.906Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:31:01.906Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:01.906Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:31:01.906Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:01.906Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:31:01.907Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:01.907Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:31:01.907Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:01.908Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:31:01.908Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:01.908Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:31:01.908Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:01.909Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:31:01.909Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:01.909Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:31:01.909Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:01.910Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:31:01.910Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:01.911Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:31:01.911Z] [LOG]    EPF/ETF calculated on: Rs.8356.86
[2025-10-23T04:31:01.911Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:31:01.911Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:31:01.911Z] [LOG] 💰 GROSS CALCULATION for Anoj null:
[2025-10-23T04:31:01.911Z] [LOG]    Base Salary: 50000
[2025-10-23T04:31:01.912Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:31:01.912Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:31:01.912Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:01.913Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:31:01.913Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:02.192Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:31:02.192Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:31:02.192Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:31:02.192Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:31:02.193Z] [LOG]    Actual Earned Base: Rs.8356.86
[2025-10-23T04:31:02.193Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:31:02.194Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:31:02.194Z] [LOG]    = Gross Salary: Rs.8356.86
[2025-10-23T04:31:02.194Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:31:02.195Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:31:02.195Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:31:02.195Z] [LOG]    Gross Salary: Rs.8356.86
[2025-10-23T04:31:02.196Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:31:02.196Z] [LOG]    = NET SALARY: Rs.8356.86
[2025-10-23T04:31:02.511Z] [LOG] Creating components for record 76005add-9bad-41b1-bdaa-211811b94ae2: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:31:02.512Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8356.85502725
}
[2025-10-23T04:31:02.757Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:31:03.009Z] [LOG] Created payroll_record_component: e69c6751-4d86-4e3c-af22-32320dc6412c for Base Salary (Attendance-based)
[2025-10-23T04:31:03.642Z] [LOG] ✅ Financial balances updated successfully for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:03.642Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:31:03.643Z] [LOG] 
======================================================================
[2025-10-23T04:31:03.643Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Anoj null
[2025-10-23T04:31:03.644Z] [LOG] ======================================================================
[2025-10-23T04:31:03.644Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:31:03.644Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8356.86
[2025-10-23T04:31:03.645Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T04:31:03.645Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:03.645Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:31:03.646Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:31:03.646Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:03.646Z] [LOG]    GROSS SALARY: Rs.8356.86
[2025-10-23T04:31:03.647Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:03.647Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:31:03.647Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:31:03.648Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:31:03.648Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:31:03.648Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:03.649Z] [LOG]    NET SALARY: Rs.8356.86
[2025-10-23T04:31:03.649Z] [LOG] ======================================================================

[2025-10-23T04:31:03.649Z] [LOG] ✅ Anoj null: Calculation completed successfully
[2025-10-23T04:31:03.649Z] [LOG] 📊 Progress: 14/34 (41.2%)
[2025-10-23T04:31:03.650Z] [LOG] 
🧮 Processing: Saru null (EMP000022)
[2025-10-23T04:31:03.650Z] [LOG] 📋 Record ID: 7b496ad3-1450-449a-ac96-1eda80cd05b5
[2025-10-23T04:31:03.650Z] [LOG] 
======================================================================
[2025-10-23T04:31:03.651Z] [LOG] 🧮 CALCULATING PAYROLL: Saru null (EMP000022)
[2025-10-23T04:31:03.651Z] [LOG] ======================================================================
[2025-10-23T04:31:04.762Z] [LOG] 🔍 Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-23T04:31:04.762Z] [LOG]    Total components: 11
[2025-10-23T04:31:04.763Z] [LOG]    Applicable components: 11
[2025-10-23T04:31:04.763Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T04:31:06.684Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:31:06.684Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:31:06.993Z] [LOG] 📊 Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:07.309Z] [LOG] 📊 Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:07.628Z] [LOG] 📊 Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:07.628Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:31:07.629Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:31:07.893Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:31:07.893Z] [LOG]    Employee ID: 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:07.894Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:31:07.894Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:31:07.894Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T04:31:08.120Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:31:08.121Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T04:31:08.121Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T04:31:08.121Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T04:31:08.122Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:31:08.122Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:31:08.122Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:31:09.070Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:31:09.071Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:31:09.400Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:31:09.400Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:31:09.401Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:31:09.401Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:31:09.401Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:31:09.401Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:31:09.401Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:31:09.402Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:31:09.711Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:31:09.711Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:31:09.711Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:31:09.712Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:31:10.033Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:31:10.033Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:31:10.033Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:31:10.034Z] [LOG]       Current Time: 10:01:10
[2025-10-23T04:31:10.035Z] [LOG]       Expected Hours (scheduled → now): 1.52h
[2025-10-23T04:31:10.035Z] [LOG]       Actual Hours (check-in → now): 1.52h
[2025-10-23T04:31:10.035Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:31:10.036Z] [LOG]       Weekday: 120.52h
[2025-10-23T04:31:10.036Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:31:10.036Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:31:10.037Z] [LOG]       Total Expected: 134.02h
[2025-10-23T04:31:10.037Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:31:10.037Z] [LOG]       Weekday: 27.02h (includes 1.52h live)
[2025-10-23T04:31:10.038Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:31:10.038Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:31:10.038Z] [LOG]       Total Actual: 31.52h
[2025-10-23T04:31:10.039Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:31:10.039Z] [LOG]       Weekday: 120.52h × Rs.235.29 = Rs.28357.02
[2025-10-23T04:31:10.040Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T04:31:10.040Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:10.040Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:10.041Z] [LOG]       Total Expected Earned: Rs.34356.96
[2025-10-23T04:31:10.041Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:31:10.041Z] [LOG]       Weekday: 27.02h × Rs.235.29 = Rs.6357.41
[2025-10-23T04:31:10.042Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T04:31:10.042Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:10.042Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:10.042Z] [LOG]       Total Actual Earned: Rs.8357.39
[2025-10-23T04:31:10.045Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:31:10.045Z] [LOG]       Calculated At: Oct 23, 2025, 10:01:10
[2025-10-23T04:31:10.045Z] [LOG]       Expected Earned (until NOW): Rs.34356.96
[2025-10-23T04:31:10.046Z] [LOG]       Actual Earned (until NOW): Rs.8357.39
[2025-10-23T04:31:10.046Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:10.046Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T04:31:10.047Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:31:10.047Z] [LOG]       📉 Shortfall: 102.50 hours (75.67% of expected)
[2025-10-23T04:31:10.048Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:31:10.048Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:31:10.048Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:31:10.049Z] [LOG]    Actual Earned Base: Rs.8357.39
[2025-10-23T04:31:10.049Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T04:31:10.049Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:31:10.050Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:31:10.050Z] [LOG]    Gross Salary: 8357.387240158332
[2025-10-23T04:31:10.050Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:31:10.050Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:31:10.051Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:10.051Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:31:10.051Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:10.052Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:31:10.052Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:10.052Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:31:10.053Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:10.053Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:31:10.053Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:10.053Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:31:10.054Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:10.054Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:31:10.054Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:10.055Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:31:10.055Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:10.055Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:31:10.056Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:10.056Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:31:10.056Z] [LOG]    EPF/ETF calculated on: Rs.8357.39
[2025-10-23T04:31:10.056Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:31:10.057Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:31:10.057Z] [LOG] 💰 GROSS CALCULATION for Saru null:
[2025-10-23T04:31:10.057Z] [LOG]    Base Salary: 50000
[2025-10-23T04:31:10.058Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:31:10.058Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:31:10.058Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:10.058Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:31:10.059Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:10.362Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:31:10.362Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:31:10.363Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:31:10.363Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:31:10.363Z] [LOG]    Actual Earned Base: Rs.8357.39
[2025-10-23T04:31:10.363Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:31:10.364Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:31:10.364Z] [LOG]    = Gross Salary: Rs.8357.39
[2025-10-23T04:31:10.364Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:31:10.365Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:31:10.365Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:31:10.365Z] [LOG]    Gross Salary: Rs.8357.39
[2025-10-23T04:31:10.365Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:31:10.366Z] [LOG]    = NET SALARY: Rs.8357.39
[2025-10-23T04:31:10.670Z] [LOG] Creating components for record 7b496ad3-1450-449a-ac96-1eda80cd05b5: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:31:10.671Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8357.387240158332
}
[2025-10-23T04:31:10.989Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:31:11.311Z] [LOG] Created payroll_record_component: 259b8cf5-4c2b-4262-8fcb-4e464948cff2 for Base Salary (Attendance-based)
[2025-10-23T04:31:11.961Z] [LOG] ✅ Financial balances updated successfully for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:11.961Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:31:11.962Z] [LOG] 
======================================================================
[2025-10-23T04:31:11.962Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saru null
[2025-10-23T04:31:11.962Z] [LOG] ======================================================================
[2025-10-23T04:31:11.963Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:31:11.963Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8357.39
[2025-10-23T04:31:11.963Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T04:31:11.963Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:11.964Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:31:11.964Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:31:11.964Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:11.965Z] [LOG]    GROSS SALARY: Rs.8357.39
[2025-10-23T04:31:11.965Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:11.965Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:31:11.966Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:31:11.966Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:31:11.966Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:31:11.967Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:11.967Z] [LOG]    NET SALARY: Rs.8357.39
[2025-10-23T04:31:11.967Z] [LOG] ======================================================================

[2025-10-23T04:31:11.968Z] [LOG] ✅ Saru null: Calculation completed successfully
[2025-10-23T04:31:11.968Z] [LOG] 📊 Progress: 15/34 (44.1%)
[2025-10-23T04:31:11.968Z] [LOG] 
🧮 Processing: Hari null (EMP000017)
[2025-10-23T04:31:11.969Z] [LOG] 📋 Record ID: 8e494da2-67eb-4457-ac15-e7af36620fa3
[2025-10-23T04:31:11.969Z] [LOG] 
======================================================================
[2025-10-23T04:31:11.969Z] [LOG] 🧮 CALCULATING PAYROLL: Hari null (EMP000017)
[2025-10-23T04:31:11.970Z] [LOG] ======================================================================
[2025-10-23T04:31:13.068Z] [LOG] 🔍 Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-23T04:31:13.069Z] [LOG]    Total components: 11
[2025-10-23T04:31:13.069Z] [LOG]    Applicable components: 11
[2025-10-23T04:31:13.070Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T04:31:14.534Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:31:14.535Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:31:14.844Z] [LOG] 📊 Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:15.092Z] [LOG] 📊 Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:15.470Z] [LOG] 📊 Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:15.470Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:31:15.471Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:31:15.788Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:31:15.789Z] [LOG]    Employee ID: 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:15.789Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:31:15.789Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:31:15.790Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T04:31:16.111Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:31:16.112Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T04:31:16.112Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T04:31:16.112Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T04:31:16.113Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:31:16.113Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:31:16.113Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:31:17.069Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:31:17.069Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:31:17.389Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:31:17.390Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:31:17.390Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:31:17.390Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:31:17.390Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:31:17.391Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:31:17.391Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:31:17.391Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:31:17.711Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:31:17.711Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:31:17.711Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:31:17.712Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:31:18.037Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:31:18.037Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:31:18.038Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:31:18.038Z] [LOG]       Current Time: 10:01:18
[2025-10-23T04:31:18.039Z] [LOG]       Expected Hours (scheduled → now): 1.52h
[2025-10-23T04:31:18.039Z] [LOG]       Actual Hours (check-in → now): 1.52h
[2025-10-23T04:31:18.039Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:31:18.040Z] [LOG]       Weekday: 120.52h
[2025-10-23T04:31:18.040Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:31:18.040Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:31:18.041Z] [LOG]       Total Expected: 134.02h
[2025-10-23T04:31:18.041Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:31:18.041Z] [LOG]       Weekday: 27.02h (includes 1.52h live)
[2025-10-23T04:31:18.041Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:31:18.042Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:31:18.042Z] [LOG]       Total Actual: 31.52h
[2025-10-23T04:31:18.042Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:31:18.043Z] [LOG]       Weekday: 120.52h × Rs.235.29 = Rs.28357.55
[2025-10-23T04:31:18.043Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T04:31:18.043Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:18.044Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:18.044Z] [LOG]       Total Expected Earned: Rs.34357.49
[2025-10-23T04:31:18.045Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:31:18.045Z] [LOG]       Weekday: 27.02h × Rs.235.29 = Rs.6357.93
[2025-10-23T04:31:18.045Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T04:31:18.045Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:18.046Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:18.046Z] [LOG]       Total Actual Earned: Rs.8357.91
[2025-10-23T04:31:18.047Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:31:18.047Z] [LOG]       Calculated At: Oct 23, 2025, 10:01:18
[2025-10-23T04:31:18.048Z] [LOG]       Expected Earned (until NOW): Rs.34357.49
[2025-10-23T04:31:18.048Z] [LOG]       Actual Earned (until NOW): Rs.8357.91
[2025-10-23T04:31:18.048Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:18.049Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T04:31:18.049Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:31:18.049Z] [LOG]       📉 Shortfall: 102.50 hours (75.67% of expected)
[2025-10-23T04:31:18.049Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:31:18.050Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:31:18.050Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:31:18.051Z] [LOG]    Actual Earned Base: Rs.8357.91
[2025-10-23T04:31:18.051Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T04:31:18.051Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:31:18.052Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:31:18.052Z] [LOG]    Gross Salary: 8357.910368258334
[2025-10-23T04:31:18.052Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:31:18.053Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:31:18.053Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:18.053Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:31:18.054Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:18.054Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:31:18.055Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:18.055Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:31:18.055Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:18.055Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:31:18.056Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:18.056Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:31:18.056Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:18.057Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:31:18.057Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:18.058Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:31:18.058Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:18.058Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:31:18.058Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:18.059Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:31:18.059Z] [LOG]    EPF/ETF calculated on: Rs.8357.91
[2025-10-23T04:31:18.059Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:31:18.060Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:31:18.060Z] [LOG] 💰 GROSS CALCULATION for Hari null:
[2025-10-23T04:31:18.060Z] [LOG]    Base Salary: 50000
[2025-10-23T04:31:18.061Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:31:18.061Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:31:18.061Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:18.061Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:31:18.061Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:18.370Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:31:18.371Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:31:18.371Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:31:18.371Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:31:18.372Z] [LOG]    Actual Earned Base: Rs.8357.91
[2025-10-23T04:31:18.372Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:31:18.372Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:31:18.372Z] [LOG]    = Gross Salary: Rs.8357.91
[2025-10-23T04:31:18.373Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:31:18.373Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:31:18.373Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:31:18.374Z] [LOG]    Gross Salary: Rs.8357.91
[2025-10-23T04:31:18.374Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:31:18.374Z] [LOG]    = NET SALARY: Rs.8357.91
[2025-10-23T04:31:18.616Z] [LOG] Creating components for record 8e494da2-67eb-4457-ac15-e7af36620fa3: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:31:18.616Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8357.910368258334
}
[2025-10-23T04:31:18.838Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:31:19.148Z] [LOG] Created payroll_record_component: d77d8e93-8096-490a-89a4-8b3b560bc6ea for Base Salary (Attendance-based)
[2025-10-23T04:31:19.805Z] [LOG] ✅ Financial balances updated successfully for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:19.806Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:31:19.808Z] [LOG] 
======================================================================
[2025-10-23T04:31:19.808Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Hari null
[2025-10-23T04:31:19.808Z] [LOG] ======================================================================
[2025-10-23T04:31:19.808Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:31:19.809Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8357.91
[2025-10-23T04:31:19.809Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T04:31:19.809Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:19.810Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:31:19.810Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:31:19.810Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:19.811Z] [LOG]    GROSS SALARY: Rs.8357.91
[2025-10-23T04:31:19.811Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:19.812Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:31:19.812Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:31:19.812Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:31:19.813Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:31:19.813Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:19.813Z] [LOG]    NET SALARY: Rs.8357.91
[2025-10-23T04:31:19.814Z] [LOG] ======================================================================

[2025-10-23T04:31:19.814Z] [LOG] ✅ Hari null: Calculation completed successfully
[2025-10-23T04:31:19.814Z] [LOG] 📊 Progress: 16/34 (47.1%)
[2025-10-23T04:31:19.815Z] [LOG] 
🧮 Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-23T04:31:19.815Z] [LOG] 📋 Record ID: 9c03c090-ed8b-4505-910a-99ca440adbee
[2025-10-23T04:31:19.815Z] [LOG] 
======================================================================
[2025-10-23T04:31:19.815Z] [LOG] 🧮 CALCULATING PAYROLL: Ruvindu Hewabandu null (EMP000027)
[2025-10-23T04:31:19.816Z] [LOG] ======================================================================
[2025-10-23T04:31:21.028Z] [LOG] 🔍 Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-23T04:31:21.029Z] [LOG]    Total components: 11
[2025-10-23T04:31:21.029Z] [LOG]    Applicable components: 11
[2025-10-23T04:31:21.029Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T04:31:22.989Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:31:22.990Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:31:23.229Z] [LOG] 📊 Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:23.498Z] [LOG] 📊 Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:23.794Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:23.795Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:31:23.795Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:31:24.111Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:31:24.111Z] [LOG]    Employee ID: 0143e915-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:24.111Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:31:24.112Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:31:24.112Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-23T04:31:24.429Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:31:24.429Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-23T04:31:24.430Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-23T04:31:24.430Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-23T04:31:24.430Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:31:24.431Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:31:24.431Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:31:25.334Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:31:25.335Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:31:25.741Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:31:25.742Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:31:25.742Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:31:25.742Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:31:25.742Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:31:25.743Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:31:25.743Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:31:25.743Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:31:26.046Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:31:26.047Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:31:26.047Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:31:26.047Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:31:26.365Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:31:26.365Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:31:26.366Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:31:26.367Z] [LOG]       Current Time: 10:01:26
[2025-10-23T04:31:26.367Z] [LOG]       Expected Hours (scheduled → now): 1.52h
[2025-10-23T04:31:26.367Z] [LOG]       Actual Hours (check-in → now): 1.52h
[2025-10-23T04:31:26.368Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:31:26.368Z] [LOG]       Weekday: 120.52h
[2025-10-23T04:31:26.368Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:31:26.369Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:31:26.369Z] [LOG]       Total Expected: 134.02h
[2025-10-23T04:31:26.369Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:31:26.370Z] [LOG]       Weekday: 27.02h (includes 1.52h live)
[2025-10-23T04:31:26.370Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:31:26.370Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:31:26.371Z] [LOG]       Total Actual: 31.52h
[2025-10-23T04:31:26.371Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:31:26.371Z] [LOG]       Weekday: 120.52h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:26.372Z] [LOG]       Saturday: 13.50h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:26.372Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:26.372Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:26.373Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-23T04:31:26.373Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:31:26.373Z] [LOG]       Weekday: 27.02h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:26.374Z] [LOG]       Saturday: 4.50h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:26.374Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:26.374Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:26.374Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-23T04:31:26.375Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:31:26.375Z] [LOG]       Calculated At: Oct 23, 2025, 10:01:26
[2025-10-23T04:31:26.376Z] [LOG]       Expected Earned (until NOW): Rs.0.00
[2025-10-23T04:31:26.376Z] [LOG]       Actual Earned (until NOW): Rs.0.00
[2025-10-23T04:31:26.376Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:26.377Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-23T04:31:26.377Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:31:26.377Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-23T04:31:26.377Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:31:26.378Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:31:26.378Z] [LOG]    Base Salary (Full): Rs.NaN
[2025-10-23T04:31:26.378Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T04:31:26.379Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T04:31:26.379Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:31:26.379Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:31:26.379Z] [LOG]    Gross Salary: 0
[2025-10-23T04:31:26.380Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:31:26.380Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:31:26.380Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:26.380Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:31:26.381Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:26.381Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:31:26.382Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:26.382Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:31:26.382Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:26.383Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:31:26.383Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:26.383Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:31:26.384Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:26.384Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:31:26.384Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:26.385Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:31:26.385Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:26.385Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:31:26.385Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:26.386Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:31:26.386Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-23T04:31:26.386Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:31:26.387Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:31:26.387Z] [LOG] 💰 GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-23T04:31:26.387Z] [LOG]    Base Salary: 0
[2025-10-23T04:31:26.387Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:31:26.388Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:31:26.388Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:26.388Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:31:26.389Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:26.668Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:31:26.668Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:31:26.669Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:31:26.669Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:31:26.669Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T04:31:26.669Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:31:26.670Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:31:26.670Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-23T04:31:26.670Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:31:26.670Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:31:26.671Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:31:26.671Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-23T04:31:26.671Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:31:26.671Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-23T04:31:26.989Z] [LOG] Creating components for record 9c03c090-ed8b-4505-910a-99ca440adbee: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:31:26.990Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 0
}
[2025-10-23T04:31:27.308Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:31:27.647Z] [LOG] Created payroll_record_component: f1896179-6a2f-4b76-8dd5-c1d09210d2ef for Base Salary (Attendance-based)
[2025-10-23T04:31:28.275Z] [LOG] ✅ Financial balances updated successfully for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:28.275Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:31:28.276Z] [LOG] 
======================================================================
[2025-10-23T04:31:28.276Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ruvindu Hewabandu null
[2025-10-23T04:31:28.277Z] [LOG] ======================================================================
[2025-10-23T04:31:28.277Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-23T04:31:28.277Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-23T04:31:28.277Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T04:31:28.278Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:28.278Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:31:28.278Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:31:28.279Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:28.279Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-23T04:31:28.279Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:28.279Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:31:28.280Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:31:28.280Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:31:28.280Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:31:28.280Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:28.281Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-23T04:31:28.281Z] [LOG] ======================================================================

[2025-10-23T04:31:28.281Z] [LOG] ✅ Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-23T04:31:28.282Z] [LOG] 📊 Progress: 17/34 (50.0%)
[2025-10-23T04:31:28.282Z] [LOG] 
🧮 Processing: Sithira null (EMP000039)
[2025-10-23T04:31:28.282Z] [LOG] 📋 Record ID: 9c5627aa-c274-4e35-b1fb-52d6d51c11b9
[2025-10-23T04:31:28.283Z] [LOG] 
======================================================================
[2025-10-23T04:31:28.283Z] [LOG] 🧮 CALCULATING PAYROLL: Sithira null (EMP000039)
[2025-10-23T04:31:28.283Z] [LOG] ======================================================================
[2025-10-23T04:31:29.557Z] [LOG] 🔍 Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-23T04:31:29.557Z] [LOG]    Total components: 11
[2025-10-23T04:31:29.557Z] [LOG]    Applicable components: 11
[2025-10-23T04:31:29.558Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-23T04:31:31.470Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:31:31.470Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:31:31.714Z] [LOG] 📊 Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:31.948Z] [LOG] 📊 Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:32.269Z] [LOG] 📊 Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:32.270Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:31:32.270Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:31:32.594Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:31:32.594Z] [LOG]    Employee ID: 01441e19-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:32.594Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:31:32.595Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:31:32.595Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-23T04:31:32.923Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:31:32.924Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-23T04:31:32.924Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-23T04:31:32.924Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-23T04:31:32.924Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:31:32.925Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:31:32.925Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:31:33.709Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:31:33.710Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:31:34.028Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:31:34.028Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:31:34.029Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:31:34.029Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:31:34.029Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:31:34.030Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:31:34.030Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:31:34.030Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:31:34.372Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:31:34.373Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:31:34.373Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:31:34.373Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:31:34.669Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:31:34.670Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:31:34.670Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:31:34.671Z] [LOG]       Current Time: 10:01:34
[2025-10-23T04:31:34.671Z] [LOG]       Expected Hours (scheduled → now): 1.53h
[2025-10-23T04:31:34.672Z] [LOG]       Actual Hours (check-in → now): 1.53h
[2025-10-23T04:31:34.672Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:31:34.672Z] [LOG]       Weekday: 120.53h
[2025-10-23T04:31:34.673Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:31:34.673Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:31:34.673Z] [LOG]       Total Expected: 134.03h
[2025-10-23T04:31:34.673Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:31:34.674Z] [LOG]       Weekday: 27.03h (includes 1.53h live)
[2025-10-23T04:31:34.674Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:31:34.674Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:31:34.675Z] [LOG]       Total Actual: 31.53h
[2025-10-23T04:31:34.675Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:31:34.675Z] [LOG]       Weekday: 120.53h × Rs.188.24 = Rs.22687.87
[2025-10-23T04:31:34.675Z] [LOG]       Saturday: 13.50h × Rs.355.56 = Rs.4800.06
[2025-10-23T04:31:34.675Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:34.676Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:34.676Z] [LOG]       Total Expected Earned: Rs.27487.93
[2025-10-23T04:31:34.676Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:31:34.676Z] [LOG]       Weekday: 27.03h × Rs.188.24 = Rs.5087.43
[2025-10-23T04:31:34.676Z] [LOG]       Saturday: 4.50h × Rs.355.56 = Rs.1600.02
[2025-10-23T04:31:34.676Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:34.676Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:34.676Z] [LOG]       Total Actual Earned: Rs.6687.45
[2025-10-23T04:31:34.677Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:31:34.677Z] [LOG]       Calculated At: Oct 23, 2025, 10:01:34
[2025-10-23T04:31:34.677Z] [LOG]       Expected Earned (until NOW): Rs.27487.93
[2025-10-23T04:31:34.677Z] [LOG]       Actual Earned (until NOW): Rs.6687.45
[2025-10-23T04:31:34.677Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:34.678Z] [LOG]       Attendance Deduction: Rs.20800.48
[2025-10-23T04:31:34.678Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:31:34.678Z] [LOG]       📉 Shortfall: 102.50 hours (75.67% of expected)
[2025-10-23T04:31:34.678Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:31:34.678Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:31:34.678Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-23T04:31:34.678Z] [LOG]    Actual Earned Base: Rs.6687.45
[2025-10-23T04:31:34.678Z] [LOG]    Attendance Shortfall: Rs.20800.48
[2025-10-23T04:31:34.679Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:31:34.679Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:31:34.679Z] [LOG]    Gross Salary: 6687.450136822223
[2025-10-23T04:31:34.679Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:31:34.679Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:31:34.679Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:34.679Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:31:34.679Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:34.679Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:31:34.679Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:34.679Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:31:34.679Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:34.679Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:31:34.679Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:34.679Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:31:34.680Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:34.680Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:31:34.680Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:34.680Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:31:34.680Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:34.680Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:31:34.680Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:34.680Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:31:34.680Z] [LOG]    EPF/ETF calculated on: Rs.6687.45
[2025-10-23T04:31:34.680Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:31:34.680Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:31:34.680Z] [LOG] 💰 GROSS CALCULATION for Sithira null:
[2025-10-23T04:31:34.680Z] [LOG]    Base Salary: 40000
[2025-10-23T04:31:34.681Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:31:34.681Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:31:34.681Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:34.681Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:31:34.681Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:34.990Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:31:34.990Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:31:34.991Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:31:34.991Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:31:34.991Z] [LOG]    Actual Earned Base: Rs.6687.45
[2025-10-23T04:31:34.992Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:31:34.992Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:31:34.992Z] [LOG]    = Gross Salary: Rs.6687.45
[2025-10-23T04:31:34.993Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:31:34.993Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:31:34.993Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:31:34.993Z] [LOG]    Gross Salary: Rs.6687.45
[2025-10-23T04:31:34.994Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:31:34.994Z] [LOG]    = NET SALARY: Rs.6687.45
[2025-10-23T04:31:35.313Z] [LOG] Creating components for record 9c5627aa-c274-4e35-b1fb-52d6d51c11b9: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:31:35.314Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 6687.450136822223
}
[2025-10-23T04:31:35.628Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:31:35.957Z] [LOG] Created payroll_record_component: 8c2a6877-a833-448f-a6d8-1983839f8926 for Base Salary (Attendance-based)
[2025-10-23T04:31:36.616Z] [LOG] ✅ Financial balances updated successfully for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:36.616Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:31:36.616Z] [LOG] 
======================================================================
[2025-10-23T04:31:36.617Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sithira null
[2025-10-23T04:31:36.617Z] [LOG] ======================================================================
[2025-10-23T04:31:36.617Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-23T04:31:36.618Z] [LOG]    Actual Earned Base (Attendance-based): Rs.6687.45
[2025-10-23T04:31:36.618Z] [LOG]    Attendance Shortfall: Rs.20800.48
[2025-10-23T04:31:36.618Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:36.618Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:31:36.619Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:31:36.619Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:36.619Z] [LOG]    GROSS SALARY: Rs.6687.45
[2025-10-23T04:31:36.620Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:36.620Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:31:36.620Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:31:36.621Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:31:36.621Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:31:36.621Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:36.622Z] [LOG]    NET SALARY: Rs.6687.45
[2025-10-23T04:31:36.622Z] [LOG] ======================================================================

[2025-10-23T04:31:36.622Z] [LOG] ✅ Sithira null: Calculation completed successfully
[2025-10-23T04:31:36.622Z] [LOG] 📊 Progress: 18/34 (52.9%)
[2025-10-23T04:31:36.622Z] [LOG] 
🧮 Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-23T04:31:36.623Z] [LOG] 📋 Record ID: 9d45d00b-e258-475f-995d-f832022e78a7
[2025-10-23T04:31:36.623Z] [LOG] 
======================================================================
[2025-10-23T04:31:36.623Z] [LOG] 🧮 CALCULATING PAYROLL: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-23T04:31:36.623Z] [LOG] ======================================================================
[2025-10-23T04:31:37.882Z] [LOG] 🔍 Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-23T04:31:37.883Z] [LOG]    Total components: 11
[2025-10-23T04:31:37.883Z] [LOG]    Applicable components: 11
[2025-10-23T04:31:37.883Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-23T04:31:40.431Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:31:40.431Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:31:40.758Z] [LOG] 📊 Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:41.071Z] [LOG] 📊 Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:41.390Z] [LOG] 📊 Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:41.390Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:31:41.391Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:31:41.608Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:31:41.609Z] [LOG]    Employee ID: 0144315c-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:41.609Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:31:41.610Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:31:41.610Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T04:31:41.838Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:31:41.839Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T04:31:41.839Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T04:31:41.839Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T04:31:41.840Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:31:41.840Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:31:41.840Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:31:42.673Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:31:42.674Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:31:43.000Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:31:43.001Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:31:43.001Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:31:43.002Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:31:43.002Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:31:43.002Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:31:43.002Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:31:43.003Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:31:43.251Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:31:43.252Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:31:43.252Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:31:43.253Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:31:43.528Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:31:43.528Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:31:43.529Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:31:43.529Z] [LOG]       Current Time: 10:01:43
[2025-10-23T04:31:43.530Z] [LOG]       Expected Hours (scheduled → now): 1.53h
[2025-10-23T04:31:43.530Z] [LOG]       Actual Hours (check-in → now): 1.53h
[2025-10-23T04:31:43.530Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:31:43.531Z] [LOG]       Weekday: 120.53h
[2025-10-23T04:31:43.531Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:31:43.531Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:31:43.532Z] [LOG]       Total Expected: 134.03h
[2025-10-23T04:31:43.532Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:31:43.532Z] [LOG]       Weekday: 27.03h (includes 1.53h live)
[2025-10-23T04:31:43.533Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:31:43.533Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:31:43.533Z] [LOG]       Total Actual: 31.53h
[2025-10-23T04:31:43.534Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:31:43.534Z] [LOG]       Weekday: 120.53h × Rs.235.29 = Rs.28359.21
[2025-10-23T04:31:43.534Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T04:31:43.535Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:43.535Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:43.535Z] [LOG]       Total Expected Earned: Rs.34359.15
[2025-10-23T04:31:43.536Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:31:43.536Z] [LOG]       Weekday: 27.03h × Rs.235.29 = Rs.6359.60
[2025-10-23T04:31:43.536Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T04:31:43.536Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:43.537Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:43.537Z] [LOG]       Total Actual Earned: Rs.8359.58
[2025-10-23T04:31:43.538Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:31:43.538Z] [LOG]       Calculated At: Oct 23, 2025, 10:01:43
[2025-10-23T04:31:43.539Z] [LOG]       Expected Earned (until NOW): Rs.34359.15
[2025-10-23T04:31:43.539Z] [LOG]       Actual Earned (until NOW): Rs.8359.58
[2025-10-23T04:31:43.539Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:43.540Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T04:31:43.540Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:31:43.540Z] [LOG]       📉 Shortfall: 102.50 hours (75.67% of expected)
[2025-10-23T04:31:43.541Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:31:43.541Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:31:43.541Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:31:43.541Z] [LOG]    Actual Earned Base: Rs.8359.58
[2025-10-23T04:31:43.542Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T04:31:43.542Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:31:43.542Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:31:43.543Z] [LOG]    Gross Salary: 8359.576417533333
[2025-10-23T04:31:43.543Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:31:43.543Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:31:43.543Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:43.543Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:31:43.544Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:43.544Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:31:43.544Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:43.544Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:31:43.544Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:43.544Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:31:43.544Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:43.544Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:31:43.544Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:43.544Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:31:43.544Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:43.544Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:31:43.545Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:43.545Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:31:43.545Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:43.545Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:31:43.545Z] [LOG]    EPF/ETF calculated on: Rs.8359.58
[2025-10-23T04:31:43.545Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:31:43.545Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:31:43.545Z] [LOG] 💰 GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-23T04:31:43.545Z] [LOG]    Base Salary: 50000
[2025-10-23T04:31:43.546Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:31:43.546Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:31:43.546Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:43.546Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:31:43.546Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:43.807Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:31:43.807Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:31:43.807Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:31:43.808Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:31:43.808Z] [LOG]    Actual Earned Base: Rs.8359.58
[2025-10-23T04:31:43.808Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:31:43.809Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:31:43.809Z] [LOG]    = Gross Salary: Rs.8359.58
[2025-10-23T04:31:43.809Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:31:43.809Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:31:43.810Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:31:43.810Z] [LOG]    Gross Salary: Rs.8359.58
[2025-10-23T04:31:43.810Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:31:43.811Z] [LOG]    = NET SALARY: Rs.8359.58
[2025-10-23T04:31:44.048Z] [LOG] Creating components for record 9d45d00b-e258-475f-995d-f832022e78a7: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:31:44.049Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8359.576417533333
}
[2025-10-23T04:31:44.270Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:31:44.502Z] [LOG] Created payroll_record_component: 9dfb1a51-7ad2-4a9a-b23f-692c6e88dc12 for Base Salary (Attendance-based)
[2025-10-23T04:31:44.918Z] [LOG] ✅ Financial balances updated successfully for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:44.919Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:31:44.919Z] [LOG] 
======================================================================
[2025-10-23T04:31:44.919Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: G.M Supathala Sadaru Madhushan null
[2025-10-23T04:31:44.920Z] [LOG] ======================================================================
[2025-10-23T04:31:44.920Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:31:44.920Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8359.58
[2025-10-23T04:31:44.921Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T04:31:44.921Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:44.921Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:31:44.922Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:31:44.922Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:44.922Z] [LOG]    GROSS SALARY: Rs.8359.58
[2025-10-23T04:31:44.922Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:44.923Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:31:44.923Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:31:44.923Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:31:44.923Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:31:44.924Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:44.924Z] [LOG]    NET SALARY: Rs.8359.58
[2025-10-23T04:31:44.924Z] [LOG] ======================================================================

[2025-10-23T04:31:44.924Z] [LOG] ✅ G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-23T04:31:44.925Z] [LOG] 📊 Progress: 19/34 (55.9%)
[2025-10-23T04:31:44.925Z] [LOG] 
🧮 Processing: Prasanthan null (EMP000001)
[2025-10-23T04:31:44.925Z] [LOG] 📋 Record ID: 9e18a583-e9e5-4716-8a0b-a3e3b7bb2a06
[2025-10-23T04:31:44.925Z] [LOG] 
======================================================================
[2025-10-23T04:31:44.926Z] [LOG] 🧮 CALCULATING PAYROLL: Prasanthan null (EMP000001)
[2025-10-23T04:31:44.926Z] [LOG] ======================================================================
[2025-10-23T04:31:45.874Z] [LOG] 🔍 Component filtering for employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-23T04:31:45.874Z] [LOG]    Total components: 11
[2025-10-23T04:31:45.875Z] [LOG]    Applicable components: 11
[2025-10-23T04:31:45.875Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T04:31:47.635Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:31:47.635Z] [LOG] 🔄 Processing financial records for employee 014397c7-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:31:47.970Z] [LOG] 📊 Found 0 active loans for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:48.225Z] [LOG] 📊 Found 0 active advances for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:48.611Z] [LOG] 📊 Found 0 approved bonuses for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:48.612Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:31:48.612Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:31:49.010Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:31:49.010Z] [LOG]    Employee ID: 014397c7-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:49.011Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:31:49.011Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:31:49.011Z] [LOG]    Base Salary (Full Month): Rs.150000.00
[2025-10-23T04:31:49.393Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:31:49.394Z] [LOG]       Daily Salary: Rs.6000.00
[2025-10-23T04:31:49.394Z] [LOG]       Weekday Hourly Rate: Rs.705.88
[2025-10-23T04:31:49.394Z] [LOG]       Saturday Hourly Rate: Rs.1333.33
[2025-10-23T04:31:49.395Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:31:49.395Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:31:49.395Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:31:50.350Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:31:50.350Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:31:50.671Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:31:50.671Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:31:50.672Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:31:50.672Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:31:50.672Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:31:50.672Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:31:50.672Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:31:50.673Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:31:51.008Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:31:51.008Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:31:51.008Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:31:51.008Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:31:51.326Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:31:51.326Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:31:51.326Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:31:51.327Z] [LOG]       Current Time: 10:01:51
[2025-10-23T04:31:51.327Z] [LOG]       Expected Hours (scheduled → now): 1.53h
[2025-10-23T04:31:51.327Z] [LOG]       Actual Hours (check-in → now): 1.53h
[2025-10-23T04:31:51.327Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:31:51.328Z] [LOG]       Weekday: 120.53h
[2025-10-23T04:31:51.328Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:31:51.328Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:31:51.328Z] [LOG]       Total Expected: 134.03h
[2025-10-23T04:31:51.328Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:31:51.328Z] [LOG]       Weekday: 27.03h (includes 1.53h live)
[2025-10-23T04:31:51.328Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:31:51.329Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:31:51.329Z] [LOG]       Total Actual: 31.53h
[2025-10-23T04:31:51.329Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:31:51.329Z] [LOG]       Weekday: 120.53h × Rs.705.88 = Rs.85080.37
[2025-10-23T04:31:51.329Z] [LOG]       Saturday: 13.50h × Rs.1333.33 = Rs.17999.95
[2025-10-23T04:31:51.329Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:51.329Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:51.330Z] [LOG]       Total Expected Earned: Rs.103080.32
[2025-10-23T04:31:51.330Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:31:51.330Z] [LOG]       Weekday: 27.03h × Rs.705.88 = Rs.19080.59
[2025-10-23T04:31:51.330Z] [LOG]       Saturday: 4.50h × Rs.1333.33 = Rs.5999.98
[2025-10-23T04:31:51.330Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:31:51.330Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:51.330Z] [LOG]       Total Actual Earned: Rs.25080.57
[2025-10-23T04:31:51.331Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:31:51.331Z] [LOG]       Calculated At: Oct 23, 2025, 10:01:51
[2025-10-23T04:31:51.331Z] [LOG]       Expected Earned (until NOW): Rs.103080.32
[2025-10-23T04:31:51.331Z] [LOG]       Actual Earned (until NOW): Rs.25080.57
[2025-10-23T04:31:51.331Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:31:51.331Z] [LOG]       Attendance Deduction: Rs.77999.75
[2025-10-23T04:31:51.331Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:31:51.331Z] [LOG]       📉 Shortfall: 102.50 hours (75.67% of expected)
[2025-10-23T04:31:51.332Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:31:51.332Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:31:51.332Z] [LOG]    Base Salary (Full): Rs.150000.00
[2025-10-23T04:31:51.332Z] [LOG]    Actual Earned Base: Rs.25080.57
[2025-10-23T04:31:51.332Z] [LOG]    Attendance Shortfall: Rs.77999.75
[2025-10-23T04:31:51.332Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:31:51.332Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:31:51.332Z] [LOG]    Gross Salary: 25080.57355468889
[2025-10-23T04:31:51.332Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:31:51.332Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:31:51.332Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:51.333Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:31:51.333Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:51.333Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:31:51.333Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:51.333Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:31:51.333Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:51.333Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:31:51.333Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:51.334Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:31:51.334Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:51.334Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:31:51.334Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:51.334Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:31:51.334Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:51.335Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:31:51.335Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:51.335Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:31:51.335Z] [LOG]    EPF/ETF calculated on: Rs.25080.57
[2025-10-23T04:31:51.335Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:31:51.335Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:31:51.335Z] [LOG] 💰 GROSS CALCULATION for Prasanthan null:
[2025-10-23T04:31:51.335Z] [LOG]    Base Salary: 150000
[2025-10-23T04:31:51.335Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:31:51.335Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:31:51.336Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:51.336Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:31:51.336Z] [LOG]    Fixed amount: 0
[2025-10-23T04:31:51.630Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:31:51.630Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:31:51.631Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:31:51.631Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:31:51.631Z] [LOG]    Actual Earned Base: Rs.25080.57
[2025-10-23T04:31:51.631Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:31:51.632Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:31:51.632Z] [LOG]    = Gross Salary: Rs.25080.57
[2025-10-23T04:31:51.632Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:31:51.632Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:31:51.632Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:31:51.633Z] [LOG]    Gross Salary: Rs.25080.57
[2025-10-23T04:31:51.633Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:31:51.633Z] [LOG]    = NET SALARY: Rs.25080.57
[2025-10-23T04:31:51.959Z] [LOG] Creating components for record 9e18a583-e9e5-4716-8a0b-a3e3b7bb2a06: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:31:51.960Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 25080.57355468889
}
[2025-10-23T04:31:52.683Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:31:53.003Z] [LOG] Created payroll_record_component: 7c360d5d-4937-433b-b2b5-302d76e67a71 for Base Salary (Attendance-based)
[2025-10-23T04:31:53.648Z] [LOG] ✅ Financial balances updated successfully for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:53.648Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:31:53.649Z] [LOG] 
======================================================================
[2025-10-23T04:31:53.649Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Prasanthan null
[2025-10-23T04:31:53.649Z] [LOG] ======================================================================
[2025-10-23T04:31:53.649Z] [LOG]    Base Salary (Full): Rs.150000.00
[2025-10-23T04:31:53.650Z] [LOG]    Actual Earned Base (Attendance-based): Rs.25080.57
[2025-10-23T04:31:53.650Z] [LOG]    Attendance Shortfall: Rs.77999.75
[2025-10-23T04:31:53.650Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:53.650Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:31:53.651Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:31:53.651Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:53.651Z] [LOG]    GROSS SALARY: Rs.25080.57
[2025-10-23T04:31:53.652Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:53.652Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:31:53.652Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:31:53.652Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:31:53.653Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:31:53.653Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:31:53.653Z] [LOG]    NET SALARY: Rs.25080.57
[2025-10-23T04:31:53.653Z] [LOG] ======================================================================

[2025-10-23T04:31:53.654Z] [LOG] ✅ Prasanthan null: Calculation completed successfully
[2025-10-23T04:31:53.654Z] [LOG] 📊 Progress: 20/34 (58.8%)
[2025-10-23T04:31:53.654Z] [LOG] 
🧮 Processing: Uthpala null (EMP000006)
[2025-10-23T04:31:53.655Z] [LOG] 📋 Record ID: a38f5399-dd86-462d-b648-7b09c3b3d430
[2025-10-23T04:31:53.655Z] [LOG] 
======================================================================
[2025-10-23T04:31:53.655Z] [LOG] 🧮 CALCULATING PAYROLL: Uthpala null (EMP000006)
[2025-10-23T04:31:53.655Z] [LOG] ======================================================================
[2025-10-23T04:31:54.791Z] [LOG] 🔍 Component filtering for employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-23T04:31:54.791Z] [LOG]    Total components: 11
[2025-10-23T04:31:54.791Z] [LOG]    Applicable components: 11
[2025-10-23T04:31:54.792Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-23T04:31:58.572Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:31:58.572Z] [LOG] 🔄 Processing financial records for employee 0143a539-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:31:58.828Z] [LOG] 📊 Found 0 active loans for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:59.162Z] [LOG] 📊 Found 0 active advances for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:59.384Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:59.385Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:31:59.385Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:31:59.666Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:31:59.666Z] [LOG]    Employee ID: 0143a539-7105-11f0-a50f-98e743540430
[2025-10-23T04:31:59.666Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:31:59.667Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:31:59.667Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-23T04:31:59.895Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:31:59.895Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-23T04:31:59.895Z] [LOG]       Weekday Hourly Rate: Rs.500.00
[2025-10-23T04:31:59.895Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-23T04:31:59.896Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:31:59.896Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:31:59.896Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:32:00.606Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:32:00.606Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:32:00.846Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:32:00.847Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:32:00.847Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:32:00.847Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:32:00.848Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:32:00.848Z] [LOG]          2. 2025-10-15 (Weekday): 7.50h
[2025-10-23T04:32:00.848Z] [LOG]          3. 2025-10-16 (Weekday): 7.50h
[2025-10-23T04:32:00.848Z] [LOG]          4. 2025-10-22 (Weekday): 7.50h
[2025-10-23T04:32:01.230Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:32:01.230Z] [LOG]          Weekday: 22.50h
[2025-10-23T04:32:01.230Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:32:01.231Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:32:01.549Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:32:01.550Z] [LOG]       Scheduled Start: 09:30:00
[2025-10-23T04:32:01.550Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:32:01.551Z] [LOG]       Current Time: 10:02:01
[2025-10-23T04:32:01.551Z] [LOG]       Expected Hours (scheduled → now): 0.53h
[2025-10-23T04:32:01.551Z] [LOG]       Actual Hours (check-in → now): 1.53h
[2025-10-23T04:32:01.551Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:32:01.551Z] [LOG]       Weekday: 112.53h
[2025-10-23T04:32:01.552Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:32:01.552Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:32:01.552Z] [LOG]       Total Expected: 126.03h
[2025-10-23T04:32:01.552Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:32:01.552Z] [LOG]       Weekday: 24.03h (includes 1.53h live)
[2025-10-23T04:32:01.552Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:32:01.553Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:32:01.553Z] [LOG]       Total Actual: 28.53h
[2025-10-23T04:32:01.553Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:32:01.553Z] [LOG]       Weekday: 112.53h × Rs.500.00 = Rs.56266.88
[2025-10-23T04:32:01.553Z] [LOG]       Saturday: 13.50h × Rs.888.89 = Rs.12000.01
[2025-10-23T04:32:01.554Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:01.554Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:01.554Z] [LOG]       Total Expected Earned: Rs.68266.90
[2025-10-23T04:32:01.554Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:32:01.554Z] [LOG]       Weekday: 24.03h × Rs.500.00 = Rs.12016.88
[2025-10-23T04:32:01.554Z] [LOG]       Saturday: 4.50h × Rs.888.89 = Rs.4000.01
[2025-10-23T04:32:01.554Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:01.555Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:01.555Z] [LOG]       Total Actual Earned: Rs.16016.89
[2025-10-23T04:32:01.555Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:32:01.555Z] [LOG]       Calculated At: Oct 23, 2025, 10:02:01
[2025-10-23T04:32:01.556Z] [LOG]       Expected Earned (until NOW): Rs.68266.90
[2025-10-23T04:32:01.556Z] [LOG]       Actual Earned (until NOW): Rs.16016.89
[2025-10-23T04:32:01.556Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:01.556Z] [LOG]       Attendance Deduction: Rs.52250.01
[2025-10-23T04:32:01.556Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:32:01.556Z] [LOG]       📉 Shortfall: 97.50 hours (76.54% of expected)
[2025-10-23T04:32:01.556Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:32:01.556Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:32:01.556Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-23T04:32:01.556Z] [LOG]    Actual Earned Base: Rs.16016.89
[2025-10-23T04:32:01.556Z] [LOG]    Attendance Shortfall: Rs.52250.01
[2025-10-23T04:32:01.556Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:32:01.557Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:32:01.557Z] [LOG]    Gross Salary: 16016.886805555558
[2025-10-23T04:32:01.557Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:32:01.557Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:32:01.557Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:01.557Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:32:01.557Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:01.558Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:32:01.558Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:01.558Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:32:01.558Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:01.558Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:32:01.558Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:01.558Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:32:01.559Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:01.559Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:32:01.559Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:01.559Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:32:01.559Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:01.560Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:32:01.560Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:01.560Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:32:01.560Z] [LOG]    EPF/ETF calculated on: Rs.16016.89
[2025-10-23T04:32:01.560Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:32:01.560Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:32:01.560Z] [LOG] 💰 GROSS CALCULATION for Uthpala null:
[2025-10-23T04:32:01.561Z] [LOG]    Base Salary: 100000
[2025-10-23T04:32:01.561Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:32:01.561Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:32:01.561Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:01.561Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:32:01.562Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:01.868Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:32:01.869Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:32:01.869Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:32:01.869Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:32:01.869Z] [LOG]    Actual Earned Base: Rs.16016.89
[2025-10-23T04:32:01.870Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:32:01.870Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:32:01.870Z] [LOG]    = Gross Salary: Rs.16016.89
[2025-10-23T04:32:01.870Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:32:01.870Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:32:01.870Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:32:01.871Z] [LOG]    Gross Salary: Rs.16016.89
[2025-10-23T04:32:01.871Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:32:01.871Z] [LOG]    = NET SALARY: Rs.16016.89
[2025-10-23T04:32:02.188Z] [LOG] Creating components for record a38f5399-dd86-462d-b648-7b09c3b3d430: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:32:02.189Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 16016.886805555558
}
[2025-10-23T04:32:02.510Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:32:02.852Z] [LOG] Created payroll_record_component: 4975473d-d599-4409-b995-a3399ac4955f for Base Salary (Attendance-based)
[2025-10-23T04:32:03.584Z] [LOG] ✅ Financial balances updated successfully for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:03.584Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:32:03.584Z] [LOG] 
======================================================================
[2025-10-23T04:32:03.585Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Uthpala null
[2025-10-23T04:32:03.585Z] [LOG] ======================================================================
[2025-10-23T04:32:03.585Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-23T04:32:03.585Z] [LOG]    Actual Earned Base (Attendance-based): Rs.16016.89
[2025-10-23T04:32:03.586Z] [LOG]    Attendance Shortfall: Rs.52250.01
[2025-10-23T04:32:03.586Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:03.586Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:32:03.586Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:32:03.587Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:03.587Z] [LOG]    GROSS SALARY: Rs.16016.89
[2025-10-23T04:32:03.587Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:03.587Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:32:03.588Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:32:03.588Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:32:03.588Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:32:03.588Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:03.588Z] [LOG]    NET SALARY: Rs.16016.89
[2025-10-23T04:32:03.589Z] [LOG] ======================================================================

[2025-10-23T04:32:03.589Z] [LOG] ✅ Uthpala null: Calculation completed successfully
[2025-10-23T04:32:03.589Z] [LOG] 📊 Progress: 21/34 (61.8%)
[2025-10-23T04:32:03.589Z] [LOG] 
🧮 Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-23T04:32:03.590Z] [LOG] 📋 Record ID: b87e8125-a3d7-421b-9f8c-c3ff83e5f0ae
[2025-10-23T04:32:03.590Z] [LOG] 
======================================================================
[2025-10-23T04:32:03.590Z] [LOG] 🧮 CALCULATING PAYROLL: Sujevan Selvaratnam null (EMP000026)
[2025-10-23T04:32:03.590Z] [LOG] ======================================================================
[2025-10-23T04:32:04.749Z] [LOG] 🔍 Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-23T04:32:04.749Z] [LOG]    Total components: 11
[2025-10-23T04:32:04.750Z] [LOG]    Applicable components: 11
[2025-10-23T04:32:04.750Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T04:32:06.518Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:32:06.518Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:32:06.828Z] [LOG] 📊 Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:07.148Z] [LOG] 📊 Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:07.482Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:07.482Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:32:07.483Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:32:07.808Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:32:07.808Z] [LOG]    Employee ID: 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:07.808Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:32:07.809Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:32:07.809Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-23T04:32:08.154Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:32:08.155Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-23T04:32:08.155Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-23T04:32:08.155Z] [LOG]       Saturday Hourly Rate: Rs.0.01
[2025-10-23T04:32:08.155Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:32:08.155Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:32:08.155Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:32:09.070Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:32:09.070Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:32:09.388Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:32:09.388Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:32:09.389Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:32:09.389Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:32:09.389Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:32:09.389Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:32:09.389Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:32:09.389Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:32:09.634Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:32:09.635Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:32:09.635Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:32:09.635Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:32:09.911Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:32:09.911Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:32:09.911Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:32:09.912Z] [LOG]       Current Time: 10:02:09
[2025-10-23T04:32:09.912Z] [LOG]       Expected Hours (scheduled → now): 1.54h
[2025-10-23T04:32:09.913Z] [LOG]       Actual Hours (check-in → now): 1.54h
[2025-10-23T04:32:09.913Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:32:09.913Z] [LOG]       Weekday: 120.54h
[2025-10-23T04:32:09.913Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:32:09.914Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:32:09.914Z] [LOG]       Total Expected: 134.04h
[2025-10-23T04:32:09.914Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:32:09.914Z] [LOG]       Weekday: 27.04h (includes 1.54h live)
[2025-10-23T04:32:09.914Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:32:09.914Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:32:09.914Z] [LOG]       Total Actual: 31.54h
[2025-10-23T04:32:09.915Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:32:09.915Z] [LOG]       Weekday: 120.54h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:09.915Z] [LOG]       Saturday: 13.50h × Rs.0.01 = Rs.0.14
[2025-10-23T04:32:09.915Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:09.915Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:09.915Z] [LOG]       Total Expected Earned: Rs.0.14
[2025-10-23T04:32:09.915Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:32:09.916Z] [LOG]       Weekday: 27.04h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:09.916Z] [LOG]       Saturday: 4.50h × Rs.0.01 = Rs.0.04
[2025-10-23T04:32:09.916Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:09.916Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:09.916Z] [LOG]       Total Actual Earned: Rs.0.04
[2025-10-23T04:32:09.917Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:32:09.917Z] [LOG]       Calculated At: Oct 23, 2025, 10:02:09
[2025-10-23T04:32:09.917Z] [LOG]       Expected Earned (until NOW): Rs.0.14
[2025-10-23T04:32:09.917Z] [LOG]       Actual Earned (until NOW): Rs.0.04
[2025-10-23T04:32:09.917Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:09.917Z] [LOG]       Attendance Deduction: Rs.0.09
[2025-10-23T04:32:09.917Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:32:09.918Z] [LOG]       📉 Shortfall: 102.50 hours (66.67% of expected)
[2025-10-23T04:32:09.918Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:32:09.918Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:32:09.918Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-23T04:32:09.918Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-23T04:32:09.918Z] [LOG]    Attendance Shortfall: Rs.0.09
[2025-10-23T04:32:09.919Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:32:09.919Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:32:09.919Z] [LOG]    Gross Salary: 0.045
[2025-10-23T04:32:09.919Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:32:09.919Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:32:09.919Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:09.919Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:32:09.920Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:09.920Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:32:09.920Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:09.920Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:32:09.921Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:09.921Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:32:09.921Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:09.921Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:32:09.921Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:09.921Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:32:09.922Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:09.922Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:32:09.922Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:09.922Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:32:09.922Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:09.922Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:32:09.923Z] [LOG]    EPF/ETF calculated on: Rs.0.04
[2025-10-23T04:32:09.923Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:32:09.923Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:32:09.923Z] [LOG] 💰 GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-23T04:32:09.923Z] [LOG]    Base Salary: 1
[2025-10-23T04:32:09.924Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:32:09.924Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:32:09.924Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:09.924Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:32:09.924Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:10.209Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:32:10.209Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:32:10.210Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:32:10.210Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:32:10.210Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-23T04:32:10.210Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:32:10.210Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:32:10.211Z] [LOG]    = Gross Salary: Rs.0.04
[2025-10-23T04:32:10.211Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:32:10.211Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:32:10.211Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:32:10.212Z] [LOG]    Gross Salary: Rs.0.04
[2025-10-23T04:32:10.212Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:32:10.212Z] [LOG]    = NET SALARY: Rs.0.04
[2025-10-23T04:32:10.509Z] [LOG] Creating components for record b87e8125-a3d7-421b-9f8c-c3ff83e5f0ae: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:32:10.509Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 0.045
}
[2025-10-23T04:32:10.832Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:32:11.163Z] [LOG] Created payroll_record_component: 14e97a9f-ecad-4e7d-80e9-25f022c59de6 for Base Salary (Attendance-based)
[2025-10-23T04:32:11.798Z] [LOG] ✅ Financial balances updated successfully for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:11.799Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:32:11.799Z] [LOG] 
======================================================================
[2025-10-23T04:32:11.799Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sujevan Selvaratnam null
[2025-10-23T04:32:11.800Z] [LOG] ======================================================================
[2025-10-23T04:32:11.800Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-23T04:32:11.800Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.04
[2025-10-23T04:32:11.801Z] [LOG]    Attendance Shortfall: Rs.0.09
[2025-10-23T04:32:11.801Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:11.801Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:32:11.802Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:32:11.802Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:11.802Z] [LOG]    GROSS SALARY: Rs.0.04
[2025-10-23T04:32:11.802Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:11.803Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:32:11.803Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:32:11.803Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:32:11.804Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:32:11.804Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:11.804Z] [LOG]    NET SALARY: Rs.0.04
[2025-10-23T04:32:11.805Z] [LOG] ======================================================================

[2025-10-23T04:32:11.805Z] [LOG] ✅ Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-23T04:32:11.805Z] [LOG] 📊 Progress: 22/34 (64.7%)
[2025-10-23T04:32:11.805Z] [LOG] 
🧮 Processing: Franklin null (EMP000018)
[2025-10-23T04:32:11.806Z] [LOG] 📋 Record ID: baa8e140-535d-4558-b6d6-b1f13d89e500
[2025-10-23T04:32:11.806Z] [LOG] 
======================================================================
[2025-10-23T04:32:11.806Z] [LOG] 🧮 CALCULATING PAYROLL: Franklin null (EMP000018)
[2025-10-23T04:32:11.807Z] [LOG] ======================================================================
[2025-10-23T04:32:13.096Z] [LOG] 🔍 Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-23T04:32:13.096Z] [LOG]    Total components: 11
[2025-10-23T04:32:13.096Z] [LOG]    Applicable components: 11
[2025-10-23T04:32:13.097Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-23T04:32:14.744Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:32:14.744Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:32:14.991Z] [LOG] 📊 Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:15.222Z] [LOG] 📊 Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:15.452Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:15.453Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:32:15.454Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:32:15.670Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:32:15.671Z] [LOG]    Employee ID: 0143c037-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:15.673Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:32:15.673Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:32:15.673Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T04:32:15.949Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:32:15.949Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T04:32:15.949Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T04:32:15.950Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T04:32:15.950Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:32:15.950Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:32:15.950Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:32:16.908Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:32:16.909Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:32:17.245Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:32:17.245Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:32:17.245Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:32:17.246Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:32:17.246Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:32:17.246Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:32:17.247Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:32:17.247Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:32:17.565Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:32:17.565Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:32:17.566Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:32:17.566Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:32:17.872Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:32:17.872Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:32:17.872Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:32:17.873Z] [LOG]       Current Time: 10:02:17
[2025-10-23T04:32:17.873Z] [LOG]       Expected Hours (scheduled → now): 1.54h
[2025-10-23T04:32:17.874Z] [LOG]       Actual Hours (check-in → now): 1.54h
[2025-10-23T04:32:17.874Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:32:17.874Z] [LOG]       Weekday: 120.54h
[2025-10-23T04:32:17.874Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:32:17.875Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:32:17.875Z] [LOG]       Total Expected: 134.04h
[2025-10-23T04:32:17.875Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:32:17.875Z] [LOG]       Weekday: 27.04h (includes 1.54h live)
[2025-10-23T04:32:17.876Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:32:17.876Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:32:17.876Z] [LOG]       Total Actual: 31.54h
[2025-10-23T04:32:17.876Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:32:17.877Z] [LOG]       Weekday: 120.54h × Rs.235.29 = Rs.28361.46
[2025-10-23T04:32:17.877Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T04:32:17.877Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:17.877Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:17.878Z] [LOG]       Total Expected Earned: Rs.34361.40
[2025-10-23T04:32:17.878Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:32:17.878Z] [LOG]       Weekday: 27.04h × Rs.235.29 = Rs.6361.84
[2025-10-23T04:32:17.878Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T04:32:17.878Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:17.879Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:17.879Z] [LOG]       Total Actual Earned: Rs.8361.82
[2025-10-23T04:32:17.879Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:32:17.880Z] [LOG]       Calculated At: Oct 23, 2025, 10:02:17
[2025-10-23T04:32:17.880Z] [LOG]       Expected Earned (until NOW): Rs.34361.40
[2025-10-23T04:32:17.880Z] [LOG]       Actual Earned (until NOW): Rs.8361.82
[2025-10-23T04:32:17.880Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:17.880Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T04:32:17.880Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:32:17.881Z] [LOG]       📉 Shortfall: 102.50 hours (75.67% of expected)
[2025-10-23T04:32:17.881Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:32:17.881Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:32:17.881Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:32:17.881Z] [LOG]    Actual Earned Base: Rs.8361.82
[2025-10-23T04:32:17.881Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T04:32:17.882Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:32:17.882Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:32:17.882Z] [LOG]    Gross Salary: 8361.821084133333
[2025-10-23T04:32:17.882Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:32:17.882Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:32:17.883Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:17.883Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:32:17.883Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:17.883Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:32:17.883Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:17.883Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:32:17.884Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:17.884Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:32:17.884Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:17.884Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:32:17.884Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:17.884Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:32:17.885Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:17.885Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:32:17.885Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:17.885Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:32:17.886Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:17.886Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:32:17.886Z] [LOG]    EPF/ETF calculated on: Rs.8361.82
[2025-10-23T04:32:17.886Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:32:17.886Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:32:17.887Z] [LOG] 💰 GROSS CALCULATION for Franklin null:
[2025-10-23T04:32:17.887Z] [LOG]    Base Salary: 50000
[2025-10-23T04:32:17.887Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:32:17.887Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:32:17.887Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:17.887Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:32:17.887Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:18.204Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:32:18.204Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:32:18.205Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:32:18.205Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:32:18.205Z] [LOG]    Actual Earned Base: Rs.8361.82
[2025-10-23T04:32:18.205Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:32:18.205Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:32:18.205Z] [LOG]    = Gross Salary: Rs.8361.82
[2025-10-23T04:32:18.206Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:32:18.206Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:32:18.206Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:32:18.206Z] [LOG]    Gross Salary: Rs.8361.82
[2025-10-23T04:32:18.206Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:32:18.206Z] [LOG]    = NET SALARY: Rs.8361.82
[2025-10-23T04:32:18.510Z] [LOG] Creating components for record baa8e140-535d-4558-b6d6-b1f13d89e500: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:32:18.511Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8361.821084133333
}
[2025-10-23T04:32:18.998Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:32:19.322Z] [LOG] Created payroll_record_component: 3dbfe5c2-55b7-466e-9c9c-e5391c4043f0 for Base Salary (Attendance-based)
[2025-10-23T04:32:19.901Z] [LOG] ✅ Financial balances updated successfully for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:19.902Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:32:19.902Z] [LOG] 
======================================================================
[2025-10-23T04:32:19.902Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Franklin null
[2025-10-23T04:32:19.903Z] [LOG] ======================================================================
[2025-10-23T04:32:19.903Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:32:19.903Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8361.82
[2025-10-23T04:32:19.904Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T04:32:19.904Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:19.904Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:32:19.905Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:32:19.905Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:19.905Z] [LOG]    GROSS SALARY: Rs.8361.82
[2025-10-23T04:32:19.905Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:19.906Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:32:19.906Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:32:19.906Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:32:19.907Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:32:19.907Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:19.907Z] [LOG]    NET SALARY: Rs.8361.82
[2025-10-23T04:32:19.908Z] [LOG] ======================================================================

[2025-10-23T04:32:19.908Z] [LOG] ✅ Franklin null: Calculation completed successfully
[2025-10-23T04:32:19.908Z] [LOG] 📊 Progress: 23/34 (67.6%)
[2025-10-23T04:32:19.909Z] [LOG] 
🧮 Processing: Shandeep null (EMP000034)
[2025-10-23T04:32:19.909Z] [LOG] 📋 Record ID: c5212ca6-59dc-4c9a-a861-8de0729f8ea8
[2025-10-23T04:32:19.909Z] [LOG] 
======================================================================
[2025-10-23T04:32:19.910Z] [LOG] 🧮 CALCULATING PAYROLL: Shandeep null (EMP000034)
[2025-10-23T04:32:19.910Z] [LOG] ======================================================================
[2025-10-23T04:32:21.229Z] [LOG] 🔍 Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-23T04:32:21.230Z] [LOG]    Total components: 11
[2025-10-23T04:32:21.230Z] [LOG]    Applicable components: 11
[2025-10-23T04:32:21.230Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T04:32:22.948Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:32:22.948Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:32:23.307Z] [LOG] 📊 Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:23.669Z] [LOG] 📊 Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:24.164Z] [LOG] 📊 Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:24.165Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:32:24.165Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:32:24.489Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:32:24.489Z] [LOG]    Employee ID: 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:24.490Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:32:24.490Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:32:24.490Z] [LOG]    Base Salary (Full Month): Rs.80000.00
[2025-10-23T04:32:24.813Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:32:24.813Z] [LOG]       Daily Salary: Rs.3200.00
[2025-10-23T04:32:24.813Z] [LOG]       Weekday Hourly Rate: Rs.376.47
[2025-10-23T04:32:24.814Z] [LOG]       Saturday Hourly Rate: Rs.711.11
[2025-10-23T04:32:24.814Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:32:24.815Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:32:24.815Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:32:25.870Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:32:25.870Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:32:26.124Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:32:26.125Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:32:26.125Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:32:26.126Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:32:26.126Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:32:26.126Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:32:26.126Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:32:26.127Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:32:26.511Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:32:26.511Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:32:26.512Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:32:26.512Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:32:26.826Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:32:26.827Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:32:26.827Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:32:26.828Z] [LOG]       Current Time: 10:02:26
[2025-10-23T04:32:26.828Z] [LOG]       Expected Hours (scheduled → now): 1.54h
[2025-10-23T04:32:26.829Z] [LOG]       Actual Hours (check-in → now): 1.54h
[2025-10-23T04:32:26.829Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:32:26.829Z] [LOG]       Weekday: 120.54h
[2025-10-23T04:32:26.830Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:32:26.830Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:32:26.830Z] [LOG]       Total Expected: 134.04h
[2025-10-23T04:32:26.831Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:32:26.831Z] [LOG]       Weekday: 27.04h (includes 1.54h live)
[2025-10-23T04:32:26.831Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:32:26.832Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:32:26.832Z] [LOG]       Total Actual: 31.54h
[2025-10-23T04:32:26.832Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:32:26.833Z] [LOG]       Weekday: 120.54h × Rs.376.47 = Rs.45379.99
[2025-10-23T04:32:26.833Z] [LOG]       Saturday: 13.50h × Rs.711.11 = Rs.9599.99
[2025-10-23T04:32:26.833Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:26.834Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:26.834Z] [LOG]       Total Expected Earned: Rs.54979.97
[2025-10-23T04:32:26.834Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:32:26.835Z] [LOG]       Weekday: 27.04h × Rs.376.47 = Rs.10180.04
[2025-10-23T04:32:26.835Z] [LOG]       Saturday: 4.50h × Rs.711.11 = Rs.3199.99
[2025-10-23T04:32:26.835Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:26.835Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:26.836Z] [LOG]       Total Actual Earned: Rs.13380.04
[2025-10-23T04:32:26.837Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:32:26.837Z] [LOG]       Calculated At: Oct 23, 2025, 10:02:26
[2025-10-23T04:32:26.837Z] [LOG]       Expected Earned (until NOW): Rs.54979.97
[2025-10-23T04:32:26.838Z] [LOG]       Actual Earned (until NOW): Rs.13380.04
[2025-10-23T04:32:26.838Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:26.838Z] [LOG]       Attendance Deduction: Rs.41599.94
[2025-10-23T04:32:26.839Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:32:26.839Z] [LOG]       📉 Shortfall: 102.50 hours (75.66% of expected)
[2025-10-23T04:32:26.839Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:32:26.839Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:32:26.839Z] [LOG]    Base Salary (Full): Rs.80000.00
[2025-10-23T04:32:26.839Z] [LOG]    Actual Earned Base: Rs.13380.04
[2025-10-23T04:32:26.839Z] [LOG]    Attendance Shortfall: Rs.41599.94
[2025-10-23T04:32:26.840Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:32:26.840Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:32:26.840Z] [LOG]    Gross Salary: 13380.039328949999
[2025-10-23T04:32:26.840Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:32:26.841Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:32:26.841Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:26.841Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:32:26.841Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:26.841Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:32:26.842Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:26.842Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:32:26.842Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:26.842Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:32:26.842Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:26.842Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:32:26.842Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:26.842Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:32:26.842Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:26.842Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:32:26.842Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:26.842Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:32:26.842Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:26.842Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:32:26.842Z] [LOG]    EPF/ETF calculated on: Rs.13380.04
[2025-10-23T04:32:26.843Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:32:26.843Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:32:26.843Z] [LOG] 💰 GROSS CALCULATION for Shandeep null:
[2025-10-23T04:32:26.843Z] [LOG]    Base Salary: 80000
[2025-10-23T04:32:26.843Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:32:26.843Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:32:26.843Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:26.843Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:32:26.843Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:27.073Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:32:27.074Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:32:27.074Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:32:27.075Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:32:27.075Z] [LOG]    Actual Earned Base: Rs.13380.04
[2025-10-23T04:32:27.075Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:32:27.076Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:32:27.076Z] [LOG]    = Gross Salary: Rs.13380.04
[2025-10-23T04:32:27.076Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:32:27.077Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:32:27.077Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:32:27.077Z] [LOG]    Gross Salary: Rs.13380.04
[2025-10-23T04:32:27.078Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:32:27.078Z] [LOG]    = NET SALARY: Rs.13380.04
[2025-10-23T04:32:27.317Z] [LOG] Creating components for record c5212ca6-59dc-4c9a-a861-8de0729f8ea8: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:32:27.318Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 13380.039328949999
}
[2025-10-23T04:32:27.637Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:32:27.956Z] [LOG] Created payroll_record_component: 0aa3d53a-457c-428f-940f-7f08d9f57ffe for Base Salary (Attendance-based)
[2025-10-23T04:32:28.760Z] [LOG] ✅ Financial balances updated successfully for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:28.760Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:32:28.761Z] [LOG] 
======================================================================
[2025-10-23T04:32:28.761Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Shandeep null
[2025-10-23T04:32:28.762Z] [LOG] ======================================================================
[2025-10-23T04:32:28.762Z] [LOG]    Base Salary (Full): Rs.80000.00
[2025-10-23T04:32:28.762Z] [LOG]    Actual Earned Base (Attendance-based): Rs.13380.04
[2025-10-23T04:32:28.762Z] [LOG]    Attendance Shortfall: Rs.41599.94
[2025-10-23T04:32:28.763Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:28.763Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:32:28.763Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:32:28.763Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:28.764Z] [LOG]    GROSS SALARY: Rs.13380.04
[2025-10-23T04:32:28.764Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:28.764Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:32:28.764Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:32:28.764Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:32:28.765Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:32:28.765Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:28.765Z] [LOG]    NET SALARY: Rs.13380.04
[2025-10-23T04:32:28.765Z] [LOG] ======================================================================

[2025-10-23T04:32:28.765Z] [LOG] ✅ Shandeep null: Calculation completed successfully
[2025-10-23T04:32:28.765Z] [LOG] 📊 Progress: 24/34 (70.6%)
[2025-10-23T04:32:28.765Z] [LOG] 
🧮 Processing: Maryam null (EMP000035)
[2025-10-23T04:32:28.766Z] [LOG] 📋 Record ID: c528455a-99e1-4544-8a92-c9a39d9fbcb8
[2025-10-23T04:32:28.766Z] [LOG] 
======================================================================
[2025-10-23T04:32:28.767Z] [LOG] 🧮 CALCULATING PAYROLL: Maryam null (EMP000035)
[2025-10-23T04:32:28.767Z] [LOG] ======================================================================
[2025-10-23T04:32:30.037Z] [LOG] 🔍 Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-23T04:32:30.038Z] [LOG]    Total components: 11
[2025-10-23T04:32:30.038Z] [LOG]    Applicable components: 11
[2025-10-23T04:32:30.038Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-23T04:32:31.549Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:32:31.549Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:32:31.790Z] [LOG] 📊 Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:32.256Z] [LOG] 📊 Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:32.605Z] [LOG] 📊 Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:32.606Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:32:32.606Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:32:32.910Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:32:32.911Z] [LOG]    Employee ID: 01440221-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:32.911Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:32:32.911Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:32:32.912Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-23T04:32:33.233Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:32:33.234Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-23T04:32:33.234Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-23T04:32:33.234Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-23T04:32:33.235Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:32:33.235Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:32:33.236Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:32:34.030Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:32:34.030Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:32:34.350Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:32:34.350Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:32:34.351Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:32:34.351Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:32:34.351Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:32:34.352Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:32:34.352Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:32:34.352Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:32:34.670Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:32:34.670Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:32:34.670Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:32:34.671Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:32:35.012Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:32:35.012Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:32:35.013Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:32:35.014Z] [LOG]       Current Time: 10:02:35
[2025-10-23T04:32:35.014Z] [LOG]       Expected Hours (scheduled → now): 1.54h
[2025-10-23T04:32:35.014Z] [LOG]       Actual Hours (check-in → now): 1.54h
[2025-10-23T04:32:35.015Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:32:35.015Z] [LOG]       Weekday: 120.54h
[2025-10-23T04:32:35.016Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:32:35.016Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:32:35.016Z] [LOG]       Total Expected: 134.04h
[2025-10-23T04:32:35.016Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:32:35.017Z] [LOG]       Weekday: 27.04h (includes 1.54h live)
[2025-10-23T04:32:35.017Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:32:35.017Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:32:35.018Z] [LOG]       Total Actual: 31.54h
[2025-10-23T04:32:35.018Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:32:35.018Z] [LOG]       Weekday: 120.54h × Rs.188.24 = Rs.22691.03
[2025-10-23T04:32:35.019Z] [LOG]       Saturday: 13.50h × Rs.355.56 = Rs.4800.06
[2025-10-23T04:32:35.019Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:35.019Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:35.019Z] [LOG]       Total Expected Earned: Rs.27491.09
[2025-10-23T04:32:35.020Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:32:35.020Z] [LOG]       Weekday: 27.04h × Rs.188.24 = Rs.5090.59
[2025-10-23T04:32:35.020Z] [LOG]       Saturday: 4.50h × Rs.355.56 = Rs.1600.02
[2025-10-23T04:32:35.020Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:35.020Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:35.021Z] [LOG]       Total Actual Earned: Rs.6690.61
[2025-10-23T04:32:35.021Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:32:35.021Z] [LOG]       Calculated At: Oct 23, 2025, 10:02:35
[2025-10-23T04:32:35.021Z] [LOG]       Expected Earned (until NOW): Rs.27491.09
[2025-10-23T04:32:35.021Z] [LOG]       Actual Earned (until NOW): Rs.6690.61
[2025-10-23T04:32:35.021Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:35.022Z] [LOG]       Attendance Deduction: Rs.20800.48
[2025-10-23T04:32:35.022Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:32:35.022Z] [LOG]       📉 Shortfall: 102.50 hours (75.66% of expected)
[2025-10-23T04:32:35.022Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:32:35.022Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:32:35.022Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-23T04:32:35.022Z] [LOG]    Actual Earned Base: Rs.6690.61
[2025-10-23T04:32:35.022Z] [LOG]    Attendance Shortfall: Rs.20800.48
[2025-10-23T04:32:35.022Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:32:35.022Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:32:35.022Z] [LOG]    Gross Salary: 6690.605405244445
[2025-10-23T04:32:35.023Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:32:35.023Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:32:35.023Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:35.023Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:32:35.023Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:35.023Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:32:35.023Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:35.024Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:32:35.024Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:35.024Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:32:35.024Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:35.024Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:32:35.024Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:35.024Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:32:35.024Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:35.024Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:32:35.024Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:35.024Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:32:35.024Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:35.025Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:32:35.025Z] [LOG]    EPF/ETF calculated on: Rs.6690.61
[2025-10-23T04:32:35.025Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:32:35.025Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:32:35.025Z] [LOG] 💰 GROSS CALCULATION for Maryam null:
[2025-10-23T04:32:35.025Z] [LOG]    Base Salary: 40000
[2025-10-23T04:32:35.025Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:32:35.025Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:32:35.025Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:35.025Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:32:35.026Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:35.270Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:32:35.270Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:32:35.271Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:32:35.271Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:32:35.272Z] [LOG]    Actual Earned Base: Rs.6690.61
[2025-10-23T04:32:35.272Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:32:35.272Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:32:35.273Z] [LOG]    = Gross Salary: Rs.6690.61
[2025-10-23T04:32:35.273Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:32:35.273Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:32:35.274Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:32:35.274Z] [LOG]    Gross Salary: Rs.6690.61
[2025-10-23T04:32:35.274Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:32:35.275Z] [LOG]    = NET SALARY: Rs.6690.61
[2025-10-23T04:32:35.633Z] [LOG] Creating components for record c528455a-99e1-4544-8a92-c9a39d9fbcb8: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:32:35.633Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 6690.605405244445
}
[2025-10-23T04:32:35.954Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:32:36.189Z] [LOG] Created payroll_record_component: d9ebbee4-2e11-4133-9626-43070d8a13c2 for Base Salary (Attendance-based)
[2025-10-23T04:32:36.749Z] [LOG] ✅ Financial balances updated successfully for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:36.750Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:32:36.750Z] [LOG] 
======================================================================
[2025-10-23T04:32:36.750Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Maryam null
[2025-10-23T04:32:36.751Z] [LOG] ======================================================================
[2025-10-23T04:32:36.751Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-23T04:32:36.751Z] [LOG]    Actual Earned Base (Attendance-based): Rs.6690.61
[2025-10-23T04:32:36.752Z] [LOG]    Attendance Shortfall: Rs.20800.48
[2025-10-23T04:32:36.752Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:36.752Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:32:36.753Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:32:36.753Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:36.753Z] [LOG]    GROSS SALARY: Rs.6690.61
[2025-10-23T04:32:36.754Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:36.754Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:32:36.754Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:32:36.754Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:32:36.755Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:32:36.755Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:36.755Z] [LOG]    NET SALARY: Rs.6690.61
[2025-10-23T04:32:36.756Z] [LOG] ======================================================================

[2025-10-23T04:32:36.756Z] [LOG] ✅ Maryam null: Calculation completed successfully
[2025-10-23T04:32:36.756Z] [LOG] 📊 Progress: 25/34 (73.5%)
[2025-10-23T04:32:36.757Z] [LOG] 
🧮 Processing: Saruban null (EMP000007)
[2025-10-23T04:32:36.757Z] [LOG] 📋 Record ID: cef08c12-570c-4945-949c-130e446316ec
[2025-10-23T04:32:36.757Z] [LOG] 
======================================================================
[2025-10-23T04:32:36.758Z] [LOG] 🧮 CALCULATING PAYROLL: Saruban null (EMP000007)
[2025-10-23T04:32:36.758Z] [LOG] ======================================================================
[2025-10-23T04:32:38.029Z] [LOG] 🔍 Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-23T04:32:38.030Z] [LOG]    Total components: 11
[2025-10-23T04:32:38.030Z] [LOG]    Applicable components: 11
[2025-10-23T04:32:38.030Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T04:32:39.949Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:32:39.949Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:32:40.271Z] [LOG] 📊 Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:40.592Z] [LOG] 📊 Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:40.915Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:40.916Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:32:40.916Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:32:41.230Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:32:41.231Z] [LOG]    Employee ID: 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:41.231Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:32:41.231Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:32:41.231Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-23T04:32:41.550Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:32:41.551Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-23T04:32:41.551Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-23T04:32:41.552Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-23T04:32:41.552Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:32:41.552Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:32:41.553Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:32:42.511Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:32:42.512Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:32:42.830Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:32:42.830Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:32:42.831Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:32:42.831Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:32:42.831Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:32:42.832Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:32:42.832Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:32:42.832Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:32:43.149Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:32:43.149Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:32:43.150Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:32:43.150Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:32:43.473Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:32:43.473Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:32:43.473Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:32:43.474Z] [LOG]       Current Time: 10:02:43
[2025-10-23T04:32:43.474Z] [LOG]       Expected Hours (scheduled → now): 1.55h
[2025-10-23T04:32:43.475Z] [LOG]       Actual Hours (check-in → now): 1.55h
[2025-10-23T04:32:43.475Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:32:43.475Z] [LOG]       Weekday: 120.55h
[2025-10-23T04:32:43.476Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:32:43.476Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:32:43.476Z] [LOG]       Total Expected: 134.05h
[2025-10-23T04:32:43.477Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:32:43.477Z] [LOG]       Weekday: 27.05h (includes 1.55h live)
[2025-10-23T04:32:43.477Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:32:43.478Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:32:43.478Z] [LOG]       Total Actual: 31.55h
[2025-10-23T04:32:43.478Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:32:43.478Z] [LOG]       Weekday: 120.55h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:43.479Z] [LOG]       Saturday: 13.50h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:43.479Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:43.479Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:43.479Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-23T04:32:43.480Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:32:43.480Z] [LOG]       Weekday: 27.05h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:43.480Z] [LOG]       Saturday: 4.50h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:43.480Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:43.480Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:43.480Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-23T04:32:43.481Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:32:43.481Z] [LOG]       Calculated At: Oct 23, 2025, 10:02:43
[2025-10-23T04:32:43.481Z] [LOG]       Expected Earned (until NOW): Rs.0.00
[2025-10-23T04:32:43.481Z] [LOG]       Actual Earned (until NOW): Rs.0.00
[2025-10-23T04:32:43.482Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:43.482Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-23T04:32:43.482Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:32:43.482Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-23T04:32:43.482Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:32:43.482Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:32:43.482Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-23T04:32:43.482Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T04:32:43.482Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T04:32:43.483Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:32:43.483Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:32:43.483Z] [LOG]    Gross Salary: 0
[2025-10-23T04:32:43.483Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:32:43.483Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:32:43.483Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:43.484Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:32:43.484Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:43.484Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:32:43.484Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:43.484Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:32:43.484Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:43.484Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:32:43.484Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:43.484Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:32:43.484Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:43.484Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:32:43.484Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:43.485Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:32:43.485Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:43.485Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:32:43.485Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:43.485Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:32:43.485Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-23T04:32:43.485Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:32:43.485Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:32:43.485Z] [LOG] 💰 GROSS CALCULATION for Saruban null:
[2025-10-23T04:32:43.485Z] [LOG]    Base Salary: 0
[2025-10-23T04:32:43.485Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:32:43.486Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:32:43.486Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:43.486Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:32:43.486Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:43.808Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:32:43.808Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:32:43.809Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:32:43.809Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:32:43.809Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T04:32:43.810Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:32:43.810Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:32:43.810Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-23T04:32:43.810Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:32:43.811Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:32:43.811Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:32:43.811Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-23T04:32:43.812Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:32:43.812Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-23T04:32:44.251Z] [LOG] Creating components for record cef08c12-570c-4945-949c-130e446316ec: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:32:44.251Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 0
}
[2025-10-23T04:32:44.612Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:32:45.008Z] [LOG] Created payroll_record_component: d145d9bf-1390-4a8e-a890-f0c0f0d61ebb for Base Salary (Attendance-based)
[2025-10-23T04:32:45.927Z] [LOG] ✅ Financial balances updated successfully for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:45.928Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:32:45.928Z] [LOG] 
======================================================================
[2025-10-23T04:32:45.928Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saruban null
[2025-10-23T04:32:45.929Z] [LOG] ======================================================================
[2025-10-23T04:32:45.929Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-23T04:32:45.929Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-23T04:32:45.930Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T04:32:45.930Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:45.930Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:32:45.931Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:32:45.931Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:45.931Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-23T04:32:45.931Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:45.932Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:32:45.932Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:32:45.932Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:32:45.933Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:32:45.933Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:45.933Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-23T04:32:45.934Z] [LOG] ======================================================================

[2025-10-23T04:32:45.934Z] [LOG] ✅ Saruban null: Calculation completed successfully
[2025-10-23T04:32:45.934Z] [LOG] 📊 Progress: 26/34 (76.5%)
[2025-10-23T04:32:45.935Z] [LOG] 
🧮 Processing: Chemil null (EMP000040)
[2025-10-23T04:32:45.935Z] [LOG] 📋 Record ID: d5340207-611a-42e2-861d-c9fed476b713
[2025-10-23T04:32:45.935Z] [LOG] 
======================================================================
[2025-10-23T04:32:45.936Z] [LOG] 🧮 CALCULATING PAYROLL: Chemil null (EMP000040)
[2025-10-23T04:32:45.936Z] [LOG] ======================================================================
[2025-10-23T04:32:47.675Z] [LOG] 🔍 Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-23T04:32:47.676Z] [LOG]    Total components: 11
[2025-10-23T04:32:47.676Z] [LOG]    Applicable components: 11
[2025-10-23T04:32:47.677Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T04:32:49.603Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:32:49.603Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:32:49.960Z] [LOG] 📊 Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:50.191Z] [LOG] 📊 Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:50.552Z] [LOG] 📊 Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:50.552Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:32:50.552Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:32:50.835Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:32:50.836Z] [LOG]    Employee ID: 01442599-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:50.836Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:32:50.836Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:32:50.836Z] [LOG]    Base Salary (Full Month): Rs.250000.00
[2025-10-23T04:32:51.073Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:32:51.074Z] [LOG]       Daily Salary: Rs.10000.00
[2025-10-23T04:32:51.074Z] [LOG]       Weekday Hourly Rate: Rs.1176.47
[2025-10-23T04:32:51.074Z] [LOG]       Saturday Hourly Rate: Rs.2222.22
[2025-10-23T04:32:51.074Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:32:51.074Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:32:51.074Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:32:51.950Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:32:51.950Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:32:52.283Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:32:52.284Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:32:52.284Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:32:52.284Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:32:52.285Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:32:52.285Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:32:52.285Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:32:52.286Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:32:52.598Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:32:52.599Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:32:52.599Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:32:52.599Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:32:52.909Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:32:52.910Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:32:52.910Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:32:52.910Z] [LOG]       Current Time: 10:02:52
[2025-10-23T04:32:52.910Z] [LOG]       Expected Hours (scheduled → now): 1.55h
[2025-10-23T04:32:52.910Z] [LOG]       Actual Hours (check-in → now): 1.55h
[2025-10-23T04:32:52.911Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:32:52.911Z] [LOG]       Weekday: 120.55h
[2025-10-23T04:32:52.911Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:32:52.911Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:32:52.911Z] [LOG]       Total Expected: 134.05h
[2025-10-23T04:32:52.911Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:32:52.911Z] [LOG]       Weekday: 27.05h (includes 1.55h live)
[2025-10-23T04:32:52.911Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:32:52.911Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:32:52.911Z] [LOG]       Total Actual: 31.55h
[2025-10-23T04:32:52.912Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:32:52.912Z] [LOG]       Weekday: 120.55h × Rs.1176.47 = Rs.141821.14
[2025-10-23T04:32:52.912Z] [LOG]       Saturday: 13.50h × Rs.2222.22 = Rs.29999.97
[2025-10-23T04:32:52.912Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:52.912Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:52.912Z] [LOG]       Total Expected Earned: Rs.171821.11
[2025-10-23T04:32:52.912Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:32:52.912Z] [LOG]       Weekday: 27.05h × Rs.1176.47 = Rs.31821.20
[2025-10-23T04:32:52.912Z] [LOG]       Saturday: 4.50h × Rs.2222.22 = Rs.9999.99
[2025-10-23T04:32:52.912Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:32:52.913Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:52.913Z] [LOG]       Total Actual Earned: Rs.41821.19
[2025-10-23T04:32:52.913Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:32:52.913Z] [LOG]       Calculated At: Oct 23, 2025, 10:02:52
[2025-10-23T04:32:52.913Z] [LOG]       Expected Earned (until NOW): Rs.171821.11
[2025-10-23T04:32:52.913Z] [LOG]       Actual Earned (until NOW): Rs.41821.19
[2025-10-23T04:32:52.914Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:32:52.914Z] [LOG]       Attendance Deduction: Rs.129999.92
[2025-10-23T04:32:52.914Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:32:52.914Z] [LOG]       📉 Shortfall: 102.50 hours (75.66% of expected)
[2025-10-23T04:32:52.914Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:32:52.914Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:32:52.914Z] [LOG]    Base Salary (Full): Rs.250000.00
[2025-10-23T04:32:52.914Z] [LOG]    Actual Earned Base: Rs.41821.19
[2025-10-23T04:32:52.914Z] [LOG]    Attendance Shortfall: Rs.129999.92
[2025-10-23T04:32:52.914Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:32:52.914Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:32:52.915Z] [LOG]    Gross Salary: 41821.186180897224
[2025-10-23T04:32:52.915Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:32:52.915Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:32:52.915Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:52.915Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:32:52.915Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:52.915Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:32:52.915Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:52.915Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:32:52.916Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:52.916Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:32:52.916Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:52.916Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:32:52.916Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:52.916Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:32:52.916Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:52.916Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:32:52.916Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:52.917Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:32:52.917Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:52.917Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:32:52.917Z] [LOG]    EPF/ETF calculated on: Rs.41821.19
[2025-10-23T04:32:52.917Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:32:52.917Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:32:52.917Z] [LOG] 💰 GROSS CALCULATION for Chemil null:
[2025-10-23T04:32:52.917Z] [LOG]    Base Salary: 250000
[2025-10-23T04:32:52.917Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:32:52.918Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:32:52.918Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:52.918Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:32:52.918Z] [LOG]    Fixed amount: 0
[2025-10-23T04:32:53.237Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:32:53.237Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:32:53.237Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:32:53.238Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:32:53.238Z] [LOG]    Actual Earned Base: Rs.41821.19
[2025-10-23T04:32:53.238Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:32:53.239Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:32:53.239Z] [LOG]    = Gross Salary: Rs.41821.19
[2025-10-23T04:32:53.239Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:32:53.239Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:32:53.240Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:32:53.240Z] [LOG]    Gross Salary: Rs.41821.19
[2025-10-23T04:32:53.240Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:32:53.240Z] [LOG]    = NET SALARY: Rs.41821.19
[2025-10-23T04:32:53.561Z] [LOG] Creating components for record d5340207-611a-42e2-861d-c9fed476b713: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:32:53.561Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 41821.186180897224
}
[2025-10-23T04:32:53.793Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:32:54.031Z] [LOG] Created payroll_record_component: b9900bff-7955-4992-8abb-2529994cadc6 for Base Salary (Attendance-based)
[2025-10-23T04:32:54.667Z] [LOG] ✅ Financial balances updated successfully for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:54.667Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:32:54.667Z] [LOG] 
======================================================================
[2025-10-23T04:32:54.668Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chemil null
[2025-10-23T04:32:54.668Z] [LOG] ======================================================================
[2025-10-23T04:32:54.668Z] [LOG]    Base Salary (Full): Rs.250000.00
[2025-10-23T04:32:54.668Z] [LOG]    Actual Earned Base (Attendance-based): Rs.41821.19
[2025-10-23T04:32:54.668Z] [LOG]    Attendance Shortfall: Rs.129999.92
[2025-10-23T04:32:54.668Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:54.668Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:32:54.668Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:32:54.668Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:54.669Z] [LOG]    GROSS SALARY: Rs.41821.19
[2025-10-23T04:32:54.669Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:54.669Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:32:54.669Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:32:54.669Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:32:54.669Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:32:54.669Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:32:54.669Z] [LOG]    NET SALARY: Rs.41821.19
[2025-10-23T04:32:54.669Z] [LOG] ======================================================================

[2025-10-23T04:32:54.669Z] [LOG] ✅ Chemil null: Calculation completed successfully
[2025-10-23T04:32:54.669Z] [LOG] 📊 Progress: 27/34 (79.4%)
[2025-10-23T04:32:54.669Z] [LOG] 
🧮 Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-23T04:32:54.669Z] [LOG] 📋 Record ID: d7a83fc3-42b6-4919-bf4e-97c5d0739d2a
[2025-10-23T04:32:54.670Z] [LOG] 
======================================================================
[2025-10-23T04:32:54.670Z] [LOG] 🧮 CALCULATING PAYROLL: R. D.A Kaushalya null (EMP000044)
[2025-10-23T04:32:54.670Z] [LOG] ======================================================================
[2025-10-23T04:32:55.630Z] [LOG] 🔍 Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-23T04:32:55.630Z] [LOG]    Total components: 11
[2025-10-23T04:32:55.630Z] [LOG]    Applicable components: 11
[2025-10-23T04:32:55.631Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T04:32:57.559Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:32:57.559Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:32:57.868Z] [LOG] 📊 Found 0 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:58.191Z] [LOG] 📊 Found 0 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:58.511Z] [LOG] 📊 Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:58.511Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:32:58.512Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:32:58.832Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:32:58.833Z] [LOG]    Employee ID: 01443963-7105-11f0-a50f-98e743540430
[2025-10-23T04:32:58.833Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:32:58.833Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:32:58.834Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T04:32:59.186Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:32:59.186Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T04:32:59.187Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T04:32:59.187Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T04:32:59.187Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:32:59.187Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:32:59.187Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:33:00.212Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:33:00.213Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:33:00.438Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:33:00.438Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:33:00.438Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:33:00.438Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:33:00.439Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:33:00.439Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:33:00.439Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:33:00.439Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:33:00.750Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:33:00.750Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:33:00.750Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:33:00.750Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:33:00.995Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:33:00.995Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:33:00.996Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:33:00.996Z] [LOG]       Current Time: 10:03:00
[2025-10-23T04:33:00.997Z] [LOG]       Expected Hours (scheduled → now): 1.55h
[2025-10-23T04:33:00.997Z] [LOG]       Actual Hours (check-in → now): 1.55h
[2025-10-23T04:33:00.997Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:33:00.998Z] [LOG]       Weekday: 120.55h
[2025-10-23T04:33:00.998Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:33:00.998Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:33:00.998Z] [LOG]       Total Expected: 134.05h
[2025-10-23T04:33:00.998Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:33:00.999Z] [LOG]       Weekday: 27.05h (includes 1.55h live)
[2025-10-23T04:33:00.999Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:33:00.999Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:33:00.999Z] [LOG]       Total Actual: 31.55h
[2025-10-23T04:33:01.000Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:33:01.000Z] [LOG]       Weekday: 120.55h × Rs.235.29 = Rs.28364.27
[2025-10-23T04:33:01.000Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T04:33:01.000Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:33:01.001Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:01.001Z] [LOG]       Total Expected Earned: Rs.34364.21
[2025-10-23T04:33:01.001Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:33:01.001Z] [LOG]       Weekday: 27.05h × Rs.235.29 = Rs.6364.66
[2025-10-23T04:33:01.001Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T04:33:01.001Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:33:01.002Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:01.002Z] [LOG]       Total Actual Earned: Rs.8364.64
[2025-10-23T04:33:01.002Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:33:01.003Z] [LOG]       Calculated At: Oct 23, 2025, 10:03:01
[2025-10-23T04:33:01.003Z] [LOG]       Expected Earned (until NOW): Rs.34364.21
[2025-10-23T04:33:01.003Z] [LOG]       Actual Earned (until NOW): Rs.8364.64
[2025-10-23T04:33:01.003Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:01.003Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T04:33:01.003Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:33:01.003Z] [LOG]       📉 Shortfall: 102.50 hours (75.66% of expected)
[2025-10-23T04:33:01.003Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:33:01.004Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:33:01.004Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:33:01.004Z] [LOG]    Actual Earned Base: Rs.8364.64
[2025-10-23T04:33:01.004Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T04:33:01.004Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:33:01.004Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:33:01.004Z] [LOG]    Gross Salary: 8364.639531541667
[2025-10-23T04:33:01.005Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:33:01.005Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:33:01.005Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:01.006Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:33:01.006Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:01.006Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:33:01.006Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:01.006Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:33:01.007Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:01.007Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:33:01.007Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:01.007Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:33:01.007Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:01.007Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:33:01.008Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:01.008Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:33:01.008Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:01.008Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:33:01.008Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:01.009Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:33:01.009Z] [LOG]    EPF/ETF calculated on: Rs.8364.64
[2025-10-23T04:33:01.009Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:33:01.009Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:33:01.010Z] [LOG] 💰 GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-23T04:33:01.010Z] [LOG]    Base Salary: 50000
[2025-10-23T04:33:01.010Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:33:01.010Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:33:01.010Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:01.010Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:33:01.010Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:01.242Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:33:01.243Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:33:01.243Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:33:01.243Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:33:01.243Z] [LOG]    Actual Earned Base: Rs.8364.64
[2025-10-23T04:33:01.244Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:33:01.244Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:33:01.244Z] [LOG]    = Gross Salary: Rs.8364.64
[2025-10-23T04:33:01.245Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:33:01.245Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:33:01.245Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:33:01.245Z] [LOG]    Gross Salary: Rs.8364.64
[2025-10-23T04:33:01.246Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:33:01.246Z] [LOG]    = NET SALARY: Rs.8364.64
[2025-10-23T04:33:01.564Z] [LOG] Creating components for record d7a83fc3-42b6-4919-bf4e-97c5d0739d2a: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:33:01.564Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8364.639531541667
}
[2025-10-23T04:33:01.882Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:33:02.192Z] [LOG] Created payroll_record_component: 725b8fe4-ce09-445e-9781-1304ce25873e for Base Salary (Attendance-based)
[2025-10-23T04:33:02.830Z] [LOG] ✅ Financial balances updated successfully for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:02.830Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:33:02.831Z] [LOG] 
======================================================================
[2025-10-23T04:33:02.831Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: R. D.A Kaushalya null
[2025-10-23T04:33:02.831Z] [LOG] ======================================================================
[2025-10-23T04:33:02.832Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:33:02.832Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8364.64
[2025-10-23T04:33:02.832Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T04:33:02.832Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:02.833Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:33:02.833Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:33:02.833Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:02.833Z] [LOG]    GROSS SALARY: Rs.8364.64
[2025-10-23T04:33:02.834Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:02.834Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:33:02.834Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:33:02.834Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:33:02.835Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:33:02.835Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:02.835Z] [LOG]    NET SALARY: Rs.8364.64
[2025-10-23T04:33:02.836Z] [LOG] ======================================================================

[2025-10-23T04:33:02.836Z] [LOG] ✅ R. D.A Kaushalya null: Calculation completed successfully
[2025-10-23T04:33:02.836Z] [LOG] 📊 Progress: 28/34 (82.4%)
[2025-10-23T04:33:02.836Z] [LOG] 
🧮 Processing: Rasanga null (EMP000028)
[2025-10-23T04:33:02.837Z] [LOG] 📋 Record ID: def7bd3b-3ca8-4f60-ab5d-65a14ed09f4a
[2025-10-23T04:33:02.837Z] [LOG] 
======================================================================
[2025-10-23T04:33:02.837Z] [LOG] 🧮 CALCULATING PAYROLL: Rasanga null (EMP000028)
[2025-10-23T04:33:02.837Z] [LOG] ======================================================================
[2025-10-23T04:33:04.110Z] [LOG] 🔍 Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-23T04:33:04.110Z] [LOG]    Total components: 11
[2025-10-23T04:33:04.110Z] [LOG]    Applicable components: 11
[2025-10-23T04:33:04.110Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-23T04:33:06.512Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:33:06.512Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:33:06.776Z] [LOG] 📊 Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:07.001Z] [LOG] 📊 Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:07.322Z] [LOG] 📊 Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:07.323Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:33:07.323Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:33:07.640Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:33:07.640Z] [LOG]    Employee ID: 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:07.640Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:33:07.641Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:33:07.641Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T04:33:07.959Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:33:07.959Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T04:33:07.960Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T04:33:07.960Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T04:33:07.960Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:33:07.960Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:33:07.960Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:33:08.912Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:33:08.913Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:33:09.229Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:33:09.230Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:33:09.230Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:33:09.230Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:33:09.230Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:33:09.230Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:33:09.230Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:33:09.230Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:33:09.572Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:33:09.572Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:33:09.572Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:33:09.573Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:33:09.871Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:33:09.871Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:33:09.871Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:33:09.872Z] [LOG]       Current Time: 10:03:09
[2025-10-23T04:33:09.872Z] [LOG]       Expected Hours (scheduled → now): 1.55h
[2025-10-23T04:33:09.873Z] [LOG]       Actual Hours (check-in → now): 1.55h
[2025-10-23T04:33:09.873Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:33:09.873Z] [LOG]       Weekday: 120.55h
[2025-10-23T04:33:09.873Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:33:09.873Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:33:09.874Z] [LOG]       Total Expected: 134.05h
[2025-10-23T04:33:09.874Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:33:09.874Z] [LOG]       Weekday: 27.05h (includes 1.55h live)
[2025-10-23T04:33:09.874Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:33:09.874Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:33:09.874Z] [LOG]       Total Actual: 31.55h
[2025-10-23T04:33:09.874Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:33:09.874Z] [LOG]       Weekday: 120.55h × Rs.235.29 = Rs.28364.85
[2025-10-23T04:33:09.875Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T04:33:09.875Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:33:09.875Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:09.875Z] [LOG]       Total Expected Earned: Rs.34364.79
[2025-10-23T04:33:09.875Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:33:09.875Z] [LOG]       Weekday: 27.05h × Rs.235.29 = Rs.6365.24
[2025-10-23T04:33:09.875Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T04:33:09.875Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:33:09.875Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:09.876Z] [LOG]       Total Actual Earned: Rs.8365.22
[2025-10-23T04:33:09.876Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:33:09.876Z] [LOG]       Calculated At: Oct 23, 2025, 10:03:09
[2025-10-23T04:33:09.876Z] [LOG]       Expected Earned (until NOW): Rs.34364.79
[2025-10-23T04:33:09.876Z] [LOG]       Actual Earned (until NOW): Rs.8365.22
[2025-10-23T04:33:09.877Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:09.877Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T04:33:09.877Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:33:09.877Z] [LOG]       📉 Shortfall: 102.50 hours (75.66% of expected)
[2025-10-23T04:33:09.877Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:33:09.877Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:33:09.878Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:33:09.878Z] [LOG]    Actual Earned Base: Rs.8365.22
[2025-10-23T04:33:09.878Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T04:33:09.878Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:33:09.878Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:33:09.878Z] [LOG]    Gross Salary: 8365.219652108333
[2025-10-23T04:33:09.878Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:33:09.878Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:33:09.879Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:09.879Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:33:09.879Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:09.879Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:33:09.879Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:09.879Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:33:09.880Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:09.880Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:33:09.880Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:09.880Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:33:09.880Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:09.881Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:33:09.881Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:09.881Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:33:09.881Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:09.881Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:33:09.881Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:09.881Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:33:09.881Z] [LOG]    EPF/ETF calculated on: Rs.8365.22
[2025-10-23T04:33:09.882Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:33:09.882Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:33:09.882Z] [LOG] 💰 GROSS CALCULATION for Rasanga null:
[2025-10-23T04:33:09.882Z] [LOG]    Base Salary: 50000
[2025-10-23T04:33:09.882Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:33:09.882Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:33:09.883Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:09.883Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:33:09.883Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:10.190Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:33:10.190Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:33:10.190Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:33:10.190Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:33:10.190Z] [LOG]    Actual Earned Base: Rs.8365.22
[2025-10-23T04:33:10.190Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:33:10.190Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:33:10.190Z] [LOG]    = Gross Salary: Rs.8365.22
[2025-10-23T04:33:10.191Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:33:10.191Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:33:10.191Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:33:10.191Z] [LOG]    Gross Salary: Rs.8365.22
[2025-10-23T04:33:10.191Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:33:10.191Z] [LOG]    = NET SALARY: Rs.8365.22
[2025-10-23T04:33:10.517Z] [LOG] Creating components for record def7bd3b-3ca8-4f60-ab5d-65a14ed09f4a: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:33:10.518Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8365.219652108333
}
[2025-10-23T04:33:10.833Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:33:11.090Z] [LOG] Created payroll_record_component: 51eb74c5-a0df-460f-bdff-e226ea26a9c5 for Base Salary (Attendance-based)
[2025-10-23T04:33:11.788Z] [LOG] ✅ Financial balances updated successfully for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:11.789Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:33:11.789Z] [LOG] 
======================================================================
[2025-10-23T04:33:11.789Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Rasanga null
[2025-10-23T04:33:11.789Z] [LOG] ======================================================================
[2025-10-23T04:33:11.790Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:33:11.790Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8365.22
[2025-10-23T04:33:11.790Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T04:33:11.790Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:11.791Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:33:11.791Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:33:11.791Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:11.791Z] [LOG]    GROSS SALARY: Rs.8365.22
[2025-10-23T04:33:11.792Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:11.792Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:33:11.792Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:33:11.792Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:33:11.792Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:33:11.793Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:11.793Z] [LOG]    NET SALARY: Rs.8365.22
[2025-10-23T04:33:11.793Z] [LOG] ======================================================================

[2025-10-23T04:33:11.793Z] [LOG] ✅ Rasanga null: Calculation completed successfully
[2025-10-23T04:33:11.793Z] [LOG] 📊 Progress: 29/34 (85.3%)
[2025-10-23T04:33:11.794Z] [LOG] 
🧮 Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-23T04:33:11.794Z] [LOG] 📋 Record ID: e3cdc567-ee45-4aab-95a4-04a761b8feb3
[2025-10-23T04:33:11.794Z] [LOG] 
======================================================================
[2025-10-23T04:33:11.794Z] [LOG] 🧮 CALCULATING PAYROLL: P.D.P Dilini Madushani null (EMP000043)
[2025-10-23T04:33:11.795Z] [LOG] ======================================================================
[2025-10-23T04:33:12.912Z] [LOG] 🔍 Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-23T04:33:12.913Z] [LOG]    Total components: 11
[2025-10-23T04:33:12.913Z] [LOG]    Applicable components: 11
[2025-10-23T04:33:12.913Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T04:33:14.841Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:33:14.842Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:33:15.082Z] [LOG] 📊 Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:15.311Z] [LOG] 📊 Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:15.660Z] [LOG] 📊 Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:15.661Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:33:15.661Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:33:15.881Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:33:15.881Z] [LOG]    Employee ID: 014435dc-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:15.882Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:33:15.882Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:33:15.882Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T04:33:16.126Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:33:16.127Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T04:33:16.127Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T04:33:16.128Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T04:33:16.128Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:33:16.128Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:33:16.129Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:33:16.911Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:33:16.911Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:33:17.144Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:33:17.144Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:33:17.145Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:33:17.145Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:33:17.145Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:33:17.146Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:33:17.146Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:33:17.146Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:33:17.392Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:33:17.393Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:33:17.393Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:33:17.393Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:33:17.720Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:33:17.721Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:33:17.721Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:33:17.722Z] [LOG]       Current Time: 10:03:17
[2025-10-23T04:33:17.722Z] [LOG]       Expected Hours (scheduled → now): 1.55h
[2025-10-23T04:33:17.722Z] [LOG]       Actual Hours (check-in → now): 1.55h
[2025-10-23T04:33:17.723Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:33:17.723Z] [LOG]       Weekday: 120.55h
[2025-10-23T04:33:17.723Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:33:17.724Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:33:17.724Z] [LOG]       Total Expected: 134.05h
[2025-10-23T04:33:17.724Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:33:17.725Z] [LOG]       Weekday: 27.05h (includes 1.55h live)
[2025-10-23T04:33:17.725Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:33:17.726Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:33:17.726Z] [LOG]       Total Actual: 31.55h
[2025-10-23T04:33:17.726Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:33:17.726Z] [LOG]       Weekday: 120.55h × Rs.235.29 = Rs.28365.37
[2025-10-23T04:33:17.727Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T04:33:17.727Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:33:17.727Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:17.728Z] [LOG]       Total Expected Earned: Rs.34365.31
[2025-10-23T04:33:17.728Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:33:17.728Z] [LOG]       Weekday: 27.05h × Rs.235.29 = Rs.6365.75
[2025-10-23T04:33:17.729Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T04:33:17.729Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:33:17.729Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:17.729Z] [LOG]       Total Actual Earned: Rs.8365.73
[2025-10-23T04:33:17.730Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:33:17.730Z] [LOG]       Calculated At: Oct 23, 2025, 10:03:17
[2025-10-23T04:33:17.730Z] [LOG]       Expected Earned (until NOW): Rs.34365.31
[2025-10-23T04:33:17.730Z] [LOG]       Actual Earned (until NOW): Rs.8365.73
[2025-10-23T04:33:17.731Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:17.731Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T04:33:17.731Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:33:17.731Z] [LOG]       📉 Shortfall: 102.50 hours (75.66% of expected)
[2025-10-23T04:33:17.731Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:33:17.731Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:33:17.732Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:33:17.732Z] [LOG]    Actual Earned Base: Rs.8365.73
[2025-10-23T04:33:17.732Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T04:33:17.732Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:33:17.732Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:33:17.732Z] [LOG]    Gross Salary: 8365.732649666666
[2025-10-23T04:33:17.732Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:33:17.733Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:33:17.733Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:17.733Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:33:17.733Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:17.733Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:33:17.733Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:17.733Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:33:17.733Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:17.733Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:33:17.733Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:17.733Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:33:17.733Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:17.734Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:33:17.734Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:17.734Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:33:17.734Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:17.734Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:33:17.734Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:17.734Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:33:17.734Z] [LOG]    EPF/ETF calculated on: Rs.8365.73
[2025-10-23T04:33:17.734Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:33:17.734Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:33:17.734Z] [LOG] 💰 GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-23T04:33:17.734Z] [LOG]    Base Salary: 50000
[2025-10-23T04:33:17.734Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:33:17.734Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:33:17.734Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:17.735Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:33:17.735Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:18.039Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:33:18.039Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:33:18.040Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:33:18.040Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:33:18.040Z] [LOG]    Actual Earned Base: Rs.8365.73
[2025-10-23T04:33:18.040Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:33:18.041Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:33:18.041Z] [LOG]    = Gross Salary: Rs.8365.73
[2025-10-23T04:33:18.041Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:33:18.041Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:33:18.041Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:33:18.041Z] [LOG]    Gross Salary: Rs.8365.73
[2025-10-23T04:33:18.041Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:33:18.042Z] [LOG]    = NET SALARY: Rs.8365.73
[2025-10-23T04:33:18.349Z] [LOG] Creating components for record e3cdc567-ee45-4aab-95a4-04a761b8feb3: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:33:18.350Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8365.732649666666
}
[2025-10-23T04:33:18.612Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:33:18.994Z] [LOG] Created payroll_record_component: e6d2ebdb-6c7c-4874-bd91-6fc9a5092532 for Base Salary (Attendance-based)
[2025-10-23T04:33:19.635Z] [LOG] ✅ Financial balances updated successfully for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:19.635Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:33:19.636Z] [LOG] 
======================================================================
[2025-10-23T04:33:19.636Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: P.D.P Dilini Madushani null
[2025-10-23T04:33:19.636Z] [LOG] ======================================================================
[2025-10-23T04:33:19.636Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:33:19.636Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8365.73
[2025-10-23T04:33:19.636Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T04:33:19.637Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:19.637Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:33:19.637Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:33:19.637Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:19.637Z] [LOG]    GROSS SALARY: Rs.8365.73
[2025-10-23T04:33:19.637Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:19.637Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:33:19.638Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:33:19.638Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:33:19.638Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:33:19.638Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:19.638Z] [LOG]    NET SALARY: Rs.8365.73
[2025-10-23T04:33:19.638Z] [LOG] ======================================================================

[2025-10-23T04:33:19.639Z] [LOG] ✅ P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-23T04:33:19.639Z] [LOG] 📊 Progress: 30/34 (88.2%)
[2025-10-23T04:33:19.639Z] [LOG] 
🧮 Processing: Waruni null (EMP000024)
[2025-10-23T04:33:19.639Z] [LOG] 📋 Record ID: e5deff69-5860-40b9-9ff6-1734c26df96d
[2025-10-23T04:33:19.639Z] [LOG] 
======================================================================
[2025-10-23T04:33:19.640Z] [LOG] 🧮 CALCULATING PAYROLL: Waruni null (EMP000024)
[2025-10-23T04:33:19.640Z] [LOG] ======================================================================
[2025-10-23T04:33:20.909Z] [LOG] 🔍 Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-23T04:33:20.909Z] [LOG]    Total components: 11
[2025-10-23T04:33:20.909Z] [LOG]    Applicable components: 11
[2025-10-23T04:33:20.910Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T04:33:22.829Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:33:22.830Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:33:23.155Z] [LOG] 📊 Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:23.478Z] [LOG] 📊 Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:23.800Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:23.800Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:33:23.801Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:33:24.023Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:33:24.024Z] [LOG]    Employee ID: 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:24.024Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:33:24.025Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:33:24.025Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T04:33:24.276Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:33:24.276Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T04:33:24.277Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T04:33:24.277Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T04:33:24.277Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:33:24.278Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:33:24.278Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:33:25.072Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:33:25.073Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:33:25.389Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:33:25.389Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:33:25.390Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:33:25.390Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:33:25.390Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:33:25.391Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:33:25.391Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:33:25.392Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:33:25.713Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:33:25.713Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:33:25.713Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:33:25.714Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:33:26.032Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:33:26.033Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:33:26.033Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:33:26.034Z] [LOG]       Current Time: 10:03:26
[2025-10-23T04:33:26.034Z] [LOG]       Expected Hours (scheduled → now): 1.56h
[2025-10-23T04:33:26.034Z] [LOG]       Actual Hours (check-in → now): 1.56h
[2025-10-23T04:33:26.035Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:33:26.035Z] [LOG]       Weekday: 120.56h
[2025-10-23T04:33:26.035Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:33:26.036Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:33:26.036Z] [LOG]       Total Expected: 134.06h
[2025-10-23T04:33:26.037Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:33:26.037Z] [LOG]       Weekday: 27.06h (includes 1.56h live)
[2025-10-23T04:33:26.038Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:33:26.038Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:33:26.038Z] [LOG]       Total Actual: 31.56h
[2025-10-23T04:33:26.039Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:33:26.039Z] [LOG]       Weekday: 120.56h × Rs.235.29 = Rs.28365.91
[2025-10-23T04:33:26.039Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T04:33:26.040Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:33:26.040Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:26.041Z] [LOG]       Total Expected Earned: Rs.34365.85
[2025-10-23T04:33:26.041Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:33:26.041Z] [LOG]       Weekday: 27.06h × Rs.235.29 = Rs.6366.30
[2025-10-23T04:33:26.041Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T04:33:26.041Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:33:26.041Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:26.041Z] [LOG]       Total Actual Earned: Rs.8366.28
[2025-10-23T04:33:26.041Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:33:26.041Z] [LOG]       Calculated At: Oct 23, 2025, 10:03:26
[2025-10-23T04:33:26.042Z] [LOG]       Expected Earned (until NOW): Rs.34365.85
[2025-10-23T04:33:26.042Z] [LOG]       Actual Earned (until NOW): Rs.8366.28
[2025-10-23T04:33:26.042Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:26.042Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T04:33:26.042Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:33:26.042Z] [LOG]       📉 Shortfall: 102.50 hours (75.66% of expected)
[2025-10-23T04:33:26.042Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:33:26.042Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:33:26.042Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:33:26.043Z] [LOG]    Actual Earned Base: Rs.8366.28
[2025-10-23T04:33:26.043Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T04:33:26.043Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:33:26.043Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:33:26.043Z] [LOG]    Gross Salary: 8366.275908133333
[2025-10-23T04:33:26.043Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:33:26.044Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:33:26.044Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:26.044Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:33:26.044Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:26.045Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:33:26.045Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:26.045Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:33:26.045Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:26.045Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:33:26.045Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:26.045Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:33:26.045Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:26.045Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:33:26.046Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:26.046Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:33:26.046Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:26.046Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:33:26.046Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:26.046Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:33:26.046Z] [LOG]    EPF/ETF calculated on: Rs.8366.28
[2025-10-23T04:33:26.046Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:33:26.047Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:33:26.047Z] [LOG] 💰 GROSS CALCULATION for Waruni null:
[2025-10-23T04:33:26.047Z] [LOG]    Base Salary: 50000
[2025-10-23T04:33:26.047Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:33:26.047Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:33:26.047Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:26.047Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:33:26.048Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:26.351Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:33:26.352Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:33:26.352Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:33:26.352Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:33:26.352Z] [LOG]    Actual Earned Base: Rs.8366.28
[2025-10-23T04:33:26.352Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:33:26.352Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:33:26.352Z] [LOG]    = Gross Salary: Rs.8366.28
[2025-10-23T04:33:26.353Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:33:26.353Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:33:26.353Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:33:26.353Z] [LOG]    Gross Salary: Rs.8366.28
[2025-10-23T04:33:26.353Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:33:26.354Z] [LOG]    = NET SALARY: Rs.8366.28
[2025-10-23T04:33:26.671Z] [LOG] Creating components for record e5deff69-5860-40b9-9ff6-1734c26df96d: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:33:26.671Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8366.275908133333
}
[2025-10-23T04:33:26.989Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:33:27.233Z] [LOG] Created payroll_record_component: bae581b5-5484-4682-bf32-f500fa653bbd for Base Salary (Attendance-based)
[2025-10-23T04:33:27.791Z] [LOG] ✅ Financial balances updated successfully for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:27.792Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:33:27.792Z] [LOG] 
======================================================================
[2025-10-23T04:33:27.792Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Waruni null
[2025-10-23T04:33:27.793Z] [LOG] ======================================================================
[2025-10-23T04:33:27.793Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:33:27.793Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8366.28
[2025-10-23T04:33:27.794Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T04:33:27.794Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:27.794Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:33:27.794Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:33:27.795Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:27.795Z] [LOG]    GROSS SALARY: Rs.8366.28
[2025-10-23T04:33:27.795Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:27.796Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:33:27.796Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:33:27.796Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:33:27.796Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:33:27.796Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:27.797Z] [LOG]    NET SALARY: Rs.8366.28
[2025-10-23T04:33:27.797Z] [LOG] ======================================================================

[2025-10-23T04:33:27.797Z] [LOG] ✅ Waruni null: Calculation completed successfully
[2025-10-23T04:33:27.797Z] [LOG] 📊 Progress: 31/34 (91.2%)
[2025-10-23T04:33:27.798Z] [LOG] 
🧮 Processing: Chamodi null (EMP000032)
[2025-10-23T04:33:27.798Z] [LOG] 📋 Record ID: ea46884b-ba60-45a0-85c5-b6b3d85d17ac
[2025-10-23T04:33:27.798Z] [LOG] 
======================================================================
[2025-10-23T04:33:27.798Z] [LOG] 🧮 CALCULATING PAYROLL: Chamodi null (EMP000032)
[2025-10-23T04:33:27.799Z] [LOG] ======================================================================
[2025-10-23T04:33:29.116Z] [LOG] 🔍 Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-23T04:33:29.117Z] [LOG]    Total components: 11
[2025-10-23T04:33:29.117Z] [LOG]    Applicable components: 11
[2025-10-23T04:33:29.118Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T04:33:30.616Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:33:30.616Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:33:31.000Z] [LOG] 📊 Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:31.226Z] [LOG] 📊 Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:31.472Z] [LOG] 📊 Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:31.472Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:33:31.473Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:33:31.719Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:33:31.720Z] [LOG]    Employee ID: 0143f302-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:31.720Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:33:31.720Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:33:31.721Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T04:33:32.001Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:33:32.002Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T04:33:32.002Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T04:33:32.002Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T04:33:32.002Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:33:32.003Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:33:32.003Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:33:32.910Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:33:32.910Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:33:33.230Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:33:33.230Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:33:33.231Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:33:33.231Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:33:33.231Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:33:33.232Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:33:33.232Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:33:33.232Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:33:33.465Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:33:33.466Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:33:33.466Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:33:33.466Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:33:33.723Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:33:33.723Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:33:33.724Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:33:33.724Z] [LOG]       Current Time: 10:03:33
[2025-10-23T04:33:33.725Z] [LOG]       Expected Hours (scheduled → now): 1.56h
[2025-10-23T04:33:33.725Z] [LOG]       Actual Hours (check-in → now): 1.56h
[2025-10-23T04:33:33.725Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:33:33.726Z] [LOG]       Weekday: 120.56h
[2025-10-23T04:33:33.726Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:33:33.726Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:33:33.727Z] [LOG]       Total Expected: 134.06h
[2025-10-23T04:33:33.727Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:33:33.727Z] [LOG]       Weekday: 27.06h (includes 1.56h live)
[2025-10-23T04:33:33.727Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:33:33.728Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:33:33.728Z] [LOG]       Total Actual: 31.56h
[2025-10-23T04:33:33.728Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:33:33.729Z] [LOG]       Weekday: 120.56h × Rs.235.29 = Rs.28366.41
[2025-10-23T04:33:33.729Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T04:33:33.729Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:33:33.730Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:33.730Z] [LOG]       Total Expected Earned: Rs.34366.35
[2025-10-23T04:33:33.730Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:33:33.731Z] [LOG]       Weekday: 27.06h × Rs.235.29 = Rs.6366.80
[2025-10-23T04:33:33.731Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T04:33:33.731Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:33:33.732Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:33.732Z] [LOG]       Total Actual Earned: Rs.8366.78
[2025-10-23T04:33:33.733Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:33:33.733Z] [LOG]       Calculated At: Oct 23, 2025, 10:03:33
[2025-10-23T04:33:33.733Z] [LOG]       Expected Earned (until NOW): Rs.34366.35
[2025-10-23T04:33:33.734Z] [LOG]       Actual Earned (until NOW): Rs.8366.78
[2025-10-23T04:33:33.734Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:33.734Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T04:33:33.734Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:33:33.735Z] [LOG]       📉 Shortfall: 102.50 hours (75.65% of expected)
[2025-10-23T04:33:33.735Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:33:33.735Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:33:33.736Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:33:33.736Z] [LOG]    Actual Earned Base: Rs.8366.78
[2025-10-23T04:33:33.736Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T04:33:33.737Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:33:33.737Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:33:33.737Z] [LOG]    Gross Salary: 8366.778579075
[2025-10-23T04:33:33.737Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:33:33.738Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:33:33.738Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:33.738Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:33:33.738Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:33.738Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:33:33.739Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:33.739Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:33:33.739Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:33.739Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:33:33.739Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:33.739Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:33:33.739Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:33.739Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:33:33.739Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:33.739Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:33:33.739Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:33.739Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:33:33.739Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:33.740Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:33:33.740Z] [LOG]    EPF/ETF calculated on: Rs.8366.78
[2025-10-23T04:33:33.740Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:33:33.740Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:33:33.740Z] [LOG] 💰 GROSS CALCULATION for Chamodi null:
[2025-10-23T04:33:33.740Z] [LOG]    Base Salary: 50000
[2025-10-23T04:33:33.740Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:33:33.740Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:33:33.740Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:33.740Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:33:33.740Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:34.031Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:33:34.032Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:33:34.032Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:33:34.032Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:33:34.033Z] [LOG]    Actual Earned Base: Rs.8366.78
[2025-10-23T04:33:34.033Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:33:34.033Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:33:34.034Z] [LOG]    = Gross Salary: Rs.8366.78
[2025-10-23T04:33:34.034Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:33:34.035Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:33:34.035Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:33:34.035Z] [LOG]    Gross Salary: Rs.8366.78
[2025-10-23T04:33:34.035Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:33:34.036Z] [LOG]    = NET SALARY: Rs.8366.78
[2025-10-23T04:33:34.377Z] [LOG] Creating components for record ea46884b-ba60-45a0-85c5-b6b3d85d17ac: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:33:34.377Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8366.778579075
}
[2025-10-23T04:33:34.669Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:33:34.992Z] [LOG] Created payroll_record_component: a2de5ec7-55a0-4cb0-8545-bfc60b58741a for Base Salary (Attendance-based)
[2025-10-23T04:33:35.642Z] [LOG] ✅ Financial balances updated successfully for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:35.643Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:33:35.643Z] [LOG] 
======================================================================
[2025-10-23T04:33:35.643Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chamodi null
[2025-10-23T04:33:35.644Z] [LOG] ======================================================================
[2025-10-23T04:33:35.644Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:33:35.644Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8366.78
[2025-10-23T04:33:35.645Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T04:33:35.645Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:35.646Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:33:35.646Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:33:35.646Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:35.647Z] [LOG]    GROSS SALARY: Rs.8366.78
[2025-10-23T04:33:35.647Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:35.647Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:33:35.648Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:33:35.648Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:33:35.648Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:33:35.649Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:35.649Z] [LOG]    NET SALARY: Rs.8366.78
[2025-10-23T04:33:35.649Z] [LOG] ======================================================================

[2025-10-23T04:33:35.649Z] [LOG] ✅ Chamodi null: Calculation completed successfully
[2025-10-23T04:33:35.650Z] [LOG] 📊 Progress: 32/34 (94.1%)
[2025-10-23T04:33:35.650Z] [LOG] 
🧮 Processing: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-23T04:33:35.650Z] [LOG] 📋 Record ID: f11f23cc-fe3a-42be-89c2-43bc71c05886
[2025-10-23T04:33:35.651Z] [LOG] 
======================================================================
[2025-10-23T04:33:35.651Z] [LOG] 🧮 CALCULATING PAYROLL: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-23T04:33:35.651Z] [LOG] ======================================================================
[2025-10-23T04:33:36.920Z] [LOG] 🔍 Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-23T04:33:36.920Z] [LOG]    Total components: 11
[2025-10-23T04:33:36.921Z] [LOG]    Applicable components: 11
[2025-10-23T04:33:36.921Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T04:33:38.671Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:33:38.671Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:33:39.035Z] [LOG] 📊 Found 0 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:39.316Z] [LOG] 📊 Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:39.646Z] [LOG] 📊 Found 0 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:39.647Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:33:39.647Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:33:39.949Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:33:39.950Z] [LOG]    Employee ID: 0144461e-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:39.950Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:33:39.950Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:33:39.950Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T04:33:40.271Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:33:40.271Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T04:33:40.272Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T04:33:40.272Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T04:33:40.273Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:33:40.273Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:33:40.273Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:33:41.076Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:33:41.077Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:33:41.419Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:33:41.419Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:33:41.420Z] [LOG]       Total completed sessions found: 4
[2025-10-23T04:33:41.420Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:33:41.420Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:33:41.421Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:33:41.421Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T04:33:41.421Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T04:33:41.711Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:33:41.711Z] [LOG]          Weekday: 25.50h
[2025-10-23T04:33:41.711Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:33:41.712Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:33:41.968Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:33:41.969Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:33:41.969Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:33:41.970Z] [LOG]       Current Time: 10:03:41
[2025-10-23T04:33:41.970Z] [LOG]       Expected Hours (scheduled → now): 1.56h
[2025-10-23T04:33:41.971Z] [LOG]       Actual Hours (check-in → now): 1.56h
[2025-10-23T04:33:41.971Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:33:41.971Z] [LOG]       Weekday: 120.56h
[2025-10-23T04:33:41.971Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:33:41.972Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:33:41.972Z] [LOG]       Total Expected: 134.06h
[2025-10-23T04:33:41.972Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:33:41.972Z] [LOG]       Weekday: 27.06h (includes 1.56h live)
[2025-10-23T04:33:41.973Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:33:41.973Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:33:41.973Z] [LOG]       Total Actual: 31.56h
[2025-10-23T04:33:41.974Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:33:41.974Z] [LOG]       Weekday: 120.56h × Rs.235.29 = Rs.28366.95
[2025-10-23T04:33:41.974Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T04:33:41.974Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:33:41.974Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:41.975Z] [LOG]       Total Expected Earned: Rs.34366.89
[2025-10-23T04:33:41.975Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:33:41.975Z] [LOG]       Weekday: 27.06h × Rs.235.29 = Rs.6367.34
[2025-10-23T04:33:41.975Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T04:33:41.975Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:33:41.976Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:41.976Z] [LOG]       Total Actual Earned: Rs.8367.32
[2025-10-23T04:33:41.977Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:33:41.977Z] [LOG]       Calculated At: Oct 23, 2025, 10:03:41
[2025-10-23T04:33:41.977Z] [LOG]       Expected Earned (until NOW): Rs.34366.89
[2025-10-23T04:33:41.977Z] [LOG]       Actual Earned (until NOW): Rs.8367.32
[2025-10-23T04:33:41.977Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:41.978Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T04:33:41.978Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:33:41.978Z] [LOG]       📉 Shortfall: 102.50 hours (75.65% of expected)
[2025-10-23T04:33:41.978Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:33:41.978Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:33:41.979Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:33:41.979Z] [LOG]    Actual Earned Base: Rs.8367.32
[2025-10-23T04:33:41.979Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T04:33:41.979Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:33:41.979Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:33:41.980Z] [LOG]    Gross Salary: 8367.317458533333
[2025-10-23T04:33:41.980Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:33:41.980Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:33:41.980Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:41.980Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:33:41.980Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:41.981Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:33:41.981Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:41.981Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:33:41.981Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:41.981Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:33:41.982Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:41.982Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:33:41.982Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:41.982Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:33:41.982Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:41.982Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:33:41.982Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:41.982Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:33:41.982Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:41.982Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:33:41.982Z] [LOG]    EPF/ETF calculated on: Rs.8367.32
[2025-10-23T04:33:41.983Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:33:41.983Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:33:41.983Z] [LOG] 💰 GROSS CALCULATION for Ashen Nirmal Wadugodapitiya null:
[2025-10-23T04:33:41.983Z] [LOG]    Base Salary: 50000
[2025-10-23T04:33:41.983Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:33:41.983Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:33:41.983Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:41.983Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:33:41.983Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:42.195Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:33:42.195Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:33:42.196Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:33:42.196Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:33:42.196Z] [LOG]    Actual Earned Base: Rs.8367.32
[2025-10-23T04:33:42.197Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:33:42.197Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:33:42.197Z] [LOG]    = Gross Salary: Rs.8367.32
[2025-10-23T04:33:42.197Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:33:42.198Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:33:42.198Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:33:42.198Z] [LOG]    Gross Salary: Rs.8367.32
[2025-10-23T04:33:42.199Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:33:42.199Z] [LOG]    = NET SALARY: Rs.8367.32
[2025-10-23T04:33:42.513Z] [LOG] Creating components for record f11f23cc-fe3a-42be-89c2-43bc71c05886: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:33:42.514Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8367.317458533333
}
[2025-10-23T04:33:42.830Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:33:43.150Z] [LOG] Created payroll_record_component: 1dad7958-bc70-44d9-be08-0342a3870a34 for Base Salary (Attendance-based)
[2025-10-23T04:33:44.276Z] [LOG] ✅ Financial balances updated successfully for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-23T04:33:44.276Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:33:44.277Z] [LOG] 
======================================================================
[2025-10-23T04:33:44.277Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ashen Nirmal Wadugodapitiya null
[2025-10-23T04:33:44.277Z] [LOG] ======================================================================
[2025-10-23T04:33:44.278Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:33:44.278Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8367.32
[2025-10-23T04:33:44.278Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T04:33:44.278Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:44.278Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:33:44.279Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:33:44.279Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:44.279Z] [LOG]    GROSS SALARY: Rs.8367.32
[2025-10-23T04:33:44.280Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:44.280Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:33:44.280Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:33:44.280Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:33:44.280Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:33:44.281Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:44.281Z] [LOG]    NET SALARY: Rs.8367.32
[2025-10-23T04:33:44.281Z] [LOG] ======================================================================

[2025-10-23T04:33:44.281Z] [LOG] ✅ Ashen Nirmal Wadugodapitiya null: Calculation completed successfully
[2025-10-23T04:33:44.281Z] [LOG] 📊 Progress: 33/34 (97.1%)
[2025-10-23T04:33:44.281Z] [LOG] 
🧮 Processing: Kaushal Thambi (EMP465256103)
[2025-10-23T04:33:44.282Z] [LOG] 📋 Record ID: fd1beceb-c7b8-4f70-8c19-74fc32c5a618
[2025-10-23T04:33:44.282Z] [LOG] 
======================================================================
[2025-10-23T04:33:44.282Z] [LOG] 🧮 CALCULATING PAYROLL: Kaushal Thambi (EMP465256103)
[2025-10-23T04:33:44.282Z] [LOG] ======================================================================
[2025-10-23T04:33:45.171Z] [LOG] 🔍 Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-23T04:33:45.172Z] [LOG]    Total components: 11
[2025-10-23T04:33:45.172Z] [LOG]    Applicable components: 11
[2025-10-23T04:33:45.172Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-23T04:33:46.836Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T04:33:46.837Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-10-01 to 2025-10-31
[2025-10-23T04:33:47.150Z] [LOG] 📊 Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-23T04:33:47.440Z] [LOG] 📊 Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-23T04:33:47.674Z] [LOG] 📊 Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-23T04:33:47.674Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T04:33:47.675Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T04:33:47.912Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T04:33:47.912Z] [LOG]    Employee ID: 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-23T04:33:47.912Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T04:33:47.913Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T04:33:47.913Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T04:33:48.281Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T04:33:48.281Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T04:33:48.282Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T04:33:48.282Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T04:33:48.283Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T04:33:48.283Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T04:33:48.283Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T04:33:48.958Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T04:33:48.958Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T04:33:49.235Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T04:33:49.236Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T04:33:49.236Z] [LOG]       Total completed sessions found: 2
[2025-10-23T04:33:49.236Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T04:33:49.236Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T04:33:49.237Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T04:33:49.550Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T04:33:49.551Z] [LOG]          Weekday: 8.50h
[2025-10-23T04:33:49.551Z] [LOG]          Saturday: 4.50h
[2025-10-23T04:33:49.551Z] [LOG]          Sunday: 0.00h
[2025-10-23T04:33:49.877Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T04:33:49.877Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T04:33:49.877Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T04:33:49.878Z] [LOG]       Current Time: 10:03:49
[2025-10-23T04:33:49.879Z] [LOG]       Expected Hours (scheduled → now): 1.56h
[2025-10-23T04:33:49.879Z] [LOG]       Actual Hours (check-in → now): 1.56h
[2025-10-23T04:33:49.879Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T04:33:49.880Z] [LOG]       Weekday: 120.56h
[2025-10-23T04:33:49.880Z] [LOG]       Saturday: 13.50h
[2025-10-23T04:33:49.880Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:33:49.880Z] [LOG]       Total Expected: 134.06h
[2025-10-23T04:33:49.881Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T04:33:49.881Z] [LOG]       Weekday: 10.06h (includes 1.56h live)
[2025-10-23T04:33:49.882Z] [LOG]       Saturday: 4.50h
[2025-10-23T04:33:49.882Z] [LOG]       Sunday: 0.00h
[2025-10-23T04:33:49.882Z] [LOG]       Total Actual: 14.56h
[2025-10-23T04:33:49.882Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T04:33:49.883Z] [LOG]       Weekday: 120.56h × Rs.235.29 = Rs.28367.47
[2025-10-23T04:33:49.883Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T04:33:49.883Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:33:49.883Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:49.884Z] [LOG]       Total Expected Earned: Rs.34367.41
[2025-10-23T04:33:49.884Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T04:33:49.884Z] [LOG]       Weekday: 10.06h × Rs.235.29 = Rs.2367.92
[2025-10-23T04:33:49.885Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T04:33:49.885Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T04:33:49.885Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:49.885Z] [LOG]       Total Actual Earned: Rs.4367.90
[2025-10-23T04:33:49.886Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T04:33:49.886Z] [LOG]       Calculated At: Oct 23, 2025, 10:03:49
[2025-10-23T04:33:49.887Z] [LOG]       Expected Earned (until NOW): Rs.34367.41
[2025-10-23T04:33:49.887Z] [LOG]       Actual Earned (until NOW): Rs.4367.90
[2025-10-23T04:33:49.887Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T04:33:49.888Z] [LOG]       Attendance Deduction: Rs.29999.50
[2025-10-23T04:33:49.888Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T04:33:49.888Z] [LOG]       📉 Shortfall: 119.50 hours (87.29% of expected)
[2025-10-23T04:33:49.889Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T04:33:49.889Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T04:33:49.889Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:33:49.889Z] [LOG]    Actual Earned Base: Rs.4367.90
[2025-10-23T04:33:49.889Z] [LOG]    Attendance Shortfall: Rs.29999.50
[2025-10-23T04:33:49.890Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T04:33:49.890Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T04:33:49.890Z] [LOG]    Gross Salary: 4367.904377591667
[2025-10-23T04:33:49.890Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T04:33:49.891Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T04:33:49.891Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:49.891Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T04:33:49.891Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:49.891Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T04:33:49.891Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:49.891Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T04:33:49.892Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:49.892Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T04:33:49.892Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:49.892Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T04:33:49.892Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:49.892Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T04:33:49.892Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:49.892Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T04:33:49.893Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:49.893Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T04:33:49.893Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:49.893Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T04:33:49.893Z] [LOG]    EPF/ETF calculated on: Rs.4367.90
[2025-10-23T04:33:49.893Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T04:33:49.893Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T04:33:49.893Z] [LOG] 💰 GROSS CALCULATION for Kaushal Thambi:
[2025-10-23T04:33:49.893Z] [LOG]    Base Salary: 50000
[2025-10-23T04:33:49.893Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T04:33:49.893Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T04:33:49.893Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:49.893Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T04:33:49.893Z] [LOG]    Fixed amount: 0
[2025-10-23T04:33:50.206Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T04:33:50.206Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:33:50.207Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T04:33:50.207Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T04:33:50.207Z] [LOG]    Actual Earned Base: Rs.4367.90
[2025-10-23T04:33:50.208Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T04:33:50.208Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T04:33:50.208Z] [LOG]    = Gross Salary: Rs.4367.90
[2025-10-23T04:33:50.209Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T04:33:50.209Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:33:50.209Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T04:33:50.210Z] [LOG]    Gross Salary: Rs.4367.90
[2025-10-23T04:33:50.210Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T04:33:50.210Z] [LOG]    = NET SALARY: Rs.4367.90
[2025-10-23T04:33:50.511Z] [LOG] Creating components for record fd1beceb-c7b8-4f70-8c19-74fc32c5a618: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T04:33:50.512Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 4367.904377591667
}
[2025-10-23T04:33:50.834Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T04:33:51.152Z] [LOG] Created payroll_record_component: f8f9707c-91bb-4e5a-8c67-a8e092d41ca8 for Base Salary (Attendance-based)
[2025-10-23T04:33:51.803Z] [LOG] ✅ Financial balances updated successfully for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-23T04:33:51.804Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T04:33:51.804Z] [LOG] 
======================================================================
[2025-10-23T04:33:51.804Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Kaushal Thambi
[2025-10-23T04:33:51.805Z] [LOG] ======================================================================
[2025-10-23T04:33:51.805Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T04:33:51.805Z] [LOG]    Actual Earned Base (Attendance-based): Rs.4367.90
[2025-10-23T04:33:51.806Z] [LOG]    Attendance Shortfall: Rs.29999.50
[2025-10-23T04:33:51.806Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:51.806Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T04:33:51.806Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T04:33:51.807Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:51.807Z] [LOG]    GROSS SALARY: Rs.4367.90
[2025-10-23T04:33:51.807Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:51.808Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T04:33:51.808Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T04:33:51.808Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T04:33:51.809Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T04:33:51.809Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T04:33:51.809Z] [LOG]    NET SALARY: Rs.4367.90
[2025-10-23T04:33:51.809Z] [LOG] ======================================================================

[2025-10-23T04:33:51.810Z] [LOG] ✅ Kaushal Thambi: Calculation completed successfully
[2025-10-23T04:33:51.810Z] [LOG] 📊 Progress: 34/34 (100.0%)
[2025-10-23T04:33:51.810Z] [LOG] 
============================================================
[2025-10-23T04:33:51.811Z] [LOG] 📈 Processing Summary: 34 successful, 0 failed
[2025-10-23T04:33:54.031Z] [LOG] 🎉 Payroll calculation completed successfully!
[2025-10-23T04:33:54.032Z] [LOG] 📊 Final Summary: 34 processed, 0 errors
[2025-10-23T04:33:54.032Z] [INFO] ================================================================================
[2025-10-23T04:33:54.032Z] [INFO] ⏰ Completed at: 2025-10-23T04:33:54.032Z
[2025-10-23T04:33:54.032Z] [INFO] 📊 Total log entries: 5352