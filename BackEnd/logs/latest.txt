[2025-10-13T07:15:14.015Z] [INFO] 🚀 Payroll calculation logging started for run: 5b7a5628-94ce-4e4d-a75e-37b7872b4ca4
[2025-10-13T07:15:14.015Z] [INFO] 📁 Log file: E:\smart_attendance_system\BackEnd\logs\payroll-run-5b7a5628-94ce-4e4d-a75e-37b7872b4ca4-2025-10-13T07-15-14-014Z.txt
[2025-10-13T07:15:14.015Z] [INFO] ⏰ Started at: 2025-10-13T07:15:14.015Z
[2025-10-13T07:15:14.015Z] [INFO] ================================================================================
[2025-10-13T07:15:14.015Z] [LOG] 🚀 Starting payroll calculation for run: 5b7a5628-94ce-4e4d-a75e-37b7872b4ca4
[2025-10-13T07:15:14.015Z] [LOG] 👤 Client ID: it-signature, User ID: 059304ea-24a5-4d78-a290-cf09b9e53c4c
[2025-10-13T07:15:14.704Z] [LOG] ✅ Payroll run verified: august (MONTHLY_2025_08_REGULAR)
[2025-10-13T07:15:15.207Z] [LOG] 📊 Status updated to 'calculating'
[2025-10-13T07:15:16.422Z] [LOG] 👥 Processing 34 employee records:
[2025-10-13T07:15:16.423Z] [LOG] ============================================================
[2025-10-13T07:15:16.423Z] [LOG] 
🧮 Processing: Franklin null (EMP000018)
[2025-10-13T07:15:16.423Z] [LOG] 📋 Record ID: 02456529-585b-4a13-9158-ed9499ea34ed
[2025-10-13T07:15:16.424Z] [LOG] 
======================================================================
[2025-10-13T07:15:16.424Z] [LOG] 🧮 CALCULATING PAYROLL: Franklin null (EMP000018)
[2025-10-13T07:15:16.424Z] [LOG] ======================================================================
[2025-10-13T07:15:18.278Z] [LOG] 🔍 Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-13T07:15:18.279Z] [LOG]    Total components: 9
[2025-10-13T07:15:18.279Z] [LOG]    Applicable components: 9
[2025-10-13T07:15:18.279Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-13T07:15:24.996Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:15:24.997Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:15:25.458Z] [LOG] 📊 Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:25.911Z] [LOG] 📊 Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:26.379Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:26.381Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:15:26.381Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:15:26.383Z] [LOG] 💰 GROSS CALCULATION for Franklin null:
[2025-10-13T07:15:26.384Z] [LOG]    Base Salary: 50000
[2025-10-13T07:15:26.384Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:15:26.841Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:15:27.298Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:15:27.298Z] [LOG]    Employee ID: 0143c037-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:27.299Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:15:27.299Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-13T07:15:27.757Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:15:27.757Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-13T07:15:27.757Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-13T07:15:27.757Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-13T07:15:27.758Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:15:28.272Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:15:28.272Z] [LOG]       Weekday (Mon-Fri): 121.77h
[2025-10-13T07:15:28.272Z] [LOG]       Saturday: 11.61h
[2025-10-13T07:15:28.273Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:15:28.273Z] [LOG]       Total Worked: 133.38h
[2025-10-13T07:15:28.273Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:15:28.273Z] [LOG]       Weekday: 121.77h × Rs.235.29 = Rs.28651.26
[2025-10-13T07:15:28.273Z] [LOG]       Saturday: 11.61h × Rs.444.44 = Rs.5159.95
[2025-10-13T07:15:28.273Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:15:28.274Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:15:28.274Z] [LOG]       Total Earned Salary: Rs.33811.21
[2025-10-13T07:15:28.274Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:15:28.274Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-13T07:15:28.274Z] [LOG]       Earned Salary: Rs.33811.21
[2025-10-13T07:15:28.274Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:15:28.274Z] [LOG]       Attendance Deduction: Rs.16188.79
[2025-10-13T07:15:28.275Z] [LOG]       📉 Deduction is 32.38% of base salary
[2025-10-13T07:15:28.275Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:15:28.276Z] [LOG]    Gross Salary: 50000
[2025-10-13T07:15:28.276Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:15:28.276Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:15:28.276Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:28.276Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:15:28.277Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:28.277Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:15:28.277Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:28.277Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:15:28.277Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:28.277Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:15:28.277Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:28.277Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:15:28.278Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:28.278Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:15:28.278Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:28.278Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:15:28.278Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:28.279Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:15:28.279Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:28.279Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:15:28.279Z] [LOG] Regular deductions for Franklin null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:15:28.279Z] [LOG] Combined deductions for Franklin null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 16188.7883,
      "details": "Based on worked hours (133.38h total)"
    }
  ],
  "total": 16188.7883
}
[2025-10-13T07:15:28.821Z] [LOG] Creating components for record 02456529-585b-4a13-9158-ed9499ea34ed: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:15:28.822Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 16188.7883
}
[2025-10-13T07:15:29.322Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:15:29.789Z] [LOG] Created payroll_record_component: 52ceca2d-0cce-41a6-9260-06156dd62507 for Attendance Deduction
[2025-10-13T07:15:30.477Z] [LOG] ✅ Financial balances updated successfully for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:30.478Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:15:30.478Z] [LOG] 
======================================================================
[2025-10-13T07:15:30.479Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Franklin null
[2025-10-13T07:15:30.479Z] [LOG] ======================================================================
[2025-10-13T07:15:30.479Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-13T07:15:30.479Z] [LOG]    Total Deductions: Rs.16188.79
[2025-10-13T07:15:30.479Z] [LOG]       - Attendance Deduction: Rs.16188.79
[2025-10-13T07:15:30.479Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:15:30.480Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:15:30.480Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:15:30.480Z] [LOG]    NET SALARY: Rs.33811.21
[2025-10-13T07:15:30.480Z] [LOG] ======================================================================

[2025-10-13T07:15:30.480Z] [LOG] ✅ Franklin null: Calculation completed successfully
[2025-10-13T07:15:30.480Z] [LOG] 📊 Progress: 1/34 (2.9%)
[2025-10-13T07:15:30.480Z] [LOG] 
🧮 Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-13T07:15:30.481Z] [LOG] 📋 Record ID: 03c6b6f2-7b31-4ed2-aec1-0fb234648287
[2025-10-13T07:15:30.481Z] [LOG] 
======================================================================
[2025-10-13T07:15:30.481Z] [LOG] 🧮 CALCULATING PAYROLL: Sujevan Selvaratnam null (EMP000026)
[2025-10-13T07:15:30.481Z] [LOG] ======================================================================
[2025-10-13T07:15:34.654Z] [LOG] 🔍 Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-13T07:15:34.655Z] [LOG]    Total components: 9
[2025-10-13T07:15:34.655Z] [LOG]    Applicable components: 9
[2025-10-13T07:15:34.656Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-13T07:15:36.910Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:15:36.910Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:15:37.189Z] [LOG] 📊 Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:37.424Z] [LOG] 📊 Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:37.655Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:37.656Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:15:37.656Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:15:37.656Z] [LOG] 💰 GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-13T07:15:37.656Z] [LOG]    Base Salary: 1
[2025-10-13T07:15:37.656Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:15:37.887Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:15:38.120Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:15:38.120Z] [LOG]    Employee ID: 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:38.121Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:15:38.121Z] [LOG]    Base Salary: Rs.1.00
[2025-10-13T07:15:38.350Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:15:38.350Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-13T07:15:38.350Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-13T07:15:38.351Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-13T07:15:38.351Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:15:38.580Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:15:38.581Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-13T07:15:38.582Z] [LOG]       Saturday: 0.00h
[2025-10-13T07:15:38.582Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:15:38.582Z] [LOG]       Total Worked: 0.00h
[2025-10-13T07:15:38.582Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:15:38.583Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:15:38.583Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:15:38.583Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:15:38.583Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:15:38.583Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-13T07:15:38.584Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:15:38.584Z] [LOG]       Base Salary: Rs.1.00
[2025-10-13T07:15:38.584Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-13T07:15:38.584Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:15:38.584Z] [LOG]       Attendance Deduction: Rs.1.00
[2025-10-13T07:15:38.585Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-13T07:15:38.585Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:15:38.585Z] [LOG]    Gross Salary: 1
[2025-10-13T07:15:38.585Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:15:38.585Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:15:38.586Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:38.586Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:15:38.586Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:38.586Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:15:38.587Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:38.587Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:15:38.587Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:38.587Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:15:38.587Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:38.588Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:15:38.588Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:38.588Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:15:38.588Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:38.588Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:15:38.589Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:38.589Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:15:38.589Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:38.589Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:15:38.589Z] [LOG] Regular deductions for Sujevan Selvaratnam null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:15:38.590Z] [LOG] Combined deductions for Sujevan Selvaratnam null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 1
}
[2025-10-13T07:15:38.820Z] [LOG] Creating components for record 03c6b6f2-7b31-4ed2-aec1-0fb234648287: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:15:38.821Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1
}
[2025-10-13T07:15:39.055Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:15:39.285Z] [LOG] Created payroll_record_component: dd1639e0-89ad-4016-b298-550516e04d08 for Attendance Deduction
[2025-10-13T07:15:39.739Z] [LOG] ✅ Financial balances updated successfully for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:39.739Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:15:39.740Z] [LOG] 
======================================================================
[2025-10-13T07:15:39.740Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sujevan Selvaratnam null
[2025-10-13T07:15:39.740Z] [LOG] ======================================================================
[2025-10-13T07:15:39.740Z] [LOG]    Gross Salary: Rs.1.00
[2025-10-13T07:15:39.740Z] [LOG]    Total Deductions: Rs.1.00
[2025-10-13T07:15:39.741Z] [LOG]       - Attendance Deduction: Rs.1.00
[2025-10-13T07:15:39.741Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:15:39.741Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:15:39.741Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:15:39.741Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-13T07:15:39.741Z] [LOG] ======================================================================

[2025-10-13T07:15:39.742Z] [LOG] ✅ Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-13T07:15:39.742Z] [LOG] 📊 Progress: 2/34 (5.9%)
[2025-10-13T07:15:39.742Z] [LOG] 
🧮 Processing: Rasanga null (EMP000028)
[2025-10-13T07:15:39.742Z] [LOG] 📋 Record ID: 121c83ed-fecd-435f-9338-eb4ecd32f138
[2025-10-13T07:15:39.742Z] [LOG] 
======================================================================
[2025-10-13T07:15:39.743Z] [LOG] 🧮 CALCULATING PAYROLL: Rasanga null (EMP000028)
[2025-10-13T07:15:39.743Z] [LOG] ======================================================================
[2025-10-13T07:15:41.501Z] [LOG] 🔍 Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-13T07:15:41.502Z] [LOG]    Total components: 9
[2025-10-13T07:15:41.503Z] [LOG]    Applicable components: 9
[2025-10-13T07:15:41.503Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-13T07:15:42.548Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:15:42.548Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:15:42.775Z] [LOG] 📊 Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:43.006Z] [LOG] 📊 Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:43.235Z] [LOG] 📊 Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:43.236Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:15:43.237Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:15:43.237Z] [LOG] 💰 GROSS CALCULATION for Rasanga null:
[2025-10-13T07:15:43.238Z] [LOG]    Base Salary: 50000
[2025-10-13T07:15:43.238Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:15:43.470Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:15:43.696Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:15:43.696Z] [LOG]    Employee ID: 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:43.697Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:15:43.697Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-13T07:15:43.927Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:15:43.928Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-13T07:15:43.928Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-13T07:15:43.929Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-13T07:15:43.929Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:15:44.155Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:15:44.156Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-13T07:15:44.156Z] [LOG]       Saturday: 0.00h
[2025-10-13T07:15:44.157Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:15:44.157Z] [LOG]       Total Worked: 0.00h
[2025-10-13T07:15:44.157Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:15:44.158Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-13T07:15:44.158Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-13T07:15:44.159Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:15:44.159Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:15:44.160Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-13T07:15:44.160Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:15:44.161Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-13T07:15:44.162Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-13T07:15:44.163Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:15:44.164Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-13T07:15:44.164Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-13T07:15:44.164Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:15:44.165Z] [LOG]    Gross Salary: 50000
[2025-10-13T07:15:44.165Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:15:44.165Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:15:44.166Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:44.166Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:15:44.166Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:44.167Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:15:44.169Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:44.169Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:15:44.169Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:44.170Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:15:44.170Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:44.171Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:15:44.171Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:44.171Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:15:44.172Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:44.172Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:15:44.173Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:44.173Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:15:44.174Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:44.174Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:15:44.175Z] [LOG] Regular deductions for Rasanga null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:15:44.175Z] [LOG] Combined deductions for Rasanga null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-13T07:15:44.425Z] [LOG] Creating components for record 121c83ed-fecd-435f-9338-eb4ecd32f138: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:15:44.426Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-13T07:15:44.656Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:15:44.954Z] [LOG] Created payroll_record_component: 9b21ef31-72f4-4b34-b664-21f4bce3201c for Attendance Deduction
[2025-10-13T07:15:45.527Z] [LOG] ✅ Financial balances updated successfully for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:45.527Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:15:45.528Z] [LOG] 
======================================================================
[2025-10-13T07:15:45.528Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Rasanga null
[2025-10-13T07:15:45.529Z] [LOG] ======================================================================
[2025-10-13T07:15:45.529Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-13T07:15:45.529Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-13T07:15:45.530Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-13T07:15:45.530Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:15:45.531Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:15:45.531Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:15:45.531Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-13T07:15:45.532Z] [LOG] ======================================================================

[2025-10-13T07:15:45.532Z] [LOG] ✅ Rasanga null: Calculation completed successfully
[2025-10-13T07:15:45.533Z] [LOG] 📊 Progress: 3/34 (8.8%)
[2025-10-13T07:15:45.535Z] [LOG] 
🧮 Processing: Shandeep null (EMP000034)
[2025-10-13T07:15:45.536Z] [LOG] 📋 Record ID: 159cc4ad-5445-48e8-a80b-24cff1aefa80
[2025-10-13T07:15:45.537Z] [LOG] 
======================================================================
[2025-10-13T07:15:45.538Z] [LOG] 🧮 CALCULATING PAYROLL: Shandeep null (EMP000034)
[2025-10-13T07:15:45.539Z] [LOG] ======================================================================
[2025-10-13T07:15:46.460Z] [LOG] 🔍 Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-13T07:15:46.461Z] [LOG]    Total components: 9
[2025-10-13T07:15:46.462Z] [LOG]    Applicable components: 9
[2025-10-13T07:15:46.462Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-13T07:15:52.950Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:15:52.950Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:15:53.179Z] [LOG] 📊 Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:53.407Z] [LOG] 📊 Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:53.634Z] [LOG] 📊 Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:53.635Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:15:53.635Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:15:53.636Z] [LOG] 💰 GROSS CALCULATION for Shandeep null:
[2025-10-13T07:15:53.636Z] [LOG]    Base Salary: 80000
[2025-10-13T07:15:53.637Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:15:53.863Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:15:54.089Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:15:54.090Z] [LOG]    Employee ID: 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:54.090Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:15:54.090Z] [LOG]    Base Salary: Rs.80000.00
[2025-10-13T07:15:54.318Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:15:54.319Z] [LOG]       Daily Salary: Rs.3200.00
[2025-10-13T07:15:54.319Z] [LOG]       Weekday Hourly Rate: Rs.376.47
[2025-10-13T07:15:54.319Z] [LOG]       Saturday Hourly Rate: Rs.711.11
[2025-10-13T07:15:54.320Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:15:54.550Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:15:54.550Z] [LOG]       Weekday (Mon-Fri): 139.35h
[2025-10-13T07:15:54.551Z] [LOG]       Saturday: 22.50h
[2025-10-13T07:15:54.551Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:15:54.551Z] [LOG]       Total Worked: 161.85h
[2025-10-13T07:15:54.552Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:15:54.552Z] [LOG]       Weekday: 139.35h × Rs.376.47 = Rs.52461.09
[2025-10-13T07:15:54.552Z] [LOG]       Saturday: 22.50h × Rs.711.11 = Rs.15999.98
[2025-10-13T07:15:54.553Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:15:54.553Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:15:54.553Z] [LOG]       Total Earned Salary: Rs.68461.07
[2025-10-13T07:15:54.553Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:15:54.554Z] [LOG]       Base Salary: Rs.80000.00
[2025-10-13T07:15:54.554Z] [LOG]       Earned Salary: Rs.68461.07
[2025-10-13T07:15:54.554Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:15:54.555Z] [LOG]       Attendance Deduction: Rs.11538.93
[2025-10-13T07:15:54.555Z] [LOG]       📉 Deduction is 14.42% of base salary
[2025-10-13T07:15:54.555Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:15:54.555Z] [LOG]    Gross Salary: 80000
[2025-10-13T07:15:54.556Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:15:54.556Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:15:54.557Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:54.557Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:15:54.558Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:54.558Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:15:54.558Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:54.559Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:15:54.559Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:54.559Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:15:54.560Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:54.560Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:15:54.563Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:54.563Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:15:54.564Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:54.564Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:15:54.564Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:54.565Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:15:54.565Z] [LOG]    Fixed amount: 0
[2025-10-13T07:15:54.565Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:15:54.566Z] [LOG] Regular deductions for Shandeep null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:15:54.566Z] [LOG] Combined deductions for Shandeep null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 11538.930500000002,
      "details": "Based on worked hours (161.85h total)"
    }
  ],
  "total": 11538.930500000002
}
[2025-10-13T07:15:54.798Z] [LOG] Creating components for record 159cc4ad-5445-48e8-a80b-24cff1aefa80: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:15:54.799Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 11538.930500000002
}
[2025-10-13T07:15:55.028Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:15:55.256Z] [LOG] Created payroll_record_component: 8e6c0e20-d862-46e4-9d1f-07c942a60d50 for Attendance Deduction
[2025-10-13T07:15:55.713Z] [LOG] ✅ Financial balances updated successfully for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-13T07:15:55.714Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:15:55.715Z] [LOG] 
======================================================================
[2025-10-13T07:15:55.715Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Shandeep null
[2025-10-13T07:15:55.715Z] [LOG] ======================================================================
[2025-10-13T07:15:55.716Z] [LOG]    Gross Salary: Rs.80000.00
[2025-10-13T07:15:55.716Z] [LOG]    Total Deductions: Rs.11538.93
[2025-10-13T07:15:55.716Z] [LOG]       - Attendance Deduction: Rs.11538.93
[2025-10-13T07:15:55.717Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:15:55.717Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:15:55.718Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:15:55.718Z] [LOG]    NET SALARY: Rs.68461.07
[2025-10-13T07:15:55.718Z] [LOG] ======================================================================

[2025-10-13T07:15:55.719Z] [LOG] ✅ Shandeep null: Calculation completed successfully
[2025-10-13T07:15:55.719Z] [LOG] 📊 Progress: 4/34 (11.8%)
[2025-10-13T07:15:55.719Z] [LOG] 
🧮 Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-13T07:15:55.725Z] [LOG] 📋 Record ID: 23324709-6188-430f-b078-76801dce3165
[2025-10-13T07:15:55.725Z] [LOG] 
======================================================================
[2025-10-13T07:15:55.726Z] [LOG] 🧮 CALCULATING PAYROLL: Viruna Damsiha Cooray null (EMP000038)
[2025-10-13T07:15:55.727Z] [LOG] ======================================================================
[2025-10-13T07:15:56.656Z] [LOG] 🔍 Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-13T07:15:56.657Z] [LOG]    Total components: 9
[2025-10-13T07:15:56.657Z] [LOG]    Applicable components: 9
[2025-10-13T07:15:56.658Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-13T07:16:06.815Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:16:06.816Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:16:07.042Z] [LOG] 📊 Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:07.272Z] [LOG] 📊 Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:07.499Z] [LOG] 📊 Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:07.500Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:16:07.500Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:16:07.500Z] [LOG] 💰 GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-13T07:16:07.501Z] [LOG]    Base Salary: 50000
[2025-10-13T07:16:07.501Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:16:07.728Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:16:07.956Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:16:07.956Z] [LOG]    Employee ID: 01441633-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:07.956Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:16:07.957Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-13T07:16:08.184Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:16:08.184Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-13T07:16:08.185Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-13T07:16:08.185Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-13T07:16:08.186Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:16:08.411Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:16:08.412Z] [LOG]       Weekday (Mon-Fri): 165.42h
[2025-10-13T07:16:08.412Z] [LOG]       Saturday: 21.57h
[2025-10-13T07:16:08.413Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:16:08.413Z] [LOG]       Total Worked: 186.99h
[2025-10-13T07:16:08.414Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:16:08.414Z] [LOG]       Weekday: 165.42h × Rs.235.29 = Rs.38921.67
[2025-10-13T07:16:08.414Z] [LOG]       Saturday: 21.57h × Rs.444.44 = Rs.9586.57
[2025-10-13T07:16:08.415Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:16:08.415Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:16:08.415Z] [LOG]       Total Earned Salary: Rs.48508.24
[2025-10-13T07:16:08.416Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:16:08.416Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-13T07:16:08.416Z] [LOG]       Earned Salary: Rs.48508.24
[2025-10-13T07:16:08.417Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:16:08.418Z] [LOG]       Attendance Deduction: Rs.1491.76
[2025-10-13T07:16:08.419Z] [LOG]       📉 Deduction is 2.98% of base salary
[2025-10-13T07:16:08.419Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:16:08.420Z] [LOG]    Gross Salary: 50000
[2025-10-13T07:16:08.421Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:16:08.421Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:16:08.421Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:08.422Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:16:08.422Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:08.423Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:16:08.424Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:08.424Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:16:08.425Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:08.425Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:16:08.426Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:08.426Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:16:08.427Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:08.428Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:16:08.428Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:08.431Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:16:08.431Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:08.432Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:16:08.432Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:08.433Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:16:08.433Z] [LOG] Regular deductions for Viruna Damsiha Cooray null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:16:08.434Z] [LOG] Combined deductions for Viruna Damsiha Cooray null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1491.7574000000022,
      "details": "Based on worked hours (186.98999999999998h total)"
    }
  ],
  "total": 1491.7574000000022
}
[2025-10-13T07:16:08.668Z] [LOG] Creating components for record 23324709-6188-430f-b078-76801dce3165: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:16:08.669Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1491.7574000000022
}
[2025-10-13T07:16:08.956Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:16:09.286Z] [LOG] Created payroll_record_component: 8a396dc1-937d-45a4-9330-3453b048487a for Attendance Deduction
[2025-10-13T07:16:09.777Z] [LOG] ✅ Financial balances updated successfully for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:09.778Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:16:09.778Z] [LOG] 
======================================================================
[2025-10-13T07:16:09.779Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Viruna Damsiha Cooray null
[2025-10-13T07:16:09.779Z] [LOG] ======================================================================
[2025-10-13T07:16:09.780Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-13T07:16:09.780Z] [LOG]    Total Deductions: Rs.1491.76
[2025-10-13T07:16:09.781Z] [LOG]       - Attendance Deduction: Rs.1491.76
[2025-10-13T07:16:09.781Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:16:09.781Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:16:09.782Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:16:09.782Z] [LOG]    NET SALARY: Rs.48508.24
[2025-10-13T07:16:09.782Z] [LOG] ======================================================================

[2025-10-13T07:16:09.783Z] [LOG] ✅ Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-13T07:16:09.784Z] [LOG] 📊 Progress: 5/34 (14.7%)
[2025-10-13T07:16:09.785Z] [LOG] 
🧮 Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-13T07:16:09.786Z] [LOG] 📋 Record ID: 2c8be224-e0f3-4429-92d3-6bb7886c9039
[2025-10-13T07:16:09.787Z] [LOG] 
======================================================================
[2025-10-13T07:16:09.788Z] [LOG] 🧮 CALCULATING PAYROLL: Ruvindu Hewabandu null (EMP000027)
[2025-10-13T07:16:09.788Z] [LOG] ======================================================================
[2025-10-13T07:16:10.718Z] [LOG] 🔍 Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-13T07:16:10.718Z] [LOG]    Total components: 9
[2025-10-13T07:16:10.719Z] [LOG]    Applicable components: 9
[2025-10-13T07:16:10.719Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-13T07:16:11.628Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:16:11.629Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:16:11.854Z] [LOG] 📊 Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:12.084Z] [LOG] 📊 Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:12.317Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:12.319Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:16:12.319Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:16:12.320Z] [LOG] 💰 GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-13T07:16:12.320Z] [LOG]    Base Salary: 0
[2025-10-13T07:16:12.320Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:16:12.547Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:16:12.778Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:16:12.778Z] [LOG]    Employee ID: 0143e915-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:12.779Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:16:12.780Z] [LOG]    Base Salary: Rs.0.00
[2025-10-13T07:16:13.027Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:16:13.028Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-13T07:16:13.028Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-13T07:16:13.029Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-13T07:16:13.029Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:16:13.254Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:16:13.255Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-13T07:16:13.256Z] [LOG]       Saturday: 0.00h
[2025-10-13T07:16:13.256Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:16:13.256Z] [LOG]       Total Worked: 0.00h
[2025-10-13T07:16:13.257Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:16:13.257Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:16:13.257Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:16:13.258Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:16:13.258Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:16:13.258Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-13T07:16:13.259Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:16:13.259Z] [LOG]       Base Salary: Rs.0.00
[2025-10-13T07:16:13.260Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-13T07:16:13.262Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:16:13.262Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-13T07:16:13.263Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-13T07:16:13.264Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:16:13.264Z] [LOG]    Gross Salary: 0
[2025-10-13T07:16:13.265Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:16:13.265Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:16:13.266Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:13.266Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:16:13.266Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:13.267Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:16:13.267Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:13.268Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:16:13.268Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:13.270Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:16:13.270Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:13.270Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:16:13.271Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:13.271Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:16:13.271Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:13.272Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:16:13.272Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:13.273Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:16:13.273Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:13.274Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:16:13.274Z] [LOG] Regular deductions for Ruvindu Hewabandu null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:16:13.274Z] [LOG] Combined deductions for Ruvindu Hewabandu null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 0
}
[2025-10-13T07:16:13.502Z] [LOG] Creating components for record 2c8be224-e0f3-4429-92d3-6bb7886c9039: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:16:13.502Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-13T07:16:13.732Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:16:13.961Z] [LOG] Created payroll_record_component: cc4c2277-f848-4761-8bcc-2804f99d606a for Attendance Deduction
[2025-10-13T07:16:14.422Z] [LOG] ✅ Financial balances updated successfully for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:14.422Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:16:14.423Z] [LOG] 
======================================================================
[2025-10-13T07:16:14.423Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ruvindu Hewabandu null
[2025-10-13T07:16:14.424Z] [LOG] ======================================================================
[2025-10-13T07:16:14.424Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-13T07:16:14.424Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-13T07:16:14.425Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-13T07:16:14.425Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:16:14.425Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:16:14.425Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:16:14.426Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-13T07:16:14.426Z] [LOG] ======================================================================

[2025-10-13T07:16:14.427Z] [LOG] ✅ Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-13T07:16:14.427Z] [LOG] 📊 Progress: 6/34 (17.6%)
[2025-10-13T07:16:14.427Z] [LOG] 
🧮 Processing: Chamodi null (EMP000032)
[2025-10-13T07:16:14.428Z] [LOG] 📋 Record ID: 33b55583-78f1-427b-a562-5b502e315315
[2025-10-13T07:16:14.428Z] [LOG] 
======================================================================
[2025-10-13T07:16:14.429Z] [LOG] 🧮 CALCULATING PAYROLL: Chamodi null (EMP000032)
[2025-10-13T07:16:14.430Z] [LOG] ======================================================================
[2025-10-13T07:16:15.352Z] [LOG] 🔍 Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-13T07:16:15.352Z] [LOG]    Total components: 9
[2025-10-13T07:16:15.353Z] [LOG]    Applicable components: 9
[2025-10-13T07:16:15.354Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-13T07:16:21.366Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:16:21.366Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:16:21.592Z] [LOG] 📊 Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:21.822Z] [LOG] 📊 Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:22.051Z] [LOG] 📊 Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:22.052Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:16:22.052Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:16:22.053Z] [LOG] 💰 GROSS CALCULATION for Chamodi null:
[2025-10-13T07:16:22.053Z] [LOG]    Base Salary: 50000
[2025-10-13T07:16:22.054Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:16:22.285Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:16:22.513Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:16:22.513Z] [LOG]    Employee ID: 0143f302-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:22.514Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:16:22.515Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-13T07:16:22.745Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:16:22.745Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-13T07:16:22.746Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-13T07:16:22.747Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-13T07:16:22.747Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:16:22.974Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:16:22.974Z] [LOG]       Weekday (Mon-Fri): 150.11h
[2025-10-13T07:16:22.975Z] [LOG]       Saturday: 18.09h
[2025-10-13T07:16:22.975Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:16:22.976Z] [LOG]       Total Worked: 168.20h
[2025-10-13T07:16:22.976Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:16:22.977Z] [LOG]       Weekday: 150.11h × Rs.235.29 = Rs.35319.38
[2025-10-13T07:16:22.977Z] [LOG]       Saturday: 18.09h × Rs.444.44 = Rs.8039.92
[2025-10-13T07:16:22.978Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:16:22.978Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:16:22.979Z] [LOG]       Total Earned Salary: Rs.43359.30
[2025-10-13T07:16:22.979Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:16:22.980Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-13T07:16:22.980Z] [LOG]       Earned Salary: Rs.43359.30
[2025-10-13T07:16:22.981Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:16:22.982Z] [LOG]       Attendance Deduction: Rs.6640.70
[2025-10-13T07:16:22.982Z] [LOG]       📉 Deduction is 13.28% of base salary
[2025-10-13T07:16:22.983Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:16:22.984Z] [LOG]    Gross Salary: 50000
[2025-10-13T07:16:22.984Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:16:22.984Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:16:22.985Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:22.985Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:16:22.987Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:22.987Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:16:22.988Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:22.989Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:16:22.989Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:22.990Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:16:22.990Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:22.990Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:16:22.991Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:22.991Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:16:22.991Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:22.992Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:16:22.992Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:22.992Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:16:22.992Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:22.993Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:16:22.993Z] [LOG] Regular deductions for Chamodi null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:16:22.993Z] [LOG] Combined deductions for Chamodi null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 6640.698499999999,
      "details": "Based on worked hours (168.20000000000002h total)"
    }
  ],
  "total": 6640.698499999999
}
[2025-10-13T07:16:23.231Z] [LOG] Creating components for record 33b55583-78f1-427b-a562-5b502e315315: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:16:23.231Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 6640.698499999999
}
[2025-10-13T07:16:23.470Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:16:23.699Z] [LOG] Created payroll_record_component: ccc2780b-bee1-4089-bcb6-a6b8c50d7cd7 for Attendance Deduction
[2025-10-13T07:16:24.154Z] [LOG] ✅ Financial balances updated successfully for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:24.155Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:16:24.156Z] [LOG] 
======================================================================
[2025-10-13T07:16:24.156Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chamodi null
[2025-10-13T07:16:24.156Z] [LOG] ======================================================================
[2025-10-13T07:16:24.156Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-13T07:16:24.157Z] [LOG]    Total Deductions: Rs.6640.70
[2025-10-13T07:16:24.157Z] [LOG]       - Attendance Deduction: Rs.6640.70
[2025-10-13T07:16:24.158Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:16:24.158Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:16:24.158Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:16:24.158Z] [LOG]    NET SALARY: Rs.43359.30
[2025-10-13T07:16:24.159Z] [LOG] ======================================================================

[2025-10-13T07:16:24.159Z] [LOG] ✅ Chamodi null: Calculation completed successfully
[2025-10-13T07:16:24.160Z] [LOG] 📊 Progress: 7/34 (20.6%)
[2025-10-13T07:16:24.162Z] [LOG] 
🧮 Processing: Chemil null (EMP000040)
[2025-10-13T07:16:24.163Z] [LOG] 📋 Record ID: 352549b6-aaf5-4fda-8709-b18b76122ac9
[2025-10-13T07:16:24.163Z] [LOG] 
======================================================================
[2025-10-13T07:16:24.164Z] [LOG] 🧮 CALCULATING PAYROLL: Chemil null (EMP000040)
[2025-10-13T07:16:24.164Z] [LOG] ======================================================================
[2025-10-13T07:16:25.087Z] [LOG] 🔍 Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-13T07:16:25.087Z] [LOG]    Total components: 9
[2025-10-13T07:16:25.088Z] [LOG]    Applicable components: 9
[2025-10-13T07:16:25.088Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-13T07:16:30.755Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:16:30.757Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:16:30.988Z] [LOG] 📊 Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:31.216Z] [LOG] 📊 Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:31.447Z] [LOG] 📊 Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:31.448Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:16:31.449Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:16:31.449Z] [LOG] 💰 GROSS CALCULATION for Chemil null:
[2025-10-13T07:16:31.449Z] [LOG]    Base Salary: 250000
[2025-10-13T07:16:31.450Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:16:31.677Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:16:31.907Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:16:31.907Z] [LOG]    Employee ID: 01442599-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:31.908Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:16:31.909Z] [LOG]    Base Salary: Rs.250000.00
[2025-10-13T07:16:32.137Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:16:32.138Z] [LOG]       Daily Salary: Rs.10000.00
[2025-10-13T07:16:32.138Z] [LOG]       Weekday Hourly Rate: Rs.1176.47
[2025-10-13T07:16:32.139Z] [LOG]       Saturday Hourly Rate: Rs.2222.22
[2025-10-13T07:16:32.139Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:16:32.369Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:16:32.369Z] [LOG]       Weekday (Mon-Fri): 148.35h
[2025-10-13T07:16:32.370Z] [LOG]       Saturday: 9.00h
[2025-10-13T07:16:32.370Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:16:32.370Z] [LOG]       Total Worked: 157.35h
[2025-10-13T07:16:32.371Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:16:32.371Z] [LOG]       Weekday: 148.35h × Rs.1176.47 = Rs.174529.32
[2025-10-13T07:16:32.372Z] [LOG]       Saturday: 9.00h × Rs.2222.22 = Rs.19999.98
[2025-10-13T07:16:32.372Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:16:32.372Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:16:32.372Z] [LOG]       Total Earned Salary: Rs.194529.30
[2025-10-13T07:16:32.373Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:16:32.373Z] [LOG]       Base Salary: Rs.250000.00
[2025-10-13T07:16:32.374Z] [LOG]       Earned Salary: Rs.194529.30
[2025-10-13T07:16:32.374Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:16:32.374Z] [LOG]       Attendance Deduction: Rs.55470.70
[2025-10-13T07:16:32.375Z] [LOG]       📉 Deduction is 22.19% of base salary
[2025-10-13T07:16:32.376Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:16:32.377Z] [LOG]    Gross Salary: 250000
[2025-10-13T07:16:32.377Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:16:32.377Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:16:32.378Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:32.378Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:16:32.378Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:32.379Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:16:32.380Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:32.380Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:16:32.380Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:32.381Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:16:32.382Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:32.382Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:16:32.382Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:32.383Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:16:32.383Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:32.383Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:16:32.384Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:32.384Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:16:32.384Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:32.385Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:16:32.385Z] [LOG] Regular deductions for Chemil null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:16:32.385Z] [LOG] Combined deductions for Chemil null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 55470.6955,
      "details": "Based on worked hours (157.35h total)"
    }
  ],
  "total": 55470.6955
}
[2025-10-13T07:16:32.617Z] [LOG] Creating components for record 352549b6-aaf5-4fda-8709-b18b76122ac9: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 1
}
[2025-10-13T07:16:32.618Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 55470.6955
}
[2025-10-13T07:16:32.848Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:16:33.078Z] [LOG] Created payroll_record_component: cdc91a76-04de-4fd5-a1eb-57f55678fc31 for Attendance Deduction
[2025-10-13T07:16:33.079Z] [LOG] Processing component: {
  "name": "Income Tax",
  "type": "tax",
  "amount": 12000
}
[2025-10-13T07:16:33.306Z] [LOG] Using existing component ID: 72f98b53-4bd5-4713-98d0-e3a641ad8d0f
[2025-10-13T07:16:33.540Z] [LOG] Created payroll_record_component: 1fa372a3-5e2c-48be-b98e-e844c65a3061 for Income Tax
[2025-10-13T07:16:34.000Z] [LOG] ✅ Financial balances updated successfully for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:34.001Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:16:34.001Z] [LOG] 
======================================================================
[2025-10-13T07:16:34.002Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chemil null
[2025-10-13T07:16:34.002Z] [LOG] ======================================================================
[2025-10-13T07:16:34.002Z] [LOG]    Gross Salary: Rs.250000.00
[2025-10-13T07:16:34.002Z] [LOG]    Total Deductions: Rs.55470.70
[2025-10-13T07:16:34.003Z] [LOG]       - Attendance Deduction: Rs.55470.70
[2025-10-13T07:16:34.003Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:16:34.004Z] [LOG]    Total Taxes: Rs.12000.00
[2025-10-13T07:16:34.004Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:16:34.004Z] [LOG]    NET SALARY: Rs.182529.30
[2025-10-13T07:16:34.005Z] [LOG] ======================================================================

[2025-10-13T07:16:34.005Z] [LOG] ✅ Chemil null: Calculation completed successfully
[2025-10-13T07:16:34.006Z] [LOG] 📊 Progress: 8/34 (23.5%)
[2025-10-13T07:16:34.006Z] [LOG] 
🧮 Processing: Prasanthan null (EMP000001)
[2025-10-13T07:16:34.007Z] [LOG] 📋 Record ID: 3808a173-76fb-4ca7-835a-9aec32829910
[2025-10-13T07:16:34.008Z] [LOG] 
======================================================================
[2025-10-13T07:16:34.009Z] [LOG] 🧮 CALCULATING PAYROLL: Prasanthan null (EMP000001)
[2025-10-13T07:16:34.011Z] [LOG] ======================================================================
[2025-10-13T07:16:34.939Z] [LOG] 🔍 Component filtering for employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-13T07:16:34.939Z] [LOG]    Total components: 9
[2025-10-13T07:16:34.939Z] [LOG]    Applicable components: 9
[2025-10-13T07:16:34.940Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-13T07:16:35.875Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:16:35.876Z] [LOG] 🔄 Processing financial records for employee 014397c7-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:16:36.112Z] [LOG] 📊 Found 0 active loans for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:36.350Z] [LOG] 📊 Found 0 active advances for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:36.578Z] [LOG] 📊 Found 0 approved bonuses for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:36.581Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:16:36.582Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:16:36.582Z] [LOG] 💰 GROSS CALCULATION for Prasanthan null:
[2025-10-13T07:16:36.583Z] [LOG]    Base Salary: 150000
[2025-10-13T07:16:36.583Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:16:36.833Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:16:37.060Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:16:37.060Z] [LOG]    Employee ID: 014397c7-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:37.061Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:16:37.061Z] [LOG]    Base Salary: Rs.150000.00
[2025-10-13T07:16:37.293Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:16:37.293Z] [LOG]       Daily Salary: Rs.6000.00
[2025-10-13T07:16:37.293Z] [LOG]       Weekday Hourly Rate: Rs.705.88
[2025-10-13T07:16:37.294Z] [LOG]       Saturday Hourly Rate: Rs.705.88
[2025-10-13T07:16:37.294Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:16:37.527Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:16:37.528Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-13T07:16:37.528Z] [LOG]       Saturday: 0.00h
[2025-10-13T07:16:37.528Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:16:37.529Z] [LOG]       Total Worked: 0.00h
[2025-10-13T07:16:37.529Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:16:37.530Z] [LOG]       Weekday: 0.00h × Rs.705.88 = Rs.0.00
[2025-10-13T07:16:37.530Z] [LOG]       Saturday: 0.00h × Rs.705.88 = Rs.0.00
[2025-10-13T07:16:37.530Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:16:37.531Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:16:37.531Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-13T07:16:37.532Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:16:37.532Z] [LOG]       Base Salary: Rs.150000.00
[2025-10-13T07:16:37.533Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-13T07:16:37.533Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:16:37.534Z] [LOG]       Attendance Deduction: Rs.150000.00
[2025-10-13T07:16:37.535Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-13T07:16:37.536Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:16:37.537Z] [LOG]    Gross Salary: 150000
[2025-10-13T07:16:37.538Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:16:37.539Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:16:37.540Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:37.541Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:16:37.541Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:37.542Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:16:37.542Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:37.542Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:16:37.543Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:37.544Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:16:37.544Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:37.545Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:16:37.545Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:37.545Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:16:37.546Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:37.547Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:16:37.547Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:37.548Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:16:37.548Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:37.549Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:16:37.549Z] [LOG] Regular deductions for Prasanthan null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:16:37.550Z] [LOG] Combined deductions for Prasanthan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 150000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 150000
}
[2025-10-13T07:16:37.777Z] [LOG] Creating components for record 3808a173-76fb-4ca7-835a-9aec32829910: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 1
}
[2025-10-13T07:16:37.778Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 150000
}
[2025-10-13T07:16:38.007Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:16:38.237Z] [LOG] Created payroll_record_component: 34880b01-43ab-4eee-b9e5-ff82d1f9a379 for Attendance Deduction
[2025-10-13T07:16:38.237Z] [LOG] Processing component: {
  "name": "Income Tax",
  "type": "tax",
  "amount": 3000
}
[2025-10-13T07:16:38.480Z] [LOG] Using existing component ID: 72f98b53-4bd5-4713-98d0-e3a641ad8d0f
[2025-10-13T07:16:38.708Z] [LOG] Created payroll_record_component: 64e4b504-791a-43fa-a0c1-f5458e0e8a78 for Income Tax
[2025-10-13T07:16:39.184Z] [LOG] ✅ Financial balances updated successfully for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:39.184Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:16:39.185Z] [LOG] 
======================================================================
[2025-10-13T07:16:39.185Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Prasanthan null
[2025-10-13T07:16:39.186Z] [LOG] ======================================================================
[2025-10-13T07:16:39.186Z] [LOG]    Gross Salary: Rs.150000.00
[2025-10-13T07:16:39.186Z] [LOG]    Total Deductions: Rs.150000.00
[2025-10-13T07:16:39.187Z] [LOG]       - Attendance Deduction: Rs.150000.00
[2025-10-13T07:16:39.187Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:16:39.187Z] [LOG]    Total Taxes: Rs.3000.00
[2025-10-13T07:16:39.188Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:16:39.188Z] [LOG]    NET SALARY: Rs.-3000.00
[2025-10-13T07:16:39.188Z] [LOG] ======================================================================

[2025-10-13T07:16:39.189Z] [LOG] ✅ Prasanthan null: Calculation completed successfully
[2025-10-13T07:16:39.189Z] [LOG] 📊 Progress: 9/34 (26.5%)
[2025-10-13T07:16:39.189Z] [LOG] 
🧮 Processing: Piyumi null (EMP000025)
[2025-10-13T07:16:39.189Z] [LOG] 📋 Record ID: 3c4a5a93-803b-4dfe-a251-3a4275a31272
[2025-10-13T07:16:39.191Z] [LOG] 
======================================================================
[2025-10-13T07:16:39.192Z] [LOG] 🧮 CALCULATING PAYROLL: Piyumi null (EMP000025)
[2025-10-13T07:16:39.192Z] [LOG] ======================================================================
[2025-10-13T07:16:40.143Z] [LOG] 🔍 Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-13T07:16:40.144Z] [LOG]    Total components: 9
[2025-10-13T07:16:40.144Z] [LOG]    Applicable components: 9
[2025-10-13T07:16:40.145Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-13T07:16:41.532Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:16:41.532Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:16:41.763Z] [LOG] 📊 Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:41.992Z] [LOG] 📊 Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:42.225Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:42.226Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:16:42.227Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:16:42.227Z] [LOG] 💰 GROSS CALCULATION for Piyumi null:
[2025-10-13T07:16:42.227Z] [LOG]    Base Salary: 50000
[2025-10-13T07:16:42.228Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:16:42.494Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:16:42.724Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:16:42.725Z] [LOG]    Employee ID: 0143e565-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:42.725Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:16:42.725Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-13T07:16:42.967Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:16:42.968Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-13T07:16:42.968Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-13T07:16:42.968Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-13T07:16:42.969Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:16:43.208Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:16:43.208Z] [LOG]       Weekday (Mon-Fri): 139.96h
[2025-10-13T07:16:43.208Z] [LOG]       Saturday: 16.11h
[2025-10-13T07:16:43.208Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:16:43.209Z] [LOG]       Total Worked: 156.07h
[2025-10-13T07:16:43.209Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:16:43.209Z] [LOG]       Weekday: 139.96h × Rs.235.29 = Rs.32931.19
[2025-10-13T07:16:43.209Z] [LOG]       Saturday: 16.11h × Rs.444.44 = Rs.7159.93
[2025-10-13T07:16:43.209Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:16:43.209Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:16:43.209Z] [LOG]       Total Earned Salary: Rs.40091.12
[2025-10-13T07:16:43.209Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:16:43.210Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-13T07:16:43.210Z] [LOG]       Earned Salary: Rs.40091.12
[2025-10-13T07:16:43.210Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:16:43.210Z] [LOG]       Attendance Deduction: Rs.9908.88
[2025-10-13T07:16:43.210Z] [LOG]       📉 Deduction is 19.82% of base salary
[2025-10-13T07:16:43.210Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:16:43.210Z] [LOG]    Gross Salary: 50000
[2025-10-13T07:16:43.211Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:16:43.211Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:16:43.211Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:43.211Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:16:43.211Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:43.211Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:16:43.212Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:43.212Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:16:43.212Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:43.212Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:16:43.212Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:43.212Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:16:43.212Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:43.213Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:16:43.213Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:43.213Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:16:43.213Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:43.213Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:16:43.213Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:43.213Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:16:43.214Z] [LOG] Regular deductions for Piyumi null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:16:43.214Z] [LOG] Combined deductions for Piyumi null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 9908.883200000004,
      "details": "Based on worked hours (156.07h total)"
    }
  ],
  "total": 9908.883200000004
}
[2025-10-13T07:16:43.444Z] [LOG] Creating components for record 3c4a5a93-803b-4dfe-a251-3a4275a31272: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:16:43.444Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 9908.883200000004
}
[2025-10-13T07:16:43.740Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:16:44.079Z] [LOG] Created payroll_record_component: 48daa667-1796-42d9-9476-eaae3fa431fa for Attendance Deduction
[2025-10-13T07:16:44.532Z] [LOG] ✅ Financial balances updated successfully for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:44.532Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:16:44.533Z] [LOG] 
======================================================================
[2025-10-13T07:16:44.533Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Piyumi null
[2025-10-13T07:16:44.533Z] [LOG] ======================================================================
[2025-10-13T07:16:44.533Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-13T07:16:44.534Z] [LOG]    Total Deductions: Rs.9908.88
[2025-10-13T07:16:44.534Z] [LOG]       - Attendance Deduction: Rs.9908.88
[2025-10-13T07:16:44.534Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:16:44.534Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:16:44.534Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:16:44.535Z] [LOG]    NET SALARY: Rs.40091.12
[2025-10-13T07:16:44.535Z] [LOG] ======================================================================

[2025-10-13T07:16:44.536Z] [LOG] ✅ Piyumi null: Calculation completed successfully
[2025-10-13T07:16:44.536Z] [LOG] 📊 Progress: 10/34 (29.4%)
[2025-10-13T07:16:44.536Z] [LOG] 
🧮 Processing: Jessie null (EMP000013)
[2025-10-13T07:16:44.537Z] [LOG] 📋 Record ID: 3e9850c2-0d18-4582-bd00-e6a178e86576
[2025-10-13T07:16:44.537Z] [LOG] 
======================================================================
[2025-10-13T07:16:44.537Z] [LOG] 🧮 CALCULATING PAYROLL: Jessie null (EMP000013)
[2025-10-13T07:16:44.537Z] [LOG] ======================================================================
[2025-10-13T07:16:45.451Z] [LOG] 🔍 Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-13T07:16:45.452Z] [LOG]    Total components: 9
[2025-10-13T07:16:45.452Z] [LOG]    Applicable components: 9
[2025-10-13T07:16:45.452Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-13T07:16:54.205Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:16:54.205Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:16:54.434Z] [LOG] 📊 Found 1 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:54.663Z] [LOG] 📊 Found 1 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:54.903Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:54.903Z] [LOG] 💰 Loan 2625eeef-b509-439f-9fbe-f80c1065c6fe: Deducting LKR 10000 (Remaining: LKR 10000)
[2025-10-13T07:16:54.904Z] [LOG] 💸 Advance d1db4f71-1c1e-4611-a1c5-6cec09c476d8: Deducting LKR 17000 (Remaining: LKR 17000)
[2025-10-13T07:16:54.904Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 10000,
  "advances": 17000,
  "bonuses": 0,
  "netAdjustment": -27000
}
[2025-10-13T07:16:54.905Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:16:54.905Z] [LOG] 💰 GROSS CALCULATION for Jessie null:
[2025-10-13T07:16:54.905Z] [LOG]    Base Salary: 60000
[2025-10-13T07:16:54.906Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:16:55.139Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:16:55.443Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:16:55.444Z] [LOG]    Employee ID: 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:55.444Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:16:55.444Z] [LOG]    Base Salary: Rs.60000.00
[2025-10-13T07:16:55.743Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:16:55.743Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-13T07:16:55.744Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-13T07:16:55.744Z] [LOG]       Saturday Hourly Rate: Rs.282.35
[2025-10-13T07:16:55.744Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:16:55.977Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:16:55.977Z] [LOG]       Weekday (Mon-Fri): 136.18h
[2025-10-13T07:16:55.978Z] [LOG]       Saturday: 0.00h
[2025-10-13T07:16:55.978Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:16:55.978Z] [LOG]       Total Worked: 136.18h
[2025-10-13T07:16:55.978Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:16:55.978Z] [LOG]       Weekday: 136.18h × Rs.282.35 = Rs.38450.42
[2025-10-13T07:16:55.979Z] [LOG]       Saturday: 0.00h × Rs.282.35 = Rs.0.00
[2025-10-13T07:16:55.979Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:16:55.979Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:16:55.979Z] [LOG]       Total Earned Salary: Rs.38450.42
[2025-10-13T07:16:55.979Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:16:55.980Z] [LOG]       Base Salary: Rs.60000.00
[2025-10-13T07:16:55.980Z] [LOG]       Earned Salary: Rs.38450.42
[2025-10-13T07:16:55.980Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:16:55.980Z] [LOG]       Attendance Deduction: Rs.21549.58
[2025-10-13T07:16:55.981Z] [LOG]       📉 Deduction is 35.92% of base salary
[2025-10-13T07:16:55.981Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:16:55.981Z] [LOG]    Gross Salary: 60000
[2025-10-13T07:16:55.981Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:16:55.982Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:16:55.982Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:55.982Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:16:55.982Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:55.983Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:16:55.983Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:55.983Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:16:55.983Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:55.984Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:16:55.984Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:55.984Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:16:55.985Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:55.985Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:16:55.985Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:55.985Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:16:55.985Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:55.985Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:16:55.986Z] [LOG]    Fixed amount: 0
[2025-10-13T07:16:55.986Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:16:55.986Z] [LOG] Regular deductions for Jessie null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:16:55.986Z] [LOG] Combined deductions for Jessie null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 21549.576999999997,
      "details": "Based on worked hours (136.18h total)"
    },
    {
      "code": "LOAN_DED",
      "name": "Loan Deductions",
      "type": "deduction",
      "category": "loan",
      "amount": 10000,
      "details": "1 loan(s)"
    },
    {
      "code": "ADVANCE_DED",
      "name": "Advance Deductions",
      "type": "deduction",
      "category": "other",
      "amount": 17000,
      "details": "1 advance(s)"
    }
  ],
  "total": 48549.577
}
[2025-10-13T07:16:56.220Z] [LOG] Creating components for record 3e9850c2-0d18-4582-bd00-e6a178e86576: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 3,
  "taxComponentsCount": 0
}
[2025-10-13T07:16:56.221Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 21549.576999999997
}
[2025-10-13T07:16:56.453Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:16:56.680Z] [LOG] Created payroll_record_component: 7dc717ad-037d-4722-9618-b3e7fe45982d for Attendance Deduction
[2025-10-13T07:16:56.681Z] [LOG] Processing component: {
  "name": "Loan Deductions",
  "type": "deduction",
  "amount": 10000
}
[2025-10-13T07:16:56.905Z] [LOG] Using existing component ID: 64a0d7d8-8fdb-4968-a7a2-057590b481c7
[2025-10-13T07:16:57.150Z] [LOG] Created payroll_record_component: 6ab07f33-10a9-4646-b26e-c8996943d143 for Loan Deductions
[2025-10-13T07:16:57.151Z] [LOG] Processing component: {
  "name": "Advance Deductions",
  "type": "deduction",
  "amount": 17000
}
[2025-10-13T07:16:57.388Z] [LOG] Using existing component ID: 212471aa-dc59-47a4-9969-235f68be2fa4
[2025-10-13T07:16:57.617Z] [LOG] Created payroll_record_component: 029f5e79-854e-4451-887f-bb2bc101644a for Advance Deductions
[2025-10-13T07:16:58.326Z] [LOG] ✅ Updated loan 2625eeef-b509-439f-9fbe-f80c1065c6fe: Remaining LKR 0, Status: completed
[2025-10-13T07:16:58.813Z] [LOG] ✅ Updated advance d1db4f71-1c1e-4611-a1c5-6cec09c476d8: Remaining LKR 0, Status: completed
[2025-10-13T07:16:59.042Z] [LOG] ✅ Financial balances updated successfully for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-13T07:16:59.042Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:16:59.042Z] [LOG] 
======================================================================
[2025-10-13T07:16:59.043Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Jessie null
[2025-10-13T07:16:59.044Z] [LOG] ======================================================================
[2025-10-13T07:16:59.044Z] [LOG]    Gross Salary: Rs.60000.00
[2025-10-13T07:16:59.044Z] [LOG]    Total Deductions: Rs.48549.58
[2025-10-13T07:16:59.045Z] [LOG]       - Attendance Deduction: Rs.21549.58
[2025-10-13T07:16:59.045Z] [LOG]       - Other Deductions: Rs.27000.00
[2025-10-13T07:16:59.045Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:16:59.045Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:16:59.046Z] [LOG]    NET SALARY: Rs.11450.42
[2025-10-13T07:16:59.046Z] [LOG] ======================================================================

[2025-10-13T07:16:59.046Z] [LOG] ✅ Jessie null: Calculation completed successfully
[2025-10-13T07:16:59.047Z] [LOG] 📊 Progress: 11/34 (32.4%)
[2025-10-13T07:16:59.047Z] [LOG] 
🧮 Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-13T07:16:59.047Z] [LOG] 📋 Record ID: 4d3144fb-1c6f-486c-aa13-e82a75617604
[2025-10-13T07:16:59.048Z] [LOG] 
======================================================================
[2025-10-13T07:16:59.048Z] [LOG] 🧮 CALCULATING PAYROLL: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-13T07:16:59.048Z] [LOG] ======================================================================
[2025-10-13T07:16:59.985Z] [LOG] 🔍 Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-13T07:16:59.985Z] [LOG]    Total components: 9
[2025-10-13T07:16:59.985Z] [LOG]    Applicable components: 9
[2025-10-13T07:16:59.985Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-13T07:17:00.963Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:17:00.963Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:17:01.190Z] [LOG] 📊 Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:01.420Z] [LOG] 📊 Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:01.649Z] [LOG] 📊 Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:01.650Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:17:01.651Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:17:01.651Z] [LOG] 💰 GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-13T07:17:01.652Z] [LOG]    Base Salary: 50000
[2025-10-13T07:17:01.652Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:17:01.887Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:17:02.121Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:17:02.122Z] [LOG]    Employee ID: 0144315c-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:02.122Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:17:02.122Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-13T07:17:02.351Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:17:02.352Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-13T07:17:02.352Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-13T07:17:02.352Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-13T07:17:02.353Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:17:02.579Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:17:02.579Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-13T07:17:02.579Z] [LOG]       Saturday: 0.00h
[2025-10-13T07:17:02.580Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:17:02.580Z] [LOG]       Total Worked: 0.00h
[2025-10-13T07:17:02.580Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:17:02.580Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-13T07:17:02.581Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-13T07:17:02.581Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:17:02.581Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:17:02.582Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-13T07:17:02.582Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:17:02.582Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-13T07:17:02.583Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-13T07:17:02.583Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:17:02.583Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-13T07:17:02.583Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-13T07:17:02.584Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:17:02.585Z] [LOG]    Gross Salary: 50000
[2025-10-13T07:17:02.586Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:17:02.586Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:17:02.586Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:02.586Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:17:02.587Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:02.587Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:17:02.588Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:02.588Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:17:02.588Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:02.589Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:17:02.589Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:02.590Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:17:02.590Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:02.590Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:17:02.591Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:02.591Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:17:02.591Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:02.592Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:17:02.592Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:02.592Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:17:02.592Z] [LOG] Regular deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:17:02.593Z] [LOG] Combined deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-13T07:17:02.819Z] [LOG] Creating components for record 4d3144fb-1c6f-486c-aa13-e82a75617604: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:17:02.820Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-13T07:17:03.046Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:17:03.287Z] [LOG] Created payroll_record_component: 32c001f7-3997-4190-88ce-f1efce9309c7 for Attendance Deduction
[2025-10-13T07:17:03.761Z] [LOG] ✅ Financial balances updated successfully for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:03.761Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:17:03.762Z] [LOG] 
======================================================================
[2025-10-13T07:17:03.762Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: G.M Supathala Sadaru Madhushan null
[2025-10-13T07:17:03.762Z] [LOG] ======================================================================
[2025-10-13T07:17:03.763Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-13T07:17:03.763Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-13T07:17:03.763Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-13T07:17:03.764Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:17:03.764Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:17:03.764Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:17:03.764Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-13T07:17:03.765Z] [LOG] ======================================================================

[2025-10-13T07:17:03.765Z] [LOG] ✅ G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-13T07:17:03.765Z] [LOG] 📊 Progress: 12/34 (35.3%)
[2025-10-13T07:17:03.765Z] [LOG] 
🧮 Processing: Ratheeshanan null (EMP000047)
[2025-10-13T07:17:03.765Z] [LOG] 📋 Record ID: 5aa9c96a-e11b-467d-88f6-65d8ff65ff5c
[2025-10-13T07:17:03.766Z] [LOG] 
======================================================================
[2025-10-13T07:17:03.766Z] [LOG] 🧮 CALCULATING PAYROLL: Ratheeshanan null (EMP000047)
[2025-10-13T07:17:03.766Z] [LOG] ======================================================================
[2025-10-13T07:17:04.697Z] [LOG] 🔍 Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-13T07:17:04.697Z] [LOG]    Total components: 9
[2025-10-13T07:17:04.698Z] [LOG]    Applicable components: 9
[2025-10-13T07:17:04.698Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-13T07:17:08.384Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:17:08.384Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:17:08.612Z] [LOG] 📊 Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:08.850Z] [LOG] 📊 Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:09.085Z] [LOG] 📊 Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:09.086Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:17:09.086Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:17:09.087Z] [LOG] 💰 GROSS CALCULATION for Ratheeshanan null:
[2025-10-13T07:17:09.087Z] [LOG]    Base Salary: 25000
[2025-10-13T07:17:09.087Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:17:09.314Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:17:09.550Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:17:09.550Z] [LOG]    Employee ID: 01444966-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:09.551Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:17:09.551Z] [LOG]    Base Salary: Rs.25000.00
[2025-10-13T07:17:09.780Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:17:09.780Z] [LOG]       Daily Salary: Rs.1000.00
[2025-10-13T07:17:09.781Z] [LOG]       Weekday Hourly Rate: Rs.117.65
[2025-10-13T07:17:09.781Z] [LOG]       Saturday Hourly Rate: Rs.222.22
[2025-10-13T07:17:09.781Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:17:10.011Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:17:10.011Z] [LOG]       Weekday (Mon-Fri): 139.86h
[2025-10-13T07:17:10.012Z] [LOG]       Saturday: 22.50h
[2025-10-13T07:17:10.013Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:17:10.013Z] [LOG]       Total Worked: 162.36h
[2025-10-13T07:17:10.013Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:17:10.014Z] [LOG]       Weekday: 139.86h × Rs.117.65 = Rs.16454.53
[2025-10-13T07:17:10.015Z] [LOG]       Saturday: 22.50h × Rs.222.22 = Rs.4999.95
[2025-10-13T07:17:10.015Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:17:10.015Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:17:10.015Z] [LOG]       Total Earned Salary: Rs.21454.48
[2025-10-13T07:17:10.016Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:17:10.016Z] [LOG]       Base Salary: Rs.25000.00
[2025-10-13T07:17:10.016Z] [LOG]       Earned Salary: Rs.21454.48
[2025-10-13T07:17:10.018Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:17:10.019Z] [LOG]       Attendance Deduction: Rs.3545.52
[2025-10-13T07:17:10.020Z] [LOG]       📉 Deduction is 14.18% of base salary
[2025-10-13T07:17:10.020Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:17:10.021Z] [LOG]    Gross Salary: 25000
[2025-10-13T07:17:10.021Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:17:10.022Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:17:10.022Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:10.022Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:17:10.022Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:10.023Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:17:10.024Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:10.024Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:17:10.024Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:10.025Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:17:10.025Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:10.025Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:17:10.026Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:10.026Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:17:10.026Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:10.027Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:17:10.027Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:10.028Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:17:10.028Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:10.028Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:17:10.029Z] [LOG] Regular deductions for Ratheeshanan null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:17:10.029Z] [LOG] Combined deductions for Ratheeshanan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 3545.520999999997,
      "details": "Based on worked hours (162.36h total)"
    }
  ],
  "total": 3545.520999999997
}
[2025-10-13T07:17:10.260Z] [LOG] Creating components for record 5aa9c96a-e11b-467d-88f6-65d8ff65ff5c: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:17:10.260Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 3545.520999999997
}
[2025-10-13T07:17:10.487Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:17:10.720Z] [LOG] Created payroll_record_component: 8e93e787-d429-4b19-8f7f-56c1b5058fbf for Attendance Deduction
[2025-10-13T07:17:11.206Z] [LOG] ✅ Financial balances updated successfully for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:11.207Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:17:11.207Z] [LOG] 
======================================================================
[2025-10-13T07:17:11.208Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ratheeshanan null
[2025-10-13T07:17:11.208Z] [LOG] ======================================================================
[2025-10-13T07:17:11.209Z] [LOG]    Gross Salary: Rs.25000.00
[2025-10-13T07:17:11.212Z] [LOG]    Total Deductions: Rs.3545.52
[2025-10-13T07:17:11.212Z] [LOG]       - Attendance Deduction: Rs.3545.52
[2025-10-13T07:17:11.213Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:17:11.213Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:17:11.213Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:17:11.215Z] [LOG]    NET SALARY: Rs.21454.48
[2025-10-13T07:17:11.216Z] [LOG] ======================================================================

[2025-10-13T07:17:11.216Z] [LOG] ✅ Ratheeshanan null: Calculation completed successfully
[2025-10-13T07:17:11.217Z] [LOG] 📊 Progress: 13/34 (38.2%)
[2025-10-13T07:17:11.217Z] [LOG] 
🧮 Processing: Ishara null (EMP000011)
[2025-10-13T07:17:11.218Z] [LOG] 📋 Record ID: 62cb523f-4fc6-490a-9fbb-6a5c43f17bb3
[2025-10-13T07:17:11.218Z] [LOG] 
======================================================================
[2025-10-13T07:17:11.219Z] [LOG] 🧮 CALCULATING PAYROLL: Ishara null (EMP000011)
[2025-10-13T07:17:11.220Z] [LOG] ======================================================================
[2025-10-13T07:17:12.150Z] [LOG] 🔍 Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-13T07:17:12.150Z] [LOG]    Total components: 9
[2025-10-13T07:17:12.151Z] [LOG]    Applicable components: 9
[2025-10-13T07:17:12.151Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-13T07:17:13.072Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:17:13.072Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:17:13.302Z] [LOG] 📊 Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:13.533Z] [LOG] 📊 Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:13.763Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:13.764Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:17:13.764Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:17:13.765Z] [LOG] 💰 GROSS CALCULATION for Ishara null:
[2025-10-13T07:17:13.765Z] [LOG]    Base Salary: 50000
[2025-10-13T07:17:13.765Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:17:13.991Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:17:14.218Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:17:14.219Z] [LOG]    Employee ID: 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:14.219Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:17:14.219Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-13T07:17:14.451Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:17:14.451Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-13T07:17:14.452Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-13T07:17:14.452Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-13T07:17:14.452Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:17:14.681Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:17:14.682Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-13T07:17:14.682Z] [LOG]       Saturday: 0.00h
[2025-10-13T07:17:14.683Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:17:14.683Z] [LOG]       Total Worked: 0.00h
[2025-10-13T07:17:14.683Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:17:14.684Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-13T07:17:14.684Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-13T07:17:14.684Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:17:14.685Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:17:14.685Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-13T07:17:14.685Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:17:14.686Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-13T07:17:14.686Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-13T07:17:14.686Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:17:14.687Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-13T07:17:14.687Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-13T07:17:14.687Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:17:14.688Z] [LOG]    Gross Salary: 50000
[2025-10-13T07:17:14.689Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:17:14.689Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:17:14.689Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:14.690Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:17:14.690Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:14.690Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:17:14.691Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:14.691Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:17:14.691Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:14.692Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:17:14.692Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:14.692Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:17:14.693Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:14.693Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:17:14.693Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:14.694Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:17:14.694Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:14.695Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:17:14.695Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:14.695Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:17:14.696Z] [LOG] Regular deductions for Ishara null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:17:14.696Z] [LOG] Combined deductions for Ishara null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-13T07:17:14.924Z] [LOG] Creating components for record 62cb523f-4fc6-490a-9fbb-6a5c43f17bb3: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:17:14.925Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-13T07:17:15.152Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:17:15.380Z] [LOG] Created payroll_record_component: ca487e07-5f62-4ab9-82a3-ee9f02c94896 for Attendance Deduction
[2025-10-13T07:17:15.833Z] [LOG] ✅ Financial balances updated successfully for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:15.833Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:17:15.833Z] [LOG] 
======================================================================
[2025-10-13T07:17:15.834Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ishara null
[2025-10-13T07:17:15.834Z] [LOG] ======================================================================
[2025-10-13T07:17:15.834Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-13T07:17:15.834Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-13T07:17:15.835Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-13T07:17:15.835Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:17:15.835Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:17:15.835Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:17:15.836Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-13T07:17:15.836Z] [LOG] ======================================================================

[2025-10-13T07:17:15.836Z] [LOG] ✅ Ishara null: Calculation completed successfully
[2025-10-13T07:17:15.836Z] [LOG] 📊 Progress: 14/34 (41.2%)
[2025-10-13T07:17:15.836Z] [LOG] 
🧮 Processing: Anoj null (EMP000014)
[2025-10-13T07:17:15.837Z] [LOG] 📋 Record ID: 72f0078a-916b-4c57-8194-9d56e3b0c292
[2025-10-13T07:17:15.837Z] [LOG] 
======================================================================
[2025-10-13T07:17:15.837Z] [LOG] 🧮 CALCULATING PAYROLL: Anoj null (EMP000014)
[2025-10-13T07:17:15.838Z] [LOG] ======================================================================
[2025-10-13T07:17:16.760Z] [LOG] 🔍 Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-13T07:17:16.761Z] [LOG]    Total components: 9
[2025-10-13T07:17:16.761Z] [LOG]    Applicable components: 9
[2025-10-13T07:17:16.761Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-13T07:17:24.689Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:17:24.690Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:17:24.920Z] [LOG] 📊 Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:25.169Z] [LOG] 📊 Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:25.397Z] [LOG] 📊 Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:25.398Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:17:25.399Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:17:25.399Z] [LOG] 💰 GROSS CALCULATION for Anoj null:
[2025-10-13T07:17:25.400Z] [LOG]    Base Salary: 50000
[2025-10-13T07:17:25.400Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:17:25.627Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:17:25.854Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:17:25.854Z] [LOG]    Employee ID: 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:25.855Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:17:25.855Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-13T07:17:26.084Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:17:26.084Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-13T07:17:26.084Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-13T07:17:26.085Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-13T07:17:26.085Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:17:26.311Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:17:26.311Z] [LOG]       Weekday (Mon-Fri): 108.53h
[2025-10-13T07:17:26.312Z] [LOG]       Saturday: 16.72h
[2025-10-13T07:17:26.313Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:17:26.313Z] [LOG]       Total Worked: 125.25h
[2025-10-13T07:17:26.313Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:17:26.314Z] [LOG]       Weekday: 108.53h × Rs.235.29 = Rs.25536.02
[2025-10-13T07:17:26.314Z] [LOG]       Saturday: 16.72h × Rs.444.44 = Rs.7431.04
[2025-10-13T07:17:26.314Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:17:26.315Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:17:26.315Z] [LOG]       Total Earned Salary: Rs.32967.06
[2025-10-13T07:17:26.315Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:17:26.316Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-13T07:17:26.316Z] [LOG]       Earned Salary: Rs.32967.06
[2025-10-13T07:17:26.316Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:17:26.316Z] [LOG]       Attendance Deduction: Rs.17032.94
[2025-10-13T07:17:26.316Z] [LOG]       📉 Deduction is 34.07% of base salary
[2025-10-13T07:17:26.317Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:17:26.317Z] [LOG]    Gross Salary: 50000
[2025-10-13T07:17:26.317Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:17:26.318Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:17:26.318Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:26.318Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:17:26.319Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:26.319Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:17:26.319Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:26.319Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:17:26.320Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:26.320Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:17:26.320Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:26.321Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:17:26.321Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:26.321Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:17:26.321Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:26.322Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:17:26.322Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:26.322Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:17:26.323Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:26.323Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:17:26.323Z] [LOG] Regular deductions for Anoj null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:17:26.324Z] [LOG] Combined deductions for Anoj null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 17032.9395,
      "details": "Based on worked hours (125.25h total)"
    }
  ],
  "total": 17032.9395
}
[2025-10-13T07:17:26.554Z] [LOG] Creating components for record 72f0078a-916b-4c57-8194-9d56e3b0c292: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:17:26.555Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 17032.9395
}
[2025-10-13T07:17:26.782Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:17:27.021Z] [LOG] Created payroll_record_component: aa7889e8-b3b5-488f-83b4-1dfe9c1ab47d for Attendance Deduction
[2025-10-13T07:17:27.474Z] [LOG] ✅ Financial balances updated successfully for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:27.475Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:17:27.475Z] [LOG] 
======================================================================
[2025-10-13T07:17:27.476Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Anoj null
[2025-10-13T07:17:27.476Z] [LOG] ======================================================================
[2025-10-13T07:17:27.476Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-13T07:17:27.477Z] [LOG]    Total Deductions: Rs.17032.94
[2025-10-13T07:17:27.477Z] [LOG]       - Attendance Deduction: Rs.17032.94
[2025-10-13T07:17:27.478Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:17:27.480Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:17:27.480Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:17:27.482Z] [LOG]    NET SALARY: Rs.32967.06
[2025-10-13T07:17:27.482Z] [LOG] ======================================================================

[2025-10-13T07:17:27.483Z] [LOG] ✅ Anoj null: Calculation completed successfully
[2025-10-13T07:17:27.483Z] [LOG] 📊 Progress: 15/34 (44.1%)
[2025-10-13T07:17:27.484Z] [LOG] 
🧮 Processing: customer null (EMP000036)
[2025-10-13T07:17:27.484Z] [LOG] 📋 Record ID: 7bccc743-5622-405f-b693-0195b6827247
[2025-10-13T07:17:27.484Z] [LOG] 
======================================================================
[2025-10-13T07:17:27.485Z] [LOG] 🧮 CALCULATING PAYROLL: customer null (EMP000036)
[2025-10-13T07:17:27.485Z] [LOG] ======================================================================
[2025-10-13T07:17:28.391Z] [LOG] 🔍 Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-13T07:17:28.392Z] [LOG]    Total components: 9
[2025-10-13T07:17:28.392Z] [LOG]    Applicable components: 9
[2025-10-13T07:17:28.393Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-13T07:17:29.305Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:17:29.306Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:17:29.536Z] [LOG] 📊 Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:29.765Z] [LOG] 📊 Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:29.994Z] [LOG] 📊 Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:29.995Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:17:29.995Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:17:29.996Z] [LOG] 💰 GROSS CALCULATION for customer null:
[2025-10-13T07:17:29.996Z] [LOG]    Base Salary: 0
[2025-10-13T07:17:29.997Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:17:30.224Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:17:30.455Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:17:30.455Z] [LOG]    Employee ID: 014409a2-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:30.456Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:17:30.456Z] [LOG]    Base Salary: Rs.0.00
[2025-10-13T07:17:30.693Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:17:30.693Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-13T07:17:30.696Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-13T07:17:30.696Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-13T07:17:30.696Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:17:30.940Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:17:30.940Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-13T07:17:30.941Z] [LOG]       Saturday: 0.00h
[2025-10-13T07:17:30.941Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:17:30.941Z] [LOG]       Total Worked: 0.00h
[2025-10-13T07:17:30.942Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:17:30.942Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:17:30.942Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:17:30.943Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:17:30.943Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:17:30.945Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-13T07:17:30.945Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:17:30.946Z] [LOG]       Base Salary: Rs.0.00
[2025-10-13T07:17:30.946Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-13T07:17:30.947Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:17:30.948Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-13T07:17:30.948Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-13T07:17:30.949Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:17:30.949Z] [LOG]    Gross Salary: 0
[2025-10-13T07:17:30.950Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:17:30.950Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:17:30.950Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:30.950Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:17:30.951Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:30.951Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:17:30.952Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:30.952Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:17:30.952Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:30.952Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:17:30.953Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:30.954Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:17:30.954Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:30.954Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:17:30.955Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:30.955Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:17:30.955Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:30.956Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:17:30.956Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:30.956Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:17:30.957Z] [LOG] Regular deductions for customer null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:17:30.957Z] [LOG] Combined deductions for customer null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 0
}
[2025-10-13T07:17:31.195Z] [LOG] Creating components for record 7bccc743-5622-405f-b693-0195b6827247: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:17:31.195Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-13T07:17:31.424Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:17:31.653Z] [LOG] Created payroll_record_component: d8a91f97-3eba-4f0b-b555-5d29131d48d0 for Attendance Deduction
[2025-10-13T07:17:32.105Z] [LOG] ✅ Financial balances updated successfully for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:32.105Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:17:32.106Z] [LOG] 
======================================================================
[2025-10-13T07:17:32.106Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: customer null
[2025-10-13T07:17:32.107Z] [LOG] ======================================================================
[2025-10-13T07:17:32.107Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-13T07:17:32.107Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-13T07:17:32.108Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-13T07:17:32.108Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:17:32.109Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:17:32.109Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:17:32.109Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-13T07:17:32.110Z] [LOG] ======================================================================

[2025-10-13T07:17:32.110Z] [LOG] ✅ customer null: Calculation completed successfully
[2025-10-13T07:17:32.111Z] [LOG] 📊 Progress: 16/34 (47.1%)
[2025-10-13T07:17:32.111Z] [LOG] 
🧮 Processing: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-13T07:17:32.111Z] [LOG] 📋 Record ID: 9be59e30-c989-46b1-a891-284c28650b58
[2025-10-13T07:17:32.112Z] [LOG] 
======================================================================
[2025-10-13T07:17:32.113Z] [LOG] 🧮 CALCULATING PAYROLL: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-13T07:17:32.113Z] [LOG] ======================================================================
[2025-10-13T07:17:33.029Z] [LOG] 🔍 Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-13T07:17:33.029Z] [LOG]    Total components: 9
[2025-10-13T07:17:33.029Z] [LOG]    Applicable components: 9
[2025-10-13T07:17:33.030Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-13T07:17:43.179Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:17:43.180Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:17:43.409Z] [LOG] 📊 Found 0 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:43.638Z] [LOG] 📊 Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:43.870Z] [LOG] 📊 Found 0 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:43.871Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:17:43.871Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:17:43.872Z] [LOG] 💰 GROSS CALCULATION for Ashen Nirmal Wadugodapitiya null:
[2025-10-13T07:17:43.872Z] [LOG]    Base Salary: 50000
[2025-10-13T07:17:43.873Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:17:44.100Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:17:44.331Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:17:44.331Z] [LOG]    Employee ID: 0144461e-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:44.332Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:17:44.332Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-13T07:17:44.563Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:17:44.563Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-13T07:17:44.564Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-13T07:17:44.564Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-13T07:17:44.565Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:17:44.793Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:17:44.794Z] [LOG]       Weekday (Mon-Fri): 152.20h
[2025-10-13T07:17:44.794Z] [LOG]       Saturday: 22.50h
[2025-10-13T07:17:44.795Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:17:44.795Z] [LOG]       Total Worked: 174.70h
[2025-10-13T07:17:44.795Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:17:44.796Z] [LOG]       Weekday: 152.20h × Rs.235.29 = Rs.35811.14
[2025-10-13T07:17:44.796Z] [LOG]       Saturday: 22.50h × Rs.444.44 = Rs.9999.90
[2025-10-13T07:17:44.797Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:17:44.797Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:17:44.797Z] [LOG]       Total Earned Salary: Rs.45811.04
[2025-10-13T07:17:44.797Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:17:44.798Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-13T07:17:44.798Z] [LOG]       Earned Salary: Rs.45811.04
[2025-10-13T07:17:44.798Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:17:44.799Z] [LOG]       Attendance Deduction: Rs.4188.96
[2025-10-13T07:17:44.799Z] [LOG]       📉 Deduction is 8.38% of base salary
[2025-10-13T07:17:44.799Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:17:44.800Z] [LOG]    Gross Salary: 50000
[2025-10-13T07:17:44.800Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:17:44.801Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:17:44.801Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:44.801Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:17:44.801Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:44.802Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:17:44.802Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:44.802Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:17:44.803Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:44.803Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:17:44.803Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:44.804Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:17:44.805Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:44.805Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:17:44.805Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:44.806Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:17:44.806Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:44.806Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:17:44.806Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:44.806Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:17:44.807Z] [LOG] Regular deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:17:44.807Z] [LOG] Combined deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 4188.9619999999995,
      "details": "Based on worked hours (174.7h total)"
    }
  ],
  "total": 4188.9619999999995
}
[2025-10-13T07:17:45.038Z] [LOG] Creating components for record 9be59e30-c989-46b1-a891-284c28650b58: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:17:45.039Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 4188.9619999999995
}
[2025-10-13T07:17:45.267Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:17:45.496Z] [LOG] Created payroll_record_component: 9b3adb82-4f43-4bf5-8d2a-20d64150524a for Attendance Deduction
[2025-10-13T07:17:45.949Z] [LOG] ✅ Financial balances updated successfully for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:45.951Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:17:45.952Z] [LOG] 
======================================================================
[2025-10-13T07:17:45.953Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ashen Nirmal Wadugodapitiya null
[2025-10-13T07:17:45.953Z] [LOG] ======================================================================
[2025-10-13T07:17:45.953Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-13T07:17:45.954Z] [LOG]    Total Deductions: Rs.4188.96
[2025-10-13T07:17:45.954Z] [LOG]       - Attendance Deduction: Rs.4188.96
[2025-10-13T07:17:45.954Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:17:45.954Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:17:45.955Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:17:45.955Z] [LOG]    NET SALARY: Rs.45811.04
[2025-10-13T07:17:45.955Z] [LOG] ======================================================================

[2025-10-13T07:17:45.956Z] [LOG] ✅ Ashen Nirmal Wadugodapitiya null: Calculation completed successfully
[2025-10-13T07:17:45.957Z] [LOG] 📊 Progress: 17/34 (50.0%)
[2025-10-13T07:17:45.957Z] [LOG] 
🧮 Processing: Kaushal Thambi (EMP465256103)
[2025-10-13T07:17:45.957Z] [LOG] 📋 Record ID: 9d7428f2-d649-46d3-8122-9cdba0d73c10
[2025-10-13T07:17:45.958Z] [LOG] 
======================================================================
[2025-10-13T07:17:45.958Z] [LOG] 🧮 CALCULATING PAYROLL: Kaushal Thambi (EMP465256103)
[2025-10-13T07:17:45.958Z] [LOG] ======================================================================
[2025-10-13T07:17:46.872Z] [LOG] 🔍 Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-13T07:17:46.873Z] [LOG]    Total components: 9
[2025-10-13T07:17:46.873Z] [LOG]    Applicable components: 9
[2025-10-13T07:17:46.874Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-13T07:17:47.812Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:17:47.812Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:17:48.046Z] [LOG] 📊 Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-13T07:17:48.284Z] [LOG] 📊 Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-13T07:17:48.512Z] [LOG] 📊 Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-13T07:17:48.512Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:17:48.513Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:17:48.514Z] [LOG] 💰 GROSS CALCULATION for Kaushal Thambi:
[2025-10-13T07:17:48.514Z] [LOG]    Base Salary: 50000
[2025-10-13T07:17:48.514Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:17:48.755Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:17:48.991Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:17:48.992Z] [LOG]    Employee ID: 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-13T07:17:48.992Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:17:48.993Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-13T07:17:49.232Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:17:49.232Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-13T07:17:49.232Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-13T07:17:49.233Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-13T07:17:49.233Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:17:49.466Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:17:49.466Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-13T07:17:49.467Z] [LOG]       Saturday: 0.00h
[2025-10-13T07:17:49.467Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:17:49.468Z] [LOG]       Total Worked: 0.00h
[2025-10-13T07:17:49.468Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:17:49.469Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-13T07:17:49.469Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-13T07:17:49.469Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:17:49.470Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:17:49.470Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-13T07:17:49.470Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:17:49.472Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-13T07:17:49.473Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-13T07:17:49.473Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:17:49.473Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-13T07:17:49.474Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-13T07:17:49.474Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:17:49.474Z] [LOG]    Gross Salary: 50000
[2025-10-13T07:17:49.475Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:17:49.475Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:17:49.475Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:49.476Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:17:49.479Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:49.479Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:17:49.480Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:49.480Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:17:49.481Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:49.482Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:17:49.483Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:49.483Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:17:49.483Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:49.483Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:17:49.484Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:49.484Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:17:49.485Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:49.485Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:17:49.485Z] [LOG]    Fixed amount: 0
[2025-10-13T07:17:49.485Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:17:49.486Z] [LOG] Regular deductions for Kaushal Thambi: {
  "components": [],
  "total": 0
}
[2025-10-13T07:17:49.486Z] [LOG] Combined deductions for Kaushal Thambi: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-13T07:17:49.725Z] [LOG] Creating components for record 9d7428f2-d649-46d3-8122-9cdba0d73c10: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:17:49.726Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-13T07:17:49.953Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:17:50.183Z] [LOG] Created payroll_record_component: 5888e032-54ce-40a7-aa8e-7fb85370073c for Attendance Deduction
[2025-10-13T07:17:50.647Z] [LOG] ✅ Financial balances updated successfully for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-13T07:17:50.649Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:17:50.650Z] [LOG] 
======================================================================
[2025-10-13T07:17:50.651Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Kaushal Thambi
[2025-10-13T07:17:50.652Z] [LOG] ======================================================================
[2025-10-13T07:17:50.652Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-13T07:17:50.653Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-13T07:17:50.654Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-13T07:17:50.655Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:17:50.655Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:17:50.655Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:17:50.655Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-13T07:17:50.656Z] [LOG] ======================================================================

[2025-10-13T07:17:50.656Z] [LOG] ✅ Kaushal Thambi: Calculation completed successfully
[2025-10-13T07:17:50.656Z] [LOG] 📊 Progress: 18/34 (52.9%)
[2025-10-13T07:17:50.656Z] [LOG] 
🧮 Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-13T07:17:50.657Z] [LOG] 📋 Record ID: a48fea14-c753-4818-ba29-a78e9f737f57
[2025-10-13T07:17:50.657Z] [LOG] 
======================================================================
[2025-10-13T07:17:50.658Z] [LOG] 🧮 CALCULATING PAYROLL: R. D.A Kaushalya null (EMP000044)
[2025-10-13T07:17:50.659Z] [LOG] ======================================================================
[2025-10-13T07:17:51.582Z] [LOG] 🔍 Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-13T07:17:51.583Z] [LOG]    Total components: 9
[2025-10-13T07:17:51.583Z] [LOG]    Applicable components: 9
[2025-10-13T07:17:51.583Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-13T07:17:59.480Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:17:59.480Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:17:59.711Z] [LOG] 📊 Found 0 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-13T07:17:59.940Z] [LOG] 📊 Found 0 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:00.170Z] [LOG] 📊 Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:00.171Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:18:00.171Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:18:00.171Z] [LOG] 💰 GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-13T07:18:00.171Z] [LOG]    Base Salary: 50000
[2025-10-13T07:18:00.171Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:18:00.401Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:18:00.627Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:18:00.628Z] [LOG]    Employee ID: 01443963-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:00.629Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:18:00.629Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-13T07:18:00.855Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:18:00.855Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-13T07:18:00.856Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-13T07:18:00.856Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-13T07:18:00.857Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:18:01.082Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:18:01.088Z] [LOG]       Weekday (Mon-Fri): 162.20h
[2025-10-13T07:18:01.088Z] [LOG]       Saturday: 22.50h
[2025-10-13T07:18:01.088Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:18:01.088Z] [LOG]       Total Worked: 184.70h
[2025-10-13T07:18:01.089Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:18:01.089Z] [LOG]       Weekday: 162.20h × Rs.235.29 = Rs.38164.04
[2025-10-13T07:18:01.107Z] [LOG]       Saturday: 22.50h × Rs.444.44 = Rs.9999.90
[2025-10-13T07:18:01.112Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:18:01.112Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:18:01.113Z] [LOG]       Total Earned Salary: Rs.48163.94
[2025-10-13T07:18:01.114Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:18:01.114Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-13T07:18:01.114Z] [LOG]       Earned Salary: Rs.48163.94
[2025-10-13T07:18:01.115Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:18:01.115Z] [LOG]       Attendance Deduction: Rs.1836.06
[2025-10-13T07:18:01.115Z] [LOG]       📉 Deduction is 3.67% of base salary
[2025-10-13T07:18:01.115Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:18:01.115Z] [LOG]    Gross Salary: 50000
[2025-10-13T07:18:01.115Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:18:01.116Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:18:01.116Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:01.116Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:18:01.116Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:01.116Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:18:01.116Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:01.117Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:18:01.117Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:01.117Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:18:01.117Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:01.117Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:18:01.117Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:01.118Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:18:01.118Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:01.118Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:18:01.118Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:01.118Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:18:01.119Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:01.119Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:18:01.119Z] [LOG] Regular deductions for R. D.A Kaushalya null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:18:01.120Z] [LOG] Combined deductions for R. D.A Kaushalya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1836.0620000000054,
      "details": "Based on worked hours (184.7h total)"
    }
  ],
  "total": 1836.0620000000054
}
[2025-10-13T07:18:01.353Z] [LOG] Creating components for record a48fea14-c753-4818-ba29-a78e9f737f57: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:18:01.354Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1836.0620000000054
}
[2025-10-13T07:18:01.585Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:18:01.814Z] [LOG] Created payroll_record_component: df811348-6ecd-4e18-85ea-e58b7043714b for Attendance Deduction
[2025-10-13T07:18:02.329Z] [LOG] ✅ Financial balances updated successfully for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:02.332Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:18:02.332Z] [LOG] 
======================================================================
[2025-10-13T07:18:02.333Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: R. D.A Kaushalya null
[2025-10-13T07:18:02.333Z] [LOG] ======================================================================
[2025-10-13T07:18:02.334Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-13T07:18:02.334Z] [LOG]    Total Deductions: Rs.1836.06
[2025-10-13T07:18:02.335Z] [LOG]       - Attendance Deduction: Rs.1836.06
[2025-10-13T07:18:02.335Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:18:02.335Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:18:02.338Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:18:02.339Z] [LOG]    NET SALARY: Rs.48163.94
[2025-10-13T07:18:02.339Z] [LOG] ======================================================================

[2025-10-13T07:18:02.341Z] [LOG] ✅ R. D.A Kaushalya null: Calculation completed successfully
[2025-10-13T07:18:02.341Z] [LOG] 📊 Progress: 19/34 (55.9%)
[2025-10-13T07:18:02.342Z] [LOG] 
🧮 Processing: Ammaar Ilham (EMP000023)
[2025-10-13T07:18:02.342Z] [LOG] 📋 Record ID: b65be712-ba4d-4880-8227-68486cb5f30f
[2025-10-13T07:18:02.343Z] [LOG] 
======================================================================
[2025-10-13T07:18:02.343Z] [LOG] 🧮 CALCULATING PAYROLL: Ammaar Ilham (EMP000023)
[2025-10-13T07:18:02.343Z] [LOG] ======================================================================
[2025-10-13T07:18:03.252Z] [LOG] 🔍 Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-13T07:18:03.253Z] [LOG]    Total components: 9
[2025-10-13T07:18:03.253Z] [LOG]    Applicable components: 9
[2025-10-13T07:18:03.254Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-13T07:18:10.564Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:18:10.565Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:18:10.795Z] [LOG] 📊 Found 0 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:11.028Z] [LOG] 📊 Found 0 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:11.257Z] [LOG] 📊 Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:11.257Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:18:11.258Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:18:11.258Z] [LOG] 💰 GROSS CALCULATION for Ammaar Ilham:
[2025-10-13T07:18:11.259Z] [LOG]    Base Salary: 70000
[2025-10-13T07:18:11.259Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:18:11.487Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:18:11.729Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:18:11.730Z] [LOG]    Employee ID: 0143de00-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:11.730Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:18:11.731Z] [LOG]    Base Salary: Rs.70000.00
[2025-10-13T07:18:11.960Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:18:11.961Z] [LOG]       Daily Salary: Rs.2800.00
[2025-10-13T07:18:11.961Z] [LOG]       Weekday Hourly Rate: Rs.329.41
[2025-10-13T07:18:11.962Z] [LOG]       Saturday Hourly Rate: Rs.622.22
[2025-10-13T07:18:11.962Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:18:12.188Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:18:12.189Z] [LOG]       Weekday (Mon-Fri): 157.19h
[2025-10-13T07:18:12.189Z] [LOG]       Saturday: 21.33h
[2025-10-13T07:18:12.190Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:18:12.190Z] [LOG]       Total Worked: 178.52h
[2025-10-13T07:18:12.190Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:18:12.191Z] [LOG]       Weekday: 157.19h × Rs.329.41 = Rs.51779.96
[2025-10-13T07:18:12.191Z] [LOG]       Saturday: 21.33h × Rs.622.22 = Rs.13271.95
[2025-10-13T07:18:12.191Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:18:12.191Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:18:12.192Z] [LOG]       Total Earned Salary: Rs.65051.91
[2025-10-13T07:18:12.192Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:18:12.192Z] [LOG]       Base Salary: Rs.70000.00
[2025-10-13T07:18:12.192Z] [LOG]       Earned Salary: Rs.65051.91
[2025-10-13T07:18:12.193Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:18:12.193Z] [LOG]       Attendance Deduction: Rs.4948.09
[2025-10-13T07:18:12.194Z] [LOG]       📉 Deduction is 7.07% of base salary
[2025-10-13T07:18:12.195Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:18:12.195Z] [LOG]    Gross Salary: 70000
[2025-10-13T07:18:12.196Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:18:12.196Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:18:12.196Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:12.197Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:18:12.197Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:12.198Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:18:12.200Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:12.200Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:18:12.201Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:12.202Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:18:12.202Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:12.203Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:18:12.203Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:12.204Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:18:12.204Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:12.204Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:18:12.205Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:12.206Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:18:12.206Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:12.207Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:18:12.207Z] [LOG] Regular deductions for Ammaar Ilham: {
  "components": [],
  "total": 0
}
[2025-10-13T07:18:12.207Z] [LOG] Combined deductions for Ammaar Ilham: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 4948.089500000002,
      "details": "Based on worked hours (178.51999999999998h total)"
    }
  ],
  "total": 4948.089500000002
}
[2025-10-13T07:18:12.453Z] [LOG] Creating components for record b65be712-ba4d-4880-8227-68486cb5f30f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:18:12.454Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 4948.089500000002
}
[2025-10-13T07:18:12.687Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:18:12.917Z] [LOG] Created payroll_record_component: 2baa6250-04d5-4030-a07c-6be637fb66a3 for Attendance Deduction
[2025-10-13T07:18:13.372Z] [LOG] ✅ Financial balances updated successfully for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:13.372Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:18:13.373Z] [LOG] 
======================================================================
[2025-10-13T07:18:13.373Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ammaar Ilham
[2025-10-13T07:18:13.374Z] [LOG] ======================================================================
[2025-10-13T07:18:13.374Z] [LOG]    Gross Salary: Rs.70000.00
[2025-10-13T07:18:13.374Z] [LOG]    Total Deductions: Rs.4948.09
[2025-10-13T07:18:13.375Z] [LOG]       - Attendance Deduction: Rs.4948.09
[2025-10-13T07:18:13.375Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:18:13.375Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:18:13.376Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:18:13.376Z] [LOG]    NET SALARY: Rs.65051.91
[2025-10-13T07:18:13.376Z] [LOG] ======================================================================

[2025-10-13T07:18:13.377Z] [LOG] ✅ Ammaar Ilham: Calculation completed successfully
[2025-10-13T07:18:13.377Z] [LOG] 📊 Progress: 20/34 (58.8%)
[2025-10-13T07:18:13.377Z] [LOG] 
🧮 Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-13T07:18:13.378Z] [LOG] 📋 Record ID: c1e4dac4-38fb-46ba-a182-cde0214acb24
[2025-10-13T07:18:13.378Z] [LOG] 
======================================================================
[2025-10-13T07:18:13.378Z] [LOG] 🧮 CALCULATING PAYROLL: Nimdiya Ranasinghe null (EMP000045)
[2025-10-13T07:18:13.380Z] [LOG] ======================================================================
[2025-10-13T07:18:14.289Z] [LOG] 🔍 Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-13T07:18:14.290Z] [LOG]    Total components: 9
[2025-10-13T07:18:14.290Z] [LOG]    Applicable components: 9
[2025-10-13T07:18:14.291Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-13T07:18:22.126Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:18:22.126Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:18:22.359Z] [LOG] 📊 Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:22.597Z] [LOG] 📊 Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:22.841Z] [LOG] 📊 Found 0 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:22.841Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:18:22.842Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:18:22.842Z] [LOG] 💰 GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-13T07:18:22.843Z] [LOG]    Base Salary: 35000
[2025-10-13T07:18:22.843Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:18:23.095Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:18:23.330Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:18:23.330Z] [LOG]    Employee ID: 01444074-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:23.331Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:18:23.331Z] [LOG]    Base Salary: Rs.35000.00
[2025-10-13T07:18:23.582Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:18:23.582Z] [LOG]       Daily Salary: Rs.1400.00
[2025-10-13T07:18:23.582Z] [LOG]       Weekday Hourly Rate: Rs.164.71
[2025-10-13T07:18:23.582Z] [LOG]       Saturday Hourly Rate: Rs.311.11
[2025-10-13T07:18:23.583Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:18:24.295Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:18:24.296Z] [LOG]       Weekday (Mon-Fri): 147.82h
[2025-10-13T07:18:24.296Z] [LOG]       Saturday: 22.50h
[2025-10-13T07:18:24.296Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:18:24.297Z] [LOG]       Total Worked: 170.32h
[2025-10-13T07:18:24.297Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:18:24.297Z] [LOG]       Weekday: 147.82h × Rs.164.71 = Rs.24347.43
[2025-10-13T07:18:24.298Z] [LOG]       Saturday: 22.50h × Rs.311.11 = Rs.6999.98
[2025-10-13T07:18:24.298Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:18:24.298Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:18:24.299Z] [LOG]       Total Earned Salary: Rs.31347.41
[2025-10-13T07:18:24.299Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:18:24.300Z] [LOG]       Base Salary: Rs.35000.00
[2025-10-13T07:18:24.300Z] [LOG]       Earned Salary: Rs.31347.41
[2025-10-13T07:18:24.300Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:18:24.300Z] [LOG]       Attendance Deduction: Rs.3652.59
[2025-10-13T07:18:24.301Z] [LOG]       📉 Deduction is 10.44% of base salary
[2025-10-13T07:18:24.301Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:18:24.301Z] [LOG]    Gross Salary: 35000
[2025-10-13T07:18:24.301Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:18:24.301Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:18:24.302Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:24.302Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:18:24.303Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:24.303Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:18:24.303Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:24.303Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:18:24.304Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:24.304Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:18:24.305Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:24.305Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:18:24.306Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:24.306Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:18:24.307Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:24.307Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:18:24.307Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:24.307Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:18:24.308Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:24.308Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:18:24.309Z] [LOG] Regular deductions for Nimdiya Ranasinghe null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:18:24.309Z] [LOG] Combined deductions for Nimdiya Ranasinghe null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 3652.5927999999985,
      "details": "Based on worked hours (170.32h total)"
    }
  ],
  "total": 3652.5927999999985
}
[2025-10-13T07:18:24.577Z] [LOG] Creating components for record c1e4dac4-38fb-46ba-a182-cde0214acb24: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:18:24.578Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 3652.5927999999985
}
[2025-10-13T07:18:24.821Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:18:25.279Z] [LOG] Created payroll_record_component: ed2f7a01-a582-4366-a181-398b9da16ca0 for Attendance Deduction
[2025-10-13T07:18:25.774Z] [LOG] ✅ Financial balances updated successfully for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:25.775Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:18:25.775Z] [LOG] 
======================================================================
[2025-10-13T07:18:25.775Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Nimdiya Ranasinghe null
[2025-10-13T07:18:25.775Z] [LOG] ======================================================================
[2025-10-13T07:18:25.776Z] [LOG]    Gross Salary: Rs.35000.00
[2025-10-13T07:18:25.776Z] [LOG]    Total Deductions: Rs.3652.59
[2025-10-13T07:18:25.776Z] [LOG]       - Attendance Deduction: Rs.3652.59
[2025-10-13T07:18:25.777Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:18:25.777Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:18:25.777Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:18:25.778Z] [LOG]    NET SALARY: Rs.31347.41
[2025-10-13T07:18:25.778Z] [LOG] ======================================================================

[2025-10-13T07:18:25.779Z] [LOG] ✅ Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-13T07:18:25.779Z] [LOG] 📊 Progress: 21/34 (61.8%)
[2025-10-13T07:18:25.779Z] [LOG] 
🧮 Processing: Saru null (EMP000022)
[2025-10-13T07:18:25.780Z] [LOG] 📋 Record ID: c27b509e-4e89-4d24-8751-cecdc6bf9027
[2025-10-13T07:18:25.780Z] [LOG] 
======================================================================
[2025-10-13T07:18:25.781Z] [LOG] 🧮 CALCULATING PAYROLL: Saru null (EMP000022)
[2025-10-13T07:18:25.781Z] [LOG] ======================================================================
[2025-10-13T07:18:26.761Z] [LOG] 🔍 Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-13T07:18:26.761Z] [LOG]    Total components: 9
[2025-10-13T07:18:26.762Z] [LOG]    Applicable components: 9
[2025-10-13T07:18:26.762Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-13T07:18:28.191Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:18:28.192Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:18:28.421Z] [LOG] 📊 Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:28.648Z] [LOG] 📊 Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:28.875Z] [LOG] 📊 Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:28.875Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:18:28.875Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:18:28.876Z] [LOG] 💰 GROSS CALCULATION for Saru null:
[2025-10-13T07:18:28.876Z] [LOG]    Base Salary: 50000
[2025-10-13T07:18:28.876Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:18:29.104Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:18:29.335Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:18:29.336Z] [LOG]    Employee ID: 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:29.336Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:18:29.336Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-13T07:18:29.564Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:18:29.564Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-13T07:18:29.564Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-13T07:18:29.565Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-13T07:18:29.565Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:18:29.791Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:18:29.791Z] [LOG]       Weekday (Mon-Fri): 160.87h
[2025-10-13T07:18:29.791Z] [LOG]       Saturday: 21.25h
[2025-10-13T07:18:29.791Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:18:29.792Z] [LOG]       Total Worked: 182.12h
[2025-10-13T07:18:29.792Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:18:29.792Z] [LOG]       Weekday: 160.87h × Rs.235.29 = Rs.37851.10
[2025-10-13T07:18:29.792Z] [LOG]       Saturday: 21.25h × Rs.444.44 = Rs.9444.35
[2025-10-13T07:18:29.792Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:18:29.792Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:18:29.792Z] [LOG]       Total Earned Salary: Rs.47295.45
[2025-10-13T07:18:29.793Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:18:29.793Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-13T07:18:29.793Z] [LOG]       Earned Salary: Rs.47295.45
[2025-10-13T07:18:29.793Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:18:29.793Z] [LOG]       Attendance Deduction: Rs.2704.55
[2025-10-13T07:18:29.793Z] [LOG]       📉 Deduction is 5.41% of base salary
[2025-10-13T07:18:29.793Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:18:29.793Z] [LOG]    Gross Salary: 50000
[2025-10-13T07:18:29.794Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:18:29.794Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:18:29.794Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:29.794Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:18:29.794Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:29.794Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:18:29.794Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:29.795Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:18:29.795Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:29.795Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:18:29.795Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:29.795Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:18:29.796Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:29.796Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:18:29.796Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:29.796Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:18:29.796Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:29.796Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:18:29.796Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:29.796Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:18:29.797Z] [LOG] Regular deductions for Saru null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:18:29.797Z] [LOG] Combined deductions for Saru null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 2704.547700000003,
      "details": "Based on worked hours (182.12h total)"
    }
  ],
  "total": 2704.547700000003
}
[2025-10-13T07:18:30.025Z] [LOG] Creating components for record c27b509e-4e89-4d24-8751-cecdc6bf9027: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:18:30.026Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 2704.547700000003
}
[2025-10-13T07:18:30.257Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:18:30.486Z] [LOG] Created payroll_record_component: 2b76c3b2-1a2e-4621-8f88-365b74f3fb60 for Attendance Deduction
[2025-10-13T07:18:30.946Z] [LOG] ✅ Financial balances updated successfully for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:30.947Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:18:30.947Z] [LOG] 
======================================================================
[2025-10-13T07:18:30.947Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saru null
[2025-10-13T07:18:30.947Z] [LOG] ======================================================================
[2025-10-13T07:18:30.947Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-13T07:18:30.947Z] [LOG]    Total Deductions: Rs.2704.55
[2025-10-13T07:18:30.947Z] [LOG]       - Attendance Deduction: Rs.2704.55
[2025-10-13T07:18:30.947Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:18:30.948Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:18:30.948Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:18:30.948Z] [LOG]    NET SALARY: Rs.47295.45
[2025-10-13T07:18:30.948Z] [LOG] ======================================================================

[2025-10-13T07:18:30.948Z] [LOG] ✅ Saru null: Calculation completed successfully
[2025-10-13T07:18:30.948Z] [LOG] 📊 Progress: 22/34 (64.7%)
[2025-10-13T07:18:30.949Z] [LOG] 
🧮 Processing: Safna Nawas null (EMP000021)
[2025-10-13T07:18:30.949Z] [LOG] 📋 Record ID: c32d4626-4f5f-4703-b3d9-33d1ca560184
[2025-10-13T07:18:30.949Z] [LOG] 
======================================================================
[2025-10-13T07:18:30.949Z] [LOG] 🧮 CALCULATING PAYROLL: Safna Nawas null (EMP000021)
[2025-10-13T07:18:30.949Z] [LOG] ======================================================================
[2025-10-13T07:18:31.868Z] [LOG] 🔍 Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-13T07:18:31.869Z] [LOG]    Total components: 9
[2025-10-13T07:18:31.869Z] [LOG]    Applicable components: 9
[2025-10-13T07:18:31.869Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-13T07:18:39.664Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:18:39.664Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:18:39.904Z] [LOG] 📊 Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:40.143Z] [LOG] 📊 Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:40.381Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:40.381Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:18:40.381Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:18:40.382Z] [LOG] 💰 GROSS CALCULATION for Safna Nawas null:
[2025-10-13T07:18:40.382Z] [LOG]    Base Salary: 50000
[2025-10-13T07:18:40.382Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:18:40.607Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:18:40.834Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:18:40.835Z] [LOG]    Employee ID: 0143c977-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:40.835Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:18:40.835Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-13T07:18:41.067Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:18:41.068Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-13T07:18:41.069Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-13T07:18:41.069Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-13T07:18:41.069Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:18:41.297Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:18:41.297Z] [LOG]       Weekday (Mon-Fri): 141.03h
[2025-10-13T07:18:41.297Z] [LOG]       Saturday: 17.47h
[2025-10-13T07:18:41.298Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:18:41.298Z] [LOG]       Total Worked: 158.50h
[2025-10-13T07:18:41.298Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:18:41.298Z] [LOG]       Weekday: 141.03h × Rs.235.29 = Rs.33182.95
[2025-10-13T07:18:41.299Z] [LOG]       Saturday: 17.47h × Rs.444.44 = Rs.7764.37
[2025-10-13T07:18:41.299Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:18:41.299Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:18:41.299Z] [LOG]       Total Earned Salary: Rs.40947.32
[2025-10-13T07:18:41.300Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:18:41.300Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-13T07:18:41.300Z] [LOG]       Earned Salary: Rs.40947.32
[2025-10-13T07:18:41.300Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:18:41.300Z] [LOG]       Attendance Deduction: Rs.9052.68
[2025-10-13T07:18:41.301Z] [LOG]       📉 Deduction is 18.11% of base salary
[2025-10-13T07:18:41.301Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:18:41.301Z] [LOG]    Gross Salary: 50000
[2025-10-13T07:18:41.301Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:18:41.301Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:18:41.301Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:41.302Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:18:41.302Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:41.302Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:18:41.302Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:41.303Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:18:41.306Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:41.306Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:18:41.306Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:41.306Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:18:41.306Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:41.306Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:18:41.307Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:41.307Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:18:41.307Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:41.307Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:18:41.307Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:41.308Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:18:41.308Z] [LOG] Regular deductions for Safna Nawas null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:18:41.308Z] [LOG] Combined deductions for Safna Nawas null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 9052.684500000003,
      "details": "Based on worked hours (158.5h total)"
    }
  ],
  "total": 9052.684500000003
}
[2025-10-13T07:18:41.608Z] [LOG] Creating components for record c32d4626-4f5f-4703-b3d9-33d1ca560184: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:18:41.608Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 9052.684500000003
}
[2025-10-13T07:18:41.836Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:18:42.066Z] [LOG] Created payroll_record_component: 09a322bc-1324-49f8-b88c-42d1f65243ca for Attendance Deduction
[2025-10-13T07:18:42.522Z] [LOG] ✅ Financial balances updated successfully for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:42.523Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:18:42.523Z] [LOG] 
======================================================================
[2025-10-13T07:18:42.523Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Safna Nawas null
[2025-10-13T07:18:42.523Z] [LOG] ======================================================================
[2025-10-13T07:18:42.523Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-13T07:18:42.523Z] [LOG]    Total Deductions: Rs.9052.68
[2025-10-13T07:18:42.524Z] [LOG]       - Attendance Deduction: Rs.9052.68
[2025-10-13T07:18:42.524Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:18:42.524Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:18:42.524Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:18:42.524Z] [LOG]    NET SALARY: Rs.40947.32
[2025-10-13T07:18:42.525Z] [LOG] ======================================================================

[2025-10-13T07:18:42.525Z] [LOG] ✅ Safna Nawas null: Calculation completed successfully
[2025-10-13T07:18:42.525Z] [LOG] 📊 Progress: 23/34 (67.6%)
[2025-10-13T07:18:42.525Z] [LOG] 
🧮 Processing: Uthpala null (EMP000006)
[2025-10-13T07:18:42.525Z] [LOG] 📋 Record ID: c5ee4f92-c9e0-406d-aa24-9cf84e39ebdd
[2025-10-13T07:18:42.526Z] [LOG] 
======================================================================
[2025-10-13T07:18:42.526Z] [LOG] 🧮 CALCULATING PAYROLL: Uthpala null (EMP000006)
[2025-10-13T07:18:42.526Z] [LOG] ======================================================================
[2025-10-13T07:18:43.463Z] [LOG] 🔍 Component filtering for employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-13T07:18:43.464Z] [LOG]    Total components: 9
[2025-10-13T07:18:43.464Z] [LOG]    Applicable components: 9
[2025-10-13T07:18:43.465Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-13T07:18:53.484Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:18:53.484Z] [LOG] 🔄 Processing financial records for employee 0143a539-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:18:53.713Z] [LOG] 📊 Found 0 active loans for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:53.941Z] [LOG] 📊 Found 0 active advances for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:54.170Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:54.171Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:18:54.171Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:18:54.172Z] [LOG] 💰 GROSS CALCULATION for Uthpala null:
[2025-10-13T07:18:54.172Z] [LOG]    Base Salary: 100000
[2025-10-13T07:18:54.172Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:18:54.406Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:18:54.641Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:18:54.642Z] [LOG]    Employee ID: 0143a539-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:54.642Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:18:54.642Z] [LOG]    Base Salary: Rs.100000.00
[2025-10-13T07:18:54.881Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:18:54.882Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-13T07:18:54.882Z] [LOG]       Weekday Hourly Rate: Rs.500.00
[2025-10-13T07:18:54.882Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-13T07:18:54.883Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:18:55.109Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:18:55.109Z] [LOG]       Weekday (Mon-Fri): 135.72h
[2025-10-13T07:18:55.109Z] [LOG]       Saturday: 15.82h
[2025-10-13T07:18:55.110Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:18:55.110Z] [LOG]       Total Worked: 151.54h
[2025-10-13T07:18:55.110Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:18:55.111Z] [LOG]       Weekday: 135.72h × Rs.500.00 = Rs.67860.00
[2025-10-13T07:18:55.111Z] [LOG]       Saturday: 15.82h × Rs.888.89 = Rs.14062.24
[2025-10-13T07:18:55.112Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:18:55.112Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:18:55.113Z] [LOG]       Total Earned Salary: Rs.81922.24
[2025-10-13T07:18:55.113Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:18:55.114Z] [LOG]       Base Salary: Rs.100000.00
[2025-10-13T07:18:55.114Z] [LOG]       Earned Salary: Rs.81922.24
[2025-10-13T07:18:55.115Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:18:55.115Z] [LOG]       Attendance Deduction: Rs.18077.76
[2025-10-13T07:18:55.116Z] [LOG]       📉 Deduction is 18.08% of base salary
[2025-10-13T07:18:55.116Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:18:55.116Z] [LOG]    Gross Salary: 100000
[2025-10-13T07:18:55.116Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:18:55.117Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:18:55.117Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:55.117Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:18:55.118Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:55.118Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:18:55.118Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:55.119Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:18:55.119Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:55.119Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:18:55.119Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:55.120Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:18:55.120Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:55.121Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:18:55.121Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:55.121Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:18:55.122Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:55.122Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:18:55.123Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:55.123Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:18:55.123Z] [LOG] Regular deductions for Uthpala null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:18:55.124Z] [LOG] Combined deductions for Uthpala null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 18077.760200000004,
      "details": "Based on worked hours (151.54h total)"
    }
  ],
  "total": 18077.760200000004
}
[2025-10-13T07:18:55.353Z] [LOG] Creating components for record c5ee4f92-c9e0-406d-aa24-9cf84e39ebdd: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:18:55.354Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 18077.760200000004
}
[2025-10-13T07:18:55.579Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:18:55.810Z] [LOG] Created payroll_record_component: db75a2bf-fdf9-4a98-875e-0d7976724b63 for Attendance Deduction
[2025-10-13T07:18:56.263Z] [LOG] ✅ Financial balances updated successfully for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:56.264Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:18:56.265Z] [LOG] 
======================================================================
[2025-10-13T07:18:56.266Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Uthpala null
[2025-10-13T07:18:56.266Z] [LOG] ======================================================================
[2025-10-13T07:18:56.267Z] [LOG]    Gross Salary: Rs.100000.00
[2025-10-13T07:18:56.267Z] [LOG]    Total Deductions: Rs.18077.76
[2025-10-13T07:18:56.268Z] [LOG]       - Attendance Deduction: Rs.18077.76
[2025-10-13T07:18:56.269Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:18:56.270Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:18:56.271Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:18:56.271Z] [LOG]    NET SALARY: Rs.81922.24
[2025-10-13T07:18:56.272Z] [LOG] ======================================================================

[2025-10-13T07:18:56.272Z] [LOG] ✅ Uthpala null: Calculation completed successfully
[2025-10-13T07:18:56.273Z] [LOG] 📊 Progress: 24/34 (70.6%)
[2025-10-13T07:18:56.273Z] [LOG] 
🧮 Processing: Office Team null (EMP000041)
[2025-10-13T07:18:56.273Z] [LOG] 📋 Record ID: c710d8c3-0037-4802-bd4f-f857cd59a095
[2025-10-13T07:18:56.274Z] [LOG] 
======================================================================
[2025-10-13T07:18:56.274Z] [LOG] 🧮 CALCULATING PAYROLL: Office Team null (EMP000041)
[2025-10-13T07:18:56.275Z] [LOG] ======================================================================
[2025-10-13T07:18:57.176Z] [LOG] 🔍 Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-13T07:18:57.177Z] [LOG]    Total components: 9
[2025-10-13T07:18:57.177Z] [LOG]    Applicable components: 9
[2025-10-13T07:18:57.177Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-13T07:18:58.107Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:18:58.107Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:18:58.335Z] [LOG] 📊 Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:58.569Z] [LOG] 📊 Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:58.798Z] [LOG] 📊 Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:58.799Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:18:58.800Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:18:58.801Z] [LOG] 💰 GROSS CALCULATION for Office Team null:
[2025-10-13T07:18:58.802Z] [LOG]    Base Salary: 1
[2025-10-13T07:18:58.803Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:18:59.033Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:18:59.261Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:18:59.261Z] [LOG]    Employee ID: 01442b21-7105-11f0-a50f-98e743540430
[2025-10-13T07:18:59.261Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:18:59.262Z] [LOG]    Base Salary: Rs.1.00
[2025-10-13T07:18:59.505Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:18:59.505Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-13T07:18:59.506Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-13T07:18:59.506Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-13T07:18:59.506Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:18:59.732Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:18:59.732Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-13T07:18:59.733Z] [LOG]       Saturday: 0.00h
[2025-10-13T07:18:59.733Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:18:59.733Z] [LOG]       Total Worked: 0.00h
[2025-10-13T07:18:59.733Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:18:59.733Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:18:59.734Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:18:59.734Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:18:59.734Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:18:59.734Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-13T07:18:59.735Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:18:59.735Z] [LOG]       Base Salary: Rs.1.00
[2025-10-13T07:18:59.735Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-13T07:18:59.735Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:18:59.736Z] [LOG]       Attendance Deduction: Rs.1.00
[2025-10-13T07:18:59.736Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-13T07:18:59.736Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:18:59.737Z] [LOG]    Gross Salary: 1
[2025-10-13T07:18:59.737Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:18:59.737Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:18:59.737Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:59.738Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:18:59.738Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:59.738Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:18:59.739Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:59.739Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:18:59.739Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:59.739Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:18:59.740Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:59.740Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:18:59.740Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:59.741Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:18:59.741Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:59.741Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:18:59.742Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:59.742Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:18:59.742Z] [LOG]    Fixed amount: 0
[2025-10-13T07:18:59.742Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:18:59.743Z] [LOG] Regular deductions for Office Team null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:18:59.744Z] [LOG] Combined deductions for Office Team null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 1
}
[2025-10-13T07:18:59.975Z] [LOG] Creating components for record c710d8c3-0037-4802-bd4f-f857cd59a095: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:18:59.976Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1
}
[2025-10-13T07:19:00.204Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:19:00.442Z] [LOG] Created payroll_record_component: bb5c0b9b-d1f6-46b3-abd6-fef3312f6cb7 for Attendance Deduction
[2025-10-13T07:19:00.906Z] [LOG] ✅ Financial balances updated successfully for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:00.906Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:19:00.907Z] [LOG] 
======================================================================
[2025-10-13T07:19:00.907Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Office Team null
[2025-10-13T07:19:00.908Z] [LOG] ======================================================================
[2025-10-13T07:19:00.908Z] [LOG]    Gross Salary: Rs.1.00
[2025-10-13T07:19:00.909Z] [LOG]    Total Deductions: Rs.1.00
[2025-10-13T07:19:00.909Z] [LOG]       - Attendance Deduction: Rs.1.00
[2025-10-13T07:19:00.909Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:19:00.910Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:19:00.910Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:19:00.910Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-13T07:19:00.911Z] [LOG] ======================================================================

[2025-10-13T07:19:00.911Z] [LOG] ✅ Office Team null: Calculation completed successfully
[2025-10-13T07:19:00.912Z] [LOG] 📊 Progress: 25/34 (73.5%)
[2025-10-13T07:19:00.913Z] [LOG] 
🧮 Processing: Hari null (EMP000017)
[2025-10-13T07:19:00.913Z] [LOG] 📋 Record ID: c71e564b-6ea4-4b07-94b1-5139caf8311c
[2025-10-13T07:19:00.914Z] [LOG] 
======================================================================
[2025-10-13T07:19:00.915Z] [LOG] 🧮 CALCULATING PAYROLL: Hari null (EMP000017)
[2025-10-13T07:19:00.915Z] [LOG] ======================================================================
[2025-10-13T07:19:01.830Z] [LOG] 🔍 Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-13T07:19:01.831Z] [LOG]    Total components: 9
[2025-10-13T07:19:01.831Z] [LOG]    Applicable components: 9
[2025-10-13T07:19:01.832Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-13T07:19:06.063Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:19:06.063Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:19:06.292Z] [LOG] 📊 Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:06.523Z] [LOG] 📊 Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:06.752Z] [LOG] 📊 Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:06.752Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:19:06.753Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:19:06.753Z] [LOG] 💰 GROSS CALCULATION for Hari null:
[2025-10-13T07:19:06.754Z] [LOG]    Base Salary: 50000
[2025-10-13T07:19:06.754Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:19:07.099Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:19:07.330Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:19:07.331Z] [LOG]    Employee ID: 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:07.332Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:19:07.332Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-13T07:19:07.565Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:19:07.565Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-13T07:19:07.566Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-13T07:19:07.566Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-13T07:19:07.566Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:19:07.794Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:19:07.794Z] [LOG]       Weekday (Mon-Fri): 114.85h
[2025-10-13T07:19:07.795Z] [LOG]       Saturday: 16.84h
[2025-10-13T07:19:07.796Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:19:07.796Z] [LOG]       Total Worked: 131.69h
[2025-10-13T07:19:07.796Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:19:07.797Z] [LOG]       Weekday: 114.85h × Rs.235.29 = Rs.27023.06
[2025-10-13T07:19:07.797Z] [LOG]       Saturday: 16.84h × Rs.444.44 = Rs.7484.37
[2025-10-13T07:19:07.797Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:19:07.798Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:19:07.798Z] [LOG]       Total Earned Salary: Rs.34507.43
[2025-10-13T07:19:07.799Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:19:07.800Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-13T07:19:07.803Z] [LOG]       Earned Salary: Rs.34507.43
[2025-10-13T07:19:07.803Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:19:07.804Z] [LOG]       Attendance Deduction: Rs.15492.57
[2025-10-13T07:19:07.805Z] [LOG]       📉 Deduction is 30.99% of base salary
[2025-10-13T07:19:07.805Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:19:07.805Z] [LOG]    Gross Salary: 50000
[2025-10-13T07:19:07.806Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:19:07.806Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:19:07.806Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:07.806Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:19:07.807Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:07.807Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:19:07.808Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:07.809Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:19:07.810Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:07.810Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:19:07.810Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:07.811Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:19:07.812Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:07.812Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:19:07.813Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:07.814Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:19:07.814Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:07.814Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:19:07.815Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:07.815Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:19:07.815Z] [LOG] Regular deductions for Hari null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:19:07.816Z] [LOG] Combined deductions for Hari null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 15492.573900000003,
      "details": "Based on worked hours (131.69h total)"
    }
  ],
  "total": 15492.573900000003
}
[2025-10-13T07:19:08.044Z] [LOG] Creating components for record c71e564b-6ea4-4b07-94b1-5139caf8311c: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:19:08.046Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 15492.573900000003
}
[2025-10-13T07:19:08.273Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:19:08.500Z] [LOG] Created payroll_record_component: 4eaf81ba-307a-4c7b-9b83-b65cd001f505 for Attendance Deduction
[2025-10-13T07:19:08.960Z] [LOG] ✅ Financial balances updated successfully for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:08.961Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:19:08.961Z] [LOG] 
======================================================================
[2025-10-13T07:19:08.962Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Hari null
[2025-10-13T07:19:08.962Z] [LOG] ======================================================================
[2025-10-13T07:19:08.963Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-13T07:19:08.963Z] [LOG]    Total Deductions: Rs.15492.57
[2025-10-13T07:19:08.963Z] [LOG]       - Attendance Deduction: Rs.15492.57
[2025-10-13T07:19:08.964Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:19:08.964Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:19:08.964Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:19:08.965Z] [LOG]    NET SALARY: Rs.34507.43
[2025-10-13T07:19:08.965Z] [LOG] ======================================================================

[2025-10-13T07:19:08.965Z] [LOG] ✅ Hari null: Calculation completed successfully
[2025-10-13T07:19:08.966Z] [LOG] 📊 Progress: 26/34 (76.5%)
[2025-10-13T07:19:08.966Z] [LOG] 
🧮 Processing: Faizan Faizan (EMP000003)
[2025-10-13T07:19:08.967Z] [LOG] 📋 Record ID: cba4e4f9-de54-46b8-95df-da26948c5a0c
[2025-10-13T07:19:08.969Z] [LOG] 
======================================================================
[2025-10-13T07:19:08.970Z] [LOG] 🧮 CALCULATING PAYROLL: Faizan Faizan (EMP000003)
[2025-10-13T07:19:08.971Z] [LOG] ======================================================================
[2025-10-13T07:19:09.894Z] [LOG] 🔍 Component filtering for employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-13T07:19:09.895Z] [LOG]    Total components: 9
[2025-10-13T07:19:09.895Z] [LOG]    Applicable components: 9
[2025-10-13T07:19:09.895Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-13T07:19:10.824Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:19:10.824Z] [LOG] 🔄 Processing financial records for employee 0143a057-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:19:11.052Z] [LOG] 📊 Found 0 active loans for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:11.279Z] [LOG] 📊 Found 0 active advances for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:11.510Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:11.511Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:19:11.511Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:19:11.512Z] [LOG] 💰 GROSS CALCULATION for Faizan Faizan:
[2025-10-13T07:19:11.513Z] [LOG]    Base Salary: 50000
[2025-10-13T07:19:11.513Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:19:11.741Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:19:11.969Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:19:11.970Z] [LOG]    Employee ID: 0143a057-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:11.971Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:19:11.972Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-13T07:19:12.254Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:19:12.255Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-13T07:19:12.255Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-13T07:19:12.255Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-13T07:19:12.255Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:19:12.582Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:19:12.583Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-13T07:19:12.583Z] [LOG]       Saturday: 0.00h
[2025-10-13T07:19:12.584Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:19:12.584Z] [LOG]       Total Worked: 0.00h
[2025-10-13T07:19:12.585Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:19:12.585Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-13T07:19:12.585Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-13T07:19:12.586Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:19:12.587Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:19:12.587Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-13T07:19:12.587Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:19:12.588Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-13T07:19:12.588Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-13T07:19:12.588Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:19:12.588Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-13T07:19:12.589Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-13T07:19:12.589Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:19:12.589Z] [LOG]    Gross Salary: 50000
[2025-10-13T07:19:12.589Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:19:12.590Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:19:12.590Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:12.590Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:19:12.590Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:12.591Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:19:12.591Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:12.591Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:19:12.591Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:12.592Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:19:12.592Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:12.592Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:19:12.592Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:12.593Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:19:12.593Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:12.593Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:19:12.593Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:12.593Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:19:12.594Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:12.594Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:19:12.594Z] [LOG] Regular deductions for Faizan Faizan: {
  "components": [],
  "total": 0
}
[2025-10-13T07:19:12.595Z] [LOG] Combined deductions for Faizan Faizan: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-13T07:19:12.877Z] [LOG] Creating components for record cba4e4f9-de54-46b8-95df-da26948c5a0c: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:19:12.878Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-13T07:19:13.107Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:19:13.342Z] [LOG] Created payroll_record_component: 0a7a0fda-cf44-4473-84d2-bef3ccb2e382 for Attendance Deduction
[2025-10-13T07:19:13.951Z] [LOG] ✅ Financial balances updated successfully for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:13.951Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:19:13.952Z] [LOG] 
======================================================================
[2025-10-13T07:19:13.952Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Faizan Faizan
[2025-10-13T07:19:13.952Z] [LOG] ======================================================================
[2025-10-13T07:19:13.952Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-13T07:19:13.953Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-13T07:19:13.953Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-13T07:19:13.953Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:19:13.954Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:19:13.954Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:19:13.954Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-13T07:19:13.954Z] [LOG] ======================================================================

[2025-10-13T07:19:13.954Z] [LOG] ✅ Faizan Faizan: Calculation completed successfully
[2025-10-13T07:19:13.955Z] [LOG] 📊 Progress: 27/34 (79.4%)
[2025-10-13T07:19:13.955Z] [LOG] 
🧮 Processing: Sithira null (EMP000039)
[2025-10-13T07:19:13.955Z] [LOG] 📋 Record ID: ce2da64a-a0f6-42e0-991b-25259d09e5f9
[2025-10-13T07:19:13.955Z] [LOG] 
======================================================================
[2025-10-13T07:19:13.955Z] [LOG] 🧮 CALCULATING PAYROLL: Sithira null (EMP000039)
[2025-10-13T07:19:13.956Z] [LOG] ======================================================================
[2025-10-13T07:19:14.872Z] [LOG] 🔍 Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-13T07:19:14.872Z] [LOG]    Total components: 9
[2025-10-13T07:19:14.873Z] [LOG]    Applicable components: 9
[2025-10-13T07:19:14.873Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-13T07:19:20.445Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:19:20.445Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:19:20.673Z] [LOG] 📊 Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:20.911Z] [LOG] 📊 Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:21.138Z] [LOG] 📊 Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:21.139Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:19:21.139Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:19:21.140Z] [LOG] 💰 GROSS CALCULATION for Sithira null:
[2025-10-13T07:19:21.140Z] [LOG]    Base Salary: 40000
[2025-10-13T07:19:21.140Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:19:21.367Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:19:21.603Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:19:21.603Z] [LOG]    Employee ID: 01441e19-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:21.603Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:19:21.604Z] [LOG]    Base Salary: Rs.40000.00
[2025-10-13T07:19:21.837Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:19:21.838Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-13T07:19:21.838Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-13T07:19:21.838Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-13T07:19:21.839Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:19:22.073Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:19:22.074Z] [LOG]       Weekday (Mon-Fri): 153.71h
[2025-10-13T07:19:22.074Z] [LOG]       Saturday: 8.53h
[2025-10-13T07:19:22.074Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:19:22.074Z] [LOG]       Total Worked: 162.24h
[2025-10-13T07:19:22.074Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:19:22.075Z] [LOG]       Weekday: 153.71h × Rs.188.24 = Rs.28934.37
[2025-10-13T07:19:22.075Z] [LOG]       Saturday: 8.53h × Rs.355.56 = Rs.3032.93
[2025-10-13T07:19:22.075Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:19:22.075Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:19:22.075Z] [LOG]       Total Earned Salary: Rs.31967.30
[2025-10-13T07:19:22.075Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:19:22.075Z] [LOG]       Base Salary: Rs.40000.00
[2025-10-13T07:19:22.076Z] [LOG]       Earned Salary: Rs.31967.30
[2025-10-13T07:19:22.076Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:19:22.076Z] [LOG]       Attendance Deduction: Rs.8032.70
[2025-10-13T07:19:22.076Z] [LOG]       📉 Deduction is 20.08% of base salary
[2025-10-13T07:19:22.077Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:19:22.077Z] [LOG]    Gross Salary: 40000
[2025-10-13T07:19:22.077Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:19:22.077Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:19:22.077Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:22.077Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:19:22.078Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:22.078Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:19:22.078Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:22.078Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:19:22.078Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:22.079Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:19:22.079Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:22.079Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:19:22.080Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:22.080Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:19:22.080Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:22.080Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:19:22.080Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:22.080Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:19:22.080Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:22.080Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:19:22.081Z] [LOG] Regular deductions for Sithira null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:19:22.081Z] [LOG] Combined deductions for Sithira null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 8032.7027999999955,
      "details": "Based on worked hours (162.24h total)"
    }
  ],
  "total": 8032.7027999999955
}
[2025-10-13T07:19:22.316Z] [LOG] Creating components for record ce2da64a-a0f6-42e0-991b-25259d09e5f9: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:19:22.317Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 8032.7027999999955
}
[2025-10-13T07:19:22.552Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:19:22.780Z] [LOG] Created payroll_record_component: bcc57717-d79b-46d4-9fb3-4dd0700e29fa for Attendance Deduction
[2025-10-13T07:19:23.232Z] [LOG] ✅ Financial balances updated successfully for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:23.232Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:19:23.232Z] [LOG] 
======================================================================
[2025-10-13T07:19:23.233Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sithira null
[2025-10-13T07:19:23.233Z] [LOG] ======================================================================
[2025-10-13T07:19:23.233Z] [LOG]    Gross Salary: Rs.40000.00
[2025-10-13T07:19:23.233Z] [LOG]    Total Deductions: Rs.8032.70
[2025-10-13T07:19:23.234Z] [LOG]       - Attendance Deduction: Rs.8032.70
[2025-10-13T07:19:23.234Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:19:23.234Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:19:23.234Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:19:23.235Z] [LOG]    NET SALARY: Rs.31967.30
[2025-10-13T07:19:23.235Z] [LOG] ======================================================================

[2025-10-13T07:19:23.235Z] [LOG] ✅ Sithira null: Calculation completed successfully
[2025-10-13T07:19:23.235Z] [LOG] 📊 Progress: 28/34 (82.4%)
[2025-10-13T07:19:23.236Z] [LOG] 
🧮 Processing: Dharshika null (EMP000009)
[2025-10-13T07:19:23.236Z] [LOG] 📋 Record ID: d43d13f3-2b10-4360-a0d9-b8801f413e0f
[2025-10-13T07:19:23.236Z] [LOG] 
======================================================================
[2025-10-13T07:19:23.236Z] [LOG] 🧮 CALCULATING PAYROLL: Dharshika null (EMP000009)
[2025-10-13T07:19:23.237Z] [LOG] ======================================================================
[2025-10-13T07:19:24.154Z] [LOG] 🔍 Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-13T07:19:24.155Z] [LOG]    Total components: 9
[2025-10-13T07:19:24.155Z] [LOG]    Applicable components: 9
[2025-10-13T07:19:24.155Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-13T07:19:32.052Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:19:32.052Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:19:32.280Z] [LOG] 📊 Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:32.522Z] [LOG] 📊 Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:32.747Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:32.748Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:19:32.748Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:19:32.749Z] [LOG] 💰 GROSS CALCULATION for Dharshika null:
[2025-10-13T07:19:32.749Z] [LOG]    Base Salary: 100000
[2025-10-13T07:19:32.749Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:19:32.978Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:19:33.204Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:19:33.204Z] [LOG]    Employee ID: 0143a994-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:33.204Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:19:33.204Z] [LOG]    Base Salary: Rs.100000.00
[2025-10-13T07:19:33.430Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:19:33.430Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-13T07:19:33.431Z] [LOG]       Weekday Hourly Rate: Rs.470.59
[2025-10-13T07:19:33.431Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-13T07:19:33.431Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:19:33.657Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:19:33.658Z] [LOG]       Weekday (Mon-Fri): 138.73h
[2025-10-13T07:19:33.658Z] [LOG]       Saturday: 11.06h
[2025-10-13T07:19:33.658Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:19:33.659Z] [LOG]       Total Worked: 149.79h
[2025-10-13T07:19:33.659Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:19:33.659Z] [LOG]       Weekday: 138.73h × Rs.470.59 = Rs.65284.95
[2025-10-13T07:19:33.660Z] [LOG]       Saturday: 11.06h × Rs.888.89 = Rs.9831.12
[2025-10-13T07:19:33.660Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:19:33.660Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:19:33.660Z] [LOG]       Total Earned Salary: Rs.75116.07
[2025-10-13T07:19:33.661Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:19:33.661Z] [LOG]       Base Salary: Rs.100000.00
[2025-10-13T07:19:33.661Z] [LOG]       Earned Salary: Rs.75116.07
[2025-10-13T07:19:33.662Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:19:33.662Z] [LOG]       Attendance Deduction: Rs.24883.93
[2025-10-13T07:19:33.662Z] [LOG]       📉 Deduction is 24.88% of base salary
[2025-10-13T07:19:33.663Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:19:33.663Z] [LOG]    Gross Salary: 100000
[2025-10-13T07:19:33.663Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:19:33.664Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:19:33.664Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:33.665Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:19:33.665Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:33.665Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:19:33.665Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:33.666Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:19:33.666Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:33.666Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:19:33.666Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:33.667Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:19:33.667Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:33.667Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:19:33.668Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:33.668Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:19:33.668Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:33.669Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:19:33.669Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:33.669Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:19:33.670Z] [LOG] Regular deductions for Dharshika null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:19:33.670Z] [LOG] Combined deductions for Dharshika null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 24883.925900000002,
      "details": "Based on worked hours (149.79h total)"
    }
  ],
  "total": 24883.925900000002
}
[2025-10-13T07:19:33.900Z] [LOG] Creating components for record d43d13f3-2b10-4360-a0d9-b8801f413e0f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:19:33.901Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 24883.925900000002
}
[2025-10-13T07:19:34.133Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:19:34.363Z] [LOG] Created payroll_record_component: 3afdc8e6-344d-42a2-89c4-6f97712ecbf4 for Attendance Deduction
[2025-10-13T07:19:34.837Z] [LOG] ✅ Financial balances updated successfully for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:34.838Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:19:34.838Z] [LOG] 
======================================================================
[2025-10-13T07:19:34.838Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Dharshika null
[2025-10-13T07:19:34.838Z] [LOG] ======================================================================
[2025-10-13T07:19:34.838Z] [LOG]    Gross Salary: Rs.100000.00
[2025-10-13T07:19:34.839Z] [LOG]    Total Deductions: Rs.24883.93
[2025-10-13T07:19:34.839Z] [LOG]       - Attendance Deduction: Rs.24883.93
[2025-10-13T07:19:34.839Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:19:34.839Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:19:34.839Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:19:34.839Z] [LOG]    NET SALARY: Rs.75116.07
[2025-10-13T07:19:34.840Z] [LOG] ======================================================================

[2025-10-13T07:19:34.840Z] [LOG] ✅ Dharshika null: Calculation completed successfully
[2025-10-13T07:19:34.840Z] [LOG] 📊 Progress: 29/34 (85.3%)
[2025-10-13T07:19:34.840Z] [LOG] 
🧮 Processing: Sumaiya null (EMP000016)
[2025-10-13T07:19:34.840Z] [LOG] 📋 Record ID: da53cfcf-4992-4649-bdeb-35e6a2d61af9
[2025-10-13T07:19:34.841Z] [LOG] 
======================================================================
[2025-10-13T07:19:34.841Z] [LOG] 🧮 CALCULATING PAYROLL: Sumaiya null (EMP000016)
[2025-10-13T07:19:34.841Z] [LOG] ======================================================================
[2025-10-13T07:19:35.761Z] [LOG] 🔍 Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-13T07:19:35.761Z] [LOG]    Total components: 9
[2025-10-13T07:19:35.761Z] [LOG]    Applicable components: 9
[2025-10-13T07:19:35.762Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-13T07:19:44.602Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:19:44.605Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:19:44.831Z] [LOG] 📊 Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:45.059Z] [LOG] 📊 Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:45.286Z] [LOG] 📊 Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:45.286Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:19:45.287Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:19:45.287Z] [LOG] 💰 GROSS CALCULATION for Sumaiya null:
[2025-10-13T07:19:45.288Z] [LOG]    Base Salary: 60000
[2025-10-13T07:19:45.288Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:19:45.519Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:19:45.747Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:19:45.747Z] [LOG]    Employee ID: 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:45.748Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:19:45.748Z] [LOG]    Base Salary: Rs.60000.00
[2025-10-13T07:19:45.976Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:19:45.977Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-13T07:19:45.977Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-13T07:19:45.977Z] [LOG]       Saturday Hourly Rate: Rs.533.33
[2025-10-13T07:19:45.977Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:19:46.203Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:19:46.204Z] [LOG]       Weekday (Mon-Fri): 162.15h
[2025-10-13T07:19:46.204Z] [LOG]       Saturday: 22.50h
[2025-10-13T07:19:46.204Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:19:46.204Z] [LOG]       Total Worked: 184.65h
[2025-10-13T07:19:46.204Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:19:46.204Z] [LOG]       Weekday: 162.15h × Rs.282.35 = Rs.45783.05
[2025-10-13T07:19:46.205Z] [LOG]       Saturday: 22.50h × Rs.533.33 = Rs.11999.93
[2025-10-13T07:19:46.205Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:19:46.205Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:19:46.205Z] [LOG]       Total Earned Salary: Rs.57782.98
[2025-10-13T07:19:46.205Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:19:46.206Z] [LOG]       Base Salary: Rs.60000.00
[2025-10-13T07:19:46.206Z] [LOG]       Earned Salary: Rs.57782.98
[2025-10-13T07:19:46.206Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:19:46.206Z] [LOG]       Attendance Deduction: Rs.2217.02
[2025-10-13T07:19:46.206Z] [LOG]       📉 Deduction is 3.70% of base salary
[2025-10-13T07:19:46.208Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:19:46.208Z] [LOG]    Gross Salary: 60000
[2025-10-13T07:19:46.208Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:19:46.208Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:19:46.209Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:46.209Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:19:46.209Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:46.209Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:19:46.209Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:46.209Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:19:46.210Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:46.210Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:19:46.210Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:46.210Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:19:46.210Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:46.211Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:19:46.211Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:46.211Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:19:46.211Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:46.211Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:19:46.211Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:46.212Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:19:46.212Z] [LOG] Regular deductions for Sumaiya null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:19:46.212Z] [LOG] Combined deductions for Sumaiya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 2217.022499999992,
      "details": "Based on worked hours (184.65h total)"
    }
  ],
  "total": 2217.022499999992
}
[2025-10-13T07:19:46.445Z] [LOG] Creating components for record da53cfcf-4992-4649-bdeb-35e6a2d61af9: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:19:46.445Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 2217.022499999992
}
[2025-10-13T07:19:46.675Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:19:46.902Z] [LOG] Created payroll_record_component: 1ac66831-4684-4eb7-a970-8ce373861cc8 for Attendance Deduction
[2025-10-13T07:19:47.372Z] [LOG] ✅ Financial balances updated successfully for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:47.372Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:19:47.373Z] [LOG] 
======================================================================
[2025-10-13T07:19:47.373Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sumaiya null
[2025-10-13T07:19:47.373Z] [LOG] ======================================================================
[2025-10-13T07:19:47.374Z] [LOG]    Gross Salary: Rs.60000.00
[2025-10-13T07:19:47.374Z] [LOG]    Total Deductions: Rs.2217.02
[2025-10-13T07:19:47.374Z] [LOG]       - Attendance Deduction: Rs.2217.02
[2025-10-13T07:19:47.374Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:19:47.375Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:19:47.375Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:19:47.375Z] [LOG]    NET SALARY: Rs.57782.98
[2025-10-13T07:19:47.376Z] [LOG] ======================================================================

[2025-10-13T07:19:47.376Z] [LOG] ✅ Sumaiya null: Calculation completed successfully
[2025-10-13T07:19:47.376Z] [LOG] 📊 Progress: 30/34 (88.2%)
[2025-10-13T07:19:47.377Z] [LOG] 
🧮 Processing: Waruni null (EMP000024)
[2025-10-13T07:19:47.377Z] [LOG] 📋 Record ID: db9bd355-7ecf-4d35-b407-5169c7177681
[2025-10-13T07:19:47.377Z] [LOG] 
======================================================================
[2025-10-13T07:19:47.377Z] [LOG] 🧮 CALCULATING PAYROLL: Waruni null (EMP000024)
[2025-10-13T07:19:47.378Z] [LOG] ======================================================================
[2025-10-13T07:19:48.308Z] [LOG] 🔍 Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-13T07:19:48.308Z] [LOG]    Total components: 9
[2025-10-13T07:19:48.308Z] [LOG]    Applicable components: 9
[2025-10-13T07:19:48.309Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-13T07:19:57.029Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:19:57.030Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:19:57.257Z] [LOG] 📊 Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:57.484Z] [LOG] 📊 Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:57.712Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:57.713Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:19:57.714Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:19:57.714Z] [LOG] 💰 GROSS CALCULATION for Waruni null:
[2025-10-13T07:19:57.715Z] [LOG]    Base Salary: 50000
[2025-10-13T07:19:57.715Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:19:58.008Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:19:58.233Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:19:58.234Z] [LOG]    Employee ID: 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:58.234Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:19:58.234Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-13T07:19:58.460Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:19:58.461Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-13T07:19:58.461Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-13T07:19:58.462Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-13T07:19:58.462Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:19:58.697Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:19:58.697Z] [LOG]       Weekday (Mon-Fri): 169.52h
[2025-10-13T07:19:58.698Z] [LOG]       Saturday: 22.39h
[2025-10-13T07:19:58.698Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:19:58.698Z] [LOG]       Total Worked: 191.91h
[2025-10-13T07:19:58.699Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:19:58.699Z] [LOG]       Weekday: 169.52h × Rs.235.29 = Rs.39886.36
[2025-10-13T07:19:58.699Z] [LOG]       Saturday: 22.39h × Rs.444.44 = Rs.9951.01
[2025-10-13T07:19:58.700Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:19:58.700Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:19:58.700Z] [LOG]       Total Earned Salary: Rs.49837.37
[2025-10-13T07:19:58.701Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:19:58.701Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-13T07:19:58.701Z] [LOG]       Earned Salary: Rs.49837.37
[2025-10-13T07:19:58.702Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:19:58.702Z] [LOG]       Attendance Deduction: Rs.162.63
[2025-10-13T07:19:58.702Z] [LOG]       📉 Deduction is 0.33% of base salary
[2025-10-13T07:19:58.704Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:19:58.705Z] [LOG]    Gross Salary: 50000
[2025-10-13T07:19:58.706Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:19:58.706Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:19:58.707Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:58.707Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:19:58.708Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:58.708Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:19:58.709Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:58.709Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:19:58.710Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:58.710Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:19:58.710Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:58.710Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:19:58.711Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:58.711Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:19:58.711Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:58.711Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:19:58.712Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:58.713Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:19:58.713Z] [LOG]    Fixed amount: 0
[2025-10-13T07:19:58.714Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:19:58.720Z] [LOG] Regular deductions for Waruni null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:19:58.722Z] [LOG] Combined deductions for Waruni null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 162.6275999999998,
      "details": "Based on worked hours (191.91000000000003h total)"
    }
  ],
  "total": 162.6275999999998
}
[2025-10-13T07:19:58.959Z] [LOG] Creating components for record db9bd355-7ecf-4d35-b407-5169c7177681: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:19:58.960Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 162.6275999999998
}
[2025-10-13T07:19:59.188Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:19:59.413Z] [LOG] Created payroll_record_component: c186f2b0-dde1-4e96-99aa-e3742e774bc2 for Attendance Deduction
[2025-10-13T07:19:59.877Z] [LOG] ✅ Financial balances updated successfully for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-13T07:19:59.877Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:19:59.878Z] [LOG] 
======================================================================
[2025-10-13T07:19:59.878Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Waruni null
[2025-10-13T07:19:59.878Z] [LOG] ======================================================================
[2025-10-13T07:19:59.879Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-13T07:19:59.879Z] [LOG]    Total Deductions: Rs.162.63
[2025-10-13T07:19:59.879Z] [LOG]       - Attendance Deduction: Rs.162.63
[2025-10-13T07:19:59.880Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:19:59.880Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:19:59.880Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:19:59.881Z] [LOG]    NET SALARY: Rs.49837.37
[2025-10-13T07:19:59.881Z] [LOG] ======================================================================

[2025-10-13T07:19:59.881Z] [LOG] ✅ Waruni null: Calculation completed successfully
[2025-10-13T07:19:59.881Z] [LOG] 📊 Progress: 31/34 (91.2%)
[2025-10-13T07:19:59.882Z] [LOG] 
🧮 Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-13T07:19:59.882Z] [LOG] 📋 Record ID: e28bfd62-9433-4918-acb6-7f54aa812029
[2025-10-13T07:19:59.884Z] [LOG] 
======================================================================
[2025-10-13T07:19:59.885Z] [LOG] 🧮 CALCULATING PAYROLL: P.D.P Dilini Madushani null (EMP000043)
[2025-10-13T07:19:59.885Z] [LOG] ======================================================================
[2025-10-13T07:20:00.804Z] [LOG] 🔍 Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-13T07:20:00.804Z] [LOG]    Total components: 9
[2025-10-13T07:20:00.804Z] [LOG]    Applicable components: 9
[2025-10-13T07:20:00.805Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-13T07:20:01.714Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:20:01.715Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:20:01.945Z] [LOG] 📊 Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-13T07:20:02.172Z] [LOG] 📊 Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-13T07:20:02.398Z] [LOG] 📊 Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-13T07:20:02.399Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:20:02.399Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:20:02.399Z] [LOG] 💰 GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-13T07:20:02.400Z] [LOG]    Base Salary: 50000
[2025-10-13T07:20:02.400Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:20:02.629Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:20:02.858Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:20:02.858Z] [LOG]    Employee ID: 014435dc-7105-11f0-a50f-98e743540430
[2025-10-13T07:20:02.858Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:20:02.859Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-13T07:20:03.087Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:20:03.088Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-13T07:20:03.088Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-13T07:20:03.088Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-13T07:20:03.089Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:20:03.318Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:20:03.319Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-13T07:20:03.319Z] [LOG]       Saturday: 0.00h
[2025-10-13T07:20:03.320Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:20:03.320Z] [LOG]       Total Worked: 0.00h
[2025-10-13T07:20:03.320Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:20:03.320Z] [LOG]       Weekday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-13T07:20:03.321Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-13T07:20:03.321Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:20:03.321Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:20:03.322Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-13T07:20:03.322Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:20:03.323Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-13T07:20:03.323Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-13T07:20:03.323Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:20:03.324Z] [LOG]       Attendance Deduction: Rs.50000.00
[2025-10-13T07:20:03.324Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-13T07:20:03.324Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:20:03.326Z] [LOG]    Gross Salary: 50000
[2025-10-13T07:20:03.327Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:20:03.328Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:20:03.329Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:03.330Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:20:03.332Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:03.333Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:20:03.334Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:03.334Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:20:03.335Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:03.336Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:20:03.342Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:03.343Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:20:03.343Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:03.344Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:20:03.344Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:03.344Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:20:03.345Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:03.347Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:20:03.347Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:03.348Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:20:03.349Z] [LOG] Regular deductions for P.D.P Dilini Madushani null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:20:03.350Z] [LOG] Combined deductions for P.D.P Dilini Madushani null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 50000,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 50000
}
[2025-10-13T07:20:03.580Z] [LOG] Creating components for record e28bfd62-9433-4918-acb6-7f54aa812029: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:20:03.581Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 50000
}
[2025-10-13T07:20:03.907Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:20:04.149Z] [LOG] Created payroll_record_component: cec75179-8742-4081-9dcf-21b4b58f10ce for Attendance Deduction
[2025-10-13T07:20:05.154Z] [LOG] ✅ Financial balances updated successfully for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-13T07:20:05.155Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:20:05.156Z] [LOG] 
======================================================================
[2025-10-13T07:20:05.157Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: P.D.P Dilini Madushani null
[2025-10-13T07:20:05.158Z] [LOG] ======================================================================
[2025-10-13T07:20:05.158Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-13T07:20:05.159Z] [LOG]    Total Deductions: Rs.50000.00
[2025-10-13T07:20:05.159Z] [LOG]       - Attendance Deduction: Rs.50000.00
[2025-10-13T07:20:05.160Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:20:05.160Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:20:05.160Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:20:05.160Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-13T07:20:05.161Z] [LOG] ======================================================================

[2025-10-13T07:20:05.161Z] [LOG] ✅ P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-13T07:20:05.161Z] [LOG] 📊 Progress: 32/34 (94.1%)
[2025-10-13T07:20:05.163Z] [LOG] 
🧮 Processing: Saruban null (EMP000007)
[2025-10-13T07:20:05.163Z] [LOG] 📋 Record ID: fde46351-e042-49fc-8a0e-f97bb4dc255a
[2025-10-13T07:20:05.164Z] [LOG] 
======================================================================
[2025-10-13T07:20:05.164Z] [LOG] 🧮 CALCULATING PAYROLL: Saruban null (EMP000007)
[2025-10-13T07:20:05.164Z] [LOG] ======================================================================
[2025-10-13T07:20:06.271Z] [LOG] 🔍 Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-13T07:20:06.271Z] [LOG]    Total components: 9
[2025-10-13T07:20:06.272Z] [LOG]    Applicable components: 9
[2025-10-13T07:20:06.272Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-13T07:20:07.261Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:20:07.261Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:20:07.490Z] [LOG] 📊 Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-13T07:20:07.719Z] [LOG] 📊 Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-13T07:20:07.950Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-13T07:20:07.950Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:20:07.951Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:20:07.952Z] [LOG] 💰 GROSS CALCULATION for Saruban null:
[2025-10-13T07:20:07.952Z] [LOG]    Base Salary: 0
[2025-10-13T07:20:07.952Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:20:08.180Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:20:08.409Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:20:08.409Z] [LOG]    Employee ID: 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-13T07:20:08.410Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:20:08.410Z] [LOG]    Base Salary: Rs.0.00
[2025-10-13T07:20:08.636Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:20:08.636Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-13T07:20:08.637Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-13T07:20:08.637Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-13T07:20:08.638Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:20:08.866Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:20:08.867Z] [LOG]       Weekday (Mon-Fri): 0.00h
[2025-10-13T07:20:08.867Z] [LOG]       Saturday: 0.00h
[2025-10-13T07:20:08.868Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:20:08.868Z] [LOG]       Total Worked: 0.00h
[2025-10-13T07:20:08.868Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:20:08.869Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:20:08.869Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:20:08.869Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:20:08.869Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:20:08.870Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-13T07:20:08.870Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:20:08.871Z] [LOG]       Base Salary: Rs.0.00
[2025-10-13T07:20:08.871Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-13T07:20:08.871Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:20:08.872Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-13T07:20:08.872Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-13T07:20:08.872Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:20:08.873Z] [LOG]    Gross Salary: 0
[2025-10-13T07:20:08.873Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:20:08.873Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:20:08.874Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:08.874Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:20:08.875Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:08.875Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:20:08.876Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:08.876Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:20:08.879Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:08.881Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:20:08.882Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:08.885Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:20:08.887Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:08.887Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:20:08.888Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:08.888Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:20:08.889Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:08.889Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:20:08.889Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:08.890Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:20:08.890Z] [LOG] Regular deductions for Saruban null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:20:08.890Z] [LOG] Combined deductions for Saruban null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (0h total)"
    }
  ],
  "total": 0
}
[2025-10-13T07:20:09.117Z] [LOG] Creating components for record fde46351-e042-49fc-8a0e-f97bb4dc255a: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:20:09.118Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-13T07:20:09.347Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:20:09.582Z] [LOG] Created payroll_record_component: b7c1707b-38e4-4b20-b8aa-b89033ca791c for Attendance Deduction
[2025-10-13T07:20:10.043Z] [LOG] ✅ Financial balances updated successfully for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-13T07:20:10.044Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:20:10.044Z] [LOG] 
======================================================================
[2025-10-13T07:20:10.044Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saruban null
[2025-10-13T07:20:10.045Z] [LOG] ======================================================================
[2025-10-13T07:20:10.045Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-13T07:20:10.046Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-13T07:20:10.046Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-13T07:20:10.046Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:20:10.046Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:20:10.047Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:20:10.047Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-13T07:20:10.047Z] [LOG] ======================================================================

[2025-10-13T07:20:10.048Z] [LOG] ✅ Saruban null: Calculation completed successfully
[2025-10-13T07:20:10.048Z] [LOG] 📊 Progress: 33/34 (97.1%)
[2025-10-13T07:20:10.048Z] [LOG] 
🧮 Processing: Maryam null (EMP000035)
[2025-10-13T07:20:10.049Z] [LOG] 📋 Record ID: fface5f4-6f04-48e4-a7ce-8574c33bb870
[2025-10-13T07:20:10.049Z] [LOG] 
======================================================================
[2025-10-13T07:20:10.049Z] [LOG] 🧮 CALCULATING PAYROLL: Maryam null (EMP000035)
[2025-10-13T07:20:10.049Z] [LOG] ======================================================================
[2025-10-13T07:20:10.989Z] [LOG] 🔍 Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-13T07:20:10.989Z] [LOG]    Total components: 9
[2025-10-13T07:20:10.990Z] [LOG]    Applicable components: 9
[2025-10-13T07:20:10.990Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-13T07:20:18.985Z] [LOG] 
🔄 Processing financial records...
[2025-10-13T07:20:18.985Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-13T07:20:19.214Z] [LOG] 📊 Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-13T07:20:19.452Z] [LOG] 📊 Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-13T07:20:19.735Z] [LOG] 📊 Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-13T07:20:19.735Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-13T07:20:19.736Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-13T07:20:19.736Z] [LOG] 💰 GROSS CALCULATION for Maryam null:
[2025-10-13T07:20:19.737Z] [LOG]    Base Salary: 40000
[2025-10-13T07:20:19.737Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-13T07:20:19.966Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-13T07:20:20.221Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-13T07:20:20.221Z] [LOG]    Employee ID: 01440221-7105-11f0-a50f-98e743540430
[2025-10-13T07:20:20.221Z] [LOG]    📅 Calculation Period: 2025-08-01 to 2025-08-31
[2025-10-13T07:20:20.222Z] [LOG]    Base Salary: Rs.40000.00
[2025-10-13T07:20:20.464Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-13T07:20:20.465Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-13T07:20:20.466Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-13T07:20:20.467Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-13T07:20:20.467Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-13T07:20:20.700Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-13T07:20:20.702Z] [LOG]       Weekday (Mon-Fri): 148.07h
[2025-10-13T07:20:20.702Z] [LOG]       Saturday: 21.75h
[2025-10-13T07:20:20.703Z] [LOG]       Sunday: 0.00h
[2025-10-13T07:20:20.704Z] [LOG]       Total Worked: 169.82h
[2025-10-13T07:20:20.705Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-13T07:20:20.706Z] [LOG]       Weekday: 148.07h × Rs.188.24 = Rs.27872.70
[2025-10-13T07:20:20.707Z] [LOG]       Saturday: 21.75h × Rs.355.56 = Rs.7733.43
[2025-10-13T07:20:20.707Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-13T07:20:20.707Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:20:20.708Z] [LOG]       Total Earned Salary: Rs.35606.13
[2025-10-13T07:20:20.708Z] [LOG] 
   📊 Final Calculation:
[2025-10-13T07:20:20.709Z] [LOG]       Base Salary: Rs.40000.00
[2025-10-13T07:20:20.709Z] [LOG]       Earned Salary: Rs.35606.13
[2025-10-13T07:20:20.710Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-13T07:20:20.710Z] [LOG]       Attendance Deduction: Rs.4393.87
[2025-10-13T07:20:20.710Z] [LOG]       📉 Deduction is 10.98% of base salary
[2025-10-13T07:20:20.711Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-13T07:20:20.711Z] [LOG]    Gross Salary: 40000
[2025-10-13T07:20:20.711Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-13T07:20:20.715Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-13T07:20:20.715Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:20.715Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-13T07:20:20.716Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:20.716Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-13T07:20:20.716Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:20.716Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-13T07:20:20.717Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:20.717Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-13T07:20:20.718Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:20.718Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-13T07:20:20.719Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:20.719Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-13T07:20:20.720Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:20.721Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-13T07:20:20.721Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:20.721Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-13T07:20:20.722Z] [LOG]    Fixed amount: 0
[2025-10-13T07:20:20.722Z] [LOG]    📊 Total Deductions: 0
[2025-10-13T07:20:20.722Z] [LOG] Regular deductions for Maryam null: {
  "components": [],
  "total": 0
}
[2025-10-13T07:20:20.723Z] [LOG] Combined deductions for Maryam null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 4393.873200000002,
      "details": "Based on worked hours (169.82h total)"
    }
  ],
  "total": 4393.873200000002
}
[2025-10-13T07:20:20.972Z] [LOG] Creating components for record fface5f4-6f04-48e4-a7ce-8574c33bb870: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-13T07:20:20.972Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 4393.873200000002
}
[2025-10-13T07:20:21.197Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-13T07:20:21.537Z] [LOG] Created payroll_record_component: 4bf8b484-825c-40e9-b6a5-0d0ead467172 for Attendance Deduction
[2025-10-13T07:20:22.265Z] [LOG] ✅ Financial balances updated successfully for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-13T07:20:22.265Z] [LOG] ✅ Financial balances updated successfully
[2025-10-13T07:20:22.266Z] [LOG] 
======================================================================
[2025-10-13T07:20:22.266Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Maryam null
[2025-10-13T07:20:22.267Z] [LOG] ======================================================================
[2025-10-13T07:20:22.267Z] [LOG]    Gross Salary: Rs.40000.00
[2025-10-13T07:20:22.267Z] [LOG]    Total Deductions: Rs.4393.87
[2025-10-13T07:20:22.268Z] [LOG]       - Attendance Deduction: Rs.4393.87
[2025-10-13T07:20:22.268Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-13T07:20:22.268Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-13T07:20:22.269Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-13T07:20:22.269Z] [LOG]    NET SALARY: Rs.35606.13
[2025-10-13T07:20:22.270Z] [LOG] ======================================================================

[2025-10-13T07:20:22.270Z] [LOG] ✅ Maryam null: Calculation completed successfully
[2025-10-13T07:20:22.270Z] [LOG] 📊 Progress: 34/34 (100.0%)
[2025-10-13T07:20:22.272Z] [LOG] 
============================================================
[2025-10-13T07:20:22.272Z] [LOG] 📈 Processing Summary: 34 successful, 0 failed
[2025-10-13T07:20:24.356Z] [LOG] 🎉 Payroll calculation completed successfully!
[2025-10-13T07:20:24.356Z] [LOG] 📊 Final Summary: 34 processed, 0 errors
[2025-10-13T07:20:24.358Z] [INFO] ================================================================================
[2025-10-13T07:20:24.358Z] [INFO] ⏰ Completed at: 2025-10-13T07:20:24.358Z
[2025-10-13T07:20:24.358Z] [INFO] 📊 Total log entries: 3058