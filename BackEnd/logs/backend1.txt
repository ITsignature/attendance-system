[2025-10-27T05:48:24.903Z] [INFO] 🚀 Payroll calculation logging started for run: 7f052b60-6531-4e9a-a503-d5fb9bea7330
[2025-10-27T05:48:24.903Z] [INFO] 📁 Log file: D:\attendance-system\BackEnd\logs\payroll-run-7f052b60-6531-4e9a-a503-d5fb9bea7330-2025-10-27T05-48-24-902Z.txt
[2025-10-27T05:48:24.903Z] [INFO] ⏰ Started at: 2025-10-27T05:48:24.903Z
[2025-10-27T05:48:24.903Z] [INFO] ================================================================================
[2025-10-27T05:48:24.903Z] [LOG] 🚀 Starting payroll calculation for run: 7f052b60-6531-4e9a-a503-d5fb9bea7330
[2025-10-27T05:48:24.904Z] [LOG] 👤 Client ID: it-signature, User ID: 059304ea-24a5-4d78-a290-cf09b9e53c4c
[2025-10-27T05:48:25.712Z] [LOG] ✅ Payroll run verified: October (MONTHLY_2025_10_REGULAR)
[2025-10-27T05:48:26.110Z] [LOG] 📊 Status updated to 'calculating'
[2025-10-27T05:48:26.745Z] [LOG] 👥 Processing 34 employee records:
[2025-10-27T05:48:26.747Z] [LOG] ============================================================
[2025-10-27T05:48:26.748Z] [LOG] 
🧮 Processing: Sithira null (EMP000039)
[2025-10-27T05:48:26.749Z] [LOG] 📋 Record ID: 062102ad-cd12-4df2-95e6-96e4214fabe6
[2025-10-27T05:48:26.752Z] [LOG] 
======================================================================
[2025-10-27T05:48:26.753Z] [LOG] 🧮 CALCULATING PAYROLL: Sithira null (EMP000039)
[2025-10-27T05:48:26.754Z] [LOG] ======================================================================
[2025-10-27T05:48:28.488Z] [LOG] 🔍 Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-27T05:48:28.489Z] [LOG]    Total components: 13
[2025-10-27T05:48:28.489Z] [LOG]    Applicable components: 13
[2025-10-27T05:48:28.490Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-27T05:48:30.983Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:48:30.984Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:48:31.817Z] [LOG] 📊 Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-27T05:48:32.241Z] [LOG] 📊 Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-27T05:48:32.649Z] [LOG] 📊 Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-27T05:48:32.651Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:48:32.652Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:48:33.491Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:48:33.492Z] [LOG]    👤 Employee: Sithira null (EMP000039)
[2025-10-27T05:48:33.493Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:48:33.493Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:48:33.494Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-27T05:48:33.495Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:48:35.433Z] [LOG] 
   💵 Pre-calculated Rates for Sithira null (EMP000039):
[2025-10-27T05:48:35.434Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-27T05:48:35.435Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-27T05:48:35.435Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-27T05:48:35.436Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:48:35.437Z] [LOG] 
   📊 Full Period Working Days for Sithira null (EMP000039):
[2025-10-27T05:48:35.437Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:48:37.076Z] [LOG] 
   📊 Working Days for Expected Calculation for Sithira null (EMP000039):
[2025-10-27T05:48:37.077Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:48:37.078Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:48:37.505Z] [LOG] 
   ⏰ Calculating Completed Hours for Sithira null (EMP000039) - All completed sessions:
[2025-10-27T05:48:37.506Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:48:37.507Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:48:37.508Z] [LOG] 
      📋 Attendance Breakdown for Sithira null (EMP000039):
[2025-10-27T05:48:37.509Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:48:37.509Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:48:37.510Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:48:37.510Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:48:37.511Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:48:37.512Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:48:37.947Z] [LOG] 
      📊 Aggregated Totals for Sithira null (EMP000039):
[2025-10-27T05:48:37.948Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:48:37.949Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:48:37.950Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:48:37.950Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:48:37.951Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Sithira null (EMP000039) - completed sessions only:
[2025-10-27T05:48:37.952Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:48:37.952Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:48:37.953Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:48:37.954Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:48:37.955Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Sithira null (EMP000039) - completed sessions only:
[2025-10-27T05:48:37.956Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:48:37.957Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:48:37.957Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:48:37.958Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:48:37.959Z] [LOG] 
   💵 EXPECTED Earned Salary for Sithira null (EMP000039) - until NOW:
[2025-10-27T05:48:37.960Z] [LOG]       Weekday: 144.50h × Rs.188.24 = Rs.27200.68
[2025-10-27T05:48:37.961Z] [LOG]       Saturday: 18.00h × Rs.355.56 = Rs.6400.08
[2025-10-27T05:48:37.961Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:48:37.962Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:48:37.963Z] [LOG]       Total Expected Earned: Rs.33600.76
[2025-10-27T05:48:37.963Z] [LOG] 
   💵 ACTUAL Earned Salary for Sithira null (EMP000039) - including live session:
[2025-10-27T05:48:37.966Z] [LOG]       Weekday: 42.50h × Rs.188.24 = Rs.8000.20
[2025-10-27T05:48:37.967Z] [LOG]       Saturday: 4.50h × Rs.355.56 = Rs.1600.02
[2025-10-27T05:48:37.967Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:48:37.968Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:48:37.969Z] [LOG]       Total Actual Earned: Rs.9600.22
[2025-10-27T05:48:37.970Z] [LOG] 
   📊 FINAL CALCULATION for Sithira null (EMP000039):
[2025-10-27T05:48:37.971Z] [LOG]       Calculated At: Oct 27, 2025, 11:18:37
[2025-10-27T05:48:37.972Z] [LOG]       Expected Earned: Rs.33600.76
[2025-10-27T05:48:37.972Z] [LOG]       Actual Earned: Rs.9600.22
[2025-10-27T05:48:37.973Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:48:37.974Z] [LOG]       Attendance Deduction: Rs.24000.54
[2025-10-27T05:48:37.974Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:48:37.975Z] [LOG]       📉 Shortfall for Sithira null: 115.50 hours (71.43% of expected)
[2025-10-27T05:48:37.975Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:48:37.977Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-27T05:48:37.977Z] [LOG]    Actual Earned Base: Rs.9600.22
[2025-10-27T05:48:37.978Z] [LOG]    Attendance Shortfall: Rs.24000.54
[2025-10-27T05:48:37.978Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:48:37.981Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:48:37.982Z] [LOG]    Gross Salary: 9600.220000000001
[2025-10-27T05:48:37.982Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:48:37.983Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:48:37.983Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:37.984Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:48:37.984Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:37.985Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:48:37.985Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:37.985Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:48:37.986Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:37.986Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:48:37.987Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:37.987Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:48:37.987Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:37.988Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:48:37.988Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:37.988Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:48:37.989Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:37.989Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:48:37.990Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:37.990Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:48:37.990Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:37.991Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:48:37.991Z] [LOG]    EPF/ETF calculated on: Rs.9600.22
[2025-10-27T05:48:37.992Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:48:37.992Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:48:37.993Z] [LOG] 💰 GROSS CALCULATION for Sithira null:
[2025-10-27T05:48:37.993Z] [LOG]    Base Salary: 40000
[2025-10-27T05:48:37.994Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:48:37.994Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:48:37.994Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:37.995Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:48:37.995Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:37.995Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:48:37.996Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:38.416Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:48:38.417Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:48:38.418Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:48:38.418Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:48:38.419Z] [LOG]    Actual Earned Base: Rs.9600.22
[2025-10-27T05:48:38.420Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:48:38.420Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:48:38.421Z] [LOG]    = Gross Salary: Rs.9600.22
[2025-10-27T05:48:38.422Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:48:38.423Z] [LOG]    Attendance Shortfall (Info): Rs.24000.54
[2025-10-27T05:48:38.424Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:48:38.425Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:48:38.425Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:48:38.426Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:48:38.427Z] [LOG]    Gross Salary: Rs.9600.22
[2025-10-27T05:48:38.427Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:48:38.428Z] [LOG]    = NET SALARY: Rs.9600.22
[2025-10-27T05:48:38.429Z] [LOG] 
💾 Database Update:
[2025-10-27T05:48:38.430Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:48:38.432Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:48:38.882Z] [LOG] 
📝 Components to save:
[2025-10-27T05:48:38.883Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:48:38.884Z] [LOG]    Deduction components: 1
[2025-10-27T05:48:38.885Z] [LOG] Creating components for record 062102ad-cd12-4df2-95e6-96e4214fabe6: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:48:38.887Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 9600.220000000001
}
[2025-10-27T05:48:39.287Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:48:39.731Z] [LOG] Created payroll_record_component: 169056e9-8325-497e-8337-9947deffd072 for Base Salary
[2025-10-27T05:48:39.732Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 24000.54
}
[2025-10-27T05:48:39.969Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:48:40.205Z] [LOG] Created payroll_record_component: a9374322-7325-44da-ae19-5842702b1f97 for Attendance Shortfall (Info)
[2025-10-27T05:48:40.840Z] [LOG] ✅ Financial balances updated successfully for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-27T05:48:40.840Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:48:40.841Z] [LOG] 
======================================================================
[2025-10-27T05:48:40.842Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sithira null
[2025-10-27T05:48:40.842Z] [LOG] ======================================================================
[2025-10-27T05:48:40.843Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-27T05:48:40.844Z] [LOG]    Actual Earned Base (Attendance-based): Rs.9600.22
[2025-10-27T05:48:40.844Z] [LOG]    Attendance Shortfall: Rs.24000.54
[2025-10-27T05:48:40.845Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:48:40.846Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:48:40.846Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:48:40.849Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:48:40.850Z] [LOG]    GROSS SALARY: Rs.9600.22
[2025-10-27T05:48:40.850Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:48:40.851Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:48:40.851Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:48:40.852Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:48:40.853Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:48:40.853Z] [LOG]       - Attendance Shortfall (Info): Rs.24000.54
[2025-10-27T05:48:40.854Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:48:40.855Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:48:40.855Z] [LOG]    NET SALARY: Rs.9600.22
[2025-10-27T05:48:40.856Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:48:40.857Z] [LOG] ======================================================================

[2025-10-27T05:48:40.857Z] [LOG] ✅ Sithira null: Calculation completed successfully
[2025-10-27T05:48:40.858Z] [LOG] 📊 Progress: 1/34 (2.9%)
[2025-10-27T05:48:40.859Z] [LOG] 
🧮 Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-27T05:48:40.860Z] [LOG] 📋 Record ID: 06643c8c-e5f1-4fe9-a500-671b80523b9b
[2025-10-27T05:48:40.860Z] [LOG] 
======================================================================
[2025-10-27T05:48:40.861Z] [LOG] 🧮 CALCULATING PAYROLL: Viruna Damsiha Cooray null (EMP000038)
[2025-10-27T05:48:40.862Z] [LOG] ======================================================================
[2025-10-27T05:48:41.665Z] [LOG] 🔍 Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-27T05:48:41.666Z] [LOG]    Total components: 13
[2025-10-27T05:48:41.667Z] [LOG]    Applicable components: 13
[2025-10-27T05:48:41.667Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T05:48:42.861Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:48:42.862Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:48:43.062Z] [LOG] 📊 Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-27T05:48:43.280Z] [LOG] 📊 Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-27T05:48:43.483Z] [LOG] 📊 Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-27T05:48:43.484Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:48:43.485Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:48:43.882Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:48:43.883Z] [LOG]    👤 Employee: Viruna Damsiha Cooray null (EMP000038)
[2025-10-27T05:48:43.883Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:48:43.884Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:48:43.885Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T05:48:43.885Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:48:44.087Z] [LOG] 
   💵 Pre-calculated Rates for Viruna Damsiha Cooray null (EMP000038):
[2025-10-27T05:48:44.088Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-27T05:48:44.088Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-27T05:48:44.089Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-27T05:48:44.090Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:48:44.090Z] [LOG] 
   📊 Full Period Working Days for Viruna Damsiha Cooray null (EMP000038):
[2025-10-27T05:48:44.091Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:48:44.755Z] [LOG] 
   📊 Working Days for Expected Calculation for Viruna Damsiha Cooray null (EMP000038):
[2025-10-27T05:48:44.755Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:48:44.755Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:48:44.961Z] [LOG] 
   ⏰ Calculating Completed Hours for Viruna Damsiha Cooray null (EMP000038) - All completed sessions:
[2025-10-27T05:48:44.962Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:48:44.962Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:48:44.962Z] [LOG] 
      📋 Attendance Breakdown for Viruna Damsiha Cooray null (EMP000038):
[2025-10-27T05:48:44.962Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:48:44.963Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:48:44.963Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:48:44.963Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:48:44.963Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:48:44.963Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:48:45.165Z] [LOG] 
      📊 Aggregated Totals for Viruna Damsiha Cooray null (EMP000038):
[2025-10-27T05:48:45.166Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:48:45.167Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:48:45.167Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:48:45.168Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:48:45.169Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Viruna Damsiha Cooray null (EMP000038) - completed sessions only:
[2025-10-27T05:48:45.169Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:48:45.170Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:48:45.171Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:48:45.172Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:48:45.173Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Viruna Damsiha Cooray null (EMP000038) - completed sessions only:
[2025-10-27T05:48:45.174Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:48:45.174Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:48:45.175Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:48:45.175Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:48:45.176Z] [LOG] 
   💵 EXPECTED Earned Salary for Viruna Damsiha Cooray null (EMP000038) - until NOW:
[2025-10-27T05:48:45.177Z] [LOG]       Weekday: 144.50h × Rs.235.29 = Rs.33999.40
[2025-10-27T05:48:45.178Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-27T05:48:45.178Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:48:45.179Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:48:45.180Z] [LOG]       Total Expected Earned: Rs.41999.32
[2025-10-27T05:48:45.181Z] [LOG] 
   💵 ACTUAL Earned Salary for Viruna Damsiha Cooray null (EMP000038) - including live session:
[2025-10-27T05:48:45.183Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-27T05:48:45.184Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-27T05:48:45.185Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:48:45.185Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:48:45.186Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-27T05:48:45.187Z] [LOG] 
   📊 FINAL CALCULATION for Viruna Damsiha Cooray null (EMP000038):
[2025-10-27T05:48:45.188Z] [LOG]       Calculated At: Oct 27, 2025, 11:18:45
[2025-10-27T05:48:45.189Z] [LOG]       Expected Earned: Rs.41999.32
[2025-10-27T05:48:45.190Z] [LOG]       Actual Earned: Rs.11999.80
[2025-10-27T05:48:45.191Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:48:45.191Z] [LOG]       Attendance Deduction: Rs.29999.52
[2025-10-27T05:48:45.192Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:48:45.192Z] [LOG]       📉 Shortfall for Viruna Damsiha Cooray null: 115.50 hours (71.43% of expected)
[2025-10-27T05:48:45.193Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:48:45.194Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:48:45.195Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:48:45.195Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:48:45.196Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:48:45.197Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:48:45.199Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-27T05:48:45.200Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:48:45.201Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:48:45.201Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:45.202Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:48:45.203Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:45.203Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:48:45.204Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:45.205Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:48:45.206Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:45.206Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:48:45.207Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:45.207Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:48:45.208Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:45.209Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:48:45.209Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:45.210Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:48:45.210Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:45.211Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:48:45.211Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:45.212Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:48:45.212Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:45.212Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:48:45.213Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-27T05:48:45.213Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:48:45.214Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:48:45.215Z] [LOG] 💰 GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-27T05:48:45.215Z] [LOG]    Base Salary: 50000
[2025-10-27T05:48:45.216Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:48:45.216Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:48:45.216Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:45.217Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:48:45.217Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:45.218Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:48:45.218Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:45.426Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:48:45.426Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:48:45.427Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:48:45.428Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:48:45.428Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:48:45.429Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:48:45.430Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:48:45.431Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-27T05:48:45.432Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:48:45.433Z] [LOG]    Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:48:45.434Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:48:45.435Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:48:45.435Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:48:45.436Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:48:45.437Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-27T05:48:45.437Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:48:45.439Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-27T05:48:45.439Z] [LOG] 
💾 Database Update:
[2025-10-27T05:48:45.440Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:48:45.441Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:48:45.645Z] [LOG] 
📝 Components to save:
[2025-10-27T05:48:45.646Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:48:45.646Z] [LOG]    Deduction components: 1
[2025-10-27T05:48:45.647Z] [LOG] Creating components for record 06643c8c-e5f1-4fe9-a500-671b80523b9b: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:48:45.650Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-27T05:48:45.849Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:48:46.065Z] [LOG] Created payroll_record_component: e225f467-6a98-450f-a717-6f72db1751b3 for Base Salary
[2025-10-27T05:48:46.066Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 29999.519999999997
}
[2025-10-27T05:48:46.297Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:48:46.513Z] [LOG] Created payroll_record_component: f8396430-40b9-4f93-a6f8-f0527f843641 for Attendance Shortfall (Info)
[2025-10-27T05:48:46.972Z] [LOG] ✅ Financial balances updated successfully for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-27T05:48:46.973Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:48:46.973Z] [LOG] 
======================================================================
[2025-10-27T05:48:46.974Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Viruna Damsiha Cooray null
[2025-10-27T05:48:46.975Z] [LOG] ======================================================================
[2025-10-27T05:48:46.975Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:48:46.976Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-27T05:48:46.976Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:48:46.977Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:48:46.978Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:48:46.978Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:48:46.979Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:48:46.980Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-27T05:48:46.982Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:48:46.983Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:48:46.984Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:48:46.985Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:48:46.985Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:48:46.986Z] [LOG]       - Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:48:46.986Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:48:46.987Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:48:46.988Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-27T05:48:46.988Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:48:46.989Z] [LOG] ======================================================================

[2025-10-27T05:48:46.990Z] [LOG] ✅ Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-27T05:48:46.990Z] [LOG] 📊 Progress: 2/34 (5.9%)
[2025-10-27T05:48:46.991Z] [LOG] 
🧮 Processing: Prasanthan null (EMP000001)
[2025-10-27T05:48:46.992Z] [LOG] 📋 Record ID: 12f25d13-312e-4390-b9fa-44379c6c58f2
[2025-10-27T05:48:46.993Z] [LOG] 
======================================================================
[2025-10-27T05:48:46.994Z] [LOG] 🧮 CALCULATING PAYROLL: Prasanthan null (EMP000001)
[2025-10-27T05:48:46.994Z] [LOG] ======================================================================
[2025-10-27T05:48:47.801Z] [LOG] 🔍 Component filtering for employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-27T05:48:47.802Z] [LOG]    Total components: 13
[2025-10-27T05:48:47.803Z] [LOG]    Applicable components: 13
[2025-10-27T05:48:47.803Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-27T05:48:49.227Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:48:49.228Z] [LOG] 🔄 Processing financial records for employee 014397c7-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:48:49.438Z] [LOG] 📊 Found 0 active loans for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-27T05:48:49.646Z] [LOG] 📊 Found 0 active advances for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-27T05:48:49.861Z] [LOG] 📊 Found 0 approved bonuses for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-27T05:48:49.862Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:48:49.863Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:48:50.266Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:48:50.267Z] [LOG]    👤 Employee: Prasanthan null (EMP000001)
[2025-10-27T05:48:50.268Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:48:50.268Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:48:50.269Z] [LOG]    Base Salary (Full Month): Rs.150000.00
[2025-10-27T05:48:50.269Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:48:50.498Z] [LOG] 
   💵 Pre-calculated Rates for Prasanthan null (EMP000001):
[2025-10-27T05:48:50.499Z] [LOG]       Daily Salary: Rs.6000.00
[2025-10-27T05:48:50.499Z] [LOG]       Weekday Hourly Rate: Rs.705.88
[2025-10-27T05:48:50.500Z] [LOG]       Saturday Hourly Rate: Rs.1333.33
[2025-10-27T05:48:50.500Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:48:50.500Z] [LOG] 
   📊 Full Period Working Days for Prasanthan null (EMP000001):
[2025-10-27T05:48:50.501Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:48:51.761Z] [LOG] 
   📊 Working Days for Expected Calculation for Prasanthan null (EMP000001):
[2025-10-27T05:48:51.762Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:48:51.762Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:48:51.974Z] [LOG] 
   ⏰ Calculating Completed Hours for Prasanthan null (EMP000001) - All completed sessions:
[2025-10-27T05:48:51.974Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:48:51.975Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:48:51.976Z] [LOG] 
      📋 Attendance Breakdown for Prasanthan null (EMP000001):
[2025-10-27T05:48:51.976Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:48:51.977Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:48:51.978Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:48:51.978Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:48:51.979Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:48:51.979Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:48:52.193Z] [LOG] 
      📊 Aggregated Totals for Prasanthan null (EMP000001):
[2025-10-27T05:48:52.194Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:48:52.194Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:48:52.195Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:48:52.196Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:48:52.196Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Prasanthan null (EMP000001) - completed sessions only:
[2025-10-27T05:48:52.200Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:48:52.201Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:48:52.201Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:48:52.202Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:48:52.203Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Prasanthan null (EMP000001) - completed sessions only:
[2025-10-27T05:48:52.203Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:48:52.204Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:48:52.205Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:48:52.206Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:48:52.206Z] [LOG] 
   💵 EXPECTED Earned Salary for Prasanthan null (EMP000001) - until NOW:
[2025-10-27T05:48:52.207Z] [LOG]       Weekday: 144.50h × Rs.705.88 = Rs.101999.66
[2025-10-27T05:48:52.208Z] [LOG]       Saturday: 18.00h × Rs.1333.33 = Rs.23999.94
[2025-10-27T05:48:52.208Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:48:52.209Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:48:52.210Z] [LOG]       Total Expected Earned: Rs.125999.60
[2025-10-27T05:48:52.210Z] [LOG] 
   💵 ACTUAL Earned Salary for Prasanthan null (EMP000001) - including live session:
[2025-10-27T05:48:52.211Z] [LOG]       Weekday: 42.50h × Rs.705.88 = Rs.29999.90
[2025-10-27T05:48:52.212Z] [LOG]       Saturday: 4.50h × Rs.1333.33 = Rs.5999.98
[2025-10-27T05:48:52.212Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:48:52.213Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:48:52.216Z] [LOG]       Total Actual Earned: Rs.35999.89
[2025-10-27T05:48:52.218Z] [LOG] 
   📊 FINAL CALCULATION for Prasanthan null (EMP000001):
[2025-10-27T05:48:52.219Z] [LOG]       Calculated At: Oct 27, 2025, 11:18:52
[2025-10-27T05:48:52.220Z] [LOG]       Expected Earned: Rs.125999.60
[2025-10-27T05:48:52.220Z] [LOG]       Actual Earned: Rs.35999.89
[2025-10-27T05:48:52.221Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:48:52.222Z] [LOG]       Attendance Deduction: Rs.89999.71
[2025-10-27T05:48:52.222Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:48:52.223Z] [LOG]       📉 Shortfall for Prasanthan null: 115.50 hours (71.43% of expected)
[2025-10-27T05:48:52.224Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:48:52.225Z] [LOG]    Base Salary (Full): Rs.150000.00
[2025-10-27T05:48:52.225Z] [LOG]    Actual Earned Base: Rs.35999.89
[2025-10-27T05:48:52.226Z] [LOG]    Attendance Shortfall: Rs.89999.71
[2025-10-27T05:48:52.226Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:48:52.227Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:48:52.228Z] [LOG]    Gross Salary: 35999.885
[2025-10-27T05:48:52.228Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:48:52.229Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:48:52.230Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:52.230Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:48:52.232Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:52.232Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:48:52.232Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:52.233Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:48:52.233Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:52.234Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:48:52.234Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:52.234Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:48:52.235Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:52.235Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:48:52.235Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:52.235Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:48:52.236Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:52.236Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:48:52.237Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:52.237Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:48:52.237Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:52.238Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:48:52.239Z] [LOG]    EPF/ETF calculated on: Rs.35999.89
[2025-10-27T05:48:52.239Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:48:52.239Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:48:52.240Z] [LOG] 💰 GROSS CALCULATION for Prasanthan null:
[2025-10-27T05:48:52.240Z] [LOG]    Base Salary: 150000
[2025-10-27T05:48:52.240Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:48:52.241Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:48:52.241Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:52.241Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:48:52.242Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:52.243Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:48:52.246Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:52.873Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:48:52.874Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:48:52.875Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:48:52.875Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:48:52.876Z] [LOG]    Actual Earned Base: Rs.35999.89
[2025-10-27T05:48:52.876Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:48:52.877Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:48:52.878Z] [LOG]    = Gross Salary: Rs.35999.89
[2025-10-27T05:48:52.878Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:48:52.881Z] [LOG]    Attendance Shortfall (Info): Rs.89999.71
[2025-10-27T05:48:52.882Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:48:52.883Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:48:52.883Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:48:52.884Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:48:52.885Z] [LOG]    Gross Salary: Rs.35999.89
[2025-10-27T05:48:52.885Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:48:52.886Z] [LOG]    = NET SALARY: Rs.35999.89
[2025-10-27T05:48:52.887Z] [LOG] 
💾 Database Update:
[2025-10-27T05:48:52.887Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:48:52.888Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:48:53.098Z] [LOG] 
📝 Components to save:
[2025-10-27T05:48:53.099Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:48:53.100Z] [LOG]    Deduction components: 1
[2025-10-27T05:48:53.100Z] [LOG] Creating components for record 12f25d13-312e-4390-b9fa-44379c6c58f2: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:48:53.102Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 35999.885
}
[2025-10-27T05:48:53.305Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:48:53.518Z] [LOG] Created payroll_record_component: 1ce15412-a914-403d-b94d-7d0100a1e84c for Base Salary
[2025-10-27T05:48:53.519Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 89999.715
}
[2025-10-27T05:48:53.718Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:48:53.922Z] [LOG] Created payroll_record_component: 54205d0a-0552-4612-9aff-0310de41909e for Attendance Shortfall (Info)
[2025-10-27T05:48:54.357Z] [LOG] ✅ Financial balances updated successfully for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-27T05:48:54.358Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:48:54.359Z] [LOG] 
======================================================================
[2025-10-27T05:48:54.360Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Prasanthan null
[2025-10-27T05:48:54.360Z] [LOG] ======================================================================
[2025-10-27T05:48:54.361Z] [LOG]    Base Salary (Full): Rs.150000.00
[2025-10-27T05:48:54.361Z] [LOG]    Actual Earned Base (Attendance-based): Rs.35999.89
[2025-10-27T05:48:54.362Z] [LOG]    Attendance Shortfall: Rs.89999.71
[2025-10-27T05:48:54.363Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:48:54.363Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:48:54.364Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:48:54.365Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:48:54.366Z] [LOG]    GROSS SALARY: Rs.35999.89
[2025-10-27T05:48:54.367Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:48:54.367Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:48:54.368Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:48:54.369Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:48:54.369Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:48:54.370Z] [LOG]       - Attendance Shortfall (Info): Rs.89999.71
[2025-10-27T05:48:54.371Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:48:54.371Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:48:54.372Z] [LOG]    NET SALARY: Rs.35999.89
[2025-10-27T05:48:54.373Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:48:54.373Z] [LOG] ======================================================================

[2025-10-27T05:48:54.374Z] [LOG] ✅ Prasanthan null: Calculation completed successfully
[2025-10-27T05:48:54.375Z] [LOG] 📊 Progress: 3/34 (8.8%)
[2025-10-27T05:48:54.375Z] [LOG] 
🧮 Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-27T05:48:54.376Z] [LOG] 📋 Record ID: 2033fa52-9d23-4cff-97ab-f2e8598c8000
[2025-10-27T05:48:54.377Z] [LOG] 
======================================================================
[2025-10-27T05:48:54.378Z] [LOG] 🧮 CALCULATING PAYROLL: R. D.A Kaushalya null (EMP000044)
[2025-10-27T05:48:54.378Z] [LOG] ======================================================================
[2025-10-27T05:48:55.186Z] [LOG] 🔍 Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-27T05:48:55.187Z] [LOG]    Total components: 13
[2025-10-27T05:48:55.187Z] [LOG]    Applicable components: 13
[2025-10-27T05:48:55.188Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T05:48:56.405Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:48:56.406Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:48:56.603Z] [LOG] 📊 Found 0 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-27T05:48:56.806Z] [LOG] 📊 Found 0 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-27T05:48:57.025Z] [LOG] 📊 Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-27T05:48:57.026Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:48:57.027Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:48:57.461Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:48:57.462Z] [LOG]    👤 Employee: R. D.A Kaushalya null (EMP000044)
[2025-10-27T05:48:57.463Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:48:57.463Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:48:57.464Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T05:48:57.465Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:48:57.705Z] [LOG] 
   💵 Pre-calculated Rates for R. D.A Kaushalya null (EMP000044):
[2025-10-27T05:48:57.705Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-27T05:48:57.706Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-27T05:48:57.707Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-27T05:48:57.707Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:48:57.708Z] [LOG] 
   📊 Full Period Working Days for R. D.A Kaushalya null (EMP000044):
[2025-10-27T05:48:57.709Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:48:58.352Z] [LOG] 
   📊 Working Days for Expected Calculation for R. D.A Kaushalya null (EMP000044):
[2025-10-27T05:48:58.353Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:48:58.353Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:48:58.555Z] [LOG] 
   ⏰ Calculating Completed Hours for R. D.A Kaushalya null (EMP000044) - All completed sessions:
[2025-10-27T05:48:58.555Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:48:58.556Z] [LOG]       Total completed sessions found: 5
[2025-10-27T05:48:58.557Z] [LOG] 
      📋 Attendance Breakdown for R. D.A Kaushalya null (EMP000044):
[2025-10-27T05:48:58.557Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:48:58.558Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:48:58.559Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:48:58.559Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:48:58.560Z] [LOG]          5. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:48:59.199Z] [LOG] 
      📊 Aggregated Totals for R. D.A Kaushalya null (EMP000044):
[2025-10-27T05:48:59.200Z] [LOG]          Weekday: 34.00h
[2025-10-27T05:48:59.201Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:48:59.201Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:48:59.202Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:48:59.202Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for R. D.A Kaushalya null (EMP000044) - completed sessions only:
[2025-10-27T05:48:59.203Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:48:59.204Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:48:59.205Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:48:59.205Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:48:59.206Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for R. D.A Kaushalya null (EMP000044) - completed sessions only:
[2025-10-27T05:48:59.207Z] [LOG]       Weekday: 34.00h
[2025-10-27T05:48:59.208Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:48:59.209Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:48:59.209Z] [LOG]       Total Actual: 38.50h
[2025-10-27T05:48:59.210Z] [LOG] 
   💵 EXPECTED Earned Salary for R. D.A Kaushalya null (EMP000044) - until NOW:
[2025-10-27T05:48:59.211Z] [LOG]       Weekday: 144.50h × Rs.235.29 = Rs.33999.40
[2025-10-27T05:48:59.212Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-27T05:48:59.213Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:48:59.213Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:48:59.214Z] [LOG]       Total Expected Earned: Rs.41999.32
[2025-10-27T05:48:59.214Z] [LOG] 
   💵 ACTUAL Earned Salary for R. D.A Kaushalya null (EMP000044) - including live session:
[2025-10-27T05:48:59.216Z] [LOG]       Weekday: 34.00h × Rs.235.29 = Rs.7999.86
[2025-10-27T05:48:59.216Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-27T05:48:59.217Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:48:59.218Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:48:59.218Z] [LOG]       Total Actual Earned: Rs.9999.84
[2025-10-27T05:48:59.220Z] [LOG] 
   📊 FINAL CALCULATION for R. D.A Kaushalya null (EMP000044):
[2025-10-27T05:48:59.221Z] [LOG]       Calculated At: Oct 27, 2025, 11:18:59
[2025-10-27T05:48:59.221Z] [LOG]       Expected Earned: Rs.41999.32
[2025-10-27T05:48:59.222Z] [LOG]       Actual Earned: Rs.9999.84
[2025-10-27T05:48:59.223Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:48:59.223Z] [LOG]       Attendance Deduction: Rs.31999.48
[2025-10-27T05:48:59.224Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:48:59.225Z] [LOG]       📉 Shortfall for R. D.A Kaushalya null: 124.00 hours (76.19% of expected)
[2025-10-27T05:48:59.225Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:48:59.227Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:48:59.227Z] [LOG]    Actual Earned Base: Rs.9999.84
[2025-10-27T05:48:59.228Z] [LOG]    Attendance Shortfall: Rs.31999.48
[2025-10-27T05:48:59.229Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:48:59.229Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:48:59.230Z] [LOG]    Gross Salary: 9999.84
[2025-10-27T05:48:59.231Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:48:59.231Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:48:59.232Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:59.233Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:48:59.234Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:59.235Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:48:59.235Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:59.236Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:48:59.236Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:59.237Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:48:59.238Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:59.238Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:48:59.239Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:59.240Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:48:59.240Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:59.241Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:48:59.241Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:59.242Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:48:59.243Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:59.243Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:48:59.244Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:59.245Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:48:59.245Z] [LOG]    EPF/ETF calculated on: Rs.9999.84
[2025-10-27T05:48:59.246Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:48:59.247Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:48:59.248Z] [LOG] 💰 GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-27T05:48:59.249Z] [LOG]    Base Salary: 50000
[2025-10-27T05:48:59.250Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:48:59.250Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:48:59.251Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:59.251Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:48:59.251Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:59.252Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:48:59.252Z] [LOG]    Fixed amount: 0
[2025-10-27T05:48:59.471Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:48:59.472Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:48:59.472Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:48:59.473Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:48:59.474Z] [LOG]    Actual Earned Base: Rs.9999.84
[2025-10-27T05:48:59.474Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:48:59.475Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:48:59.475Z] [LOG]    = Gross Salary: Rs.9999.84
[2025-10-27T05:48:59.476Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:48:59.477Z] [LOG]    Attendance Shortfall (Info): Rs.31999.48
[2025-10-27T05:48:59.478Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:48:59.479Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:48:59.479Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:48:59.480Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:48:59.481Z] [LOG]    Gross Salary: Rs.9999.84
[2025-10-27T05:48:59.482Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:48:59.482Z] [LOG]    = NET SALARY: Rs.9999.84
[2025-10-27T05:48:59.483Z] [LOG] 
💾 Database Update:
[2025-10-27T05:48:59.484Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:48:59.485Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:48:59.701Z] [LOG] 
📝 Components to save:
[2025-10-27T05:48:59.702Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:48:59.703Z] [LOG]    Deduction components: 1
[2025-10-27T05:48:59.704Z] [LOG] Creating components for record 2033fa52-9d23-4cff-97ab-f2e8598c8000: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:48:59.705Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 9999.84
}
[2025-10-27T05:48:59.915Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:49:00.551Z] [LOG] Created payroll_record_component: a44c839d-63ac-4d77-bcb8-fe21aab8b618 for Base Salary
[2025-10-27T05:49:00.552Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 31999.484999999997
}
[2025-10-27T05:49:00.763Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:49:01.397Z] [LOG] Created payroll_record_component: b2b7a1e4-c9c5-4672-8b3b-4c5e04b16211 for Attendance Shortfall (Info)
[2025-10-27T05:49:01.824Z] [LOG] ✅ Financial balances updated successfully for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:01.825Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:49:01.825Z] [LOG] 
======================================================================
[2025-10-27T05:49:01.826Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: R. D.A Kaushalya null
[2025-10-27T05:49:01.827Z] [LOG] ======================================================================
[2025-10-27T05:49:01.827Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:49:01.828Z] [LOG]    Actual Earned Base (Attendance-based): Rs.9999.84
[2025-10-27T05:49:01.828Z] [LOG]    Attendance Shortfall: Rs.31999.48
[2025-10-27T05:49:01.829Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:01.830Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:49:01.831Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:49:01.832Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:01.833Z] [LOG]    GROSS SALARY: Rs.9999.84
[2025-10-27T05:49:01.834Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:01.835Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:49:01.835Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:49:01.836Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:49:01.837Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:49:01.837Z] [LOG]       - Attendance Shortfall (Info): Rs.31999.48
[2025-10-27T05:49:01.838Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:49:01.839Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:01.839Z] [LOG]    NET SALARY: Rs.9999.84
[2025-10-27T05:49:01.840Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:49:01.840Z] [LOG] ======================================================================

[2025-10-27T05:49:01.841Z] [LOG] ✅ R. D.A Kaushalya null: Calculation completed successfully
[2025-10-27T05:49:01.842Z] [LOG] 📊 Progress: 4/34 (11.8%)
[2025-10-27T05:49:01.843Z] [LOG] 
🧮 Processing: Rasanga null (EMP000028)
[2025-10-27T05:49:01.844Z] [LOG] 📋 Record ID: 2b872c1e-3a93-4da4-a5c5-08718a9e0c65
[2025-10-27T05:49:01.844Z] [LOG] 
======================================================================
[2025-10-27T05:49:01.845Z] [LOG] 🧮 CALCULATING PAYROLL: Rasanga null (EMP000028)
[2025-10-27T05:49:01.846Z] [LOG] ======================================================================
[2025-10-27T05:49:02.693Z] [LOG] 🔍 Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-27T05:49:02.693Z] [LOG]    Total components: 13
[2025-10-27T05:49:02.694Z] [LOG]    Applicable components: 13
[2025-10-27T05:49:02.694Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-27T05:49:04.351Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:49:04.352Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:49:04.569Z] [LOG] 📊 Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:04.784Z] [LOG] 📊 Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:04.995Z] [LOG] 📊 Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:04.996Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:49:04.997Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:49:05.408Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:49:05.409Z] [LOG]    👤 Employee: Rasanga null (EMP000028)
[2025-10-27T05:49:05.409Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:49:05.410Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:49:05.410Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T05:49:05.411Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:49:05.617Z] [LOG] 
   💵 Pre-calculated Rates for Rasanga null (EMP000028):
[2025-10-27T05:49:05.618Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-27T05:49:05.619Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-27T05:49:05.619Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-27T05:49:05.620Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:49:05.621Z] [LOG] 
   📊 Full Period Working Days for Rasanga null (EMP000028):
[2025-10-27T05:49:05.621Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:49:06.230Z] [LOG] 
   📊 Working Days for Expected Calculation for Rasanga null (EMP000028):
[2025-10-27T05:49:06.231Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:49:06.231Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:49:06.438Z] [LOG] 
   ⏰ Calculating Completed Hours for Rasanga null (EMP000028) - All completed sessions:
[2025-10-27T05:49:06.439Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:49:06.440Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:49:06.446Z] [LOG] 
      📋 Attendance Breakdown for Rasanga null (EMP000028):
[2025-10-27T05:49:06.449Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:49:06.449Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:49:06.450Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:49:06.450Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:49:06.451Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:49:06.451Z] [LOG]          6. 2025-10-24 (Weekday): 7.50h
[2025-10-27T05:49:06.656Z] [LOG] 
      📊 Aggregated Totals for Rasanga null (EMP000028):
[2025-10-27T05:49:06.657Z] [LOG]          Weekday: 41.50h
[2025-10-27T05:49:06.658Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:49:06.658Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:49:06.659Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:49:06.660Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Rasanga null (EMP000028) - completed sessions only:
[2025-10-27T05:49:06.660Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:49:06.661Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:49:06.662Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:49:06.662Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:49:06.663Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Rasanga null (EMP000028) - completed sessions only:
[2025-10-27T05:49:06.664Z] [LOG]       Weekday: 41.50h
[2025-10-27T05:49:06.665Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:49:06.665Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:49:06.666Z] [LOG]       Total Actual: 46.00h
[2025-10-27T05:49:06.667Z] [LOG] 
   💵 EXPECTED Earned Salary for Rasanga null (EMP000028) - until NOW:
[2025-10-27T05:49:06.667Z] [LOG]       Weekday: 144.50h × Rs.235.29 = Rs.33999.40
[2025-10-27T05:49:06.668Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-27T05:49:06.669Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:06.669Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:06.670Z] [LOG]       Total Expected Earned: Rs.41999.32
[2025-10-27T05:49:06.670Z] [LOG] 
   💵 ACTUAL Earned Salary for Rasanga null (EMP000028) - including live session:
[2025-10-27T05:49:06.671Z] [LOG]       Weekday: 41.50h × Rs.235.29 = Rs.9764.53
[2025-10-27T05:49:06.672Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-27T05:49:06.673Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:06.673Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:06.674Z] [LOG]       Total Actual Earned: Rs.11764.51
[2025-10-27T05:49:06.675Z] [LOG] 
   📊 FINAL CALCULATION for Rasanga null (EMP000028):
[2025-10-27T05:49:06.676Z] [LOG]       Calculated At: Oct 27, 2025, 11:19:06
[2025-10-27T05:49:06.677Z] [LOG]       Expected Earned: Rs.41999.32
[2025-10-27T05:49:06.677Z] [LOG]       Actual Earned: Rs.11764.51
[2025-10-27T05:49:06.678Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:06.679Z] [LOG]       Attendance Deduction: Rs.30234.81
[2025-10-27T05:49:06.679Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:49:06.680Z] [LOG]       📉 Shortfall for Rasanga null: 116.50 hours (71.99% of expected)
[2025-10-27T05:49:06.681Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:49:06.682Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:49:06.682Z] [LOG]    Actual Earned Base: Rs.11764.51
[2025-10-27T05:49:06.683Z] [LOG]    Attendance Shortfall: Rs.30234.81
[2025-10-27T05:49:06.684Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:49:06.684Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:49:06.685Z] [LOG]    Gross Salary: 11764.515
[2025-10-27T05:49:06.686Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:49:06.686Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:49:06.687Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:06.688Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:49:06.688Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:06.689Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:49:06.690Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:06.690Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:49:06.691Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:06.691Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:49:06.691Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:06.692Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:49:06.692Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:06.692Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:49:06.693Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:06.693Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:49:06.693Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:06.694Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:49:06.694Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:06.694Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:49:06.695Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:06.695Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:49:06.695Z] [LOG]    EPF/ETF calculated on: Rs.11764.51
[2025-10-27T05:49:06.696Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:49:06.696Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:49:06.696Z] [LOG] 💰 GROSS CALCULATION for Rasanga null:
[2025-10-27T05:49:06.697Z] [LOG]    Base Salary: 50000
[2025-10-27T05:49:06.697Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:49:06.698Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:49:06.698Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:06.698Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:49:06.699Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:06.699Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:49:06.700Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:06.908Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:49:06.909Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:49:06.909Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:49:06.910Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:49:06.910Z] [LOG]    Actual Earned Base: Rs.11764.51
[2025-10-27T05:49:06.911Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:49:06.912Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:49:06.912Z] [LOG]    = Gross Salary: Rs.11764.51
[2025-10-27T05:49:06.913Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:49:06.914Z] [LOG]    Attendance Shortfall (Info): Rs.30234.81
[2025-10-27T05:49:06.914Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:49:06.916Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:49:06.916Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:49:06.917Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:49:06.918Z] [LOG]    Gross Salary: Rs.11764.51
[2025-10-27T05:49:06.918Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:49:06.919Z] [LOG]    = NET SALARY: Rs.11764.51
[2025-10-27T05:49:06.920Z] [LOG] 
💾 Database Update:
[2025-10-27T05:49:06.921Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:49:06.921Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:49:07.146Z] [LOG] 
📝 Components to save:
[2025-10-27T05:49:07.147Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:49:07.148Z] [LOG]    Deduction components: 1
[2025-10-27T05:49:07.149Z] [LOG] Creating components for record 2b872c1e-3a93-4da4-a5c5-08718a9e0c65: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:49:07.150Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11764.515
}
[2025-10-27T05:49:07.358Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:49:07.568Z] [LOG] Created payroll_record_component: 6acd2dd3-5506-4041-bd8f-89ada2052b4c for Base Salary
[2025-10-27T05:49:07.568Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 30234.809999999998
}
[2025-10-27T05:49:07.774Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:49:07.983Z] [LOG] Created payroll_record_component: cdbd54bc-de7c-410f-8063-3b7ad5a03e19 for Attendance Shortfall (Info)
[2025-10-27T05:49:08.388Z] [LOG] ✅ Financial balances updated successfully for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:08.389Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:49:08.390Z] [LOG] 
======================================================================
[2025-10-27T05:49:08.390Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Rasanga null
[2025-10-27T05:49:08.391Z] [LOG] ======================================================================
[2025-10-27T05:49:08.392Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:49:08.392Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11764.51
[2025-10-27T05:49:08.393Z] [LOG]    Attendance Shortfall: Rs.30234.81
[2025-10-27T05:49:08.394Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:08.395Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:49:08.395Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:49:08.396Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:08.397Z] [LOG]    GROSS SALARY: Rs.11764.51
[2025-10-27T05:49:08.398Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:08.398Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:49:08.399Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:49:08.400Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:49:08.400Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:49:08.401Z] [LOG]       - Attendance Shortfall (Info): Rs.30234.81
[2025-10-27T05:49:08.402Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:49:08.402Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:08.403Z] [LOG]    NET SALARY: Rs.11764.51
[2025-10-27T05:49:08.404Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:49:08.404Z] [LOG] ======================================================================

[2025-10-27T05:49:08.405Z] [LOG] ✅ Rasanga null: Calculation completed successfully
[2025-10-27T05:49:08.406Z] [LOG] 📊 Progress: 5/34 (14.7%)
[2025-10-27T05:49:08.406Z] [LOG] 
🧮 Processing: Chemil null (EMP000040)
[2025-10-27T05:49:08.407Z] [LOG] 📋 Record ID: 32f8bf01-a99e-4f3b-a5c9-c936de514149
[2025-10-27T05:49:08.408Z] [LOG] 
======================================================================
[2025-10-27T05:49:08.408Z] [LOG] 🧮 CALCULATING PAYROLL: Chemil null (EMP000040)
[2025-10-27T05:49:08.409Z] [LOG] ======================================================================
[2025-10-27T05:49:09.285Z] [LOG] 🔍 Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-27T05:49:09.285Z] [LOG]    Total components: 13
[2025-10-27T05:49:09.285Z] [LOG]    Applicable components: 13
[2025-10-27T05:49:09.286Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T05:49:10.527Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:49:10.527Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:49:10.742Z] [LOG] 📊 Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:10.945Z] [LOG] 📊 Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:11.153Z] [LOG] 📊 Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:11.168Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:49:11.169Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:49:11.579Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:49:11.581Z] [LOG]    👤 Employee: Chemil null (EMP000040)
[2025-10-27T05:49:11.582Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:49:11.583Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:49:11.583Z] [LOG]    Base Salary (Full Month): Rs.250000.00
[2025-10-27T05:49:11.584Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:49:11.790Z] [LOG] 
   💵 Pre-calculated Rates for Chemil null (EMP000040):
[2025-10-27T05:49:11.791Z] [LOG]       Daily Salary: Rs.10000.00
[2025-10-27T05:49:11.791Z] [LOG]       Weekday Hourly Rate: Rs.1176.47
[2025-10-27T05:49:11.792Z] [LOG]       Saturday Hourly Rate: Rs.2222.22
[2025-10-27T05:49:11.793Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:49:11.793Z] [LOG] 
   📊 Full Period Working Days for Chemil null (EMP000040):
[2025-10-27T05:49:11.794Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:49:12.470Z] [LOG] 
   📊 Working Days for Expected Calculation for Chemil null (EMP000040):
[2025-10-27T05:49:12.471Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:49:12.471Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:49:12.692Z] [LOG] 
   ⏰ Calculating Completed Hours for Chemil null (EMP000040) - All completed sessions:
[2025-10-27T05:49:12.693Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:49:12.693Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:49:12.694Z] [LOG] 
      📋 Attendance Breakdown for Chemil null (EMP000040):
[2025-10-27T05:49:12.695Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:49:12.696Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:49:12.696Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:49:12.697Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:49:12.698Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:49:12.699Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:49:12.933Z] [LOG] 
      📊 Aggregated Totals for Chemil null (EMP000040):
[2025-10-27T05:49:12.934Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:49:12.935Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:49:12.935Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:49:12.936Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:49:12.937Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Chemil null (EMP000040) - completed sessions only:
[2025-10-27T05:49:12.937Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:49:12.938Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:49:12.939Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:49:12.939Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:49:12.941Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Chemil null (EMP000040) - completed sessions only:
[2025-10-27T05:49:12.942Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:49:12.942Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:49:12.943Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:49:12.943Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:49:12.944Z] [LOG] 
   💵 EXPECTED Earned Salary for Chemil null (EMP000040) - until NOW:
[2025-10-27T05:49:12.945Z] [LOG]       Weekday: 144.50h × Rs.1176.47 = Rs.169999.92
[2025-10-27T05:49:12.946Z] [LOG]       Saturday: 18.00h × Rs.2222.22 = Rs.39999.96
[2025-10-27T05:49:12.946Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:12.948Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:12.950Z] [LOG]       Total Expected Earned: Rs.209999.88
[2025-10-27T05:49:12.950Z] [LOG] 
   💵 ACTUAL Earned Salary for Chemil null (EMP000040) - including live session:
[2025-10-27T05:49:12.951Z] [LOG]       Weekday: 42.50h × Rs.1176.47 = Rs.49999.97
[2025-10-27T05:49:12.952Z] [LOG]       Saturday: 4.50h × Rs.2222.22 = Rs.9999.99
[2025-10-27T05:49:12.952Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:12.953Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:12.954Z] [LOG]       Total Actual Earned: Rs.59999.96
[2025-10-27T05:49:12.955Z] [LOG] 
   📊 FINAL CALCULATION for Chemil null (EMP000040):
[2025-10-27T05:49:12.956Z] [LOG]       Calculated At: Oct 27, 2025, 11:19:12
[2025-10-27T05:49:12.956Z] [LOG]       Expected Earned: Rs.209999.88
[2025-10-27T05:49:12.957Z] [LOG]       Actual Earned: Rs.59999.96
[2025-10-27T05:49:12.958Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:12.958Z] [LOG]       Attendance Deduction: Rs.149999.91
[2025-10-27T05:49:12.959Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:49:12.960Z] [LOG]       📉 Shortfall for Chemil null: 115.50 hours (71.43% of expected)
[2025-10-27T05:49:12.960Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:49:12.961Z] [LOG]    Base Salary (Full): Rs.250000.00
[2025-10-27T05:49:12.961Z] [LOG]    Actual Earned Base: Rs.59999.96
[2025-10-27T05:49:12.962Z] [LOG]    Attendance Shortfall: Rs.149999.91
[2025-10-27T05:49:12.962Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:49:12.963Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:49:12.963Z] [LOG]    Gross Salary: 59999.965
[2025-10-27T05:49:12.963Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:49:12.965Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:49:12.965Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:12.966Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:49:12.966Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:12.966Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:49:12.967Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:12.967Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:49:12.968Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:12.968Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:49:12.968Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:12.969Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:49:12.969Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:12.970Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:49:12.970Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:12.970Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:49:12.971Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:12.971Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:49:12.972Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:12.972Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:49:12.972Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:12.973Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:49:12.973Z] [LOG]    EPF/ETF calculated on: Rs.59999.96
[2025-10-27T05:49:12.973Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:49:12.974Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:49:12.974Z] [LOG] 💰 GROSS CALCULATION for Chemil null:
[2025-10-27T05:49:12.975Z] [LOG]    Base Salary: 250000
[2025-10-27T05:49:12.975Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:49:12.975Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:49:12.976Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:12.976Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:49:12.977Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:12.977Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:49:12.977Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:13.201Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:49:13.202Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:49:13.203Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:49:13.203Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:49:13.204Z] [LOG]    Actual Earned Base: Rs.59999.96
[2025-10-27T05:49:13.205Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:49:13.205Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:49:13.206Z] [LOG]    = Gross Salary: Rs.59999.96
[2025-10-27T05:49:13.207Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:49:13.208Z] [LOG]    Attendance Shortfall (Info): Rs.149999.91
[2025-10-27T05:49:13.208Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:49:13.209Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:49:13.210Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:49:13.211Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:49:13.212Z] [LOG]    Gross Salary: Rs.59999.96
[2025-10-27T05:49:13.212Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:49:13.213Z] [LOG]    = NET SALARY: Rs.59999.96
[2025-10-27T05:49:13.213Z] [LOG] 
💾 Database Update:
[2025-10-27T05:49:13.216Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:49:13.217Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:49:13.441Z] [LOG] 
📝 Components to save:
[2025-10-27T05:49:13.442Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:49:13.443Z] [LOG]    Deduction components: 1
[2025-10-27T05:49:13.443Z] [LOG] Creating components for record 32f8bf01-a99e-4f3b-a5c9-c936de514149: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:49:13.445Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 59999.965
}
[2025-10-27T05:49:13.680Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:49:13.928Z] [LOG] Created payroll_record_component: b46d3f20-167b-437e-b98e-686fad48612a for Base Salary
[2025-10-27T05:49:13.929Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 149999.91
}
[2025-10-27T05:49:14.149Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:49:14.373Z] [LOG] Created payroll_record_component: cb19edd7-09cf-4fbb-ba55-a2c1ec437e81 for Attendance Shortfall (Info)
[2025-10-27T05:49:14.825Z] [LOG] ✅ Financial balances updated successfully for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:14.826Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:49:14.826Z] [LOG] 
======================================================================
[2025-10-27T05:49:14.827Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chemil null
[2025-10-27T05:49:14.828Z] [LOG] ======================================================================
[2025-10-27T05:49:14.828Z] [LOG]    Base Salary (Full): Rs.250000.00
[2025-10-27T05:49:14.829Z] [LOG]    Actual Earned Base (Attendance-based): Rs.59999.96
[2025-10-27T05:49:14.830Z] [LOG]    Attendance Shortfall: Rs.149999.91
[2025-10-27T05:49:14.830Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:14.832Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:49:14.833Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:49:14.834Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:14.835Z] [LOG]    GROSS SALARY: Rs.59999.96
[2025-10-27T05:49:14.836Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:14.836Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:49:14.837Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:49:14.838Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:49:14.838Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:49:14.839Z] [LOG]       - Attendance Shortfall (Info): Rs.149999.91
[2025-10-27T05:49:14.840Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:49:14.840Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:14.841Z] [LOG]    NET SALARY: Rs.59999.96
[2025-10-27T05:49:14.841Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:49:14.842Z] [LOG] ======================================================================

[2025-10-27T05:49:14.843Z] [LOG] ✅ Chemil null: Calculation completed successfully
[2025-10-27T05:49:14.843Z] [LOG] 📊 Progress: 6/34 (17.6%)
[2025-10-27T05:49:14.844Z] [LOG] 
🧮 Processing: Kaushal Thambi (EMP465256103)
[2025-10-27T05:49:14.845Z] [LOG] 📋 Record ID: 3acd8a32-1215-49ff-bbaf-e1ff7b80b05e
[2025-10-27T05:49:14.846Z] [LOG] 
======================================================================
[2025-10-27T05:49:14.847Z] [LOG] 🧮 CALCULATING PAYROLL: Kaushal Thambi (EMP465256103)
[2025-10-27T05:49:14.849Z] [LOG] ======================================================================
[2025-10-27T05:49:15.739Z] [LOG] 🔍 Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-27T05:49:15.740Z] [LOG]    Total components: 13
[2025-10-27T05:49:15.740Z] [LOG]    Applicable components: 13
[2025-10-27T05:49:15.741Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-27T05:49:17.099Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:49:17.100Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:49:17.326Z] [LOG] 📊 Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-27T05:49:17.546Z] [LOG] 📊 Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-27T05:49:17.779Z] [LOG] 📊 Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-27T05:49:17.779Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:49:17.781Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:49:18.228Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:49:18.229Z] [LOG]    👤 Employee: Kaushal Thambi (EMP465256103)
[2025-10-27T05:49:18.229Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:49:18.230Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:49:18.232Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T05:49:18.233Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:49:18.458Z] [LOG] 
   💵 Pre-calculated Rates for Kaushal Thambi (EMP465256103):
[2025-10-27T05:49:18.459Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-27T05:49:18.460Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-27T05:49:18.460Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-27T05:49:18.461Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:49:18.462Z] [LOG] 
   📊 Full Period Working Days for Kaushal Thambi (EMP465256103):
[2025-10-27T05:49:18.463Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:49:19.162Z] [LOG] 
   📊 Working Days for Expected Calculation for Kaushal Thambi (EMP465256103):
[2025-10-27T05:49:19.163Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:49:19.164Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:49:19.391Z] [LOG] 
   ⏰ Calculating Completed Hours for Kaushal Thambi (EMP465256103) - All completed sessions:
[2025-10-27T05:49:19.392Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:49:19.393Z] [LOG]       Total completed sessions found: 3
[2025-10-27T05:49:19.393Z] [LOG] 
      📋 Attendance Breakdown for Kaushal Thambi (EMP465256103):
[2025-10-27T05:49:19.394Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:49:19.395Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:49:19.395Z] [LOG]          3. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:49:19.659Z] [LOG] 
      📊 Aggregated Totals for Kaushal Thambi (EMP465256103):
[2025-10-27T05:49:19.660Z] [LOG]          Weekday: 17.00h
[2025-10-27T05:49:19.661Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:49:19.661Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:49:19.662Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:49:19.663Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Kaushal Thambi (EMP465256103) - completed sessions only:
[2025-10-27T05:49:19.664Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:49:19.665Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:49:19.666Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:49:19.667Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:49:19.668Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Kaushal Thambi (EMP465256103) - completed sessions only:
[2025-10-27T05:49:19.668Z] [LOG]       Weekday: 17.00h
[2025-10-27T05:49:19.669Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:49:19.670Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:49:19.670Z] [LOG]       Total Actual: 21.50h
[2025-10-27T05:49:19.671Z] [LOG] 
   💵 EXPECTED Earned Salary for Kaushal Thambi (EMP465256103) - until NOW:
[2025-10-27T05:49:19.672Z] [LOG]       Weekday: 144.50h × Rs.235.29 = Rs.33999.40
[2025-10-27T05:49:19.673Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-27T05:49:19.673Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:19.674Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:19.675Z] [LOG]       Total Expected Earned: Rs.41999.32
[2025-10-27T05:49:19.675Z] [LOG] 
   💵 ACTUAL Earned Salary for Kaushal Thambi (EMP465256103) - including live session:
[2025-10-27T05:49:19.676Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-27T05:49:19.677Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-27T05:49:19.677Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:19.678Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:19.679Z] [LOG]       Total Actual Earned: Rs.5999.91
[2025-10-27T05:49:19.680Z] [LOG] 
   📊 FINAL CALCULATION for Kaushal Thambi (EMP465256103):
[2025-10-27T05:49:19.681Z] [LOG]       Calculated At: Oct 27, 2025, 11:19:19
[2025-10-27T05:49:19.682Z] [LOG]       Expected Earned: Rs.41999.32
[2025-10-27T05:49:19.683Z] [LOG]       Actual Earned: Rs.5999.91
[2025-10-27T05:49:19.683Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:19.683Z] [LOG]       Attendance Deduction: Rs.35999.41
[2025-10-27T05:49:19.684Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:49:19.684Z] [LOG]       📉 Shortfall for Kaushal Thambi: 141.00 hours (85.71% of expected)
[2025-10-27T05:49:19.685Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:49:19.685Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:49:19.686Z] [LOG]    Actual Earned Base: Rs.5999.91
[2025-10-27T05:49:19.686Z] [LOG]    Attendance Shortfall: Rs.35999.41
[2025-10-27T05:49:19.686Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:49:19.687Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:49:19.687Z] [LOG]    Gross Salary: 5999.91
[2025-10-27T05:49:19.687Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:49:19.688Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:49:19.688Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:19.688Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:49:19.689Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:19.689Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:49:19.689Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:19.690Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:49:19.690Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:19.690Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:49:19.691Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:19.691Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:49:19.691Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:19.692Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:49:19.692Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:19.692Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:49:19.693Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:19.693Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:49:19.693Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:19.694Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:49:19.694Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:19.694Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:49:19.694Z] [LOG]    EPF/ETF calculated on: Rs.5999.91
[2025-10-27T05:49:19.695Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:49:19.695Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:49:19.695Z] [LOG] 💰 GROSS CALCULATION for Kaushal Thambi:
[2025-10-27T05:49:19.696Z] [LOG]    Base Salary: 50000
[2025-10-27T05:49:19.696Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:49:19.696Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:49:19.697Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:19.699Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:49:19.699Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:19.700Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:49:19.700Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:19.927Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:49:19.928Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:49:19.928Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:49:19.929Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:49:19.929Z] [LOG]    Actual Earned Base: Rs.5999.91
[2025-10-27T05:49:19.930Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:49:19.932Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:49:19.932Z] [LOG]    = Gross Salary: Rs.5999.91
[2025-10-27T05:49:19.933Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:49:19.934Z] [LOG]    Attendance Shortfall (Info): Rs.35999.41
[2025-10-27T05:49:19.935Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:49:19.936Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:49:19.936Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:49:19.937Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:49:19.938Z] [LOG]    Gross Salary: Rs.5999.91
[2025-10-27T05:49:19.938Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:49:19.939Z] [LOG]    = NET SALARY: Rs.5999.91
[2025-10-27T05:49:19.940Z] [LOG] 
💾 Database Update:
[2025-10-27T05:49:19.941Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:49:19.941Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:49:20.161Z] [LOG] 
📝 Components to save:
[2025-10-27T05:49:20.162Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:49:20.162Z] [LOG]    Deduction components: 1
[2025-10-27T05:49:20.162Z] [LOG] Creating components for record 3acd8a32-1215-49ff-bbaf-e1ff7b80b05e: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:49:20.165Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 5999.91
}
[2025-10-27T05:49:20.381Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:49:20.617Z] [LOG] Created payroll_record_component: 8aa794db-99b1-4d07-83c3-f029193524d1 for Base Salary
[2025-10-27T05:49:20.618Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 35999.41499999999
}
[2025-10-27T05:49:20.849Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:49:21.074Z] [LOG] Created payroll_record_component: 302b086a-61cb-4a64-a619-de0255560e81 for Attendance Shortfall (Info)
[2025-10-27T05:49:21.546Z] [LOG] ✅ Financial balances updated successfully for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-27T05:49:21.548Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:49:21.549Z] [LOG] 
======================================================================
[2025-10-27T05:49:21.550Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Kaushal Thambi
[2025-10-27T05:49:21.550Z] [LOG] ======================================================================
[2025-10-27T05:49:21.551Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:49:21.552Z] [LOG]    Actual Earned Base (Attendance-based): Rs.5999.91
[2025-10-27T05:49:21.552Z] [LOG]    Attendance Shortfall: Rs.35999.41
[2025-10-27T05:49:21.553Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:21.554Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:49:21.555Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:49:21.556Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:21.556Z] [LOG]    GROSS SALARY: Rs.5999.91
[2025-10-27T05:49:21.557Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:21.558Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:49:21.558Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:49:21.559Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:49:21.560Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:49:21.560Z] [LOG]       - Attendance Shortfall (Info): Rs.35999.41
[2025-10-27T05:49:21.561Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:49:21.562Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:21.562Z] [LOG]    NET SALARY: Rs.5999.91
[2025-10-27T05:49:21.563Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:49:21.565Z] [LOG] ======================================================================

[2025-10-27T05:49:21.566Z] [LOG] ✅ Kaushal Thambi: Calculation completed successfully
[2025-10-27T05:49:21.567Z] [LOG] 📊 Progress: 7/34 (20.6%)
[2025-10-27T05:49:21.568Z] [LOG] 
🧮 Processing: Ishara null (EMP000011)
[2025-10-27T05:49:21.569Z] [LOG] 📋 Record ID: 419774df-261a-4305-bd00-c7e6b03a6b03
[2025-10-27T05:49:21.569Z] [LOG] 
======================================================================
[2025-10-27T05:49:21.570Z] [LOG] 🧮 CALCULATING PAYROLL: Ishara null (EMP000011)
[2025-10-27T05:49:21.570Z] [LOG] ======================================================================
[2025-10-27T05:49:22.476Z] [LOG] 🔍 Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-27T05:49:22.477Z] [LOG]    Total components: 13
[2025-10-27T05:49:22.477Z] [LOG]    Applicable components: 13
[2025-10-27T05:49:22.478Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-27T05:49:24.322Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:49:24.323Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:49:24.546Z] [LOG] 📊 Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:24.770Z] [LOG] 📊 Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:24.998Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:24.999Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:49:25.000Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:49:25.453Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:49:25.454Z] [LOG]    👤 Employee: Ishara null (EMP000011)
[2025-10-27T05:49:25.455Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:49:25.456Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:49:25.456Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T05:49:25.457Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:49:25.681Z] [LOG] 
   💵 Pre-calculated Rates for Ishara null (EMP000011):
[2025-10-27T05:49:25.682Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-27T05:49:25.683Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-27T05:49:25.684Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-27T05:49:25.685Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:49:25.686Z] [LOG] 
   📊 Full Period Working Days for Ishara null (EMP000011):
[2025-10-27T05:49:25.687Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:49:26.414Z] [LOG] 
   📊 Working Days for Expected Calculation for Ishara null (EMP000011):
[2025-10-27T05:49:26.415Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:49:26.415Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:49:26.633Z] [LOG] 
   ⏰ Calculating Completed Hours for Ishara null (EMP000011) - All completed sessions:
[2025-10-27T05:49:26.635Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:49:26.636Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:49:26.637Z] [LOG] 
      📋 Attendance Breakdown for Ishara null (EMP000011):
[2025-10-27T05:49:26.638Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:49:26.638Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:49:26.639Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:49:26.639Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:49:26.640Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:49:26.641Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:49:26.866Z] [LOG] 
      📊 Aggregated Totals for Ishara null (EMP000011):
[2025-10-27T05:49:26.868Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:49:26.869Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:49:26.870Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:49:26.870Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:49:26.871Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ishara null (EMP000011) - completed sessions only:
[2025-10-27T05:49:26.872Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:49:26.872Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:49:26.873Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:49:26.874Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:49:26.875Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ishara null (EMP000011) - completed sessions only:
[2025-10-27T05:49:26.876Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:49:26.876Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:49:26.877Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:49:26.878Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:49:26.878Z] [LOG] 
   💵 EXPECTED Earned Salary for Ishara null (EMP000011) - until NOW:
[2025-10-27T05:49:26.879Z] [LOG]       Weekday: 144.50h × Rs.235.29 = Rs.33999.40
[2025-10-27T05:49:26.880Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-27T05:49:26.881Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:26.881Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:26.882Z] [LOG]       Total Expected Earned: Rs.41999.32
[2025-10-27T05:49:26.883Z] [LOG] 
   💵 ACTUAL Earned Salary for Ishara null (EMP000011) - including live session:
[2025-10-27T05:49:26.883Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-27T05:49:26.884Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-27T05:49:26.887Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:26.887Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:26.888Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-27T05:49:26.889Z] [LOG] 
   📊 FINAL CALCULATION for Ishara null (EMP000011):
[2025-10-27T05:49:26.890Z] [LOG]       Calculated At: Oct 27, 2025, 11:19:26
[2025-10-27T05:49:26.891Z] [LOG]       Expected Earned: Rs.41999.32
[2025-10-27T05:49:26.891Z] [LOG]       Actual Earned: Rs.11999.80
[2025-10-27T05:49:26.892Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:26.892Z] [LOG]       Attendance Deduction: Rs.29999.52
[2025-10-27T05:49:26.893Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:49:26.894Z] [LOG]       📉 Shortfall for Ishara null: 115.50 hours (71.43% of expected)
[2025-10-27T05:49:26.894Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:49:26.895Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:49:26.896Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:49:26.896Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:49:26.897Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:49:26.898Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:49:26.898Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-27T05:49:26.899Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:49:26.899Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:49:26.899Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:26.900Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:49:26.900Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:26.901Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:49:26.902Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:26.903Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:49:26.903Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:26.904Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:49:26.904Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:26.904Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:49:26.905Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:26.905Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:49:26.905Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:26.906Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:49:26.906Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:26.907Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:49:26.907Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:26.907Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:49:26.908Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:26.908Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:49:26.909Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-27T05:49:26.909Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:49:26.909Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:49:26.910Z] [LOG] 💰 GROSS CALCULATION for Ishara null:
[2025-10-27T05:49:26.910Z] [LOG]    Base Salary: 50000
[2025-10-27T05:49:26.911Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:49:26.911Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:49:26.911Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:26.912Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:49:26.912Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:26.912Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:49:26.913Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:27.189Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:49:27.189Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:49:27.189Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:49:27.189Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:49:27.190Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:49:27.190Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:49:27.190Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:49:27.190Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-27T05:49:27.190Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:49:27.191Z] [LOG]    Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:49:27.191Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:49:27.191Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:49:27.191Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:49:27.191Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:49:27.191Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-27T05:49:27.191Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:49:27.192Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-27T05:49:27.192Z] [LOG] 
💾 Database Update:
[2025-10-27T05:49:27.192Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:49:27.192Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:49:27.426Z] [LOG] 
📝 Components to save:
[2025-10-27T05:49:27.426Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:49:27.427Z] [LOG]    Deduction components: 1
[2025-10-27T05:49:27.427Z] [LOG] Creating components for record 419774df-261a-4305-bd00-c7e6b03a6b03: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:49:27.428Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-27T05:49:27.653Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:49:27.881Z] [LOG] Created payroll_record_component: 5a4a70fa-e5ad-47cc-b2dd-8c6bbf8109cd for Base Salary
[2025-10-27T05:49:27.882Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 29999.519999999997
}
[2025-10-27T05:49:28.112Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:49:28.356Z] [LOG] Created payroll_record_component: d9f079e9-b1aa-48cd-ad28-0fdd49e35a83 for Attendance Shortfall (Info)
[2025-10-27T05:49:28.825Z] [LOG] ✅ Financial balances updated successfully for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:28.826Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:49:28.826Z] [LOG] 
======================================================================
[2025-10-27T05:49:28.827Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ishara null
[2025-10-27T05:49:28.828Z] [LOG] ======================================================================
[2025-10-27T05:49:28.828Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:49:28.829Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-27T05:49:28.830Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:49:28.830Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:28.831Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:49:28.832Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:49:28.833Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:28.834Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-27T05:49:28.836Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:28.837Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:49:28.838Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:49:28.838Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:49:28.839Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:49:28.840Z] [LOG]       - Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:49:28.840Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:49:28.841Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:28.841Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-27T05:49:28.842Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:49:28.843Z] [LOG] ======================================================================

[2025-10-27T05:49:28.844Z] [LOG] ✅ Ishara null: Calculation completed successfully
[2025-10-27T05:49:28.844Z] [LOG] 📊 Progress: 8/34 (23.5%)
[2025-10-27T05:49:28.845Z] [LOG] 
🧮 Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-27T05:49:28.846Z] [LOG] 📋 Record ID: 4260786c-e219-41f2-a32c-76a6a2d56853
[2025-10-27T05:49:28.847Z] [LOG] 
======================================================================
[2025-10-27T05:49:28.847Z] [LOG] 🧮 CALCULATING PAYROLL: Ruvindu Hewabandu null (EMP000027)
[2025-10-27T05:49:28.848Z] [LOG] ======================================================================
[2025-10-27T05:49:29.774Z] [LOG] 🔍 Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-27T05:49:29.775Z] [LOG]    Total components: 13
[2025-10-27T05:49:29.775Z] [LOG]    Applicable components: 13
[2025-10-27T05:49:29.776Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-27T05:49:31.149Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:49:31.150Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:49:31.381Z] [LOG] 📊 Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:31.600Z] [LOG] 📊 Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:31.826Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:31.828Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:49:31.829Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:49:32.273Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:49:32.274Z] [LOG]    👤 Employee: Ruvindu Hewabandu null (EMP000027)
[2025-10-27T05:49:32.275Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:49:32.275Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:49:32.276Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-27T05:49:32.276Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:49:32.518Z] [LOG] 
   💵 Pre-calculated Rates for Ruvindu Hewabandu null (EMP000027):
[2025-10-27T05:49:32.519Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-27T05:49:32.520Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-27T05:49:32.520Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-27T05:49:32.521Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:49:32.521Z] [LOG] 
   📊 Full Period Working Days for Ruvindu Hewabandu null (EMP000027):
[2025-10-27T05:49:32.522Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:49:33.220Z] [LOG] 
   📊 Working Days for Expected Calculation for Ruvindu Hewabandu null (EMP000027):
[2025-10-27T05:49:33.221Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:49:33.222Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:49:33.463Z] [LOG] 
   ⏰ Calculating Completed Hours for Ruvindu Hewabandu null (EMP000027) - All completed sessions:
[2025-10-27T05:49:33.464Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:49:33.465Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:49:33.465Z] [LOG] 
      📋 Attendance Breakdown for Ruvindu Hewabandu null (EMP000027):
[2025-10-27T05:49:33.466Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:49:33.467Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:49:33.468Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:49:33.469Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:49:33.470Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:49:33.471Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:49:33.697Z] [LOG] 
      📊 Aggregated Totals for Ruvindu Hewabandu null (EMP000027):
[2025-10-27T05:49:33.698Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:49:33.698Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:49:33.699Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:49:33.700Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:49:33.700Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ruvindu Hewabandu null (EMP000027) - completed sessions only:
[2025-10-27T05:49:33.702Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:49:33.703Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:49:33.704Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:49:33.705Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:49:33.705Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ruvindu Hewabandu null (EMP000027) - completed sessions only:
[2025-10-27T05:49:33.706Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:49:33.707Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:49:33.708Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:49:33.708Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:49:33.709Z] [LOG] 
   💵 EXPECTED Earned Salary for Ruvindu Hewabandu null (EMP000027) - until NOW:
[2025-10-27T05:49:33.710Z] [LOG]       Weekday: 144.50h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:33.711Z] [LOG]       Saturday: 18.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:33.711Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:33.712Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:33.712Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-27T05:49:33.713Z] [LOG] 
   💵 ACTUAL Earned Salary for Ruvindu Hewabandu null (EMP000027) - including live session:
[2025-10-27T05:49:33.714Z] [LOG]       Weekday: 42.50h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:33.715Z] [LOG]       Saturday: 4.50h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:33.715Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:33.716Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:33.717Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-27T05:49:33.719Z] [LOG] 
   📊 FINAL CALCULATION for Ruvindu Hewabandu null (EMP000027):
[2025-10-27T05:49:33.720Z] [LOG]       Calculated At: Oct 27, 2025, 11:19:33
[2025-10-27T05:49:33.721Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-27T05:49:33.722Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-27T05:49:33.722Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:33.723Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-27T05:49:33.724Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:49:33.724Z] [LOG]       ✅ No deduction - Ruvindu Hewabandu null worked all expected hours!
[2025-10-27T05:49:33.725Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:49:33.728Z] [LOG]    Base Salary (Full): Rs.NaN
[2025-10-27T05:49:33.728Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T05:49:33.729Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-27T05:49:33.729Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:49:33.730Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:49:33.731Z] [LOG]    Gross Salary: 0
[2025-10-27T05:49:33.731Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:49:33.732Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:49:33.733Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:33.733Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:49:33.734Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:33.736Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:49:33.737Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:33.738Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:49:33.738Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:33.738Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:49:33.739Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:33.739Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:49:33.740Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:33.740Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:49:33.740Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:33.741Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:49:33.741Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:33.741Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:49:33.742Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:33.742Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:49:33.742Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:33.743Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:49:33.743Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-27T05:49:33.743Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:49:33.744Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:49:33.744Z] [LOG] 💰 GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-27T05:49:33.744Z] [LOG]    Base Salary: 0
[2025-10-27T05:49:33.745Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:49:33.745Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:49:33.745Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:33.746Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:49:33.746Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:33.746Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:49:33.747Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:33.970Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:49:33.971Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:49:33.972Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:49:33.972Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:49:33.973Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T05:49:33.974Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:49:33.974Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:49:33.975Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-27T05:49:33.976Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:49:33.976Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:49:33.977Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:49:33.978Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:49:33.979Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:49:33.979Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-27T05:49:33.980Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:49:33.981Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-27T05:49:33.981Z] [LOG] 
💾 Database Update:
[2025-10-27T05:49:33.982Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:49:33.983Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:49:34.208Z] [LOG] 
📝 Components to save:
[2025-10-27T05:49:34.208Z] [LOG]    Gross/Earnings components: 0
[2025-10-27T05:49:34.209Z] [LOG]    Deduction components: 0
[2025-10-27T05:49:34.210Z] [LOG] Creating components for record 4260786c-e219-41f2-a32c-76a6a2d56853: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-27T05:49:34.660Z] [LOG] ✅ Financial balances updated successfully for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:34.661Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:49:34.662Z] [LOG] 
======================================================================
[2025-10-27T05:49:34.663Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ruvindu Hewabandu null
[2025-10-27T05:49:34.664Z] [LOG] ======================================================================
[2025-10-27T05:49:34.664Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-27T05:49:34.665Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-27T05:49:34.665Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-27T05:49:34.666Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:34.667Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:49:34.669Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:49:34.670Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:34.671Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-27T05:49:34.672Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:34.672Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:49:34.673Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:49:34.674Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:49:34.674Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:49:34.675Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-27T05:49:34.675Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:49:34.676Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:34.677Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-27T05:49:34.677Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:49:34.678Z] [LOG] ======================================================================

[2025-10-27T05:49:34.680Z] [LOG] ✅ Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-27T05:49:34.680Z] [LOG] 📊 Progress: 9/34 (26.5%)
[2025-10-27T05:49:34.681Z] [LOG] 
🧮 Processing: Safna Nawas null (EMP000021)
[2025-10-27T05:49:34.682Z] [LOG] 📋 Record ID: 48dfc498-e8a0-40c8-9ad5-f262fb70ae3a
[2025-10-27T05:49:34.682Z] [LOG] 
======================================================================
[2025-10-27T05:49:34.683Z] [LOG] 🧮 CALCULATING PAYROLL: Safna Nawas null (EMP000021)
[2025-10-27T05:49:34.684Z] [LOG] ======================================================================
[2025-10-27T05:49:35.653Z] [LOG] 🔍 Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-27T05:49:35.654Z] [LOG]    Total components: 13
[2025-10-27T05:49:35.654Z] [LOG]    Applicable components: 13
[2025-10-27T05:49:35.655Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T05:49:37.034Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:49:37.035Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:49:37.267Z] [LOG] 📊 Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:37.494Z] [LOG] 📊 Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:37.730Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:37.731Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:49:37.732Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:49:38.186Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:49:38.187Z] [LOG]    👤 Employee: Safna Nawas null (EMP000021)
[2025-10-27T05:49:38.187Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:49:38.188Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:49:38.189Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T05:49:38.189Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:49:38.413Z] [LOG] 
   💵 Pre-calculated Rates for Safna Nawas null (EMP000021):
[2025-10-27T05:49:38.414Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-27T05:49:38.415Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-27T05:49:38.416Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-27T05:49:38.416Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:49:38.417Z] [LOG] 
   📊 Full Period Working Days for Safna Nawas null (EMP000021):
[2025-10-27T05:49:38.419Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:49:39.117Z] [LOG] 
   📊 Working Days for Expected Calculation for Safna Nawas null (EMP000021):
[2025-10-27T05:49:39.118Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:49:39.119Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:49:39.352Z] [LOG] 
   ⏰ Calculating Completed Hours for Safna Nawas null (EMP000021) - All completed sessions:
[2025-10-27T05:49:39.353Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:49:39.354Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:49:39.354Z] [LOG] 
      📋 Attendance Breakdown for Safna Nawas null (EMP000021):
[2025-10-27T05:49:39.355Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:49:39.356Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:49:39.356Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:49:39.357Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:49:39.357Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:49:39.358Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:49:39.585Z] [LOG] 
      📊 Aggregated Totals for Safna Nawas null (EMP000021):
[2025-10-27T05:49:39.586Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:49:39.587Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:49:39.587Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:49:39.588Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:49:39.589Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Safna Nawas null (EMP000021) - completed sessions only:
[2025-10-27T05:49:39.590Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:49:39.590Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:49:39.591Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:49:39.591Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:49:39.592Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Safna Nawas null (EMP000021) - completed sessions only:
[2025-10-27T05:49:39.593Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:49:39.594Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:49:39.595Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:49:39.596Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:49:39.596Z] [LOG] 
   💵 EXPECTED Earned Salary for Safna Nawas null (EMP000021) - until NOW:
[2025-10-27T05:49:39.597Z] [LOG]       Weekday: 144.50h × Rs.235.29 = Rs.33999.40
[2025-10-27T05:49:39.598Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-27T05:49:39.598Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:39.599Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:39.600Z] [LOG]       Total Expected Earned: Rs.41999.32
[2025-10-27T05:49:39.600Z] [LOG] 
   💵 ACTUAL Earned Salary for Safna Nawas null (EMP000021) - including live session:
[2025-10-27T05:49:39.603Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-27T05:49:39.604Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-27T05:49:39.604Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:39.605Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:39.606Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-27T05:49:39.607Z] [LOG] 
   📊 FINAL CALCULATION for Safna Nawas null (EMP000021):
[2025-10-27T05:49:39.608Z] [LOG]       Calculated At: Oct 27, 2025, 11:19:39
[2025-10-27T05:49:39.608Z] [LOG]       Expected Earned: Rs.41999.32
[2025-10-27T05:49:39.609Z] [LOG]       Actual Earned: Rs.11999.80
[2025-10-27T05:49:39.610Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:39.610Z] [LOG]       Attendance Deduction: Rs.29999.52
[2025-10-27T05:49:39.611Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:49:39.611Z] [LOG]       📉 Shortfall for Safna Nawas null: 115.50 hours (71.43% of expected)
[2025-10-27T05:49:39.612Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:49:39.613Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:49:39.614Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:49:39.614Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:49:39.615Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:49:39.616Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:49:39.616Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-27T05:49:39.617Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:49:39.618Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:49:39.619Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:39.619Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:49:39.619Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:39.620Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:49:39.620Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:39.621Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:49:39.621Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:39.621Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:49:39.622Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:39.622Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:49:39.622Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:39.623Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:49:39.623Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:39.623Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:49:39.624Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:39.624Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:49:39.624Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:39.625Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:49:39.625Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:39.626Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:49:39.626Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-27T05:49:39.626Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:49:39.627Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:49:39.627Z] [LOG] 💰 GROSS CALCULATION for Safna Nawas null:
[2025-10-27T05:49:39.627Z] [LOG]    Base Salary: 50000
[2025-10-27T05:49:39.628Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:49:39.628Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:49:39.628Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:39.628Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:49:39.629Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:39.629Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:49:39.629Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:39.846Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:49:39.847Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:49:39.847Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:49:39.848Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:49:39.849Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:49:39.849Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:49:39.850Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:49:39.850Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-27T05:49:39.852Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:49:39.853Z] [LOG]    Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:49:39.854Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:49:39.855Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:49:39.855Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:49:39.856Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:49:39.857Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-27T05:49:39.858Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:49:39.859Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-27T05:49:39.859Z] [LOG] 
💾 Database Update:
[2025-10-27T05:49:39.860Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:49:39.861Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:49:40.092Z] [LOG] 
📝 Components to save:
[2025-10-27T05:49:40.093Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:49:40.093Z] [LOG]    Deduction components: 1
[2025-10-27T05:49:40.094Z] [LOG] Creating components for record 48dfc498-e8a0-40c8-9ad5-f262fb70ae3a: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:49:40.095Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-27T05:49:40.318Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:49:40.551Z] [LOG] Created payroll_record_component: 7893b627-0193-4312-9c7d-e725087c074c for Base Salary
[2025-10-27T05:49:40.552Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 29999.519999999997
}
[2025-10-27T05:49:40.774Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:49:41.013Z] [LOG] Created payroll_record_component: 696f4bd1-6b86-4f64-8069-6dd8aee4b674 for Attendance Shortfall (Info)
[2025-10-27T05:49:41.457Z] [LOG] ✅ Financial balances updated successfully for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:41.458Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:49:41.459Z] [LOG] 
======================================================================
[2025-10-27T05:49:41.459Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Safna Nawas null
[2025-10-27T05:49:41.460Z] [LOG] ======================================================================
[2025-10-27T05:49:41.461Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:49:41.462Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-27T05:49:41.462Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:49:41.465Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:41.466Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:49:41.467Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:49:41.470Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:41.471Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-27T05:49:41.472Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:41.472Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:49:41.473Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:49:41.474Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:49:41.475Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:49:41.475Z] [LOG]       - Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:49:41.477Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:49:41.480Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:41.481Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-27T05:49:41.481Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:49:41.482Z] [LOG] ======================================================================

[2025-10-27T05:49:41.482Z] [LOG] ✅ Safna Nawas null: Calculation completed successfully
[2025-10-27T05:49:41.483Z] [LOG] 📊 Progress: 10/34 (29.4%)
[2025-10-27T05:49:41.483Z] [LOG] 
🧮 Processing: Sumaiya null (EMP000016)
[2025-10-27T05:49:41.484Z] [LOG] 📋 Record ID: 58a552e6-9d59-4f50-88d4-b28be5e71f1b
[2025-10-27T05:49:41.484Z] [LOG] 
======================================================================
[2025-10-27T05:49:41.486Z] [LOG] 🧮 CALCULATING PAYROLL: Sumaiya null (EMP000016)
[2025-10-27T05:49:41.486Z] [LOG] ======================================================================
[2025-10-27T05:49:43.671Z] [LOG] 🔍 Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-27T05:49:43.671Z] [LOG]    Total components: 13
[2025-10-27T05:49:43.672Z] [LOG]    Applicable components: 13
[2025-10-27T05:49:43.672Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T05:49:44.898Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:49:44.899Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:49:45.104Z] [LOG] 📊 Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:45.314Z] [LOG] 📊 Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:45.525Z] [LOG] 📊 Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:45.526Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:49:45.527Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:49:45.928Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:49:45.929Z] [LOG]    👤 Employee: Sumaiya null (EMP000016)
[2025-10-27T05:49:45.929Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:49:45.930Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:49:45.931Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-27T05:49:45.931Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:49:46.130Z] [LOG] 
   💵 Pre-calculated Rates for Sumaiya null (EMP000016):
[2025-10-27T05:49:46.131Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-27T05:49:46.131Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-27T05:49:46.132Z] [LOG]       Saturday Hourly Rate: Rs.533.33
[2025-10-27T05:49:46.132Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:49:46.133Z] [LOG] 
   📊 Full Period Working Days for Sumaiya null (EMP000016):
[2025-10-27T05:49:46.134Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:49:46.723Z] [LOG] 
   📊 Working Days for Expected Calculation for Sumaiya null (EMP000016):
[2025-10-27T05:49:46.724Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:49:46.724Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:49:46.922Z] [LOG] 
   ⏰ Calculating Completed Hours for Sumaiya null (EMP000016) - All completed sessions:
[2025-10-27T05:49:46.922Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:49:46.923Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:49:46.924Z] [LOG] 
      📋 Attendance Breakdown for Sumaiya null (EMP000016):
[2025-10-27T05:49:46.925Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:49:46.925Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:49:46.926Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:49:46.926Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:49:46.927Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:49:46.928Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:49:47.151Z] [LOG] 
      📊 Aggregated Totals for Sumaiya null (EMP000016):
[2025-10-27T05:49:47.152Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:49:47.153Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:49:47.154Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:49:47.154Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:49:47.155Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Sumaiya null (EMP000016) - completed sessions only:
[2025-10-27T05:49:47.156Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:49:47.156Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:49:47.157Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:49:47.157Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:49:47.160Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Sumaiya null (EMP000016) - completed sessions only:
[2025-10-27T05:49:47.160Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:49:47.160Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:49:47.161Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:49:47.161Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:49:47.161Z] [LOG] 
   💵 EXPECTED Earned Salary for Sumaiya null (EMP000016) - until NOW:
[2025-10-27T05:49:47.161Z] [LOG]       Weekday: 144.50h × Rs.282.35 = Rs.40799.58
[2025-10-27T05:49:47.162Z] [LOG]       Saturday: 18.00h × Rs.533.33 = Rs.9599.94
[2025-10-27T05:49:47.162Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:47.162Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:47.163Z] [LOG]       Total Expected Earned: Rs.50399.52
[2025-10-27T05:49:47.163Z] [LOG] 
   💵 ACTUAL Earned Salary for Sumaiya null (EMP000016) - including live session:
[2025-10-27T05:49:47.163Z] [LOG]       Weekday: 42.50h × Rs.282.35 = Rs.11999.88
[2025-10-27T05:49:47.164Z] [LOG]       Saturday: 4.50h × Rs.533.33 = Rs.2399.99
[2025-10-27T05:49:47.164Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:49:47.164Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:47.165Z] [LOG]       Total Actual Earned: Rs.14399.86
[2025-10-27T05:49:47.165Z] [LOG] 
   📊 FINAL CALCULATION for Sumaiya null (EMP000016):
[2025-10-27T05:49:47.166Z] [LOG]       Calculated At: Oct 27, 2025, 11:19:47
[2025-10-27T05:49:47.166Z] [LOG]       Expected Earned: Rs.50399.52
[2025-10-27T05:49:47.166Z] [LOG]       Actual Earned: Rs.14399.86
[2025-10-27T05:49:47.166Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:49:47.167Z] [LOG]       Attendance Deduction: Rs.35999.66
[2025-10-27T05:49:47.167Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:49:47.167Z] [LOG]       📉 Shortfall for Sumaiya null: 115.50 hours (71.43% of expected)
[2025-10-27T05:49:47.167Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:49:47.168Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-27T05:49:47.169Z] [LOG]    Actual Earned Base: Rs.14399.86
[2025-10-27T05:49:47.169Z] [LOG]    Attendance Shortfall: Rs.35999.66
[2025-10-27T05:49:47.171Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:49:47.171Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:49:47.171Z] [LOG]    Gross Salary: 14399.860000000002
[2025-10-27T05:49:47.172Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:49:47.172Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:49:47.172Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:47.172Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:49:47.173Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:47.173Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:49:47.173Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:47.173Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:49:47.174Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:47.174Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:49:47.174Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:47.175Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:49:47.175Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:47.175Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:49:47.176Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:47.176Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:49:47.176Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:47.176Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:49:47.177Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:47.177Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:49:47.177Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:47.178Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:49:47.178Z] [LOG]    EPF/ETF calculated on: Rs.14399.86
[2025-10-27T05:49:47.178Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:49:47.178Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:49:47.179Z] [LOG] 💰 GROSS CALCULATION for Sumaiya null:
[2025-10-27T05:49:47.179Z] [LOG]    Base Salary: 60000
[2025-10-27T05:49:47.179Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:49:47.179Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:49:47.180Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:47.180Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:49:47.180Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:47.180Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:49:47.181Z] [LOG]    Fixed amount: 0
[2025-10-27T05:49:47.378Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:49:47.379Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:49:47.379Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:49:47.380Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:49:47.380Z] [LOG]    Actual Earned Base: Rs.14399.86
[2025-10-27T05:49:47.380Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:49:47.381Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:49:47.381Z] [LOG]    = Gross Salary: Rs.14399.86
[2025-10-27T05:49:47.382Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:49:47.382Z] [LOG]    Attendance Shortfall (Info): Rs.35999.66
[2025-10-27T05:49:47.383Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:49:47.383Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:49:47.383Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:49:47.384Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:49:47.386Z] [LOG]    Gross Salary: Rs.14399.86
[2025-10-27T05:49:47.387Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:49:47.387Z] [LOG]    = NET SALARY: Rs.14399.86
[2025-10-27T05:49:47.387Z] [LOG] 
💾 Database Update:
[2025-10-27T05:49:47.388Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:49:47.388Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:49:47.590Z] [LOG] 
📝 Components to save:
[2025-10-27T05:49:47.590Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:49:47.591Z] [LOG]    Deduction components: 1
[2025-10-27T05:49:47.591Z] [LOG] Creating components for record 58a552e6-9d59-4f50-88d4-b28be5e71f1b: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:49:47.592Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 14399.860000000002
}
[2025-10-27T05:49:47.805Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:49:48.010Z] [LOG] Created payroll_record_component: b2fe3fc2-4f19-4f12-a8f3-fb6aa77a4c42 for Base Salary
[2025-10-27T05:49:48.011Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 35999.655000000006
}
[2025-10-27T05:49:48.219Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:49:48.450Z] [LOG] Created payroll_record_component: fa0b6391-d5ce-46c9-a035-5f328e45d12b for Attendance Shortfall (Info)
[2025-10-27T05:49:48.863Z] [LOG] ✅ Financial balances updated successfully for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:48.866Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:49:48.867Z] [LOG] 
======================================================================
[2025-10-27T05:49:48.875Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sumaiya null
[2025-10-27T05:49:48.876Z] [LOG] ======================================================================
[2025-10-27T05:49:48.876Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-27T05:49:48.877Z] [LOG]    Actual Earned Base (Attendance-based): Rs.14399.86
[2025-10-27T05:49:48.878Z] [LOG]    Attendance Shortfall: Rs.35999.66
[2025-10-27T05:49:48.878Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:48.888Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:49:48.889Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:49:48.894Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:48.894Z] [LOG]    GROSS SALARY: Rs.14399.86
[2025-10-27T05:49:48.894Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:48.895Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:49:48.895Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:49:48.895Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:49:48.895Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:49:48.896Z] [LOG]       - Attendance Shortfall (Info): Rs.35999.66
[2025-10-27T05:49:48.896Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:49:48.896Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:49:48.896Z] [LOG]    NET SALARY: Rs.14399.86
[2025-10-27T05:49:48.897Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:49:48.897Z] [LOG] ======================================================================

[2025-10-27T05:49:48.897Z] [LOG] ✅ Sumaiya null: Calculation completed successfully
[2025-10-27T05:49:48.897Z] [LOG] 📊 Progress: 11/34 (32.4%)
[2025-10-27T05:49:48.898Z] [LOG] 
🧮 Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-27T05:49:48.898Z] [LOG] 📋 Record ID: 60d83a38-6903-48b1-a237-48e32bb8f5cb
[2025-10-27T05:49:48.898Z] [LOG] 
======================================================================
[2025-10-27T05:49:48.898Z] [LOG] 🧮 CALCULATING PAYROLL: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-27T05:49:48.899Z] [LOG] ======================================================================
[2025-10-27T05:49:56.574Z] [LOG] 🔍 Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-27T05:49:56.575Z] [LOG]    Total components: 13
[2025-10-27T05:49:56.575Z] [LOG]    Applicable components: 13
[2025-10-27T05:49:56.575Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-27T05:49:58.246Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:49:58.246Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:49:58.460Z] [LOG] 📊 Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:58.668Z] [LOG] 📊 Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:58.876Z] [LOG] 📊 Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-27T05:49:58.876Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:49:58.877Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:49:59.296Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:49:59.297Z] [LOG]    👤 Employee: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-27T05:49:59.297Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:49:59.297Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:49:59.297Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T05:49:59.297Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:49:59.505Z] [LOG] 
   💵 Pre-calculated Rates for G.M Supathala Sadaru Madhushan null (EMP000042):
[2025-10-27T05:49:59.505Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-27T05:49:59.505Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-27T05:49:59.506Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-27T05:49:59.506Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:49:59.506Z] [LOG] 
   📊 Full Period Working Days for G.M Supathala Sadaru Madhushan null (EMP000042):
[2025-10-27T05:49:59.507Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:00.146Z] [LOG] 
   📊 Working Days for Expected Calculation for G.M Supathala Sadaru Madhushan null (EMP000042):
[2025-10-27T05:50:00.147Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:50:00.147Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:00.363Z] [LOG] 
   ⏰ Calculating Completed Hours for G.M Supathala Sadaru Madhushan null (EMP000042) - All completed sessions:
[2025-10-27T05:50:00.364Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:50:00.364Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:50:00.364Z] [LOG] 
      📋 Attendance Breakdown for G.M Supathala Sadaru Madhushan null (EMP000042):
[2025-10-27T05:50:00.364Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:50:00.365Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:50:00.365Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:50:00.365Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:50:00.365Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:50:00.365Z] [LOG]          6. 2025-10-24 (Weekday): 7.50h
[2025-10-27T05:50:00.578Z] [LOG] 
      📊 Aggregated Totals for G.M Supathala Sadaru Madhushan null (EMP000042):
[2025-10-27T05:50:00.579Z] [LOG]          Weekday: 41.50h
[2025-10-27T05:50:00.579Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:50:00.579Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:50:00.580Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:50:00.580Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for G.M Supathala Sadaru Madhushan null (EMP000042) - completed sessions only:
[2025-10-27T05:50:00.580Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:50:00.581Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:50:00.581Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:00.581Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:50:00.581Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for G.M Supathala Sadaru Madhushan null (EMP000042) - completed sessions only:
[2025-10-27T05:50:00.582Z] [LOG]       Weekday: 41.50h
[2025-10-27T05:50:00.582Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:50:00.582Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:00.582Z] [LOG]       Total Actual: 46.00h
[2025-10-27T05:50:00.582Z] [LOG] 
   💵 EXPECTED Earned Salary for G.M Supathala Sadaru Madhushan null (EMP000042) - until NOW:
[2025-10-27T05:50:00.583Z] [LOG]       Weekday: 144.50h × Rs.235.29 = Rs.33999.40
[2025-10-27T05:50:00.583Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-27T05:50:00.583Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:00.583Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:00.584Z] [LOG]       Total Expected Earned: Rs.41999.32
[2025-10-27T05:50:00.584Z] [LOG] 
   💵 ACTUAL Earned Salary for G.M Supathala Sadaru Madhushan null (EMP000042) - including live session:
[2025-10-27T05:50:00.585Z] [LOG]       Weekday: 41.50h × Rs.235.29 = Rs.9764.53
[2025-10-27T05:50:00.585Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-27T05:50:00.586Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:00.586Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:00.586Z] [LOG]       Total Actual Earned: Rs.11764.51
[2025-10-27T05:50:00.587Z] [LOG] 
   📊 FINAL CALCULATION for G.M Supathala Sadaru Madhushan null (EMP000042):
[2025-10-27T05:50:00.587Z] [LOG]       Calculated At: Oct 27, 2025, 11:20:00
[2025-10-27T05:50:00.587Z] [LOG]       Expected Earned: Rs.41999.32
[2025-10-27T05:50:00.587Z] [LOG]       Actual Earned: Rs.11764.51
[2025-10-27T05:50:00.588Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:00.588Z] [LOG]       Attendance Deduction: Rs.30234.81
[2025-10-27T05:50:00.588Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:50:00.588Z] [LOG]       📉 Shortfall for G.M Supathala Sadaru Madhushan null: 116.50 hours (71.99% of expected)
[2025-10-27T05:50:00.589Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:50:00.589Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:50:00.589Z] [LOG]    Actual Earned Base: Rs.11764.51
[2025-10-27T05:50:00.590Z] [LOG]    Attendance Shortfall: Rs.30234.81
[2025-10-27T05:50:00.590Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:50:00.590Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:50:00.590Z] [LOG]    Gross Salary: 11764.515
[2025-10-27T05:50:00.590Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:50:00.591Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:50:00.591Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:00.591Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:50:00.591Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:00.591Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:50:00.592Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:00.592Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:50:00.592Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:00.592Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:50:00.593Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:00.593Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:50:00.593Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:00.593Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:50:00.594Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:00.594Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:50:00.594Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:00.594Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:50:00.595Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:00.595Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:50:00.595Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:00.595Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:50:00.595Z] [LOG]    EPF/ETF calculated on: Rs.11764.51
[2025-10-27T05:50:00.596Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:50:00.596Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:50:00.596Z] [LOG] 💰 GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-27T05:50:00.596Z] [LOG]    Base Salary: 50000
[2025-10-27T05:50:00.597Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:50:00.597Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:50:00.597Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:00.598Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:50:00.598Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:00.598Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:50:00.598Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:00.816Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:50:00.816Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:00.817Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:50:00.817Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:50:00.817Z] [LOG]    Actual Earned Base: Rs.11764.51
[2025-10-27T05:50:00.818Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:50:00.818Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:50:00.818Z] [LOG]    = Gross Salary: Rs.11764.51
[2025-10-27T05:50:00.819Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:50:00.819Z] [LOG]    Attendance Shortfall (Info): Rs.30234.81
[2025-10-27T05:50:00.819Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:50:00.820Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:00.820Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:50:00.820Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:50:00.821Z] [LOG]    Gross Salary: Rs.11764.51
[2025-10-27T05:50:00.821Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:50:00.821Z] [LOG]    = NET SALARY: Rs.11764.51
[2025-10-27T05:50:00.821Z] [LOG] 
💾 Database Update:
[2025-10-27T05:50:00.822Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:50:00.822Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:50:01.043Z] [LOG] 
📝 Components to save:
[2025-10-27T05:50:01.044Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:50:01.044Z] [LOG]    Deduction components: 1
[2025-10-27T05:50:01.044Z] [LOG] Creating components for record 60d83a38-6903-48b1-a237-48e32bb8f5cb: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:50:01.045Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11764.515
}
[2025-10-27T05:50:01.259Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:50:01.477Z] [LOG] Created payroll_record_component: 10d7f5e5-585c-4470-84c2-b560db26c48c for Base Salary
[2025-10-27T05:50:01.478Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 30234.809999999998
}
[2025-10-27T05:50:01.696Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:50:01.915Z] [LOG] Created payroll_record_component: 71e0e85c-8f5f-4b3c-96cc-604066bebeee for Attendance Shortfall (Info)
[2025-10-27T05:50:02.336Z] [LOG] ✅ Financial balances updated successfully for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:02.337Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:50:02.337Z] [LOG] 
======================================================================
[2025-10-27T05:50:02.337Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: G.M Supathala Sadaru Madhushan null
[2025-10-27T05:50:02.337Z] [LOG] ======================================================================
[2025-10-27T05:50:02.337Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:50:02.338Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11764.51
[2025-10-27T05:50:02.338Z] [LOG]    Attendance Shortfall: Rs.30234.81
[2025-10-27T05:50:02.338Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:02.338Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:02.338Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:50:02.338Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:02.338Z] [LOG]    GROSS SALARY: Rs.11764.51
[2025-10-27T05:50:02.338Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:02.339Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:50:02.339Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:50:02.339Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:50:02.339Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:50:02.339Z] [LOG]       - Attendance Shortfall (Info): Rs.30234.81
[2025-10-27T05:50:02.339Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:02.339Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:02.339Z] [LOG]    NET SALARY: Rs.11764.51
[2025-10-27T05:50:02.339Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:50:02.340Z] [LOG] ======================================================================

[2025-10-27T05:50:02.340Z] [LOG] ✅ G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-27T05:50:02.340Z] [LOG] 📊 Progress: 12/34 (35.3%)
[2025-10-27T05:50:02.340Z] [LOG] 
🧮 Processing: Maryam null (EMP000035)
[2025-10-27T05:50:02.340Z] [LOG] 📋 Record ID: 6f2ba0f1-13ca-4ac2-8495-155ebc079191
[2025-10-27T05:50:02.340Z] [LOG] 
======================================================================
[2025-10-27T05:50:02.341Z] [LOG] 🧮 CALCULATING PAYROLL: Maryam null (EMP000035)
[2025-10-27T05:50:02.341Z] [LOG] ======================================================================
[2025-10-27T05:50:03.202Z] [LOG] 🔍 Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-27T05:50:03.202Z] [LOG]    Total components: 13
[2025-10-27T05:50:03.202Z] [LOG]    Applicable components: 13
[2025-10-27T05:50:03.203Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-27T05:50:04.515Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:50:04.516Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:50:04.727Z] [LOG] 📊 Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:04.940Z] [LOG] 📊 Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:05.186Z] [LOG] 📊 Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:05.186Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:50:05.187Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:50:05.616Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:50:05.617Z] [LOG]    👤 Employee: Maryam null (EMP000035)
[2025-10-27T05:50:05.617Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:50:05.619Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:50:05.620Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-27T05:50:05.620Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:50:05.826Z] [LOG] 
   💵 Pre-calculated Rates for Maryam null (EMP000035):
[2025-10-27T05:50:05.826Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-27T05:50:05.827Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-27T05:50:05.827Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-27T05:50:05.828Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:50:05.828Z] [LOG] 
   📊 Full Period Working Days for Maryam null (EMP000035):
[2025-10-27T05:50:05.829Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:06.465Z] [LOG] 
   📊 Working Days for Expected Calculation for Maryam null (EMP000035):
[2025-10-27T05:50:06.466Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:50:06.466Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:06.678Z] [LOG] 
   ⏰ Calculating Completed Hours for Maryam null (EMP000035) - All completed sessions:
[2025-10-27T05:50:06.679Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:50:06.680Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:50:06.680Z] [LOG] 
      📋 Attendance Breakdown for Maryam null (EMP000035):
[2025-10-27T05:50:06.681Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:50:06.682Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:50:06.682Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:50:06.683Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:50:06.683Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:50:06.684Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:50:06.891Z] [LOG] 
      📊 Aggregated Totals for Maryam null (EMP000035):
[2025-10-27T05:50:06.891Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:50:06.892Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:50:06.893Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:50:06.893Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:50:06.894Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Maryam null (EMP000035) - completed sessions only:
[2025-10-27T05:50:06.895Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:50:06.895Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:50:06.896Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:06.896Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:50:06.897Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Maryam null (EMP000035) - completed sessions only:
[2025-10-27T05:50:06.898Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:50:06.898Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:50:06.899Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:06.899Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:50:06.900Z] [LOG] 
   💵 EXPECTED Earned Salary for Maryam null (EMP000035) - until NOW:
[2025-10-27T05:50:06.903Z] [LOG]       Weekday: 144.50h × Rs.188.24 = Rs.27200.68
[2025-10-27T05:50:06.904Z] [LOG]       Saturday: 18.00h × Rs.355.56 = Rs.6400.08
[2025-10-27T05:50:06.904Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:06.905Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:06.906Z] [LOG]       Total Expected Earned: Rs.33600.76
[2025-10-27T05:50:06.906Z] [LOG] 
   💵 ACTUAL Earned Salary for Maryam null (EMP000035) - including live session:
[2025-10-27T05:50:06.907Z] [LOG]       Weekday: 42.50h × Rs.188.24 = Rs.8000.20
[2025-10-27T05:50:06.907Z] [LOG]       Saturday: 4.50h × Rs.355.56 = Rs.1600.02
[2025-10-27T05:50:06.908Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:06.909Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:06.909Z] [LOG]       Total Actual Earned: Rs.9600.22
[2025-10-27T05:50:06.911Z] [LOG] 
   📊 FINAL CALCULATION for Maryam null (EMP000035):
[2025-10-27T05:50:06.911Z] [LOG]       Calculated At: Oct 27, 2025, 11:20:06
[2025-10-27T05:50:06.912Z] [LOG]       Expected Earned: Rs.33600.76
[2025-10-27T05:50:06.912Z] [LOG]       Actual Earned: Rs.9600.22
[2025-10-27T05:50:06.913Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:06.914Z] [LOG]       Attendance Deduction: Rs.24000.54
[2025-10-27T05:50:06.914Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:50:06.915Z] [LOG]       📉 Shortfall for Maryam null: 115.50 hours (71.43% of expected)
[2025-10-27T05:50:06.916Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:50:06.916Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-27T05:50:06.917Z] [LOG]    Actual Earned Base: Rs.9600.22
[2025-10-27T05:50:06.919Z] [LOG]    Attendance Shortfall: Rs.24000.54
[2025-10-27T05:50:06.919Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:50:06.920Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:50:06.920Z] [LOG]    Gross Salary: 9600.220000000001
[2025-10-27T05:50:06.921Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:50:06.921Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:50:06.921Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:06.922Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:50:06.922Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:06.922Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:50:06.923Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:06.923Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:50:06.923Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:06.924Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:50:06.924Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:06.924Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:50:06.925Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:06.925Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:50:06.926Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:06.926Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:50:06.926Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:06.926Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:50:06.927Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:06.927Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:50:06.927Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:06.928Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:50:06.928Z] [LOG]    EPF/ETF calculated on: Rs.9600.22
[2025-10-27T05:50:06.928Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:50:06.928Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:50:06.929Z] [LOG] 💰 GROSS CALCULATION for Maryam null:
[2025-10-27T05:50:06.929Z] [LOG]    Base Salary: 40000
[2025-10-27T05:50:06.929Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:50:06.930Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:50:06.930Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:06.930Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:50:06.931Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:06.931Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:50:06.931Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:07.138Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:50:07.139Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:07.140Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:50:07.140Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:50:07.141Z] [LOG]    Actual Earned Base: Rs.9600.22
[2025-10-27T05:50:07.142Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:50:07.142Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:50:07.143Z] [LOG]    = Gross Salary: Rs.9600.22
[2025-10-27T05:50:07.143Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:50:07.145Z] [LOG]    Attendance Shortfall (Info): Rs.24000.54
[2025-10-27T05:50:07.145Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:50:07.146Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:07.147Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:50:07.147Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:50:07.148Z] [LOG]    Gross Salary: Rs.9600.22
[2025-10-27T05:50:07.149Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:50:07.149Z] [LOG]    = NET SALARY: Rs.9600.22
[2025-10-27T05:50:07.150Z] [LOG] 
💾 Database Update:
[2025-10-27T05:50:07.152Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:50:07.153Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:50:07.360Z] [LOG] 
📝 Components to save:
[2025-10-27T05:50:07.361Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:50:07.361Z] [LOG]    Deduction components: 1
[2025-10-27T05:50:07.362Z] [LOG] Creating components for record 6f2ba0f1-13ca-4ac2-8495-155ebc079191: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:50:07.364Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 9600.220000000001
}
[2025-10-27T05:50:07.574Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:50:07.798Z] [LOG] Created payroll_record_component: e0c0e0c1-753f-448a-a863-5b4e78112547 for Base Salary
[2025-10-27T05:50:07.799Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 24000.54
}
[2025-10-27T05:50:08.007Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:50:08.220Z] [LOG] Created payroll_record_component: 56c7280f-ca34-4fcb-a2b4-f7a4f877b356 for Attendance Shortfall (Info)
[2025-10-27T05:50:08.678Z] [LOG] ✅ Financial balances updated successfully for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:08.678Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:50:08.679Z] [LOG] 
======================================================================
[2025-10-27T05:50:08.680Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Maryam null
[2025-10-27T05:50:08.680Z] [LOG] ======================================================================
[2025-10-27T05:50:08.681Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-27T05:50:08.681Z] [LOG]    Actual Earned Base (Attendance-based): Rs.9600.22
[2025-10-27T05:50:08.682Z] [LOG]    Attendance Shortfall: Rs.24000.54
[2025-10-27T05:50:08.682Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:08.683Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:08.684Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:50:08.686Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:08.687Z] [LOG]    GROSS SALARY: Rs.9600.22
[2025-10-27T05:50:08.688Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:08.689Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:50:08.689Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:50:08.690Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:50:08.690Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:50:08.691Z] [LOG]       - Attendance Shortfall (Info): Rs.24000.54
[2025-10-27T05:50:08.692Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:08.692Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:08.693Z] [LOG]    NET SALARY: Rs.9600.22
[2025-10-27T05:50:08.693Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:50:08.694Z] [LOG] ======================================================================

[2025-10-27T05:50:08.695Z] [LOG] ✅ Maryam null: Calculation completed successfully
[2025-10-27T05:50:08.696Z] [LOG] 📊 Progress: 13/34 (38.2%)
[2025-10-27T05:50:08.696Z] [LOG] 
🧮 Processing: Faizan Faizan (EMP000003)
[2025-10-27T05:50:08.697Z] [LOG] 📋 Record ID: 72d3beeb-77f1-49bf-b5a9-f6928739b2c6
[2025-10-27T05:50:08.698Z] [LOG] 
======================================================================
[2025-10-27T05:50:08.698Z] [LOG] 🧮 CALCULATING PAYROLL: Faizan Faizan (EMP000003)
[2025-10-27T05:50:08.699Z] [LOG] ======================================================================
[2025-10-27T05:50:09.558Z] [LOG] 🔍 Component filtering for employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-27T05:50:09.559Z] [LOG]    Total components: 13
[2025-10-27T05:50:09.559Z] [LOG]    Applicable components: 13
[2025-10-27T05:50:09.559Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-27T05:50:11.265Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:50:11.265Z] [LOG] 🔄 Processing financial records for employee 0143a057-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:50:11.491Z] [LOG] 📊 Found 0 active loans for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:11.708Z] [LOG] 📊 Found 0 active advances for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:11.972Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:11.973Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:50:11.974Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:50:12.411Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:50:12.412Z] [LOG]    👤 Employee: Faizan Faizan (EMP000003)
[2025-10-27T05:50:12.413Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:50:12.413Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:50:12.414Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T05:50:12.415Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:50:12.639Z] [LOG] 
   💵 Pre-calculated Rates for Faizan Faizan (EMP000003):
[2025-10-27T05:50:12.640Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-27T05:50:12.641Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-27T05:50:12.641Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-27T05:50:12.642Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:50:12.642Z] [LOG] 
   📊 Full Period Working Days for Faizan Faizan (EMP000003):
[2025-10-27T05:50:12.643Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:13.276Z] [LOG] 
   📊 Working Days for Expected Calculation for Faizan Faizan (EMP000003):
[2025-10-27T05:50:13.277Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:50:13.277Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:13.496Z] [LOG] 
   ⏰ Calculating Completed Hours for Faizan Faizan (EMP000003) - All completed sessions:
[2025-10-27T05:50:13.496Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:50:13.497Z] [LOG]       Total completed sessions found: 5
[2025-10-27T05:50:13.497Z] [LOG] 
      📋 Attendance Breakdown for Faizan Faizan (EMP000003):
[2025-10-27T05:50:13.498Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:50:13.499Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:50:13.499Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:50:13.500Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:50:13.500Z] [LOG]          5. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:50:13.731Z] [LOG] 
      📊 Aggregated Totals for Faizan Faizan (EMP000003):
[2025-10-27T05:50:13.731Z] [LOG]          Weekday: 34.00h
[2025-10-27T05:50:13.731Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:50:13.732Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:50:13.732Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:50:13.733Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Faizan Faizan (EMP000003) - completed sessions only:
[2025-10-27T05:50:13.733Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:50:13.734Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:50:13.734Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:13.735Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:50:13.735Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Faizan Faizan (EMP000003) - completed sessions only:
[2025-10-27T05:50:13.736Z] [LOG]       Weekday: 34.00h
[2025-10-27T05:50:13.736Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:50:13.737Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:13.738Z] [LOG]       Total Actual: 38.50h
[2025-10-27T05:50:13.738Z] [LOG] 
   💵 EXPECTED Earned Salary for Faizan Faizan (EMP000003) - until NOW:
[2025-10-27T05:50:13.739Z] [LOG]       Weekday: 144.50h × Rs.235.29 = Rs.33999.40
[2025-10-27T05:50:13.739Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-27T05:50:13.739Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:13.740Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:13.740Z] [LOG]       Total Expected Earned: Rs.41999.32
[2025-10-27T05:50:13.741Z] [LOG] 
   💵 ACTUAL Earned Salary for Faizan Faizan (EMP000003) - including live session:
[2025-10-27T05:50:13.741Z] [LOG]       Weekday: 34.00h × Rs.235.29 = Rs.7999.86
[2025-10-27T05:50:13.742Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-27T05:50:13.742Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:13.743Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:13.743Z] [LOG]       Total Actual Earned: Rs.9999.84
[2025-10-27T05:50:13.744Z] [LOG] 
   📊 FINAL CALCULATION for Faizan Faizan (EMP000003):
[2025-10-27T05:50:13.744Z] [LOG]       Calculated At: Oct 27, 2025, 11:20:13
[2025-10-27T05:50:13.745Z] [LOG]       Expected Earned: Rs.41999.32
[2025-10-27T05:50:13.745Z] [LOG]       Actual Earned: Rs.9999.84
[2025-10-27T05:50:13.745Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:13.746Z] [LOG]       Attendance Deduction: Rs.31999.48
[2025-10-27T05:50:13.746Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:50:13.747Z] [LOG]       📉 Shortfall for Faizan Faizan: 124.00 hours (76.19% of expected)
[2025-10-27T05:50:13.747Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:50:13.748Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:50:13.748Z] [LOG]    Actual Earned Base: Rs.9999.84
[2025-10-27T05:50:13.748Z] [LOG]    Attendance Shortfall: Rs.31999.48
[2025-10-27T05:50:13.749Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:50:13.749Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:50:13.750Z] [LOG]    Gross Salary: 9999.84
[2025-10-27T05:50:13.750Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:50:13.750Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:50:13.751Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:13.753Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:50:13.753Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:13.753Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:50:13.754Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:13.754Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:50:13.755Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:13.755Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:50:13.756Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:13.756Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:50:13.756Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:13.757Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:50:13.757Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:13.757Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:50:13.758Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:13.758Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:50:13.758Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:13.758Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:50:13.759Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:13.759Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:50:13.759Z] [LOG]    EPF/ETF calculated on: Rs.9999.84
[2025-10-27T05:50:13.759Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:50:13.759Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:50:13.760Z] [LOG] 💰 GROSS CALCULATION for Faizan Faizan:
[2025-10-27T05:50:13.760Z] [LOG]    Base Salary: 50000
[2025-10-27T05:50:13.760Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:50:13.760Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:50:13.760Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:13.761Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:50:13.761Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:13.761Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:50:13.761Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:14.004Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:50:14.005Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:14.005Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:50:14.006Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:50:14.007Z] [LOG]    Actual Earned Base: Rs.9999.84
[2025-10-27T05:50:14.007Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:50:14.008Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:50:14.008Z] [LOG]    = Gross Salary: Rs.9999.84
[2025-10-27T05:50:14.009Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:50:14.010Z] [LOG]    Attendance Shortfall (Info): Rs.31999.48
[2025-10-27T05:50:14.010Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:50:14.011Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:14.012Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:50:14.013Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:50:14.014Z] [LOG]    Gross Salary: Rs.9999.84
[2025-10-27T05:50:14.014Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:50:14.015Z] [LOG]    = NET SALARY: Rs.9999.84
[2025-10-27T05:50:14.015Z] [LOG] 
💾 Database Update:
[2025-10-27T05:50:14.016Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:50:14.017Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:50:14.240Z] [LOG] 
📝 Components to save:
[2025-10-27T05:50:14.241Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:50:14.242Z] [LOG]    Deduction components: 1
[2025-10-27T05:50:14.242Z] [LOG] Creating components for record 72d3beeb-77f1-49bf-b5a9-f6928739b2c6: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:50:14.244Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 9999.84
}
[2025-10-27T05:50:14.460Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:50:14.675Z] [LOG] Created payroll_record_component: eca17c8f-8af5-4dcc-9560-e54513bdeb83 for Base Salary
[2025-10-27T05:50:14.676Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 31999.484999999997
}
[2025-10-27T05:50:14.915Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:50:15.135Z] [LOG] Created payroll_record_component: 38cc471f-7e4a-4d48-a026-a8d081e034a5 for Attendance Shortfall (Info)
[2025-10-27T05:50:15.571Z] [LOG] ✅ Financial balances updated successfully for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:15.572Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:50:15.573Z] [LOG] 
======================================================================
[2025-10-27T05:50:15.573Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Faizan Faizan
[2025-10-27T05:50:15.574Z] [LOG] ======================================================================
[2025-10-27T05:50:15.574Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:50:15.575Z] [LOG]    Actual Earned Base (Attendance-based): Rs.9999.84
[2025-10-27T05:50:15.576Z] [LOG]    Attendance Shortfall: Rs.31999.48
[2025-10-27T05:50:15.576Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:15.577Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:15.577Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:50:15.578Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:15.579Z] [LOG]    GROSS SALARY: Rs.9999.84
[2025-10-27T05:50:15.580Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:15.580Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:50:15.581Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:50:15.581Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:50:15.582Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:50:15.583Z] [LOG]       - Attendance Shortfall (Info): Rs.31999.48
[2025-10-27T05:50:15.584Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:15.585Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:15.586Z] [LOG]    NET SALARY: Rs.9999.84
[2025-10-27T05:50:15.587Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:50:15.587Z] [LOG] ======================================================================

[2025-10-27T05:50:15.588Z] [LOG] ✅ Faizan Faizan: Calculation completed successfully
[2025-10-27T05:50:15.588Z] [LOG] 📊 Progress: 14/34 (41.2%)
[2025-10-27T05:50:15.588Z] [LOG] 
🧮 Processing: customer null (EMP000036)
[2025-10-27T05:50:15.589Z] [LOG] 📋 Record ID: 73259951-bfba-45b1-be39-2e24c2d4397e
[2025-10-27T05:50:15.589Z] [LOG] 
======================================================================
[2025-10-27T05:50:15.589Z] [LOG] 🧮 CALCULATING PAYROLL: customer null (EMP000036)
[2025-10-27T05:50:15.590Z] [LOG] ======================================================================
[2025-10-27T05:50:16.480Z] [LOG] 🔍 Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-27T05:50:16.480Z] [LOG]    Total components: 13
[2025-10-27T05:50:16.481Z] [LOG]    Applicable components: 13
[2025-10-27T05:50:16.481Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-27T05:50:17.795Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:50:17.796Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:50:18.017Z] [LOG] 📊 Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:18.234Z] [LOG] 📊 Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:18.452Z] [LOG] 📊 Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:18.453Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:50:18.454Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:50:18.878Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:50:18.879Z] [LOG]    👤 Employee: customer null (EMP000036)
[2025-10-27T05:50:18.880Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:50:18.880Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:50:18.881Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-27T05:50:18.882Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:50:19.104Z] [LOG] 
   💵 Pre-calculated Rates for customer null (EMP000036):
[2025-10-27T05:50:19.105Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-27T05:50:19.106Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-27T05:50:19.106Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-27T05:50:19.107Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:50:19.107Z] [LOG] 
   📊 Full Period Working Days for customer null (EMP000036):
[2025-10-27T05:50:19.108Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:19.773Z] [LOG] 
   📊 Working Days for Expected Calculation for customer null (EMP000036):
[2025-10-27T05:50:19.774Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:50:19.774Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:19.992Z] [LOG] 
   ⏰ Calculating Completed Hours for customer null (EMP000036) - All completed sessions:
[2025-10-27T05:50:19.992Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:50:19.993Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:50:19.994Z] [LOG] 
      📋 Attendance Breakdown for customer null (EMP000036):
[2025-10-27T05:50:19.994Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:50:19.995Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:50:19.996Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:50:19.996Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:50:19.997Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:50:19.997Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:50:20.233Z] [LOG] 
      📊 Aggregated Totals for customer null (EMP000036):
[2025-10-27T05:50:20.234Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:50:20.235Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:50:20.236Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:50:20.237Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:50:20.237Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for customer null (EMP000036) - completed sessions only:
[2025-10-27T05:50:20.238Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:50:20.239Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:50:20.240Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:20.241Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:50:20.242Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for customer null (EMP000036) - completed sessions only:
[2025-10-27T05:50:20.242Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:50:20.243Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:50:20.243Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:20.244Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:50:20.245Z] [LOG] 
   💵 EXPECTED Earned Salary for customer null (EMP000036) - until NOW:
[2025-10-27T05:50:20.246Z] [LOG]       Weekday: 144.50h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:20.246Z] [LOG]       Saturday: 18.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:20.247Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:20.247Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:20.248Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-27T05:50:20.248Z] [LOG] 
   💵 ACTUAL Earned Salary for customer null (EMP000036) - including live session:
[2025-10-27T05:50:20.250Z] [LOG]       Weekday: 42.50h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:20.250Z] [LOG]       Saturday: 4.50h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:20.252Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:20.253Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:20.254Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-27T05:50:20.255Z] [LOG] 
   📊 FINAL CALCULATION for customer null (EMP000036):
[2025-10-27T05:50:20.256Z] [LOG]       Calculated At: Oct 27, 2025, 11:20:20
[2025-10-27T05:50:20.257Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-27T05:50:20.257Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-27T05:50:20.258Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:20.258Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-27T05:50:20.259Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:50:20.259Z] [LOG]       ✅ No deduction - customer null worked all expected hours!
[2025-10-27T05:50:20.260Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:50:20.261Z] [LOG]    Base Salary (Full): Rs.NaN
[2025-10-27T05:50:20.262Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T05:50:20.262Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-27T05:50:20.263Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:50:20.264Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:50:20.264Z] [LOG]    Gross Salary: 0
[2025-10-27T05:50:20.265Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:50:20.265Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:50:20.266Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:20.267Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:50:20.267Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:20.269Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:50:20.269Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:20.270Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:50:20.270Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:20.271Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:50:20.271Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:20.272Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:50:20.272Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:20.272Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:50:20.273Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:20.273Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:50:20.273Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:20.274Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:50:20.274Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:20.274Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:50:20.275Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:20.275Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:50:20.276Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-27T05:50:20.276Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:50:20.276Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:50:20.277Z] [LOG] 💰 GROSS CALCULATION for customer null:
[2025-10-27T05:50:20.277Z] [LOG]    Base Salary: 0
[2025-10-27T05:50:20.277Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:50:20.278Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:50:20.278Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:20.278Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:50:20.279Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:20.279Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:50:20.279Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:20.490Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:50:20.491Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:20.491Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:50:20.492Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:50:20.493Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T05:50:20.493Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:50:20.494Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:50:20.494Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-27T05:50:20.495Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:50:20.496Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:50:20.497Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:20.498Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:50:20.499Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:50:20.499Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-27T05:50:20.500Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:50:20.501Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-27T05:50:20.505Z] [LOG] 
💾 Database Update:
[2025-10-27T05:50:20.505Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:50:20.506Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:50:20.724Z] [LOG] 
📝 Components to save:
[2025-10-27T05:50:20.725Z] [LOG]    Gross/Earnings components: 0
[2025-10-27T05:50:20.725Z] [LOG]    Deduction components: 0
[2025-10-27T05:50:20.725Z] [LOG] Creating components for record 73259951-bfba-45b1-be39-2e24c2d4397e: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-27T05:50:21.150Z] [LOG] ✅ Financial balances updated successfully for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:21.151Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:50:21.151Z] [LOG] 
======================================================================
[2025-10-27T05:50:21.152Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: customer null
[2025-10-27T05:50:21.152Z] [LOG] ======================================================================
[2025-10-27T05:50:21.153Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-27T05:50:21.154Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-27T05:50:21.154Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-27T05:50:21.155Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:21.155Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:21.156Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:50:21.157Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:21.158Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-27T05:50:21.158Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:21.159Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:50:21.160Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:50:21.160Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:50:21.161Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:50:21.161Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-27T05:50:21.162Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:21.163Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:21.164Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-27T05:50:21.164Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:50:21.165Z] [LOG] ======================================================================

[2025-10-27T05:50:21.166Z] [LOG] ✅ customer null: Calculation completed successfully
[2025-10-27T05:50:21.166Z] [LOG] 📊 Progress: 15/34 (44.1%)
[2025-10-27T05:50:21.167Z] [LOG] 
🧮 Processing: Waruni null (EMP000024)
[2025-10-27T05:50:21.168Z] [LOG] 📋 Record ID: 7964e1cb-7666-4b5f-abec-1ba9c12f4e18
[2025-10-27T05:50:21.169Z] [LOG] 
======================================================================
[2025-10-27T05:50:21.169Z] [LOG] 🧮 CALCULATING PAYROLL: Waruni null (EMP000024)
[2025-10-27T05:50:21.170Z] [LOG] ======================================================================
[2025-10-27T05:50:22.030Z] [LOG] 🔍 Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-27T05:50:22.030Z] [LOG]    Total components: 13
[2025-10-27T05:50:22.031Z] [LOG]    Applicable components: 13
[2025-10-27T05:50:22.032Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T05:50:23.324Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:50:23.325Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:50:23.539Z] [LOG] 📊 Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:23.759Z] [LOG] 📊 Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:23.970Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:23.971Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:50:23.972Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:50:24.406Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:50:24.407Z] [LOG]    👤 Employee: Waruni null (EMP000024)
[2025-10-27T05:50:24.408Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:50:24.408Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:50:24.409Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T05:50:24.410Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:50:24.652Z] [LOG] 
   💵 Pre-calculated Rates for Waruni null (EMP000024):
[2025-10-27T05:50:24.653Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-27T05:50:24.653Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-27T05:50:24.654Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-27T05:50:24.654Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:50:24.655Z] [LOG] 
   📊 Full Period Working Days for Waruni null (EMP000024):
[2025-10-27T05:50:24.656Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:25.304Z] [LOG] 
   📊 Working Days for Expected Calculation for Waruni null (EMP000024):
[2025-10-27T05:50:25.305Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:50:25.305Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:25.551Z] [LOG] 
   ⏰ Calculating Completed Hours for Waruni null (EMP000024) - All completed sessions:
[2025-10-27T05:50:25.552Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:50:25.552Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:50:25.553Z] [LOG] 
      📋 Attendance Breakdown for Waruni null (EMP000024):
[2025-10-27T05:50:25.553Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:50:25.553Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:50:25.553Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:50:25.553Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:50:25.554Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:50:25.554Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:50:25.777Z] [LOG] 
      📊 Aggregated Totals for Waruni null (EMP000024):
[2025-10-27T05:50:25.777Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:50:25.778Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:50:25.778Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:50:25.779Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:50:25.779Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Waruni null (EMP000024) - completed sessions only:
[2025-10-27T05:50:25.779Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:50:25.780Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:50:25.780Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:25.780Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:50:25.780Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Waruni null (EMP000024) - completed sessions only:
[2025-10-27T05:50:25.781Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:50:25.781Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:50:25.781Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:25.781Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:50:25.782Z] [LOG] 
   💵 EXPECTED Earned Salary for Waruni null (EMP000024) - until NOW:
[2025-10-27T05:50:25.782Z] [LOG]       Weekday: 144.50h × Rs.235.29 = Rs.33999.40
[2025-10-27T05:50:25.782Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-27T05:50:25.783Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:25.783Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:25.783Z] [LOG]       Total Expected Earned: Rs.41999.32
[2025-10-27T05:50:25.783Z] [LOG] 
   💵 ACTUAL Earned Salary for Waruni null (EMP000024) - including live session:
[2025-10-27T05:50:25.784Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-27T05:50:25.784Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-27T05:50:25.785Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:25.785Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:25.785Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-27T05:50:25.786Z] [LOG] 
   📊 FINAL CALCULATION for Waruni null (EMP000024):
[2025-10-27T05:50:25.786Z] [LOG]       Calculated At: Oct 27, 2025, 11:20:25
[2025-10-27T05:50:25.786Z] [LOG]       Expected Earned: Rs.41999.32
[2025-10-27T05:50:25.787Z] [LOG]       Actual Earned: Rs.11999.80
[2025-10-27T05:50:25.787Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:25.787Z] [LOG]       Attendance Deduction: Rs.29999.52
[2025-10-27T05:50:25.787Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:50:25.788Z] [LOG]       📉 Shortfall for Waruni null: 115.50 hours (71.43% of expected)
[2025-10-27T05:50:25.788Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:50:25.788Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:50:25.789Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:50:25.789Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:50:25.789Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:50:25.790Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:50:25.790Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-27T05:50:25.790Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:50:25.790Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:50:25.791Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:25.791Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:50:25.791Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:25.791Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:50:25.792Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:25.793Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:50:25.794Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:25.794Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:50:25.794Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:25.794Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:50:25.794Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:25.794Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:50:25.795Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:25.795Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:50:25.795Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:25.795Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:50:25.795Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:25.795Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:50:25.795Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:25.796Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:50:25.796Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-27T05:50:25.796Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:50:25.796Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:50:25.796Z] [LOG] 💰 GROSS CALCULATION for Waruni null:
[2025-10-27T05:50:25.796Z] [LOG]    Base Salary: 50000
[2025-10-27T05:50:25.796Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:50:25.797Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:50:25.797Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:25.797Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:50:25.797Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:25.797Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:50:25.797Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:26.026Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:50:26.027Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:26.027Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:50:26.027Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:50:26.028Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:50:26.028Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:50:26.028Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:50:26.028Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-27T05:50:26.029Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:50:26.029Z] [LOG]    Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:50:26.029Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:50:26.030Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:26.030Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:50:26.030Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:50:26.030Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-27T05:50:26.031Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:50:26.031Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-27T05:50:26.031Z] [LOG] 
💾 Database Update:
[2025-10-27T05:50:26.031Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:50:26.032Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:50:26.287Z] [LOG] 
📝 Components to save:
[2025-10-27T05:50:26.288Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:50:26.288Z] [LOG]    Deduction components: 1
[2025-10-27T05:50:26.289Z] [LOG] Creating components for record 7964e1cb-7666-4b5f-abec-1ba9c12f4e18: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:50:26.290Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-27T05:50:26.576Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:50:26.804Z] [LOG] Created payroll_record_component: 9042fd20-e037-4c1f-bed5-c9e65bd497c6 for Base Salary
[2025-10-27T05:50:26.805Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 29999.519999999997
}
[2025-10-27T05:50:27.021Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:50:27.241Z] [LOG] Created payroll_record_component: 8ccbdcc7-20ec-463c-b736-9893e5884e30 for Attendance Shortfall (Info)
[2025-10-27T05:50:27.655Z] [LOG] ✅ Financial balances updated successfully for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:27.656Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:50:27.656Z] [LOG] 
======================================================================
[2025-10-27T05:50:27.656Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Waruni null
[2025-10-27T05:50:27.657Z] [LOG] ======================================================================
[2025-10-27T05:50:27.657Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:50:27.657Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-27T05:50:27.658Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:50:27.658Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:27.658Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:27.658Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:50:27.659Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:27.659Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-27T05:50:27.659Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:27.659Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:50:27.660Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:50:27.660Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:50:27.660Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:50:27.660Z] [LOG]       - Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:50:27.661Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:27.661Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:27.661Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-27T05:50:27.661Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:50:27.662Z] [LOG] ======================================================================

[2025-10-27T05:50:27.663Z] [LOG] ✅ Waruni null: Calculation completed successfully
[2025-10-27T05:50:27.663Z] [LOG] 📊 Progress: 16/34 (47.1%)
[2025-10-27T05:50:27.663Z] [LOG] 
🧮 Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-27T05:50:27.664Z] [LOG] 📋 Record ID: 811c3bfe-a850-4c27-a3e9-28eca13d0715
[2025-10-27T05:50:27.664Z] [LOG] 
======================================================================
[2025-10-27T05:50:27.664Z] [LOG] 🧮 CALCULATING PAYROLL: Nimdiya Ranasinghe null (EMP000045)
[2025-10-27T05:50:27.664Z] [LOG] ======================================================================
[2025-10-27T05:50:28.478Z] [LOG] 🔍 Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-27T05:50:28.478Z] [LOG]    Total components: 13
[2025-10-27T05:50:28.479Z] [LOG]    Applicable components: 13
[2025-10-27T05:50:28.479Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T05:50:29.745Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:50:29.745Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:50:29.967Z] [LOG] 📊 Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:30.168Z] [LOG] 📊 Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:30.388Z] [LOG] 📊 Found 0 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:30.388Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:50:30.389Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:50:30.797Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:50:30.798Z] [LOG]    👤 Employee: Nimdiya Ranasinghe null (EMP000045)
[2025-10-27T05:50:30.799Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:50:30.799Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:50:30.800Z] [LOG]    Base Salary (Full Month): Rs.35000.00
[2025-10-27T05:50:30.800Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:50:31.000Z] [LOG] 
   💵 Pre-calculated Rates for Nimdiya Ranasinghe null (EMP000045):
[2025-10-27T05:50:31.001Z] [LOG]       Daily Salary: Rs.1400.00
[2025-10-27T05:50:31.002Z] [LOG]       Weekday Hourly Rate: Rs.164.71
[2025-10-27T05:50:31.002Z] [LOG]       Saturday Hourly Rate: Rs.311.11
[2025-10-27T05:50:31.003Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:50:31.003Z] [LOG] 
   📊 Full Period Working Days for Nimdiya Ranasinghe null (EMP000045):
[2025-10-27T05:50:31.004Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:32.157Z] [LOG] 
   📊 Working Days for Expected Calculation for Nimdiya Ranasinghe null (EMP000045):
[2025-10-27T05:50:32.158Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:50:32.158Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:32.380Z] [LOG] 
   ⏰ Calculating Completed Hours for Nimdiya Ranasinghe null (EMP000045) - All completed sessions:
[2025-10-27T05:50:32.381Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:50:32.382Z] [LOG]       Total completed sessions found: 5
[2025-10-27T05:50:32.382Z] [LOG] 
      📋 Attendance Breakdown for Nimdiya Ranasinghe null (EMP000045):
[2025-10-27T05:50:32.383Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:50:32.383Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:50:32.384Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:50:32.385Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:50:32.385Z] [LOG]          5. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:50:33.300Z] [LOG] 
      📊 Aggregated Totals for Nimdiya Ranasinghe null (EMP000045):
[2025-10-27T05:50:33.301Z] [LOG]          Weekday: 34.00h
[2025-10-27T05:50:33.302Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:50:33.303Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:50:33.304Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:50:33.305Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Nimdiya Ranasinghe null (EMP000045) - completed sessions only:
[2025-10-27T05:50:33.306Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:50:33.307Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:50:33.307Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:33.308Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:50:33.308Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Nimdiya Ranasinghe null (EMP000045) - completed sessions only:
[2025-10-27T05:50:33.309Z] [LOG]       Weekday: 34.00h
[2025-10-27T05:50:33.309Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:50:33.310Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:33.311Z] [LOG]       Total Actual: 38.50h
[2025-10-27T05:50:33.311Z] [LOG] 
   💵 EXPECTED Earned Salary for Nimdiya Ranasinghe null (EMP000045) - until NOW:
[2025-10-27T05:50:33.312Z] [LOG]       Weekday: 144.50h × Rs.164.71 = Rs.23800.60
[2025-10-27T05:50:33.313Z] [LOG]       Saturday: 18.00h × Rs.311.11 = Rs.5599.98
[2025-10-27T05:50:33.313Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:33.314Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:33.314Z] [LOG]       Total Expected Earned: Rs.29400.58
[2025-10-27T05:50:33.315Z] [LOG] 
   💵 ACTUAL Earned Salary for Nimdiya Ranasinghe null (EMP000045) - including live session:
[2025-10-27T05:50:33.316Z] [LOG]       Weekday: 34.00h × Rs.164.71 = Rs.5600.14
[2025-10-27T05:50:33.316Z] [LOG]       Saturday: 4.50h × Rs.311.11 = Rs.1400.00
[2025-10-27T05:50:33.317Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:33.318Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:33.318Z] [LOG]       Total Actual Earned: Rs.7000.14
[2025-10-27T05:50:33.320Z] [LOG] 
   📊 FINAL CALCULATION for Nimdiya Ranasinghe null (EMP000045):
[2025-10-27T05:50:33.321Z] [LOG]       Calculated At: Oct 27, 2025, 11:20:33
[2025-10-27T05:50:33.321Z] [LOG]       Expected Earned: Rs.29400.58
[2025-10-27T05:50:33.322Z] [LOG]       Actual Earned: Rs.7000.14
[2025-10-27T05:50:33.322Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:33.323Z] [LOG]       Attendance Deduction: Rs.22400.44
[2025-10-27T05:50:33.324Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:50:33.324Z] [LOG]       📉 Shortfall for Nimdiya Ranasinghe null: 124.00 hours (76.19% of expected)
[2025-10-27T05:50:33.325Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:50:33.326Z] [LOG]    Base Salary (Full): Rs.35000.00
[2025-10-27T05:50:33.327Z] [LOG]    Actual Earned Base: Rs.7000.14
[2025-10-27T05:50:33.327Z] [LOG]    Attendance Shortfall: Rs.22400.44
[2025-10-27T05:50:33.328Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:50:33.329Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:50:33.329Z] [LOG]    Gross Salary: 7000.135
[2025-10-27T05:50:33.330Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:50:33.330Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:50:33.331Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:33.331Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:50:33.332Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:33.333Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:50:33.333Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:33.334Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:50:33.334Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:33.334Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:50:33.334Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:33.334Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:50:33.335Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:33.335Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:50:33.335Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:33.336Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:50:33.336Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:33.336Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:50:33.336Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:33.337Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:50:33.337Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:33.337Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:50:33.338Z] [LOG]    EPF/ETF calculated on: Rs.7000.14
[2025-10-27T05:50:33.338Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:50:33.338Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:50:33.339Z] [LOG] 💰 GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-27T05:50:33.339Z] [LOG]    Base Salary: 35000
[2025-10-27T05:50:33.339Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:50:33.339Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:50:33.340Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:33.340Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:50:33.340Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:33.340Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:50:33.341Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:33.728Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:50:33.728Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:33.729Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:50:33.729Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:50:33.730Z] [LOG]    Actual Earned Base: Rs.7000.14
[2025-10-27T05:50:33.731Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:50:33.731Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:50:33.732Z] [LOG]    = Gross Salary: Rs.7000.14
[2025-10-27T05:50:33.732Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:50:33.733Z] [LOG]    Attendance Shortfall (Info): Rs.22400.44
[2025-10-27T05:50:33.734Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:50:33.734Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:33.735Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:50:33.736Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:50:33.737Z] [LOG]    Gross Salary: Rs.7000.14
[2025-10-27T05:50:33.738Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:50:33.738Z] [LOG]    = NET SALARY: Rs.7000.14
[2025-10-27T05:50:33.739Z] [LOG] 
💾 Database Update:
[2025-10-27T05:50:33.739Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:50:33.740Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:50:34.071Z] [LOG] 
📝 Components to save:
[2025-10-27T05:50:34.071Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:50:34.072Z] [LOG]    Deduction components: 1
[2025-10-27T05:50:34.072Z] [LOG] Creating components for record 811c3bfe-a850-4c27-a3e9-28eca13d0715: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:50:34.074Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 7000.135
}
[2025-10-27T05:50:34.275Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:50:34.477Z] [LOG] Created payroll_record_component: 61bef4c7-a257-47f7-87b7-09a397c71ef6 for Base Salary
[2025-10-27T05:50:34.478Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 22400.440000000002
}
[2025-10-27T05:50:34.685Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:50:34.893Z] [LOG] Created payroll_record_component: 173bf1c9-065a-4006-ab2c-dc29d3ac88e4 for Attendance Shortfall (Info)
[2025-10-27T05:50:35.299Z] [LOG] ✅ Financial balances updated successfully for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:35.300Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:50:35.300Z] [LOG] 
======================================================================
[2025-10-27T05:50:35.301Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Nimdiya Ranasinghe null
[2025-10-27T05:50:35.301Z] [LOG] ======================================================================
[2025-10-27T05:50:35.302Z] [LOG]    Base Salary (Full): Rs.35000.00
[2025-10-27T05:50:35.303Z] [LOG]    Actual Earned Base (Attendance-based): Rs.7000.14
[2025-10-27T05:50:35.303Z] [LOG]    Attendance Shortfall: Rs.22400.44
[2025-10-27T05:50:35.304Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:35.304Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:35.305Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:50:35.306Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:35.306Z] [LOG]    GROSS SALARY: Rs.7000.14
[2025-10-27T05:50:35.307Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:35.308Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:50:35.308Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:50:35.309Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:50:35.309Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:50:35.310Z] [LOG]       - Attendance Shortfall (Info): Rs.22400.44
[2025-10-27T05:50:35.311Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:35.311Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:35.312Z] [LOG]    NET SALARY: Rs.7000.14
[2025-10-27T05:50:35.313Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:50:35.313Z] [LOG] ======================================================================

[2025-10-27T05:50:35.314Z] [LOG] ✅ Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-27T05:50:35.315Z] [LOG] 📊 Progress: 17/34 (50.0%)
[2025-10-27T05:50:35.315Z] [LOG] 
🧮 Processing: Saruban null (EMP000007)
[2025-10-27T05:50:35.316Z] [LOG] 📋 Record ID: 84d3e657-e276-4082-a33e-e6c8aeab6b6e
[2025-10-27T05:50:35.317Z] [LOG] 
======================================================================
[2025-10-27T05:50:35.317Z] [LOG] 🧮 CALCULATING PAYROLL: Saruban null (EMP000007)
[2025-10-27T05:50:35.318Z] [LOG] ======================================================================
[2025-10-27T05:50:36.212Z] [LOG] 🔍 Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-27T05:50:36.212Z] [LOG]    Total components: 13
[2025-10-27T05:50:36.213Z] [LOG]    Applicable components: 13
[2025-10-27T05:50:36.213Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-27T05:50:37.459Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:50:37.460Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:50:37.666Z] [LOG] 📊 Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:37.876Z] [LOG] 📊 Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:38.088Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:38.089Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:50:38.090Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:50:38.538Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:50:38.539Z] [LOG]    👤 Employee: Saruban null (EMP000007)
[2025-10-27T05:50:38.539Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:50:38.540Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:50:38.541Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-27T05:50:38.541Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:50:38.775Z] [LOG] 
   💵 Pre-calculated Rates for Saruban null (EMP000007):
[2025-10-27T05:50:38.776Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-27T05:50:38.776Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-27T05:50:38.777Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-27T05:50:38.777Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:50:38.778Z] [LOG] 
   📊 Full Period Working Days for Saruban null (EMP000007):
[2025-10-27T05:50:38.779Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:39.689Z] [LOG] 
   📊 Working Days for Expected Calculation for Saruban null (EMP000007):
[2025-10-27T05:50:39.690Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:50:39.690Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:39.908Z] [LOG] 
   ⏰ Calculating Completed Hours for Saruban null (EMP000007) - All completed sessions:
[2025-10-27T05:50:39.909Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:50:39.909Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:50:39.910Z] [LOG] 
      📋 Attendance Breakdown for Saruban null (EMP000007):
[2025-10-27T05:50:39.910Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:50:39.911Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:50:39.912Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:50:39.912Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:50:39.913Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:50:39.913Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:50:40.120Z] [LOG] 
      📊 Aggregated Totals for Saruban null (EMP000007):
[2025-10-27T05:50:40.120Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:50:40.121Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:50:40.121Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:50:40.121Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:50:40.121Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Saruban null (EMP000007) - completed sessions only:
[2025-10-27T05:50:40.122Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:50:40.122Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:50:40.122Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:40.122Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:50:40.123Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Saruban null (EMP000007) - completed sessions only:
[2025-10-27T05:50:40.123Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:50:40.123Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:50:40.123Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:40.123Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:50:40.124Z] [LOG] 
   💵 EXPECTED Earned Salary for Saruban null (EMP000007) - until NOW:
[2025-10-27T05:50:40.124Z] [LOG]       Weekday: 144.50h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:40.124Z] [LOG]       Saturday: 18.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:40.125Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:40.125Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:40.125Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-27T05:50:40.126Z] [LOG] 
   💵 ACTUAL Earned Salary for Saruban null (EMP000007) - including live session:
[2025-10-27T05:50:40.127Z] [LOG]       Weekday: 42.50h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:40.128Z] [LOG]       Saturday: 4.50h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:40.128Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:40.129Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:40.129Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-27T05:50:40.130Z] [LOG] 
   📊 FINAL CALCULATION for Saruban null (EMP000007):
[2025-10-27T05:50:40.132Z] [LOG]       Calculated At: Oct 27, 2025, 11:20:40
[2025-10-27T05:50:40.132Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-27T05:50:40.133Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-27T05:50:40.133Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:40.134Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-27T05:50:40.134Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:50:40.135Z] [LOG]       ✅ No deduction - Saruban null worked all expected hours!
[2025-10-27T05:50:40.136Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:50:40.136Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-27T05:50:40.137Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T05:50:40.138Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-27T05:50:40.138Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:50:40.139Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:50:40.140Z] [LOG]    Gross Salary: 0
[2025-10-27T05:50:40.140Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:50:40.141Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:50:40.142Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:40.142Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:50:40.143Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:40.143Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:50:40.144Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:40.144Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:50:40.144Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:40.145Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:50:40.145Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:40.145Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:50:40.145Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:40.146Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:50:40.146Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:40.146Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:50:40.146Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:40.147Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:50:40.147Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:40.147Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:50:40.148Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:40.148Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:50:40.148Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-27T05:50:40.148Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:50:40.149Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:50:40.149Z] [LOG] 💰 GROSS CALCULATION for Saruban null:
[2025-10-27T05:50:40.149Z] [LOG]    Base Salary: 0
[2025-10-27T05:50:40.149Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:50:40.149Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:50:40.150Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:40.150Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:50:40.150Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:40.150Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:50:40.151Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:40.353Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:50:40.354Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:40.354Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:50:40.355Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:50:40.356Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-27T05:50:40.356Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:50:40.357Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:50:40.357Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-27T05:50:40.358Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:50:40.359Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:50:40.359Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:40.360Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:50:40.360Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:50:40.361Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-27T05:50:40.362Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:50:40.363Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-27T05:50:40.363Z] [LOG] 
💾 Database Update:
[2025-10-27T05:50:40.364Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:50:40.365Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:50:40.578Z] [LOG] 
📝 Components to save:
[2025-10-27T05:50:40.579Z] [LOG]    Gross/Earnings components: 0
[2025-10-27T05:50:40.579Z] [LOG]    Deduction components: 0
[2025-10-27T05:50:40.579Z] [LOG] Creating components for record 84d3e657-e276-4082-a33e-e6c8aeab6b6e: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-27T05:50:41.021Z] [LOG] ✅ Financial balances updated successfully for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:41.022Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:50:41.022Z] [LOG] 
======================================================================
[2025-10-27T05:50:41.023Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saruban null
[2025-10-27T05:50:41.024Z] [LOG] ======================================================================
[2025-10-27T05:50:41.024Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-27T05:50:41.025Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-27T05:50:41.025Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-27T05:50:41.026Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:41.026Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:41.027Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:50:41.027Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:41.028Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-27T05:50:41.029Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:41.030Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:50:41.030Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:50:41.031Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:50:41.032Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:50:41.032Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-27T05:50:41.033Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:41.033Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:41.034Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-27T05:50:41.035Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:50:41.035Z] [LOG] ======================================================================

[2025-10-27T05:50:41.036Z] [LOG] ✅ Saruban null: Calculation completed successfully
[2025-10-27T05:50:41.037Z] [LOG] 📊 Progress: 18/34 (52.9%)
[2025-10-27T05:50:41.037Z] [LOG] 
🧮 Processing: Dharshika null (EMP000009)
[2025-10-27T05:50:41.038Z] [LOG] 📋 Record ID: 8c9a3580-2e57-4b1c-98c9-4cf7611b1265
[2025-10-27T05:50:41.039Z] [LOG] 
======================================================================
[2025-10-27T05:50:41.040Z] [LOG] 🧮 CALCULATING PAYROLL: Dharshika null (EMP000009)
[2025-10-27T05:50:41.040Z] [LOG] ======================================================================
[2025-10-27T05:50:41.860Z] [LOG] 🔍 Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-27T05:50:41.861Z] [LOG]    Total components: 13
[2025-10-27T05:50:41.861Z] [LOG]    Applicable components: 13
[2025-10-27T05:50:41.862Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T05:50:43.123Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:50:43.124Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:50:43.339Z] [LOG] 📊 Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:43.575Z] [LOG] 📊 Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:43.786Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:43.786Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:50:43.787Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:50:44.209Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:50:44.210Z] [LOG]    👤 Employee: Dharshika null (EMP000009)
[2025-10-27T05:50:44.210Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:50:44.211Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:50:44.212Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-27T05:50:44.212Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:50:44.418Z] [LOG] 
   💵 Pre-calculated Rates for Dharshika null (EMP000009):
[2025-10-27T05:50:44.419Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-27T05:50:44.419Z] [LOG]       Weekday Hourly Rate: Rs.470.59
[2025-10-27T05:50:44.419Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-27T05:50:44.420Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:50:44.420Z] [LOG] 
   📊 Full Period Working Days for Dharshika null (EMP000009):
[2025-10-27T05:50:44.420Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:45.050Z] [LOG] 
   📊 Working Days for Expected Calculation for Dharshika null (EMP000009):
[2025-10-27T05:50:45.051Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:50:45.051Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:45.262Z] [LOG] 
   ⏰ Calculating Completed Hours for Dharshika null (EMP000009) - All completed sessions:
[2025-10-27T05:50:45.262Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:50:45.263Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:50:45.263Z] [LOG] 
      📋 Attendance Breakdown for Dharshika null (EMP000009):
[2025-10-27T05:50:45.264Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:50:45.265Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:50:45.265Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:50:45.266Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:50:45.267Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:50:45.267Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:50:45.474Z] [LOG] 
      📊 Aggregated Totals for Dharshika null (EMP000009):
[2025-10-27T05:50:45.475Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:50:45.475Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:50:45.476Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:50:45.476Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:50:45.477Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Dharshika null (EMP000009) - completed sessions only:
[2025-10-27T05:50:45.477Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:50:45.478Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:50:45.478Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:45.479Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:50:45.480Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Dharshika null (EMP000009) - completed sessions only:
[2025-10-27T05:50:45.482Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:50:45.483Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:50:45.483Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:45.484Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:50:45.485Z] [LOG] 
   💵 EXPECTED Earned Salary for Dharshika null (EMP000009) - until NOW:
[2025-10-27T05:50:45.486Z] [LOG]       Weekday: 144.50h × Rs.470.59 = Rs.68000.25
[2025-10-27T05:50:45.486Z] [LOG]       Saturday: 18.00h × Rs.888.89 = Rs.16000.02
[2025-10-27T05:50:45.486Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:45.486Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:45.487Z] [LOG]       Total Expected Earned: Rs.84000.27
[2025-10-27T05:50:45.487Z] [LOG] 
   💵 ACTUAL Earned Salary for Dharshika null (EMP000009) - including live session:
[2025-10-27T05:50:45.487Z] [LOG]       Weekday: 42.50h × Rs.470.59 = Rs.20000.08
[2025-10-27T05:50:45.488Z] [LOG]       Saturday: 4.50h × Rs.888.89 = Rs.4000.01
[2025-10-27T05:50:45.488Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:45.488Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:45.488Z] [LOG]       Total Actual Earned: Rs.24000.08
[2025-10-27T05:50:45.489Z] [LOG] 
   📊 FINAL CALCULATION for Dharshika null (EMP000009):
[2025-10-27T05:50:45.489Z] [LOG]       Calculated At: Oct 27, 2025, 11:20:45
[2025-10-27T05:50:45.489Z] [LOG]       Expected Earned: Rs.84000.27
[2025-10-27T05:50:45.490Z] [LOG]       Actual Earned: Rs.24000.08
[2025-10-27T05:50:45.490Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:45.490Z] [LOG]       Attendance Deduction: Rs.60000.19
[2025-10-27T05:50:45.491Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:50:45.491Z] [LOG]       📉 Shortfall for Dharshika null: 115.50 hours (71.43% of expected)
[2025-10-27T05:50:45.491Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:50:45.492Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-27T05:50:45.492Z] [LOG]    Actual Earned Base: Rs.24000.08
[2025-10-27T05:50:45.492Z] [LOG]    Attendance Shortfall: Rs.60000.19
[2025-10-27T05:50:45.492Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:50:45.493Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:50:45.493Z] [LOG]    Gross Salary: 24000.08
[2025-10-27T05:50:45.493Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:50:45.493Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:50:45.494Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:45.494Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:50:45.494Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:45.494Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:50:45.495Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:45.495Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:50:45.495Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:45.496Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:50:45.496Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:45.496Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:50:45.497Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:45.497Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:50:45.497Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:45.498Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:50:45.498Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:45.498Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:50:45.498Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:45.499Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:50:45.499Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:45.499Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:50:45.500Z] [LOG]    EPF/ETF calculated on: Rs.24000.08
[2025-10-27T05:50:45.500Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:50:45.500Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:50:45.501Z] [LOG] 💰 GROSS CALCULATION for Dharshika null:
[2025-10-27T05:50:45.501Z] [LOG]    Base Salary: 100000
[2025-10-27T05:50:45.501Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:50:45.502Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:50:45.502Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:45.502Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:50:45.503Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:45.503Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:50:45.503Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:45.715Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:50:45.716Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:45.717Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:50:45.717Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:50:45.718Z] [LOG]    Actual Earned Base: Rs.24000.08
[2025-10-27T05:50:45.719Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:50:45.719Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:50:45.720Z] [LOG]    = Gross Salary: Rs.24000.08
[2025-10-27T05:50:45.720Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:50:45.721Z] [LOG]    Attendance Shortfall (Info): Rs.60000.19
[2025-10-27T05:50:45.722Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:50:45.723Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:45.723Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:50:45.724Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:50:45.725Z] [LOG]    Gross Salary: Rs.24000.08
[2025-10-27T05:50:45.725Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:50:45.726Z] [LOG]    = NET SALARY: Rs.24000.08
[2025-10-27T05:50:45.726Z] [LOG] 
💾 Database Update:
[2025-10-27T05:50:45.727Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:50:45.728Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:50:45.949Z] [LOG] 
📝 Components to save:
[2025-10-27T05:50:45.949Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:50:45.950Z] [LOG]    Deduction components: 1
[2025-10-27T05:50:45.950Z] [LOG] Creating components for record 8c9a3580-2e57-4b1c-98c9-4cf7611b1265: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:50:45.952Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 24000.08
}
[2025-10-27T05:50:46.157Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:50:46.385Z] [LOG] Created payroll_record_component: e720c46f-dab9-4f7b-ab98-5978a554cf34 for Base Salary
[2025-10-27T05:50:46.386Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 60000.19499999999
}
[2025-10-27T05:50:46.594Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:50:46.817Z] [LOG] Created payroll_record_component: e5d07e60-3e37-484d-a3ab-a9d63a12d5d3 for Attendance Shortfall (Info)
[2025-10-27T05:50:47.235Z] [LOG] ✅ Financial balances updated successfully for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:47.268Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:50:47.303Z] [LOG] 
======================================================================
[2025-10-27T05:50:47.317Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Dharshika null
[2025-10-27T05:50:47.318Z] [LOG] ======================================================================
[2025-10-27T05:50:47.319Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-27T05:50:47.319Z] [LOG]    Actual Earned Base (Attendance-based): Rs.24000.08
[2025-10-27T05:50:47.319Z] [LOG]    Attendance Shortfall: Rs.60000.19
[2025-10-27T05:50:47.319Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:47.319Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:47.320Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:50:47.320Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:47.320Z] [LOG]    GROSS SALARY: Rs.24000.08
[2025-10-27T05:50:47.320Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:47.320Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:50:47.320Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:50:47.321Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:50:47.321Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:50:47.321Z] [LOG]       - Attendance Shortfall (Info): Rs.60000.19
[2025-10-27T05:50:47.321Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:47.321Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:47.321Z] [LOG]    NET SALARY: Rs.24000.08
[2025-10-27T05:50:47.322Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:50:47.322Z] [LOG] ======================================================================

[2025-10-27T05:50:47.322Z] [LOG] ✅ Dharshika null: Calculation completed successfully
[2025-10-27T05:50:47.322Z] [LOG] 📊 Progress: 19/34 (55.9%)
[2025-10-27T05:50:47.322Z] [LOG] 
🧮 Processing: Chamodi null (EMP000032)
[2025-10-27T05:50:47.323Z] [LOG] 📋 Record ID: a2dd00e3-dfe5-4e06-bb17-155dc8a78997
[2025-10-27T05:50:47.323Z] [LOG] 
======================================================================
[2025-10-27T05:50:47.323Z] [LOG] 🧮 CALCULATING PAYROLL: Chamodi null (EMP000032)
[2025-10-27T05:50:47.323Z] [LOG] ======================================================================
[2025-10-27T05:50:48.157Z] [LOG] 🔍 Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-27T05:50:48.158Z] [LOG]    Total components: 13
[2025-10-27T05:50:48.158Z] [LOG]    Applicable components: 13
[2025-10-27T05:50:48.159Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T05:50:49.433Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:50:49.433Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:50:49.646Z] [LOG] 📊 Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:49.854Z] [LOG] 📊 Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:50.066Z] [LOG] 📊 Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:50.066Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:50:50.067Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:50:50.482Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:50:50.483Z] [LOG]    👤 Employee: Chamodi null (EMP000032)
[2025-10-27T05:50:50.483Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:50:50.484Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:50:50.484Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T05:50:50.485Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:50:50.698Z] [LOG] 
   💵 Pre-calculated Rates for Chamodi null (EMP000032):
[2025-10-27T05:50:50.700Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-27T05:50:50.701Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-27T05:50:50.702Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-27T05:50:50.702Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:50:50.703Z] [LOG] 
   📊 Full Period Working Days for Chamodi null (EMP000032):
[2025-10-27T05:50:50.703Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:51.352Z] [LOG] 
   📊 Working Days for Expected Calculation for Chamodi null (EMP000032):
[2025-10-27T05:50:51.353Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:50:51.354Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:51.570Z] [LOG] 
   ⏰ Calculating Completed Hours for Chamodi null (EMP000032) - All completed sessions:
[2025-10-27T05:50:51.570Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:50:51.571Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:50:51.572Z] [LOG] 
      📋 Attendance Breakdown for Chamodi null (EMP000032):
[2025-10-27T05:50:51.572Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:50:51.573Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:50:51.573Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:50:51.574Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:50:51.574Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:50:51.575Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:50:51.797Z] [LOG] 
      📊 Aggregated Totals for Chamodi null (EMP000032):
[2025-10-27T05:50:51.798Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:50:51.798Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:50:51.799Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:50:51.799Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:50:51.800Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Chamodi null (EMP000032) - completed sessions only:
[2025-10-27T05:50:51.801Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:50:51.802Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:50:51.802Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:51.803Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:50:51.803Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Chamodi null (EMP000032) - completed sessions only:
[2025-10-27T05:50:51.804Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:50:51.805Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:50:51.806Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:51.807Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:50:51.807Z] [LOG] 
   💵 EXPECTED Earned Salary for Chamodi null (EMP000032) - until NOW:
[2025-10-27T05:50:51.808Z] [LOG]       Weekday: 144.50h × Rs.235.29 = Rs.33999.40
[2025-10-27T05:50:51.808Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-27T05:50:51.809Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:51.810Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:51.810Z] [LOG]       Total Expected Earned: Rs.41999.32
[2025-10-27T05:50:51.811Z] [LOG] 
   💵 ACTUAL Earned Salary for Chamodi null (EMP000032) - including live session:
[2025-10-27T05:50:51.812Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-27T05:50:51.812Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-27T05:50:51.813Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:51.813Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:51.814Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-27T05:50:51.815Z] [LOG] 
   📊 FINAL CALCULATION for Chamodi null (EMP000032):
[2025-10-27T05:50:51.816Z] [LOG]       Calculated At: Oct 27, 2025, 11:20:51
[2025-10-27T05:50:51.816Z] [LOG]       Expected Earned: Rs.41999.32
[2025-10-27T05:50:51.817Z] [LOG]       Actual Earned: Rs.11999.80
[2025-10-27T05:50:51.818Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:51.818Z] [LOG]       Attendance Deduction: Rs.29999.52
[2025-10-27T05:50:51.819Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:50:51.819Z] [LOG]       📉 Shortfall for Chamodi null: 115.50 hours (71.43% of expected)
[2025-10-27T05:50:51.820Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:50:51.821Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:50:51.822Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:50:51.822Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:50:51.823Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:50:51.823Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:50:51.824Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-27T05:50:51.824Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:50:51.825Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:50:51.826Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:51.826Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:50:51.827Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:51.828Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:50:51.828Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:51.829Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:50:51.829Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:51.830Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:50:51.830Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:51.831Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:50:51.832Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:51.832Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:50:51.833Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:51.833Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:50:51.834Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:51.834Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:50:51.835Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:51.835Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:50:51.836Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:51.837Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:50:51.837Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-27T05:50:51.838Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:50:51.838Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:50:51.839Z] [LOG] 💰 GROSS CALCULATION for Chamodi null:
[2025-10-27T05:50:51.840Z] [LOG]    Base Salary: 50000
[2025-10-27T05:50:51.840Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:50:51.841Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:50:51.841Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:51.842Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:50:51.843Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:51.843Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:50:51.843Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:52.053Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:50:52.054Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:52.054Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:50:52.055Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:50:52.056Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:50:52.056Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:50:52.057Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:50:52.057Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-27T05:50:52.058Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:50:52.058Z] [LOG]    Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:50:52.059Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:50:52.060Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:52.060Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:50:52.061Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:50:52.062Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-27T05:50:52.063Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:50:52.063Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-27T05:50:52.064Z] [LOG] 
💾 Database Update:
[2025-10-27T05:50:52.064Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:50:52.065Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:50:52.277Z] [LOG] 
📝 Components to save:
[2025-10-27T05:50:52.278Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:50:52.279Z] [LOG]    Deduction components: 1
[2025-10-27T05:50:52.279Z] [LOG] Creating components for record a2dd00e3-dfe5-4e06-bb17-155dc8a78997: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:50:52.281Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-27T05:50:52.497Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:50:52.717Z] [LOG] Created payroll_record_component: 2202a54b-7753-4a70-af08-646043a243b4 for Base Salary
[2025-10-27T05:50:52.718Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 29999.519999999997
}
[2025-10-27T05:50:52.929Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:50:53.145Z] [LOG] Created payroll_record_component: a5da627e-c4e5-4128-8616-5f0656dd623f for Attendance Shortfall (Info)
[2025-10-27T05:50:53.574Z] [LOG] ✅ Financial balances updated successfully for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:53.574Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:50:53.575Z] [LOG] 
======================================================================
[2025-10-27T05:50:53.575Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chamodi null
[2025-10-27T05:50:53.576Z] [LOG] ======================================================================
[2025-10-27T05:50:53.577Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:50:53.577Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-27T05:50:53.578Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:50:53.578Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:53.579Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:53.579Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:50:53.580Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:53.581Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-27T05:50:53.582Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:53.582Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:50:53.583Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:50:53.584Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:50:53.584Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:50:53.585Z] [LOG]       - Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:50:53.586Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:53.586Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:50:53.587Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-27T05:50:53.587Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:50:53.588Z] [LOG] ======================================================================

[2025-10-27T05:50:53.589Z] [LOG] ✅ Chamodi null: Calculation completed successfully
[2025-10-27T05:50:53.589Z] [LOG] 📊 Progress: 20/34 (58.8%)
[2025-10-27T05:50:53.590Z] [LOG] 
🧮 Processing: Anoj null (EMP000014)
[2025-10-27T05:50:53.590Z] [LOG] 📋 Record ID: a5e255d2-17bf-442c-8a1a-53842d7cf0e4
[2025-10-27T05:50:53.591Z] [LOG] 
======================================================================
[2025-10-27T05:50:53.592Z] [LOG] 🧮 CALCULATING PAYROLL: Anoj null (EMP000014)
[2025-10-27T05:50:53.592Z] [LOG] ======================================================================
[2025-10-27T05:50:54.442Z] [LOG] 🔍 Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-27T05:50:54.442Z] [LOG]    Total components: 13
[2025-10-27T05:50:54.443Z] [LOG]    Applicable components: 13
[2025-10-27T05:50:54.443Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T05:50:55.725Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:50:55.726Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:50:55.946Z] [LOG] 📊 Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:56.190Z] [LOG] 📊 Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:56.402Z] [LOG] 📊 Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-27T05:50:56.403Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:50:56.404Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:50:56.830Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:50:56.831Z] [LOG]    👤 Employee: Anoj null (EMP000014)
[2025-10-27T05:50:56.832Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:50:56.832Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:50:56.833Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T05:50:56.833Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:50:57.365Z] [LOG] 
   💵 Pre-calculated Rates for Anoj null (EMP000014):
[2025-10-27T05:50:57.366Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-27T05:50:57.366Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-27T05:50:57.367Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-27T05:50:57.367Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:50:57.369Z] [LOG] 
   📊 Full Period Working Days for Anoj null (EMP000014):
[2025-10-27T05:50:57.370Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:58.041Z] [LOG] 
   📊 Working Days for Expected Calculation for Anoj null (EMP000014):
[2025-10-27T05:50:58.042Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:50:58.042Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:50:58.260Z] [LOG] 
   ⏰ Calculating Completed Hours for Anoj null (EMP000014) - All completed sessions:
[2025-10-27T05:50:58.261Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:50:58.262Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:50:58.262Z] [LOG] 
      📋 Attendance Breakdown for Anoj null (EMP000014):
[2025-10-27T05:50:58.263Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:50:58.263Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:50:58.264Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:50:58.264Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:50:58.265Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:50:58.266Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:50:58.489Z] [LOG] 
      📊 Aggregated Totals for Anoj null (EMP000014):
[2025-10-27T05:50:58.489Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:50:58.490Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:50:58.490Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:50:58.491Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:50:58.492Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Anoj null (EMP000014) - completed sessions only:
[2025-10-27T05:50:58.492Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:50:58.493Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:50:58.494Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:58.494Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:50:58.495Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Anoj null (EMP000014) - completed sessions only:
[2025-10-27T05:50:58.496Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:50:58.497Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:50:58.497Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:50:58.498Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:50:58.498Z] [LOG] 
   💵 EXPECTED Earned Salary for Anoj null (EMP000014) - until NOW:
[2025-10-27T05:50:58.499Z] [LOG]       Weekday: 144.50h × Rs.235.29 = Rs.33999.40
[2025-10-27T05:50:58.500Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-27T05:50:58.501Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:58.501Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:58.504Z] [LOG]       Total Expected Earned: Rs.41999.32
[2025-10-27T05:50:58.504Z] [LOG] 
   💵 ACTUAL Earned Salary for Anoj null (EMP000014) - including live session:
[2025-10-27T05:50:58.505Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-27T05:50:58.506Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-27T05:50:58.507Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:50:58.507Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:58.508Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-27T05:50:58.509Z] [LOG] 
   📊 FINAL CALCULATION for Anoj null (EMP000014):
[2025-10-27T05:50:58.510Z] [LOG]       Calculated At: Oct 27, 2025, 11:20:58
[2025-10-27T05:50:58.510Z] [LOG]       Expected Earned: Rs.41999.32
[2025-10-27T05:50:58.511Z] [LOG]       Actual Earned: Rs.11999.80
[2025-10-27T05:50:58.512Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:50:58.512Z] [LOG]       Attendance Deduction: Rs.29999.52
[2025-10-27T05:50:58.513Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:50:58.513Z] [LOG]       📉 Shortfall for Anoj null: 115.50 hours (71.43% of expected)
[2025-10-27T05:50:58.514Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:50:58.515Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:50:58.515Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:50:58.516Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:50:58.517Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:50:58.517Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:50:58.520Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-27T05:50:58.521Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:50:58.522Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:50:58.522Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:58.523Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:50:58.524Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:58.524Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:50:58.525Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:58.526Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:50:58.526Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:58.527Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:50:58.527Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:58.528Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:50:58.529Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:58.529Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:50:58.530Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:58.530Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:50:58.531Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:58.532Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:50:58.532Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:58.533Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:50:58.533Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:58.533Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:50:58.534Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-27T05:50:58.534Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:50:58.534Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:50:58.535Z] [LOG] 💰 GROSS CALCULATION for Anoj null:
[2025-10-27T05:50:58.536Z] [LOG]    Base Salary: 50000
[2025-10-27T05:50:58.537Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:50:58.537Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:50:58.537Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:58.538Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:50:58.538Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:58.539Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:50:58.539Z] [LOG]    Fixed amount: 0
[2025-10-27T05:50:58.760Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:50:58.761Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:50:58.761Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:50:58.762Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:50:58.762Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:50:58.763Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:50:58.763Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:50:58.764Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-27T05:50:58.764Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:50:58.765Z] [LOG]    Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:50:58.766Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:50:58.767Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:50:58.767Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:50:58.770Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:50:58.771Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-27T05:50:58.772Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:50:58.772Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-27T05:50:58.773Z] [LOG] 
💾 Database Update:
[2025-10-27T05:50:58.773Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:50:58.774Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:50:59.003Z] [LOG] 
📝 Components to save:
[2025-10-27T05:50:59.004Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:50:59.004Z] [LOG]    Deduction components: 1
[2025-10-27T05:50:59.005Z] [LOG] Creating components for record a5e255d2-17bf-442c-8a1a-53842d7cf0e4: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:50:59.006Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-27T05:50:59.241Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:50:59.468Z] [LOG] Created payroll_record_component: c9a2f69a-4747-4f34-8ea7-0dfc58d0957e for Base Salary
[2025-10-27T05:50:59.470Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 29999.519999999997
}
[2025-10-27T05:50:59.697Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:50:59.923Z] [LOG] Created payroll_record_component: 93555e38-2a41-45f8-9f3d-895af786669f for Attendance Shortfall (Info)
[2025-10-27T05:51:00.359Z] [LOG] ✅ Financial balances updated successfully for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:00.359Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:51:00.360Z] [LOG] 
======================================================================
[2025-10-27T05:51:00.361Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Anoj null
[2025-10-27T05:51:00.361Z] [LOG] ======================================================================
[2025-10-27T05:51:00.362Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:51:00.362Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-27T05:51:00.363Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:51:00.363Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:00.364Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:51:00.365Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:51:00.366Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:00.367Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-27T05:51:00.367Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:00.368Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:51:00.369Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:51:00.369Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:51:00.370Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:51:00.371Z] [LOG]       - Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:51:00.371Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:51:00.372Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:00.372Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-27T05:51:00.373Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:51:00.373Z] [LOG] ======================================================================

[2025-10-27T05:51:00.374Z] [LOG] ✅ Anoj null: Calculation completed successfully
[2025-10-27T05:51:00.375Z] [LOG] 📊 Progress: 21/34 (61.8%)
[2025-10-27T05:51:00.376Z] [LOG] 
🧮 Processing: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-27T05:51:00.376Z] [LOG] 📋 Record ID: a646f404-eec8-40e7-9d0f-4d67df9b797a
[2025-10-27T05:51:00.377Z] [LOG] 
======================================================================
[2025-10-27T05:51:00.378Z] [LOG] 🧮 CALCULATING PAYROLL: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-27T05:51:00.378Z] [LOG] ======================================================================
[2025-10-27T05:51:01.289Z] [LOG] 🔍 Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-27T05:51:01.289Z] [LOG]    Total components: 13
[2025-10-27T05:51:01.290Z] [LOG]    Applicable components: 13
[2025-10-27T05:51:01.290Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T05:51:02.640Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:51:02.640Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:51:02.867Z] [LOG] 📊 Found 1 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:03.089Z] [LOG] 📊 Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:03.315Z] [LOG] 📊 Found 1 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:03.315Z] [LOG] 💰 Loan 5690e2d3-580a-4d9d-bc32-1be366ff2cc7: Deducting LKR 5012.5 (Remaining: LKR 10025.01)
[2025-10-27T05:51:03.316Z] [LOG] 🎁 Bonus 7c28899a-e207-48ad-b6b7-23f6c551d304: Adding LKR 5000 (performance)
[2025-10-27T05:51:03.316Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 5012.5,
  "advances": 0,
  "bonuses": 5000,
  "netAdjustment": -12.5
}
[2025-10-27T05:51:03.317Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:51:03.766Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:51:03.767Z] [LOG]    👤 Employee: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-27T05:51:03.767Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:51:03.767Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:51:03.767Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T05:51:03.768Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:51:03.992Z] [LOG] 
   💵 Pre-calculated Rates for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-27T05:51:03.992Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-27T05:51:03.993Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-27T05:51:03.993Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-27T05:51:03.994Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:51:03.994Z] [LOG] 
   📊 Full Period Working Days for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-27T05:51:03.995Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:51:04.648Z] [LOG] 
   📊 Working Days for Expected Calculation for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-27T05:51:04.648Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:51:04.649Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:51:04.869Z] [LOG] 
   ⏰ Calculating Completed Hours for Ashen Nirmal Wadugodapitiya null (EMP000046) - All completed sessions:
[2025-10-27T05:51:04.870Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:51:04.870Z] [LOG]       Total completed sessions found: 5
[2025-10-27T05:51:04.872Z] [LOG] 
      📋 Attendance Breakdown for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-27T05:51:04.873Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:51:04.874Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:51:04.875Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:51:04.876Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:51:04.876Z] [LOG]          5. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:51:05.108Z] [LOG] 
      📊 Aggregated Totals for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-27T05:51:05.109Z] [LOG]          Weekday: 34.00h
[2025-10-27T05:51:05.110Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:51:05.110Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:51:05.111Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:51:05.111Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ashen Nirmal Wadugodapitiya null (EMP000046) - completed sessions only:
[2025-10-27T05:51:05.112Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:51:05.113Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:51:05.113Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:51:05.114Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:51:05.114Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ashen Nirmal Wadugodapitiya null (EMP000046) - completed sessions only:
[2025-10-27T05:51:05.115Z] [LOG]       Weekday: 34.00h
[2025-10-27T05:51:05.116Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:51:05.117Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:51:05.117Z] [LOG]       Total Actual: 38.50h
[2025-10-27T05:51:05.118Z] [LOG] 
   💵 EXPECTED Earned Salary for Ashen Nirmal Wadugodapitiya null (EMP000046) - until NOW:
[2025-10-27T05:51:05.119Z] [LOG]       Weekday: 144.50h × Rs.235.29 = Rs.33999.40
[2025-10-27T05:51:05.120Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-27T05:51:05.120Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:51:05.121Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:05.121Z] [LOG]       Total Expected Earned: Rs.41999.32
[2025-10-27T05:51:05.122Z] [LOG] 
   💵 ACTUAL Earned Salary for Ashen Nirmal Wadugodapitiya null (EMP000046) - including live session:
[2025-10-27T05:51:05.123Z] [LOG]       Weekday: 34.00h × Rs.235.29 = Rs.7999.86
[2025-10-27T05:51:05.123Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-27T05:51:05.124Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:51:05.125Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:05.125Z] [LOG]       Total Actual Earned: Rs.9999.84
[2025-10-27T05:51:05.126Z] [LOG] 
   📊 FINAL CALCULATION for Ashen Nirmal Wadugodapitiya null (EMP000046):
[2025-10-27T05:51:05.127Z] [LOG]       Calculated At: Oct 27, 2025, 11:21:05
[2025-10-27T05:51:05.128Z] [LOG]       Expected Earned: Rs.41999.32
[2025-10-27T05:51:05.128Z] [LOG]       Actual Earned: Rs.9999.84
[2025-10-27T05:51:05.129Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:05.129Z] [LOG]       Attendance Deduction: Rs.31999.48
[2025-10-27T05:51:05.130Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:51:05.131Z] [LOG]       📉 Shortfall for Ashen Nirmal Wadugodapitiya null: 124.00 hours (76.19% of expected)
[2025-10-27T05:51:05.131Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:51:05.132Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:51:05.133Z] [LOG]    Actual Earned Base: Rs.9999.84
[2025-10-27T05:51:05.133Z] [LOG]    Attendance Shortfall: Rs.31999.48
[2025-10-27T05:51:05.134Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:51:05.134Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:51:05.134Z] [LOG]    Gross Salary: 9999.84
[2025-10-27T05:51:05.135Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:51:05.135Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:51:05.136Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:05.136Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:51:05.136Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:05.137Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:51:05.137Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:05.137Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:51:05.138Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:05.138Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:51:05.138Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:05.139Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:51:05.139Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:05.139Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:51:05.139Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:05.140Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:51:05.140Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:05.140Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:51:05.141Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:05.141Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:51:05.141Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:05.142Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:51:05.142Z] [LOG]    EPF/ETF calculated on: Rs.9999.84
[2025-10-27T05:51:05.142Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:51:05.143Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:51:05.143Z] [LOG] 💰 GROSS CALCULATION for Ashen Nirmal Wadugodapitiya null:
[2025-10-27T05:51:05.143Z] [LOG]    Base Salary: 50000
[2025-10-27T05:51:05.144Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:51:05.144Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:51:05.144Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:05.144Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:51:05.145Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:05.145Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:51:05.145Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:05.364Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:51:05.364Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:51:05.365Z] [LOG]    Financial Bonuses: Rs.5000.00
[2025-10-27T05:51:05.365Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:51:05.366Z] [LOG]    Actual Earned Base: Rs.9999.84
[2025-10-27T05:51:05.367Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:51:05.367Z] [LOG]    + Bonuses: Rs.5000.00
[2025-10-27T05:51:05.368Z] [LOG]    = Gross Salary: Rs.14999.84
[2025-10-27T05:51:05.369Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:51:05.369Z] [LOG]    Loan Deductions: Rs.5012.50
[2025-10-27T05:51:05.370Z] [LOG]    Attendance Shortfall (Info): Rs.31999.48
[2025-10-27T05:51:05.371Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:51:05.371Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.5012.50
[2025-10-27T05:51:05.372Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:51:05.373Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:51:05.373Z] [LOG]    Gross Salary: Rs.14999.84
[2025-10-27T05:51:05.374Z] [LOG]    - Total Deductions: Rs.5012.50
[2025-10-27T05:51:05.374Z] [LOG]    = NET SALARY: Rs.9987.34
[2025-10-27T05:51:05.375Z] [LOG] 
💾 Database Update:
[2025-10-27T05:51:05.376Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.5000.00 (Allowances: 0.00 + Bonuses: 5000.00)
[2025-10-27T05:51:05.376Z] [LOG]    Total Deductions: Rs.5012.50 (EPF/ETF: 0.00 + Loans: 5012.50 + Advances: 0.00)
[2025-10-27T05:51:05.601Z] [LOG] 
📝 Components to save:
[2025-10-27T05:51:05.602Z] [LOG]    Gross/Earnings components: 2
[2025-10-27T05:51:05.602Z] [LOG]    Deduction components: 2
[2025-10-27T05:51:05.603Z] [LOG] Creating components for record a646f404-eec8-40e7-9d0f-4d67df9b797a: {
  "grossComponentsCount": 2,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-27T05:51:05.604Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 9999.84
}
[2025-10-27T05:51:05.827Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:51:06.049Z] [LOG] Created payroll_record_component: b5861a76-e367-4661-8945-63c09a8ac138 for Base Salary
[2025-10-27T05:51:06.050Z] [LOG] Processing component: {
  "name": "Financial Bonuses",
  "type": "earning",
  "amount": 5000
}
[2025-10-27T05:51:06.273Z] [LOG] Using existing component ID: 358d4714-0a37-484b-979d-f8fa6c68d465
[2025-10-27T05:51:06.506Z] [LOG] Created payroll_record_component: 597b0ffe-01f5-467d-9c9d-a39d73953a67 for Financial Bonuses
[2025-10-27T05:51:06.507Z] [LOG] Processing component: {
  "name": "Loan Deductions",
  "type": "deduction",
  "amount": 5012.5
}
[2025-10-27T05:51:06.738Z] [LOG] Using existing component ID: 64a0d7d8-8fdb-4968-a7a2-057590b481c7
[2025-10-27T05:51:06.959Z] [LOG] Created payroll_record_component: 51f4d91b-0d71-4f6e-a617-e1d95d52dd20 for Loan Deductions
[2025-10-27T05:51:06.960Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 31999.484999999997
}
[2025-10-27T05:51:07.181Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:51:07.416Z] [LOG] Created payroll_record_component: afc881b5-06c0-41e6-ae2a-a1d5e3d548e4 for Attendance Shortfall (Info)
[2025-10-27T05:51:08.104Z] [LOG] ✅ Updated loan 5690e2d3-580a-4d9d-bc32-1be366ff2cc7: Remaining LKR 5012.51, Status: active
[2025-10-27T05:51:08.555Z] [LOG] ✅ Updated bonus 7c28899a-e207-48ad-b6b7-23f6c551d304: Status changed to 'paid'
[2025-10-27T05:51:08.775Z] [LOG] ✅ Financial balances updated successfully for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:08.776Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:51:08.776Z] [LOG] 
======================================================================
[2025-10-27T05:51:08.777Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ashen Nirmal Wadugodapitiya null
[2025-10-27T05:51:08.778Z] [LOG] ======================================================================
[2025-10-27T05:51:08.778Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:51:08.779Z] [LOG]    Actual Earned Base (Attendance-based): Rs.9999.84
[2025-10-27T05:51:08.779Z] [LOG]    Attendance Shortfall: Rs.31999.48
[2025-10-27T05:51:08.780Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:08.781Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:51:08.781Z] [LOG]    Bonuses: Rs.5000.00
[2025-10-27T05:51:08.782Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:08.783Z] [LOG]    GROSS SALARY: Rs.14999.84
[2025-10-27T05:51:08.783Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:08.784Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:51:08.785Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:51:08.785Z] [LOG]       - Loan Deductions: Rs.5012.50
[2025-10-27T05:51:08.786Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:51:08.786Z] [LOG]       - Attendance Shortfall (Info): Rs.31999.48
[2025-10-27T05:51:08.787Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.5012.50
[2025-10-27T05:51:08.788Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:08.788Z] [LOG]    NET SALARY: Rs.9987.34
[2025-10-27T05:51:08.789Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:51:08.789Z] [LOG] ======================================================================

[2025-10-27T05:51:08.790Z] [LOG] ✅ Ashen Nirmal Wadugodapitiya null: Calculation completed successfully
[2025-10-27T05:51:08.791Z] [LOG] 📊 Progress: 22/34 (64.7%)
[2025-10-27T05:51:08.791Z] [LOG] 
🧮 Processing: Saru null (EMP000022)
[2025-10-27T05:51:08.792Z] [LOG] 📋 Record ID: b5afb613-1cc4-49ce-8f47-1432d0acc44c
[2025-10-27T05:51:08.793Z] [LOG] 
======================================================================
[2025-10-27T05:51:08.793Z] [LOG] 🧮 CALCULATING PAYROLL: Saru null (EMP000022)
[2025-10-27T05:51:08.794Z] [LOG] ======================================================================
[2025-10-27T05:51:09.681Z] [LOG] 🔍 Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-27T05:51:09.682Z] [LOG]    Total components: 13
[2025-10-27T05:51:09.682Z] [LOG]    Applicable components: 13
[2025-10-27T05:51:09.684Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T05:51:10.987Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:51:10.988Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:51:11.223Z] [LOG] 📊 Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:11.447Z] [LOG] 📊 Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:11.669Z] [LOG] 📊 Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:11.669Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:51:11.670Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:51:12.111Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:51:12.112Z] [LOG]    👤 Employee: Saru null (EMP000022)
[2025-10-27T05:51:12.112Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:51:12.113Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:51:12.113Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T05:51:12.114Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:51:12.352Z] [LOG] 
   💵 Pre-calculated Rates for Saru null (EMP000022):
[2025-10-27T05:51:12.353Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-27T05:51:12.354Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-27T05:51:12.354Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-27T05:51:12.355Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:51:12.355Z] [LOG] 
   📊 Full Period Working Days for Saru null (EMP000022):
[2025-10-27T05:51:12.356Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:51:13.017Z] [LOG] 
   📊 Working Days for Expected Calculation for Saru null (EMP000022):
[2025-10-27T05:51:13.017Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:51:13.018Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:51:13.243Z] [LOG] 
   ⏰ Calculating Completed Hours for Saru null (EMP000022) - All completed sessions:
[2025-10-27T05:51:13.244Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:51:13.244Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:51:13.245Z] [LOG] 
      📋 Attendance Breakdown for Saru null (EMP000022):
[2025-10-27T05:51:13.246Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:51:13.246Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:51:13.247Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:51:13.248Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:51:13.248Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:51:13.249Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:51:13.474Z] [LOG] 
      📊 Aggregated Totals for Saru null (EMP000022):
[2025-10-27T05:51:13.474Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:51:13.475Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:51:13.475Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:51:13.476Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:51:13.476Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Saru null (EMP000022) - completed sessions only:
[2025-10-27T05:51:13.477Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:51:13.477Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:51:13.477Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:51:13.478Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:51:13.478Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Saru null (EMP000022) - completed sessions only:
[2025-10-27T05:51:13.478Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:51:13.479Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:51:13.479Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:51:13.479Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:51:13.480Z] [LOG] 
   💵 EXPECTED Earned Salary for Saru null (EMP000022) - until NOW:
[2025-10-27T05:51:13.480Z] [LOG]       Weekday: 144.50h × Rs.235.29 = Rs.33999.40
[2025-10-27T05:51:13.480Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-27T05:51:13.481Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:51:13.481Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:13.481Z] [LOG]       Total Expected Earned: Rs.41999.32
[2025-10-27T05:51:13.481Z] [LOG] 
   💵 ACTUAL Earned Salary for Saru null (EMP000022) - including live session:
[2025-10-27T05:51:13.482Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-27T05:51:13.482Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-27T05:51:13.482Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:51:13.482Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:13.483Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-27T05:51:13.483Z] [LOG] 
   📊 FINAL CALCULATION for Saru null (EMP000022):
[2025-10-27T05:51:13.484Z] [LOG]       Calculated At: Oct 27, 2025, 11:21:13
[2025-10-27T05:51:13.484Z] [LOG]       Expected Earned: Rs.41999.32
[2025-10-27T05:51:13.484Z] [LOG]       Actual Earned: Rs.11999.80
[2025-10-27T05:51:13.484Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:13.485Z] [LOG]       Attendance Deduction: Rs.29999.52
[2025-10-27T05:51:13.485Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:51:13.486Z] [LOG]       📉 Shortfall for Saru null: 115.50 hours (71.43% of expected)
[2025-10-27T05:51:13.486Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:51:13.487Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:51:13.487Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:51:13.487Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:51:13.488Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:51:13.488Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:51:13.488Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-27T05:51:13.489Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:51:13.489Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:51:13.489Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:13.489Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:51:13.490Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:13.490Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:51:13.490Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:13.491Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:51:13.491Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:13.491Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:51:13.491Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:13.491Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:51:13.492Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:13.492Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:51:13.492Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:13.492Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:51:13.492Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:13.493Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:51:13.493Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:13.493Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:51:13.493Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:13.494Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:51:13.494Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-27T05:51:13.494Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:51:13.494Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:51:13.495Z] [LOG] 💰 GROSS CALCULATION for Saru null:
[2025-10-27T05:51:13.495Z] [LOG]    Base Salary: 50000
[2025-10-27T05:51:13.495Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:51:13.495Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:51:13.496Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:13.496Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:51:13.496Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:13.496Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:51:13.496Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:13.710Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:51:13.710Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:51:13.711Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:51:13.711Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:51:13.711Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:51:13.711Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:51:13.712Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:51:13.712Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-27T05:51:13.712Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:51:13.712Z] [LOG]    Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:51:13.713Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:51:13.713Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:51:13.713Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:51:13.713Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:51:13.714Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-27T05:51:13.714Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:51:13.714Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-27T05:51:13.714Z] [LOG] 
💾 Database Update:
[2025-10-27T05:51:13.714Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:51:13.715Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:51:13.942Z] [LOG] 
📝 Components to save:
[2025-10-27T05:51:13.943Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:51:13.943Z] [LOG]    Deduction components: 1
[2025-10-27T05:51:13.944Z] [LOG] Creating components for record b5afb613-1cc4-49ce-8f47-1432d0acc44c: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:51:13.945Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-27T05:51:14.194Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:51:14.434Z] [LOG] Created payroll_record_component: 2159724b-5c63-418a-9731-2f33d173c503 for Base Salary
[2025-10-27T05:51:14.435Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 29999.519999999997
}
[2025-10-27T05:51:14.706Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:51:14.950Z] [LOG] Created payroll_record_component: e75b4a0f-ea2e-4294-acee-1ea57494a43f for Attendance Shortfall (Info)
[2025-10-27T05:51:15.420Z] [LOG] ✅ Financial balances updated successfully for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:15.421Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:51:15.422Z] [LOG] 
======================================================================
[2025-10-27T05:51:15.422Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saru null
[2025-10-27T05:51:15.423Z] [LOG] ======================================================================
[2025-10-27T05:51:15.423Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:51:15.424Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-27T05:51:15.424Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:51:15.425Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:15.426Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:51:15.426Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:51:15.427Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:15.428Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-27T05:51:15.429Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:15.429Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:51:15.430Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:51:15.430Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:51:15.431Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:51:15.432Z] [LOG]       - Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:51:15.432Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:51:15.433Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:15.434Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-27T05:51:15.434Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:51:15.435Z] [LOG] ======================================================================

[2025-10-27T05:51:15.435Z] [LOG] ✅ Saru null: Calculation completed successfully
[2025-10-27T05:51:15.436Z] [LOG] 📊 Progress: 23/34 (67.6%)
[2025-10-27T05:51:15.437Z] [LOG] 
🧮 Processing: Ratheeshanan null (EMP000047)
[2025-10-27T05:51:15.438Z] [LOG] 📋 Record ID: b687c524-ac88-4fe2-9954-24bca16f4849
[2025-10-27T05:51:15.438Z] [LOG] 
======================================================================
[2025-10-27T05:51:15.439Z] [LOG] 🧮 CALCULATING PAYROLL: Ratheeshanan null (EMP000047)
[2025-10-27T05:51:15.439Z] [LOG] ======================================================================
[2025-10-27T05:51:16.412Z] [LOG] 🔍 Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-27T05:51:16.413Z] [LOG]    Total components: 13
[2025-10-27T05:51:16.414Z] [LOG]    Applicable components: 13
[2025-10-27T05:51:16.414Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T05:51:17.879Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:51:17.880Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:51:18.107Z] [LOG] 📊 Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:18.339Z] [LOG] 📊 Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:18.565Z] [LOG] 📊 Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:18.566Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:51:18.567Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:51:19.019Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:51:19.020Z] [LOG]    👤 Employee: Ratheeshanan null (EMP000047)
[2025-10-27T05:51:19.020Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:51:19.020Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:51:19.020Z] [LOG]    Base Salary (Full Month): Rs.25000.00
[2025-10-27T05:51:19.020Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:51:19.239Z] [LOG] 
   💵 Pre-calculated Rates for Ratheeshanan null (EMP000047):
[2025-10-27T05:51:19.240Z] [LOG]       Daily Salary: Rs.1000.00
[2025-10-27T05:51:19.240Z] [LOG]       Weekday Hourly Rate: Rs.117.65
[2025-10-27T05:51:19.241Z] [LOG]       Saturday Hourly Rate: Rs.222.22
[2025-10-27T05:51:19.241Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:51:19.242Z] [LOG] 
   📊 Full Period Working Days for Ratheeshanan null (EMP000047):
[2025-10-27T05:51:19.242Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:51:19.895Z] [LOG] 
   📊 Working Days for Expected Calculation for Ratheeshanan null (EMP000047):
[2025-10-27T05:51:19.896Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:51:19.896Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:51:20.143Z] [LOG] 
   ⏰ Calculating Completed Hours for Ratheeshanan null (EMP000047) - All completed sessions:
[2025-10-27T05:51:20.143Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:51:20.144Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:51:20.145Z] [LOG] 
      📋 Attendance Breakdown for Ratheeshanan null (EMP000047):
[2025-10-27T05:51:20.145Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:51:20.146Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:51:20.146Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:51:20.147Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:51:20.148Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:51:20.148Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:51:20.366Z] [LOG] 
      📊 Aggregated Totals for Ratheeshanan null (EMP000047):
[2025-10-27T05:51:20.367Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:51:20.368Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:51:20.368Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:51:20.369Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:51:20.370Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ratheeshanan null (EMP000047) - completed sessions only:
[2025-10-27T05:51:20.370Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:51:20.371Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:51:20.371Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:51:20.372Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:51:20.372Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ratheeshanan null (EMP000047) - completed sessions only:
[2025-10-27T05:51:20.373Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:51:20.374Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:51:20.375Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:51:20.376Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:51:20.376Z] [LOG] 
   💵 EXPECTED Earned Salary for Ratheeshanan null (EMP000047) - until NOW:
[2025-10-27T05:51:20.377Z] [LOG]       Weekday: 144.50h × Rs.117.65 = Rs.17000.42
[2025-10-27T05:51:20.378Z] [LOG]       Saturday: 18.00h × Rs.222.22 = Rs.3999.96
[2025-10-27T05:51:20.379Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:51:20.379Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:20.380Z] [LOG]       Total Expected Earned: Rs.21000.38
[2025-10-27T05:51:20.380Z] [LOG] 
   💵 ACTUAL Earned Salary for Ratheeshanan null (EMP000047) - including live session:
[2025-10-27T05:51:20.381Z] [LOG]       Weekday: 42.50h × Rs.117.65 = Rs.5000.13
[2025-10-27T05:51:20.382Z] [LOG]       Saturday: 4.50h × Rs.222.22 = Rs.999.99
[2025-10-27T05:51:20.383Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:51:20.383Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:20.384Z] [LOG]       Total Actual Earned: Rs.6000.11
[2025-10-27T05:51:20.385Z] [LOG] 
   📊 FINAL CALCULATION for Ratheeshanan null (EMP000047):
[2025-10-27T05:51:20.386Z] [LOG]       Calculated At: Oct 27, 2025, 11:21:20
[2025-10-27T05:51:20.386Z] [LOG]       Expected Earned: Rs.21000.38
[2025-10-27T05:51:20.387Z] [LOG]       Actual Earned: Rs.6000.11
[2025-10-27T05:51:20.387Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:20.388Z] [LOG]       Attendance Deduction: Rs.15000.27
[2025-10-27T05:51:20.388Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:51:20.389Z] [LOG]       📉 Shortfall for Ratheeshanan null: 115.50 hours (71.43% of expected)
[2025-10-27T05:51:20.390Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:51:20.391Z] [LOG]    Base Salary (Full): Rs.25000.00
[2025-10-27T05:51:20.391Z] [LOG]    Actual Earned Base: Rs.6000.11
[2025-10-27T05:51:20.392Z] [LOG]    Attendance Shortfall: Rs.15000.27
[2025-10-27T05:51:20.392Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:51:20.393Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:51:20.394Z] [LOG]    Gross Salary: 6000.115
[2025-10-27T05:51:20.394Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:51:20.395Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:51:20.396Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:20.396Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:51:20.397Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:20.397Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:51:20.398Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:20.398Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:51:20.399Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:20.400Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:51:20.400Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:20.401Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:51:20.401Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:20.402Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:51:20.403Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:20.403Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:51:20.404Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:20.404Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:51:20.404Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:20.405Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:51:20.405Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:20.405Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:51:20.406Z] [LOG]    EPF/ETF calculated on: Rs.6000.11
[2025-10-27T05:51:20.406Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:51:20.406Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:51:20.407Z] [LOG] 💰 GROSS CALCULATION for Ratheeshanan null:
[2025-10-27T05:51:20.407Z] [LOG]    Base Salary: 25000
[2025-10-27T05:51:20.407Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:51:20.408Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:51:20.408Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:20.408Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:51:20.409Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:20.409Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:51:20.409Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:20.642Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:51:20.643Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:51:20.643Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:51:20.644Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:51:20.645Z] [LOG]    Actual Earned Base: Rs.6000.11
[2025-10-27T05:51:20.645Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:51:20.646Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:51:20.646Z] [LOG]    = Gross Salary: Rs.6000.11
[2025-10-27T05:51:20.647Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:51:20.648Z] [LOG]    Attendance Shortfall (Info): Rs.15000.27
[2025-10-27T05:51:20.648Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:51:20.649Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:51:20.649Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:51:20.650Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:51:20.651Z] [LOG]    Gross Salary: Rs.6000.11
[2025-10-27T05:51:20.652Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:51:20.652Z] [LOG]    = NET SALARY: Rs.6000.11
[2025-10-27T05:51:20.653Z] [LOG] 
💾 Database Update:
[2025-10-27T05:51:20.653Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:51:20.654Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:51:20.875Z] [LOG] 
📝 Components to save:
[2025-10-27T05:51:20.876Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:51:20.876Z] [LOG]    Deduction components: 1
[2025-10-27T05:51:20.877Z] [LOG] Creating components for record b687c524-ac88-4fe2-9954-24bca16f4849: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:51:20.879Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 6000.115
}
[2025-10-27T05:51:21.095Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:51:21.315Z] [LOG] Created payroll_record_component: e45c8c79-942b-45d7-90e1-b825cc845737 for Base Salary
[2025-10-27T05:51:21.315Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 15000.269999999999
}
[2025-10-27T05:51:21.535Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:51:21.756Z] [LOG] Created payroll_record_component: 5aa55bc7-af39-46ce-b8e6-c3847908264c for Attendance Shortfall (Info)
[2025-10-27T05:51:22.199Z] [LOG] ✅ Financial balances updated successfully for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:22.199Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:51:22.199Z] [LOG] 
======================================================================
[2025-10-27T05:51:22.200Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ratheeshanan null
[2025-10-27T05:51:22.200Z] [LOG] ======================================================================
[2025-10-27T05:51:22.200Z] [LOG]    Base Salary (Full): Rs.25000.00
[2025-10-27T05:51:22.200Z] [LOG]    Actual Earned Base (Attendance-based): Rs.6000.11
[2025-10-27T05:51:22.201Z] [LOG]    Attendance Shortfall: Rs.15000.27
[2025-10-27T05:51:22.201Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:22.201Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:51:22.201Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:51:22.202Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:22.202Z] [LOG]    GROSS SALARY: Rs.6000.11
[2025-10-27T05:51:22.202Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:22.202Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:51:22.203Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:51:22.203Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:51:22.203Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:51:22.203Z] [LOG]       - Attendance Shortfall (Info): Rs.15000.27
[2025-10-27T05:51:22.204Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:51:22.204Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:22.204Z] [LOG]    NET SALARY: Rs.6000.11
[2025-10-27T05:51:22.204Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:51:22.205Z] [LOG] ======================================================================

[2025-10-27T05:51:22.205Z] [LOG] ✅ Ratheeshanan null: Calculation completed successfully
[2025-10-27T05:51:22.206Z] [LOG] 📊 Progress: 24/34 (70.6%)
[2025-10-27T05:51:22.206Z] [LOG] 
🧮 Processing: Shandeep null (EMP000034)
[2025-10-27T05:51:22.206Z] [LOG] 📋 Record ID: b7cd6adc-9a59-47e8-81f6-4b8d07d9ec4d
[2025-10-27T05:51:22.207Z] [LOG] 
======================================================================
[2025-10-27T05:51:22.207Z] [LOG] 🧮 CALCULATING PAYROLL: Shandeep null (EMP000034)
[2025-10-27T05:51:22.207Z] [LOG] ======================================================================
[2025-10-27T05:51:23.113Z] [LOG] 🔍 Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-27T05:51:23.114Z] [LOG]    Total components: 13
[2025-10-27T05:51:23.114Z] [LOG]    Applicable components: 13
[2025-10-27T05:51:23.115Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T05:51:24.441Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:51:24.441Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:51:24.667Z] [LOG] 📊 Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:24.896Z] [LOG] 📊 Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:25.115Z] [LOG] 📊 Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:25.116Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:51:25.117Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:51:25.568Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:51:25.569Z] [LOG]    👤 Employee: Shandeep null (EMP000034)
[2025-10-27T05:51:25.569Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:51:25.570Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:51:25.570Z] [LOG]    Base Salary (Full Month): Rs.80000.00
[2025-10-27T05:51:25.571Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:51:25.793Z] [LOG] 
   💵 Pre-calculated Rates for Shandeep null (EMP000034):
[2025-10-27T05:51:25.794Z] [LOG]       Daily Salary: Rs.3200.00
[2025-10-27T05:51:25.794Z] [LOG]       Weekday Hourly Rate: Rs.376.47
[2025-10-27T05:51:25.794Z] [LOG]       Saturday Hourly Rate: Rs.711.11
[2025-10-27T05:51:25.794Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:51:25.794Z] [LOG] 
   📊 Full Period Working Days for Shandeep null (EMP000034):
[2025-10-27T05:51:25.794Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:51:26.454Z] [LOG] 
   📊 Working Days for Expected Calculation for Shandeep null (EMP000034):
[2025-10-27T05:51:26.455Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:51:26.455Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:51:26.694Z] [LOG] 
   ⏰ Calculating Completed Hours for Shandeep null (EMP000034) - All completed sessions:
[2025-10-27T05:51:26.694Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:51:26.694Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:51:26.694Z] [LOG] 
      📋 Attendance Breakdown for Shandeep null (EMP000034):
[2025-10-27T05:51:26.694Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:51:26.695Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:51:26.695Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:51:26.695Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:51:26.695Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:51:26.695Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:51:26.914Z] [LOG] 
      📊 Aggregated Totals for Shandeep null (EMP000034):
[2025-10-27T05:51:26.914Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:51:26.915Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:51:26.915Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:51:26.915Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:51:26.915Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Shandeep null (EMP000034) - completed sessions only:
[2025-10-27T05:51:26.915Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:51:26.915Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:51:26.915Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:51:26.916Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:51:26.916Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Shandeep null (EMP000034) - completed sessions only:
[2025-10-27T05:51:26.916Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:51:26.916Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:51:26.916Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:51:26.917Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:51:26.917Z] [LOG] 
   💵 EXPECTED Earned Salary for Shandeep null (EMP000034) - until NOW:
[2025-10-27T05:51:26.917Z] [LOG]       Weekday: 144.50h × Rs.376.47 = Rs.54399.92
[2025-10-27T05:51:26.917Z] [LOG]       Saturday: 18.00h × Rs.711.11 = Rs.12799.98
[2025-10-27T05:51:26.918Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:51:26.918Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:26.918Z] [LOG]       Total Expected Earned: Rs.67199.90
[2025-10-27T05:51:26.918Z] [LOG] 
   💵 ACTUAL Earned Salary for Shandeep null (EMP000034) - including live session:
[2025-10-27T05:51:26.918Z] [LOG]       Weekday: 42.50h × Rs.376.47 = Rs.15999.98
[2025-10-27T05:51:26.918Z] [LOG]       Saturday: 4.50h × Rs.711.11 = Rs.3199.99
[2025-10-27T05:51:26.919Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:51:26.919Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:26.919Z] [LOG]       Total Actual Earned: Rs.19199.97
[2025-10-27T05:51:26.919Z] [LOG] 
   📊 FINAL CALCULATION for Shandeep null (EMP000034):
[2025-10-27T05:51:26.919Z] [LOG]       Calculated At: Oct 27, 2025, 11:21:26
[2025-10-27T05:51:26.919Z] [LOG]       Expected Earned: Rs.67199.90
[2025-10-27T05:51:26.920Z] [LOG]       Actual Earned: Rs.19199.97
[2025-10-27T05:51:26.920Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:26.920Z] [LOG]       Attendance Deduction: Rs.47999.93
[2025-10-27T05:51:26.920Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:51:26.920Z] [LOG]       📉 Shortfall for Shandeep null: 115.50 hours (71.43% of expected)
[2025-10-27T05:51:26.920Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:51:26.921Z] [LOG]    Base Salary (Full): Rs.80000.00
[2025-10-27T05:51:26.921Z] [LOG]    Actual Earned Base: Rs.19199.97
[2025-10-27T05:51:26.921Z] [LOG]    Attendance Shortfall: Rs.47999.93
[2025-10-27T05:51:26.921Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:51:26.921Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:51:26.921Z] [LOG]    Gross Salary: 19199.97
[2025-10-27T05:51:26.921Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:51:26.921Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:51:26.922Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:26.922Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:51:26.922Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:26.922Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:51:26.922Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:26.922Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:51:26.923Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:26.923Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:51:26.923Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:26.924Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:51:26.924Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:26.924Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:51:26.924Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:26.925Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:51:26.925Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:26.925Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:51:26.925Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:26.926Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:51:26.926Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:26.926Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:51:26.926Z] [LOG]    EPF/ETF calculated on: Rs.19199.97
[2025-10-27T05:51:26.927Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:51:26.927Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:51:26.927Z] [LOG] 💰 GROSS CALCULATION for Shandeep null:
[2025-10-27T05:51:26.928Z] [LOG]    Base Salary: 80000
[2025-10-27T05:51:26.928Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:51:26.928Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:51:26.928Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:26.929Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:51:26.929Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:26.929Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:51:26.929Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:27.185Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:51:27.185Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:51:27.185Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:51:27.185Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:51:27.185Z] [LOG]    Actual Earned Base: Rs.19199.97
[2025-10-27T05:51:27.186Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:51:27.186Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:51:27.186Z] [LOG]    = Gross Salary: Rs.19199.97
[2025-10-27T05:51:27.186Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:51:27.186Z] [LOG]    Attendance Shortfall (Info): Rs.47999.93
[2025-10-27T05:51:27.186Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:51:27.186Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:51:27.187Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:51:27.187Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:51:27.187Z] [LOG]    Gross Salary: Rs.19199.97
[2025-10-27T05:51:27.187Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:51:27.187Z] [LOG]    = NET SALARY: Rs.19199.97
[2025-10-27T05:51:27.187Z] [LOG] 
💾 Database Update:
[2025-10-27T05:51:27.188Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:51:27.188Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:51:27.404Z] [LOG] 
📝 Components to save:
[2025-10-27T05:51:27.404Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:51:27.404Z] [LOG]    Deduction components: 1
[2025-10-27T05:51:27.404Z] [LOG] Creating components for record b7cd6adc-9a59-47e8-81f6-4b8d07d9ec4d: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:51:27.405Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 19199.97
}
[2025-10-27T05:51:27.609Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:51:27.820Z] [LOG] Created payroll_record_component: 5c6d9ad0-1bf9-4fd1-9e7c-79bc05a6e684 for Base Salary
[2025-10-27T05:51:27.821Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 47999.925
}
[2025-10-27T05:51:28.026Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:51:28.233Z] [LOG] Created payroll_record_component: 87c769b5-a364-4d13-a0a3-628ab288334b for Attendance Shortfall (Info)
[2025-10-27T05:51:28.625Z] [LOG] ✅ Financial balances updated successfully for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:28.626Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:51:28.626Z] [LOG] 
======================================================================
[2025-10-27T05:51:28.626Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Shandeep null
[2025-10-27T05:51:28.626Z] [LOG] ======================================================================
[2025-10-27T05:51:28.627Z] [LOG]    Base Salary (Full): Rs.80000.00
[2025-10-27T05:51:28.627Z] [LOG]    Actual Earned Base (Attendance-based): Rs.19199.97
[2025-10-27T05:51:28.627Z] [LOG]    Attendance Shortfall: Rs.47999.93
[2025-10-27T05:51:28.627Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:28.628Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:51:28.628Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:51:28.628Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:28.628Z] [LOG]    GROSS SALARY: Rs.19199.97
[2025-10-27T05:51:28.629Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:28.629Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:51:28.629Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:51:28.629Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:51:28.629Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:51:28.630Z] [LOG]       - Attendance Shortfall (Info): Rs.47999.93
[2025-10-27T05:51:28.630Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:51:28.630Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:28.630Z] [LOG]    NET SALARY: Rs.19199.97
[2025-10-27T05:51:28.631Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:51:28.631Z] [LOG] ======================================================================

[2025-10-27T05:51:28.631Z] [LOG] ✅ Shandeep null: Calculation completed successfully
[2025-10-27T05:51:28.631Z] [LOG] 📊 Progress: 25/34 (73.5%)
[2025-10-27T05:51:28.631Z] [LOG] 
🧮 Processing: Piyumi null (EMP000025)
[2025-10-27T05:51:28.632Z] [LOG] 📋 Record ID: ca14c767-e35b-47ec-bccb-49570d7009dd
[2025-10-27T05:51:28.632Z] [LOG] 
======================================================================
[2025-10-27T05:51:28.632Z] [LOG] 🧮 CALCULATING PAYROLL: Piyumi null (EMP000025)
[2025-10-27T05:51:28.633Z] [LOG] ======================================================================
[2025-10-27T05:51:29.457Z] [LOG] 🔍 Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-27T05:51:29.457Z] [LOG]    Total components: 13
[2025-10-27T05:51:29.457Z] [LOG]    Applicable components: 13
[2025-10-27T05:51:29.458Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T05:51:30.649Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:51:30.649Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:51:30.861Z] [LOG] 📊 Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:31.064Z] [LOG] 📊 Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:31.261Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:31.261Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:51:31.262Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:51:31.653Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:51:31.654Z] [LOG]    👤 Employee: Piyumi null (EMP000025)
[2025-10-27T05:51:31.654Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:51:31.654Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:51:31.654Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T05:51:31.654Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:51:31.853Z] [LOG] 
   💵 Pre-calculated Rates for Piyumi null (EMP000025):
[2025-10-27T05:51:31.853Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-27T05:51:31.853Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-27T05:51:31.854Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-27T05:51:31.854Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:51:31.854Z] [LOG] 
   📊 Full Period Working Days for Piyumi null (EMP000025):
[2025-10-27T05:51:31.854Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:51:32.448Z] [LOG] 
   📊 Working Days for Expected Calculation for Piyumi null (EMP000025):
[2025-10-27T05:51:32.448Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:51:32.448Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:51:32.651Z] [LOG] 
   ⏰ Calculating Completed Hours for Piyumi null (EMP000025) - All completed sessions:
[2025-10-27T05:51:32.652Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:51:32.652Z] [LOG]       Total completed sessions found: 5
[2025-10-27T05:51:32.652Z] [LOG] 
      📋 Attendance Breakdown for Piyumi null (EMP000025):
[2025-10-27T05:51:32.652Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:51:32.653Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:51:32.653Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:51:32.653Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:51:32.653Z] [LOG]          5. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:51:32.853Z] [LOG] 
      📊 Aggregated Totals for Piyumi null (EMP000025):
[2025-10-27T05:51:32.854Z] [LOG]          Weekday: 34.00h
[2025-10-27T05:51:32.854Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:51:32.854Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:51:32.854Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:51:32.855Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Piyumi null (EMP000025) - completed sessions only:
[2025-10-27T05:51:32.855Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:51:32.855Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:51:32.856Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:51:32.856Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:51:32.856Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Piyumi null (EMP000025) - completed sessions only:
[2025-10-27T05:51:32.856Z] [LOG]       Weekday: 34.00h
[2025-10-27T05:51:32.857Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:51:32.857Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:51:32.857Z] [LOG]       Total Actual: 38.50h
[2025-10-27T05:51:32.857Z] [LOG] 
   💵 EXPECTED Earned Salary for Piyumi null (EMP000025) - until NOW:
[2025-10-27T05:51:32.858Z] [LOG]       Weekday: 144.50h × Rs.235.29 = Rs.33999.40
[2025-10-27T05:51:32.858Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-27T05:51:32.858Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:51:32.858Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:32.859Z] [LOG]       Total Expected Earned: Rs.41999.32
[2025-10-27T05:51:32.859Z] [LOG] 
   💵 ACTUAL Earned Salary for Piyumi null (EMP000025) - including live session:
[2025-10-27T05:51:32.859Z] [LOG]       Weekday: 34.00h × Rs.235.29 = Rs.7999.86
[2025-10-27T05:51:32.859Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-27T05:51:32.860Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:51:32.860Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:32.860Z] [LOG]       Total Actual Earned: Rs.9999.84
[2025-10-27T05:51:32.860Z] [LOG] 
   📊 FINAL CALCULATION for Piyumi null (EMP000025):
[2025-10-27T05:51:32.861Z] [LOG]       Calculated At: Oct 27, 2025, 11:21:32
[2025-10-27T05:51:32.861Z] [LOG]       Expected Earned: Rs.41999.32
[2025-10-27T05:51:32.861Z] [LOG]       Actual Earned: Rs.9999.84
[2025-10-27T05:51:32.861Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:32.862Z] [LOG]       Attendance Deduction: Rs.31999.48
[2025-10-27T05:51:32.862Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:51:32.862Z] [LOG]       📉 Shortfall for Piyumi null: 124.00 hours (76.19% of expected)
[2025-10-27T05:51:32.862Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:51:32.863Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:51:32.863Z] [LOG]    Actual Earned Base: Rs.9999.84
[2025-10-27T05:51:32.863Z] [LOG]    Attendance Shortfall: Rs.31999.48
[2025-10-27T05:51:32.863Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:51:32.864Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:51:32.864Z] [LOG]    Gross Salary: 9999.84
[2025-10-27T05:51:32.864Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:51:32.864Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:51:32.865Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:32.865Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:51:32.865Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:32.865Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:51:32.865Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:32.866Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:51:32.866Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:32.866Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:51:32.866Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:32.866Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:51:32.867Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:32.867Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:51:32.867Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:32.867Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:51:32.868Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:32.868Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:51:32.868Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:32.868Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:51:32.868Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:32.869Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:51:32.869Z] [LOG]    EPF/ETF calculated on: Rs.9999.84
[2025-10-27T05:51:32.869Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:51:32.869Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:51:32.869Z] [LOG] 💰 GROSS CALCULATION for Piyumi null:
[2025-10-27T05:51:32.870Z] [LOG]    Base Salary: 50000
[2025-10-27T05:51:32.870Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:51:32.870Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:51:32.870Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:32.870Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:51:32.871Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:32.871Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:51:32.871Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:33.073Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:51:33.073Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:51:33.073Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:51:33.074Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:51:33.074Z] [LOG]    Actual Earned Base: Rs.9999.84
[2025-10-27T05:51:33.074Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:51:33.074Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:51:33.074Z] [LOG]    = Gross Salary: Rs.9999.84
[2025-10-27T05:51:33.074Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:51:33.074Z] [LOG]    Attendance Shortfall (Info): Rs.31999.48
[2025-10-27T05:51:33.075Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:51:33.075Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:51:33.075Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:51:33.075Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:51:33.075Z] [LOG]    Gross Salary: Rs.9999.84
[2025-10-27T05:51:33.075Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:51:33.075Z] [LOG]    = NET SALARY: Rs.9999.84
[2025-10-27T05:51:33.075Z] [LOG] 
💾 Database Update:
[2025-10-27T05:51:33.076Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:51:33.076Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:51:33.282Z] [LOG] 
📝 Components to save:
[2025-10-27T05:51:33.282Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:51:33.282Z] [LOG]    Deduction components: 1
[2025-10-27T05:51:33.283Z] [LOG] Creating components for record ca14c767-e35b-47ec-bccb-49570d7009dd: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:51:33.283Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 9999.84
}
[2025-10-27T05:51:33.508Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:51:33.735Z] [LOG] Created payroll_record_component: 90ed58fe-2a77-4bde-a378-865ece2f066c for Base Salary
[2025-10-27T05:51:33.735Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 31999.484999999997
}
[2025-10-27T05:51:33.933Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:51:34.132Z] [LOG] Created payroll_record_component: 56b155b9-e0c9-463d-a69b-d01fe48643b3 for Attendance Shortfall (Info)
[2025-10-27T05:51:34.516Z] [LOG] ✅ Financial balances updated successfully for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:34.517Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:51:34.517Z] [LOG] 
======================================================================
[2025-10-27T05:51:34.517Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Piyumi null
[2025-10-27T05:51:34.518Z] [LOG] ======================================================================
[2025-10-27T05:51:34.518Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:51:34.518Z] [LOG]    Actual Earned Base (Attendance-based): Rs.9999.84
[2025-10-27T05:51:34.518Z] [LOG]    Attendance Shortfall: Rs.31999.48
[2025-10-27T05:51:34.519Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:34.519Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:51:34.519Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:51:34.519Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:34.519Z] [LOG]    GROSS SALARY: Rs.9999.84
[2025-10-27T05:51:34.520Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:34.520Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:51:34.520Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:51:34.520Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:51:34.520Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:51:34.521Z] [LOG]       - Attendance Shortfall (Info): Rs.31999.48
[2025-10-27T05:51:34.521Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:51:34.521Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:34.521Z] [LOG]    NET SALARY: Rs.9999.84
[2025-10-27T05:51:34.521Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:51:34.522Z] [LOG] ======================================================================

[2025-10-27T05:51:34.522Z] [LOG] ✅ Piyumi null: Calculation completed successfully
[2025-10-27T05:51:34.522Z] [LOG] 📊 Progress: 26/34 (76.5%)
[2025-10-27T05:51:34.522Z] [LOG] 
🧮 Processing: Uthpala null (EMP000006)
[2025-10-27T05:51:34.522Z] [LOG] 📋 Record ID: d7ff15d6-2626-4c65-8b0c-4c344062bdfe
[2025-10-27T05:51:34.523Z] [LOG] 
======================================================================
[2025-10-27T05:51:34.523Z] [LOG] 🧮 CALCULATING PAYROLL: Uthpala null (EMP000006)
[2025-10-27T05:51:34.523Z] [LOG] ======================================================================
[2025-10-27T05:51:35.322Z] [LOG] 🔍 Component filtering for employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-27T05:51:35.322Z] [LOG]    Total components: 13
[2025-10-27T05:51:35.323Z] [LOG]    Applicable components: 13
[2025-10-27T05:51:35.323Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-27T05:51:37.747Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:51:37.753Z] [LOG] 🔄 Processing financial records for employee 0143a539-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:51:37.998Z] [LOG] 📊 Found 0 active loans for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:38.202Z] [LOG] 📊 Found 0 active advances for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:38.406Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:38.407Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:51:38.408Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:51:39.625Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:51:39.626Z] [LOG]    👤 Employee: Uthpala null (EMP000006)
[2025-10-27T05:51:39.627Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:51:39.627Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:51:39.628Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-27T05:51:39.628Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:51:43.008Z] [LOG] 
   💵 Pre-calculated Rates for Uthpala null (EMP000006):
[2025-10-27T05:51:43.009Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-27T05:51:43.009Z] [LOG]       Weekday Hourly Rate: Rs.500.00
[2025-10-27T05:51:43.010Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-27T05:51:43.011Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:51:43.011Z] [LOG] 
   📊 Full Period Working Days for Uthpala null (EMP000006):
[2025-10-27T05:51:43.012Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:51:43.598Z] [LOG] 
   📊 Working Days for Expected Calculation for Uthpala null (EMP000006):
[2025-10-27T05:51:43.599Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:51:43.599Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:51:43.802Z] [LOG] 
   ⏰ Calculating Completed Hours for Uthpala null (EMP000006) - All completed sessions:
[2025-10-27T05:51:43.803Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:51:43.804Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:51:43.804Z] [LOG] 
      📋 Attendance Breakdown for Uthpala null (EMP000006):
[2025-10-27T05:51:43.805Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:51:43.805Z] [LOG]          2. 2025-10-15 (Weekday): 7.50h
[2025-10-27T05:51:43.806Z] [LOG]          3. 2025-10-16 (Weekday): 7.50h
[2025-10-27T05:51:43.806Z] [LOG]          4. 2025-10-22 (Weekday): 7.50h
[2025-10-27T05:51:43.807Z] [LOG]          5. 2025-10-23 (Weekday): 7.50h
[2025-10-27T05:51:43.808Z] [LOG]          6. 2025-10-24 (Weekday): 0.00h
[2025-10-27T05:51:44.018Z] [LOG] 
      📊 Aggregated Totals for Uthpala null (EMP000006):
[2025-10-27T05:51:44.019Z] [LOG]          Weekday: 30.00h
[2025-10-27T05:51:44.019Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:51:44.020Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:51:44.021Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:51:44.021Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Uthpala null (EMP000006) - completed sessions only:
[2025-10-27T05:51:44.022Z] [LOG]       Weekday: 136.00h
[2025-10-27T05:51:44.023Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:51:44.023Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:51:44.024Z] [LOG]       Total Expected: 154.00h
[2025-10-27T05:51:44.024Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Uthpala null (EMP000006) - completed sessions only:
[2025-10-27T05:51:44.025Z] [LOG]       Weekday: 30.00h
[2025-10-27T05:51:44.026Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:51:44.029Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:51:44.029Z] [LOG]       Total Actual: 34.50h
[2025-10-27T05:51:44.030Z] [LOG] 
   💵 EXPECTED Earned Salary for Uthpala null (EMP000006) - until NOW:
[2025-10-27T05:51:44.031Z] [LOG]       Weekday: 136.00h × Rs.500.00 = Rs.68000.00
[2025-10-27T05:51:44.031Z] [LOG]       Saturday: 18.00h × Rs.888.89 = Rs.16000.02
[2025-10-27T05:51:44.032Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:51:44.033Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:44.033Z] [LOG]       Total Expected Earned: Rs.84000.02
[2025-10-27T05:51:44.034Z] [LOG] 
   💵 ACTUAL Earned Salary for Uthpala null (EMP000006) - including live session:
[2025-10-27T05:51:44.035Z] [LOG]       Weekday: 30.00h × Rs.500.00 = Rs.15000.00
[2025-10-27T05:51:44.035Z] [LOG]       Saturday: 4.50h × Rs.888.89 = Rs.4000.01
[2025-10-27T05:51:44.036Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:51:44.036Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:44.037Z] [LOG]       Total Actual Earned: Rs.19000.01
[2025-10-27T05:51:44.038Z] [LOG] 
   📊 FINAL CALCULATION for Uthpala null (EMP000006):
[2025-10-27T05:51:44.039Z] [LOG]       Calculated At: Oct 27, 2025, 11:21:44
[2025-10-27T05:51:44.040Z] [LOG]       Expected Earned: Rs.84000.02
[2025-10-27T05:51:44.040Z] [LOG]       Actual Earned: Rs.19000.01
[2025-10-27T05:51:44.041Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:44.041Z] [LOG]       Attendance Deduction: Rs.65000.01
[2025-10-27T05:51:44.042Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:51:44.042Z] [LOG]       📉 Shortfall for Uthpala null: 119.50 hours (77.38% of expected)
[2025-10-27T05:51:44.044Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:51:44.046Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-27T05:51:44.046Z] [LOG]    Actual Earned Base: Rs.19000.01
[2025-10-27T05:51:44.047Z] [LOG]    Attendance Shortfall: Rs.65000.01
[2025-10-27T05:51:44.048Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:51:44.048Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:51:44.049Z] [LOG]    Gross Salary: 19000.005
[2025-10-27T05:51:44.049Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:51:44.050Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:51:44.051Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:44.051Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:51:44.052Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:44.052Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:51:44.052Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:44.052Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:51:44.053Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:44.053Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:51:44.053Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:44.054Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:51:44.054Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:44.054Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:51:44.055Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:44.055Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:51:44.055Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:44.056Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:51:44.056Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:44.056Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:51:44.057Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:44.057Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:51:44.057Z] [LOG]    EPF/ETF calculated on: Rs.19000.01
[2025-10-27T05:51:44.057Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:51:44.058Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:51:44.058Z] [LOG] 💰 GROSS CALCULATION for Uthpala null:
[2025-10-27T05:51:44.058Z] [LOG]    Base Salary: 100000
[2025-10-27T05:51:44.059Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:51:44.059Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:51:44.059Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:44.060Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:51:44.061Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:44.061Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:51:44.061Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:44.254Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:51:44.255Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:51:44.255Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:51:44.256Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:51:44.256Z] [LOG]    Actual Earned Base: Rs.19000.01
[2025-10-27T05:51:44.256Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:51:44.257Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:51:44.257Z] [LOG]    = Gross Salary: Rs.19000.01
[2025-10-27T05:51:44.257Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:51:44.258Z] [LOG]    Attendance Shortfall (Info): Rs.65000.01
[2025-10-27T05:51:44.258Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:51:44.258Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:51:44.259Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:51:44.259Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:51:44.261Z] [LOG]    Gross Salary: Rs.19000.01
[2025-10-27T05:51:44.262Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:51:44.262Z] [LOG]    = NET SALARY: Rs.19000.01
[2025-10-27T05:51:44.263Z] [LOG] 
💾 Database Update:
[2025-10-27T05:51:44.263Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:51:44.263Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:51:44.466Z] [LOG] 
📝 Components to save:
[2025-10-27T05:51:44.466Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:51:44.467Z] [LOG]    Deduction components: 1
[2025-10-27T05:51:44.467Z] [LOG] Creating components for record d7ff15d6-2626-4c65-8b0c-4c344062bdfe: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:51:44.469Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 19000.005
}
[2025-10-27T05:51:44.661Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:51:44.871Z] [LOG] Created payroll_record_component: e4295144-5c0d-49ab-b1ba-c34604214f5d for Base Salary
[2025-10-27T05:51:44.872Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 65000.015
}
[2025-10-27T05:51:45.070Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:51:45.278Z] [LOG] Created payroll_record_component: 8c7fdf79-60ca-4fd1-994c-9892a4cabc86 for Attendance Shortfall (Info)
[2025-10-27T05:51:45.678Z] [LOG] ✅ Financial balances updated successfully for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:45.678Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:51:45.679Z] [LOG] 
======================================================================
[2025-10-27T05:51:45.680Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Uthpala null
[2025-10-27T05:51:45.680Z] [LOG] ======================================================================
[2025-10-27T05:51:45.681Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-27T05:51:45.682Z] [LOG]    Actual Earned Base (Attendance-based): Rs.19000.01
[2025-10-27T05:51:45.682Z] [LOG]    Attendance Shortfall: Rs.65000.01
[2025-10-27T05:51:45.683Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:45.683Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:51:45.684Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:51:45.685Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:45.685Z] [LOG]    GROSS SALARY: Rs.19000.01
[2025-10-27T05:51:45.686Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:45.687Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:51:45.687Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:51:45.688Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:51:45.688Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:51:45.689Z] [LOG]       - Attendance Shortfall (Info): Rs.65000.01
[2025-10-27T05:51:45.690Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:51:45.691Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:45.691Z] [LOG]    NET SALARY: Rs.19000.01
[2025-10-27T05:51:45.692Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:51:45.692Z] [LOG] ======================================================================

[2025-10-27T05:51:45.695Z] [LOG] ✅ Uthpala null: Calculation completed successfully
[2025-10-27T05:51:45.696Z] [LOG] 📊 Progress: 27/34 (79.4%)
[2025-10-27T05:51:45.697Z] [LOG] 
🧮 Processing: Hari null (EMP000017)
[2025-10-27T05:51:45.698Z] [LOG] 📋 Record ID: dc8c7789-af1a-450c-a129-82f1bf6a74b1
[2025-10-27T05:51:45.698Z] [LOG] 
======================================================================
[2025-10-27T05:51:45.699Z] [LOG] 🧮 CALCULATING PAYROLL: Hari null (EMP000017)
[2025-10-27T05:51:45.699Z] [LOG] ======================================================================
[2025-10-27T05:51:46.494Z] [LOG] 🔍 Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-27T05:51:46.495Z] [LOG]    Total components: 13
[2025-10-27T05:51:46.496Z] [LOG]    Applicable components: 13
[2025-10-27T05:51:46.497Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T05:51:47.695Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:51:47.695Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:51:47.895Z] [LOG] 📊 Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:48.099Z] [LOG] 📊 Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:48.301Z] [LOG] 📊 Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:48.301Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:51:48.302Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:51:48.704Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:51:48.704Z] [LOG]    👤 Employee: Hari null (EMP000017)
[2025-10-27T05:51:48.704Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:51:48.705Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:51:48.705Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T05:51:48.706Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:51:48.914Z] [LOG] 
   💵 Pre-calculated Rates for Hari null (EMP000017):
[2025-10-27T05:51:48.915Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-27T05:51:48.915Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-27T05:51:48.916Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-27T05:51:48.916Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:51:48.917Z] [LOG] 
   📊 Full Period Working Days for Hari null (EMP000017):
[2025-10-27T05:51:48.917Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:51:49.528Z] [LOG] 
   📊 Working Days for Expected Calculation for Hari null (EMP000017):
[2025-10-27T05:51:49.529Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:51:49.530Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:51:49.736Z] [LOG] 
   ⏰ Calculating Completed Hours for Hari null (EMP000017) - All completed sessions:
[2025-10-27T05:51:49.736Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:51:49.737Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:51:49.737Z] [LOG] 
      📋 Attendance Breakdown for Hari null (EMP000017):
[2025-10-27T05:51:49.738Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:51:49.739Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:51:49.739Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:51:49.740Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:51:49.740Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:51:49.741Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:51:49.942Z] [LOG] 
      📊 Aggregated Totals for Hari null (EMP000017):
[2025-10-27T05:51:49.943Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:51:49.944Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:51:49.944Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:51:49.945Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:51:49.946Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Hari null (EMP000017) - completed sessions only:
[2025-10-27T05:51:49.946Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:51:49.947Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:51:49.947Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:51:49.948Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:51:49.949Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Hari null (EMP000017) - completed sessions only:
[2025-10-27T05:51:49.953Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:51:49.954Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:51:49.955Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:51:49.956Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:51:49.956Z] [LOG] 
   💵 EXPECTED Earned Salary for Hari null (EMP000017) - until NOW:
[2025-10-27T05:51:49.957Z] [LOG]       Weekday: 144.50h × Rs.235.29 = Rs.33999.40
[2025-10-27T05:51:49.958Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-27T05:51:49.959Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:51:49.959Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:49.964Z] [LOG]       Total Expected Earned: Rs.41999.32
[2025-10-27T05:51:49.964Z] [LOG] 
   💵 ACTUAL Earned Salary for Hari null (EMP000017) - including live session:
[2025-10-27T05:51:49.965Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-27T05:51:49.966Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-27T05:51:49.966Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:51:49.967Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:49.967Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-27T05:51:49.969Z] [LOG] 
   📊 FINAL CALCULATION for Hari null (EMP000017):
[2025-10-27T05:51:49.969Z] [LOG]       Calculated At: Oct 27, 2025, 11:21:49
[2025-10-27T05:51:49.970Z] [LOG]       Expected Earned: Rs.41999.32
[2025-10-27T05:51:49.971Z] [LOG]       Actual Earned: Rs.11999.80
[2025-10-27T05:51:49.971Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:49.972Z] [LOG]       Attendance Deduction: Rs.29999.52
[2025-10-27T05:51:49.972Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:51:49.973Z] [LOG]       📉 Shortfall for Hari null: 115.50 hours (71.43% of expected)
[2025-10-27T05:51:49.973Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:51:49.975Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:51:49.975Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:51:49.976Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:51:49.978Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:51:49.980Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:51:49.980Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-27T05:51:49.981Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:51:49.982Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:51:49.982Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:49.983Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:51:49.984Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:49.984Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:51:49.985Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:49.985Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:51:49.986Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:49.986Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:51:49.987Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:49.988Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:51:49.988Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:49.989Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:51:49.990Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:49.990Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:51:49.991Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:49.991Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:51:49.992Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:49.992Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:51:49.992Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:49.993Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:51:49.993Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-27T05:51:49.994Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:51:49.994Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:51:49.995Z] [LOG] 💰 GROSS CALCULATION for Hari null:
[2025-10-27T05:51:49.995Z] [LOG]    Base Salary: 50000
[2025-10-27T05:51:49.995Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:51:49.996Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:51:49.996Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:49.996Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:51:49.997Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:49.997Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:51:49.997Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:50.198Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:51:50.199Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:51:50.199Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:51:50.200Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:51:50.201Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:51:50.201Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:51:50.202Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:51:50.202Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-27T05:51:50.203Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:51:50.204Z] [LOG]    Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:51:50.204Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:51:50.205Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:51:50.206Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:51:50.207Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:51:50.208Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-27T05:51:50.209Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:51:50.209Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-27T05:51:50.211Z] [LOG] 
💾 Database Update:
[2025-10-27T05:51:50.212Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:51:50.213Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:51:50.424Z] [LOG] 
📝 Components to save:
[2025-10-27T05:51:50.424Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:51:50.425Z] [LOG]    Deduction components: 1
[2025-10-27T05:51:50.425Z] [LOG] Creating components for record dc8c7789-af1a-450c-a129-82f1bf6a74b1: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:51:50.427Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-27T05:51:50.622Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:51:50.821Z] [LOG] Created payroll_record_component: 3e067bf2-e0a6-4663-b6e7-af1747067d18 for Base Salary
[2025-10-27T05:51:50.822Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 29999.519999999997
}
[2025-10-27T05:51:51.030Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:51:51.229Z] [LOG] Created payroll_record_component: 9094b43b-e13f-466c-8edc-17d4c52a9f89 for Attendance Shortfall (Info)
[2025-10-27T05:51:51.631Z] [LOG] ✅ Financial balances updated successfully for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:51.631Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:51:51.632Z] [LOG] 
======================================================================
[2025-10-27T05:51:51.634Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Hari null
[2025-10-27T05:51:51.634Z] [LOG] ======================================================================
[2025-10-27T05:51:51.635Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:51:51.636Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-27T05:51:51.636Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:51:51.637Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:51.638Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:51:51.639Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:51:51.640Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:51.640Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-27T05:51:51.641Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:51.642Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:51:51.642Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:51:51.644Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:51:51.645Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:51:51.646Z] [LOG]       - Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:51:51.647Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:51:51.647Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:51.648Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-27T05:51:51.649Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:51:51.651Z] [LOG] ======================================================================

[2025-10-27T05:51:51.652Z] [LOG] ✅ Hari null: Calculation completed successfully
[2025-10-27T05:51:51.652Z] [LOG] 📊 Progress: 28/34 (82.4%)
[2025-10-27T05:51:51.653Z] [LOG] 
🧮 Processing: Jessie null (EMP000013)
[2025-10-27T05:51:51.654Z] [LOG] 📋 Record ID: dd68ff6d-6b6c-4113-8f1a-3dc31b08c665
[2025-10-27T05:51:51.655Z] [LOG] 
======================================================================
[2025-10-27T05:51:51.655Z] [LOG] 🧮 CALCULATING PAYROLL: Jessie null (EMP000013)
[2025-10-27T05:51:51.656Z] [LOG] ======================================================================
[2025-10-27T05:51:52.438Z] [LOG] 🔍 Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-27T05:51:52.438Z] [LOG]    Total components: 13
[2025-10-27T05:51:52.439Z] [LOG]    Applicable components: 13
[2025-10-27T05:51:52.439Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-27T05:51:53.624Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:51:53.624Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:51:53.824Z] [LOG] 📊 Found 0 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:54.039Z] [LOG] 📊 Found 0 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:54.241Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:54.242Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:51:54.243Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:51:54.647Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:51:54.647Z] [LOG]    👤 Employee: Jessie null (EMP000013)
[2025-10-27T05:51:54.648Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:51:54.648Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:51:54.648Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-27T05:51:54.648Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:51:54.854Z] [LOG] 
   💵 Pre-calculated Rates for Jessie null (EMP000013):
[2025-10-27T05:51:54.855Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-27T05:51:54.855Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-27T05:51:54.856Z] [LOG]       Saturday Hourly Rate: Rs.533.33
[2025-10-27T05:51:54.856Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:51:54.857Z] [LOG] 
   📊 Full Period Working Days for Jessie null (EMP000013):
[2025-10-27T05:51:54.857Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:51:55.462Z] [LOG] 
   📊 Working Days for Expected Calculation for Jessie null (EMP000013):
[2025-10-27T05:51:55.462Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:51:55.463Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:51:55.677Z] [LOG] 
   ⏰ Calculating Completed Hours for Jessie null (EMP000013) - All completed sessions:
[2025-10-27T05:51:55.679Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:51:55.679Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:51:55.680Z] [LOG] 
      📋 Attendance Breakdown for Jessie null (EMP000013):
[2025-10-27T05:51:55.681Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:51:55.681Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:51:55.682Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:51:55.682Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:51:55.683Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:51:55.683Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:51:55.885Z] [LOG] 
      📊 Aggregated Totals for Jessie null (EMP000013):
[2025-10-27T05:51:55.886Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:51:55.886Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:51:55.886Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:51:55.887Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:51:55.887Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Jessie null (EMP000013) - completed sessions only:
[2025-10-27T05:51:55.887Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:51:55.888Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:51:55.888Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:51:55.888Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:51:55.889Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Jessie null (EMP000013) - completed sessions only:
[2025-10-27T05:51:55.889Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:51:55.889Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:51:55.890Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:51:55.890Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:51:55.890Z] [LOG] 
   💵 EXPECTED Earned Salary for Jessie null (EMP000013) - until NOW:
[2025-10-27T05:51:55.891Z] [LOG]       Weekday: 144.50h × Rs.282.35 = Rs.40799.58
[2025-10-27T05:51:55.891Z] [LOG]       Saturday: 18.00h × Rs.533.33 = Rs.9599.94
[2025-10-27T05:51:55.892Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:51:55.892Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:55.893Z] [LOG]       Total Expected Earned: Rs.50399.52
[2025-10-27T05:51:55.893Z] [LOG] 
   💵 ACTUAL Earned Salary for Jessie null (EMP000013) - including live session:
[2025-10-27T05:51:55.893Z] [LOG]       Weekday: 42.50h × Rs.282.35 = Rs.11999.88
[2025-10-27T05:51:55.894Z] [LOG]       Saturday: 4.50h × Rs.533.33 = Rs.2399.99
[2025-10-27T05:51:55.894Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:51:55.894Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:55.895Z] [LOG]       Total Actual Earned: Rs.14399.86
[2025-10-27T05:51:55.895Z] [LOG] 
   📊 FINAL CALCULATION for Jessie null (EMP000013):
[2025-10-27T05:51:55.896Z] [LOG]       Calculated At: Oct 27, 2025, 11:21:55
[2025-10-27T05:51:55.897Z] [LOG]       Expected Earned: Rs.50399.52
[2025-10-27T05:51:55.897Z] [LOG]       Actual Earned: Rs.14399.86
[2025-10-27T05:51:55.897Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:51:55.898Z] [LOG]       Attendance Deduction: Rs.35999.66
[2025-10-27T05:51:55.898Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:51:55.898Z] [LOG]       📉 Shortfall for Jessie null: 115.50 hours (71.43% of expected)
[2025-10-27T05:51:55.899Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:51:55.899Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-27T05:51:55.899Z] [LOG]    Actual Earned Base: Rs.14399.86
[2025-10-27T05:51:55.900Z] [LOG]    Attendance Shortfall: Rs.35999.66
[2025-10-27T05:51:55.900Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:51:55.900Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:51:55.901Z] [LOG]    Gross Salary: 14399.860000000002
[2025-10-27T05:51:55.901Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:51:55.901Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:51:55.901Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:55.901Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:51:55.902Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:55.902Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:51:55.902Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:55.902Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:51:55.902Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:55.902Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:51:55.902Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:55.902Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:51:55.903Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:55.903Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:51:55.903Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:55.903Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:51:55.903Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:55.903Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:51:55.903Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:55.904Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:51:55.904Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:55.904Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:51:55.904Z] [LOG]    EPF/ETF calculated on: Rs.14399.86
[2025-10-27T05:51:55.904Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:51:55.904Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:51:55.904Z] [LOG] 💰 GROSS CALCULATION for Jessie null:
[2025-10-27T05:51:55.905Z] [LOG]    Base Salary: 60000
[2025-10-27T05:51:55.905Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:51:55.905Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:51:55.905Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:55.905Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:51:55.905Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:55.905Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:51:55.906Z] [LOG]    Fixed amount: 0
[2025-10-27T05:51:56.101Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:51:56.102Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:51:56.102Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:51:56.102Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:51:56.103Z] [LOG]    Actual Earned Base: Rs.14399.86
[2025-10-27T05:51:56.103Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:51:56.103Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:51:56.104Z] [LOG]    = Gross Salary: Rs.14399.86
[2025-10-27T05:51:56.104Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:51:56.104Z] [LOG]    Attendance Shortfall (Info): Rs.35999.66
[2025-10-27T05:51:56.105Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:51:56.105Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:51:56.106Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:51:56.106Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:51:56.106Z] [LOG]    Gross Salary: Rs.14399.86
[2025-10-27T05:51:56.106Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:51:56.107Z] [LOG]    = NET SALARY: Rs.14399.86
[2025-10-27T05:51:56.107Z] [LOG] 
💾 Database Update:
[2025-10-27T05:51:56.107Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:51:56.107Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:51:56.310Z] [LOG] 
📝 Components to save:
[2025-10-27T05:51:56.311Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:51:56.312Z] [LOG]    Deduction components: 1
[2025-10-27T05:51:56.312Z] [LOG] Creating components for record dd68ff6d-6b6c-4113-8f1a-3dc31b08c665: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:51:56.314Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 14399.860000000002
}
[2025-10-27T05:51:56.518Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:51:56.725Z] [LOG] Created payroll_record_component: a5777f28-1091-4c7a-84f8-2f94fd6cf91b for Base Salary
[2025-10-27T05:51:56.726Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 35999.655000000006
}
[2025-10-27T05:51:56.926Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:51:57.172Z] [LOG] Created payroll_record_component: baedd360-edbf-4f82-a368-550651988fe5 for Attendance Shortfall (Info)
[2025-10-27T05:51:57.560Z] [LOG] ✅ Financial balances updated successfully for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:57.560Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:51:57.561Z] [LOG] 
======================================================================
[2025-10-27T05:51:57.562Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Jessie null
[2025-10-27T05:51:57.562Z] [LOG] ======================================================================
[2025-10-27T05:51:57.563Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-27T05:51:57.563Z] [LOG]    Actual Earned Base (Attendance-based): Rs.14399.86
[2025-10-27T05:51:57.564Z] [LOG]    Attendance Shortfall: Rs.35999.66
[2025-10-27T05:51:57.564Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:57.565Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:51:57.565Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:51:57.566Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:57.567Z] [LOG]    GROSS SALARY: Rs.14399.86
[2025-10-27T05:51:57.568Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:57.568Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:51:57.569Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:51:57.569Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:51:57.570Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:51:57.571Z] [LOG]       - Attendance Shortfall (Info): Rs.35999.66
[2025-10-27T05:51:57.571Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:51:57.572Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:51:57.573Z] [LOG]    NET SALARY: Rs.14399.86
[2025-10-27T05:51:57.573Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:51:57.574Z] [LOG] ======================================================================

[2025-10-27T05:51:57.574Z] [LOG] ✅ Jessie null: Calculation completed successfully
[2025-10-27T05:51:57.575Z] [LOG] 📊 Progress: 29/34 (85.3%)
[2025-10-27T05:51:57.576Z] [LOG] 
🧮 Processing: Franklin null (EMP000018)
[2025-10-27T05:51:57.577Z] [LOG] 📋 Record ID: e645aba3-67f8-4021-b4ad-5492b8d6c3e4
[2025-10-27T05:51:57.578Z] [LOG] 
======================================================================
[2025-10-27T05:51:57.579Z] [LOG] 🧮 CALCULATING PAYROLL: Franklin null (EMP000018)
[2025-10-27T05:51:57.579Z] [LOG] ======================================================================
[2025-10-27T05:51:58.356Z] [LOG] 🔍 Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-27T05:51:58.357Z] [LOG]    Total components: 13
[2025-10-27T05:51:58.357Z] [LOG]    Applicable components: 13
[2025-10-27T05:51:58.357Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-27T05:51:59.558Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:51:59.559Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:51:59.764Z] [LOG] 📊 Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-27T05:51:59.973Z] [LOG] 📊 Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:00.179Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:00.179Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:52:00.180Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:52:00.574Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:52:00.575Z] [LOG]    👤 Employee: Franklin null (EMP000018)
[2025-10-27T05:52:00.576Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:52:00.577Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:52:00.577Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T05:52:00.578Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:52:00.793Z] [LOG] 
   💵 Pre-calculated Rates for Franklin null (EMP000018):
[2025-10-27T05:52:00.794Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-27T05:52:00.795Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-27T05:52:00.795Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-27T05:52:00.796Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:52:00.796Z] [LOG] 
   📊 Full Period Working Days for Franklin null (EMP000018):
[2025-10-27T05:52:00.798Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:52:01.401Z] [LOG] 
   📊 Working Days for Expected Calculation for Franklin null (EMP000018):
[2025-10-27T05:52:01.402Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:52:01.402Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:52:01.606Z] [LOG] 
   ⏰ Calculating Completed Hours for Franklin null (EMP000018) - All completed sessions:
[2025-10-27T05:52:01.607Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:52:01.607Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:52:01.608Z] [LOG] 
      📋 Attendance Breakdown for Franklin null (EMP000018):
[2025-10-27T05:52:01.608Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:52:01.608Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:52:01.609Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:52:01.609Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:52:01.609Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:52:01.610Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:52:01.816Z] [LOG] 
      📊 Aggregated Totals for Franklin null (EMP000018):
[2025-10-27T05:52:01.816Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:52:01.817Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:52:01.817Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:52:01.818Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:52:01.819Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Franklin null (EMP000018) - completed sessions only:
[2025-10-27T05:52:01.819Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:52:01.820Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:52:01.821Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:52:01.821Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:52:01.822Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Franklin null (EMP000018) - completed sessions only:
[2025-10-27T05:52:01.823Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:52:01.824Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:52:01.824Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:52:01.825Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:52:01.825Z] [LOG] 
   💵 EXPECTED Earned Salary for Franklin null (EMP000018) - until NOW:
[2025-10-27T05:52:01.827Z] [LOG]       Weekday: 144.50h × Rs.235.29 = Rs.33999.40
[2025-10-27T05:52:01.827Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-27T05:52:01.828Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:52:01.828Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:52:01.829Z] [LOG]       Total Expected Earned: Rs.41999.32
[2025-10-27T05:52:01.830Z] [LOG] 
   💵 ACTUAL Earned Salary for Franklin null (EMP000018) - including live session:
[2025-10-27T05:52:01.830Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-27T05:52:01.831Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-27T05:52:01.831Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:52:01.832Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:52:01.833Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-27T05:52:01.834Z] [LOG] 
   📊 FINAL CALCULATION for Franklin null (EMP000018):
[2025-10-27T05:52:01.835Z] [LOG]       Calculated At: Oct 27, 2025, 11:22:01
[2025-10-27T05:52:01.835Z] [LOG]       Expected Earned: Rs.41999.32
[2025-10-27T05:52:01.836Z] [LOG]       Actual Earned: Rs.11999.80
[2025-10-27T05:52:01.836Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:52:01.837Z] [LOG]       Attendance Deduction: Rs.29999.52
[2025-10-27T05:52:01.837Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:52:01.838Z] [LOG]       📉 Shortfall for Franklin null: 115.50 hours (71.43% of expected)
[2025-10-27T05:52:01.839Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:52:01.840Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:52:01.840Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:52:01.841Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:52:01.841Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:52:01.842Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:52:01.842Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-27T05:52:01.842Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:52:01.843Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:52:01.843Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:01.844Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:52:01.844Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:01.845Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:52:01.845Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:01.845Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:52:01.846Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:01.846Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:52:01.846Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:01.847Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:52:01.847Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:01.847Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:52:01.848Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:01.848Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:52:01.848Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:01.849Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:52:01.849Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:01.849Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:52:01.850Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:01.850Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:52:01.850Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-27T05:52:01.851Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:52:01.851Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:52:01.851Z] [LOG] 💰 GROSS CALCULATION for Franklin null:
[2025-10-27T05:52:01.852Z] [LOG]    Base Salary: 50000
[2025-10-27T05:52:01.852Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:52:01.852Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:52:01.852Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:01.853Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:52:01.853Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:01.853Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:52:01.853Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:02.048Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:52:02.048Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:52:02.048Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:52:02.048Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:52:02.049Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:52:02.049Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:52:02.049Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:52:02.049Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-27T05:52:02.049Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:52:02.050Z] [LOG]    Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:52:02.050Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:52:02.050Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:52:02.050Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:52:02.050Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:52:02.050Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-27T05:52:02.051Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:52:02.051Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-27T05:52:02.051Z] [LOG] 
💾 Database Update:
[2025-10-27T05:52:02.051Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:52:02.051Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:52:02.245Z] [LOG] 
📝 Components to save:
[2025-10-27T05:52:02.246Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:52:02.246Z] [LOG]    Deduction components: 1
[2025-10-27T05:52:02.247Z] [LOG] Creating components for record e645aba3-67f8-4021-b4ad-5492b8d6c3e4: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:52:02.249Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-27T05:52:02.444Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:52:02.644Z] [LOG] Created payroll_record_component: 315963cc-41cc-4b98-9da3-f38a0db1b041 for Base Salary
[2025-10-27T05:52:02.645Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 29999.519999999997
}
[2025-10-27T05:52:02.844Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:52:03.050Z] [LOG] Created payroll_record_component: 800848b9-3356-489a-a833-cef5add50ffe for Attendance Shortfall (Info)
[2025-10-27T05:52:03.453Z] [LOG] ✅ Financial balances updated successfully for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:03.454Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:52:03.454Z] [LOG] 
======================================================================
[2025-10-27T05:52:03.455Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Franklin null
[2025-10-27T05:52:03.456Z] [LOG] ======================================================================
[2025-10-27T05:52:03.456Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:52:03.457Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-27T05:52:03.457Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:52:03.458Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:03.458Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:52:03.459Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:52:03.459Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:03.460Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-27T05:52:03.461Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:03.462Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:52:03.462Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:52:03.463Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:52:03.464Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:52:03.464Z] [LOG]       - Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:52:03.465Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:52:03.466Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:03.466Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-27T05:52:03.467Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:52:03.467Z] [LOG] ======================================================================

[2025-10-27T05:52:03.468Z] [LOG] ✅ Franklin null: Calculation completed successfully
[2025-10-27T05:52:03.469Z] [LOG] 📊 Progress: 30/34 (88.2%)
[2025-10-27T05:52:03.469Z] [LOG] 
🧮 Processing: Office Team null (EMP000041)
[2025-10-27T05:52:03.470Z] [LOG] 📋 Record ID: ea55e558-840b-4191-8406-1543a1c73210
[2025-10-27T05:52:03.471Z] [LOG] 
======================================================================
[2025-10-27T05:52:03.472Z] [LOG] 🧮 CALCULATING PAYROLL: Office Team null (EMP000041)
[2025-10-27T05:52:03.472Z] [LOG] ======================================================================
[2025-10-27T05:52:04.268Z] [LOG] 🔍 Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-27T05:52:04.269Z] [LOG]    Total components: 13
[2025-10-27T05:52:04.270Z] [LOG]    Applicable components: 13
[2025-10-27T05:52:04.270Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-27T05:52:05.484Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:52:05.485Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:52:05.685Z] [LOG] 📊 Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:05.880Z] [LOG] 📊 Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:06.072Z] [LOG] 📊 Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:06.073Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:52:06.074Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:52:06.472Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:52:06.473Z] [LOG]    👤 Employee: Office Team null (EMP000041)
[2025-10-27T05:52:06.473Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:52:06.474Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:52:06.474Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-27T05:52:06.475Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:52:06.673Z] [LOG] 
   💵 Pre-calculated Rates for Office Team null (EMP000041):
[2025-10-27T05:52:06.674Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-27T05:52:06.674Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-27T05:52:06.675Z] [LOG]       Saturday Hourly Rate: Rs.0.01
[2025-10-27T05:52:06.675Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:52:06.676Z] [LOG] 
   📊 Full Period Working Days for Office Team null (EMP000041):
[2025-10-27T05:52:06.677Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:52:07.284Z] [LOG] 
   📊 Working Days for Expected Calculation for Office Team null (EMP000041):
[2025-10-27T05:52:07.284Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:52:07.284Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:52:07.476Z] [LOG] 
   ⏰ Calculating Completed Hours for Office Team null (EMP000041) - All completed sessions:
[2025-10-27T05:52:07.476Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:52:07.476Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:52:07.476Z] [LOG] 
      📋 Attendance Breakdown for Office Team null (EMP000041):
[2025-10-27T05:52:07.477Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:52:07.477Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:52:07.477Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:52:07.477Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:52:07.477Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:52:07.478Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:52:07.672Z] [LOG] 
      📊 Aggregated Totals for Office Team null (EMP000041):
[2025-10-27T05:52:07.672Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:52:07.673Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:52:07.674Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:52:07.674Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:52:07.675Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Office Team null (EMP000041) - completed sessions only:
[2025-10-27T05:52:07.676Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:52:07.676Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:52:07.677Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:52:07.677Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:52:07.678Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Office Team null (EMP000041) - completed sessions only:
[2025-10-27T05:52:07.679Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:52:07.680Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:52:07.681Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:52:07.681Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:52:07.682Z] [LOG] 
   💵 EXPECTED Earned Salary for Office Team null (EMP000041) - until NOW:
[2025-10-27T05:52:07.682Z] [LOG]       Weekday: 144.50h × Rs.0.00 = Rs.0.00
[2025-10-27T05:52:07.683Z] [LOG]       Saturday: 18.00h × Rs.0.01 = Rs.0.18
[2025-10-27T05:52:07.684Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:52:07.684Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:52:07.685Z] [LOG]       Total Expected Earned: Rs.0.18
[2025-10-27T05:52:07.686Z] [LOG] 
   💵 ACTUAL Earned Salary for Office Team null (EMP000041) - including live session:
[2025-10-27T05:52:07.686Z] [LOG]       Weekday: 42.50h × Rs.0.00 = Rs.0.00
[2025-10-27T05:52:07.687Z] [LOG]       Saturday: 4.50h × Rs.0.01 = Rs.0.04
[2025-10-27T05:52:07.687Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:52:07.688Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:52:07.689Z] [LOG]       Total Actual Earned: Rs.0.04
[2025-10-27T05:52:07.690Z] [LOG] 
   📊 FINAL CALCULATION for Office Team null (EMP000041):
[2025-10-27T05:52:07.690Z] [LOG]       Calculated At: Oct 27, 2025, 11:22:07
[2025-10-27T05:52:07.691Z] [LOG]       Expected Earned: Rs.0.18
[2025-10-27T05:52:07.691Z] [LOG]       Actual Earned: Rs.0.04
[2025-10-27T05:52:07.692Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:52:07.692Z] [LOG]       Attendance Deduction: Rs.0.14
[2025-10-27T05:52:07.693Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:52:07.693Z] [LOG]       📉 Shortfall for Office Team null: 115.50 hours (75.00% of expected)
[2025-10-27T05:52:07.694Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:52:07.694Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-27T05:52:07.694Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-27T05:52:07.695Z] [LOG]    Attendance Shortfall: Rs.0.14
[2025-10-27T05:52:07.695Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:52:07.695Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:52:07.696Z] [LOG]    Gross Salary: 0.045
[2025-10-27T05:52:07.696Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:52:07.697Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:52:07.697Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:07.697Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:52:07.698Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:07.698Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:52:07.698Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:07.699Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:52:07.699Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:07.699Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:52:07.699Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:07.700Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:52:07.700Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:07.700Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:52:07.701Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:07.701Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:52:07.701Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:07.701Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:52:07.702Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:07.702Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:52:07.702Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:07.703Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:52:07.703Z] [LOG]    EPF/ETF calculated on: Rs.0.04
[2025-10-27T05:52:07.703Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:52:07.704Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:52:07.704Z] [LOG] 💰 GROSS CALCULATION for Office Team null:
[2025-10-27T05:52:07.704Z] [LOG]    Base Salary: 1
[2025-10-27T05:52:07.705Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:52:07.705Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:52:07.705Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:07.706Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:52:07.706Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:07.706Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:52:07.706Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:07.900Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:52:07.900Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:52:07.901Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:52:07.902Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:52:07.902Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-27T05:52:07.903Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:52:07.903Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:52:07.904Z] [LOG]    = Gross Salary: Rs.0.04
[2025-10-27T05:52:07.905Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:52:07.905Z] [LOG]    Attendance Shortfall (Info): Rs.0.14
[2025-10-27T05:52:07.906Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:52:07.907Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:52:07.908Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:52:07.908Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:52:07.909Z] [LOG]    Gross Salary: Rs.0.04
[2025-10-27T05:52:07.909Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:52:07.910Z] [LOG]    = NET SALARY: Rs.0.04
[2025-10-27T05:52:07.911Z] [LOG] 
💾 Database Update:
[2025-10-27T05:52:07.912Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:52:07.912Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:52:08.108Z] [LOG] 
📝 Components to save:
[2025-10-27T05:52:08.109Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:52:08.109Z] [LOG]    Deduction components: 1
[2025-10-27T05:52:08.110Z] [LOG] Creating components for record ea55e558-840b-4191-8406-1543a1c73210: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:52:08.111Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 0.045
}
[2025-10-27T05:52:08.308Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:52:08.504Z] [LOG] Created payroll_record_component: 7130e525-78c0-4005-9f8a-e71e674ea686 for Base Salary
[2025-10-27T05:52:08.504Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 0.135
}
[2025-10-27T05:52:08.707Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:52:08.919Z] [LOG] Created payroll_record_component: 91f17be1-1050-4d5b-a85e-263bfcb162e8 for Attendance Shortfall (Info)
[2025-10-27T05:52:09.304Z] [LOG] ✅ Financial balances updated successfully for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:09.305Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:52:09.305Z] [LOG] 
======================================================================
[2025-10-27T05:52:09.306Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Office Team null
[2025-10-27T05:52:09.306Z] [LOG] ======================================================================
[2025-10-27T05:52:09.307Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-27T05:52:09.308Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.04
[2025-10-27T05:52:09.308Z] [LOG]    Attendance Shortfall: Rs.0.14
[2025-10-27T05:52:09.309Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:09.309Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:52:09.310Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:52:09.311Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:09.312Z] [LOG]    GROSS SALARY: Rs.0.04
[2025-10-27T05:52:09.312Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:09.313Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:52:09.313Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:52:09.314Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:52:09.314Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:52:09.315Z] [LOG]       - Attendance Shortfall (Info): Rs.0.14
[2025-10-27T05:52:09.316Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:52:09.316Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:09.317Z] [LOG]    NET SALARY: Rs.0.04
[2025-10-27T05:52:09.318Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:52:09.318Z] [LOG] ======================================================================

[2025-10-27T05:52:09.319Z] [LOG] ✅ Office Team null: Calculation completed successfully
[2025-10-27T05:52:09.319Z] [LOG] 📊 Progress: 31/34 (91.2%)
[2025-10-27T05:52:09.320Z] [LOG] 
🧮 Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-27T05:52:09.321Z] [LOG] 📋 Record ID: f35fb593-47cb-43e3-95a5-bce4d158f44c
[2025-10-27T05:52:09.322Z] [LOG] 
======================================================================
[2025-10-27T05:52:09.322Z] [LOG] 🧮 CALCULATING PAYROLL: P.D.P Dilini Madushani null (EMP000043)
[2025-10-27T05:52:09.323Z] [LOG] ======================================================================
[2025-10-27T05:52:10.113Z] [LOG] 🔍 Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-27T05:52:10.114Z] [LOG]    Total components: 13
[2025-10-27T05:52:10.114Z] [LOG]    Applicable components: 13
[2025-10-27T05:52:10.115Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-27T05:52:11.335Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:52:11.335Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:52:11.544Z] [LOG] 📊 Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:11.750Z] [LOG] 📊 Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:11.978Z] [LOG] 📊 Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:11.979Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:52:11.980Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:52:12.427Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:52:12.427Z] [LOG]    👤 Employee: P.D.P Dilini Madushani null (EMP000043)
[2025-10-27T05:52:12.427Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:52:12.428Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:52:12.428Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-27T05:52:12.428Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:52:12.641Z] [LOG] 
   💵 Pre-calculated Rates for P.D.P Dilini Madushani null (EMP000043):
[2025-10-27T05:52:12.642Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-27T05:52:12.642Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-27T05:52:12.643Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-27T05:52:12.644Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:52:12.644Z] [LOG] 
   📊 Full Period Working Days for P.D.P Dilini Madushani null (EMP000043):
[2025-10-27T05:52:12.645Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:52:13.263Z] [LOG] 
   📊 Working Days for Expected Calculation for P.D.P Dilini Madushani null (EMP000043):
[2025-10-27T05:52:13.263Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:52:13.264Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:52:13.489Z] [LOG] 
   ⏰ Calculating Completed Hours for P.D.P Dilini Madushani null (EMP000043) - All completed sessions:
[2025-10-27T05:52:13.489Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:52:13.490Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:52:13.490Z] [LOG] 
      📋 Attendance Breakdown for P.D.P Dilini Madushani null (EMP000043):
[2025-10-27T05:52:13.490Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:52:13.490Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:52:13.491Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:52:13.491Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:52:13.491Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:52:13.491Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:52:13.705Z] [LOG] 
      📊 Aggregated Totals for P.D.P Dilini Madushani null (EMP000043):
[2025-10-27T05:52:13.706Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:52:13.706Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:52:13.707Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:52:13.707Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:52:13.708Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for P.D.P Dilini Madushani null (EMP000043) - completed sessions only:
[2025-10-27T05:52:13.709Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:52:13.710Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:52:13.711Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:52:13.712Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:52:13.713Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for P.D.P Dilini Madushani null (EMP000043) - completed sessions only:
[2025-10-27T05:52:13.714Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:52:13.714Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:52:13.715Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:52:13.716Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:52:13.716Z] [LOG] 
   💵 EXPECTED Earned Salary for P.D.P Dilini Madushani null (EMP000043) - until NOW:
[2025-10-27T05:52:13.718Z] [LOG]       Weekday: 144.50h × Rs.235.29 = Rs.33999.40
[2025-10-27T05:52:13.718Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-27T05:52:13.719Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:52:13.719Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:52:13.720Z] [LOG]       Total Expected Earned: Rs.41999.32
[2025-10-27T05:52:13.721Z] [LOG] 
   💵 ACTUAL Earned Salary for P.D.P Dilini Madushani null (EMP000043) - including live session:
[2025-10-27T05:52:13.721Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-27T05:52:13.722Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-27T05:52:13.722Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:52:13.723Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:52:13.724Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-27T05:52:13.725Z] [LOG] 
   📊 FINAL CALCULATION for P.D.P Dilini Madushani null (EMP000043):
[2025-10-27T05:52:13.726Z] [LOG]       Calculated At: Oct 27, 2025, 11:22:13
[2025-10-27T05:52:13.728Z] [LOG]       Expected Earned: Rs.41999.32
[2025-10-27T05:52:13.728Z] [LOG]       Actual Earned: Rs.11999.80
[2025-10-27T05:52:13.729Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:52:13.730Z] [LOG]       Attendance Deduction: Rs.29999.52
[2025-10-27T05:52:13.730Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:52:13.731Z] [LOG]       📉 Shortfall for P.D.P Dilini Madushani null: 115.50 hours (71.43% of expected)
[2025-10-27T05:52:13.731Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:52:13.732Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:52:13.733Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:52:13.733Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:52:13.734Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:52:13.735Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:52:13.736Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-27T05:52:13.736Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:52:13.737Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:52:13.737Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:13.738Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:52:13.739Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:13.739Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:52:13.740Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:13.740Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:52:13.741Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:13.742Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:52:13.743Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:13.744Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:52:13.745Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:13.745Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:52:13.746Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:13.747Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:52:13.747Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:13.748Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:52:13.748Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:13.749Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:52:13.749Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:13.750Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:52:13.751Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-27T05:52:13.751Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:52:13.752Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:52:13.752Z] [LOG] 💰 GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-27T05:52:13.752Z] [LOG]    Base Salary: 50000
[2025-10-27T05:52:13.753Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:52:13.753Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:52:13.753Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:13.754Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:52:13.754Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:13.754Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:52:13.755Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:13.962Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:52:13.963Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:52:13.963Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:52:13.964Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:52:13.964Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-27T05:52:13.965Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:52:13.966Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:52:13.966Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-27T05:52:13.967Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:52:13.968Z] [LOG]    Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:52:13.968Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:52:13.969Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:52:13.970Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:52:13.970Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:52:13.971Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-27T05:52:13.971Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:52:13.972Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-27T05:52:13.973Z] [LOG] 
💾 Database Update:
[2025-10-27T05:52:13.974Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:52:13.975Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:52:14.208Z] [LOG] 
📝 Components to save:
[2025-10-27T05:52:14.209Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:52:14.209Z] [LOG]    Deduction components: 1
[2025-10-27T05:52:14.210Z] [LOG] Creating components for record f35fb593-47cb-43e3-95a5-bce4d158f44c: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:52:14.212Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-27T05:52:14.422Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:52:14.641Z] [LOG] Created payroll_record_component: 4ec9c7a8-bda7-491a-91aa-7680d03932dd for Base Salary
[2025-10-27T05:52:14.641Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 29999.519999999997
}
[2025-10-27T05:52:14.850Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:52:15.077Z] [LOG] Created payroll_record_component: c7768aca-0884-4d58-8089-f245b47d85ca for Attendance Shortfall (Info)
[2025-10-27T05:52:15.490Z] [LOG] ✅ Financial balances updated successfully for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:15.491Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:52:15.491Z] [LOG] 
======================================================================
[2025-10-27T05:52:15.492Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: P.D.P Dilini Madushani null
[2025-10-27T05:52:15.493Z] [LOG] ======================================================================
[2025-10-27T05:52:15.494Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-27T05:52:15.495Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-27T05:52:15.495Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-27T05:52:15.496Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:15.497Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:52:15.497Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:52:15.498Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:15.499Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-27T05:52:15.499Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:15.500Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:52:15.500Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:52:15.501Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:52:15.502Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:52:15.502Z] [LOG]       - Attendance Shortfall (Info): Rs.29999.52
[2025-10-27T05:52:15.503Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:52:15.503Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:15.504Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-27T05:52:15.505Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:52:15.505Z] [LOG] ======================================================================

[2025-10-27T05:52:15.506Z] [LOG] ✅ P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-27T05:52:15.507Z] [LOG] 📊 Progress: 32/34 (94.1%)
[2025-10-27T05:52:15.507Z] [LOG] 
🧮 Processing: Ammaar Ilham (EMP000023)
[2025-10-27T05:52:15.508Z] [LOG] 📋 Record ID: f7d32da6-0318-4ea7-a14f-7f4b93be684f
[2025-10-27T05:52:15.509Z] [LOG] 
======================================================================
[2025-10-27T05:52:15.510Z] [LOG] 🧮 CALCULATING PAYROLL: Ammaar Ilham (EMP000023)
[2025-10-27T05:52:15.510Z] [LOG] ======================================================================
[2025-10-27T05:52:16.358Z] [LOG] 🔍 Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-27T05:52:16.358Z] [LOG]    Total components: 13
[2025-10-27T05:52:16.358Z] [LOG]    Applicable components: 13
[2025-10-27T05:52:16.358Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-27T05:52:17.618Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:52:17.619Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:52:17.830Z] [LOG] 📊 Found 0 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:18.042Z] [LOG] 📊 Found 0 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:18.258Z] [LOG] 📊 Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:18.258Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:52:18.261Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:52:18.613Z] [LOG] session eka meka {
  "id": "7b60aa76-b2ed-11f0-8747-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "0ece0235-1e0e-441c-a68b-171f630cd3eb",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-28 04:29:09",
  "is_active": 1,
  "created_at": "2025-10-27 09:59:09",
  "user_active": 1
}
[2025-10-27T05:52:18.707Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:52:18.708Z] [LOG]    👤 Employee: Ammaar Ilham (EMP000023)
[2025-10-27T05:52:18.709Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:52:18.709Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:52:18.711Z] [LOG]    Base Salary (Full Month): Rs.70000.00
[2025-10-27T05:52:18.712Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:52:18.921Z] [LOG] 
   💵 Pre-calculated Rates for Ammaar Ilham (EMP000023):
[2025-10-27T05:52:18.922Z] [LOG]       Daily Salary: Rs.2800.00
[2025-10-27T05:52:18.923Z] [LOG]       Weekday Hourly Rate: Rs.329.41
[2025-10-27T05:52:18.923Z] [LOG]       Saturday Hourly Rate: Rs.622.22
[2025-10-27T05:52:18.924Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:52:18.924Z] [LOG] 
   📊 Full Period Working Days for Ammaar Ilham (EMP000023):
[2025-10-27T05:52:18.925Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:52:19.543Z] [LOG] 
   📊 Working Days for Expected Calculation for Ammaar Ilham (EMP000023):
[2025-10-27T05:52:19.545Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:52:19.545Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:52:19.700Z] [LOG] session eka meka {
  "id": "7b60aa76-b2ed-11f0-8747-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "0ece0235-1e0e-441c-a68b-171f630cd3eb",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-28 04:29:09",
  "is_active": 1,
  "created_at": "2025-10-27 09:59:09",
  "user_active": 1
}
[2025-10-27T05:52:19.764Z] [LOG] 
   ⏰ Calculating Completed Hours for Ammaar Ilham (EMP000023) - All completed sessions:
[2025-10-27T05:52:19.765Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:52:19.765Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:52:19.766Z] [LOG] 
      📋 Attendance Breakdown for Ammaar Ilham (EMP000023):
[2025-10-27T05:52:19.767Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:52:19.767Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:52:19.768Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:52:19.768Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:52:19.769Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:52:19.770Z] [LOG]          6. 2025-10-24 (Weekday): 7.50h
[2025-10-27T05:52:19.998Z] [LOG] 
      📊 Aggregated Totals for Ammaar Ilham (EMP000023):
[2025-10-27T05:52:19.999Z] [LOG]          Weekday: 41.50h
[2025-10-27T05:52:19.999Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:52:20.000Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:52:20.000Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:52:20.001Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ammaar Ilham (EMP000023) - completed sessions only:
[2025-10-27T05:52:20.002Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:52:20.003Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:52:20.003Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:52:20.004Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:52:20.004Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ammaar Ilham (EMP000023) - completed sessions only:
[2025-10-27T05:52:20.005Z] [LOG]       Weekday: 41.50h
[2025-10-27T05:52:20.006Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:52:20.007Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:52:20.008Z] [LOG]       Total Actual: 46.00h
[2025-10-27T05:52:20.008Z] [LOG] 
   💵 EXPECTED Earned Salary for Ammaar Ilham (EMP000023) - until NOW:
[2025-10-27T05:52:20.009Z] [LOG]       Weekday: 144.50h × Rs.329.41 = Rs.47599.75
[2025-10-27T05:52:20.012Z] [LOG]       Saturday: 18.00h × Rs.622.22 = Rs.11199.96
[2025-10-27T05:52:20.012Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:52:20.013Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:52:20.014Z] [LOG]       Total Expected Earned: Rs.58799.71
[2025-10-27T05:52:20.014Z] [LOG] 
   💵 ACTUAL Earned Salary for Ammaar Ilham (EMP000023) - including live session:
[2025-10-27T05:52:20.015Z] [LOG]       Weekday: 41.50h × Rs.329.41 = Rs.13670.52
[2025-10-27T05:52:20.016Z] [LOG]       Saturday: 4.50h × Rs.622.22 = Rs.2799.99
[2025-10-27T05:52:20.016Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:52:20.017Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:52:20.017Z] [LOG]       Total Actual Earned: Rs.16470.51
[2025-10-27T05:52:20.019Z] [LOG] 
   📊 FINAL CALCULATION for Ammaar Ilham (EMP000023):
[2025-10-27T05:52:20.019Z] [LOG]       Calculated At: Oct 27, 2025, 11:22:20
[2025-10-27T05:52:20.020Z] [LOG]       Expected Earned: Rs.58799.71
[2025-10-27T05:52:20.020Z] [LOG]       Actual Earned: Rs.16470.51
[2025-10-27T05:52:20.021Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:52:20.021Z] [LOG]       Attendance Deduction: Rs.42329.20
[2025-10-27T05:52:20.022Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:52:20.022Z] [LOG]       📉 Shortfall for Ammaar Ilham: 116.50 hours (71.99% of expected)
[2025-10-27T05:52:20.022Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:52:20.023Z] [LOG]    Base Salary (Full): Rs.70000.00
[2025-10-27T05:52:20.023Z] [LOG]    Actual Earned Base: Rs.16470.51
[2025-10-27T05:52:20.024Z] [LOG]    Attendance Shortfall: Rs.42329.20
[2025-10-27T05:52:20.024Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:52:20.024Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:52:20.025Z] [LOG]    Gross Salary: 16470.505
[2025-10-27T05:52:20.025Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:52:20.025Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:52:20.026Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:20.026Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:52:20.027Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:20.028Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:52:20.028Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:20.028Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:52:20.029Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:20.029Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:52:20.029Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:20.030Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:52:20.030Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:20.030Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:52:20.031Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:20.031Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:52:20.031Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:20.031Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:52:20.032Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:20.032Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:52:20.032Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:20.033Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:52:20.033Z] [LOG]    EPF/ETF calculated on: Rs.16470.51
[2025-10-27T05:52:20.033Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:52:20.034Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:52:20.034Z] [LOG] 💰 GROSS CALCULATION for Ammaar Ilham:
[2025-10-27T05:52:20.034Z] [LOG]    Base Salary: 70000
[2025-10-27T05:52:20.035Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:52:20.035Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:52:20.035Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:20.036Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:52:20.036Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:20.036Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:52:20.036Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:20.257Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:52:20.258Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:52:20.258Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:52:20.259Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:52:20.260Z] [LOG]    Actual Earned Base: Rs.16470.51
[2025-10-27T05:52:20.262Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:52:20.262Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:52:20.263Z] [LOG]    = Gross Salary: Rs.16470.51
[2025-10-27T05:52:20.263Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:52:20.264Z] [LOG]    Attendance Shortfall (Info): Rs.42329.20
[2025-10-27T05:52:20.265Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:52:20.266Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:52:20.267Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:52:20.267Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:52:20.268Z] [LOG]    Gross Salary: Rs.16470.51
[2025-10-27T05:52:20.268Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:52:20.269Z] [LOG]    = NET SALARY: Rs.16470.51
[2025-10-27T05:52:20.270Z] [LOG] 
💾 Database Update:
[2025-10-27T05:52:20.270Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:52:20.271Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:52:20.481Z] [LOG] 
📝 Components to save:
[2025-10-27T05:52:20.482Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:52:20.482Z] [LOG]    Deduction components: 1
[2025-10-27T05:52:20.483Z] [LOG] Creating components for record f7d32da6-0318-4ea7-a14f-7f4b93be684f: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:52:20.484Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 16470.505
}
[2025-10-27T05:52:20.581Z] [LOG] ✅ Advance request created successfully: 417a050c-570f-4aa9-938c-c86a675d31dd
[2025-10-27T05:52:20.583Z] [LOG] POST /api/employees/advances - 201 - 4293ms
[2025-10-27T05:52:20.689Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:52:20.910Z] [LOG] Created payroll_record_component: 1a9b4355-01fe-402a-be48-b15d706a822b for Base Salary
[2025-10-27T05:52:20.911Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 42329.2
}
[2025-10-27T05:52:21.129Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:52:21.342Z] [LOG] Created payroll_record_component: 2fb3decc-4b39-4b3d-aaf9-54f0fe4aa138 for Attendance Shortfall (Info)
[2025-10-27T05:52:21.766Z] [LOG] ✅ Financial balances updated successfully for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:21.767Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:52:21.768Z] [LOG] 
======================================================================
[2025-10-27T05:52:21.768Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ammaar Ilham
[2025-10-27T05:52:21.769Z] [LOG] ======================================================================
[2025-10-27T05:52:21.770Z] [LOG]    Base Salary (Full): Rs.70000.00
[2025-10-27T05:52:21.770Z] [LOG]    Actual Earned Base (Attendance-based): Rs.16470.51
[2025-10-27T05:52:21.771Z] [LOG]    Attendance Shortfall: Rs.42329.20
[2025-10-27T05:52:21.771Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:21.772Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:52:21.772Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:52:21.773Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:21.774Z] [LOG]    GROSS SALARY: Rs.16470.51
[2025-10-27T05:52:21.775Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:21.775Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:52:21.776Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:52:21.779Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:52:21.780Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:52:21.781Z] [LOG]       - Attendance Shortfall (Info): Rs.42329.20
[2025-10-27T05:52:21.781Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:52:21.782Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:21.782Z] [LOG]    NET SALARY: Rs.16470.51
[2025-10-27T05:52:21.783Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:52:21.784Z] [LOG] ======================================================================

[2025-10-27T05:52:21.784Z] [LOG] ✅ Ammaar Ilham: Calculation completed successfully
[2025-10-27T05:52:21.785Z] [LOG] 📊 Progress: 33/34 (97.1%)
[2025-10-27T05:52:21.786Z] [LOG] 
🧮 Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-27T05:52:21.786Z] [LOG] 📋 Record ID: fdeb7383-5022-4e44-aad9-d3d98e7ed17f
[2025-10-27T05:52:21.787Z] [LOG] 
======================================================================
[2025-10-27T05:52:21.788Z] [LOG] 🧮 CALCULATING PAYROLL: Sujevan Selvaratnam null (EMP000026)
[2025-10-27T05:52:21.788Z] [LOG] ======================================================================
[2025-10-27T05:52:22.621Z] [LOG] 🔍 Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-27T05:52:22.621Z] [LOG]    Total components: 13
[2025-10-27T05:52:22.622Z] [LOG]    Applicable components: 13
[2025-10-27T05:52:22.622Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-27T05:52:22.928Z] [LOG] session eka meka {
  "id": "7b60aa76-b2ed-11f0-8747-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "0ece0235-1e0e-441c-a68b-171f630cd3eb",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-28 04:29:09",
  "is_active": 1,
  "created_at": "2025-10-27 09:59:09",
  "user_active": 1
}
[2025-10-27T05:52:23.875Z] [LOG] 
🔄 Processing financial records...
[2025-10-27T05:52:23.876Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-27T05:52:23.996Z] [LOG] session eka meka {
  "id": "7b60aa76-b2ed-11f0-8747-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "0ece0235-1e0e-441c-a68b-171f630cd3eb",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-28 04:29:09",
  "is_active": 1,
  "created_at": "2025-10-27 09:59:09",
  "user_active": 1
}
[2025-10-27T05:52:24.094Z] [LOG] 📊 Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:24.299Z] [LOG] 📊 Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:24.509Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:24.510Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-27T05:52:24.511Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-27T05:52:24.927Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-27T05:52:24.928Z] [LOG]    👤 Employee: Sujevan Selvaratnam null (EMP000026)
[2025-10-27T05:52:24.928Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-27T05:52:24.929Z] [LOG]    📅 Calculation Until: 2025-10-26 (PARTIAL - Until Today)
[2025-10-27T05:52:24.929Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-27T05:52:24.930Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-27T05:52:25.162Z] [LOG] 
   💵 Pre-calculated Rates for Sujevan Selvaratnam null (EMP000026):
[2025-10-27T05:52:25.163Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-27T05:52:25.163Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-27T05:52:25.164Z] [LOG]       Saturday Hourly Rate: Rs.0.01
[2025-10-27T05:52:25.164Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-27T05:52:25.165Z] [LOG] 
   📊 Full Period Working Days for Sujevan Selvaratnam null (EMP000026):
[2025-10-27T05:52:25.166Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-27T05:52:25.811Z] [LOG] 
   📊 Working Days for Expected Calculation for Sujevan Selvaratnam null (EMP000026):
[2025-10-27T05:52:25.812Z] [LOG]       Up to: 2025-10-27 (including today)
[2025-10-27T05:52:25.813Z] [LOG]       Weekdays: 17, Saturdays: 4, Sundays: 0
[2025-10-27T05:52:25.826Z] [LOG] GET /api/employees/0144461e-7105-11f0-a50f-98e743540430/financial-records - 200 - 5227ms
[2025-10-27T05:52:26.027Z] [LOG] 
   ⏰ Calculating Completed Hours for Sujevan Selvaratnam null (EMP000026) - All completed sessions:
[2025-10-27T05:52:26.027Z] [LOG]       Period: 2025-10-01 to 2025-10-27
[2025-10-27T05:52:26.027Z] [LOG]       Total completed sessions found: 6
[2025-10-27T05:52:26.028Z] [LOG] 
      📋 Attendance Breakdown for Sujevan Selvaratnam null (EMP000026):
[2025-10-27T05:52:26.028Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-27T05:52:26.028Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-27T05:52:26.029Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-27T05:52:26.029Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-27T05:52:26.029Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-27T05:52:26.029Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-27T05:52:26.235Z] [LOG] 
      📊 Aggregated Totals for Sujevan Selvaratnam null (EMP000026):
[2025-10-27T05:52:26.236Z] [LOG]          Weekday: 42.50h
[2025-10-27T05:52:26.236Z] [LOG]          Saturday: 4.50h
[2025-10-27T05:52:26.237Z] [LOG]          Sunday: 0.00h
[2025-10-27T05:52:26.237Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-27T05:52:26.238Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Sujevan Selvaratnam null (EMP000026) - completed sessions only:
[2025-10-27T05:52:26.239Z] [LOG]       Weekday: 144.50h
[2025-10-27T05:52:26.239Z] [LOG]       Saturday: 18.00h
[2025-10-27T05:52:26.240Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:52:26.240Z] [LOG]       Total Expected: 162.50h
[2025-10-27T05:52:26.241Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Sujevan Selvaratnam null (EMP000026) - completed sessions only:
[2025-10-27T05:52:26.242Z] [LOG]       Weekday: 42.50h
[2025-10-27T05:52:26.243Z] [LOG]       Saturday: 4.50h
[2025-10-27T05:52:26.243Z] [LOG]       Sunday: 0.00h
[2025-10-27T05:52:26.244Z] [LOG]       Total Actual: 47.00h
[2025-10-27T05:52:26.245Z] [LOG] 
   💵 EXPECTED Earned Salary for Sujevan Selvaratnam null (EMP000026) - until NOW:
[2025-10-27T05:52:26.245Z] [LOG]       Weekday: 144.50h × Rs.0.00 = Rs.0.00
[2025-10-27T05:52:26.246Z] [LOG]       Saturday: 18.00h × Rs.0.01 = Rs.0.18
[2025-10-27T05:52:26.247Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:52:26.247Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:52:26.248Z] [LOG]       Total Expected Earned: Rs.0.18
[2025-10-27T05:52:26.249Z] [LOG] 
   💵 ACTUAL Earned Salary for Sujevan Selvaratnam null (EMP000026) - including live session:
[2025-10-27T05:52:26.249Z] [LOG]       Weekday: 42.50h × Rs.0.00 = Rs.0.00
[2025-10-27T05:52:26.250Z] [LOG]       Saturday: 4.50h × Rs.0.01 = Rs.0.04
[2025-10-27T05:52:26.250Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-27T05:52:26.251Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:52:26.252Z] [LOG]       Total Actual Earned: Rs.0.04
[2025-10-27T05:52:26.253Z] [LOG] 
   📊 FINAL CALCULATION for Sujevan Selvaratnam null (EMP000026):
[2025-10-27T05:52:26.254Z] [LOG]       Calculated At: Oct 27, 2025, 11:22:26
[2025-10-27T05:52:26.255Z] [LOG]       Expected Earned: Rs.0.18
[2025-10-27T05:52:26.255Z] [LOG]       Actual Earned: Rs.0.04
[2025-10-27T05:52:26.256Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-27T05:52:26.257Z] [LOG]       Attendance Deduction: Rs.0.14
[2025-10-27T05:52:26.257Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-27T05:52:26.258Z] [LOG]       📉 Shortfall for Sujevan Selvaratnam null: 115.50 hours (75.00% of expected)
[2025-10-27T05:52:26.258Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-27T05:52:26.259Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-27T05:52:26.260Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-27T05:52:26.260Z] [LOG]    Attendance Shortfall: Rs.0.14
[2025-10-27T05:52:26.261Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-27T05:52:26.262Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-27T05:52:26.262Z] [LOG]    Gross Salary: 0.045
[2025-10-27T05:52:26.263Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-27T05:52:26.263Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-27T05:52:26.264Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:26.265Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-27T05:52:26.265Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:26.266Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-27T05:52:26.266Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:26.267Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-27T05:52:26.268Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:26.268Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-27T05:52:26.270Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:26.271Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-27T05:52:26.271Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:26.272Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-27T05:52:26.272Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:26.273Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-27T05:52:26.274Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:26.275Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-27T05:52:26.275Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:26.276Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-27T05:52:26.276Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:26.277Z] [LOG]    📊 Total Deductions: 0
[2025-10-27T05:52:26.278Z] [LOG]    EPF/ETF calculated on: Rs.0.04
[2025-10-27T05:52:26.278Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-27T05:52:26.279Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-27T05:52:26.280Z] [LOG] 💰 GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-27T05:52:26.280Z] [LOG]    Base Salary: 1
[2025-10-27T05:52:26.281Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-27T05:52:26.281Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-27T05:52:26.282Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:26.283Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-27T05:52:26.283Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:26.284Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-27T05:52:26.285Z] [LOG]    Fixed amount: 0
[2025-10-27T05:52:26.507Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-27T05:52:26.508Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:52:26.509Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-27T05:52:26.509Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-27T05:52:26.510Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-27T05:52:26.511Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-27T05:52:26.511Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-27T05:52:26.512Z] [LOG]    = Gross Salary: Rs.0.04
[2025-10-27T05:52:26.512Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-27T05:52:26.513Z] [LOG]    Attendance Shortfall (Info): Rs.0.14
[2025-10-27T05:52:26.514Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-27T05:52:26.515Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-27T05:52:26.515Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-27T05:52:26.516Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-27T05:52:26.517Z] [LOG]    Gross Salary: Rs.0.04
[2025-10-27T05:52:26.518Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-27T05:52:26.518Z] [LOG]    = NET SALARY: Rs.0.04
[2025-10-27T05:52:26.519Z] [LOG] 
💾 Database Update:
[2025-10-27T05:52:26.520Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-27T05:52:26.521Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-27T05:52:26.739Z] [LOG] 
📝 Components to save:
[2025-10-27T05:52:26.743Z] [LOG]    Gross/Earnings components: 1
[2025-10-27T05:52:26.773Z] [LOG]    Deduction components: 1
[2025-10-27T05:52:26.779Z] [LOG] Creating components for record fdeb7383-5022-4e44-aad9-d3d98e7ed17f: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-27T05:52:26.787Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 0.045
}
[2025-10-27T05:52:26.999Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-27T05:52:27.225Z] [LOG] Created payroll_record_component: d8d6a201-05e8-4e42-a887-d7d4cd738568 for Base Salary
[2025-10-27T05:52:27.225Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 0.135
}
[2025-10-27T05:52:27.438Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-27T05:52:27.672Z] [LOG] Created payroll_record_component: be1f2d48-ee40-4b94-baa1-284702d37a88 for Attendance Shortfall (Info)
[2025-10-27T05:52:28.099Z] [LOG] ✅ Financial balances updated successfully for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-27T05:52:28.100Z] [LOG] ✅ Financial balances updated successfully
[2025-10-27T05:52:28.101Z] [LOG] 
======================================================================
[2025-10-27T05:52:28.101Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sujevan Selvaratnam null
[2025-10-27T05:52:28.102Z] [LOG] ======================================================================
[2025-10-27T05:52:28.103Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-27T05:52:28.103Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.04
[2025-10-27T05:52:28.104Z] [LOG]    Attendance Shortfall: Rs.0.14
[2025-10-27T05:52:28.104Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:28.105Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-27T05:52:28.105Z] [LOG]    Bonuses: Rs.0.00
[2025-10-27T05:52:28.106Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:28.107Z] [LOG]    GROSS SALARY: Rs.0.04
[2025-10-27T05:52:28.108Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:28.108Z] [LOG]    Deductions Breakdown:
[2025-10-27T05:52:28.109Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-27T05:52:28.109Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-27T05:52:28.110Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-27T05:52:28.111Z] [LOG]       - Attendance Shortfall (Info): Rs.0.14
[2025-10-27T05:52:28.111Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-27T05:52:28.112Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-27T05:52:28.113Z] [LOG]    NET SALARY: Rs.0.04
[2025-10-27T05:52:28.113Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-27T05:52:28.114Z] [LOG] ======================================================================

[2025-10-27T05:52:28.115Z] [LOG] ✅ Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-27T05:52:28.115Z] [LOG] 📊 Progress: 34/34 (100.0%)
[2025-10-27T05:52:28.116Z] [LOG] 
============================================================
[2025-10-27T05:52:28.117Z] [LOG] 📈 Processing Summary: 34 successful, 0 failed
[2025-10-27T05:52:30.082Z] [LOG] 🎉 Payroll calculation completed successfully!
[2025-10-27T05:52:30.083Z] [LOG] 📊 Final Summary: 34 processed, 0 errors
[2025-10-27T05:52:30.083Z] [INFO] ================================================================================
[2025-10-27T05:52:30.083Z] [INFO] ⏰ Completed at: 2025-10-27T05:52:30.083Z
[2025-10-27T05:52:30.083Z] [INFO] 📊 Total log entries: 5921