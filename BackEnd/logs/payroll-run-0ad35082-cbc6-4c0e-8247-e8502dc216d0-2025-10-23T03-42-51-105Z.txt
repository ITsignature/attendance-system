
[2025-10-23T03:42:51.105Z] [INFO] 🚀 Payroll calculation logging started for run: 0ad35082-cbc6-4c0e-8247-e8502dc216d0
[2025-10-23T03:42:51.105Z] [INFO] 📁 Log file: E:\smart_attendance_system\BackEnd\logs\payroll-run-0ad35082-cbc6-4c0e-8247-e8502dc216d0-2025-10-23T03-42-51-105Z.txt
[2025-10-23T03:42:51.105Z] [INFO] ⏰ Started at: 2025-10-23T03:42:51.105Z
[2025-10-23T03:42:51.105Z] [INFO] ================================================================================
[2025-10-23T03:42:51.105Z] [LOG] 🚀 Starting payroll calculation for run: 0ad35082-cbc6-4c0e-8247-e8502dc216d0
[2025-10-23T03:42:51.106Z] [LOG] 👤 Client ID: it-signature, User ID: 059304ea-24a5-4d78-a290-cf09b9e53c4c
[2025-10-23T03:42:52.158Z] [LOG] ✅ Payroll run verified: October (MONTHLY_2025_10_REGULAR)
[2025-10-23T03:42:52.733Z] [LOG] 📊 Status updated to 'calculating'
[2025-10-23T03:42:53.543Z] [LOG] 👥 Processing 34 employee records:
[2025-10-23T03:42:53.545Z] [LOG] ============================================================
[2025-10-23T03:42:53.545Z] [LOG] 
🧮 Processing: Chemil null (EMP000040)
[2025-10-23T03:42:53.546Z] [LOG] 📋 Record ID: 02f0c87f-0338-46b2-8c10-44ee0a5d7d60
[2025-10-23T03:42:53.549Z] [LOG] 
======================================================================
[2025-10-23T03:42:53.550Z] [LOG] 🧮 CALCULATING PAYROLL: Chemil null (EMP000040)
[2025-10-23T03:42:53.553Z] [LOG] ======================================================================
[2025-10-23T03:42:55.870Z] [LOG] 🔍 Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-23T03:42:55.871Z] [LOG]    Total components: 10
[2025-10-23T03:42:55.872Z] [LOG]    Applicable components: 10
[2025-10-23T03:42:55.872Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T03:42:59.778Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:42:59.779Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:43:00.260Z] [LOG] 📊 Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:00.896Z] [LOG] 📊 Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:01.381Z] [LOG] 📊 Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:01.383Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:43:01.383Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:43:01.852Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:43:01.852Z] [LOG]    Employee ID: 01442599-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:01.852Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:43:01.853Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:43:01.853Z] [LOG]    Base Salary (Full Month): Rs.250000.00
[2025-10-23T03:43:02.571Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:43:02.571Z] [LOG]       Daily Salary: Rs.10000.00
[2025-10-23T03:43:02.571Z] [LOG]       Weekday Hourly Rate: Rs.1176.47
[2025-10-23T03:43:02.572Z] [LOG]       Saturday Hourly Rate: Rs.2222.22
[2025-10-23T03:43:02.572Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:43:02.572Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:43:02.572Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:43:04.966Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:43:04.967Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:43:05.533Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:43:05.533Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:43:05.533Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:43:05.534Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:43:05.534Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:43:05.534Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:43:05.534Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:43:05.534Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:43:06.173Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:43:06.174Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:43:06.174Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:43:06.174Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:43:06.661Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:43:06.662Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:43:06.662Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:43:06.663Z] [LOG]       Current Time: 09:13:06
[2025-10-23T03:43:06.663Z] [LOG]       Expected Hours (scheduled → now): 0.72h
[2025-10-23T03:43:06.663Z] [LOG]       Actual Hours (check-in → now): 0.72h
[2025-10-23T03:43:06.663Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:43:06.663Z] [LOG]       Weekday: 119.72h
[2025-10-23T03:43:06.664Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:43:06.664Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:43:06.664Z] [LOG]       Total Expected: 133.22h
[2025-10-23T03:43:06.664Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:43:06.664Z] [LOG]       Weekday: 26.22h (includes 0.72h live)
[2025-10-23T03:43:06.664Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:43:06.664Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:43:06.664Z] [LOG]       Total Actual: 30.72h
[2025-10-23T03:43:06.665Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:43:06.665Z] [LOG]       Weekday: 119.72h × Rs.1176.47 = Rs.140845.24
[2025-10-23T03:43:06.665Z] [LOG]       Saturday: 13.50h × Rs.2222.22 = Rs.29999.97
[2025-10-23T03:43:06.665Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:43:06.666Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:06.666Z] [LOG]       Total Expected Earned: Rs.170845.21
[2025-10-23T03:43:06.666Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:43:06.666Z] [LOG]       Weekday: 26.22h × Rs.1176.47 = Rs.30845.30
[2025-10-23T03:43:06.666Z] [LOG]       Saturday: 4.50h × Rs.2222.22 = Rs.9999.99
[2025-10-23T03:43:06.667Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:43:06.667Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:06.667Z] [LOG]       Total Actual Earned: Rs.40845.29
[2025-10-23T03:43:06.668Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:43:06.668Z] [LOG]       Calculated At: Oct 23, 2025, 09:13:06
[2025-10-23T03:43:06.668Z] [LOG]       Expected Earned (until NOW): Rs.170845.21
[2025-10-23T03:43:06.668Z] [LOG]       Actual Earned (until NOW): Rs.40845.29
[2025-10-23T03:43:06.668Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:06.668Z] [LOG]       Attendance Deduction: Rs.129999.93
[2025-10-23T03:43:06.669Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:43:06.669Z] [LOG]       📉 Shortfall: 102.50 hours (76.09% of expected)
[2025-10-23T03:43:06.670Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:43:06.670Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:43:06.671Z] [LOG]    Base Salary (Full): Rs.250000.00
[2025-10-23T03:43:06.671Z] [LOG]    Actual Earned Base: Rs.40845.29
[2025-10-23T03:43:06.671Z] [LOG]    Attendance Shortfall: Rs.129999.93
[2025-10-23T03:43:06.671Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:43:06.672Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:43:06.672Z] [LOG]    Gross Salary: 40845.28862963056
[2025-10-23T03:43:06.672Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:43:06.673Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:43:06.673Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:06.673Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:43:06.673Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:06.673Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:43:06.673Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:06.674Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:43:06.674Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:06.674Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:43:06.674Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:06.674Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:43:06.674Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:06.675Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:43:06.675Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:06.675Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:43:06.676Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:06.676Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:43:06.677Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:06.677Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:43:06.677Z] [LOG]    EPF/ETF calculated on: Rs.40845.29
[2025-10-23T03:43:06.678Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:43:06.679Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:43:06.680Z] [LOG] 💰 GROSS CALCULATION for Chemil null:
[2025-10-23T03:43:06.680Z] [LOG]    Base Salary: 250000
[2025-10-23T03:43:06.682Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-23T03:43:06.682Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:43:06.682Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:07.132Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:43:07.132Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:43:07.132Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:43:07.133Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:43:07.133Z] [LOG]    Actual Earned Base: Rs.40845.29
[2025-10-23T03:43:07.133Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:43:07.133Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:43:07.134Z] [LOG]    = Gross Salary: Rs.40845.29
[2025-10-23T03:43:07.134Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:43:07.134Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:43:07.134Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:43:07.134Z] [LOG]    Gross Salary: Rs.40845.29
[2025-10-23T03:43:07.134Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:43:07.135Z] [LOG]    = NET SALARY: Rs.40845.29
[2025-10-23T03:43:07.773Z] [LOG] Creating components for record 02f0c87f-0338-46b2-8c10-44ee0a5d7d60: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:43:07.774Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 40845.28862963056
}
[2025-10-23T03:43:08.978Z] [LOG] Created new component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:43:09.692Z] [LOG] Created payroll_record_component: 7253fcaf-43b3-40b7-a532-c34f9bfa55d7 for Base Salary (Attendance-based)
[2025-10-23T03:43:10.951Z] [LOG] ✅ Financial balances updated successfully for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:10.951Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:43:10.951Z] [LOG] 
======================================================================
[2025-10-23T03:43:10.952Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chemil null
[2025-10-23T03:43:10.952Z] [LOG] ======================================================================
[2025-10-23T03:43:10.953Z] [LOG]    Base Salary (Full): Rs.250000.00
[2025-10-23T03:43:10.953Z] [LOG]    Actual Earned Base (Attendance-based): Rs.40845.29
[2025-10-23T03:43:10.953Z] [LOG]    Attendance Shortfall: Rs.129999.93
[2025-10-23T03:43:10.953Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:10.954Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:43:10.954Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:43:10.954Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:10.954Z] [LOG]    GROSS SALARY: Rs.40845.29
[2025-10-23T03:43:10.955Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:10.955Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:43:10.955Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:43:10.956Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:43:10.956Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:43:10.956Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:10.957Z] [LOG]    NET SALARY: Rs.40845.29
[2025-10-23T03:43:10.957Z] [LOG] ======================================================================

[2025-10-23T03:43:10.957Z] [LOG] ✅ Chemil null: Calculation completed successfully
[2025-10-23T03:43:10.958Z] [LOG] 📊 Progress: 1/34 (2.9%)
[2025-10-23T03:43:10.958Z] [LOG] 
🧮 Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-23T03:43:10.959Z] [LOG] 📋 Record ID: 04ca44aa-ad73-4cc2-9b25-69407ade1f7c
[2025-10-23T03:43:10.959Z] [LOG] 
======================================================================
[2025-10-23T03:43:10.960Z] [LOG] 🧮 CALCULATING PAYROLL: Nimdiya Ranasinghe null (EMP000045)
[2025-10-23T03:43:10.960Z] [LOG] ======================================================================
[2025-10-23T03:43:12.151Z] [LOG] 🔍 Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-23T03:43:12.151Z] [LOG]    Total components: 11
[2025-10-23T03:43:12.151Z] [LOG]    Applicable components: 11
[2025-10-23T03:43:12.152Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T03:43:13.861Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:43:13.861Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:43:14.181Z] [LOG] 📊 Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:14.493Z] [LOG] 📊 Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:14.820Z] [LOG] 📊 Found 0 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:14.820Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:43:14.821Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:43:15.102Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:43:15.103Z] [LOG]    Employee ID: 01444074-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:15.103Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:43:15.103Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:43:15.103Z] [LOG]    Base Salary (Full Month): Rs.35000.00
[2025-10-23T03:43:15.297Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:43:15.298Z] [LOG]       Daily Salary: Rs.1400.00
[2025-10-23T03:43:15.298Z] [LOG]       Weekday Hourly Rate: Rs.164.71
[2025-10-23T03:43:15.299Z] [LOG]       Saturday Hourly Rate: Rs.311.11
[2025-10-23T03:43:15.299Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:43:15.299Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:43:15.300Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:43:15.949Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:43:15.950Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:43:16.189Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:43:16.189Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:43:16.191Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:43:16.191Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:43:16.192Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:43:16.192Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:43:16.192Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:43:16.193Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:43:16.417Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:43:16.417Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:43:16.417Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:43:16.418Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:43:16.732Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:43:16.733Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:43:16.733Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:43:16.734Z] [LOG]       Current Time: 09:13:16
[2025-10-23T03:43:16.734Z] [LOG]       Expected Hours (scheduled → now): 0.72h
[2025-10-23T03:43:16.735Z] [LOG]       Actual Hours (check-in → now): 0.72h
[2025-10-23T03:43:16.735Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:43:16.735Z] [LOG]       Weekday: 119.72h
[2025-10-23T03:43:16.736Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:43:16.736Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:43:16.736Z] [LOG]       Total Expected: 133.22h
[2025-10-23T03:43:16.736Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:43:16.737Z] [LOG]       Weekday: 26.22h (includes 0.72h live)
[2025-10-23T03:43:16.737Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:43:16.737Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:43:16.738Z] [LOG]       Total Actual: 30.72h
[2025-10-23T03:43:16.738Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:43:16.738Z] [LOG]       Weekday: 119.72h × Rs.164.71 = Rs.19719.30
[2025-10-23T03:43:16.739Z] [LOG]       Saturday: 13.50h × Rs.311.11 = Rs.4199.99
[2025-10-23T03:43:16.739Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:43:16.739Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:16.740Z] [LOG]       Total Expected Earned: Rs.23919.28
[2025-10-23T03:43:16.740Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:43:16.741Z] [LOG]       Weekday: 26.22h × Rs.164.71 = Rs.4318.91
[2025-10-23T03:43:16.741Z] [LOG]       Saturday: 4.50h × Rs.311.11 = Rs.1400.00
[2025-10-23T03:43:16.741Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:43:16.742Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:16.742Z] [LOG]       Total Actual Earned: Rs.5718.91
[2025-10-23T03:43:16.743Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:43:16.744Z] [LOG]       Calculated At: Oct 23, 2025, 09:13:16
[2025-10-23T03:43:16.744Z] [LOG]       Expected Earned (until NOW): Rs.23919.28
[2025-10-23T03:43:16.744Z] [LOG]       Actual Earned (until NOW): Rs.5718.91
[2025-10-23T03:43:16.745Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:16.745Z] [LOG]       Attendance Deduction: Rs.18200.38
[2025-10-23T03:43:16.745Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:43:16.745Z] [LOG]       📉 Shortfall: 102.50 hours (76.09% of expected)
[2025-10-23T03:43:16.746Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:43:16.746Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:43:16.746Z] [LOG]    Base Salary (Full): Rs.35000.00
[2025-10-23T03:43:16.747Z] [LOG]    Actual Earned Base: Rs.5718.91
[2025-10-23T03:43:16.747Z] [LOG]    Attendance Shortfall: Rs.18200.38
[2025-10-23T03:43:16.748Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:43:16.748Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:43:16.748Z] [LOG]    Gross Salary: 5718.907702144445
[2025-10-23T03:43:16.749Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:43:16.749Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:43:16.750Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:16.750Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:43:16.751Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:16.751Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:43:16.752Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:16.752Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:43:16.753Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:16.753Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:43:16.754Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:16.754Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:43:16.754Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:16.755Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:43:16.755Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:16.756Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:43:16.756Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:16.757Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:43:16.757Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:16.757Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:43:16.757Z] [LOG]    EPF/ETF calculated on: Rs.5718.91
[2025-10-23T03:43:16.758Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:43:16.758Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:43:16.758Z] [LOG] 💰 GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-23T03:43:16.758Z] [LOG]    Base Salary: 35000
[2025-10-23T03:43:16.758Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:43:16.758Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:43:16.759Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:16.759Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:43:16.759Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:16.980Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:43:16.981Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:43:16.981Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:43:16.981Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:43:16.982Z] [LOG]    Actual Earned Base: Rs.5718.91
[2025-10-23T03:43:16.982Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:43:16.982Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:43:16.983Z] [LOG]    = Gross Salary: Rs.5718.91
[2025-10-23T03:43:16.983Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:43:16.983Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:43:16.984Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:43:16.984Z] [LOG]    Gross Salary: Rs.5718.91
[2025-10-23T03:43:16.984Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:43:16.984Z] [LOG]    = NET SALARY: Rs.5718.91
[2025-10-23T03:43:17.385Z] [LOG] Creating components for record 04ca44aa-ad73-4cc2-9b25-69407ade1f7c: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:43:17.385Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 5718.907702144445
}
[2025-10-23T03:43:17.702Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:43:18.013Z] [LOG] Created payroll_record_component: 006bee72-c785-42f0-80f5-23285c1c849e for Base Salary (Attendance-based)
[2025-10-23T03:43:18.652Z] [LOG] ✅ Financial balances updated successfully for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:18.653Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:43:18.653Z] [LOG] 
======================================================================
[2025-10-23T03:43:18.653Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Nimdiya Ranasinghe null
[2025-10-23T03:43:18.653Z] [LOG] ======================================================================
[2025-10-23T03:43:18.654Z] [LOG]    Base Salary (Full): Rs.35000.00
[2025-10-23T03:43:18.654Z] [LOG]    Actual Earned Base (Attendance-based): Rs.5718.91
[2025-10-23T03:43:18.654Z] [LOG]    Attendance Shortfall: Rs.18200.38
[2025-10-23T03:43:18.655Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:18.655Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:43:18.655Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:43:18.655Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:18.656Z] [LOG]    GROSS SALARY: Rs.5718.91
[2025-10-23T03:43:18.656Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:18.656Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:43:18.656Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:43:18.657Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:43:18.657Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:43:18.657Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:18.657Z] [LOG]    NET SALARY: Rs.5718.91
[2025-10-23T03:43:18.657Z] [LOG] ======================================================================

[2025-10-23T03:43:18.658Z] [LOG] ✅ Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-23T03:43:18.658Z] [LOG] 📊 Progress: 2/34 (5.9%)
[2025-10-23T03:43:18.658Z] [LOG] 
🧮 Processing: Rasanga null (EMP000028)
[2025-10-23T03:43:18.659Z] [LOG] 📋 Record ID: 0cc7a2e7-9e4d-43f9-9b6a-7d61239c933c
[2025-10-23T03:43:18.659Z] [LOG] 
======================================================================
[2025-10-23T03:43:18.659Z] [LOG] 🧮 CALCULATING PAYROLL: Rasanga null (EMP000028)
[2025-10-23T03:43:18.659Z] [LOG] ======================================================================
[2025-10-23T03:43:19.544Z] [LOG] 🔍 Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-23T03:43:19.545Z] [LOG]    Total components: 11
[2025-10-23T03:43:19.545Z] [LOG]    Applicable components: 11
[2025-10-23T03:43:19.545Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-23T03:43:21.630Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:43:21.630Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:43:21.846Z] [LOG] 📊 Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:22.078Z] [LOG] 📊 Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:22.546Z] [LOG] 📊 Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:22.547Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:43:22.547Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:43:22.759Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:43:22.759Z] [LOG]    Employee ID: 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:22.759Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:43:22.760Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:43:22.760Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T03:43:22.976Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:43:22.976Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T03:43:22.976Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T03:43:22.977Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T03:43:22.977Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:43:22.977Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:43:22.977Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:43:24.108Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:43:24.109Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:43:24.415Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:43:24.416Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:43:24.416Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:43:24.417Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:43:24.417Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:43:24.417Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:43:24.418Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:43:24.419Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:43:24.652Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:43:24.653Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:43:24.653Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:43:24.653Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:43:25.053Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:43:25.053Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:43:25.054Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:43:25.055Z] [LOG]       Current Time: 09:13:25
[2025-10-23T03:43:25.055Z] [LOG]       Expected Hours (scheduled → now): 0.72h
[2025-10-23T03:43:25.055Z] [LOG]       Actual Hours (check-in → now): 0.72h
[2025-10-23T03:43:25.056Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:43:25.056Z] [LOG]       Weekday: 119.72h
[2025-10-23T03:43:25.057Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:43:25.057Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:43:25.057Z] [LOG]       Total Expected: 133.22h
[2025-10-23T03:43:25.058Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:43:25.058Z] [LOG]       Weekday: 26.22h (includes 0.72h live)
[2025-10-23T03:43:25.060Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:43:25.060Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:43:25.061Z] [LOG]       Total Actual: 30.72h
[2025-10-23T03:43:25.062Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:43:25.062Z] [LOG]       Weekday: 119.72h × Rs.235.29 = Rs.28169.77
[2025-10-23T03:43:25.063Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T03:43:25.063Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:43:25.065Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:25.065Z] [LOG]       Total Expected Earned: Rs.34169.71
[2025-10-23T03:43:25.066Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:43:25.066Z] [LOG]       Weekday: 26.22h × Rs.235.29 = Rs.6170.16
[2025-10-23T03:43:25.067Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T03:43:25.067Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:43:25.068Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:25.068Z] [LOG]       Total Actual Earned: Rs.8170.14
[2025-10-23T03:43:25.069Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:43:25.070Z] [LOG]       Calculated At: Oct 23, 2025, 09:13:25
[2025-10-23T03:43:25.070Z] [LOG]       Expected Earned (until NOW): Rs.34169.71
[2025-10-23T03:43:25.071Z] [LOG]       Actual Earned (until NOW): Rs.8170.14
[2025-10-23T03:43:25.072Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:25.073Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T03:43:25.074Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:43:25.075Z] [LOG]       📉 Shortfall: 102.50 hours (76.09% of expected)
[2025-10-23T03:43:25.075Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:43:25.077Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:43:25.077Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:43:25.078Z] [LOG]    Actual Earned Base: Rs.8170.14
[2025-10-23T03:43:25.078Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T03:43:25.079Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:43:25.079Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:43:25.080Z] [LOG]    Gross Salary: 8170.136922325
[2025-10-23T03:43:25.082Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:43:25.082Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:43:25.083Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:25.084Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:43:25.084Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:25.085Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:43:25.085Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:25.085Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:43:25.086Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:25.086Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:43:25.087Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:25.087Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:43:25.087Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:25.087Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:43:25.088Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:25.088Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:43:25.089Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:25.089Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:43:25.089Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:25.089Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:43:25.089Z] [LOG]    EPF/ETF calculated on: Rs.8170.14
[2025-10-23T03:43:25.090Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:43:25.090Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:43:25.090Z] [LOG] 💰 GROSS CALCULATION for Rasanga null:
[2025-10-23T03:43:25.090Z] [LOG]    Base Salary: 50000
[2025-10-23T03:43:25.090Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:43:25.091Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:43:25.092Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:25.092Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:43:25.093Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:25.297Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:43:25.297Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:43:25.298Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:43:25.298Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:43:25.298Z] [LOG]    Actual Earned Base: Rs.8170.14
[2025-10-23T03:43:25.298Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:43:25.299Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:43:25.299Z] [LOG]    = Gross Salary: Rs.8170.14
[2025-10-23T03:43:25.299Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:43:25.300Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:43:25.300Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:43:25.300Z] [LOG]    Gross Salary: Rs.8170.14
[2025-10-23T03:43:25.300Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:43:25.301Z] [LOG]    = NET SALARY: Rs.8170.14
[2025-10-23T03:43:25.693Z] [LOG] Creating components for record 0cc7a2e7-9e4d-43f9-9b6a-7d61239c933c: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:43:25.694Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8170.136922325
}
[2025-10-23T03:43:26.012Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:43:26.332Z] [LOG] Created payroll_record_component: 207ae121-a96c-43c1-8311-1781fffa35c8 for Base Salary (Attendance-based)
[2025-10-23T03:43:26.972Z] [LOG] ✅ Financial balances updated successfully for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:26.972Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:43:26.973Z] [LOG] 
======================================================================
[2025-10-23T03:43:26.973Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Rasanga null
[2025-10-23T03:43:26.974Z] [LOG] ======================================================================
[2025-10-23T03:43:26.974Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:43:26.974Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8170.14
[2025-10-23T03:43:26.975Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T03:43:26.975Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:26.975Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:43:26.975Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:43:26.976Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:26.976Z] [LOG]    GROSS SALARY: Rs.8170.14
[2025-10-23T03:43:26.976Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:26.976Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:43:26.977Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:43:26.977Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:43:26.977Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:43:26.977Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:26.978Z] [LOG]    NET SALARY: Rs.8170.14
[2025-10-23T03:43:26.978Z] [LOG] ======================================================================

[2025-10-23T03:43:26.979Z] [LOG] ✅ Rasanga null: Calculation completed successfully
[2025-10-23T03:43:26.979Z] [LOG] 📊 Progress: 3/34 (8.8%)
[2025-10-23T03:43:26.981Z] [LOG] 
🧮 Processing: Hari null (EMP000017)
[2025-10-23T03:43:26.983Z] [LOG] 📋 Record ID: 0fa0c13e-2d40-46f2-8e10-07f563d6f5c0
[2025-10-23T03:43:26.984Z] [LOG] 
======================================================================
[2025-10-23T03:43:26.985Z] [LOG] 🧮 CALCULATING PAYROLL: Hari null (EMP000017)
[2025-10-23T03:43:26.985Z] [LOG] ======================================================================
[2025-10-23T03:43:28.257Z] [LOG] 🔍 Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-23T03:43:28.258Z] [LOG]    Total components: 11
[2025-10-23T03:43:28.258Z] [LOG]    Applicable components: 11
[2025-10-23T03:43:28.258Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T03:43:30.508Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:43:30.508Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:43:30.732Z] [LOG] 📊 Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:30.952Z] [LOG] 📊 Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:31.169Z] [LOG] 📊 Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:31.170Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:43:31.170Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:43:31.377Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:43:31.378Z] [LOG]    Employee ID: 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:31.379Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:43:31.379Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:43:31.379Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T03:43:31.919Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:43:31.919Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T03:43:31.920Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T03:43:31.920Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T03:43:31.920Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:43:31.921Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:43:31.921Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:43:32.751Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:43:32.751Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:43:33.058Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:43:33.059Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:43:33.060Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:43:33.060Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:43:33.061Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:43:33.061Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:43:33.061Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:43:33.061Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:43:33.382Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:43:33.383Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:43:33.383Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:43:33.383Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:43:33.626Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:43:33.627Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:43:33.627Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:43:33.628Z] [LOG]       Current Time: 09:13:33
[2025-10-23T03:43:33.628Z] [LOG]       Expected Hours (scheduled → now): 0.73h
[2025-10-23T03:43:33.629Z] [LOG]       Actual Hours (check-in → now): 0.73h
[2025-10-23T03:43:33.629Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:43:33.630Z] [LOG]       Weekday: 119.73h
[2025-10-23T03:43:33.630Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:43:33.630Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:43:33.631Z] [LOG]       Total Expected: 133.23h
[2025-10-23T03:43:33.632Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:43:33.634Z] [LOG]       Weekday: 26.23h (includes 0.73h live)
[2025-10-23T03:43:33.634Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:43:33.635Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:43:33.635Z] [LOG]       Total Actual: 30.73h
[2025-10-23T03:43:33.635Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:43:33.636Z] [LOG]       Weekday: 119.73h × Rs.235.29 = Rs.28170.33
[2025-10-23T03:43:33.636Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T03:43:33.637Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:43:33.637Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:33.637Z] [LOG]       Total Expected Earned: Rs.34170.27
[2025-10-23T03:43:33.637Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:43:33.638Z] [LOG]       Weekday: 26.23h × Rs.235.29 = Rs.6170.72
[2025-10-23T03:43:33.638Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T03:43:33.639Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:43:33.640Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:33.640Z] [LOG]       Total Actual Earned: Rs.8170.70
[2025-10-23T03:43:33.641Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:43:33.641Z] [LOG]       Calculated At: Oct 23, 2025, 09:13:33
[2025-10-23T03:43:33.642Z] [LOG]       Expected Earned (until NOW): Rs.34170.27
[2025-10-23T03:43:33.642Z] [LOG]       Actual Earned (until NOW): Rs.8170.70
[2025-10-23T03:43:33.642Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:33.643Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T03:43:33.643Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:43:33.643Z] [LOG]       📉 Shortfall: 102.50 hours (76.09% of expected)
[2025-10-23T03:43:33.644Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:43:33.645Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:43:33.645Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:43:33.646Z] [LOG]    Actual Earned Base: Rs.8170.70
[2025-10-23T03:43:33.646Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:43:33.646Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:43:33.647Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:43:33.647Z] [LOG]    Gross Salary: 8170.697239316667
[2025-10-23T03:43:33.648Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:43:33.649Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:43:33.649Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:33.649Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:43:33.649Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:33.650Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:43:33.650Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:33.651Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:43:33.651Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:33.651Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:43:33.652Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:33.652Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:43:33.652Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:33.652Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:43:33.653Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:33.653Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:43:33.653Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:33.653Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:43:33.653Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:33.654Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:43:33.654Z] [LOG]    EPF/ETF calculated on: Rs.8170.70
[2025-10-23T03:43:33.654Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:43:33.655Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:43:33.655Z] [LOG] 💰 GROSS CALCULATION for Hari null:
[2025-10-23T03:43:33.656Z] [LOG]    Base Salary: 50000
[2025-10-23T03:43:33.656Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:43:33.657Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:43:33.657Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:33.657Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:43:33.658Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:33.860Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:43:33.862Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:43:33.862Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:43:33.863Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:43:33.863Z] [LOG]    Actual Earned Base: Rs.8170.70
[2025-10-23T03:43:33.864Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:43:33.864Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:43:33.865Z] [LOG]    = Gross Salary: Rs.8170.70
[2025-10-23T03:43:33.865Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:43:33.865Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:43:33.865Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:43:33.866Z] [LOG]    Gross Salary: Rs.8170.70
[2025-10-23T03:43:33.866Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:43:33.866Z] [LOG]    = NET SALARY: Rs.8170.70
[2025-10-23T03:43:34.099Z] [LOG] Creating components for record 0fa0c13e-2d40-46f2-8e10-07f563d6f5c0: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:43:34.102Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8170.697239316667
}
[2025-10-23T03:43:34.332Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:43:34.570Z] [LOG] Created payroll_record_component: 41653f3e-2a96-4704-9085-10468ec45a4f for Base Salary (Attendance-based)
[2025-10-23T03:43:35.295Z] [LOG] ✅ Financial balances updated successfully for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:35.296Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:43:35.297Z] [LOG] 
======================================================================
[2025-10-23T03:43:35.297Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Hari null
[2025-10-23T03:43:35.297Z] [LOG] ======================================================================
[2025-10-23T03:43:35.298Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:43:35.298Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8170.70
[2025-10-23T03:43:35.298Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:43:35.299Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:35.299Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:43:35.300Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:43:35.300Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:35.301Z] [LOG]    GROSS SALARY: Rs.8170.70
[2025-10-23T03:43:35.301Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:35.301Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:43:35.301Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:43:35.302Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:43:35.303Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:43:35.303Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:35.304Z] [LOG]    NET SALARY: Rs.8170.70
[2025-10-23T03:43:35.305Z] [LOG] ======================================================================

[2025-10-23T03:43:35.305Z] [LOG] ✅ Hari null: Calculation completed successfully
[2025-10-23T03:43:35.306Z] [LOG] 📊 Progress: 4/34 (11.8%)
[2025-10-23T03:43:35.306Z] [LOG] 
🧮 Processing: Sumaiya null (EMP000016)
[2025-10-23T03:43:35.307Z] [LOG] 📋 Record ID: 244226b7-b2dd-4b70-9da6-2be9fdbd10ce
[2025-10-23T03:43:35.307Z] [LOG] 
======================================================================
[2025-10-23T03:43:35.308Z] [LOG] 🧮 CALCULATING PAYROLL: Sumaiya null (EMP000016)
[2025-10-23T03:43:35.308Z] [LOG] ======================================================================
[2025-10-23T03:43:36.245Z] [LOG] 🔍 Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-23T03:43:36.245Z] [LOG]    Total components: 11
[2025-10-23T03:43:36.246Z] [LOG]    Applicable components: 11
[2025-10-23T03:43:36.246Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T03:43:38.496Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:43:38.496Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:43:38.813Z] [LOG] 📊 Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:39.133Z] [LOG] 📊 Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:39.455Z] [LOG] 📊 Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:39.456Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:43:39.456Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:43:39.773Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:43:39.774Z] [LOG]    Employee ID: 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:39.774Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:43:39.775Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:43:39.775Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-23T03:43:40.103Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:43:40.104Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-23T03:43:40.105Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-23T03:43:40.105Z] [LOG]       Saturday Hourly Rate: Rs.533.33
[2025-10-23T03:43:40.105Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:43:40.105Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:43:40.106Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:43:40.946Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:43:40.946Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:43:41.199Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:43:41.199Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:43:41.200Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:43:41.200Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:43:41.201Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:43:41.201Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:43:41.202Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:43:41.202Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:43:41.404Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:43:41.404Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:43:41.404Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:43:41.405Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:43:41.699Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:43:41.702Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:43:41.702Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:43:41.703Z] [LOG]       Current Time: 09:13:41
[2025-10-23T03:43:41.703Z] [LOG]       Expected Hours (scheduled → now): 0.73h
[2025-10-23T03:43:41.704Z] [LOG]       Actual Hours (check-in → now): 0.73h
[2025-10-23T03:43:41.704Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:43:41.704Z] [LOG]       Weekday: 119.73h
[2025-10-23T03:43:41.705Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:43:41.705Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:43:41.705Z] [LOG]       Total Expected: 133.23h
[2025-10-23T03:43:41.706Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:43:41.706Z] [LOG]       Weekday: 26.23h (includes 0.73h live)
[2025-10-23T03:43:41.707Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:43:41.707Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:43:41.708Z] [LOG]       Total Actual: 30.73h
[2025-10-23T03:43:41.708Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:43:41.708Z] [LOG]       Weekday: 119.73h × Rs.282.35 = Rs.33805.27
[2025-10-23T03:43:41.709Z] [LOG]       Saturday: 13.50h × Rs.533.33 = Rs.7199.96
[2025-10-23T03:43:41.710Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:43:41.711Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:41.711Z] [LOG]       Total Expected Earned: Rs.41005.23
[2025-10-23T03:43:41.712Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:43:41.712Z] [LOG]       Weekday: 26.23h × Rs.282.35 = Rs.7405.55
[2025-10-23T03:43:41.712Z] [LOG]       Saturday: 4.50h × Rs.533.33 = Rs.2399.99
[2025-10-23T03:43:41.713Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:43:41.713Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:41.713Z] [LOG]       Total Actual Earned: Rs.9805.53
[2025-10-23T03:43:41.715Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:43:41.716Z] [LOG]       Calculated At: Oct 23, 2025, 09:13:41
[2025-10-23T03:43:41.717Z] [LOG]       Expected Earned (until NOW): Rs.41005.23
[2025-10-23T03:43:41.718Z] [LOG]       Actual Earned (until NOW): Rs.9805.53
[2025-10-23T03:43:41.718Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:41.719Z] [LOG]       Attendance Deduction: Rs.31199.69
[2025-10-23T03:43:41.720Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:43:41.720Z] [LOG]       📉 Shortfall: 102.50 hours (76.09% of expected)
[2025-10-23T03:43:41.721Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:43:41.721Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:43:41.721Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-23T03:43:41.722Z] [LOG]    Actual Earned Base: Rs.9805.53
[2025-10-23T03:43:41.723Z] [LOG]    Attendance Shortfall: Rs.31199.69
[2025-10-23T03:43:41.723Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:43:41.724Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:43:41.724Z] [LOG]    Gross Salary: 9805.531309069445
[2025-10-23T03:43:41.724Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:43:41.725Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:43:41.725Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:41.726Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:43:41.726Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:41.726Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:43:41.727Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:41.727Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:43:41.728Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:41.728Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:43:41.728Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:41.729Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:43:41.729Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:41.729Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:43:41.730Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:41.730Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:43:41.730Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:41.731Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:43:41.731Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:41.731Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:43:41.732Z] [LOG]    EPF/ETF calculated on: Rs.9805.53
[2025-10-23T03:43:41.733Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:43:41.733Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:43:41.734Z] [LOG] 💰 GROSS CALCULATION for Sumaiya null:
[2025-10-23T03:43:41.735Z] [LOG]    Base Salary: 60000
[2025-10-23T03:43:41.736Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:43:41.736Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:43:41.736Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:41.736Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:43:41.737Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:41.966Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:43:41.967Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:43:41.967Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:43:41.967Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:43:41.968Z] [LOG]    Actual Earned Base: Rs.9805.53
[2025-10-23T03:43:41.968Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:43:41.969Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:43:41.969Z] [LOG]    = Gross Salary: Rs.9805.53
[2025-10-23T03:43:41.969Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:43:41.970Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:43:41.970Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:43:41.970Z] [LOG]    Gross Salary: Rs.9805.53
[2025-10-23T03:43:41.971Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:43:41.971Z] [LOG]    = NET SALARY: Rs.9805.53
[2025-10-23T03:43:42.193Z] [LOG] Creating components for record 244226b7-b2dd-4b70-9da6-2be9fdbd10ce: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:43:42.194Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 9805.531309069445
}
[2025-10-23T03:43:42.400Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:43:42.626Z] [LOG] Created payroll_record_component: b910268d-ccf1-4228-953a-90eec6575a0d for Base Salary (Attendance-based)
[2025-10-23T03:43:43.216Z] [LOG] ✅ Financial balances updated successfully for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:43.217Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:43:43.217Z] [LOG] 
======================================================================
[2025-10-23T03:43:43.217Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sumaiya null
[2025-10-23T03:43:43.217Z] [LOG] ======================================================================
[2025-10-23T03:43:43.218Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-23T03:43:43.218Z] [LOG]    Actual Earned Base (Attendance-based): Rs.9805.53
[2025-10-23T03:43:43.218Z] [LOG]    Attendance Shortfall: Rs.31199.69
[2025-10-23T03:43:43.219Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:43.219Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:43:43.219Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:43:43.220Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:43.220Z] [LOG]    GROSS SALARY: Rs.9805.53
[2025-10-23T03:43:43.220Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:43.220Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:43:43.221Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:43:43.221Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:43:43.221Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:43:43.221Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:43.222Z] [LOG]    NET SALARY: Rs.9805.53
[2025-10-23T03:43:43.222Z] [LOG] ======================================================================

[2025-10-23T03:43:43.222Z] [LOG] ✅ Sumaiya null: Calculation completed successfully
[2025-10-23T03:43:43.222Z] [LOG] 📊 Progress: 5/34 (14.7%)
[2025-10-23T03:43:43.222Z] [LOG] 
🧮 Processing: Ratheeshanan null (EMP000047)
[2025-10-23T03:43:43.222Z] [LOG] 📋 Record ID: 2d58c04f-f339-47de-88ff-9f2b6fd7348d
[2025-10-23T03:43:43.222Z] [LOG] 
======================================================================
[2025-10-23T03:43:43.223Z] [LOG] 🧮 CALCULATING PAYROLL: Ratheeshanan null (EMP000047)
[2025-10-23T03:43:43.223Z] [LOG] ======================================================================
[2025-10-23T03:43:44.477Z] [LOG] 🔍 Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-23T03:43:44.477Z] [LOG]    Total components: 11
[2025-10-23T03:43:44.478Z] [LOG]    Applicable components: 11
[2025-10-23T03:43:44.478Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T03:43:46.495Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:43:46.495Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:43:46.813Z] [LOG] 📊 Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:47.149Z] [LOG] 📊 Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:47.452Z] [LOG] 📊 Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:47.453Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:43:47.453Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:43:47.774Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:43:47.775Z] [LOG]    Employee ID: 01444966-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:47.776Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:43:47.776Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:43:47.776Z] [LOG]    Base Salary (Full Month): Rs.25000.00
[2025-10-23T03:43:48.094Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:43:48.095Z] [LOG]       Daily Salary: Rs.1000.00
[2025-10-23T03:43:48.095Z] [LOG]       Weekday Hourly Rate: Rs.117.65
[2025-10-23T03:43:48.096Z] [LOG]       Saturday Hourly Rate: Rs.222.22
[2025-10-23T03:43:48.096Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:43:48.096Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:43:48.097Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:43:49.053Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:43:49.054Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:43:49.384Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:43:49.385Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:43:49.386Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:43:49.386Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:43:49.386Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:43:49.387Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:43:49.387Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:43:49.387Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:43:49.701Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:43:49.703Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:43:49.703Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:43:49.704Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:43:50.025Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:43:50.026Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:43:50.026Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:43:50.027Z] [LOG]       Current Time: 09:13:50
[2025-10-23T03:43:50.028Z] [LOG]       Expected Hours (scheduled → now): 0.73h
[2025-10-23T03:43:50.028Z] [LOG]       Actual Hours (check-in → now): 0.73h
[2025-10-23T03:43:50.029Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:43:50.029Z] [LOG]       Weekday: 119.73h
[2025-10-23T03:43:50.030Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:43:50.030Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:43:50.031Z] [LOG]       Total Expected: 133.23h
[2025-10-23T03:43:50.032Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:43:50.032Z] [LOG]       Weekday: 26.23h (includes 0.73h live)
[2025-10-23T03:43:50.033Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:43:50.033Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:43:50.033Z] [LOG]       Total Actual: 30.73h
[2025-10-23T03:43:50.034Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:43:50.034Z] [LOG]       Weekday: 119.73h × Rs.117.65 = Rs.14086.30
[2025-10-23T03:43:50.035Z] [LOG]       Saturday: 13.50h × Rs.222.22 = Rs.2999.97
[2025-10-23T03:43:50.035Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:43:50.036Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:50.036Z] [LOG]       Total Expected Earned: Rs.17086.27
[2025-10-23T03:43:50.036Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:43:50.037Z] [LOG]       Weekday: 26.23h × Rs.117.65 = Rs.3086.03
[2025-10-23T03:43:50.037Z] [LOG]       Saturday: 4.50h × Rs.222.22 = Rs.999.99
[2025-10-23T03:43:50.038Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:43:50.038Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:50.038Z] [LOG]       Total Actual Earned: Rs.4086.02
[2025-10-23T03:43:50.039Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:43:50.040Z] [LOG]       Calculated At: Oct 23, 2025, 09:13:50
[2025-10-23T03:43:50.040Z] [LOG]       Expected Earned (until NOW): Rs.17086.27
[2025-10-23T03:43:50.041Z] [LOG]       Actual Earned (until NOW): Rs.4086.02
[2025-10-23T03:43:50.041Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:50.042Z] [LOG]       Attendance Deduction: Rs.13000.26
[2025-10-23T03:43:50.043Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:43:50.043Z] [LOG]       📉 Shortfall: 102.50 hours (76.09% of expected)
[2025-10-23T03:43:50.044Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:43:50.046Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:43:50.047Z] [LOG]    Base Salary (Full): Rs.25000.00
[2025-10-23T03:43:50.047Z] [LOG]    Actual Earned Base: Rs.4086.02
[2025-10-23T03:43:50.049Z] [LOG]    Attendance Shortfall: Rs.13000.26
[2025-10-23T03:43:50.050Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:43:50.050Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:43:50.051Z] [LOG]    Gross Salary: 4086.0156781250007
[2025-10-23T03:43:50.051Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:43:50.051Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:43:50.052Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:50.052Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:43:50.052Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:50.053Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:43:50.053Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:50.054Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:43:50.054Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:50.055Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:43:50.055Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:50.055Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:43:50.056Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:50.056Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:43:50.056Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:50.057Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:43:50.057Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:50.058Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:43:50.059Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:50.059Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:43:50.060Z] [LOG]    EPF/ETF calculated on: Rs.4086.02
[2025-10-23T03:43:50.060Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:43:50.060Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:43:50.061Z] [LOG] 💰 GROSS CALCULATION for Ratheeshanan null:
[2025-10-23T03:43:50.061Z] [LOG]    Base Salary: 25000
[2025-10-23T03:43:50.061Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:43:50.062Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:43:50.062Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:50.062Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:43:50.063Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:50.342Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:43:50.342Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:43:50.343Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:43:50.343Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:43:50.343Z] [LOG]    Actual Earned Base: Rs.4086.02
[2025-10-23T03:43:50.343Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:43:50.344Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:43:50.344Z] [LOG]    = Gross Salary: Rs.4086.02
[2025-10-23T03:43:50.344Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:43:50.344Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:43:50.345Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:43:50.345Z] [LOG]    Gross Salary: Rs.4086.02
[2025-10-23T03:43:50.345Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:43:50.345Z] [LOG]    = NET SALARY: Rs.4086.02
[2025-10-23T03:43:50.662Z] [LOG] Creating components for record 2d58c04f-f339-47de-88ff-9f2b6fd7348d: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:43:50.663Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 4086.0156781250007
}
[2025-10-23T03:43:51.230Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:43:51.474Z] [LOG] Created payroll_record_component: c8a15e26-be2b-470f-adfd-be37669cb971 for Base Salary (Attendance-based)
[2025-10-23T03:43:52.034Z] [LOG] ✅ Financial balances updated successfully for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:52.035Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:43:52.035Z] [LOG] 
======================================================================
[2025-10-23T03:43:52.036Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ratheeshanan null
[2025-10-23T03:43:52.036Z] [LOG] ======================================================================
[2025-10-23T03:43:52.037Z] [LOG]    Base Salary (Full): Rs.25000.00
[2025-10-23T03:43:52.037Z] [LOG]    Actual Earned Base (Attendance-based): Rs.4086.02
[2025-10-23T03:43:52.037Z] [LOG]    Attendance Shortfall: Rs.13000.26
[2025-10-23T03:43:52.038Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:52.038Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:43:52.039Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:43:52.039Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:52.039Z] [LOG]    GROSS SALARY: Rs.4086.02
[2025-10-23T03:43:52.040Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:52.042Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:43:52.043Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:43:52.044Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:43:52.044Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:43:52.045Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:43:52.049Z] [LOG]    NET SALARY: Rs.4086.02
[2025-10-23T03:43:52.049Z] [LOG] ======================================================================

[2025-10-23T03:43:52.050Z] [LOG] ✅ Ratheeshanan null: Calculation completed successfully
[2025-10-23T03:43:52.050Z] [LOG] 📊 Progress: 6/34 (17.6%)
[2025-10-23T03:43:52.051Z] [LOG] 
🧮 Processing: Jessie null (EMP000013)
[2025-10-23T03:43:52.052Z] [LOG] 📋 Record ID: 2ff94b92-59ff-4cf3-8062-0e7a43f70c6e
[2025-10-23T03:43:52.054Z] [LOG] 
======================================================================
[2025-10-23T03:43:52.055Z] [LOG] 🧮 CALCULATING PAYROLL: Jessie null (EMP000013)
[2025-10-23T03:43:52.055Z] [LOG] ======================================================================
[2025-10-23T03:43:53.146Z] [LOG] 🔍 Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-23T03:43:53.147Z] [LOG]    Total components: 11
[2025-10-23T03:43:53.147Z] [LOG]    Applicable components: 11
[2025-10-23T03:43:53.147Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T03:43:54.822Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:43:54.823Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:43:55.138Z] [LOG] 📊 Found 0 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:55.472Z] [LOG] 📊 Found 0 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:55.774Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:55.774Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:43:55.775Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:43:56.104Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:43:56.105Z] [LOG]    Employee ID: 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-23T03:43:56.106Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:43:56.106Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:43:56.107Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-23T03:43:56.417Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:43:56.418Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-23T03:43:56.418Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-23T03:43:56.419Z] [LOG]       Saturday Hourly Rate: Rs.533.33
[2025-10-23T03:43:56.419Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:43:56.419Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:43:56.419Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:43:57.378Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:43:57.379Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:43:58.009Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:43:58.010Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:43:58.010Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:43:58.010Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:43:58.010Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:43:58.011Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:43:58.011Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:43:58.011Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:43:58.277Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:43:58.277Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:43:58.278Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:43:58.278Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:43:58.653Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:43:58.654Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:43:58.654Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:43:58.655Z] [LOG]       Current Time: 09:13:58
[2025-10-23T03:43:58.655Z] [LOG]       Expected Hours (scheduled → now): 0.73h
[2025-10-23T03:43:58.655Z] [LOG]       Actual Hours (check-in → now): 0.73h
[2025-10-23T03:43:58.656Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:43:58.656Z] [LOG]       Weekday: 119.73h
[2025-10-23T03:43:58.656Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:43:58.656Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:43:58.657Z] [LOG]       Total Expected: 133.23h
[2025-10-23T03:43:58.657Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:43:58.657Z] [LOG]       Weekday: 26.23h (includes 0.73h live)
[2025-10-23T03:43:58.657Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:43:58.657Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:43:58.658Z] [LOG]       Total Actual: 30.73h
[2025-10-23T03:43:58.658Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:43:58.658Z] [LOG]       Weekday: 119.73h × Rs.282.35 = Rs.33806.60
[2025-10-23T03:43:58.659Z] [LOG]       Saturday: 13.50h × Rs.533.33 = Rs.7199.96
[2025-10-23T03:43:58.659Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:43:58.659Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:58.659Z] [LOG]       Total Expected Earned: Rs.41006.56
[2025-10-23T03:43:58.659Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:43:58.660Z] [LOG]       Weekday: 26.23h × Rs.282.35 = Rs.7406.88
[2025-10-23T03:43:58.660Z] [LOG]       Saturday: 4.50h × Rs.533.33 = Rs.2399.99
[2025-10-23T03:43:58.660Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:43:58.660Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:58.661Z] [LOG]       Total Actual Earned: Rs.9806.86
[2025-10-23T03:43:58.662Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:43:58.662Z] [LOG]       Calculated At: Oct 23, 2025, 09:13:58
[2025-10-23T03:43:58.662Z] [LOG]       Expected Earned (until NOW): Rs.41006.56
[2025-10-23T03:43:58.662Z] [LOG]       Actual Earned (until NOW): Rs.9806.86
[2025-10-23T03:43:58.663Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:43:58.663Z] [LOG]       Attendance Deduction: Rs.31199.69
[2025-10-23T03:43:58.663Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:43:58.663Z] [LOG]       📉 Shortfall: 102.50 hours (76.08% of expected)
[2025-10-23T03:43:58.664Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:43:58.664Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:43:58.664Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-23T03:43:58.664Z] [LOG]    Actual Earned Base: Rs.9806.86
[2025-10-23T03:43:58.664Z] [LOG]    Attendance Shortfall: Rs.31199.69
[2025-10-23T03:43:58.665Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:43:58.665Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:43:58.665Z] [LOG]    Gross Salary: 9806.861020708335
[2025-10-23T03:43:58.665Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:43:58.665Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:43:58.665Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:58.666Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:43:58.666Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:58.666Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:43:58.666Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:58.666Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:43:58.666Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:58.667Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:43:58.667Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:58.667Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:43:58.667Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:58.667Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:43:58.668Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:58.668Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:43:58.668Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:58.668Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:43:58.668Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:58.668Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:43:58.669Z] [LOG]    EPF/ETF calculated on: Rs.9806.86
[2025-10-23T03:43:58.669Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:43:58.669Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:43:58.669Z] [LOG] 💰 GROSS CALCULATION for Jessie null:
[2025-10-23T03:43:58.669Z] [LOG]    Base Salary: 60000
[2025-10-23T03:43:58.670Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:43:58.670Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:43:58.670Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:58.670Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:43:58.671Z] [LOG]    Fixed amount: 0
[2025-10-23T03:43:58.983Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:43:58.983Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:43:58.984Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:43:58.984Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:43:58.984Z] [LOG]    Actual Earned Base: Rs.9806.86
[2025-10-23T03:43:58.984Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:43:58.985Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:43:58.985Z] [LOG]    = Gross Salary: Rs.9806.86
[2025-10-23T03:43:58.985Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:43:58.986Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:43:58.986Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:43:58.986Z] [LOG]    Gross Salary: Rs.9806.86
[2025-10-23T03:43:58.986Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:43:58.986Z] [LOG]    = NET SALARY: Rs.9806.86
[2025-10-23T03:43:59.292Z] [LOG] Creating components for record 2ff94b92-59ff-4cf3-8062-0e7a43f70c6e: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:43:59.293Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 9806.861020708335
}
[2025-10-23T03:43:59.524Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:43:59.940Z] [LOG] Created payroll_record_component: 781f03c4-79b1-43e8-894e-107ac6ac795e for Base Salary (Attendance-based)
[2025-10-23T03:44:00.587Z] [LOG] ✅ Financial balances updated successfully for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:00.588Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:44:00.588Z] [LOG] 
======================================================================
[2025-10-23T03:44:00.589Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Jessie null
[2025-10-23T03:44:00.589Z] [LOG] ======================================================================
[2025-10-23T03:44:00.589Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-23T03:44:00.590Z] [LOG]    Actual Earned Base (Attendance-based): Rs.9806.86
[2025-10-23T03:44:00.590Z] [LOG]    Attendance Shortfall: Rs.31199.69
[2025-10-23T03:44:00.590Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:00.591Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:44:00.591Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:44:00.591Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:00.592Z] [LOG]    GROSS SALARY: Rs.9806.86
[2025-10-23T03:44:00.592Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:00.592Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:44:00.592Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:44:00.593Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:44:00.593Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:44:00.593Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:00.594Z] [LOG]    NET SALARY: Rs.9806.86
[2025-10-23T03:44:00.594Z] [LOG] ======================================================================

[2025-10-23T03:44:00.594Z] [LOG] ✅ Jessie null: Calculation completed successfully
[2025-10-23T03:44:00.595Z] [LOG] 📊 Progress: 7/34 (20.6%)
[2025-10-23T03:44:00.595Z] [LOG] 
🧮 Processing: customer null (EMP000036)
[2025-10-23T03:44:00.595Z] [LOG] 📋 Record ID: 324ee957-f67c-4d58-a19c-c3bf109717da
[2025-10-23T03:44:00.596Z] [LOG] 
======================================================================
[2025-10-23T03:44:00.596Z] [LOG] 🧮 CALCULATING PAYROLL: customer null (EMP000036)
[2025-10-23T03:44:00.596Z] [LOG] ======================================================================
[2025-10-23T03:44:01.546Z] [LOG] 🔍 Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-23T03:44:01.547Z] [LOG]    Total components: 11
[2025-10-23T03:44:01.547Z] [LOG]    Applicable components: 11
[2025-10-23T03:44:01.547Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T03:44:03.774Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:44:03.775Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:44:04.095Z] [LOG] 📊 Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:04.413Z] [LOG] 📊 Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:04.736Z] [LOG] 📊 Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:04.736Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:44:04.737Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:44:05.052Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:44:05.053Z] [LOG]    Employee ID: 014409a2-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:05.053Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:44:05.053Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:44:05.053Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-23T03:44:05.374Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:44:05.374Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-23T03:44:05.375Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-23T03:44:05.375Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-23T03:44:05.375Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:44:05.375Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:44:05.375Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:44:06.652Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:44:06.653Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:44:06.973Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:44:06.973Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:44:06.973Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:44:06.973Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:44:06.974Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:44:06.974Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:44:06.974Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:44:06.974Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:44:07.175Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:44:07.176Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:44:07.176Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:44:07.176Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:44:07.382Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:44:07.382Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:44:07.383Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:44:07.384Z] [LOG]       Current Time: 09:14:07
[2025-10-23T03:44:07.384Z] [LOG]       Expected Hours (scheduled → now): 0.74h
[2025-10-23T03:44:07.385Z] [LOG]       Actual Hours (check-in → now): 0.74h
[2025-10-23T03:44:07.386Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:44:07.386Z] [LOG]       Weekday: 119.74h
[2025-10-23T03:44:07.387Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:44:07.387Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:44:07.387Z] [LOG]       Total Expected: 133.24h
[2025-10-23T03:44:07.388Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:44:07.388Z] [LOG]       Weekday: 26.24h (includes 0.74h live)
[2025-10-23T03:44:07.388Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:44:07.388Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:44:07.389Z] [LOG]       Total Actual: 30.74h
[2025-10-23T03:44:07.389Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:44:07.389Z] [LOG]       Weekday: 119.74h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:07.389Z] [LOG]       Saturday: 13.50h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:07.389Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:07.390Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:07.390Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-23T03:44:07.390Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:44:07.390Z] [LOG]       Weekday: 26.24h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:07.391Z] [LOG]       Saturday: 4.50h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:07.391Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:07.391Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:07.391Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-23T03:44:07.392Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:44:07.392Z] [LOG]       Calculated At: Oct 23, 2025, 09:14:07
[2025-10-23T03:44:07.393Z] [LOG]       Expected Earned (until NOW): Rs.0.00
[2025-10-23T03:44:07.393Z] [LOG]       Actual Earned (until NOW): Rs.0.00
[2025-10-23T03:44:07.393Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:07.393Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-23T03:44:07.393Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:44:07.394Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-23T03:44:07.395Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:44:07.395Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:44:07.395Z] [LOG]    Base Salary (Full): Rs.NaN
[2025-10-23T03:44:07.395Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T03:44:07.396Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T03:44:07.396Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:44:07.396Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:44:07.396Z] [LOG]    Gross Salary: 0
[2025-10-23T03:44:07.396Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:44:07.397Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:44:07.397Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:07.397Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:44:07.399Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:07.400Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:44:07.400Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:07.400Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:44:07.401Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:07.401Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:44:07.401Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:07.401Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:44:07.402Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:07.402Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:44:07.402Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:07.402Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:44:07.403Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:07.403Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:44:07.403Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:07.403Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:44:07.404Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-23T03:44:07.404Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:44:07.404Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:44:07.404Z] [LOG] 💰 GROSS CALCULATION for customer null:
[2025-10-23T03:44:07.405Z] [LOG]    Base Salary: 0
[2025-10-23T03:44:07.405Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:44:07.405Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:44:07.405Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:07.406Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:44:07.406Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:07.617Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:44:07.617Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:44:07.618Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:44:07.618Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:44:07.618Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T03:44:07.618Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:44:07.618Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:44:07.619Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-23T03:44:07.619Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:44:07.619Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:44:07.619Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:44:07.619Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-23T03:44:07.619Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:44:07.620Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-23T03:44:07.935Z] [LOG] Creating components for record 324ee957-f67c-4d58-a19c-c3bf109717da: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:44:07.935Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 0
}
[2025-10-23T03:44:08.254Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:44:08.475Z] [LOG] Created payroll_record_component: 6e71b394-3fd0-4742-8aad-8c30ca04358c for Base Salary (Attendance-based)
[2025-10-23T03:44:08.896Z] [LOG] ✅ Financial balances updated successfully for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:08.896Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:44:08.897Z] [LOG] 
======================================================================
[2025-10-23T03:44:08.897Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: customer null
[2025-10-23T03:44:08.897Z] [LOG] ======================================================================
[2025-10-23T03:44:08.897Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-23T03:44:08.898Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-23T03:44:08.898Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T03:44:08.898Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:08.898Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:44:08.899Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:44:08.899Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:08.899Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-23T03:44:08.899Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:08.900Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:44:08.900Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:44:08.900Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:44:08.900Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:44:08.900Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:08.900Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-23T03:44:08.901Z] [LOG] ======================================================================

[2025-10-23T03:44:08.901Z] [LOG] ✅ customer null: Calculation completed successfully
[2025-10-23T03:44:08.901Z] [LOG] 📊 Progress: 8/34 (23.5%)
[2025-10-23T03:44:08.901Z] [LOG] 
🧮 Processing: Shandeep null (EMP000034)
[2025-10-23T03:44:08.901Z] [LOG] 📋 Record ID: 355adf78-ce28-453c-a14c-40ee95aad669
[2025-10-23T03:44:08.902Z] [LOG] 
======================================================================
[2025-10-23T03:44:08.902Z] [LOG] 🧮 CALCULATING PAYROLL: Shandeep null (EMP000034)
[2025-10-23T03:44:08.902Z] [LOG] ======================================================================
[2025-10-23T03:44:09.773Z] [LOG] 🔍 Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-23T03:44:09.773Z] [LOG]    Total components: 11
[2025-10-23T03:44:09.774Z] [LOG]    Applicable components: 11
[2025-10-23T03:44:09.774Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T03:44:11.452Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:44:11.453Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:44:11.702Z] [LOG] 📊 Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:11.910Z] [LOG] 📊 Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:12.115Z] [LOG] 📊 Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:12.116Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:44:12.116Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:44:12.421Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:44:12.422Z] [LOG]    Employee ID: 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:12.422Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:44:12.422Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:44:12.422Z] [LOG]    Base Salary (Full Month): Rs.80000.00
[2025-10-23T03:44:12.742Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:44:12.742Z] [LOG]       Daily Salary: Rs.3200.00
[2025-10-23T03:44:12.742Z] [LOG]       Weekday Hourly Rate: Rs.376.47
[2025-10-23T03:44:12.742Z] [LOG]       Saturday Hourly Rate: Rs.711.11
[2025-10-23T03:44:12.743Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:44:12.743Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:44:12.743Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:44:13.858Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:44:13.858Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:44:14.422Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:44:14.422Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:44:14.423Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:44:14.423Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:44:14.423Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:44:14.423Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:44:14.424Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:44:14.424Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:44:14.651Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:44:14.652Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:44:14.653Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:44:14.653Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:44:14.981Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:44:14.981Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:44:14.982Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:44:14.983Z] [LOG]       Current Time: 09:14:14
[2025-10-23T03:44:14.983Z] [LOG]       Expected Hours (scheduled → now): 0.74h
[2025-10-23T03:44:14.983Z] [LOG]       Actual Hours (check-in → now): 0.74h
[2025-10-23T03:44:14.984Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:44:14.984Z] [LOG]       Weekday: 119.74h
[2025-10-23T03:44:14.984Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:44:14.985Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:44:14.985Z] [LOG]       Total Expected: 133.24h
[2025-10-23T03:44:14.985Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:44:14.986Z] [LOG]       Weekday: 26.24h (includes 0.74h live)
[2025-10-23T03:44:14.986Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:44:14.986Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:44:14.986Z] [LOG]       Total Actual: 30.74h
[2025-10-23T03:44:14.987Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:44:14.987Z] [LOG]       Weekday: 119.74h × Rs.376.47 = Rs.45077.57
[2025-10-23T03:44:14.987Z] [LOG]       Saturday: 13.50h × Rs.711.11 = Rs.9599.99
[2025-10-23T03:44:14.987Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:14.988Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:14.988Z] [LOG]       Total Expected Earned: Rs.54677.56
[2025-10-23T03:44:14.988Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:44:14.988Z] [LOG]       Weekday: 26.24h × Rs.376.47 = Rs.9877.63
[2025-10-23T03:44:14.988Z] [LOG]       Saturday: 4.50h × Rs.711.11 = Rs.3199.99
[2025-10-23T03:44:14.989Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:14.989Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:14.989Z] [LOG]       Total Actual Earned: Rs.13077.62
[2025-10-23T03:44:14.990Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:44:14.990Z] [LOG]       Calculated At: Oct 23, 2025, 09:14:14
[2025-10-23T03:44:14.990Z] [LOG]       Expected Earned (until NOW): Rs.54677.56
[2025-10-23T03:44:14.990Z] [LOG]       Actual Earned (until NOW): Rs.13077.62
[2025-10-23T03:44:14.990Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:14.991Z] [LOG]       Attendance Deduction: Rs.41599.94
[2025-10-23T03:44:14.991Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:44:14.991Z] [LOG]       📉 Shortfall: 102.50 hours (76.08% of expected)
[2025-10-23T03:44:14.991Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:44:14.991Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:44:14.993Z] [LOG]    Base Salary (Full): Rs.80000.00
[2025-10-23T03:44:14.993Z] [LOG]    Actual Earned Base: Rs.13077.62
[2025-10-23T03:44:14.993Z] [LOG]    Attendance Shortfall: Rs.41599.94
[2025-10-23T03:44:14.993Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:44:14.994Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:44:14.994Z] [LOG]    Gross Salary: 13077.624638075002
[2025-10-23T03:44:14.994Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:44:14.994Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:44:14.994Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:14.995Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:44:14.996Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:14.996Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:44:14.996Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:14.996Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:44:14.996Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:14.997Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:44:14.997Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:14.997Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:44:14.997Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:14.997Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:44:14.997Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:14.997Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:44:14.998Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:14.998Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:44:14.998Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:14.998Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:44:14.998Z] [LOG]    EPF/ETF calculated on: Rs.13077.62
[2025-10-23T03:44:14.999Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:44:14.999Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:44:14.999Z] [LOG] 💰 GROSS CALCULATION for Shandeep null:
[2025-10-23T03:44:14.999Z] [LOG]    Base Salary: 80000
[2025-10-23T03:44:14.999Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:44:14.999Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:44:15.000Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:15.000Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:44:15.000Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:15.217Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:44:15.217Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:44:15.218Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:44:15.218Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:44:15.218Z] [LOG]    Actual Earned Base: Rs.13077.62
[2025-10-23T03:44:15.219Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:44:15.219Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:44:15.220Z] [LOG]    = Gross Salary: Rs.13077.62
[2025-10-23T03:44:15.220Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:44:15.220Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:44:15.221Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:44:15.222Z] [LOG]    Gross Salary: Rs.13077.62
[2025-10-23T03:44:15.222Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:44:15.223Z] [LOG]    = NET SALARY: Rs.13077.62
[2025-10-23T03:44:15.462Z] [LOG] Creating components for record 355adf78-ce28-453c-a14c-40ee95aad669: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:44:15.463Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 13077.624638075002
}
[2025-10-23T03:44:15.662Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:44:15.953Z] [LOG] Created payroll_record_component: 539c2f34-5565-41df-b99b-1a4da527318a for Base Salary (Attendance-based)
[2025-10-23T03:44:16.420Z] [LOG] ✅ Financial balances updated successfully for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:16.421Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:44:16.421Z] [LOG] 
======================================================================
[2025-10-23T03:44:16.421Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Shandeep null
[2025-10-23T03:44:16.422Z] [LOG] ======================================================================
[2025-10-23T03:44:16.422Z] [LOG]    Base Salary (Full): Rs.80000.00
[2025-10-23T03:44:16.422Z] [LOG]    Actual Earned Base (Attendance-based): Rs.13077.62
[2025-10-23T03:44:16.422Z] [LOG]    Attendance Shortfall: Rs.41599.94
[2025-10-23T03:44:16.423Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:16.423Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:44:16.423Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:44:16.423Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:16.424Z] [LOG]    GROSS SALARY: Rs.13077.62
[2025-10-23T03:44:16.424Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:16.424Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:44:16.425Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:44:16.425Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:44:16.425Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:44:16.425Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:16.426Z] [LOG]    NET SALARY: Rs.13077.62
[2025-10-23T03:44:16.426Z] [LOG] ======================================================================

[2025-10-23T03:44:16.426Z] [LOG] ✅ Shandeep null: Calculation completed successfully
[2025-10-23T03:44:16.426Z] [LOG] 📊 Progress: 9/34 (26.5%)
[2025-10-23T03:44:16.426Z] [LOG] 
🧮 Processing: Safna Nawas null (EMP000021)
[2025-10-23T03:44:16.427Z] [LOG] 📋 Record ID: 3f468d60-9e9b-4b37-bd66-57fe6a8e2305
[2025-10-23T03:44:16.428Z] [LOG] 
======================================================================
[2025-10-23T03:44:16.428Z] [LOG] 🧮 CALCULATING PAYROLL: Safna Nawas null (EMP000021)
[2025-10-23T03:44:16.429Z] [LOG] ======================================================================
[2025-10-23T03:44:17.453Z] [LOG] 🔍 Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-23T03:44:17.453Z] [LOG]    Total components: 11
[2025-10-23T03:44:17.454Z] [LOG]    Applicable components: 11
[2025-10-23T03:44:17.454Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T03:44:19.551Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:44:19.552Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:44:19.780Z] [LOG] 📊 Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:20.096Z] [LOG] 📊 Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:20.420Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:20.420Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:44:20.421Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:44:20.746Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:44:20.747Z] [LOG]    Employee ID: 0143c977-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:20.747Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:44:20.747Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:44:20.747Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T03:44:21.053Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:44:21.053Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T03:44:21.054Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T03:44:21.054Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T03:44:21.054Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:44:21.054Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:44:21.054Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:44:21.897Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:44:21.897Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:44:22.127Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:44:22.127Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:44:22.128Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:44:22.128Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:44:22.128Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:44:22.129Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:44:22.129Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:44:22.129Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:44:22.344Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:44:22.345Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:44:22.345Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:44:22.345Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:44:22.551Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:44:22.552Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:44:22.552Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:44:22.552Z] [LOG]       Current Time: 09:14:22
[2025-10-23T03:44:22.553Z] [LOG]       Expected Hours (scheduled → now): 0.74h
[2025-10-23T03:44:22.553Z] [LOG]       Actual Hours (check-in → now): 0.74h
[2025-10-23T03:44:22.553Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:44:22.553Z] [LOG]       Weekday: 119.74h
[2025-10-23T03:44:22.553Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:44:22.553Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:44:22.553Z] [LOG]       Total Expected: 133.24h
[2025-10-23T03:44:22.553Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:44:22.554Z] [LOG]       Weekday: 26.24h (includes 0.74h live)
[2025-10-23T03:44:22.554Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:44:22.554Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:44:22.554Z] [LOG]       Total Actual: 30.74h
[2025-10-23T03:44:22.554Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:44:22.554Z] [LOG]       Weekday: 119.74h × Rs.235.29 = Rs.28173.53
[2025-10-23T03:44:22.555Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T03:44:22.555Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:22.555Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:22.555Z] [LOG]       Total Expected Earned: Rs.34173.47
[2025-10-23T03:44:22.555Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:44:22.555Z] [LOG]       Weekday: 26.24h × Rs.235.29 = Rs.6173.91
[2025-10-23T03:44:22.555Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T03:44:22.555Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:22.556Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:22.556Z] [LOG]       Total Actual Earned: Rs.8173.89
[2025-10-23T03:44:22.556Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:44:22.556Z] [LOG]       Calculated At: Oct 23, 2025, 09:14:22
[2025-10-23T03:44:22.556Z] [LOG]       Expected Earned (until NOW): Rs.34173.47
[2025-10-23T03:44:22.556Z] [LOG]       Actual Earned (until NOW): Rs.8173.89
[2025-10-23T03:44:22.557Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:22.557Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T03:44:22.557Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:44:22.557Z] [LOG]       📉 Shortfall: 102.50 hours (76.08% of expected)
[2025-10-23T03:44:22.557Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:44:22.557Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:44:22.558Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:44:22.558Z] [LOG]    Actual Earned Base: Rs.8173.89
[2025-10-23T03:44:22.558Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:44:22.558Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:44:22.558Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:44:22.558Z] [LOG]    Gross Salary: 8173.894895775
[2025-10-23T03:44:22.558Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:44:22.559Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:44:22.559Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:22.559Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:44:22.559Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:22.559Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:44:22.559Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:22.559Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:44:22.559Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:22.559Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:44:22.560Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:22.560Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:44:22.560Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:22.560Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:44:22.560Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:22.560Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:44:22.560Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:22.560Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:44:22.560Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:22.560Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:44:22.561Z] [LOG]    EPF/ETF calculated on: Rs.8173.89
[2025-10-23T03:44:22.562Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:44:22.562Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:44:22.562Z] [LOG] 💰 GROSS CALCULATION for Safna Nawas null:
[2025-10-23T03:44:22.562Z] [LOG]    Base Salary: 50000
[2025-10-23T03:44:22.562Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:44:22.562Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:44:22.562Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:22.562Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:44:22.563Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:22.833Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:44:22.834Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:44:22.834Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:44:22.834Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:44:22.835Z] [LOG]    Actual Earned Base: Rs.8173.89
[2025-10-23T03:44:22.835Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:44:22.835Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:44:22.835Z] [LOG]    = Gross Salary: Rs.8173.89
[2025-10-23T03:44:22.836Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:44:22.836Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:44:22.836Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:44:22.837Z] [LOG]    Gross Salary: Rs.8173.89
[2025-10-23T03:44:22.837Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:44:22.837Z] [LOG]    = NET SALARY: Rs.8173.89
[2025-10-23T03:44:23.151Z] [LOG] Creating components for record 3f468d60-9e9b-4b37-bd66-57fe6a8e2305: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:44:23.152Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8173.894895775
}
[2025-10-23T03:44:23.421Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:44:23.936Z] [LOG] Created payroll_record_component: 57e9a758-195e-4f9a-965b-98d1f5e5e0c0 for Base Salary (Attendance-based)
[2025-10-23T03:44:24.500Z] [LOG] ✅ Financial balances updated successfully for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:24.501Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:44:24.501Z] [LOG] 
======================================================================
[2025-10-23T03:44:24.501Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Safna Nawas null
[2025-10-23T03:44:24.501Z] [LOG] ======================================================================
[2025-10-23T03:44:24.502Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:44:24.502Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8173.89
[2025-10-23T03:44:24.502Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:44:24.503Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:24.503Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:44:24.503Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:44:24.503Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:24.504Z] [LOG]    GROSS SALARY: Rs.8173.89
[2025-10-23T03:44:24.504Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:24.504Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:44:24.504Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:44:24.505Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:44:24.505Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:44:24.505Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:24.506Z] [LOG]    NET SALARY: Rs.8173.89
[2025-10-23T03:44:24.506Z] [LOG] ======================================================================

[2025-10-23T03:44:24.506Z] [LOG] ✅ Safna Nawas null: Calculation completed successfully
[2025-10-23T03:44:24.506Z] [LOG] 📊 Progress: 10/34 (29.4%)
[2025-10-23T03:44:24.507Z] [LOG] 
🧮 Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-23T03:44:24.507Z] [LOG] 📋 Record ID: 41819bb5-1efa-4973-8792-3c4beb1cdd4f
[2025-10-23T03:44:24.508Z] [LOG] 
======================================================================
[2025-10-23T03:44:24.508Z] [LOG] 🧮 CALCULATING PAYROLL: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-23T03:44:24.508Z] [LOG] ======================================================================
[2025-10-23T03:44:25.853Z] [LOG] 🔍 Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-23T03:44:25.853Z] [LOG]    Total components: 11
[2025-10-23T03:44:25.853Z] [LOG]    Applicable components: 11
[2025-10-23T03:44:25.853Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-23T03:44:28.424Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:44:28.424Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:44:28.742Z] [LOG] 📊 Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:29.053Z] [LOG] 📊 Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:29.373Z] [LOG] 📊 Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:29.374Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:44:29.374Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:44:29.696Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:44:29.697Z] [LOG]    Employee ID: 0144315c-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:29.698Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:44:29.698Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:44:29.698Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T03:44:30.013Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:44:30.014Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T03:44:30.014Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T03:44:30.015Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T03:44:30.015Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:44:30.016Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:44:30.016Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:44:30.976Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:44:30.976Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:44:31.306Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:44:31.307Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:44:31.307Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:44:31.308Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:44:31.308Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:44:31.308Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:44:31.309Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:44:31.309Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:44:31.524Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:44:31.525Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:44:31.525Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:44:31.526Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:44:31.989Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:44:31.989Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:44:31.989Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:44:31.990Z] [LOG]       Current Time: 09:14:31
[2025-10-23T03:44:31.990Z] [LOG]       Expected Hours (scheduled → now): 0.74h
[2025-10-23T03:44:31.990Z] [LOG]       Actual Hours (check-in → now): 0.74h
[2025-10-23T03:44:31.991Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:44:31.991Z] [LOG]       Weekday: 119.74h
[2025-10-23T03:44:31.991Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:44:31.991Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:44:31.991Z] [LOG]       Total Expected: 133.24h
[2025-10-23T03:44:31.992Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:44:31.992Z] [LOG]       Weekday: 26.24h (includes 0.74h live)
[2025-10-23T03:44:31.992Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:44:31.992Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:44:31.992Z] [LOG]       Total Actual: 30.74h
[2025-10-23T03:44:31.993Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:44:31.993Z] [LOG]       Weekday: 119.74h × Rs.235.29 = Rs.28174.15
[2025-10-23T03:44:31.993Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T03:44:31.993Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:31.994Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:31.994Z] [LOG]       Total Expected Earned: Rs.34174.09
[2025-10-23T03:44:31.994Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:44:31.994Z] [LOG]       Weekday: 26.24h × Rs.235.29 = Rs.6174.53
[2025-10-23T03:44:31.994Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T03:44:31.994Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:31.995Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:31.995Z] [LOG]       Total Actual Earned: Rs.8174.51
[2025-10-23T03:44:31.995Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:44:31.996Z] [LOG]       Calculated At: Oct 23, 2025, 09:14:31
[2025-10-23T03:44:31.996Z] [LOG]       Expected Earned (until NOW): Rs.34174.09
[2025-10-23T03:44:31.996Z] [LOG]       Actual Earned (until NOW): Rs.8174.51
[2025-10-23T03:44:31.996Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:31.997Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T03:44:31.997Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:44:31.997Z] [LOG]       📉 Shortfall: 102.50 hours (76.08% of expected)
[2025-10-23T03:44:31.997Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:44:31.997Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:44:31.997Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:44:31.998Z] [LOG]    Actual Earned Base: Rs.8174.51
[2025-10-23T03:44:31.998Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:44:31.998Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:44:31.998Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:44:31.998Z] [LOG]    Gross Salary: 8174.511747724999
[2025-10-23T03:44:31.998Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:44:31.999Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:44:31.999Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:32.000Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:44:32.000Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:32.000Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:44:32.001Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:32.001Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:44:32.001Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:32.001Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:44:32.002Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:32.002Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:44:32.002Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:32.002Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:44:32.003Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:32.003Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:44:32.003Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:32.003Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:44:32.004Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:32.004Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:44:32.004Z] [LOG]    EPF/ETF calculated on: Rs.8174.51
[2025-10-23T03:44:32.004Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:44:32.005Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:44:32.005Z] [LOG] 💰 GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-23T03:44:32.005Z] [LOG]    Base Salary: 50000
[2025-10-23T03:44:32.006Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:44:32.006Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:44:32.006Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:32.006Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:44:32.006Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:32.999Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:44:32.999Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:44:32.999Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:44:33.000Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:44:33.000Z] [LOG]    Actual Earned Base: Rs.8174.51
[2025-10-23T03:44:33.000Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:44:33.000Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:44:33.001Z] [LOG]    = Gross Salary: Rs.8174.51
[2025-10-23T03:44:33.001Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:44:33.002Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:44:33.002Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:44:33.002Z] [LOG]    Gross Salary: Rs.8174.51
[2025-10-23T03:44:33.002Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:44:33.003Z] [LOG]    = NET SALARY: Rs.8174.51
[2025-10-23T03:44:33.219Z] [LOG] Creating components for record 41819bb5-1efa-4973-8792-3c4beb1cdd4f: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:44:33.220Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8174.511747724999
}
[2025-10-23T03:44:33.533Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:44:34.269Z] [LOG] Created payroll_record_component: 184f3e82-8928-4872-aa06-5ceeecf7c3ba for Base Salary (Attendance-based)
[2025-10-23T03:44:34.695Z] [LOG] ✅ Financial balances updated successfully for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:34.697Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:44:34.698Z] [LOG] 
======================================================================
[2025-10-23T03:44:34.699Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: G.M Supathala Sadaru Madhushan null
[2025-10-23T03:44:34.699Z] [LOG] ======================================================================
[2025-10-23T03:44:34.700Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:44:34.700Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8174.51
[2025-10-23T03:44:34.701Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:44:34.701Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:34.701Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:44:34.701Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:44:34.702Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:34.702Z] [LOG]    GROSS SALARY: Rs.8174.51
[2025-10-23T03:44:34.703Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:34.703Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:44:34.704Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:44:34.704Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:44:34.704Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:44:34.705Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:34.705Z] [LOG]    NET SALARY: Rs.8174.51
[2025-10-23T03:44:34.706Z] [LOG] ======================================================================

[2025-10-23T03:44:34.707Z] [LOG] ✅ G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-23T03:44:34.708Z] [LOG] 📊 Progress: 11/34 (32.4%)
[2025-10-23T03:44:34.709Z] [LOG] 
🧮 Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-23T03:44:34.710Z] [LOG] 📋 Record ID: 4280d5df-bae4-4f3a-9c0f-d95369ee5f39
[2025-10-23T03:44:34.710Z] [LOG] 
======================================================================
[2025-10-23T03:44:34.710Z] [LOG] 🧮 CALCULATING PAYROLL: Ruvindu Hewabandu null (EMP000027)
[2025-10-23T03:44:34.711Z] [LOG] ======================================================================
[2025-10-23T03:44:35.613Z] [LOG] 🔍 Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-23T03:44:35.616Z] [LOG]    Total components: 11
[2025-10-23T03:44:35.617Z] [LOG]    Applicable components: 11
[2025-10-23T03:44:35.617Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T03:44:37.374Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:44:37.375Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:44:37.694Z] [LOG] 📊 Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:38.020Z] [LOG] 📊 Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:38.335Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:38.342Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:44:38.343Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:44:38.655Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:44:38.656Z] [LOG]    Employee ID: 0143e915-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:38.657Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:44:38.657Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:44:38.657Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-23T03:44:38.989Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:44:38.989Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-23T03:44:38.990Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-23T03:44:38.990Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-23T03:44:38.991Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:44:38.991Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:44:38.991Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:44:39.934Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:44:39.935Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:44:40.285Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:44:40.285Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:44:40.286Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:44:40.286Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:44:40.287Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:44:40.287Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:44:40.287Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:44:40.288Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:44:40.500Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:44:40.501Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:44:40.501Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:44:40.501Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:44:40.894Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:44:40.896Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:44:40.897Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:44:40.899Z] [LOG]       Current Time: 09:14:40
[2025-10-23T03:44:40.900Z] [LOG]       Expected Hours (scheduled → now): 0.74h
[2025-10-23T03:44:40.902Z] [LOG]       Actual Hours (check-in → now): 0.74h
[2025-10-23T03:44:40.903Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:44:40.904Z] [LOG]       Weekday: 119.74h
[2025-10-23T03:44:40.904Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:44:40.906Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:44:40.907Z] [LOG]       Total Expected: 133.24h
[2025-10-23T03:44:40.907Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:44:40.909Z] [LOG]       Weekday: 26.24h (includes 0.74h live)
[2025-10-23T03:44:40.909Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:44:40.910Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:44:40.911Z] [LOG]       Total Actual: 30.74h
[2025-10-23T03:44:40.912Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:44:40.913Z] [LOG]       Weekday: 119.74h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:40.915Z] [LOG]       Saturday: 13.50h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:40.917Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:40.918Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:40.918Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-23T03:44:40.918Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:44:40.919Z] [LOG]       Weekday: 26.24h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:40.920Z] [LOG]       Saturday: 4.50h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:40.920Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:40.921Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:40.921Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-23T03:44:40.923Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:44:40.925Z] [LOG]       Calculated At: Oct 23, 2025, 09:14:40
[2025-10-23T03:44:40.926Z] [LOG]       Expected Earned (until NOW): Rs.0.00
[2025-10-23T03:44:40.926Z] [LOG]       Actual Earned (until NOW): Rs.0.00
[2025-10-23T03:44:40.927Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:40.927Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-23T03:44:40.927Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:44:40.928Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-23T03:44:40.928Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:44:40.929Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:44:40.929Z] [LOG]    Base Salary (Full): Rs.NaN
[2025-10-23T03:44:40.929Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T03:44:40.930Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T03:44:40.930Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:44:40.930Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:44:40.931Z] [LOG]    Gross Salary: 0
[2025-10-23T03:44:40.932Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:44:40.932Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:44:40.933Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:40.935Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:44:40.935Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:40.936Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:44:40.936Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:40.937Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:44:40.938Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:40.938Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:44:40.939Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:40.939Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:44:40.940Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:40.940Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:44:40.941Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:40.942Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:44:40.942Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:40.943Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:44:40.943Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:40.943Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:44:40.944Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-23T03:44:40.944Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:44:40.944Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:44:40.944Z] [LOG] 💰 GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-23T03:44:40.945Z] [LOG]    Base Salary: 0
[2025-10-23T03:44:40.945Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:44:40.945Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:44:40.946Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:40.946Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:44:40.947Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:41.217Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:44:41.217Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:44:41.217Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:44:41.218Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:44:41.218Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T03:44:41.218Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:44:41.219Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:44:41.219Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-23T03:44:41.220Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:44:41.220Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:44:41.220Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:44:41.221Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-23T03:44:41.221Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:44:41.221Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-23T03:44:41.533Z] [LOG] Creating components for record 4280d5df-bae4-4f3a-9c0f-d95369ee5f39: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:44:41.534Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 0
}
[2025-10-23T03:44:41.853Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:44:42.177Z] [LOG] Created payroll_record_component: 6006099b-c1c2-47b7-a77d-9433fe80f187 for Base Salary (Attendance-based)
[2025-10-23T03:44:43.067Z] [LOG] ✅ Financial balances updated successfully for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:43.068Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:44:43.068Z] [LOG] 
======================================================================
[2025-10-23T03:44:43.068Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ruvindu Hewabandu null
[2025-10-23T03:44:43.069Z] [LOG] ======================================================================
[2025-10-23T03:44:43.069Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-23T03:44:43.069Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-23T03:44:43.070Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T03:44:43.071Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:43.072Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:44:43.072Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:44:43.073Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:43.073Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-23T03:44:43.074Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:43.074Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:44:43.074Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:44:43.075Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:44:43.076Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:44:43.077Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:43.077Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-23T03:44:43.079Z] [LOG] ======================================================================

[2025-10-23T03:44:43.080Z] [LOG] ✅ Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-23T03:44:43.081Z] [LOG] 📊 Progress: 12/34 (35.3%)
[2025-10-23T03:44:43.083Z] [LOG] 
🧮 Processing: Sithira null (EMP000039)
[2025-10-23T03:44:43.084Z] [LOG] 📋 Record ID: 621cc6f5-adb8-448d-9d47-90e282393f06
[2025-10-23T03:44:43.084Z] [LOG] 
======================================================================
[2025-10-23T03:44:43.084Z] [LOG] 🧮 CALCULATING PAYROLL: Sithira null (EMP000039)
[2025-10-23T03:44:43.086Z] [LOG] ======================================================================
[2025-10-23T03:44:44.324Z] [LOG] 🔍 Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-23T03:44:44.324Z] [LOG]    Total components: 11
[2025-10-23T03:44:44.325Z] [LOG]    Applicable components: 11
[2025-10-23T03:44:44.325Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-23T03:44:45.609Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:44:45.609Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:44:45.824Z] [LOG] 📊 Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:46.018Z] [LOG] 📊 Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:46.333Z] [LOG] 📊 Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:46.334Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:44:46.335Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:44:46.653Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:44:46.653Z] [LOG]    Employee ID: 01441e19-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:46.653Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:44:46.654Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:44:46.654Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-23T03:44:46.974Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:44:46.974Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-23T03:44:46.975Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-23T03:44:46.975Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-23T03:44:46.976Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:44:46.976Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:44:46.976Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:44:47.942Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:44:47.944Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:44:48.256Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:44:48.256Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:44:48.257Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:44:48.257Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:44:48.257Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:44:48.258Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:44:48.258Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:44:48.258Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:44:48.574Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:44:48.574Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:44:48.575Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:44:48.575Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:44:48.892Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:44:48.893Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:44:48.893Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:44:48.894Z] [LOG]       Current Time: 09:14:48
[2025-10-23T03:44:48.895Z] [LOG]       Expected Hours (scheduled → now): 0.75h
[2025-10-23T03:44:48.895Z] [LOG]       Actual Hours (check-in → now): 0.75h
[2025-10-23T03:44:48.895Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:44:48.897Z] [LOG]       Weekday: 119.75h
[2025-10-23T03:44:48.897Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:44:48.897Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:44:48.898Z] [LOG]       Total Expected: 133.25h
[2025-10-23T03:44:48.900Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:44:48.901Z] [LOG]       Weekday: 26.25h (includes 0.75h live)
[2025-10-23T03:44:48.901Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:44:48.901Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:44:48.902Z] [LOG]       Total Actual: 30.75h
[2025-10-23T03:44:48.902Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:44:48.903Z] [LOG]       Weekday: 119.75h × Rs.188.24 = Rs.22541.16
[2025-10-23T03:44:48.903Z] [LOG]       Saturday: 13.50h × Rs.355.56 = Rs.4800.06
[2025-10-23T03:44:48.906Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:48.906Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:48.907Z] [LOG]       Total Expected Earned: Rs.27341.22
[2025-10-23T03:44:48.908Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:44:48.908Z] [LOG]       Weekday: 26.25h × Rs.188.24 = Rs.4940.72
[2025-10-23T03:44:48.908Z] [LOG]       Saturday: 4.50h × Rs.355.56 = Rs.1600.02
[2025-10-23T03:44:48.909Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:48.909Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:48.910Z] [LOG]       Total Actual Earned: Rs.6540.74
[2025-10-23T03:44:48.913Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:44:48.913Z] [LOG]       Calculated At: Oct 23, 2025, 09:14:48
[2025-10-23T03:44:48.914Z] [LOG]       Expected Earned (until NOW): Rs.27341.22
[2025-10-23T03:44:48.915Z] [LOG]       Actual Earned (until NOW): Rs.6540.74
[2025-10-23T03:44:48.916Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:48.917Z] [LOG]       Attendance Deduction: Rs.20800.48
[2025-10-23T03:44:48.917Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:44:48.918Z] [LOG]       📉 Shortfall: 102.50 hours (76.08% of expected)
[2025-10-23T03:44:48.919Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:44:48.919Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:44:48.920Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-23T03:44:48.922Z] [LOG]    Actual Earned Base: Rs.6540.74
[2025-10-23T03:44:48.923Z] [LOG]    Attendance Shortfall: Rs.20800.48
[2025-10-23T03:44:48.923Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:44:48.925Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:44:48.926Z] [LOG]    Gross Salary: 6540.739175022223
[2025-10-23T03:44:48.927Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:44:48.927Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:44:48.928Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:48.929Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:44:48.929Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:48.930Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:44:48.930Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:48.933Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:44:48.933Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:48.934Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:44:48.935Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:48.935Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:44:48.936Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:48.937Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:44:48.937Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:48.937Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:44:48.939Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:48.939Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:44:48.940Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:48.941Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:44:48.942Z] [LOG]    EPF/ETF calculated on: Rs.6540.74
[2025-10-23T03:44:48.943Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:44:48.943Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:44:48.945Z] [LOG] 💰 GROSS CALCULATION for Sithira null:
[2025-10-23T03:44:48.945Z] [LOG]    Base Salary: 40000
[2025-10-23T03:44:48.945Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:44:48.946Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:44:48.946Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:48.946Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:44:48.947Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:49.159Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:44:49.160Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:44:49.160Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:44:49.160Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:44:49.161Z] [LOG]    Actual Earned Base: Rs.6540.74
[2025-10-23T03:44:49.161Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:44:49.161Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:44:49.161Z] [LOG]    = Gross Salary: Rs.6540.74
[2025-10-23T03:44:49.161Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:44:49.162Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:44:49.162Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:44:49.163Z] [LOG]    Gross Salary: Rs.6540.74
[2025-10-23T03:44:49.163Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:44:49.163Z] [LOG]    = NET SALARY: Rs.6540.74
[2025-10-23T03:44:49.549Z] [LOG] Creating components for record 621cc6f5-adb8-448d-9d47-90e282393f06: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:44:49.550Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 6540.739175022223
}
[2025-10-23T03:44:49.853Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:44:50.173Z] [LOG] Created payroll_record_component: d1b8b2ae-7b00-4478-a5bd-4bf75bb1e24e for Base Salary (Attendance-based)
[2025-10-23T03:44:50.813Z] [LOG] ✅ Financial balances updated successfully for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:50.814Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:44:50.814Z] [LOG] 
======================================================================
[2025-10-23T03:44:50.815Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sithira null
[2025-10-23T03:44:50.815Z] [LOG] ======================================================================
[2025-10-23T03:44:50.816Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-23T03:44:50.816Z] [LOG]    Actual Earned Base (Attendance-based): Rs.6540.74
[2025-10-23T03:44:50.816Z] [LOG]    Attendance Shortfall: Rs.20800.48
[2025-10-23T03:44:50.817Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:50.817Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:44:50.818Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:44:50.818Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:50.818Z] [LOG]    GROSS SALARY: Rs.6540.74
[2025-10-23T03:44:50.819Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:50.819Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:44:50.822Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:44:50.822Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:44:50.823Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:44:50.823Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:50.824Z] [LOG]    NET SALARY: Rs.6540.74
[2025-10-23T03:44:50.824Z] [LOG] ======================================================================

[2025-10-23T03:44:50.825Z] [LOG] ✅ Sithira null: Calculation completed successfully
[2025-10-23T03:44:50.826Z] [LOG] 📊 Progress: 13/34 (38.2%)
[2025-10-23T03:44:50.827Z] [LOG] 
🧮 Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-23T03:44:50.828Z] [LOG] 📋 Record ID: 68d6f22a-38fa-4e41-8f6f-a48187f8366e
[2025-10-23T03:44:50.829Z] [LOG] 
======================================================================
[2025-10-23T03:44:50.829Z] [LOG] 🧮 CALCULATING PAYROLL: Sujevan Selvaratnam null (EMP000026)
[2025-10-23T03:44:50.830Z] [LOG] ======================================================================
[2025-10-23T03:44:51.984Z] [LOG] 🔍 Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-23T03:44:51.985Z] [LOG]    Total components: 11
[2025-10-23T03:44:51.985Z] [LOG]    Applicable components: 11
[2025-10-23T03:44:51.985Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T03:44:53.536Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:44:53.536Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:44:54.032Z] [LOG] 📊 Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:54.737Z] [LOG] 📊 Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:54.962Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:54.963Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:44:54.963Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:44:55.304Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:44:55.304Z] [LOG]    Employee ID: 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:55.304Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:44:55.305Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:44:55.305Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-23T03:44:55.621Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:44:55.622Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-23T03:44:55.622Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-23T03:44:55.622Z] [LOG]       Saturday Hourly Rate: Rs.0.01
[2025-10-23T03:44:55.623Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:44:55.623Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:44:55.623Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:44:56.573Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:44:56.574Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:44:56.787Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:44:56.788Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:44:56.788Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:44:56.789Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:44:56.789Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:44:56.790Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:44:56.790Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:44:56.790Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:44:57.469Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:44:57.469Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:44:57.470Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:44:57.470Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:44:57.702Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:44:57.702Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:44:57.703Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:44:57.704Z] [LOG]       Current Time: 09:14:57
[2025-10-23T03:44:57.704Z] [LOG]       Expected Hours (scheduled → now): 0.75h
[2025-10-23T03:44:57.704Z] [LOG]       Actual Hours (check-in → now): 0.75h
[2025-10-23T03:44:57.705Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:44:57.705Z] [LOG]       Weekday: 119.75h
[2025-10-23T03:44:57.705Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:44:57.706Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:44:57.706Z] [LOG]       Total Expected: 133.25h
[2025-10-23T03:44:57.706Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:44:57.707Z] [LOG]       Weekday: 26.25h (includes 0.75h live)
[2025-10-23T03:44:57.707Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:44:57.707Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:44:57.708Z] [LOG]       Total Actual: 30.75h
[2025-10-23T03:44:57.709Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:44:57.710Z] [LOG]       Weekday: 119.75h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:57.710Z] [LOG]       Saturday: 13.50h × Rs.0.01 = Rs.0.14
[2025-10-23T03:44:57.711Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:57.711Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:57.711Z] [LOG]       Total Expected Earned: Rs.0.14
[2025-10-23T03:44:57.711Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:44:57.712Z] [LOG]       Weekday: 26.25h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:57.712Z] [LOG]       Saturday: 4.50h × Rs.0.01 = Rs.0.04
[2025-10-23T03:44:57.712Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:44:57.715Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:57.715Z] [LOG]       Total Actual Earned: Rs.0.04
[2025-10-23T03:44:57.717Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:44:57.717Z] [LOG]       Calculated At: Oct 23, 2025, 09:14:57
[2025-10-23T03:44:57.718Z] [LOG]       Expected Earned (until NOW): Rs.0.14
[2025-10-23T03:44:57.719Z] [LOG]       Actual Earned (until NOW): Rs.0.04
[2025-10-23T03:44:57.721Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:44:57.722Z] [LOG]       Attendance Deduction: Rs.0.09
[2025-10-23T03:44:57.722Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:44:57.723Z] [LOG]       📉 Shortfall: 102.50 hours (66.67% of expected)
[2025-10-23T03:44:57.724Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:44:57.724Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:44:57.725Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-23T03:44:57.725Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-23T03:44:57.725Z] [LOG]    Attendance Shortfall: Rs.0.09
[2025-10-23T03:44:57.725Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:44:57.726Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:44:57.726Z] [LOG]    Gross Salary: 0.045
[2025-10-23T03:44:57.726Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:44:57.727Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:44:57.728Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:57.728Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:44:57.729Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:57.729Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:44:57.729Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:57.730Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:44:57.730Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:57.730Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:44:57.731Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:57.731Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:44:57.733Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:57.733Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:44:57.734Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:57.735Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:44:57.736Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:57.736Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:44:57.737Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:57.737Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:44:57.738Z] [LOG]    EPF/ETF calculated on: Rs.0.04
[2025-10-23T03:44:57.738Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:44:57.738Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:44:57.738Z] [LOG] 💰 GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-23T03:44:57.738Z] [LOG]    Base Salary: 1
[2025-10-23T03:44:57.739Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:44:57.739Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:44:57.740Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:57.740Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:44:57.740Z] [LOG]    Fixed amount: 0
[2025-10-23T03:44:58.279Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:44:58.279Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:44:58.280Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:44:58.280Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:44:58.280Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-23T03:44:58.281Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:44:58.281Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:44:58.282Z] [LOG]    = Gross Salary: Rs.0.04
[2025-10-23T03:44:58.282Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:44:58.282Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:44:58.282Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:44:58.283Z] [LOG]    Gross Salary: Rs.0.04
[2025-10-23T03:44:58.283Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:44:58.284Z] [LOG]    = NET SALARY: Rs.0.04
[2025-10-23T03:44:58.514Z] [LOG] Creating components for record 68d6f22a-38fa-4e41-8f6f-a48187f8366e: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:44:58.515Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 0.045
}
[2025-10-23T03:44:58.735Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:44:59.133Z] [LOG] Created payroll_record_component: 80cf3e39-ce43-441a-a035-9c0ed9734398 for Base Salary (Attendance-based)
[2025-10-23T03:44:59.584Z] [LOG] ✅ Financial balances updated successfully for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-23T03:44:59.585Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:44:59.585Z] [LOG] 
======================================================================
[2025-10-23T03:44:59.586Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sujevan Selvaratnam null
[2025-10-23T03:44:59.586Z] [LOG] ======================================================================
[2025-10-23T03:44:59.587Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-23T03:44:59.587Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.04
[2025-10-23T03:44:59.587Z] [LOG]    Attendance Shortfall: Rs.0.09
[2025-10-23T03:44:59.588Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:59.588Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:44:59.588Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:44:59.588Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:59.589Z] [LOG]    GROSS SALARY: Rs.0.04
[2025-10-23T03:44:59.589Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:59.590Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:44:59.592Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:44:59.592Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:44:59.592Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:44:59.593Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:44:59.594Z] [LOG]    NET SALARY: Rs.0.04
[2025-10-23T03:44:59.594Z] [LOG] ======================================================================

[2025-10-23T03:44:59.595Z] [LOG] ✅ Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-23T03:44:59.596Z] [LOG] 📊 Progress: 14/34 (41.2%)
[2025-10-23T03:44:59.596Z] [LOG] 
🧮 Processing: Uthpala null (EMP000006)
[2025-10-23T03:44:59.597Z] [LOG] 📋 Record ID: 6d09a891-b43b-4ac9-b6a4-1b73a2aff65f
[2025-10-23T03:44:59.597Z] [LOG] 
======================================================================
[2025-10-23T03:44:59.598Z] [LOG] 🧮 CALCULATING PAYROLL: Uthpala null (EMP000006)
[2025-10-23T03:44:59.599Z] [LOG] ======================================================================
[2025-10-23T03:45:00.961Z] [LOG] 🔍 Component filtering for employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-23T03:45:00.962Z] [LOG]    Total components: 11
[2025-10-23T03:45:00.962Z] [LOG]    Applicable components: 11
[2025-10-23T03:45:00.962Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-23T03:45:04.254Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:45:04.254Z] [LOG] 🔄 Processing financial records for employee 0143a539-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:45:04.583Z] [LOG] 📊 Found 0 active loans for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:05.276Z] [LOG] 📊 Found 0 active advances for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:05.493Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:05.494Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:45:05.494Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:45:05.697Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:45:05.698Z] [LOG]    Employee ID: 0143a539-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:05.698Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:45:05.699Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:45:05.699Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-23T03:45:06.225Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:45:06.227Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-23T03:45:06.228Z] [LOG]       Weekday Hourly Rate: Rs.500.00
[2025-10-23T03:45:06.229Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-23T03:45:06.230Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:45:06.231Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:45:06.231Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:45:07.143Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:45:07.144Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:45:07.454Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:45:07.454Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:45:07.455Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:45:07.455Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:45:07.455Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:45:07.456Z] [LOG]          2. 2025-10-15 (Weekday): 7.50h
[2025-10-23T03:45:07.456Z] [LOG]          3. 2025-10-16 (Weekday): 7.50h
[2025-10-23T03:45:07.456Z] [LOG]          4. 2025-10-22 (Weekday): 7.50h
[2025-10-23T03:45:07.773Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:45:07.774Z] [LOG]          Weekday: 22.50h
[2025-10-23T03:45:07.775Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:45:07.775Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:45:08.097Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:45:08.097Z] [LOG]       Scheduled Start: 09:30:00
[2025-10-23T03:45:08.098Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:45:08.099Z] [LOG]       Current Time: 09:15:08
[2025-10-23T03:45:08.099Z] [LOG]       Expected Hours (scheduled → now): 0.00h
[2025-10-23T03:45:08.100Z] [LOG]       Actual Hours (check-in → now): 0.75h
[2025-10-23T03:45:08.100Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:45:08.100Z] [LOG]       Weekday: 112.00h
[2025-10-23T03:45:08.101Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:45:08.101Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:45:08.101Z] [LOG]       Total Expected: 125.50h
[2025-10-23T03:45:08.102Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:45:08.102Z] [LOG]       Weekday: 23.25h (includes 0.75h live)
[2025-10-23T03:45:08.102Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:45:08.103Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:45:08.103Z] [LOG]       Total Actual: 27.75h
[2025-10-23T03:45:08.105Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:45:08.106Z] [LOG]       Weekday: 112.00h × Rs.500.00 = Rs.56000.00
[2025-10-23T03:45:08.107Z] [LOG]       Saturday: 13.50h × Rs.888.89 = Rs.12000.01
[2025-10-23T03:45:08.108Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:45:08.108Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:08.111Z] [LOG]       Total Expected Earned: Rs.68000.01
[2025-10-23T03:45:08.111Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:45:08.112Z] [LOG]       Weekday: 23.25h × Rs.500.00 = Rs.11626.12
[2025-10-23T03:45:08.112Z] [LOG]       Saturday: 4.50h × Rs.888.89 = Rs.4000.01
[2025-10-23T03:45:08.113Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:45:08.114Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:08.114Z] [LOG]       Total Actual Earned: Rs.15626.13
[2025-10-23T03:45:08.116Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:45:08.116Z] [LOG]       Calculated At: Oct 23, 2025, 09:15:08
[2025-10-23T03:45:08.117Z] [LOG]       Expected Earned (until NOW): Rs.68000.01
[2025-10-23T03:45:08.117Z] [LOG]       Actual Earned (until NOW): Rs.15626.13
[2025-10-23T03:45:08.117Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:08.117Z] [LOG]       Attendance Deduction: Rs.52373.89
[2025-10-23T03:45:08.118Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:45:08.118Z] [LOG]       📉 Shortfall: 97.75 hours (77.02% of expected)
[2025-10-23T03:45:08.119Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:45:08.120Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:45:08.120Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-23T03:45:08.120Z] [LOG]    Actual Earned Base: Rs.15626.13
[2025-10-23T03:45:08.121Z] [LOG]    Attendance Shortfall: Rs.52373.89
[2025-10-23T03:45:08.121Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:45:08.122Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:45:08.123Z] [LOG]    Gross Salary: 15626.129583333332
[2025-10-23T03:45:08.124Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:45:08.124Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:45:08.125Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:08.125Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:45:08.125Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:08.126Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:45:08.126Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:08.126Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:45:08.127Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:08.127Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:45:08.127Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:08.128Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:45:08.129Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:08.129Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:45:08.129Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:08.129Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:45:08.130Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:08.130Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:45:08.130Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:08.131Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:45:08.131Z] [LOG]    EPF/ETF calculated on: Rs.15626.13
[2025-10-23T03:45:08.132Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:45:08.135Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:45:08.136Z] [LOG] 💰 GROSS CALCULATION for Uthpala null:
[2025-10-23T03:45:08.137Z] [LOG]    Base Salary: 100000
[2025-10-23T03:45:08.137Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:45:08.137Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:45:08.138Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:08.138Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:45:08.138Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:08.414Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:45:08.415Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:45:08.415Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:45:08.415Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:45:08.416Z] [LOG]    Actual Earned Base: Rs.15626.13
[2025-10-23T03:45:08.416Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:45:08.416Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:45:08.416Z] [LOG]    = Gross Salary: Rs.15626.13
[2025-10-23T03:45:08.417Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:45:08.417Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:45:08.417Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:45:08.418Z] [LOG]    Gross Salary: Rs.15626.13
[2025-10-23T03:45:08.418Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:45:08.418Z] [LOG]    = NET SALARY: Rs.15626.13
[2025-10-23T03:45:08.733Z] [LOG] Creating components for record 6d09a891-b43b-4ac9-b6a4-1b73a2aff65f: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:45:08.734Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 15626.129583333332
}
[2025-10-23T03:45:09.064Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:45:09.264Z] [LOG] Created payroll_record_component: 723fb281-c3f3-401d-b0b8-dd176fd58514 for Base Salary (Attendance-based)
[2025-10-23T03:45:09.694Z] [LOG] ✅ Financial balances updated successfully for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:09.694Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:45:09.695Z] [LOG] 
======================================================================
[2025-10-23T03:45:09.695Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Uthpala null
[2025-10-23T03:45:09.695Z] [LOG] ======================================================================
[2025-10-23T03:45:09.696Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-23T03:45:09.696Z] [LOG]    Actual Earned Base (Attendance-based): Rs.15626.13
[2025-10-23T03:45:09.696Z] [LOG]    Attendance Shortfall: Rs.52373.89
[2025-10-23T03:45:09.697Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:09.697Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:45:09.697Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:45:09.698Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:09.700Z] [LOG]    GROSS SALARY: Rs.15626.13
[2025-10-23T03:45:09.701Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:09.702Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:45:09.702Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:45:09.703Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:45:09.703Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:45:09.703Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:09.704Z] [LOG]    NET SALARY: Rs.15626.13
[2025-10-23T03:45:09.704Z] [LOG] ======================================================================

[2025-10-23T03:45:09.704Z] [LOG] ✅ Uthpala null: Calculation completed successfully
[2025-10-23T03:45:09.705Z] [LOG] 📊 Progress: 15/34 (44.1%)
[2025-10-23T03:45:09.706Z] [LOG] 
🧮 Processing: Ammaar Ilham (EMP000023)
[2025-10-23T03:45:09.706Z] [LOG] 📋 Record ID: 70d43cd3-dfb6-42de-8ab2-e761af349b0e
[2025-10-23T03:45:09.707Z] [LOG] 
======================================================================
[2025-10-23T03:45:09.707Z] [LOG] 🧮 CALCULATING PAYROLL: Ammaar Ilham (EMP000023)
[2025-10-23T03:45:09.707Z] [LOG] ======================================================================
[2025-10-23T03:45:10.894Z] [LOG] 🔍 Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-23T03:45:10.895Z] [LOG]    Total components: 11
[2025-10-23T03:45:10.896Z] [LOG]    Applicable components: 11
[2025-10-23T03:45:10.896Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T03:45:12.557Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:45:12.557Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:45:12.770Z] [LOG] 📊 Found 0 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:12.988Z] [LOG] 📊 Found 0 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:13.224Z] [LOG] 📊 Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:13.225Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:45:13.225Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:45:13.556Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:45:13.557Z] [LOG]    Employee ID: 0143de00-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:13.557Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:45:13.557Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:45:13.558Z] [LOG]    Base Salary (Full Month): Rs.70000.00
[2025-10-23T03:45:13.777Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:45:13.778Z] [LOG]       Daily Salary: Rs.2800.00
[2025-10-23T03:45:13.778Z] [LOG]       Weekday Hourly Rate: Rs.329.41
[2025-10-23T03:45:13.778Z] [LOG]       Saturday Hourly Rate: Rs.622.22
[2025-10-23T03:45:13.779Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:45:13.779Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:45:13.779Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:45:15.208Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:45:15.209Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:45:15.425Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:45:15.425Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:45:15.426Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:45:15.426Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:45:15.426Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:45:15.427Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:45:15.427Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:45:15.427Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:45:15.775Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:45:15.775Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:45:15.776Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:45:15.776Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:45:16.022Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:45:16.022Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:45:16.022Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:45:16.024Z] [LOG]       Current Time: 09:15:16
[2025-10-23T03:45:16.024Z] [LOG]       Expected Hours (scheduled → now): 0.75h
[2025-10-23T03:45:16.024Z] [LOG]       Actual Hours (check-in → now): 0.75h
[2025-10-23T03:45:16.025Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:45:16.025Z] [LOG]       Weekday: 119.75h
[2025-10-23T03:45:16.025Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:45:16.026Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:45:16.026Z] [LOG]       Total Expected: 133.25h
[2025-10-23T03:45:16.026Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:45:16.027Z] [LOG]       Weekday: 26.25h (includes 0.75h live)
[2025-10-23T03:45:16.027Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:45:16.027Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:45:16.028Z] [LOG]       Total Actual: 30.75h
[2025-10-23T03:45:16.030Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:45:16.035Z] [LOG]       Weekday: 119.75h × Rs.329.41 = Rs.39448.31
[2025-10-23T03:45:16.035Z] [LOG]       Saturday: 13.50h × Rs.622.22 = Rs.8399.97
[2025-10-23T03:45:16.037Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:45:16.037Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:16.038Z] [LOG]       Total Expected Earned: Rs.47848.28
[2025-10-23T03:45:16.039Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:45:16.039Z] [LOG]       Weekday: 26.25h × Rs.329.41 = Rs.8648.48
[2025-10-23T03:45:16.040Z] [LOG]       Saturday: 4.50h × Rs.622.22 = Rs.2799.99
[2025-10-23T03:45:16.040Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:45:16.040Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:16.040Z] [LOG]       Total Actual Earned: Rs.11448.47
[2025-10-23T03:45:16.042Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:45:16.043Z] [LOG]       Calculated At: Oct 23, 2025, 09:15:16
[2025-10-23T03:45:16.043Z] [LOG]       Expected Earned (until NOW): Rs.47848.28
[2025-10-23T03:45:16.043Z] [LOG]       Actual Earned (until NOW): Rs.11448.47
[2025-10-23T03:45:16.044Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:16.044Z] [LOG]       Attendance Deduction: Rs.36399.82
[2025-10-23T03:45:16.045Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:45:16.045Z] [LOG]       📉 Shortfall: 102.50 hours (76.07% of expected)
[2025-10-23T03:45:16.045Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:45:16.046Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:45:16.046Z] [LOG]    Base Salary (Full): Rs.70000.00
[2025-10-23T03:45:16.048Z] [LOG]    Actual Earned Base: Rs.11448.47
[2025-10-23T03:45:16.049Z] [LOG]    Attendance Shortfall: Rs.36399.82
[2025-10-23T03:45:16.050Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:45:16.051Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:45:16.052Z] [LOG]    Gross Salary: 11448.468557505556
[2025-10-23T03:45:16.053Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:45:16.053Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:45:16.054Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:16.054Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:45:16.055Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:16.055Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:45:16.055Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:16.055Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:45:16.055Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:16.056Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:45:16.056Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:16.056Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:45:16.056Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:16.056Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:45:16.056Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:16.057Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:45:16.057Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:16.057Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:45:16.057Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:16.058Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:45:16.058Z] [LOG]    EPF/ETF calculated on: Rs.11448.47
[2025-10-23T03:45:16.058Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:45:16.059Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:45:16.059Z] [LOG] 💰 GROSS CALCULATION for Ammaar Ilham:
[2025-10-23T03:45:16.059Z] [LOG]    Base Salary: 70000
[2025-10-23T03:45:16.060Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:45:16.060Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:45:16.060Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:16.061Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:45:16.061Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:16.275Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:45:16.275Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:45:16.276Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:45:16.276Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:45:16.277Z] [LOG]    Actual Earned Base: Rs.11448.47
[2025-10-23T03:45:16.277Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:45:16.277Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:45:16.277Z] [LOG]    = Gross Salary: Rs.11448.47
[2025-10-23T03:45:16.278Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:45:16.278Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:45:16.278Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:45:16.278Z] [LOG]    Gross Salary: Rs.11448.47
[2025-10-23T03:45:16.279Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:45:16.279Z] [LOG]    = NET SALARY: Rs.11448.47
[2025-10-23T03:45:16.504Z] [LOG] Creating components for record 70d43cd3-dfb6-42de-8ab2-e761af349b0e: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:45:16.505Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 11448.468557505556
}
[2025-10-23T03:45:16.706Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:45:17.053Z] [LOG] Created payroll_record_component: ef4c82e7-5e0d-43eb-b73f-910deac1406e for Base Salary (Attendance-based)
[2025-10-23T03:45:18.089Z] [LOG] ✅ Financial balances updated successfully for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:18.089Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:45:18.089Z] [LOG] 
======================================================================
[2025-10-23T03:45:18.090Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ammaar Ilham
[2025-10-23T03:45:18.090Z] [LOG] ======================================================================
[2025-10-23T03:45:18.091Z] [LOG]    Base Salary (Full): Rs.70000.00
[2025-10-23T03:45:18.091Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11448.47
[2025-10-23T03:45:18.091Z] [LOG]    Attendance Shortfall: Rs.36399.82
[2025-10-23T03:45:18.092Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:18.092Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:45:18.092Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:45:18.093Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:18.093Z] [LOG]    GROSS SALARY: Rs.11448.47
[2025-10-23T03:45:18.093Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:18.094Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:45:18.094Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:45:18.095Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:45:18.095Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:45:18.096Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:18.096Z] [LOG]    NET SALARY: Rs.11448.47
[2025-10-23T03:45:18.097Z] [LOG] ======================================================================

[2025-10-23T03:45:18.097Z] [LOG] ✅ Ammaar Ilham: Calculation completed successfully
[2025-10-23T03:45:18.098Z] [LOG] 📊 Progress: 16/34 (47.1%)
[2025-10-23T03:45:18.098Z] [LOG] 
🧮 Processing: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-23T03:45:18.099Z] [LOG] 📋 Record ID: 7a0e4693-9ae2-4d4c-872f-ac704b421fe4
[2025-10-23T03:45:18.099Z] [LOG] 
======================================================================
[2025-10-23T03:45:18.100Z] [LOG] 🧮 CALCULATING PAYROLL: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-23T03:45:18.100Z] [LOG] ======================================================================
[2025-10-23T03:45:19.302Z] [LOG] 🔍 Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-23T03:45:19.302Z] [LOG]    Total components: 11
[2025-10-23T03:45:19.302Z] [LOG]    Applicable components: 11
[2025-10-23T03:45:19.303Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T03:45:21.048Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:45:21.049Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:45:21.293Z] [LOG] 📊 Found 0 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:21.535Z] [LOG] 📊 Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:21.855Z] [LOG] 📊 Found 0 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:21.855Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:45:21.856Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:45:22.175Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:45:22.175Z] [LOG]    Employee ID: 0144461e-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:22.176Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:45:22.176Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:45:22.176Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T03:45:22.494Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:45:22.494Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T03:45:22.495Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T03:45:22.495Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T03:45:22.495Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:45:22.496Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:45:22.496Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:45:23.225Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:45:23.226Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:45:23.454Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:45:23.455Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:45:23.455Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:45:23.455Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:45:23.456Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:45:23.456Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:45:23.456Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:45:23.457Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:45:23.694Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:45:23.695Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:45:23.695Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:45:23.696Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:45:23.907Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:45:23.908Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:45:23.908Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:45:23.909Z] [LOG]       Current Time: 09:15:23
[2025-10-23T03:45:23.909Z] [LOG]       Expected Hours (scheduled → now): 0.76h
[2025-10-23T03:45:23.910Z] [LOG]       Actual Hours (check-in → now): 0.76h
[2025-10-23T03:45:23.910Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:45:23.911Z] [LOG]       Weekday: 119.76h
[2025-10-23T03:45:23.911Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:45:23.912Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:45:23.912Z] [LOG]       Total Expected: 133.26h
[2025-10-23T03:45:23.918Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:45:23.919Z] [LOG]       Weekday: 26.26h (includes 0.76h live)
[2025-10-23T03:45:23.919Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:45:23.920Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:45:23.920Z] [LOG]       Total Actual: 30.76h
[2025-10-23T03:45:23.920Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:45:23.921Z] [LOG]       Weekday: 119.76h × Rs.235.29 = Rs.28177.54
[2025-10-23T03:45:23.921Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T03:45:23.922Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:45:23.922Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:23.922Z] [LOG]       Total Expected Earned: Rs.34177.48
[2025-10-23T03:45:23.925Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:45:23.925Z] [LOG]       Weekday: 26.26h × Rs.235.29 = Rs.6177.93
[2025-10-23T03:45:23.925Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T03:45:23.926Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:45:23.927Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:23.928Z] [LOG]       Total Actual Earned: Rs.8177.91
[2025-10-23T03:45:23.929Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:45:23.929Z] [LOG]       Calculated At: Oct 23, 2025, 09:15:23
[2025-10-23T03:45:23.931Z] [LOG]       Expected Earned (until NOW): Rs.34177.48
[2025-10-23T03:45:23.932Z] [LOG]       Actual Earned (until NOW): Rs.8177.91
[2025-10-23T03:45:23.932Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:23.932Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T03:45:23.933Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:45:23.934Z] [LOG]       📉 Shortfall: 102.50 hours (76.07% of expected)
[2025-10-23T03:45:23.934Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:45:23.935Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:45:23.937Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:45:23.937Z] [LOG]    Actual Earned Base: Rs.8177.91
[2025-10-23T03:45:23.938Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:45:23.938Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:45:23.938Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:45:23.939Z] [LOG]    Gross Salary: 8177.905021675
[2025-10-23T03:45:23.940Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:45:23.940Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:45:23.941Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:23.941Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:45:23.941Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:23.942Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:45:23.942Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:23.943Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:45:23.944Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:23.944Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:45:23.944Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:23.945Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:45:23.945Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:23.945Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:45:23.946Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:23.946Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:45:23.946Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:23.947Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:45:23.947Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:23.947Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:45:23.947Z] [LOG]    EPF/ETF calculated on: Rs.8177.91
[2025-10-23T03:45:23.948Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:45:23.948Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:45:23.949Z] [LOG] 💰 GROSS CALCULATION for Ashen Nirmal Wadugodapitiya null:
[2025-10-23T03:45:23.949Z] [LOG]    Base Salary: 50000
[2025-10-23T03:45:23.949Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:45:23.950Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:45:23.950Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:23.950Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:45:23.950Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:24.469Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:45:24.470Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:45:24.471Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:45:24.471Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:45:24.472Z] [LOG]    Actual Earned Base: Rs.8177.91
[2025-10-23T03:45:24.472Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:45:24.472Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:45:24.473Z] [LOG]    = Gross Salary: Rs.8177.91
[2025-10-23T03:45:24.473Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:45:24.474Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:45:24.474Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:45:24.474Z] [LOG]    Gross Salary: Rs.8177.91
[2025-10-23T03:45:24.475Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:45:24.475Z] [LOG]    = NET SALARY: Rs.8177.91
[2025-10-23T03:45:24.700Z] [LOG] Creating components for record 7a0e4693-9ae2-4d4c-872f-ac704b421fe4: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:45:24.701Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8177.905021675
}
[2025-10-23T03:45:24.903Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:45:25.135Z] [LOG] Created payroll_record_component: f9e6476e-2f0c-421f-bf84-e979ed6935d0 for Base Salary (Attendance-based)
[2025-10-23T03:45:25.583Z] [LOG] ✅ Financial balances updated successfully for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:25.584Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:45:25.585Z] [LOG] 
======================================================================
[2025-10-23T03:45:25.585Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ashen Nirmal Wadugodapitiya null
[2025-10-23T03:45:25.585Z] [LOG] ======================================================================
[2025-10-23T03:45:25.586Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:45:25.586Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8177.91
[2025-10-23T03:45:25.586Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:45:25.587Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:25.587Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:45:25.588Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:45:25.588Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:25.588Z] [LOG]    GROSS SALARY: Rs.8177.91
[2025-10-23T03:45:25.589Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:25.591Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:45:25.591Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:45:25.591Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:45:25.592Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:45:25.592Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:25.593Z] [LOG]    NET SALARY: Rs.8177.91
[2025-10-23T03:45:25.593Z] [LOG] ======================================================================

[2025-10-23T03:45:25.593Z] [LOG] ✅ Ashen Nirmal Wadugodapitiya null: Calculation completed successfully
[2025-10-23T03:45:25.593Z] [LOG] 📊 Progress: 17/34 (50.0%)
[2025-10-23T03:45:25.593Z] [LOG] 
🧮 Processing: Kaushal Thambi (EMP465256103)
[2025-10-23T03:45:25.594Z] [LOG] 📋 Record ID: 861fe03b-6d3d-4f84-ba8b-1a8888a4c94e
[2025-10-23T03:45:25.594Z] [LOG] 
======================================================================
[2025-10-23T03:45:25.595Z] [LOG] 🧮 CALCULATING PAYROLL: Kaushal Thambi (EMP465256103)
[2025-10-23T03:45:25.595Z] [LOG] ======================================================================
[2025-10-23T03:45:26.962Z] [LOG] 🔍 Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-23T03:45:26.962Z] [LOG]    Total components: 11
[2025-10-23T03:45:26.963Z] [LOG]    Applicable components: 11
[2025-10-23T03:45:26.963Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-23T03:45:28.573Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:45:28.573Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:45:28.896Z] [LOG] 📊 Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-23T03:45:29.213Z] [LOG] 📊 Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-23T03:45:29.533Z] [LOG] 📊 Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-23T03:45:29.534Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:45:29.534Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:45:29.864Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:45:29.864Z] [LOG]    Employee ID: 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-23T03:45:29.864Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:45:29.865Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:45:29.865Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T03:45:30.173Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:45:30.174Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T03:45:30.174Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T03:45:30.174Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T03:45:30.175Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:45:30.175Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:45:30.175Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:45:31.137Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:45:31.138Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:45:31.345Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:45:31.345Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:45:31.345Z] [LOG]       Total completed sessions found: 2
[2025-10-23T03:45:31.345Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:45:31.346Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:45:31.346Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:45:31.553Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:45:31.553Z] [LOG]          Weekday: 8.50h
[2025-10-23T03:45:31.554Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:45:31.554Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:45:31.773Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:45:31.773Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:45:31.773Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:45:31.774Z] [LOG]       Current Time: 09:15:31
[2025-10-23T03:45:31.774Z] [LOG]       Expected Hours (scheduled → now): 0.76h
[2025-10-23T03:45:31.774Z] [LOG]       Actual Hours (check-in → now): 0.76h
[2025-10-23T03:45:31.774Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:45:31.775Z] [LOG]       Weekday: 119.76h
[2025-10-23T03:45:31.775Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:45:31.775Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:45:31.775Z] [LOG]       Total Expected: 133.26h
[2025-10-23T03:45:31.775Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:45:31.775Z] [LOG]       Weekday: 9.26h (includes 0.76h live)
[2025-10-23T03:45:31.775Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:45:31.775Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:45:31.775Z] [LOG]       Total Actual: 13.76h
[2025-10-23T03:45:31.776Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:45:31.776Z] [LOG]       Weekday: 119.76h × Rs.235.29 = Rs.28178.05
[2025-10-23T03:45:31.776Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T03:45:31.776Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:45:31.776Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:31.776Z] [LOG]       Total Expected Earned: Rs.34177.99
[2025-10-23T03:45:31.776Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:45:31.776Z] [LOG]       Weekday: 9.26h × Rs.235.29 = Rs.2178.51
[2025-10-23T03:45:31.776Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T03:45:31.776Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:45:31.777Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:31.777Z] [LOG]       Total Actual Earned: Rs.4178.49
[2025-10-23T03:45:31.777Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:45:31.777Z] [LOG]       Calculated At: Oct 23, 2025, 09:15:31
[2025-10-23T03:45:31.777Z] [LOG]       Expected Earned (until NOW): Rs.34177.99
[2025-10-23T03:45:31.777Z] [LOG]       Actual Earned (until NOW): Rs.4178.49
[2025-10-23T03:45:31.778Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:31.778Z] [LOG]       Attendance Deduction: Rs.29999.51
[2025-10-23T03:45:31.778Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:45:31.778Z] [LOG]       📉 Shortfall: 119.50 hours (87.77% of expected)
[2025-10-23T03:45:31.778Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:45:31.778Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:45:31.779Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:45:31.779Z] [LOG]    Actual Earned Base: Rs.4178.49
[2025-10-23T03:45:31.779Z] [LOG]    Attendance Shortfall: Rs.29999.51
[2025-10-23T03:45:31.779Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:45:31.780Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:45:31.780Z] [LOG]    Gross Salary: 4178.489130325
[2025-10-23T03:45:31.780Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:45:31.781Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:45:31.781Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:31.781Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:45:31.781Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:31.781Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:45:31.782Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:31.782Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:45:31.782Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:31.783Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:45:31.783Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:31.783Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:45:31.783Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:31.784Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:45:31.784Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:31.784Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:45:31.784Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:31.785Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:45:31.785Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:31.785Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:45:31.786Z] [LOG]    EPF/ETF calculated on: Rs.4178.49
[2025-10-23T03:45:31.786Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:45:31.786Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:45:31.786Z] [LOG] 💰 GROSS CALCULATION for Kaushal Thambi:
[2025-10-23T03:45:31.787Z] [LOG]    Base Salary: 50000
[2025-10-23T03:45:31.787Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:45:31.787Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:45:31.788Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:31.788Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:45:31.788Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:32.096Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:45:32.096Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:45:32.096Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:45:32.096Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:45:32.097Z] [LOG]    Actual Earned Base: Rs.4178.49
[2025-10-23T03:45:32.097Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:45:32.097Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:45:32.097Z] [LOG]    = Gross Salary: Rs.4178.49
[2025-10-23T03:45:32.097Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:45:32.097Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:45:32.097Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:45:32.098Z] [LOG]    Gross Salary: Rs.4178.49
[2025-10-23T03:45:32.098Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:45:32.098Z] [LOG]    = NET SALARY: Rs.4178.49
[2025-10-23T03:45:32.349Z] [LOG] Creating components for record 861fe03b-6d3d-4f84-ba8b-1a8888a4c94e: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:45:32.349Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 4178.489130325
}
[2025-10-23T03:45:33.054Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:45:33.269Z] [LOG] Created payroll_record_component: 1c654302-041b-4837-8ad7-8fcbf2b6de7b for Base Salary (Attendance-based)
[2025-10-23T03:45:33.978Z] [LOG] ✅ Financial balances updated successfully for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-23T03:45:33.978Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:45:33.979Z] [LOG] 
======================================================================
[2025-10-23T03:45:33.979Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Kaushal Thambi
[2025-10-23T03:45:33.979Z] [LOG] ======================================================================
[2025-10-23T03:45:33.980Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:45:33.980Z] [LOG]    Actual Earned Base (Attendance-based): Rs.4178.49
[2025-10-23T03:45:33.980Z] [LOG]    Attendance Shortfall: Rs.29999.51
[2025-10-23T03:45:33.980Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:33.981Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:45:33.981Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:45:33.981Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:33.982Z] [LOG]    GROSS SALARY: Rs.4178.49
[2025-10-23T03:45:33.982Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:33.982Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:45:33.983Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:45:33.983Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:45:33.983Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:45:33.983Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:33.984Z] [LOG]    NET SALARY: Rs.4178.49
[2025-10-23T03:45:33.984Z] [LOG] ======================================================================

[2025-10-23T03:45:33.984Z] [LOG] ✅ Kaushal Thambi: Calculation completed successfully
[2025-10-23T03:45:33.984Z] [LOG] 📊 Progress: 18/34 (52.9%)
[2025-10-23T03:45:33.985Z] [LOG] 
🧮 Processing: Dharshika null (EMP000009)
[2025-10-23T03:45:33.985Z] [LOG] 📋 Record ID: 86b4e5f7-814a-442b-a934-db565a7a14f5
[2025-10-23T03:45:33.985Z] [LOG] 
======================================================================
[2025-10-23T03:45:33.985Z] [LOG] 🧮 CALCULATING PAYROLL: Dharshika null (EMP000009)
[2025-10-23T03:45:33.986Z] [LOG] ======================================================================
[2025-10-23T03:45:35.298Z] [LOG] 🔍 Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-23T03:45:35.299Z] [LOG]    Total components: 11
[2025-10-23T03:45:35.299Z] [LOG]    Applicable components: 11
[2025-10-23T03:45:35.300Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T03:45:36.545Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:45:36.545Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:45:36.741Z] [LOG] 📊 Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:37.369Z] [LOG] 📊 Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:37.584Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:37.585Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:45:37.585Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:45:37.787Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:45:37.787Z] [LOG]    Employee ID: 0143a994-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:37.787Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:45:37.788Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:45:37.788Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-23T03:45:38.185Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:45:38.186Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-23T03:45:38.186Z] [LOG]       Weekday Hourly Rate: Rs.470.59
[2025-10-23T03:45:38.186Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-23T03:45:38.186Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:45:38.187Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:45:38.187Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:45:39.149Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:45:39.150Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:45:39.454Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:45:39.454Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:45:39.454Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:45:39.454Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:45:39.454Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:45:39.454Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:45:39.455Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:45:39.455Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:45:39.773Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:45:39.773Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:45:39.774Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:45:39.774Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:45:40.017Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:45:40.018Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:45:40.018Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:45:40.019Z] [LOG]       Current Time: 09:15:40
[2025-10-23T03:45:40.019Z] [LOG]       Expected Hours (scheduled → now): 0.76h
[2025-10-23T03:45:40.019Z] [LOG]       Actual Hours (check-in → now): 0.76h
[2025-10-23T03:45:40.019Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:45:40.020Z] [LOG]       Weekday: 119.76h
[2025-10-23T03:45:40.020Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:45:40.020Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:45:40.021Z] [LOG]       Total Expected: 133.26h
[2025-10-23T03:45:40.021Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:45:40.021Z] [LOG]       Weekday: 26.26h (includes 0.76h live)
[2025-10-23T03:45:40.021Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:45:40.022Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:45:40.022Z] [LOG]       Total Actual: 30.76h
[2025-10-23T03:45:40.022Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:45:40.023Z] [LOG]       Weekday: 119.76h × Rs.470.59 = Rs.56358.38
[2025-10-23T03:45:40.023Z] [LOG]       Saturday: 13.50h × Rs.888.89 = Rs.12000.01
[2025-10-23T03:45:40.024Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:45:40.024Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:40.025Z] [LOG]       Total Expected Earned: Rs.68358.40
[2025-10-23T03:45:40.025Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:45:40.025Z] [LOG]       Weekday: 26.26h × Rs.470.59 = Rs.12358.22
[2025-10-23T03:45:40.025Z] [LOG]       Saturday: 4.50h × Rs.888.89 = Rs.4000.01
[2025-10-23T03:45:40.026Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:45:40.026Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:40.026Z] [LOG]       Total Actual Earned: Rs.16358.22
[2025-10-23T03:45:40.027Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:45:40.028Z] [LOG]       Calculated At: Oct 23, 2025, 09:15:40
[2025-10-23T03:45:40.028Z] [LOG]       Expected Earned (until NOW): Rs.68358.40
[2025-10-23T03:45:40.029Z] [LOG]       Actual Earned (until NOW): Rs.16358.22
[2025-10-23T03:45:40.030Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:40.030Z] [LOG]       Attendance Deduction: Rs.52000.18
[2025-10-23T03:45:40.031Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:45:40.031Z] [LOG]       📉 Shortfall: 102.50 hours (76.07% of expected)
[2025-10-23T03:45:40.031Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:45:40.032Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:45:40.032Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-23T03:45:40.032Z] [LOG]    Actual Earned Base: Rs.16358.22
[2025-10-23T03:45:40.033Z] [LOG]    Attendance Shortfall: Rs.52000.18
[2025-10-23T03:45:40.033Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:45:40.033Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:45:40.034Z] [LOG]    Gross Salary: 16358.223500008335
[2025-10-23T03:45:40.034Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:45:40.035Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:45:40.036Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:40.036Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:45:40.037Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:40.037Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:45:40.037Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:40.038Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:45:40.038Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:40.038Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:45:40.038Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:40.039Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:45:40.039Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:40.039Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:45:40.039Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:40.039Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:45:40.040Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:40.040Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:45:40.040Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:40.040Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:45:40.040Z] [LOG]    EPF/ETF calculated on: Rs.16358.22
[2025-10-23T03:45:40.041Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:45:40.041Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:45:40.041Z] [LOG] 💰 GROSS CALCULATION for Dharshika null:
[2025-10-23T03:45:40.041Z] [LOG]    Base Salary: 100000
[2025-10-23T03:45:40.042Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:45:40.042Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:45:40.042Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:40.042Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:45:40.042Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:40.258Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:45:40.258Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:45:40.258Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:45:40.259Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:45:40.259Z] [LOG]    Actual Earned Base: Rs.16358.22
[2025-10-23T03:45:40.259Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:45:40.259Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:45:40.259Z] [LOG]    = Gross Salary: Rs.16358.22
[2025-10-23T03:45:40.260Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:45:40.260Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:45:40.260Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:45:40.260Z] [LOG]    Gross Salary: Rs.16358.22
[2025-10-23T03:45:40.260Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:45:40.261Z] [LOG]    = NET SALARY: Rs.16358.22
[2025-10-23T03:45:40.493Z] [LOG] Creating components for record 86b4e5f7-814a-442b-a934-db565a7a14f5: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:45:40.493Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 16358.223500008335
}
[2025-10-23T03:45:40.734Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:45:41.368Z] [LOG] Created payroll_record_component: d43f541f-b51c-4594-b1a5-3bcf96382976 for Base Salary (Attendance-based)
[2025-10-23T03:45:41.777Z] [LOG] ✅ Financial balances updated successfully for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:41.777Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:45:41.777Z] [LOG] 
======================================================================
[2025-10-23T03:45:41.778Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Dharshika null
[2025-10-23T03:45:41.778Z] [LOG] ======================================================================
[2025-10-23T03:45:41.778Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-23T03:45:41.778Z] [LOG]    Actual Earned Base (Attendance-based): Rs.16358.22
[2025-10-23T03:45:41.779Z] [LOG]    Attendance Shortfall: Rs.52000.18
[2025-10-23T03:45:41.779Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:41.779Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:45:41.779Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:45:41.780Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:41.780Z] [LOG]    GROSS SALARY: Rs.16358.22
[2025-10-23T03:45:41.780Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:41.780Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:45:41.781Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:45:41.781Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:45:41.781Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:45:41.781Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:41.782Z] [LOG]    NET SALARY: Rs.16358.22
[2025-10-23T03:45:41.782Z] [LOG] ======================================================================

[2025-10-23T03:45:41.782Z] [LOG] ✅ Dharshika null: Calculation completed successfully
[2025-10-23T03:45:41.783Z] [LOG] 📊 Progress: 19/34 (55.9%)
[2025-10-23T03:45:41.783Z] [LOG] 
🧮 Processing: Prasanthan null (EMP000001)
[2025-10-23T03:45:41.783Z] [LOG] 📋 Record ID: 8c63f978-ce44-4e37-a0d4-34d5e4c5f0c0
[2025-10-23T03:45:41.784Z] [LOG] 
======================================================================
[2025-10-23T03:45:41.784Z] [LOG] 🧮 CALCULATING PAYROLL: Prasanthan null (EMP000001)
[2025-10-23T03:45:41.784Z] [LOG] ======================================================================
[2025-10-23T03:45:42.973Z] [LOG] 🔍 Component filtering for employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-23T03:45:42.974Z] [LOG]    Total components: 11
[2025-10-23T03:45:42.974Z] [LOG]    Applicable components: 11
[2025-10-23T03:45:42.974Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T03:45:44.784Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:45:44.785Z] [LOG] 🔄 Processing financial records for employee 014397c7-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:45:45.483Z] [LOG] 📊 Found 0 active loans for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:45.728Z] [LOG] 📊 Found 0 active advances for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:45.958Z] [LOG] 📊 Found 0 approved bonuses for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:45.959Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:45:45.959Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:45:46.178Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:45:46.178Z] [LOG]    Employee ID: 014397c7-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:46.178Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:45:46.179Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:45:46.179Z] [LOG]    Base Salary (Full Month): Rs.150000.00
[2025-10-23T03:45:46.426Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:45:46.427Z] [LOG]       Daily Salary: Rs.6000.00
[2025-10-23T03:45:46.427Z] [LOG]       Weekday Hourly Rate: Rs.705.88
[2025-10-23T03:45:46.427Z] [LOG]       Saturday Hourly Rate: Rs.1333.33
[2025-10-23T03:45:46.428Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:45:46.428Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:45:46.428Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:45:47.454Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:45:47.454Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:45:47.775Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:45:47.775Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:45:47.775Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:45:47.776Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:45:47.776Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:45:47.776Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:45:47.776Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:45:47.776Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:45:48.093Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:45:48.094Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:45:48.094Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:45:48.094Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:45:48.414Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:45:48.414Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:45:48.415Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:45:48.415Z] [LOG]       Current Time: 09:15:48
[2025-10-23T03:45:48.416Z] [LOG]       Expected Hours (scheduled → now): 0.76h
[2025-10-23T03:45:48.416Z] [LOG]       Actual Hours (check-in → now): 0.76h
[2025-10-23T03:45:48.416Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:45:48.417Z] [LOG]       Weekday: 119.76h
[2025-10-23T03:45:48.417Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:45:48.417Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:45:48.417Z] [LOG]       Total Expected: 133.26h
[2025-10-23T03:45:48.418Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:45:48.418Z] [LOG]       Weekday: 26.26h (includes 0.76h live)
[2025-10-23T03:45:48.418Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:45:48.419Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:45:48.419Z] [LOG]       Total Actual: 30.76h
[2025-10-23T03:45:48.419Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:45:48.419Z] [LOG]       Weekday: 119.76h × Rs.705.88 = Rs.84538.62
[2025-10-23T03:45:48.420Z] [LOG]       Saturday: 13.50h × Rs.1333.33 = Rs.17999.95
[2025-10-23T03:45:48.420Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:45:48.420Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:48.421Z] [LOG]       Total Expected Earned: Rs.102538.58
[2025-10-23T03:45:48.421Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:45:48.421Z] [LOG]       Weekday: 26.26h × Rs.705.88 = Rs.18538.84
[2025-10-23T03:45:48.422Z] [LOG]       Saturday: 4.50h × Rs.1333.33 = Rs.5999.98
[2025-10-23T03:45:48.422Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:45:48.422Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:48.422Z] [LOG]       Total Actual Earned: Rs.24538.83
[2025-10-23T03:45:48.423Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:45:48.424Z] [LOG]       Calculated At: Oct 23, 2025, 09:15:48
[2025-10-23T03:45:48.424Z] [LOG]       Expected Earned (until NOW): Rs.102538.58
[2025-10-23T03:45:48.424Z] [LOG]       Actual Earned (until NOW): Rs.24538.83
[2025-10-23T03:45:48.424Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:48.425Z] [LOG]       Attendance Deduction: Rs.77999.75
[2025-10-23T03:45:48.425Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:45:48.427Z] [LOG]       📉 Shortfall: 102.50 hours (76.07% of expected)
[2025-10-23T03:45:48.428Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:45:48.428Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:45:48.428Z] [LOG]    Base Salary (Full): Rs.150000.00
[2025-10-23T03:45:48.429Z] [LOG]    Actual Earned Base: Rs.24538.83
[2025-10-23T03:45:48.429Z] [LOG]    Attendance Shortfall: Rs.77999.75
[2025-10-23T03:45:48.429Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:45:48.429Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:45:48.430Z] [LOG]    Gross Salary: 24538.827909533335
[2025-10-23T03:45:48.430Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:45:48.430Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:45:48.431Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:48.431Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:45:48.431Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:48.431Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:45:48.432Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:48.432Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:45:48.432Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:48.432Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:45:48.433Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:48.433Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:45:48.433Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:48.433Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:45:48.434Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:48.434Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:45:48.434Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:48.435Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:45:48.435Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:48.435Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:45:48.435Z] [LOG]    EPF/ETF calculated on: Rs.24538.83
[2025-10-23T03:45:48.435Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:45:48.436Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:45:48.436Z] [LOG] 💰 GROSS CALCULATION for Prasanthan null:
[2025-10-23T03:45:48.437Z] [LOG]    Base Salary: 150000
[2025-10-23T03:45:48.437Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:45:48.437Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:45:48.437Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:48.438Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:45:48.438Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:48.656Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:45:48.656Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:45:48.657Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:45:48.657Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:45:48.657Z] [LOG]    Actual Earned Base: Rs.24538.83
[2025-10-23T03:45:48.657Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:45:48.657Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:45:48.658Z] [LOG]    = Gross Salary: Rs.24538.83
[2025-10-23T03:45:48.658Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:45:48.658Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:45:48.658Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:45:48.658Z] [LOG]    Gross Salary: Rs.24538.83
[2025-10-23T03:45:48.658Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:45:48.659Z] [LOG]    = NET SALARY: Rs.24538.83
[2025-10-23T03:45:49.053Z] [LOG] Creating components for record 8c63f978-ce44-4e37-a0d4-34d5e4c5f0c0: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:45:49.054Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 24538.827909533335
}
[2025-10-23T03:45:49.373Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:45:49.621Z] [LOG] Created payroll_record_component: dc8a3690-177d-4dcc-90b0-7c9098a8d78e for Base Salary (Attendance-based)
[2025-10-23T03:45:50.025Z] [LOG] ✅ Financial balances updated successfully for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:50.026Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:45:50.026Z] [LOG] 
======================================================================
[2025-10-23T03:45:50.026Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Prasanthan null
[2025-10-23T03:45:50.027Z] [LOG] ======================================================================
[2025-10-23T03:45:50.027Z] [LOG]    Base Salary (Full): Rs.150000.00
[2025-10-23T03:45:50.027Z] [LOG]    Actual Earned Base (Attendance-based): Rs.24538.83
[2025-10-23T03:45:50.027Z] [LOG]    Attendance Shortfall: Rs.77999.75
[2025-10-23T03:45:50.028Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:50.028Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:45:50.028Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:45:50.029Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:50.029Z] [LOG]    GROSS SALARY: Rs.24538.83
[2025-10-23T03:45:50.029Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:50.029Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:45:50.030Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:45:50.030Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:45:50.030Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:45:50.031Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:50.031Z] [LOG]    NET SALARY: Rs.24538.83
[2025-10-23T03:45:50.031Z] [LOG] ======================================================================

[2025-10-23T03:45:50.032Z] [LOG] ✅ Prasanthan null: Calculation completed successfully
[2025-10-23T03:45:50.032Z] [LOG] 📊 Progress: 20/34 (58.8%)
[2025-10-23T03:45:50.032Z] [LOG] 
🧮 Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-23T03:45:50.033Z] [LOG] 📋 Record ID: 8f351764-280b-4b36-9706-f15671248475
[2025-10-23T03:45:50.033Z] [LOG] 
======================================================================
[2025-10-23T03:45:50.033Z] [LOG] 🧮 CALCULATING PAYROLL: P.D.P Dilini Madushani null (EMP000043)
[2025-10-23T03:45:50.033Z] [LOG] ======================================================================
[2025-10-23T03:45:51.265Z] [LOG] 🔍 Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-23T03:45:51.265Z] [LOG]    Total components: 11
[2025-10-23T03:45:51.266Z] [LOG]    Applicable components: 11
[2025-10-23T03:45:51.266Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T03:45:52.893Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:45:52.894Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:45:53.218Z] [LOG] 📊 Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:53.449Z] [LOG] 📊 Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:53.936Z] [LOG] 📊 Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:53.937Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:45:53.937Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:45:54.173Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:45:54.174Z] [LOG]    Employee ID: 014435dc-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:54.174Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:45:54.174Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:45:54.174Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T03:45:54.384Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:45:54.385Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T03:45:54.385Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T03:45:54.385Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T03:45:54.385Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:45:54.386Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:45:54.386Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:45:55.454Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:45:55.455Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:45:55.677Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:45:55.677Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:45:55.678Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:45:55.678Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:45:55.678Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:45:55.679Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:45:55.679Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:45:55.679Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:45:56.189Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:45:56.189Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:45:56.190Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:45:56.190Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:45:56.421Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:45:56.422Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:45:56.422Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:45:56.423Z] [LOG]       Current Time: 09:15:56
[2025-10-23T03:45:56.423Z] [LOG]       Expected Hours (scheduled → now): 0.77h
[2025-10-23T03:45:56.423Z] [LOG]       Actual Hours (check-in → now): 0.77h
[2025-10-23T03:45:56.423Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:45:56.423Z] [LOG]       Weekday: 119.77h
[2025-10-23T03:45:56.423Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:45:56.423Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:45:56.424Z] [LOG]       Total Expected: 133.27h
[2025-10-23T03:45:56.424Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:45:56.424Z] [LOG]       Weekday: 26.27h (includes 0.77h live)
[2025-10-23T03:45:56.424Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:45:56.424Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:45:56.425Z] [LOG]       Total Actual: 30.77h
[2025-10-23T03:45:56.425Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:45:56.425Z] [LOG]       Weekday: 119.77h × Rs.235.29 = Rs.28179.67
[2025-10-23T03:45:56.425Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T03:45:56.425Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:45:56.425Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:56.426Z] [LOG]       Total Expected Earned: Rs.34179.61
[2025-10-23T03:45:56.426Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:45:56.426Z] [LOG]       Weekday: 26.27h × Rs.235.29 = Rs.6180.05
[2025-10-23T03:45:56.426Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T03:45:56.426Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:45:56.426Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:56.426Z] [LOG]       Total Actual Earned: Rs.8180.03
[2025-10-23T03:45:56.427Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:45:56.427Z] [LOG]       Calculated At: Oct 23, 2025, 09:15:56
[2025-10-23T03:45:56.427Z] [LOG]       Expected Earned (until NOW): Rs.34179.61
[2025-10-23T03:45:56.427Z] [LOG]       Actual Earned (until NOW): Rs.8180.03
[2025-10-23T03:45:56.427Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:45:56.427Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T03:45:56.427Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:45:56.428Z] [LOG]       📉 Shortfall: 102.50 hours (76.07% of expected)
[2025-10-23T03:45:56.428Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:45:56.428Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:45:56.428Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:45:56.428Z] [LOG]    Actual Earned Base: Rs.8180.03
[2025-10-23T03:45:56.429Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T03:45:56.429Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:45:56.429Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:45:56.429Z] [LOG]    Gross Salary: 8180.030082525
[2025-10-23T03:45:56.429Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:45:56.429Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:45:56.429Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:56.429Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:45:56.430Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:56.430Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:45:56.430Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:56.430Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:45:56.431Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:56.431Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:45:56.432Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:56.432Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:45:56.433Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:56.434Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:45:56.435Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:56.435Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:45:56.436Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:56.436Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:45:56.436Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:56.437Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:45:56.437Z] [LOG]    EPF/ETF calculated on: Rs.8180.03
[2025-10-23T03:45:56.437Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:45:56.437Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:45:56.437Z] [LOG] 💰 GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-23T03:45:56.437Z] [LOG]    Base Salary: 50000
[2025-10-23T03:45:56.437Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:45:56.438Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:45:56.438Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:56.438Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:45:56.438Z] [LOG]    Fixed amount: 0
[2025-10-23T03:45:56.659Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:45:56.659Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:45:56.660Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:45:56.660Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:45:56.660Z] [LOG]    Actual Earned Base: Rs.8180.03
[2025-10-23T03:45:56.660Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:45:56.660Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:45:56.660Z] [LOG]    = Gross Salary: Rs.8180.03
[2025-10-23T03:45:56.661Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:45:56.661Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:45:56.661Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:45:56.661Z] [LOG]    Gross Salary: Rs.8180.03
[2025-10-23T03:45:56.662Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:45:56.662Z] [LOG]    = NET SALARY: Rs.8180.03
[2025-10-23T03:45:56.961Z] [LOG] Creating components for record 8f351764-280b-4b36-9706-f15671248475: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:45:56.962Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8180.030082525
}
[2025-10-23T03:45:57.157Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:45:57.374Z] [LOG] Created payroll_record_component: fd101e60-16b7-4059-ac38-e52eea0adeba for Base Salary (Attendance-based)
[2025-10-23T03:45:57.777Z] [LOG] ✅ Financial balances updated successfully for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-23T03:45:57.778Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:45:57.778Z] [LOG] 
======================================================================
[2025-10-23T03:45:57.779Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: P.D.P Dilini Madushani null
[2025-10-23T03:45:57.779Z] [LOG] ======================================================================
[2025-10-23T03:45:57.779Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:45:57.780Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8180.03
[2025-10-23T03:45:57.780Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T03:45:57.780Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:57.781Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:45:57.781Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:45:57.782Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:57.782Z] [LOG]    GROSS SALARY: Rs.8180.03
[2025-10-23T03:45:57.782Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:57.782Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:45:57.783Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:45:57.785Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:45:57.785Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:45:57.786Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:45:57.786Z] [LOG]    NET SALARY: Rs.8180.03
[2025-10-23T03:45:57.786Z] [LOG] ======================================================================

[2025-10-23T03:45:57.786Z] [LOG] ✅ P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-23T03:45:57.786Z] [LOG] 📊 Progress: 21/34 (61.8%)
[2025-10-23T03:45:57.788Z] [LOG] 
🧮 Processing: Waruni null (EMP000024)
[2025-10-23T03:45:57.788Z] [LOG] 📋 Record ID: 912c314e-8c63-46cb-87f0-b0ad2cb522c4
[2025-10-23T03:45:57.790Z] [LOG] 
======================================================================
[2025-10-23T03:45:57.790Z] [LOG] 🧮 CALCULATING PAYROLL: Waruni null (EMP000024)
[2025-10-23T03:45:57.791Z] [LOG] ======================================================================
[2025-10-23T03:45:58.986Z] [LOG] 🔍 Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-23T03:45:58.986Z] [LOG]    Total components: 11
[2025-10-23T03:45:58.986Z] [LOG]    Applicable components: 11
[2025-10-23T03:45:58.987Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T03:46:00.497Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:46:00.498Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:46:00.822Z] [LOG] 📊 Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:01.055Z] [LOG] 📊 Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:01.258Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:01.259Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:46:01.259Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:46:01.460Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:46:01.460Z] [LOG]    Employee ID: 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:01.460Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:46:01.461Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:46:01.461Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T03:46:01.855Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:46:01.855Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T03:46:01.855Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T03:46:01.856Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T03:46:01.856Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:46:01.856Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:46:01.857Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:46:02.814Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:46:02.816Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:46:03.138Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:46:03.138Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:46:03.139Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:46:03.139Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:46:03.139Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:46:03.140Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:46:03.140Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:46:03.140Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:46:03.444Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:46:03.445Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:46:03.445Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:46:03.445Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:46:03.649Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:46:03.650Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:46:03.650Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:46:03.651Z] [LOG]       Current Time: 09:16:03
[2025-10-23T03:46:03.651Z] [LOG]       Expected Hours (scheduled → now): 0.77h
[2025-10-23T03:46:03.651Z] [LOG]       Actual Hours (check-in → now): 0.77h
[2025-10-23T03:46:03.652Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:46:03.652Z] [LOG]       Weekday: 119.77h
[2025-10-23T03:46:03.652Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:46:03.653Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:03.653Z] [LOG]       Total Expected: 133.27h
[2025-10-23T03:46:03.654Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:46:03.654Z] [LOG]       Weekday: 26.27h (includes 0.77h live)
[2025-10-23T03:46:03.654Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:46:03.655Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:03.656Z] [LOG]       Total Actual: 30.77h
[2025-10-23T03:46:03.657Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:46:03.657Z] [LOG]       Weekday: 119.77h × Rs.235.29 = Rs.28180.14
[2025-10-23T03:46:03.658Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T03:46:03.659Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:03.659Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:03.661Z] [LOG]       Total Expected Earned: Rs.34180.08
[2025-10-23T03:46:03.663Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:46:03.664Z] [LOG]       Weekday: 26.27h × Rs.235.29 = Rs.6180.52
[2025-10-23T03:46:03.664Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T03:46:03.665Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:03.665Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:03.666Z] [LOG]       Total Actual Earned: Rs.8180.50
[2025-10-23T03:46:03.667Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:46:03.667Z] [LOG]       Calculated At: Oct 23, 2025, 09:16:03
[2025-10-23T03:46:03.670Z] [LOG]       Expected Earned (until NOW): Rs.34180.08
[2025-10-23T03:46:03.671Z] [LOG]       Actual Earned (until NOW): Rs.8180.50
[2025-10-23T03:46:03.671Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:03.671Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T03:46:03.672Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:46:03.672Z] [LOG]       📉 Shortfall: 102.50 hours (76.07% of expected)
[2025-10-23T03:46:03.672Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:46:03.673Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:46:03.673Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:46:03.673Z] [LOG]    Actual Earned Base: Rs.8180.50
[2025-10-23T03:46:03.674Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T03:46:03.674Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:46:03.675Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:46:03.675Z] [LOG]    Gross Salary: 8180.502492558333
[2025-10-23T03:46:03.676Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:46:03.676Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:46:03.676Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:03.677Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:46:03.677Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:03.678Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:46:03.678Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:03.678Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:46:03.679Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:03.679Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:46:03.679Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:03.680Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:46:03.682Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:03.683Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:46:03.684Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:03.685Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:46:03.685Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:03.686Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:46:03.686Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:03.687Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:46:03.688Z] [LOG]    EPF/ETF calculated on: Rs.8180.50
[2025-10-23T03:46:03.688Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:46:03.688Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:46:03.689Z] [LOG] 💰 GROSS CALCULATION for Waruni null:
[2025-10-23T03:46:03.692Z] [LOG]    Base Salary: 50000
[2025-10-23T03:46:03.692Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:46:03.693Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:46:03.693Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:03.694Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:46:03.694Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:04.094Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:46:04.094Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:46:04.095Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:46:04.095Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:46:04.096Z] [LOG]    Actual Earned Base: Rs.8180.50
[2025-10-23T03:46:04.096Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:46:04.096Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:46:04.097Z] [LOG]    = Gross Salary: Rs.8180.50
[2025-10-23T03:46:04.097Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:46:04.097Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:46:04.098Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:46:04.098Z] [LOG]    Gross Salary: Rs.8180.50
[2025-10-23T03:46:04.099Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:46:04.099Z] [LOG]    = NET SALARY: Rs.8180.50
[2025-10-23T03:46:04.808Z] [LOG] Creating components for record 912c314e-8c63-46cb-87f0-b0ad2cb522c4: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:46:04.809Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8180.502492558333
}
[2025-10-23T03:46:05.025Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:46:05.295Z] [LOG] Created payroll_record_component: 9fa163d8-4081-4d4f-badf-52db841e23bc for Base Salary (Attendance-based)
[2025-10-23T03:46:05.933Z] [LOG] ✅ Financial balances updated successfully for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:05.934Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:46:05.934Z] [LOG] 
======================================================================
[2025-10-23T03:46:05.935Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Waruni null
[2025-10-23T03:46:05.935Z] [LOG] ======================================================================
[2025-10-23T03:46:05.935Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:46:05.936Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8180.50
[2025-10-23T03:46:05.936Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T03:46:05.936Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:05.937Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:46:05.937Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:46:05.937Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:05.938Z] [LOG]    GROSS SALARY: Rs.8180.50
[2025-10-23T03:46:05.938Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:05.938Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:46:05.939Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:46:05.941Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:46:05.942Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:46:05.942Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:05.945Z] [LOG]    NET SALARY: Rs.8180.50
[2025-10-23T03:46:05.945Z] [LOG] ======================================================================

[2025-10-23T03:46:05.946Z] [LOG] ✅ Waruni null: Calculation completed successfully
[2025-10-23T03:46:05.946Z] [LOG] 📊 Progress: 22/34 (64.7%)
[2025-10-23T03:46:05.947Z] [LOG] 
🧮 Processing: Piyumi null (EMP000025)
[2025-10-23T03:46:05.947Z] [LOG] 📋 Record ID: 94ee74f1-3575-45b7-8eab-98d2a77c0522
[2025-10-23T03:46:05.948Z] [LOG] 
======================================================================
[2025-10-23T03:46:05.949Z] [LOG] 🧮 CALCULATING PAYROLL: Piyumi null (EMP000025)
[2025-10-23T03:46:05.949Z] [LOG] ======================================================================
[2025-10-23T03:46:07.295Z] [LOG] 🔍 Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-23T03:46:07.295Z] [LOG]    Total components: 11
[2025-10-23T03:46:07.296Z] [LOG]    Applicable components: 11
[2025-10-23T03:46:07.296Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T03:46:08.975Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:46:08.975Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:46:09.176Z] [LOG] 📊 Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:09.377Z] [LOG] 📊 Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:09.577Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:09.579Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:46:09.580Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:46:09.802Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:46:09.802Z] [LOG]    Employee ID: 0143e565-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:09.802Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:46:09.803Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:46:09.803Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T03:46:10.007Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:46:10.007Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T03:46:10.008Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T03:46:10.008Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T03:46:10.008Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:46:10.008Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:46:10.008Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:46:10.654Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:46:10.655Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:46:11.134Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:46:11.134Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:46:11.134Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:46:11.135Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:46:11.135Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:46:11.135Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:46:11.136Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:46:11.136Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:46:11.344Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:46:11.345Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:46:11.345Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:46:11.346Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:46:11.771Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:46:11.771Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:46:11.772Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:46:11.773Z] [LOG]       Current Time: 09:16:11
[2025-10-23T03:46:11.774Z] [LOG]       Expected Hours (scheduled → now): 0.77h
[2025-10-23T03:46:11.775Z] [LOG]       Actual Hours (check-in → now): 0.77h
[2025-10-23T03:46:11.775Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:46:11.778Z] [LOG]       Weekday: 119.77h
[2025-10-23T03:46:11.778Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:46:11.779Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:11.780Z] [LOG]       Total Expected: 133.27h
[2025-10-23T03:46:11.781Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:46:11.781Z] [LOG]       Weekday: 26.27h (includes 0.77h live)
[2025-10-23T03:46:11.781Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:46:11.782Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:11.783Z] [LOG]       Total Actual: 30.77h
[2025-10-23T03:46:11.785Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:46:11.785Z] [LOG]       Weekday: 119.77h × Rs.235.29 = Rs.28180.67
[2025-10-23T03:46:11.785Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T03:46:11.786Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:11.787Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:11.787Z] [LOG]       Total Expected Earned: Rs.34180.61
[2025-10-23T03:46:11.787Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:46:11.788Z] [LOG]       Weekday: 26.27h × Rs.235.29 = Rs.6181.05
[2025-10-23T03:46:11.788Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T03:46:11.788Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:11.788Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:11.788Z] [LOG]       Total Actual Earned: Rs.8181.03
[2025-10-23T03:46:11.789Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:46:11.789Z] [LOG]       Calculated At: Oct 23, 2025, 09:16:11
[2025-10-23T03:46:11.790Z] [LOG]       Expected Earned (until NOW): Rs.34180.61
[2025-10-23T03:46:11.790Z] [LOG]       Actual Earned (until NOW): Rs.8181.03
[2025-10-23T03:46:11.790Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:11.790Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T03:46:11.790Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:46:11.790Z] [LOG]       📉 Shortfall: 102.50 hours (76.07% of expected)
[2025-10-23T03:46:11.790Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:46:11.790Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:46:11.791Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:46:11.791Z] [LOG]    Actual Earned Base: Rs.8181.03
[2025-10-23T03:46:11.791Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T03:46:11.791Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:46:11.791Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:46:11.791Z] [LOG]    Gross Salary: 8181.033332941666
[2025-10-23T03:46:11.791Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:46:11.791Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:46:11.792Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:11.792Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:46:11.792Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:11.792Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:46:11.792Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:11.792Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:46:11.792Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:11.792Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:46:11.793Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:11.793Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:46:11.793Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:11.793Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:46:11.793Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:11.793Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:46:11.793Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:11.793Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:46:11.793Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:11.794Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:46:11.794Z] [LOG]    EPF/ETF calculated on: Rs.8181.03
[2025-10-23T03:46:11.794Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:46:11.794Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:46:11.794Z] [LOG] 💰 GROSS CALCULATION for Piyumi null:
[2025-10-23T03:46:11.794Z] [LOG]    Base Salary: 50000
[2025-10-23T03:46:11.795Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:46:11.795Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:46:11.795Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:11.795Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:46:11.795Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:12.015Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:46:12.016Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:46:12.016Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:46:12.017Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:46:12.017Z] [LOG]    Actual Earned Base: Rs.8181.03
[2025-10-23T03:46:12.017Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:46:12.017Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:46:12.017Z] [LOG]    = Gross Salary: Rs.8181.03
[2025-10-23T03:46:12.017Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:46:12.018Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:46:12.018Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:46:12.018Z] [LOG]    Gross Salary: Rs.8181.03
[2025-10-23T03:46:12.018Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:46:12.018Z] [LOG]    = NET SALARY: Rs.8181.03
[2025-10-23T03:46:12.231Z] [LOG] Creating components for record 94ee74f1-3575-45b7-8eab-98d2a77c0522: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:46:12.232Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8181.033332941666
}
[2025-10-23T03:46:12.489Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:46:12.699Z] [LOG] Created payroll_record_component: 1049ef28-e6ab-4888-829e-fdbec6d3a6e6 for Base Salary (Attendance-based)
[2025-10-23T03:46:13.107Z] [LOG] ✅ Financial balances updated successfully for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:13.107Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:46:13.108Z] [LOG] 
======================================================================
[2025-10-23T03:46:13.108Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Piyumi null
[2025-10-23T03:46:13.108Z] [LOG] ======================================================================
[2025-10-23T03:46:13.108Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:46:13.108Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8181.03
[2025-10-23T03:46:13.108Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T03:46:13.108Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:13.108Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:46:13.108Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:46:13.109Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:13.109Z] [LOG]    GROSS SALARY: Rs.8181.03
[2025-10-23T03:46:13.109Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:13.109Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:46:13.109Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:46:13.109Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:46:13.109Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:46:13.109Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:13.110Z] [LOG]    NET SALARY: Rs.8181.03
[2025-10-23T03:46:13.110Z] [LOG] ======================================================================

[2025-10-23T03:46:13.110Z] [LOG] ✅ Piyumi null: Calculation completed successfully
[2025-10-23T03:46:13.110Z] [LOG] 📊 Progress: 23/34 (67.6%)
[2025-10-23T03:46:13.110Z] [LOG] 
🧮 Processing: Saru null (EMP000022)
[2025-10-23T03:46:13.110Z] [LOG] 📋 Record ID: 970187d9-84a5-4d9b-bd57-053eee76903a
[2025-10-23T03:46:13.110Z] [LOG] 
======================================================================
[2025-10-23T03:46:13.111Z] [LOG] 🧮 CALCULATING PAYROLL: Saru null (EMP000022)
[2025-10-23T03:46:13.111Z] [LOG] ======================================================================
[2025-10-23T03:46:13.941Z] [LOG] 🔍 Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-23T03:46:13.942Z] [LOG]    Total components: 11
[2025-10-23T03:46:13.942Z] [LOG]    Applicable components: 11
[2025-10-23T03:46:13.942Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T03:46:15.683Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:46:15.684Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:46:15.907Z] [LOG] 📊 Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:16.113Z] [LOG] 📊 Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:16.318Z] [LOG] 📊 Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:16.318Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:46:16.319Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:46:16.518Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:46:16.519Z] [LOG]    Employee ID: 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:16.519Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:46:16.520Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:46:16.520Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T03:46:16.737Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:46:16.737Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T03:46:16.738Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T03:46:16.738Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T03:46:16.739Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:46:16.739Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:46:16.740Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:46:17.360Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:46:17.361Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:46:17.578Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:46:17.579Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:46:17.580Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:46:17.581Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:46:17.581Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:46:17.581Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:46:17.582Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:46:17.583Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:46:17.797Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:46:17.797Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:46:17.797Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:46:17.797Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:46:18.013Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:46:18.014Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:46:18.014Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:46:18.015Z] [LOG]       Current Time: 09:16:18
[2025-10-23T03:46:18.015Z] [LOG]       Expected Hours (scheduled → now): 0.77h
[2025-10-23T03:46:18.016Z] [LOG]       Actual Hours (check-in → now): 0.77h
[2025-10-23T03:46:18.016Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:46:18.017Z] [LOG]       Weekday: 119.77h
[2025-10-23T03:46:18.017Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:46:18.017Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:18.018Z] [LOG]       Total Expected: 133.27h
[2025-10-23T03:46:18.018Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:46:18.018Z] [LOG]       Weekday: 26.27h (includes 0.77h live)
[2025-10-23T03:46:18.019Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:46:18.019Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:18.020Z] [LOG]       Total Actual: 30.77h
[2025-10-23T03:46:18.021Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:46:18.022Z] [LOG]       Weekday: 119.77h × Rs.235.29 = Rs.28181.08
[2025-10-23T03:46:18.023Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T03:46:18.024Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:18.026Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:18.026Z] [LOG]       Total Expected Earned: Rs.34181.02
[2025-10-23T03:46:18.027Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:46:18.028Z] [LOG]       Weekday: 26.27h × Rs.235.29 = Rs.6181.46
[2025-10-23T03:46:18.029Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T03:46:18.029Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:18.029Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:18.030Z] [LOG]       Total Actual Earned: Rs.8181.44
[2025-10-23T03:46:18.031Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:46:18.031Z] [LOG]       Calculated At: Oct 23, 2025, 09:16:18
[2025-10-23T03:46:18.032Z] [LOG]       Expected Earned (until NOW): Rs.34181.02
[2025-10-23T03:46:18.033Z] [LOG]       Actual Earned (until NOW): Rs.8181.44
[2025-10-23T03:46:18.033Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:18.034Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T03:46:18.034Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:46:18.035Z] [LOG]       📉 Shortfall: 102.50 hours (76.06% of expected)
[2025-10-23T03:46:18.035Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:46:18.036Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:46:18.037Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:46:18.037Z] [LOG]    Actual Earned Base: Rs.8181.44
[2025-10-23T03:46:18.038Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T03:46:18.039Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:46:18.039Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:46:18.040Z] [LOG]    Gross Salary: 8181.441299658332
[2025-10-23T03:46:18.040Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:46:18.040Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:46:18.041Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:18.041Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:46:18.041Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:18.042Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:46:18.043Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:18.043Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:46:18.043Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:18.043Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:46:18.044Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:18.044Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:46:18.044Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:18.044Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:46:18.045Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:18.045Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:46:18.045Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:18.045Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:46:18.046Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:18.046Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:46:18.046Z] [LOG]    EPF/ETF calculated on: Rs.8181.44
[2025-10-23T03:46:18.047Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:46:18.047Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:46:18.048Z] [LOG] 💰 GROSS CALCULATION for Saru null:
[2025-10-23T03:46:18.048Z] [LOG]    Base Salary: 50000
[2025-10-23T03:46:18.048Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:46:18.049Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:46:18.049Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:18.049Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:46:18.049Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:18.282Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:46:18.283Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:46:18.283Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:46:18.284Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:46:18.284Z] [LOG]    Actual Earned Base: Rs.8181.44
[2025-10-23T03:46:18.284Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:46:18.284Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:46:18.285Z] [LOG]    = Gross Salary: Rs.8181.44
[2025-10-23T03:46:18.285Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:46:18.286Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:46:18.286Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:46:18.286Z] [LOG]    Gross Salary: Rs.8181.44
[2025-10-23T03:46:18.287Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:46:18.287Z] [LOG]    = NET SALARY: Rs.8181.44
[2025-10-23T03:46:18.497Z] [LOG] Creating components for record 970187d9-84a5-4d9b-bd57-053eee76903a: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:46:18.498Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8181.441299658332
}
[2025-10-23T03:46:18.721Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:46:18.918Z] [LOG] Created payroll_record_component: 8cc3e0d3-322d-4be7-9741-13c28cb73477 for Base Salary (Attendance-based)
[2025-10-23T03:46:19.361Z] [LOG] ✅ Financial balances updated successfully for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:19.363Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:46:19.363Z] [LOG] 
======================================================================
[2025-10-23T03:46:19.364Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saru null
[2025-10-23T03:46:19.364Z] [LOG] ======================================================================
[2025-10-23T03:46:19.364Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:46:19.365Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8181.44
[2025-10-23T03:46:19.365Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T03:46:19.365Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:19.366Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:46:19.366Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:46:19.366Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:19.366Z] [LOG]    GROSS SALARY: Rs.8181.44
[2025-10-23T03:46:19.367Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:19.367Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:46:19.367Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:46:19.368Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:46:19.370Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:46:19.370Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:19.371Z] [LOG]    NET SALARY: Rs.8181.44
[2025-10-23T03:46:19.372Z] [LOG] ======================================================================

[2025-10-23T03:46:19.372Z] [LOG] ✅ Saru null: Calculation completed successfully
[2025-10-23T03:46:19.373Z] [LOG] 📊 Progress: 24/34 (70.6%)
[2025-10-23T03:46:19.374Z] [LOG] 
🧮 Processing: Ishara null (EMP000011)
[2025-10-23T03:46:19.375Z] [LOG] 📋 Record ID: a3f965da-7ec0-4f64-a74c-0164595d8501
[2025-10-23T03:46:19.376Z] [LOG] 
======================================================================
[2025-10-23T03:46:19.376Z] [LOG] 🧮 CALCULATING PAYROLL: Ishara null (EMP000011)
[2025-10-23T03:46:19.377Z] [LOG] ======================================================================
[2025-10-23T03:46:20.228Z] [LOG] 🔍 Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-23T03:46:20.229Z] [LOG]    Total components: 11
[2025-10-23T03:46:20.230Z] [LOG]    Applicable components: 11
[2025-10-23T03:46:20.230Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-23T03:46:21.985Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:46:21.986Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:46:22.210Z] [LOG] 📊 Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:22.420Z] [LOG] 📊 Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:22.619Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:22.619Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:46:22.620Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:46:22.822Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:46:22.823Z] [LOG]    Employee ID: 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:22.823Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:46:22.823Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:46:22.823Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T03:46:23.201Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:46:23.202Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T03:46:23.202Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T03:46:23.202Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T03:46:23.203Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:46:23.203Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:46:23.203Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:46:23.819Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:46:23.820Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:46:24.056Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:46:24.057Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:46:24.057Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:46:24.058Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:46:24.058Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:46:24.058Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:46:24.058Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:46:24.059Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:46:24.258Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:46:24.259Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:46:24.259Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:46:24.260Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:46:24.461Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:46:24.462Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:46:24.462Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:46:24.464Z] [LOG]       Current Time: 09:16:24
[2025-10-23T03:46:24.464Z] [LOG]       Expected Hours (scheduled → now): 0.77h
[2025-10-23T03:46:24.464Z] [LOG]       Actual Hours (check-in → now): 0.77h
[2025-10-23T03:46:24.465Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:46:24.465Z] [LOG]       Weekday: 119.77h
[2025-10-23T03:46:24.465Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:46:24.466Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:24.466Z] [LOG]       Total Expected: 133.27h
[2025-10-23T03:46:24.466Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:46:24.467Z] [LOG]       Weekday: 26.27h (includes 0.77h live)
[2025-10-23T03:46:24.469Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:46:24.469Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:24.469Z] [LOG]       Total Actual: 30.77h
[2025-10-23T03:46:24.470Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:46:24.470Z] [LOG]       Weekday: 119.77h × Rs.235.29 = Rs.28181.50
[2025-10-23T03:46:24.470Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T03:46:24.470Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:24.471Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:24.471Z] [LOG]       Total Expected Earned: Rs.34181.44
[2025-10-23T03:46:24.471Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:46:24.472Z] [LOG]       Weekday: 26.27h × Rs.235.29 = Rs.6181.88
[2025-10-23T03:46:24.472Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T03:46:24.472Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:24.473Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:24.474Z] [LOG]       Total Actual Earned: Rs.8181.86
[2025-10-23T03:46:24.476Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:46:24.476Z] [LOG]       Calculated At: Oct 23, 2025, 09:16:24
[2025-10-23T03:46:24.477Z] [LOG]       Expected Earned (until NOW): Rs.34181.44
[2025-10-23T03:46:24.477Z] [LOG]       Actual Earned (until NOW): Rs.8181.86
[2025-10-23T03:46:24.477Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:24.480Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T03:46:24.481Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:46:24.482Z] [LOG]       📉 Shortfall: 102.50 hours (76.06% of expected)
[2025-10-23T03:46:24.482Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:46:24.482Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:46:24.482Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:46:24.483Z] [LOG]    Actual Earned Base: Rs.8181.86
[2025-10-23T03:46:24.484Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:46:24.488Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:46:24.489Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:46:24.489Z] [LOG]    Gross Salary: 8181.862730191668
[2025-10-23T03:46:24.490Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:46:24.490Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:46:24.490Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:24.491Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:46:24.491Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:24.491Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:46:24.492Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:24.492Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:46:24.492Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:24.493Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:46:24.493Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:24.493Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:46:24.493Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:24.494Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:46:24.494Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:24.494Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:46:24.494Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:24.495Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:46:24.495Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:24.495Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:46:24.495Z] [LOG]    EPF/ETF calculated on: Rs.8181.86
[2025-10-23T03:46:24.496Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:46:24.496Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:46:24.496Z] [LOG] 💰 GROSS CALCULATION for Ishara null:
[2025-10-23T03:46:24.496Z] [LOG]    Base Salary: 50000
[2025-10-23T03:46:24.496Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:46:24.497Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:46:24.497Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:24.497Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:46:24.497Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:24.701Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:46:24.702Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:46:24.703Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:46:24.703Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:46:24.704Z] [LOG]    Actual Earned Base: Rs.8181.86
[2025-10-23T03:46:24.704Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:46:24.704Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:46:24.704Z] [LOG]    = Gross Salary: Rs.8181.86
[2025-10-23T03:46:24.705Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:46:24.705Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:46:24.705Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:46:24.706Z] [LOG]    Gross Salary: Rs.8181.86
[2025-10-23T03:46:24.706Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:46:24.706Z] [LOG]    = NET SALARY: Rs.8181.86
[2025-10-23T03:46:24.907Z] [LOG] Creating components for record a3f965da-7ec0-4f64-a74c-0164595d8501: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:46:24.908Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8181.862730191668
}
[2025-10-23T03:46:25.122Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:46:25.336Z] [LOG] Created payroll_record_component: eaf95bd5-8361-49a7-9b36-70bf6b067fdd for Base Salary (Attendance-based)
[2025-10-23T03:46:25.766Z] [LOG] ✅ Financial balances updated successfully for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:25.768Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:46:25.769Z] [LOG] 
======================================================================
[2025-10-23T03:46:25.769Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ishara null
[2025-10-23T03:46:25.769Z] [LOG] ======================================================================
[2025-10-23T03:46:25.770Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:46:25.770Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8181.86
[2025-10-23T03:46:25.770Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:46:25.771Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:25.771Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:46:25.772Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:46:25.773Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:25.774Z] [LOG]    GROSS SALARY: Rs.8181.86
[2025-10-23T03:46:25.774Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:25.774Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:46:25.775Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:46:25.775Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:46:25.776Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:46:25.777Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:25.778Z] [LOG]    NET SALARY: Rs.8181.86
[2025-10-23T03:46:25.778Z] [LOG] ======================================================================

[2025-10-23T03:46:25.779Z] [LOG] ✅ Ishara null: Calculation completed successfully
[2025-10-23T03:46:25.780Z] [LOG] 📊 Progress: 25/34 (73.5%)
[2025-10-23T03:46:25.780Z] [LOG] 
🧮 Processing: Anoj null (EMP000014)
[2025-10-23T03:46:25.780Z] [LOG] 📋 Record ID: b1392655-5c4c-485b-99c8-81fc00bf11d1
[2025-10-23T03:46:25.781Z] [LOG] 
======================================================================
[2025-10-23T03:46:25.781Z] [LOG] 🧮 CALCULATING PAYROLL: Anoj null (EMP000014)
[2025-10-23T03:46:25.782Z] [LOG] ======================================================================
[2025-10-23T03:46:26.649Z] [LOG] 🔍 Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-23T03:46:26.650Z] [LOG]    Total components: 11
[2025-10-23T03:46:26.650Z] [LOG]    Applicable components: 11
[2025-10-23T03:46:26.650Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T03:46:28.117Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:46:28.117Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:46:28.343Z] [LOG] 📊 Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:28.570Z] [LOG] 📊 Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:28.779Z] [LOG] 📊 Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:28.780Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:46:28.780Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:46:28.997Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:46:28.997Z] [LOG]    Employee ID: 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:28.999Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:46:28.999Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:46:29.000Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T03:46:29.244Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:46:29.245Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T03:46:29.245Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T03:46:29.245Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T03:46:29.245Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:46:29.245Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:46:29.245Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:46:29.878Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:46:29.879Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:46:30.120Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:46:30.120Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:46:30.121Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:46:30.121Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:46:30.121Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:46:30.121Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:46:30.122Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:46:30.122Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:46:30.361Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:46:30.361Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:46:30.361Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:46:30.362Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:46:30.589Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:46:30.589Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:46:30.589Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:46:30.590Z] [LOG]       Current Time: 09:16:30
[2025-10-23T03:46:30.591Z] [LOG]       Expected Hours (scheduled → now): 0.78h
[2025-10-23T03:46:30.591Z] [LOG]       Actual Hours (check-in → now): 0.78h
[2025-10-23T03:46:30.591Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:46:30.591Z] [LOG]       Weekday: 119.78h
[2025-10-23T03:46:30.593Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:46:30.593Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:30.593Z] [LOG]       Total Expected: 133.28h
[2025-10-23T03:46:30.593Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:46:30.593Z] [LOG]       Weekday: 26.28h (includes 0.78h live)
[2025-10-23T03:46:30.594Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:46:30.594Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:30.594Z] [LOG]       Total Actual: 30.78h
[2025-10-23T03:46:30.594Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:46:30.594Z] [LOG]       Weekday: 119.78h × Rs.235.29 = Rs.28181.90
[2025-10-23T03:46:30.594Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T03:46:30.594Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:30.594Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:30.594Z] [LOG]       Total Expected Earned: Rs.34181.84
[2025-10-23T03:46:30.595Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:46:30.595Z] [LOG]       Weekday: 26.28h × Rs.235.29 = Rs.6182.28
[2025-10-23T03:46:30.595Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T03:46:30.595Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:30.595Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:30.595Z] [LOG]       Total Actual Earned: Rs.8182.26
[2025-10-23T03:46:30.596Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:46:30.596Z] [LOG]       Calculated At: Oct 23, 2025, 09:16:30
[2025-10-23T03:46:30.596Z] [LOG]       Expected Earned (until NOW): Rs.34181.84
[2025-10-23T03:46:30.596Z] [LOG]       Actual Earned (until NOW): Rs.8182.26
[2025-10-23T03:46:30.596Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:30.596Z] [LOG]       Attendance Deduction: Rs.25999.57
[2025-10-23T03:46:30.596Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:46:30.596Z] [LOG]       📉 Shortfall: 102.50 hours (76.06% of expected)
[2025-10-23T03:46:30.596Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:46:30.597Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:46:30.597Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:46:30.597Z] [LOG]    Actual Earned Base: Rs.8182.26
[2025-10-23T03:46:30.597Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T03:46:30.597Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:46:30.597Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:46:30.597Z] [LOG]    Gross Salary: 8182.263115341666
[2025-10-23T03:46:30.598Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:46:30.599Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:46:30.599Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:30.600Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:46:30.601Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:30.602Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:46:30.602Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:30.602Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:46:30.603Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:30.603Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:46:30.603Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:30.603Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:46:30.604Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:30.604Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:46:30.604Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:30.604Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:46:30.604Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:30.604Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:46:30.605Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:30.605Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:46:30.605Z] [LOG]    EPF/ETF calculated on: Rs.8182.26
[2025-10-23T03:46:30.605Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:46:30.605Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:46:30.606Z] [LOG] 💰 GROSS CALCULATION for Anoj null:
[2025-10-23T03:46:30.606Z] [LOG]    Base Salary: 50000
[2025-10-23T03:46:30.606Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:46:30.606Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:46:30.606Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:30.607Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:46:30.607Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:30.832Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:46:30.832Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:46:30.832Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:46:30.833Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:46:30.833Z] [LOG]    Actual Earned Base: Rs.8182.26
[2025-10-23T03:46:30.833Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:46:30.833Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:46:30.834Z] [LOG]    = Gross Salary: Rs.8182.26
[2025-10-23T03:46:30.834Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:46:30.834Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:46:30.835Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:46:30.835Z] [LOG]    Gross Salary: Rs.8182.26
[2025-10-23T03:46:30.835Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:46:30.835Z] [LOG]    = NET SALARY: Rs.8182.26
[2025-10-23T03:46:31.039Z] [LOG] Creating components for record b1392655-5c4c-485b-99c8-81fc00bf11d1: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:46:31.040Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8182.263115341666
}
[2025-10-23T03:46:31.257Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:46:31.458Z] [LOG] Created payroll_record_component: dc3cd13f-4f3b-46c6-b0f1-9eb1d42a0698 for Base Salary (Attendance-based)
[2025-10-23T03:46:31.883Z] [LOG] ✅ Financial balances updated successfully for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:31.884Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:46:31.884Z] [LOG] 
======================================================================
[2025-10-23T03:46:31.884Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Anoj null
[2025-10-23T03:46:31.884Z] [LOG] ======================================================================
[2025-10-23T03:46:31.884Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:46:31.885Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8182.26
[2025-10-23T03:46:31.885Z] [LOG]    Attendance Shortfall: Rs.25999.57
[2025-10-23T03:46:31.885Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:31.885Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:46:31.886Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:46:31.886Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:31.886Z] [LOG]    GROSS SALARY: Rs.8182.26
[2025-10-23T03:46:31.886Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:31.886Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:46:31.886Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:46:31.887Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:46:31.887Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:46:31.887Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:31.887Z] [LOG]    NET SALARY: Rs.8182.26
[2025-10-23T03:46:31.887Z] [LOG] ======================================================================

[2025-10-23T03:46:31.887Z] [LOG] ✅ Anoj null: Calculation completed successfully
[2025-10-23T03:46:31.887Z] [LOG] 📊 Progress: 26/34 (76.5%)
[2025-10-23T03:46:31.888Z] [LOG] 
🧮 Processing: Saruban null (EMP000007)
[2025-10-23T03:46:31.888Z] [LOG] 📋 Record ID: b28edc96-dccc-4ced-8fa4-87470570d7d5
[2025-10-23T03:46:31.888Z] [LOG] 
======================================================================
[2025-10-23T03:46:31.888Z] [LOG] 🧮 CALCULATING PAYROLL: Saruban null (EMP000007)
[2025-10-23T03:46:31.888Z] [LOG] ======================================================================
[2025-10-23T03:46:32.849Z] [LOG] 🔍 Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-23T03:46:32.849Z] [LOG]    Total components: 11
[2025-10-23T03:46:32.849Z] [LOG]    Applicable components: 11
[2025-10-23T03:46:32.849Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T03:46:34.257Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:46:34.258Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:46:34.567Z] [LOG] 📊 Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:34.782Z] [LOG] 📊 Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:34.977Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:34.977Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:46:34.978Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:46:35.178Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:46:35.179Z] [LOG]    Employee ID: 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:35.179Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:46:35.179Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:46:35.180Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-23T03:46:35.379Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:46:35.379Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-23T03:46:35.380Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-23T03:46:35.380Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-23T03:46:35.380Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:46:35.380Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:46:35.381Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:46:36.005Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:46:36.006Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:46:36.295Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:46:36.295Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:46:36.295Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:46:36.295Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:46:36.296Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:46:36.296Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:46:36.296Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:46:36.296Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:46:36.497Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:46:36.498Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:46:36.498Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:46:36.498Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:46:36.726Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:46:36.726Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:46:36.726Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:46:36.727Z] [LOG]       Current Time: 09:16:36
[2025-10-23T03:46:36.727Z] [LOG]       Expected Hours (scheduled → now): 0.78h
[2025-10-23T03:46:36.728Z] [LOG]       Actual Hours (check-in → now): 0.78h
[2025-10-23T03:46:36.728Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:46:36.731Z] [LOG]       Weekday: 119.78h
[2025-10-23T03:46:36.731Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:46:36.731Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:36.732Z] [LOG]       Total Expected: 133.28h
[2025-10-23T03:46:36.732Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:46:36.732Z] [LOG]       Weekday: 26.28h (includes 0.78h live)
[2025-10-23T03:46:36.733Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:46:36.733Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:36.733Z] [LOG]       Total Actual: 30.78h
[2025-10-23T03:46:36.733Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:46:36.733Z] [LOG]       Weekday: 119.78h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:36.734Z] [LOG]       Saturday: 13.50h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:36.734Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:36.734Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:36.734Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-23T03:46:36.734Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:46:36.734Z] [LOG]       Weekday: 26.28h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:36.734Z] [LOG]       Saturday: 4.50h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:36.735Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:36.735Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:36.735Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-23T03:46:36.736Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:46:36.736Z] [LOG]       Calculated At: Oct 23, 2025, 09:16:36
[2025-10-23T03:46:36.737Z] [LOG]       Expected Earned (until NOW): Rs.0.00
[2025-10-23T03:46:36.737Z] [LOG]       Actual Earned (until NOW): Rs.0.00
[2025-10-23T03:46:36.738Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:36.738Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-23T03:46:36.738Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:46:36.738Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-23T03:46:36.738Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:46:36.739Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:46:36.740Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-23T03:46:36.740Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T03:46:36.740Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T03:46:36.741Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:46:36.741Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:46:36.741Z] [LOG]    Gross Salary: 0
[2025-10-23T03:46:36.741Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:46:36.741Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:46:36.742Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:36.742Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:46:36.742Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:36.742Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:46:36.742Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:36.742Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:46:36.743Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:36.743Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:46:36.743Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:36.743Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:46:36.743Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:36.744Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:46:36.744Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:36.744Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:46:36.744Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:36.744Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:46:36.745Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:36.745Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:46:36.745Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-23T03:46:36.745Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:46:36.745Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:46:36.745Z] [LOG] 💰 GROSS CALCULATION for Saruban null:
[2025-10-23T03:46:36.746Z] [LOG]    Base Salary: 0
[2025-10-23T03:46:36.746Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:46:36.746Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:46:36.746Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:36.746Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:46:36.746Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:36.975Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:46:36.976Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:46:36.976Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:46:36.976Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:46:36.976Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-23T03:46:36.976Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:46:36.976Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:46:36.976Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-23T03:46:36.977Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:46:36.977Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:46:36.977Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:46:36.977Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-23T03:46:36.977Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:46:36.977Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-23T03:46:37.177Z] [LOG] Creating components for record b28edc96-dccc-4ced-8fa4-87470570d7d5: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:46:37.178Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 0
}
[2025-10-23T03:46:37.385Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:46:37.579Z] [LOG] Created payroll_record_component: 7cbbf240-334a-40e7-8471-e26361ce8051 for Base Salary (Attendance-based)
[2025-10-23T03:46:37.998Z] [LOG] ✅ Financial balances updated successfully for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:37.999Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:46:37.999Z] [LOG] 
======================================================================
[2025-10-23T03:46:37.999Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saruban null
[2025-10-23T03:46:37.999Z] [LOG] ======================================================================
[2025-10-23T03:46:38.000Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-23T03:46:38.000Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-23T03:46:38.000Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-23T03:46:38.000Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:38.000Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:46:38.000Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:46:38.001Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:38.001Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-23T03:46:38.001Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:38.001Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:46:38.001Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:46:38.001Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:46:38.002Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:46:38.002Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:38.002Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-23T03:46:38.002Z] [LOG] ======================================================================

[2025-10-23T03:46:38.002Z] [LOG] ✅ Saruban null: Calculation completed successfully
[2025-10-23T03:46:38.002Z] [LOG] 📊 Progress: 27/34 (79.4%)
[2025-10-23T03:46:38.003Z] [LOG] 
🧮 Processing: Faizan Faizan (EMP000003)
[2025-10-23T03:46:38.003Z] [LOG] 📋 Record ID: b8ab7e27-82b0-4cc2-830f-c823ade1c275
[2025-10-23T03:46:38.003Z] [LOG] 
======================================================================
[2025-10-23T03:46:38.003Z] [LOG] 🧮 CALCULATING PAYROLL: Faizan Faizan (EMP000003)
[2025-10-23T03:46:38.003Z] [LOG] ======================================================================
[2025-10-23T03:46:38.872Z] [LOG] 🔍 Component filtering for employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-23T03:46:38.873Z] [LOG]    Total components: 11
[2025-10-23T03:46:38.873Z] [LOG]    Applicable components: 11
[2025-10-23T03:46:38.873Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-23T03:46:40.517Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:46:40.517Z] [LOG] 🔄 Processing financial records for employee 0143a057-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:46:40.725Z] [LOG] 📊 Found 0 active loans for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:40.959Z] [LOG] 📊 Found 0 active advances for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:41.174Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:41.174Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:46:41.175Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:46:41.383Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:46:41.384Z] [LOG]    Employee ID: 0143a057-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:41.384Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:46:41.384Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:46:41.384Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T03:46:41.596Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:46:41.596Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T03:46:41.597Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T03:46:41.597Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T03:46:41.597Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:46:41.597Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:46:41.597Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:46:42.505Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:46:42.506Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:46:42.710Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:46:42.711Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:46:42.711Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:46:42.711Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:46:42.712Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:46:42.712Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:46:42.712Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:46:42.712Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:46:43.089Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:46:43.089Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:46:43.090Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:46:43.090Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:46:43.324Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:46:43.325Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:46:43.325Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:46:43.325Z] [LOG]       Current Time: 09:16:43
[2025-10-23T03:46:43.325Z] [LOG]       Expected Hours (scheduled → now): 0.78h
[2025-10-23T03:46:43.326Z] [LOG]       Actual Hours (check-in → now): 0.78h
[2025-10-23T03:46:43.326Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:46:43.326Z] [LOG]       Weekday: 119.78h
[2025-10-23T03:46:43.326Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:46:43.326Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:43.326Z] [LOG]       Total Expected: 133.28h
[2025-10-23T03:46:43.326Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:46:43.327Z] [LOG]       Weekday: 26.28h (includes 0.78h live)
[2025-10-23T03:46:43.327Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:46:43.327Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:43.327Z] [LOG]       Total Actual: 30.78h
[2025-10-23T03:46:43.327Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:46:43.327Z] [LOG]       Weekday: 119.78h × Rs.235.29 = Rs.28182.73
[2025-10-23T03:46:43.327Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T03:46:43.327Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:43.328Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:43.328Z] [LOG]       Total Expected Earned: Rs.34182.67
[2025-10-23T03:46:43.328Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:46:43.328Z] [LOG]       Weekday: 26.28h × Rs.235.29 = Rs.6183.12
[2025-10-23T03:46:43.328Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T03:46:43.328Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:43.328Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:43.328Z] [LOG]       Total Actual Earned: Rs.8183.10
[2025-10-23T03:46:43.329Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:46:43.329Z] [LOG]       Calculated At: Oct 23, 2025, 09:16:43
[2025-10-23T03:46:43.329Z] [LOG]       Expected Earned (until NOW): Rs.34182.67
[2025-10-23T03:46:43.329Z] [LOG]       Actual Earned (until NOW): Rs.8183.10
[2025-10-23T03:46:43.329Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:43.330Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T03:46:43.330Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:46:43.330Z] [LOG]       📉 Shortfall: 102.50 hours (76.06% of expected)
[2025-10-23T03:46:43.330Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:46:43.330Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:46:43.330Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:46:43.330Z] [LOG]    Actual Earned Base: Rs.8183.10
[2025-10-23T03:46:43.331Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:46:43.331Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:46:43.331Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:46:43.331Z] [LOG]    Gross Salary: 8183.095584433333
[2025-10-23T03:46:43.331Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:46:43.331Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:46:43.332Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:43.332Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:46:43.332Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:43.332Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:46:43.332Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:43.332Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:46:43.333Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:43.333Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:46:43.333Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:43.333Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:46:43.333Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:43.333Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:46:43.333Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:43.334Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:46:43.334Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:43.334Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:46:43.334Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:43.334Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:46:43.335Z] [LOG]    EPF/ETF calculated on: Rs.8183.10
[2025-10-23T03:46:43.335Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:46:43.336Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:46:43.337Z] [LOG] 💰 GROSS CALCULATION for Faizan Faizan:
[2025-10-23T03:46:43.337Z] [LOG]    Base Salary: 50000
[2025-10-23T03:46:43.337Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:46:43.337Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:46:43.337Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:43.338Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:46:43.338Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:43.785Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:46:43.785Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:46:43.785Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:46:43.785Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:46:43.786Z] [LOG]    Actual Earned Base: Rs.8183.10
[2025-10-23T03:46:43.786Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:46:43.786Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:46:43.786Z] [LOG]    = Gross Salary: Rs.8183.10
[2025-10-23T03:46:43.786Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:46:43.786Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:46:43.786Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:46:43.786Z] [LOG]    Gross Salary: Rs.8183.10
[2025-10-23T03:46:43.786Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:46:43.786Z] [LOG]    = NET SALARY: Rs.8183.10
[2025-10-23T03:46:44.054Z] [LOG] Creating components for record b8ab7e27-82b0-4cc2-830f-c823ade1c275: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:46:44.055Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8183.095584433333
}
[2025-10-23T03:46:44.258Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:46:44.468Z] [LOG] Created payroll_record_component: 1ae7a256-2eac-4636-bf56-bf97e08ed16b for Base Salary (Attendance-based)
[2025-10-23T03:46:44.962Z] [LOG] ✅ Financial balances updated successfully for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:44.962Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:46:44.962Z] [LOG] 
======================================================================
[2025-10-23T03:46:44.963Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Faizan Faizan
[2025-10-23T03:46:44.963Z] [LOG] ======================================================================
[2025-10-23T03:46:44.963Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:46:44.963Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8183.10
[2025-10-23T03:46:44.963Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:46:44.963Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:44.963Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:46:44.964Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:46:44.964Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:44.964Z] [LOG]    GROSS SALARY: Rs.8183.10
[2025-10-23T03:46:44.964Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:44.964Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:46:44.964Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:46:44.964Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:46:44.964Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:46:44.965Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:44.965Z] [LOG]    NET SALARY: Rs.8183.10
[2025-10-23T03:46:44.965Z] [LOG] ======================================================================

[2025-10-23T03:46:44.965Z] [LOG] ✅ Faizan Faizan: Calculation completed successfully
[2025-10-23T03:46:44.965Z] [LOG] 📊 Progress: 28/34 (82.4%)
[2025-10-23T03:46:44.965Z] [LOG] 
🧮 Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-23T03:46:44.965Z] [LOG] 📋 Record ID: c2865c38-fa18-43ff-8ccd-1a631ac761f7
[2025-10-23T03:46:44.966Z] [LOG] 
======================================================================
[2025-10-23T03:46:44.966Z] [LOG] 🧮 CALCULATING PAYROLL: R. D.A Kaushalya null (EMP000044)
[2025-10-23T03:46:44.966Z] [LOG] ======================================================================
[2025-10-23T03:46:45.977Z] [LOG] 🔍 Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-23T03:46:45.977Z] [LOG]    Total components: 11
[2025-10-23T03:46:45.978Z] [LOG]    Applicable components: 11
[2025-10-23T03:46:45.978Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-23T03:46:47.779Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:46:47.780Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:46:48.025Z] [LOG] 📊 Found 0 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:48.239Z] [LOG] 📊 Found 0 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:48.574Z] [LOG] 📊 Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:48.574Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:46:48.574Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:46:48.913Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:46:48.913Z] [LOG]    Employee ID: 01443963-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:48.913Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:46:48.914Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:46:48.914Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T03:46:49.167Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:46:49.167Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T03:46:49.167Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T03:46:49.167Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T03:46:49.168Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:46:49.168Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:46:49.168Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:46:50.236Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:46:50.237Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:46:50.495Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:46:50.496Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:46:50.496Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:46:50.496Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:46:50.496Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:46:50.497Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:46:50.497Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:46:50.497Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:46:50.815Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:46:50.815Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:46:50.816Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:46:50.816Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:46:51.057Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:46:51.057Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:46:51.058Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:46:51.058Z] [LOG]       Current Time: 09:16:51
[2025-10-23T03:46:51.058Z] [LOG]       Expected Hours (scheduled → now): 0.78h
[2025-10-23T03:46:51.059Z] [LOG]       Actual Hours (check-in → now): 0.78h
[2025-10-23T03:46:51.059Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:46:51.059Z] [LOG]       Weekday: 119.78h
[2025-10-23T03:46:51.059Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:46:51.059Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:51.059Z] [LOG]       Total Expected: 133.28h
[2025-10-23T03:46:51.059Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:46:51.060Z] [LOG]       Weekday: 26.28h (includes 0.78h live)
[2025-10-23T03:46:51.060Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:46:51.060Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:51.060Z] [LOG]       Total Actual: 30.78h
[2025-10-23T03:46:51.060Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:46:51.060Z] [LOG]       Weekday: 119.78h × Rs.235.29 = Rs.28183.24
[2025-10-23T03:46:51.060Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T03:46:51.060Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:51.061Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:51.061Z] [LOG]       Total Expected Earned: Rs.34183.18
[2025-10-23T03:46:51.061Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:46:51.061Z] [LOG]       Weekday: 26.28h × Rs.235.29 = Rs.6183.62
[2025-10-23T03:46:51.061Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T03:46:51.061Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:51.061Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:51.061Z] [LOG]       Total Actual Earned: Rs.8183.60
[2025-10-23T03:46:51.062Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:46:51.062Z] [LOG]       Calculated At: Oct 23, 2025, 09:16:51
[2025-10-23T03:46:51.062Z] [LOG]       Expected Earned (until NOW): Rs.34183.18
[2025-10-23T03:46:51.062Z] [LOG]       Actual Earned (until NOW): Rs.8183.60
[2025-10-23T03:46:51.063Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:51.063Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T03:46:51.063Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:46:51.063Z] [LOG]       📉 Shortfall: 102.50 hours (76.06% of expected)
[2025-10-23T03:46:51.063Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:46:51.063Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:46:51.064Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:46:51.064Z] [LOG]    Actual Earned Base: Rs.8183.60
[2025-10-23T03:46:51.064Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:46:51.064Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:46:51.064Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:46:51.064Z] [LOG]    Gross Salary: 8183.601000425
[2025-10-23T03:46:51.064Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:46:51.064Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:46:51.065Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:51.065Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:46:51.065Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:51.065Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:46:51.065Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:51.065Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:46:51.065Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:51.065Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:46:51.066Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:51.066Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:46:51.066Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:51.066Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:46:51.066Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:51.066Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:46:51.066Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:51.066Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:46:51.067Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:51.067Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:46:51.067Z] [LOG]    EPF/ETF calculated on: Rs.8183.60
[2025-10-23T03:46:51.067Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:46:51.067Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:46:51.067Z] [LOG] 💰 GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-23T03:46:51.067Z] [LOG]    Base Salary: 50000
[2025-10-23T03:46:51.067Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:46:51.067Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:46:51.068Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:51.068Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:46:51.068Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:51.467Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:46:51.467Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:46:51.468Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:46:51.468Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:46:51.468Z] [LOG]    Actual Earned Base: Rs.8183.60
[2025-10-23T03:46:51.468Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:46:51.468Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:46:51.468Z] [LOG]    = Gross Salary: Rs.8183.60
[2025-10-23T03:46:51.469Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:46:51.469Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:46:51.469Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:46:51.469Z] [LOG]    Gross Salary: Rs.8183.60
[2025-10-23T03:46:51.469Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:46:51.469Z] [LOG]    = NET SALARY: Rs.8183.60
[2025-10-23T03:46:51.721Z] [LOG] Creating components for record c2865c38-fa18-43ff-8ccd-1a631ac761f7: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:46:51.721Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8183.601000425
}
[2025-10-23T03:46:51.984Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:46:52.485Z] [LOG] Created payroll_record_component: 6712e376-cf59-40c6-a27c-94096fbbccad for Base Salary (Attendance-based)
[2025-10-23T03:46:52.950Z] [LOG] ✅ Financial balances updated successfully for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:52.950Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:46:52.950Z] [LOG] 
======================================================================
[2025-10-23T03:46:52.951Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: R. D.A Kaushalya null
[2025-10-23T03:46:52.951Z] [LOG] ======================================================================
[2025-10-23T03:46:52.951Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:46:52.951Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8183.60
[2025-10-23T03:46:52.952Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:46:52.952Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:52.952Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:46:52.952Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:46:52.953Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:52.953Z] [LOG]    GROSS SALARY: Rs.8183.60
[2025-10-23T03:46:52.953Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:52.953Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:46:52.954Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:46:52.954Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:46:52.954Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:46:52.954Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:46:52.954Z] [LOG]    NET SALARY: Rs.8183.60
[2025-10-23T03:46:52.955Z] [LOG] ======================================================================

[2025-10-23T03:46:52.955Z] [LOG] ✅ R. D.A Kaushalya null: Calculation completed successfully
[2025-10-23T03:46:52.955Z] [LOG] 📊 Progress: 29/34 (85.3%)
[2025-10-23T03:46:52.955Z] [LOG] 
🧮 Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-23T03:46:52.956Z] [LOG] 📋 Record ID: e01dd152-ead9-46e3-9118-7fb309b76e47
[2025-10-23T03:46:52.956Z] [LOG] 
======================================================================
[2025-10-23T03:46:52.956Z] [LOG] 🧮 CALCULATING PAYROLL: Viruna Damsiha Cooray null (EMP000038)
[2025-10-23T03:46:52.957Z] [LOG] ======================================================================
[2025-10-23T03:46:54.027Z] [LOG] 🔍 Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-23T03:46:54.027Z] [LOG]    Total components: 11
[2025-10-23T03:46:54.027Z] [LOG]    Applicable components: 11
[2025-10-23T03:46:54.027Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T03:46:55.356Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:46:55.356Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:46:55.568Z] [LOG] 📊 Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:56.029Z] [LOG] 📊 Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:56.245Z] [LOG] 📊 Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:56.246Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:46:56.246Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:46:56.483Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:46:56.483Z] [LOG]    Employee ID: 01441633-7105-11f0-a50f-98e743540430
[2025-10-23T03:46:56.483Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:46:56.484Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:46:56.484Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T03:46:56.708Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:46:56.709Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T03:46:56.709Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T03:46:56.709Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T03:46:56.709Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:46:56.709Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:46:56.709Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:46:57.535Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:46:57.535Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:46:57.867Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:46:57.868Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:46:57.868Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:46:57.868Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:46:57.868Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:46:57.868Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:46:57.869Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:46:57.869Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:46:58.175Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:46:58.175Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:46:58.175Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:46:58.175Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:46:58.496Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:46:58.496Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:46:58.496Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:46:58.497Z] [LOG]       Current Time: 09:16:58
[2025-10-23T03:46:58.497Z] [LOG]       Expected Hours (scheduled → now): 0.78h
[2025-10-23T03:46:58.497Z] [LOG]       Actual Hours (check-in → now): 0.78h
[2025-10-23T03:46:58.497Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:46:58.497Z] [LOG]       Weekday: 119.78h
[2025-10-23T03:46:58.497Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:46:58.497Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:58.498Z] [LOG]       Total Expected: 133.28h
[2025-10-23T03:46:58.498Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:46:58.498Z] [LOG]       Weekday: 26.28h (includes 0.78h live)
[2025-10-23T03:46:58.498Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:46:58.498Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:46:58.498Z] [LOG]       Total Actual: 30.78h
[2025-10-23T03:46:58.498Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:46:58.499Z] [LOG]       Weekday: 119.78h × Rs.235.29 = Rs.28183.72
[2025-10-23T03:46:58.499Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T03:46:58.499Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:58.499Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:58.499Z] [LOG]       Total Expected Earned: Rs.34183.66
[2025-10-23T03:46:58.499Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:46:58.499Z] [LOG]       Weekday: 26.28h × Rs.235.29 = Rs.6184.11
[2025-10-23T03:46:58.500Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T03:46:58.500Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:46:58.500Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:58.500Z] [LOG]       Total Actual Earned: Rs.8184.09
[2025-10-23T03:46:58.500Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:46:58.500Z] [LOG]       Calculated At: Oct 23, 2025, 09:16:58
[2025-10-23T03:46:58.501Z] [LOG]       Expected Earned (until NOW): Rs.34183.66
[2025-10-23T03:46:58.501Z] [LOG]       Actual Earned (until NOW): Rs.8184.09
[2025-10-23T03:46:58.501Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:46:58.501Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T03:46:58.501Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:46:58.501Z] [LOG]       📉 Shortfall: 102.50 hours (76.06% of expected)
[2025-10-23T03:46:58.501Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:46:58.502Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:46:58.502Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:46:58.502Z] [LOG]    Actual Earned Base: Rs.8184.09
[2025-10-23T03:46:58.502Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:46:58.502Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:46:58.502Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:46:58.502Z] [LOG]    Gross Salary: 8184.087201066666
[2025-10-23T03:46:58.502Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:46:58.503Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:46:58.503Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:58.503Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:46:58.504Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:58.504Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:46:58.504Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:58.504Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:46:58.505Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:58.505Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:46:58.506Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:58.506Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:46:58.506Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:58.506Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:46:58.507Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:58.507Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:46:58.507Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:58.507Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:46:58.507Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:58.508Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:46:58.508Z] [LOG]    EPF/ETF calculated on: Rs.8184.09
[2025-10-23T03:46:58.508Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:46:58.508Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:46:58.508Z] [LOG] 💰 GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-23T03:46:58.509Z] [LOG]    Base Salary: 50000
[2025-10-23T03:46:58.509Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:46:58.509Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:46:58.510Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:58.510Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:46:58.510Z] [LOG]    Fixed amount: 0
[2025-10-23T03:46:58.738Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:46:58.738Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:46:58.739Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:46:58.739Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:46:58.739Z] [LOG]    Actual Earned Base: Rs.8184.09
[2025-10-23T03:46:58.739Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:46:58.740Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:46:58.740Z] [LOG]    = Gross Salary: Rs.8184.09
[2025-10-23T03:46:58.740Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:46:58.740Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:46:58.741Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:46:58.741Z] [LOG]    Gross Salary: Rs.8184.09
[2025-10-23T03:46:58.741Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:46:58.741Z] [LOG]    = NET SALARY: Rs.8184.09
[2025-10-23T03:46:58.973Z] [LOG] Creating components for record e01dd152-ead9-46e3-9118-7fb309b76e47: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:46:58.974Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8184.087201066666
}
[2025-10-23T03:46:59.474Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:46:59.710Z] [LOG] Created payroll_record_component: e2e21e7e-e1a9-4acd-bad8-31c7bee5c894 for Base Salary (Attendance-based)
[2025-10-23T03:47:00.175Z] [LOG] ✅ Financial balances updated successfully for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:00.176Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:47:00.176Z] [LOG] 
======================================================================
[2025-10-23T03:47:00.176Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Viruna Damsiha Cooray null
[2025-10-23T03:47:00.176Z] [LOG] ======================================================================
[2025-10-23T03:47:00.177Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:47:00.177Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8184.09
[2025-10-23T03:47:00.177Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:47:00.177Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:00.177Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:47:00.177Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:47:00.177Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:00.177Z] [LOG]    GROSS SALARY: Rs.8184.09
[2025-10-23T03:47:00.178Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:00.178Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:47:00.178Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:47:00.178Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:47:00.178Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:47:00.178Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:00.178Z] [LOG]    NET SALARY: Rs.8184.09
[2025-10-23T03:47:00.178Z] [LOG] ======================================================================

[2025-10-23T03:47:00.179Z] [LOG] ✅ Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-23T03:47:00.179Z] [LOG] 📊 Progress: 30/34 (88.2%)
[2025-10-23T03:47:00.179Z] [LOG] 
🧮 Processing: Franklin null (EMP000018)
[2025-10-23T03:47:00.179Z] [LOG] 📋 Record ID: e21bb1a7-64ee-4dbb-85c9-fbd5fb683693
[2025-10-23T03:47:00.179Z] [LOG] 
======================================================================
[2025-10-23T03:47:00.179Z] [LOG] 🧮 CALCULATING PAYROLL: Franklin null (EMP000018)
[2025-10-23T03:47:00.179Z] [LOG] ======================================================================
[2025-10-23T03:47:01.195Z] [LOG] 🔍 Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-23T03:47:01.196Z] [LOG]    Total components: 11
[2025-10-23T03:47:01.196Z] [LOG]    Applicable components: 11
[2025-10-23T03:47:01.196Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-23T03:47:03.281Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:47:03.281Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:47:03.477Z] [LOG] 📊 Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:03.703Z] [LOG] 📊 Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:03.958Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:03.958Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:47:03.959Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:47:04.164Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:47:04.165Z] [LOG]    Employee ID: 0143c037-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:04.165Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:47:04.165Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:47:04.165Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T03:47:04.357Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:47:04.357Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T03:47:04.358Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T03:47:04.358Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T03:47:04.358Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:47:04.359Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:47:04.359Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:47:04.996Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:47:04.997Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:47:05.197Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:47:05.197Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:47:05.197Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:47:05.198Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:47:05.198Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:47:05.198Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:47:05.198Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:47:05.199Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:47:05.451Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:47:05.451Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:47:05.451Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:47:05.452Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:47:05.661Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:47:05.661Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:47:05.661Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:47:05.662Z] [LOG]       Current Time: 09:17:05
[2025-10-23T03:47:05.663Z] [LOG]       Expected Hours (scheduled → now): 0.78h
[2025-10-23T03:47:05.663Z] [LOG]       Actual Hours (check-in → now): 0.78h
[2025-10-23T03:47:05.663Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:47:05.663Z] [LOG]       Weekday: 119.78h
[2025-10-23T03:47:05.664Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:47:05.664Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:47:05.664Z] [LOG]       Total Expected: 133.28h
[2025-10-23T03:47:05.665Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:47:05.665Z] [LOG]       Weekday: 26.28h (includes 0.78h live)
[2025-10-23T03:47:05.665Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:47:05.666Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:47:05.666Z] [LOG]       Total Actual: 30.78h
[2025-10-23T03:47:05.666Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:47:05.667Z] [LOG]       Weekday: 119.78h × Rs.235.29 = Rs.28184.19
[2025-10-23T03:47:05.667Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T03:47:05.667Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:47:05.667Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:47:05.668Z] [LOG]       Total Expected Earned: Rs.34184.13
[2025-10-23T03:47:05.668Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:47:05.668Z] [LOG]       Weekday: 26.28h × Rs.235.29 = Rs.6184.58
[2025-10-23T03:47:05.669Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T03:47:05.669Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:47:05.669Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:47:05.670Z] [LOG]       Total Actual Earned: Rs.8184.56
[2025-10-23T03:47:05.670Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:47:05.671Z] [LOG]       Calculated At: Oct 23, 2025, 09:17:05
[2025-10-23T03:47:05.671Z] [LOG]       Expected Earned (until NOW): Rs.34184.13
[2025-10-23T03:47:05.671Z] [LOG]       Actual Earned (until NOW): Rs.8184.56
[2025-10-23T03:47:05.672Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:47:05.672Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T03:47:05.672Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:47:05.673Z] [LOG]       📉 Shortfall: 102.50 hours (76.06% of expected)
[2025-10-23T03:47:05.673Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:47:05.673Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:47:05.674Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:47:05.674Z] [LOG]    Actual Earned Base: Rs.8184.56
[2025-10-23T03:47:05.675Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:47:05.675Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:47:05.676Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:47:05.676Z] [LOG]    Gross Salary: 8184.555493525
[2025-10-23T03:47:05.676Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:47:05.677Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:47:05.677Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:05.677Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:47:05.677Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:05.678Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:47:05.678Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:05.678Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:47:05.679Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:05.679Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:47:05.679Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:05.679Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:47:05.679Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:05.680Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:47:05.680Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:05.680Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:47:05.680Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:05.681Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:47:05.681Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:05.681Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:47:05.682Z] [LOG]    EPF/ETF calculated on: Rs.8184.56
[2025-10-23T03:47:05.682Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:47:05.682Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:47:05.682Z] [LOG] 💰 GROSS CALCULATION for Franklin null:
[2025-10-23T03:47:05.683Z] [LOG]    Base Salary: 50000
[2025-10-23T03:47:05.683Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:47:05.684Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:47:05.684Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:05.685Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:47:05.685Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:05.904Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:47:05.904Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:47:05.905Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:47:05.905Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:47:05.905Z] [LOG]    Actual Earned Base: Rs.8184.56
[2025-10-23T03:47:05.905Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:47:05.906Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:47:05.906Z] [LOG]    = Gross Salary: Rs.8184.56
[2025-10-23T03:47:05.906Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:47:05.907Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:47:05.907Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:47:05.907Z] [LOG]    Gross Salary: Rs.8184.56
[2025-10-23T03:47:05.907Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:47:05.908Z] [LOG]    = NET SALARY: Rs.8184.56
[2025-10-23T03:47:06.176Z] [LOG] Creating components for record e21bb1a7-64ee-4dbb-85c9-fbd5fb683693: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:47:06.177Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8184.555493525
}
[2025-10-23T03:47:06.425Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:47:06.816Z] [LOG] Created payroll_record_component: c9c63736-15ad-4bdf-93ea-6c7bb7efa0bb for Base Salary (Attendance-based)
[2025-10-23T03:47:07.353Z] [LOG] ✅ Financial balances updated successfully for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:07.353Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:47:07.354Z] [LOG] 
======================================================================
[2025-10-23T03:47:07.354Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Franklin null
[2025-10-23T03:47:07.354Z] [LOG] ======================================================================
[2025-10-23T03:47:07.355Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:47:07.355Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8184.56
[2025-10-23T03:47:07.355Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:47:07.355Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:07.356Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:47:07.356Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:47:07.356Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:07.356Z] [LOG]    GROSS SALARY: Rs.8184.56
[2025-10-23T03:47:07.356Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:07.357Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:47:07.357Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:47:07.357Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:47:07.357Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:47:07.357Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:07.358Z] [LOG]    NET SALARY: Rs.8184.56
[2025-10-23T03:47:07.358Z] [LOG] ======================================================================

[2025-10-23T03:47:07.358Z] [LOG] ✅ Franklin null: Calculation completed successfully
[2025-10-23T03:47:07.359Z] [LOG] 📊 Progress: 31/34 (91.2%)
[2025-10-23T03:47:07.359Z] [LOG] 
🧮 Processing: Maryam null (EMP000035)
[2025-10-23T03:47:07.359Z] [LOG] 📋 Record ID: e74fa2e9-60c4-485f-a846-eccf47793031
[2025-10-23T03:47:07.359Z] [LOG] 
======================================================================
[2025-10-23T03:47:07.360Z] [LOG] 🧮 CALCULATING PAYROLL: Maryam null (EMP000035)
[2025-10-23T03:47:07.360Z] [LOG] ======================================================================
[2025-10-23T03:47:08.197Z] [LOG] 🔍 Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-23T03:47:08.197Z] [LOG]    Total components: 11
[2025-10-23T03:47:08.198Z] [LOG]    Applicable components: 11
[2025-10-23T03:47:08.198Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-23T03:47:09.478Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:47:09.478Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:47:09.693Z] [LOG] 📊 Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:09.906Z] [LOG] 📊 Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:10.113Z] [LOG] 📊 Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:10.113Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:47:10.114Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:47:10.316Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:47:10.317Z] [LOG]    Employee ID: 01440221-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:10.318Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:47:10.318Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:47:10.318Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-23T03:47:10.518Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:47:10.519Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-23T03:47:10.520Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-23T03:47:10.523Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-23T03:47:10.524Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:47:10.524Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:47:10.524Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:47:11.127Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:47:11.128Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:47:11.326Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:47:11.326Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:47:11.327Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:47:11.327Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:47:11.327Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:47:11.327Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:47:11.328Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:47:11.328Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:47:11.543Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:47:11.543Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:47:11.544Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:47:11.544Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:47:11.754Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:47:11.755Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:47:11.755Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:47:11.756Z] [LOG]       Current Time: 09:17:11
[2025-10-23T03:47:11.756Z] [LOG]       Expected Hours (scheduled → now): 0.79h
[2025-10-23T03:47:11.757Z] [LOG]       Actual Hours (check-in → now): 0.79h
[2025-10-23T03:47:11.757Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:47:11.757Z] [LOG]       Weekday: 119.79h
[2025-10-23T03:47:11.757Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:47:11.757Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:47:11.758Z] [LOG]       Total Expected: 133.29h
[2025-10-23T03:47:11.758Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:47:11.758Z] [LOG]       Weekday: 26.29h (includes 0.79h live)
[2025-10-23T03:47:11.758Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:47:11.759Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:47:11.759Z] [LOG]       Total Actual: 30.79h
[2025-10-23T03:47:11.759Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:47:11.759Z] [LOG]       Weekday: 119.79h × Rs.188.24 = Rs.22548.63
[2025-10-23T03:47:11.759Z] [LOG]       Saturday: 13.50h × Rs.355.56 = Rs.4800.06
[2025-10-23T03:47:11.760Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:47:11.760Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:47:11.761Z] [LOG]       Total Expected Earned: Rs.27348.69
[2025-10-23T03:47:11.762Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:47:11.762Z] [LOG]       Weekday: 26.29h × Rs.188.24 = Rs.4948.19
[2025-10-23T03:47:11.762Z] [LOG]       Saturday: 4.50h × Rs.355.56 = Rs.1600.02
[2025-10-23T03:47:11.762Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:47:11.763Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:47:11.763Z] [LOG]       Total Actual Earned: Rs.6548.21
[2025-10-23T03:47:11.763Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:47:11.764Z] [LOG]       Calculated At: Oct 23, 2025, 09:17:11
[2025-10-23T03:47:11.764Z] [LOG]       Expected Earned (until NOW): Rs.27348.69
[2025-10-23T03:47:11.765Z] [LOG]       Actual Earned (until NOW): Rs.6548.21
[2025-10-23T03:47:11.765Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:47:11.765Z] [LOG]       Attendance Deduction: Rs.20800.48
[2025-10-23T03:47:11.766Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:47:11.766Z] [LOG]       📉 Shortfall: 102.50 hours (76.06% of expected)
[2025-10-23T03:47:11.767Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:47:11.767Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:47:11.768Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-23T03:47:11.768Z] [LOG]    Actual Earned Base: Rs.6548.21
[2025-10-23T03:47:11.769Z] [LOG]    Attendance Shortfall: Rs.20800.48
[2025-10-23T03:47:11.769Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:47:11.769Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:47:11.769Z] [LOG]    Gross Salary: 6548.209270266667
[2025-10-23T03:47:11.769Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:47:11.770Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:47:11.770Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:11.770Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:47:11.771Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:11.771Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:47:11.771Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:11.771Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:47:11.771Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:11.772Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:47:11.772Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:11.772Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:47:11.772Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:11.772Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:47:11.773Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:11.773Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:47:11.773Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:11.773Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:47:11.773Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:11.774Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:47:11.774Z] [LOG]    EPF/ETF calculated on: Rs.6548.21
[2025-10-23T03:47:11.774Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:47:11.774Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:47:11.774Z] [LOG] 💰 GROSS CALCULATION for Maryam null:
[2025-10-23T03:47:11.774Z] [LOG]    Base Salary: 40000
[2025-10-23T03:47:11.775Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:47:11.775Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:47:11.775Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:11.775Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:47:11.775Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:11.975Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:47:11.975Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:47:11.976Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:47:11.976Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:47:11.976Z] [LOG]    Actual Earned Base: Rs.6548.21
[2025-10-23T03:47:11.977Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:47:11.977Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:47:11.977Z] [LOG]    = Gross Salary: Rs.6548.21
[2025-10-23T03:47:11.979Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:47:11.979Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:47:11.979Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:47:11.979Z] [LOG]    Gross Salary: Rs.6548.21
[2025-10-23T03:47:11.980Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:47:11.980Z] [LOG]    = NET SALARY: Rs.6548.21
[2025-10-23T03:47:12.194Z] [LOG] Creating components for record e74fa2e9-60c4-485f-a846-eccf47793031: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:47:12.196Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 6548.209270266667
}
[2025-10-23T03:47:12.426Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:47:12.682Z] [LOG] Created payroll_record_component: 4993d987-bf70-4870-9f77-a0eb7fb92709 for Base Salary (Attendance-based)
[2025-10-23T03:47:13.108Z] [LOG] ✅ Financial balances updated successfully for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:13.109Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:47:13.109Z] [LOG] 
======================================================================
[2025-10-23T03:47:13.109Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Maryam null
[2025-10-23T03:47:13.110Z] [LOG] ======================================================================
[2025-10-23T03:47:13.110Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-23T03:47:13.110Z] [LOG]    Actual Earned Base (Attendance-based): Rs.6548.21
[2025-10-23T03:47:13.110Z] [LOG]    Attendance Shortfall: Rs.20800.48
[2025-10-23T03:47:13.111Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:13.111Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:47:13.111Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:47:13.113Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:13.113Z] [LOG]    GROSS SALARY: Rs.6548.21
[2025-10-23T03:47:13.113Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:13.114Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:47:13.116Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:47:13.117Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:47:13.117Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:47:13.118Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:13.119Z] [LOG]    NET SALARY: Rs.6548.21
[2025-10-23T03:47:13.121Z] [LOG] ======================================================================

[2025-10-23T03:47:13.121Z] [LOG] ✅ Maryam null: Calculation completed successfully
[2025-10-23T03:47:13.122Z] [LOG] 📊 Progress: 32/34 (94.1%)
[2025-10-23T03:47:13.122Z] [LOG] 
🧮 Processing: Office Team null (EMP000041)
[2025-10-23T03:47:13.123Z] [LOG] 📋 Record ID: e83b607f-1bbe-4d90-a8aa-8b8dadbaa26f
[2025-10-23T03:47:13.123Z] [LOG] 
======================================================================
[2025-10-23T03:47:13.124Z] [LOG] 🧮 CALCULATING PAYROLL: Office Team null (EMP000041)
[2025-10-23T03:47:13.124Z] [LOG] ======================================================================
[2025-10-23T03:47:14.112Z] [LOG] 🔍 Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-23T03:47:14.113Z] [LOG]    Total components: 11
[2025-10-23T03:47:14.113Z] [LOG]    Applicable components: 11
[2025-10-23T03:47:14.113Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-23T03:47:15.427Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:47:15.428Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:47:15.802Z] [LOG] 📊 Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:16.044Z] [LOG] 📊 Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:16.266Z] [LOG] 📊 Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:16.267Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:47:16.267Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:47:16.551Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:47:16.552Z] [LOG]    Employee ID: 01442b21-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:16.553Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:47:16.553Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:47:16.554Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-23T03:47:16.983Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:47:16.983Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-23T03:47:16.984Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-23T03:47:16.984Z] [LOG]       Saturday Hourly Rate: Rs.0.01
[2025-10-23T03:47:16.984Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:47:16.985Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:47:16.985Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:47:17.682Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:47:17.682Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:47:17.879Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:47:17.879Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:47:17.880Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:47:17.880Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:47:17.880Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:47:17.880Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:47:17.881Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:47:17.881Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:47:18.097Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:47:18.098Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:47:18.098Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:47:18.099Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:47:18.297Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:47:18.297Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:47:18.297Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:47:18.299Z] [LOG]       Current Time: 09:17:18
[2025-10-23T03:47:18.299Z] [LOG]       Expected Hours (scheduled → now): 0.79h
[2025-10-23T03:47:18.299Z] [LOG]       Actual Hours (check-in → now): 0.79h
[2025-10-23T03:47:18.299Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:47:18.300Z] [LOG]       Weekday: 119.79h
[2025-10-23T03:47:18.300Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:47:18.300Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:47:18.300Z] [LOG]       Total Expected: 133.29h
[2025-10-23T03:47:18.302Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:47:18.302Z] [LOG]       Weekday: 26.29h (includes 0.79h live)
[2025-10-23T03:47:18.303Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:47:18.303Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:47:18.304Z] [LOG]       Total Actual: 30.79h
[2025-10-23T03:47:18.304Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:47:18.304Z] [LOG]       Weekday: 119.79h × Rs.0.00 = Rs.0.00
[2025-10-23T03:47:18.305Z] [LOG]       Saturday: 13.50h × Rs.0.01 = Rs.0.14
[2025-10-23T03:47:18.305Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:47:18.305Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:47:18.306Z] [LOG]       Total Expected Earned: Rs.0.14
[2025-10-23T03:47:18.306Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:47:18.306Z] [LOG]       Weekday: 26.29h × Rs.0.00 = Rs.0.00
[2025-10-23T03:47:18.306Z] [LOG]       Saturday: 4.50h × Rs.0.01 = Rs.0.04
[2025-10-23T03:47:18.306Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:47:18.306Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:47:18.307Z] [LOG]       Total Actual Earned: Rs.0.04
[2025-10-23T03:47:18.307Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:47:18.308Z] [LOG]       Calculated At: Oct 23, 2025, 09:17:18
[2025-10-23T03:47:18.308Z] [LOG]       Expected Earned (until NOW): Rs.0.14
[2025-10-23T03:47:18.308Z] [LOG]       Actual Earned (until NOW): Rs.0.04
[2025-10-23T03:47:18.308Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:47:18.309Z] [LOG]       Attendance Deduction: Rs.0.09
[2025-10-23T03:47:18.309Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:47:18.309Z] [LOG]       📉 Shortfall: 102.50 hours (66.67% of expected)
[2025-10-23T03:47:18.309Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:47:18.309Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:47:18.310Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-23T03:47:18.310Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-23T03:47:18.310Z] [LOG]    Attendance Shortfall: Rs.0.09
[2025-10-23T03:47:18.310Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:47:18.311Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:47:18.311Z] [LOG]    Gross Salary: 0.045
[2025-10-23T03:47:18.311Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:47:18.311Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:47:18.311Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:18.312Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:47:18.312Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:18.312Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:47:18.312Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:18.313Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:47:18.313Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:18.313Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:47:18.313Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:18.313Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:47:18.314Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:18.314Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:47:18.314Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:18.314Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:47:18.314Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:18.315Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:47:18.315Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:18.315Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:47:18.315Z] [LOG]    EPF/ETF calculated on: Rs.0.04
[2025-10-23T03:47:18.315Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:47:18.316Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:47:18.316Z] [LOG] 💰 GROSS CALCULATION for Office Team null:
[2025-10-23T03:47:18.316Z] [LOG]    Base Salary: 1
[2025-10-23T03:47:18.316Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:47:18.316Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:47:18.316Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:18.317Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:47:18.317Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:18.620Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:47:18.620Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:47:18.620Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:47:18.621Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:47:18.621Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-23T03:47:18.621Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:47:18.621Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:47:18.621Z] [LOG]    = Gross Salary: Rs.0.04
[2025-10-23T03:47:18.621Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:47:18.621Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:47:18.621Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:47:18.621Z] [LOG]    Gross Salary: Rs.0.04
[2025-10-23T03:47:18.621Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:47:18.621Z] [LOG]    = NET SALARY: Rs.0.04
[2025-10-23T03:47:18.894Z] [LOG] Creating components for record e83b607f-1bbe-4d90-a8aa-8b8dadbaa26f: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:47:18.894Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 0.045
}
[2025-10-23T03:47:19.373Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:47:19.614Z] [LOG] Created payroll_record_component: 1a20e32e-7529-4b28-be51-abc37336e099 for Base Salary (Attendance-based)
[2025-10-23T03:47:20.151Z] [LOG] ✅ Financial balances updated successfully for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:20.151Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:47:20.151Z] [LOG] 
======================================================================
[2025-10-23T03:47:20.151Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Office Team null
[2025-10-23T03:47:20.151Z] [LOG] ======================================================================
[2025-10-23T03:47:20.152Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-23T03:47:20.152Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.04
[2025-10-23T03:47:20.152Z] [LOG]    Attendance Shortfall: Rs.0.09
[2025-10-23T03:47:20.152Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:20.152Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:47:20.153Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:47:20.153Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:20.153Z] [LOG]    GROSS SALARY: Rs.0.04
[2025-10-23T03:47:20.153Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:20.153Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:47:20.153Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:47:20.153Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:47:20.153Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:47:20.153Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:20.153Z] [LOG]    NET SALARY: Rs.0.04
[2025-10-23T03:47:20.154Z] [LOG] ======================================================================

[2025-10-23T03:47:20.154Z] [LOG] ✅ Office Team null: Calculation completed successfully
[2025-10-23T03:47:20.154Z] [LOG] 📊 Progress: 33/34 (97.1%)
[2025-10-23T03:47:20.154Z] [LOG] 
🧮 Processing: Chamodi null (EMP000032)
[2025-10-23T03:47:20.154Z] [LOG] 📋 Record ID: f246b1e3-bf59-42ee-8a33-1e451afd0966
[2025-10-23T03:47:20.154Z] [LOG] 
======================================================================
[2025-10-23T03:47:20.154Z] [LOG] 🧮 CALCULATING PAYROLL: Chamodi null (EMP000032)
[2025-10-23T03:47:20.155Z] [LOG] ======================================================================
[2025-10-23T03:47:21.776Z] [LOG] 🔍 Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-23T03:47:21.776Z] [LOG]    Total components: 11
[2025-10-23T03:47:21.777Z] [LOG]    Applicable components: 11
[2025-10-23T03:47:21.777Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-23T03:47:23.775Z] [LOG] 
🔄 Processing financial records...
[2025-10-23T03:47:23.776Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-23T03:47:24.132Z] [LOG] 📊 Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:24.345Z] [LOG] 📊 Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:24.702Z] [LOG] 📊 Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:24.704Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-23T03:47:24.704Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-23T03:47:24.905Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-23T03:47:24.906Z] [LOG]    Employee ID: 0143f302-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:24.906Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-23T03:47:24.906Z] [LOG]    📅 Calculation Until: 2025-10-22 (PARTIAL - Until Today)
[2025-10-23T03:47:24.907Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-23T03:47:25.420Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-23T03:47:25.420Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-23T03:47:25.420Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-23T03:47:25.421Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-23T03:47:25.421Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-23T03:47:25.421Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-23T03:47:25.421Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-23T03:47:26.256Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-23T03:47:26.257Z] [LOG]       Weekdays: 14, Saturdays: 3, Sundays: 0
[2025-10-23T03:47:26.474Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-23T03:47:26.475Z] [LOG]       Period: 2025-10-01 to 2025-10-22
[2025-10-23T03:47:26.475Z] [LOG]       Total completed sessions found: 4
[2025-10-23T03:47:26.475Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-23T03:47:26.475Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-23T03:47:26.476Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-23T03:47:26.476Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-23T03:47:26.476Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-23T03:47:27.021Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-23T03:47:27.022Z] [LOG]          Weekday: 25.50h
[2025-10-23T03:47:27.023Z] [LOG]          Saturday: 4.50h
[2025-10-23T03:47:27.023Z] [LOG]          Sunday: 0.00h
[2025-10-23T03:47:27.300Z] [LOG] 
   🔴 LIVE SESSION TODAY (WEEKDAY):
[2025-10-23T03:47:27.301Z] [LOG]       Scheduled Start: 08:30:00
[2025-10-23T03:47:27.301Z] [LOG]       Check-in Time: 08:30:00
[2025-10-23T03:47:27.302Z] [LOG]       Current Time: 09:17:27
[2025-10-23T03:47:27.302Z] [LOG]       Expected Hours (scheduled → now): 0.79h
[2025-10-23T03:47:27.302Z] [LOG]       Actual Hours (check-in → now): 0.79h
[2025-10-23T03:47:27.302Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-23T03:47:27.302Z] [LOG]       Weekday: 119.79h
[2025-10-23T03:47:27.303Z] [LOG]       Saturday: 13.50h
[2025-10-23T03:47:27.303Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:47:27.303Z] [LOG]       Total Expected: 133.29h
[2025-10-23T03:47:27.303Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-23T03:47:27.303Z] [LOG]       Weekday: 26.29h (includes 0.79h live)
[2025-10-23T03:47:27.304Z] [LOG]       Saturday: 4.50h
[2025-10-23T03:47:27.304Z] [LOG]       Sunday: 0.00h
[2025-10-23T03:47:27.304Z] [LOG]       Total Actual: 30.79h
[2025-10-23T03:47:27.304Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-23T03:47:27.304Z] [LOG]       Weekday: 119.79h × Rs.235.29 = Rs.28185.60
[2025-10-23T03:47:27.304Z] [LOG]       Saturday: 13.50h × Rs.444.44 = Rs.5999.94
[2025-10-23T03:47:27.304Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:47:27.304Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:47:27.304Z] [LOG]       Total Expected Earned: Rs.34185.54
[2025-10-23T03:47:27.304Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-23T03:47:27.305Z] [LOG]       Weekday: 26.29h × Rs.235.29 = Rs.6185.99
[2025-10-23T03:47:27.305Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-23T03:47:27.305Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-23T03:47:27.305Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:47:27.305Z] [LOG]       Total Actual Earned: Rs.8185.97
[2025-10-23T03:47:27.305Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-23T03:47:27.305Z] [LOG]       Calculated At: Oct 23, 2025, 09:17:27
[2025-10-23T03:47:27.305Z] [LOG]       Expected Earned (until NOW): Rs.34185.54
[2025-10-23T03:47:27.305Z] [LOG]       Actual Earned (until NOW): Rs.8185.97
[2025-10-23T03:47:27.306Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-23T03:47:27.306Z] [LOG]       Attendance Deduction: Rs.25999.58
[2025-10-23T03:47:27.306Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-23T03:47:27.306Z] [LOG]       📉 Shortfall: 102.50 hours (76.05% of expected)
[2025-10-23T03:47:27.306Z] [LOG] 
   ⚠️  NOTE: Employee is currently checked in. Running this calculation
[2025-10-23T03:47:27.306Z] [LOG]       again later will produce a different result as time progresses.
[2025-10-23T03:47:27.306Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:47:27.307Z] [LOG]    Actual Earned Base: Rs.8185.97
[2025-10-23T03:47:27.307Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:47:27.307Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-23T03:47:27.307Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-23T03:47:27.307Z] [LOG]    Gross Salary: 8185.9697825
[2025-10-23T03:47:27.308Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-23T03:47:27.308Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-23T03:47:27.308Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:27.308Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-23T03:47:27.308Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:27.308Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-23T03:47:27.308Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:27.308Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-23T03:47:27.309Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:27.309Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-23T03:47:27.309Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:27.309Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-23T03:47:27.309Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:27.309Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-23T03:47:27.309Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:27.310Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-23T03:47:27.310Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:27.310Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-23T03:47:27.310Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:27.310Z] [LOG]    📊 Total Deductions: 0
[2025-10-23T03:47:27.310Z] [LOG]    EPF/ETF calculated on: Rs.8185.97
[2025-10-23T03:47:27.310Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-23T03:47:27.310Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-23T03:47:27.311Z] [LOG] 💰 GROSS CALCULATION for Chamodi null:
[2025-10-23T03:47:27.311Z] [LOG]    Base Salary: 50000
[2025-10-23T03:47:27.311Z] [LOG]    📋 Processing 2 configured earning components
[2025-10-23T03:47:27.311Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-23T03:47:27.311Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:27.311Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-23T03:47:27.311Z] [LOG]    Fixed amount: 0
[2025-10-23T03:47:27.616Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-23T03:47:27.616Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:47:27.616Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-23T03:47:27.617Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-23T03:47:27.617Z] [LOG]    Actual Earned Base: Rs.8185.97
[2025-10-23T03:47:27.617Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-23T03:47:27.617Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-23T03:47:27.618Z] [LOG]    = Gross Salary: Rs.8185.97
[2025-10-23T03:47:27.618Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-23T03:47:27.618Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:47:27.618Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-23T03:47:27.619Z] [LOG]    Gross Salary: Rs.8185.97
[2025-10-23T03:47:27.619Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-23T03:47:27.619Z] [LOG]    = NET SALARY: Rs.8185.97
[2025-10-23T03:47:27.855Z] [LOG] Creating components for record f246b1e3-bf59-42ee-8a33-1e451afd0966: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-23T03:47:27.856Z] [LOG] Processing component: {
  "name": "Base Salary (Attendance-based)",
  "type": "earning",
  "amount": 8185.9697825
}
[2025-10-23T03:47:28.393Z] [LOG] Using existing component ID: d8d12040-39e3-49fa-ab72-0acebd46e635
[2025-10-23T03:47:28.977Z] [LOG] Created payroll_record_component: 147f7c4b-80ac-42a5-b840-775d0aac211e for Base Salary (Attendance-based)
[2025-10-23T03:47:29.559Z] [LOG] ✅ Financial balances updated successfully for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-23T03:47:29.559Z] [LOG] ✅ Financial balances updated successfully
[2025-10-23T03:47:29.560Z] [LOG] 
======================================================================
[2025-10-23T03:47:29.560Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chamodi null
[2025-10-23T03:47:29.560Z] [LOG] ======================================================================
[2025-10-23T03:47:29.560Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-23T03:47:29.560Z] [LOG]    Actual Earned Base (Attendance-based): Rs.8185.97
[2025-10-23T03:47:29.561Z] [LOG]    Attendance Shortfall: Rs.25999.58
[2025-10-23T03:47:29.561Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:29.561Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-23T03:47:29.561Z] [LOG]    Bonuses: Rs.0.00
[2025-10-23T03:47:29.561Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:29.562Z] [LOG]    GROSS SALARY: Rs.8185.97
[2025-10-23T03:47:29.562Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:29.562Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-23T03:47:29.562Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-23T03:47:29.562Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-23T03:47:29.563Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-23T03:47:29.563Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-23T03:47:29.563Z] [LOG]    NET SALARY: Rs.8185.97
[2025-10-23T03:47:29.563Z] [LOG] ======================================================================

[2025-10-23T03:47:29.563Z] [LOG] ✅ Chamodi null: Calculation completed successfully
[2025-10-23T03:47:29.564Z] [LOG] 📊 Progress: 34/34 (100.0%)
[2025-10-23T03:47:29.564Z] [LOG] 
============================================================
[2025-10-23T03:47:29.564Z] [LOG] 📈 Processing Summary: 34 successful, 0 failed
[2025-10-23T03:47:33.104Z] [LOG] 🎉 Payroll calculation completed successfully!
[2025-10-23T03:47:33.105Z] [LOG] 📊 Final Summary: 34 processed, 0 errors
[2025-10-23T03:47:33.105Z] [INFO] ================================================================================
[2025-10-23T03:47:33.105Z] [INFO] ⏰ Completed at: 2025-10-23T03:47:33.105Z
[2025-10-23T03:47:33.105Z] [INFO] 📊 Total log entries: 5350