[2025-10-17T06:02:57.202Z] [INFO] 🚀 Payroll calculation logging started for run: 44f37222-f7a3-49ba-b243-48c48841cf11
[2025-10-17T06:02:57.202Z] [INFO] 📁 Log file: D:\attendance-system\BackEnd\logs\payroll-run-44f37222-f7a3-49ba-b243-48c48841cf11-2025-10-17T06-02-57-202Z.txt
[2025-10-17T06:02:57.202Z] [INFO] ⏰ Started at: 2025-10-17T06:02:57.202Z
[2025-10-17T06:02:57.202Z] [INFO] ================================================================================
[2025-10-17T06:02:57.202Z] [LOG] 🚀 Starting payroll calculation for run: 44f37222-f7a3-49ba-b243-48c48841cf11
[2025-10-17T06:02:57.202Z] [LOG] 👤 Client ID: it-signature, User ID: 059304ea-24a5-4d78-a290-cf09b9e53c4c
[2025-10-17T06:02:57.204Z] [LOG] Creating components for record e253e252-3ee0-4711-ab0b-59b681a51694: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:02:57.206Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 92500
}
[2025-10-17T06:02:57.381Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:02:57.554Z] [LOG] Created payroll_record_component: d0d9573c-c71a-4547-bc85-344815b87019 for Attendance Deduction
[2025-10-17T06:02:57.896Z] [LOG] ✅ Payroll run verified: October (MONTHLY_2025_10_REGULAR)
[2025-10-17T06:02:57.899Z] [LOG] ✅ Financial balances updated successfully for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-17T06:02:57.899Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:02:57.900Z] [LOG] 
======================================================================
[2025-10-17T06:02:57.900Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Uthpala null
[2025-10-17T06:02:57.900Z] [LOG] ======================================================================
[2025-10-17T06:02:57.901Z] [LOG]    Gross Salary: Rs.100000.00
[2025-10-17T06:02:57.901Z] [LOG]    Total Deductions: Rs.92500.00
[2025-10-17T06:02:57.901Z] [LOG]       - Attendance Deduction: Rs.92500.00
[2025-10-17T06:02:57.902Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:02:57.902Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:02:57.902Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:02:57.903Z] [LOG]    NET SALARY: Rs.7500.00
[2025-10-17T06:02:57.903Z] [LOG] ======================================================================

[2025-10-17T06:02:57.904Z] [LOG] ✅ Uthpala null: Calculation completed successfully
[2025-10-17T06:02:57.904Z] [LOG] 📊 Progress: 3/34 (8.8%)
[2025-10-17T06:02:57.905Z] [LOG] 
🧮 Processing: Saruban null (EMP000007)
[2025-10-17T06:02:57.905Z] [LOG] 📋 Record ID: dd436f41-2b11-4039-b6d3-5908f152152f
[2025-10-17T06:02:57.906Z] [LOG] 
======================================================================
[2025-10-17T06:02:57.907Z] [LOG] 🧮 CALCULATING PAYROLL: Saruban null (EMP000007)
[2025-10-17T06:02:57.907Z] [LOG] ======================================================================
[2025-10-17T06:02:58.242Z] [LOG] 📊 Status updated to 'calculating'
[2025-10-17T06:02:58.606Z] [LOG] 🔍 Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-17T06:02:58.607Z] [LOG]    Total components: 9
[2025-10-17T06:02:58.608Z] [LOG]    Applicable components: 9
[2025-10-17T06:02:58.608Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T06:02:58.776Z] [LOG] 👥 Processing 31 employee records:
[2025-10-17T06:02:58.777Z] [LOG] ============================================================
[2025-10-17T06:02:58.777Z] [LOG] 
🧮 Processing: Chemil null (EMP000040)
[2025-10-17T06:02:58.778Z] [LOG] 📋 Record ID: 11e788ef-9c3f-4d4e-a31c-ff17060b9384
[2025-10-17T06:02:58.779Z] [LOG] 
======================================================================
[2025-10-17T06:02:58.781Z] [LOG] 🧮 CALCULATING PAYROLL: Chemil null (EMP000040)
[2025-10-17T06:02:58.782Z] [LOG] ======================================================================
[2025-10-17T06:02:59.311Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:02:59.315Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:02:59.500Z] [LOG] 📊 Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-17T06:02:59.677Z] [LOG] 📊 Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-17T06:02:59.855Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-17T06:02:59.856Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:02:59.858Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:02:59.859Z] [LOG] 💰 GROSS CALCULATION for Saruban null:
[2025-10-17T06:02:59.859Z] [LOG]    Base Salary: 0
[2025-10-17T06:02:59.860Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T06:03:00.035Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:00.202Z] [LOG] 🔍 Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:00.203Z] [LOG]    Total components: 9
[2025-10-17T06:03:00.203Z] [LOG]    Applicable components: 9
[2025-10-17T06:03:00.203Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:03:00.211Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:00.212Z] [LOG]    Employee ID: 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:00.212Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:00.214Z] [LOG]    Base Salary: Rs.0.00
[2025-10-17T06:03:00.388Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:00.388Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-17T06:03:00.389Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-17T06:03:00.390Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-17T06:03:00.390Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:00.568Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:00.569Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:00.570Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:00.570Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:00.571Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:00.572Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:00.572Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:00.573Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:00.574Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:00.574Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:00.575Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T06:03:00.575Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:00.576Z] [LOG]       Base Salary: Rs.0.00
[2025-10-17T06:03:00.577Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T06:03:00.578Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:00.578Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-17T06:03:00.579Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-17T06:03:00.581Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:00.582Z] [LOG]    Gross Salary: 0
[2025-10-17T06:03:00.583Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:00.584Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:00.584Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:00.585Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:00.585Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:00.587Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:00.587Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:00.588Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:00.589Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:00.589Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:00.590Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:00.591Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:00.591Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:00.592Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:00.592Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:00.593Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:00.594Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:00.594Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:00.595Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:00.596Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:00.596Z] [LOG] Regular deductions for Saruban null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:00.598Z] [LOG] Combined deductions for Saruban null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 0
}
[2025-10-17T06:03:00.783Z] [LOG] Creating components for record dd436f41-2b11-4039-b6d3-5908f152152f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:00.785Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-17T06:03:00.962Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:01.139Z] [LOG] Created payroll_record_component: cbc67d00-7a05-4b08-8fae-f31fc69bffe3 for Attendance Deduction
[2025-10-17T06:03:01.483Z] [LOG] ✅ Financial balances updated successfully for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:01.483Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:01.484Z] [LOG] 
======================================================================
[2025-10-17T06:03:01.485Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saruban null
[2025-10-17T06:03:01.485Z] [LOG] ======================================================================
[2025-10-17T06:03:01.486Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-17T06:03:01.487Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-17T06:03:01.487Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-17T06:03:01.488Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:01.489Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:01.489Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:01.490Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T06:03:01.491Z] [LOG] ======================================================================

[2025-10-17T06:03:01.492Z] [LOG] ✅ Saruban null: Calculation completed successfully
[2025-10-17T06:03:01.493Z] [LOG] 📊 Progress: 4/34 (11.8%)
[2025-10-17T06:03:01.493Z] [LOG] 
🧮 Processing: Dharshika null (EMP000009)
[2025-10-17T06:03:01.495Z] [LOG] 📋 Record ID: c6d62800-02f8-46e1-8a03-6fcf1e5fbad2
[2025-10-17T06:03:01.497Z] [LOG] 
======================================================================
[2025-10-17T06:03:01.498Z] [LOG] 🧮 CALCULATING PAYROLL: Dharshika null (EMP000009)
[2025-10-17T06:03:01.499Z] [LOG] ======================================================================
[2025-10-17T06:03:01.595Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:01.596Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:01.941Z] [LOG] 📊 Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:02.191Z] [LOG] 🔍 Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:02.191Z] [LOG]    Total components: 9
[2025-10-17T06:03:02.191Z] [LOG]    Applicable components: 9
[2025-10-17T06:03:02.192Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:03:02.289Z] [LOG] 📊 Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:02.658Z] [LOG] 📊 Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:02.659Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:02.660Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:02.661Z] [LOG] 💰 GROSS CALCULATION for Chemil null:
[2025-10-17T06:03:02.662Z] [LOG]    Base Salary: 250000
[2025-10-17T06:03:02.663Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T06:03:02.892Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:02.893Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:03.011Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:03.068Z] [LOG] 📊 Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:03.150Z] [LOG] GET /api/leaves/dashboard - 401 - 2ms
[2025-10-17T06:03:03.241Z] [LOG] 📊 Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:03.359Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:03.360Z] [LOG]    Employee ID: 01442599-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:03.361Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:03.361Z] [LOG]    Base Salary: Rs.250000.00
[2025-10-17T06:03:03.416Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:03.416Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:03.418Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:03.418Z] [LOG] 💰 GROSS CALCULATION for Dharshika null:
[2025-10-17T06:03:03.419Z] [LOG]    Base Salary: 100000
[2025-10-17T06:03:03.420Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T06:03:03.517Z] [LOG] decoded {
  "userId": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "jti": "a81ea29b-0e25-482b-8962-994abef27fdd",
  "type": "refresh",
  "iat": 1760680944,
  "exp": 1761285744,
  "aud": "hrms-client",
  "iss": "hrms-api"
}
[2025-10-17T06:03:03.520Z] [LOG] sessions: [
  {
    "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
    "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
    "client_id": "it-signature",
    "token_jti": "a81ea29b-0e25-482b-8962-994abef27fdd",
    "ip_address": "::1",
    "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
    "expires_at": "2025-10-18 11:32:22",
    "is_active": 1,
    "created_at": "2025-10-17 11:18:49",
    "user_active": 1
  }
]
[2025-10-17T06:03:03.598Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:03.722Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:03.723Z] [LOG]       Daily Salary: Rs.10000.00
[2025-10-17T06:03:03.723Z] [LOG]       Weekday Hourly Rate: Rs.1176.47
[2025-10-17T06:03:03.724Z] [LOG]       Saturday Hourly Rate: Rs.1176.47
[2025-10-17T06:03:03.724Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:03.773Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:03.775Z] [LOG]    Employee ID: 0143a994-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:03.775Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:03.776Z] [LOG]    Base Salary: Rs.100000.00
[2025-10-17T06:03:03.870Z] [LOG] 🔍 === TOKEN GENERATION DEBUG ===
[2025-10-17T06:03:03.870Z] [LOG] 🔍 JWT_EXPIRES_IN: 24h
[2025-10-17T06:03:03.873Z] [LOG] 🔍 Token issued at: "2025-10-17T06:03:03.000Z"
[2025-10-17T06:03:03.873Z] [LOG] 🔍 Token expires at: "2025-10-18T06:03:03.000Z"
[2025-10-17T06:03:03.874Z] [LOG] 🔍 Token valid for: 1440 minutes
[2025-10-17T06:03:03.874Z] [LOG] 🔍 === END TOKEN GENERATION DEBUG ===
[2025-10-17T06:03:03.952Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:03.952Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-17T06:03:03.953Z] [LOG]       Weekday Hourly Rate: Rs.470.59
[2025-10-17T06:03:03.953Z] [LOG]       Saturday Hourly Rate: Rs.470.59
[2025-10-17T06:03:03.953Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:04.079Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:04.081Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:04.081Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:04.082Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:04.083Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:04.083Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:04.084Z] [LOG]       Weekday: 17.00h × Rs.1176.47 = Rs.19999.99
[2025-10-17T06:03:04.085Z] [LOG]       Saturday: 0.00h × Rs.1176.47 = Rs.0.00
[2025-10-17T06:03:04.085Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:04.086Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:04.087Z] [LOG]       Total Earned Salary: Rs.19999.99
[2025-10-17T06:03:04.087Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:04.088Z] [LOG]       Base Salary: Rs.250000.00
[2025-10-17T06:03:04.089Z] [LOG]       Earned Salary: Rs.19999.99
[2025-10-17T06:03:04.089Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:04.090Z] [LOG]       Attendance Deduction: Rs.230000.01
[2025-10-17T06:03:04.091Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:04.093Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:04.094Z] [LOG]    Gross Salary: 250000
[2025-10-17T06:03:04.094Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:04.095Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:04.095Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.098Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:04.099Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.099Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:04.101Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.101Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:04.102Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.103Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:04.104Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.104Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:04.105Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.105Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:04.106Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.107Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:04.107Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.108Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:04.109Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.109Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:04.110Z] [LOG] Regular deductions for Chemil null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:04.111Z] [LOG] Combined deductions for Chemil null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 230000.01,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 230000.01
}
[2025-10-17T06:03:04.126Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:04.127Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:04.127Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:04.128Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:04.128Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:04.128Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:04.129Z] [LOG]       Weekday: 17.00h × Rs.470.59 = Rs.8000.03
[2025-10-17T06:03:04.129Z] [LOG]       Saturday: 0.00h × Rs.470.59 = Rs.0.00
[2025-10-17T06:03:04.130Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:04.131Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:04.131Z] [LOG]       Total Earned Salary: Rs.8000.03
[2025-10-17T06:03:04.131Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:04.132Z] [LOG]       Base Salary: Rs.100000.00
[2025-10-17T06:03:04.132Z] [LOG]       Earned Salary: Rs.8000.03
[2025-10-17T06:03:04.132Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:04.133Z] [LOG]       Attendance Deduction: Rs.91999.97
[2025-10-17T06:03:04.133Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:04.134Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:04.134Z] [LOG]    Gross Salary: 100000
[2025-10-17T06:03:04.135Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:04.135Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:04.135Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.136Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:04.136Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.136Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:04.137Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.137Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:04.137Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.138Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:04.138Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.138Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:04.139Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.139Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:04.139Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.140Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:04.140Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.140Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:04.141Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:04.141Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:04.141Z] [LOG] Regular deductions for Dharshika null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:04.142Z] [LOG] Combined deductions for Dharshika null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 91999.97,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 91999.97
}
[2025-10-17T06:03:04.240Z] [LOG] POST /auth/refresh - 200 - 1072ms
[2025-10-17T06:03:04.336Z] [LOG] Creating components for record c6d62800-02f8-46e1-8a03-6fcf1e5fbad2: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:04.338Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 91999.97
}
[2025-10-17T06:03:04.418Z] [LOG] session eka meka {
  "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "1d501d4a-7eb5-41d3-afa7-b92ac757f3ee",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 11:33:01",
  "is_active": 1,
  "created_at": "2025-10-17 11:18:49",
  "user_active": 1
}
[2025-10-17T06:03:04.513Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:04.688Z] [LOG] Created payroll_record_component: 238a543b-b975-481b-bed6-ddc41f86e48b for Attendance Deduction
[2025-10-17T06:03:04.772Z] [LOG] Creating components for record 11e788ef-9c3f-4d4e-a31c-ff17060b9384: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 1
}
[2025-10-17T06:03:04.776Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 230000.01
}
[2025-10-17T06:03:05.042Z] [LOG] ✅ Financial balances updated successfully for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:05.042Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:05.043Z] [LOG] 
======================================================================
[2025-10-17T06:03:05.043Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Dharshika null
[2025-10-17T06:03:05.043Z] [LOG] ======================================================================
[2025-10-17T06:03:05.044Z] [LOG]    Gross Salary: Rs.100000.00
[2025-10-17T06:03:05.044Z] [LOG]    Total Deductions: Rs.91999.97
[2025-10-17T06:03:05.044Z] [LOG]       - Attendance Deduction: Rs.91999.97
[2025-10-17T06:03:05.045Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:05.045Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:05.045Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:05.046Z] [LOG]    NET SALARY: Rs.8000.03
[2025-10-17T06:03:05.046Z] [LOG] ======================================================================

[2025-10-17T06:03:05.047Z] [LOG] ✅ Dharshika null: Calculation completed successfully
[2025-10-17T06:03:05.048Z] [LOG] 📊 Progress: 5/34 (14.7%)
[2025-10-17T06:03:05.048Z] [LOG] 
🧮 Processing: Ishara null (EMP000011)
[2025-10-17T06:03:05.048Z] [LOG] 📋 Record ID: da46e18c-c5f0-45d2-9647-1f6da929180a
[2025-10-17T06:03:05.049Z] [LOG] 
======================================================================
[2025-10-17T06:03:05.049Z] [LOG] 🧮 CALCULATING PAYROLL: Ishara null (EMP000011)
[2025-10-17T06:03:05.050Z] [LOG] ======================================================================
[2025-10-17T06:03:05.130Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:05.481Z] [LOG] GET /api/leaves/dashboard - 304 - 1237ms
[2025-10-17T06:03:05.483Z] [LOG] Created payroll_record_component: a11a02b2-319a-4c73-9567-3d5ad259238d for Attendance Deduction
[2025-10-17T06:03:05.484Z] [LOG] Processing component: {
  "name": "Income Tax",
  "type": "tax",
  "amount": 12000
}
[2025-10-17T06:03:05.682Z] [LOG] Using existing component ID: 72f98b53-4bd5-4713-98d0-e3a641ad8d0f
[2025-10-17T06:03:05.775Z] [LOG] 🔍 Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:05.776Z] [LOG]    Total components: 9
[2025-10-17T06:03:05.776Z] [LOG]    Applicable components: 9
[2025-10-17T06:03:05.777Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-17T06:03:05.858Z] [LOG] Created payroll_record_component: 9782afde-ea9b-4d0f-9630-124db6c34f16 for Income Tax
[2025-10-17T06:03:06.379Z] [LOG] ✅ Financial balances updated successfully for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:06.380Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:06.381Z] [LOG] 
======================================================================
[2025-10-17T06:03:06.381Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chemil null
[2025-10-17T06:03:06.382Z] [LOG] ======================================================================
[2025-10-17T06:03:06.383Z] [LOG]    Gross Salary: Rs.250000.00
[2025-10-17T06:03:06.383Z] [LOG]    Total Deductions: Rs.230000.01
[2025-10-17T06:03:06.384Z] [LOG]       - Attendance Deduction: Rs.230000.01
[2025-10-17T06:03:06.384Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:06.385Z] [LOG]    Total Taxes: Rs.12000.00
[2025-10-17T06:03:06.386Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:06.387Z] [LOG]    NET SALARY: Rs.7999.99
[2025-10-17T06:03:06.387Z] [LOG] ======================================================================

[2025-10-17T06:03:06.388Z] [LOG] ✅ Chemil null: Calculation completed successfully
[2025-10-17T06:03:06.389Z] [LOG] 📊 Progress: 1/31 (3.2%)
[2025-10-17T06:03:06.389Z] [LOG] 
🧮 Processing: Sithira null (EMP000039)
[2025-10-17T06:03:06.392Z] [LOG] 📋 Record ID: 1e535d88-d415-43fc-9de3-bbd5f66694ae
[2025-10-17T06:03:06.393Z] [LOG] 
======================================================================
[2025-10-17T06:03:06.394Z] [LOG] 🧮 CALCULATING PAYROLL: Sithira null (EMP000039)
[2025-10-17T06:03:06.394Z] [LOG] ======================================================================
[2025-10-17T06:03:06.480Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:06.480Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:06.657Z] [LOG] 📊 Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:06.833Z] [LOG] 📊 Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:07.006Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:07.007Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:07.008Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:07.009Z] [LOG] 💰 GROSS CALCULATION for Ishara null:
[2025-10-17T06:03:07.009Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:07.010Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T06:03:07.090Z] [LOG] 🔍 Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:07.091Z] [LOG]    Total components: 9
[2025-10-17T06:03:07.092Z] [LOG]    Applicable components: 9
[2025-10-17T06:03:07.092Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-17T06:03:07.183Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:07.361Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:07.362Z] [LOG]    Employee ID: 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:07.362Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:07.364Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:07.537Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:07.539Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:07.540Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:07.541Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:07.541Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:07.722Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:07.723Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:07.723Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:07.724Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:07.725Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:07.725Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:07.726Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:03:07.727Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:03:07.727Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:07.732Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:07.735Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:03:07.735Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:07.737Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:03:07.738Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:03:07.739Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:07.740Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:07.740Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:07.741Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:07.742Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:03:07.742Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:07.743Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:07.744Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:07.744Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:07.745Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:07.746Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:07.747Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:07.748Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:07.749Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:07.749Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:07.750Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:07.751Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:07.752Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:07.753Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:07.754Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:07.755Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:07.755Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:07.756Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:07.756Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:07.756Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:07.757Z] [LOG] Regular deductions for Ishara null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:07.757Z] [LOG] Combined deductions for Ishara null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:03:07.793Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:07.799Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:07.933Z] [LOG] Creating components for record da46e18c-c5f0-45d2-9647-1f6da929180a: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:07.934Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:03:07.976Z] [LOG] 📊 Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:08.106Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:08.150Z] [LOG] 📊 Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:08.282Z] [LOG] Created payroll_record_component: 31bf06f2-99bb-452c-b6ef-c9e949844dc9 for Attendance Deduction
[2025-10-17T06:03:08.325Z] [LOG] 📊 Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:08.326Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:08.327Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:08.328Z] [LOG] 💰 GROSS CALCULATION for Sithira null:
[2025-10-17T06:03:08.328Z] [LOG]    Base Salary: 40000
[2025-10-17T06:03:08.329Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T06:03:08.505Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:08.631Z] [LOG] ✅ Financial balances updated successfully for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:08.632Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:08.633Z] [LOG] 
======================================================================
[2025-10-17T06:03:08.633Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ishara null
[2025-10-17T06:03:08.634Z] [LOG] ======================================================================
[2025-10-17T06:03:08.635Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:03:08.635Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:03:08.636Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:08.637Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:08.637Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:08.638Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:08.639Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:03:08.639Z] [LOG] ======================================================================

[2025-10-17T06:03:08.640Z] [LOG] ✅ Ishara null: Calculation completed successfully
[2025-10-17T06:03:08.641Z] [LOG] 📊 Progress: 6/34 (17.6%)
[2025-10-17T06:03:08.644Z] [LOG] 
🧮 Processing: Jessie null (EMP000013)
[2025-10-17T06:03:08.645Z] [LOG] 📋 Record ID: 4a015e9b-e7f6-494a-bbc4-3d5c0c801ccc
[2025-10-17T06:03:08.648Z] [LOG] 
======================================================================
[2025-10-17T06:03:08.649Z] [LOG] 🧮 CALCULATING PAYROLL: Jessie null (EMP000013)
[2025-10-17T06:03:08.651Z] [LOG] ======================================================================
[2025-10-17T06:03:08.687Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:08.687Z] [LOG]    Employee ID: 01441e19-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:08.688Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:08.688Z] [LOG]    Base Salary: Rs.40000.00
[2025-10-17T06:03:08.863Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:08.864Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-17T06:03:08.864Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-17T06:03:08.865Z] [LOG]       Saturday Hourly Rate: Rs.188.24
[2025-10-17T06:03:08.865Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:09.040Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:09.041Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:09.042Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:09.043Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:09.043Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:09.043Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:09.044Z] [LOG]       Weekday: 17.00h × Rs.188.24 = Rs.3200.08
[2025-10-17T06:03:09.044Z] [LOG]       Saturday: 0.00h × Rs.188.24 = Rs.0.00
[2025-10-17T06:03:09.044Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:09.045Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:09.045Z] [LOG]       Total Earned Salary: Rs.3200.08
[2025-10-17T06:03:09.045Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:09.045Z] [LOG]       Base Salary: Rs.40000.00
[2025-10-17T06:03:09.045Z] [LOG]       Earned Salary: Rs.3200.08
[2025-10-17T06:03:09.046Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:09.046Z] [LOG]       Attendance Deduction: Rs.36799.92
[2025-10-17T06:03:09.048Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:09.048Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:09.048Z] [LOG]    Gross Salary: 40000
[2025-10-17T06:03:09.049Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:09.049Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:09.049Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:09.050Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:09.050Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:09.050Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:09.051Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:09.051Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:09.052Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:09.052Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:09.052Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:09.052Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:09.052Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:09.053Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:09.053Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:09.053Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:09.053Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:09.054Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:09.054Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:09.054Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:09.054Z] [LOG] Regular deductions for Sithira null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:09.055Z] [LOG] Combined deductions for Sithira null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 36799.92,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 36799.92
}
[2025-10-17T06:03:09.229Z] [LOG] Creating components for record 1e535d88-d415-43fc-9de3-bbd5f66694ae: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:09.231Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 36799.92
}
[2025-10-17T06:03:09.348Z] [LOG] 🔍 Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:09.348Z] [LOG]    Total components: 9
[2025-10-17T06:03:09.349Z] [LOG]    Applicable components: 9
[2025-10-17T06:03:09.349Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:03:09.408Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:09.582Z] [LOG] Created payroll_record_component: fdfdec26-a156-4d9f-a023-cf8df3540612 for Attendance Deduction
[2025-10-17T06:03:09.945Z] [LOG] ✅ Financial balances updated successfully for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:09.945Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:09.946Z] [LOG] 
======================================================================
[2025-10-17T06:03:09.947Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sithira null
[2025-10-17T06:03:09.947Z] [LOG] ======================================================================
[2025-10-17T06:03:09.948Z] [LOG]    Gross Salary: Rs.40000.00
[2025-10-17T06:03:09.949Z] [LOG]    Total Deductions: Rs.36799.92
[2025-10-17T06:03:09.950Z] [LOG]       - Attendance Deduction: Rs.36799.92
[2025-10-17T06:03:09.950Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:09.951Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:09.952Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:09.952Z] [LOG]    NET SALARY: Rs.3200.08
[2025-10-17T06:03:09.953Z] [LOG] ======================================================================

[2025-10-17T06:03:09.955Z] [LOG] ✅ Sithira null: Calculation completed successfully
[2025-10-17T06:03:09.955Z] [LOG] 📊 Progress: 2/31 (6.5%)
[2025-10-17T06:03:09.958Z] [LOG] 
🧮 Processing: Saru null (EMP000022)
[2025-10-17T06:03:09.959Z] [LOG] 📋 Record ID: 29c100b6-dd8d-4267-bb08-41477b5b7e45
[2025-10-17T06:03:09.959Z] [LOG] 
======================================================================
[2025-10-17T06:03:09.960Z] [LOG] 🧮 CALCULATING PAYROLL: Saru null (EMP000022)
[2025-10-17T06:03:09.961Z] [LOG] ======================================================================
[2025-10-17T06:03:10.042Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:10.044Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:10.233Z] [LOG] 📊 Found 0 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:10.407Z] [LOG] 📊 Found 0 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:10.583Z] [LOG] 📊 Found 1 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:10.584Z] [LOG] 🎁 Bonus b57d768e-fdaa-427d-ab19-3f625f65a28d: Adding LKR 5000 (performance)
[2025-10-17T06:03:10.585Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 5000,
  "netAdjustment": 5000
}
[2025-10-17T06:03:10.586Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:10.586Z] [LOG] 💰 GROSS CALCULATION for Jessie null:
[2025-10-17T06:03:10.587Z] [LOG]    Base Salary: 60000
[2025-10-17T06:03:10.587Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T06:03:10.662Z] [LOG] 🔍 Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:10.662Z] [LOG]    Total components: 9
[2025-10-17T06:03:10.664Z] [LOG]    Applicable components: 9
[2025-10-17T06:03:10.664Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:03:10.764Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:10.765Z] [LOG]    ✅ Added financial bonuses: Rs.5000.00 to gross salary
[2025-10-17T06:03:10.940Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:10.941Z] [LOG]    Employee ID: 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:10.942Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:10.942Z] [LOG]    Base Salary: Rs.60000.00
[2025-10-17T06:03:11.118Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:11.119Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-17T06:03:11.119Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-17T06:03:11.120Z] [LOG]       Saturday Hourly Rate: Rs.282.35
[2025-10-17T06:03:11.120Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:11.294Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:11.295Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:11.295Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:11.296Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:11.297Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:11.298Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:11.300Z] [LOG]       Weekday: 17.00h × Rs.282.35 = Rs.4799.95
[2025-10-17T06:03:11.301Z] [LOG]       Saturday: 0.00h × Rs.282.35 = Rs.0.00
[2025-10-17T06:03:11.303Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:11.311Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:11.312Z] [LOG]       Total Earned Salary: Rs.4799.95
[2025-10-17T06:03:11.312Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:11.316Z] [LOG]       Base Salary: Rs.60000.00
[2025-10-17T06:03:11.318Z] [LOG]       Earned Salary: Rs.4799.95
[2025-10-17T06:03:11.319Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:11.320Z] [LOG]       Attendance Deduction: Rs.55200.05
[2025-10-17T06:03:11.321Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:11.322Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:11.324Z] [LOG]    Gross Salary: 65000
[2025-10-17T06:03:11.325Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:11.325Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:11.325Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:11.326Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:11.326Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:11.326Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:11.326Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:11.327Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:11.327Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:11.327Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:11.328Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:11.328Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:11.328Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:11.328Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:11.329Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:11.329Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:11.330Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:11.331Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:11.331Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:11.331Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:11.332Z] [LOG] Regular deductions for Jessie null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:11.332Z] [LOG] Combined deductions for Jessie null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 55200.05,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 55200.05
}
[2025-10-17T06:03:11.368Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:11.369Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:11.510Z] [LOG] Creating components for record 4a015e9b-e7f6-494a-bbc4-3d5c0c801ccc: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:11.510Z] [LOG] Processing component: {
  "name": "Financial Bonuses",
  "type": "earning",
  "amount": 5000
}
[2025-10-17T06:03:11.543Z] [LOG] 📊 Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:11.721Z] [LOG] 📊 Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:11.894Z] [LOG] 📊 Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:11.895Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:11.896Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:11.896Z] [LOG] 💰 GROSS CALCULATION for Saru null:
[2025-10-17T06:03:11.897Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:11.897Z] [LOG]    📋 Processing 0 configured earning components
[2025-10-17T06:03:12.042Z] [LOG] Created new component ID: 358d4714-0a37-484b-979d-f8fa6c68d465
[2025-10-17T06:03:12.071Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:12.215Z] [LOG] Created payroll_record_component: dc97a6a6-5570-43df-b858-cbfe5453b91d for Financial Bonuses
[2025-10-17T06:03:12.216Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 55200.05
}
[2025-10-17T06:03:12.254Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:12.255Z] [LOG]    Employee ID: 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:12.255Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:12.256Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:12.390Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:12.432Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:12.435Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:12.436Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:12.436Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:12.437Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:12.566Z] [LOG] Created payroll_record_component: d177e9b3-92a9-49e6-b725-c2f333268014 for Attendance Deduction
[2025-10-17T06:03:12.630Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:12.631Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:12.631Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:12.632Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:12.633Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:12.633Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:12.634Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:03:12.635Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:03:12.635Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:12.636Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:12.637Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:03:12.638Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:12.639Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:03:12.639Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:03:12.640Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:12.641Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:12.642Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:12.645Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:12.645Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:03:12.646Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:12.647Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:12.648Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:12.648Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:12.649Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:12.651Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:12.652Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:12.652Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:12.653Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:12.654Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:12.654Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:12.655Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:12.656Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:12.657Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:12.657Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:12.658Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:12.658Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:12.659Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:12.660Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:12.660Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:12.661Z] [LOG] Regular deductions for Saru null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:12.662Z] [LOG] Combined deductions for Saru null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:03:12.840Z] [LOG] Creating components for record 29c100b6-dd8d-4267-bb08-41477b5b7e45: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:12.841Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:03:13.021Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:13.087Z] [LOG] ✅ Updated bonus b57d768e-fdaa-427d-ab19-3f625f65a28d: Status changed to 'paid'
[2025-10-17T06:03:13.200Z] [LOG] Created payroll_record_component: 9c72baf7-3a38-4f02-a9de-70b1587daa0f for Attendance Deduction
[2025-10-17T06:03:13.260Z] [LOG] ✅ Financial balances updated successfully for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:13.262Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:13.262Z] [LOG] 
======================================================================
[2025-10-17T06:03:13.263Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Jessie null
[2025-10-17T06:03:13.264Z] [LOG] ======================================================================
[2025-10-17T06:03:13.265Z] [LOG]    Gross Salary: Rs.65000.00
[2025-10-17T06:03:13.265Z] [LOG]    Total Deductions: Rs.55200.05
[2025-10-17T06:03:13.266Z] [LOG]       - Attendance Deduction: Rs.55200.05
[2025-10-17T06:03:13.267Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:13.267Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:13.268Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:13.269Z] [LOG]    NET SALARY: Rs.9799.95
[2025-10-17T06:03:13.269Z] [LOG] ======================================================================

[2025-10-17T06:03:13.271Z] [LOG] ✅ Jessie null: Calculation completed successfully
[2025-10-17T06:03:13.272Z] [LOG] 📊 Progress: 7/34 (20.6%)
[2025-10-17T06:03:13.274Z] [LOG] 
🧮 Processing: Anoj null (EMP000014)
[2025-10-17T06:03:13.274Z] [LOG] 📋 Record ID: 98cee313-2fd7-4cdd-84da-d34706644a3c
[2025-10-17T06:03:13.275Z] [LOG] 
======================================================================
[2025-10-17T06:03:13.276Z] [LOG] 🧮 CALCULATING PAYROLL: Anoj null (EMP000014)
[2025-10-17T06:03:13.276Z] [LOG] ======================================================================
[2025-10-17T06:03:13.547Z] [LOG] ✅ Financial balances updated successfully for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:13.547Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:13.548Z] [LOG] 
======================================================================
[2025-10-17T06:03:13.549Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saru null
[2025-10-17T06:03:13.549Z] [LOG] ======================================================================
[2025-10-17T06:03:13.550Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:03:13.551Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:03:13.551Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:13.552Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:13.552Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:13.553Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:13.554Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:03:13.555Z] [LOG] ======================================================================

[2025-10-17T06:03:13.555Z] [LOG] ✅ Saru null: Calculation completed successfully
[2025-10-17T06:03:13.556Z] [LOG] 📊 Progress: 3/31 (9.7%)
[2025-10-17T06:03:13.557Z] [LOG] 
🧮 Processing: Maryam null (EMP000035)
[2025-10-17T06:03:13.558Z] [LOG] 📋 Record ID: 36ed6f0c-b890-4902-ab42-ef71b738678f
[2025-10-17T06:03:13.560Z] [LOG] 
======================================================================
[2025-10-17T06:03:13.561Z] [LOG] 🧮 CALCULATING PAYROLL: Maryam null (EMP000035)
[2025-10-17T06:03:13.562Z] [LOG] ======================================================================
[2025-10-17T06:03:13.984Z] [LOG] 🔍 Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:13.985Z] [LOG]    Total components: 10
[2025-10-17T06:03:13.985Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:13.986Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:03:14.256Z] [LOG] 🔍 Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:14.256Z] [LOG]    Total components: 10
[2025-10-17T06:03:14.257Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:14.257Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-17T06:03:14.680Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:14.681Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:14.858Z] [LOG] 📊 Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:14.963Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:14.965Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:15.041Z] [LOG] 📊 Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:15.155Z] [LOG] 📊 Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:15.238Z] [LOG] 📊 Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:15.239Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:15.240Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:15.241Z] [LOG] 💰 GROSS CALCULATION for Anoj null:
[2025-10-17T06:03:15.242Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:15.242Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:15.243Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:15.244Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:15.338Z] [LOG] 📊 Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:15.427Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:15.540Z] [LOG] 📊 Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:15.541Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:15.542Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:15.543Z] [LOG] 💰 GROSS CALCULATION for Maryam null:
[2025-10-17T06:03:15.544Z] [LOG]    Base Salary: 40000
[2025-10-17T06:03:15.544Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:15.545Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:15.547Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:15.609Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:15.610Z] [LOG]    Employee ID: 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:15.611Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:15.611Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:15.749Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:15.785Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:15.785Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:15.786Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:15.786Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:15.787Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:15.923Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:15.924Z] [LOG]    Employee ID: 01440221-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:15.924Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:15.925Z] [LOG]    Base Salary: Rs.40000.00
[2025-10-17T06:03:15.965Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:15.966Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:15.966Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:15.967Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:15.967Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:15.967Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:15.968Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:03:15.968Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:03:15.969Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:15.969Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:15.969Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:03:15.970Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:15.970Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:03:15.971Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:03:15.972Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:15.972Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:15.972Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:15.973Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:15.973Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:03:15.973Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:15.974Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:15.974Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:15.974Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:15.975Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:15.975Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:15.976Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:15.976Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:15.976Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:15.977Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:15.977Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:15.977Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:15.978Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:15.978Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:15.979Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:15.979Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:15.980Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:15.980Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:15.981Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:15.981Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:15.982Z] [LOG] Regular deductions for Anoj null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:15.983Z] [LOG] Combined deductions for Anoj null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:03:16.102Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:16.103Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-17T06:03:16.103Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-17T06:03:16.104Z] [LOG]       Saturday Hourly Rate: Rs.188.24
[2025-10-17T06:03:16.104Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:16.162Z] [LOG] Creating components for record 98cee313-2fd7-4cdd-84da-d34706644a3c: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:16.164Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:03:16.297Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:16.298Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:16.298Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:16.299Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:16.299Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:16.299Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:16.300Z] [LOG]       Weekday: 17.00h × Rs.188.24 = Rs.3200.08
[2025-10-17T06:03:16.300Z] [LOG]       Saturday: 0.00h × Rs.188.24 = Rs.0.00
[2025-10-17T06:03:16.301Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:16.301Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:16.301Z] [LOG]       Total Earned Salary: Rs.3200.08
[2025-10-17T06:03:16.302Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:16.302Z] [LOG]       Base Salary: Rs.40000.00
[2025-10-17T06:03:16.303Z] [LOG]       Earned Salary: Rs.3200.08
[2025-10-17T06:03:16.303Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:16.303Z] [LOG]       Attendance Deduction: Rs.36799.92
[2025-10-17T06:03:16.304Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:16.304Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:16.305Z] [LOG]    Gross Salary: 40000
[2025-10-17T06:03:16.305Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:16.306Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:16.306Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:16.307Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:16.307Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:16.308Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:16.309Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:16.309Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:16.310Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:16.310Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:16.311Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:16.311Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:16.311Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:16.312Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:16.312Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:16.313Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:16.314Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:16.315Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:16.315Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:16.316Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:16.316Z] [LOG] Regular deductions for Maryam null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:16.317Z] [LOG] Combined deductions for Maryam null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 36799.92,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 36799.92
}
[2025-10-17T06:03:16.338Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:16.492Z] [LOG] Creating components for record 36ed6f0c-b890-4902-ab42-ef71b738678f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:16.493Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 36799.92
}
[2025-10-17T06:03:16.517Z] [LOG] Created payroll_record_component: 3435ea21-2cca-496b-9c3e-09d31dcaa539 for Attendance Deduction
[2025-10-17T06:03:16.674Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:16.856Z] [LOG] Created payroll_record_component: abb06309-6915-4cfc-991b-d1a93f02a048 for Attendance Deduction
[2025-10-17T06:03:16.864Z] [LOG] ✅ Financial balances updated successfully for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:16.865Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:16.865Z] [LOG] 
======================================================================
[2025-10-17T06:03:16.867Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Anoj null
[2025-10-17T06:03:16.867Z] [LOG] ======================================================================
[2025-10-17T06:03:16.868Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:03:16.869Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:03:16.869Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:16.869Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:16.870Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:16.870Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:16.871Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:03:16.871Z] [LOG] ======================================================================

[2025-10-17T06:03:16.872Z] [LOG] ✅ Anoj null: Calculation completed successfully
[2025-10-17T06:03:16.872Z] [LOG] 📊 Progress: 8/34 (23.5%)
[2025-10-17T06:03:16.872Z] [LOG] 
🧮 Processing: Sumaiya null (EMP000016)
[2025-10-17T06:03:16.873Z] [LOG] 📋 Record ID: d62e49f3-d160-4624-9967-198ff8096457
[2025-10-17T06:03:16.873Z] [LOG] 
======================================================================
[2025-10-17T06:03:16.874Z] [LOG] 🧮 CALCULATING PAYROLL: Sumaiya null (EMP000016)
[2025-10-17T06:03:16.874Z] [LOG] ======================================================================
[2025-10-17T06:03:17.207Z] [LOG] ✅ Financial balances updated successfully for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:17.208Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:17.208Z] [LOG] 
======================================================================
[2025-10-17T06:03:17.208Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Maryam null
[2025-10-17T06:03:17.209Z] [LOG] ======================================================================
[2025-10-17T06:03:17.209Z] [LOG]    Gross Salary: Rs.40000.00
[2025-10-17T06:03:17.210Z] [LOG]    Total Deductions: Rs.36799.92
[2025-10-17T06:03:17.210Z] [LOG]       - Attendance Deduction: Rs.36799.92
[2025-10-17T06:03:17.211Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:17.211Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:17.212Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:17.212Z] [LOG]    NET SALARY: Rs.3200.08
[2025-10-17T06:03:17.212Z] [LOG] ======================================================================

[2025-10-17T06:03:17.215Z] [LOG] ✅ Maryam null: Calculation completed successfully
[2025-10-17T06:03:17.217Z] [LOG] 📊 Progress: 4/31 (12.9%)
[2025-10-17T06:03:17.217Z] [LOG] 
🧮 Processing: Ratheeshanan null (EMP000047)
[2025-10-17T06:03:17.220Z] [LOG] 📋 Record ID: 399eafd3-f53e-4e9e-ae1d-7da452b0a514
[2025-10-17T06:03:17.220Z] [LOG] 
======================================================================
[2025-10-17T06:03:17.221Z] [LOG] 🧮 CALCULATING PAYROLL: Ratheeshanan null (EMP000047)
[2025-10-17T06:03:17.221Z] [LOG] ======================================================================
[2025-10-17T06:03:17.592Z] [LOG] 🔍 Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:17.593Z] [LOG]    Total components: 10
[2025-10-17T06:03:17.593Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:17.594Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:03:17.955Z] [LOG] 🔍 Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:17.956Z] [LOG]    Total components: 10
[2025-10-17T06:03:17.956Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:17.956Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:03:18.219Z] [LOG] session eka meka {
  "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "1d501d4a-7eb5-41d3-afa7-b92ac757f3ee",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 11:33:01",
  "is_active": 1,
  "created_at": "2025-10-17 11:18:49",
  "user_active": 1
}
[2025-10-17T06:03:18.325Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:18.325Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:18.499Z] [LOG] 📊 Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:18.707Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:18.707Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:18.708Z] [LOG] 📊 Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:18.996Z] [LOG] 📊 Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:19.008Z] [LOG] 📊 Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:19.008Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:19.009Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:19.009Z] [LOG] 💰 GROSS CALCULATION for Sumaiya null:
[2025-10-17T06:03:19.009Z] [LOG]    Base Salary: 60000
[2025-10-17T06:03:19.009Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:19.009Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:19.010Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:19.179Z] [LOG] GET /api/leaves/types - 200 - 1140ms
[2025-10-17T06:03:19.221Z] [LOG] 📊 Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:19.223Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:19.395Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:19.396Z] [LOG]    Employee ID: 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:19.397Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:19.397Z] [LOG]    Base Salary: Rs.60000.00
[2025-10-17T06:03:19.398Z] [LOG] 📊 Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:19.399Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:19.400Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:19.400Z] [LOG] 💰 GROSS CALCULATION for Ratheeshanan null:
[2025-10-17T06:03:19.400Z] [LOG]    Base Salary: 25000
[2025-10-17T06:03:19.401Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:19.401Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:19.401Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:19.584Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:19.584Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-17T06:03:19.585Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-17T06:03:19.585Z] [LOG]       Saturday Hourly Rate: Rs.282.35
[2025-10-17T06:03:19.585Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:19.586Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:19.756Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:19.757Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:19.757Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:19.758Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:19.758Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:19.758Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:19.759Z] [LOG]       Weekday: 17.00h × Rs.282.35 = Rs.4799.95
[2025-10-17T06:03:19.759Z] [LOG]       Saturday: 0.00h × Rs.282.35 = Rs.0.00
[2025-10-17T06:03:19.759Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:19.760Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:19.760Z] [LOG]       Total Earned Salary: Rs.4799.95
[2025-10-17T06:03:19.760Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:19.761Z] [LOG]       Base Salary: Rs.60000.00
[2025-10-17T06:03:19.761Z] [LOG]       Earned Salary: Rs.4799.95
[2025-10-17T06:03:19.761Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:19.762Z] [LOG]       Attendance Deduction: Rs.55200.05
[2025-10-17T06:03:19.762Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:19.764Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:19.765Z] [LOG]    Gross Salary: 60000
[2025-10-17T06:03:19.765Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:19.766Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:19.766Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:19.767Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:19.767Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:19.768Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:19.768Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:19.768Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:19.769Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:19.769Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:19.769Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:19.770Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:19.770Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:19.770Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:19.771Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:19.771Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:19.771Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:19.772Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:19.772Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:19.772Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:19.773Z] [LOG] Regular deductions for Sumaiya null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:19.773Z] [LOG] Combined deductions for Sumaiya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 55200.05,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 55200.05
}
[2025-10-17T06:03:19.775Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:19.776Z] [LOG]    Employee ID: 01444966-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:19.776Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:19.776Z] [LOG]    Base Salary: Rs.25000.00
[2025-10-17T06:03:19.951Z] [LOG] Creating components for record d62e49f3-d160-4624-9967-198ff8096457: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:19.952Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 55200.05
}
[2025-10-17T06:03:19.953Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:19.954Z] [LOG]       Daily Salary: Rs.1000.00
[2025-10-17T06:03:19.954Z] [LOG]       Weekday Hourly Rate: Rs.117.65
[2025-10-17T06:03:19.954Z] [LOG]       Saturday Hourly Rate: Rs.117.65
[2025-10-17T06:03:19.955Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:20.129Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:20.130Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:20.131Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:20.131Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:20.132Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:20.132Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:20.132Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:20.133Z] [LOG]       Weekday: 17.00h × Rs.117.65 = Rs.2000.05
[2025-10-17T06:03:20.133Z] [LOG]       Saturday: 0.00h × Rs.117.65 = Rs.0.00
[2025-10-17T06:03:20.133Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:20.134Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:20.134Z] [LOG]       Total Earned Salary: Rs.2000.05
[2025-10-17T06:03:20.134Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:20.135Z] [LOG]       Base Salary: Rs.25000.00
[2025-10-17T06:03:20.135Z] [LOG]       Earned Salary: Rs.2000.05
[2025-10-17T06:03:20.135Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:20.136Z] [LOG]       Attendance Deduction: Rs.22999.95
[2025-10-17T06:03:20.136Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:20.136Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:20.137Z] [LOG]    Gross Salary: 25000
[2025-10-17T06:03:20.137Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:20.137Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:20.138Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:20.139Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:20.139Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:20.140Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:20.140Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:20.141Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:20.141Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:20.142Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:20.142Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:20.142Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:20.143Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:20.143Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:20.143Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:20.144Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:20.144Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:20.144Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:20.145Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:20.145Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:20.145Z] [LOG] Regular deductions for Ratheeshanan null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:20.147Z] [LOG] Combined deductions for Ratheeshanan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 22999.95,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 22999.95
}
[2025-10-17T06:03:20.304Z] [LOG] Created payroll_record_component: 1bac76c6-78dc-4cfa-8835-0d17e01225ec for Attendance Deduction
[2025-10-17T06:03:20.335Z] [LOG] Creating components for record 399eafd3-f53e-4e9e-ae1d-7da452b0a514: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:20.336Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 22999.95
}
[2025-10-17T06:03:20.337Z] [LOG] session eka meka {
  "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "1d501d4a-7eb5-41d3-afa7-b92ac757f3ee",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 11:33:01",
  "is_active": 1,
  "created_at": "2025-10-17 11:18:49",
  "user_active": 1
}
[2025-10-17T06:03:20.510Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:20.649Z] [LOG] ✅ Financial balances updated successfully for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:20.649Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:20.650Z] [LOG] 
======================================================================
[2025-10-17T06:03:20.651Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sumaiya null
[2025-10-17T06:03:20.651Z] [LOG] ======================================================================
[2025-10-17T06:03:20.652Z] [LOG]    Gross Salary: Rs.60000.00
[2025-10-17T06:03:20.653Z] [LOG]    Total Deductions: Rs.55200.05
[2025-10-17T06:03:20.653Z] [LOG]       - Attendance Deduction: Rs.55200.05
[2025-10-17T06:03:20.654Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:20.654Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:20.655Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:20.656Z] [LOG]    NET SALARY: Rs.4799.95
[2025-10-17T06:03:20.657Z] [LOG] ======================================================================

[2025-10-17T06:03:20.657Z] [LOG] ✅ Sumaiya null: Calculation completed successfully
[2025-10-17T06:03:20.658Z] [LOG] 📊 Progress: 9/34 (26.5%)
[2025-10-17T06:03:20.658Z] [LOG] 
🧮 Processing: Hari null (EMP000017)
[2025-10-17T06:03:20.660Z] [LOG] 📋 Record ID: 3cd6d52c-00e7-4e61-bd3f-e1445bbb1056
[2025-10-17T06:03:20.662Z] [LOG] 
======================================================================
[2025-10-17T06:03:20.663Z] [LOG] 🧮 CALCULATING PAYROLL: Hari null (EMP000017)
[2025-10-17T06:03:20.665Z] [LOG] ======================================================================
[2025-10-17T06:03:20.693Z] [LOG] Created payroll_record_component: 096124ba-b2a6-4996-b2b5-80172824c80e for Attendance Deduction
[2025-10-17T06:03:20.726Z] [LOG] session eka meka {
  "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "1d501d4a-7eb5-41d3-afa7-b92ac757f3ee",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 11:33:01",
  "is_active": 1,
  "created_at": "2025-10-17 11:18:49",
  "user_active": 1
}
[2025-10-17T06:03:20.729Z] [LOG] session eka meka {
  "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "1d501d4a-7eb5-41d3-afa7-b92ac757f3ee",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 11:33:01",
  "is_active": 1,
  "created_at": "2025-10-17 11:18:49",
  "user_active": 1
}
[2025-10-17T06:03:21.041Z] [LOG] ✅ Financial balances updated successfully for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:21.042Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:21.042Z] [LOG] 
======================================================================
[2025-10-17T06:03:21.043Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ratheeshanan null
[2025-10-17T06:03:21.044Z] [LOG] ======================================================================
[2025-10-17T06:03:21.045Z] [LOG]    Gross Salary: Rs.25000.00
[2025-10-17T06:03:21.045Z] [LOG]    Total Deductions: Rs.22999.95
[2025-10-17T06:03:21.046Z] [LOG]       - Attendance Deduction: Rs.22999.95
[2025-10-17T06:03:21.048Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:21.049Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:21.050Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:21.051Z] [LOG]    NET SALARY: Rs.2000.05
[2025-10-17T06:03:21.052Z] [LOG] ======================================================================

[2025-10-17T06:03:21.052Z] [LOG] ✅ Ratheeshanan null: Calculation completed successfully
[2025-10-17T06:03:21.053Z] [LOG] 📊 Progress: 5/31 (16.1%)
[2025-10-17T06:03:21.054Z] [LOG] 
🧮 Processing: Safna Nawas null (EMP000021)
[2025-10-17T06:03:21.055Z] [LOG] 📋 Record ID: 3c2f2940-bb35-4f7c-a517-87308efb4d7f
[2025-10-17T06:03:21.056Z] [LOG] 
======================================================================
[2025-10-17T06:03:21.057Z] [LOG] 🧮 CALCULATING PAYROLL: Safna Nawas null (EMP000021)
[2025-10-17T06:03:21.058Z] [LOG] ======================================================================
[2025-10-17T06:03:21.364Z] [LOG] 🔍 Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:21.365Z] [LOG]    Total components: 10
[2025-10-17T06:03:21.365Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:21.365Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:03:21.782Z] [LOG] 🔍 Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:21.783Z] [LOG]    Total components: 10
[2025-10-17T06:03:21.783Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:21.784Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:03:22.133Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:22.133Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:22.312Z] [LOG] 📊 Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:22.486Z] [LOG] 📊 Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:22.489Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:22.490Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:22.659Z] [LOG] 📊 Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:22.660Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:22.661Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:22.662Z] [LOG] 💰 GROSS CALCULATION for Hari null:
[2025-10-17T06:03:22.663Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:22.664Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:22.665Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:22.666Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:22.668Z] [LOG] 📊 Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:22.671Z] [LOG] GET /api/leaves/dashboard - 304 - 4626ms
[2025-10-17T06:03:22.784Z] [LOG] GET /api/leaves/requests?status=&startDate=&endDate= - 200 - 4734ms
[2025-10-17T06:03:22.791Z] [LOG] GET /api/leaves/requests - 200 - 4749ms
[2025-10-17T06:03:22.859Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:22.860Z] [LOG] 📊 Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:23.020Z] [LOG] session eka meka {
  "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "1d501d4a-7eb5-41d3-afa7-b92ac757f3ee",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 11:33:01",
  "is_active": 1,
  "created_at": "2025-10-17 11:18:49",
  "user_active": 1
}
[2025-10-17T06:03:23.030Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:23.031Z] [LOG]    Employee ID: 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:23.033Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:23.034Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:23.036Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:23.037Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:23.039Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:23.042Z] [LOG] 💰 GROSS CALCULATION for Safna Nawas null:
[2025-10-17T06:03:23.043Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:23.043Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:23.044Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:23.045Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.242Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:23.244Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:23.245Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:23.245Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:23.246Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:23.248Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:23.418Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:23.419Z] [LOG]    Employee ID: 0143c977-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:23.420Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:23.420Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:23.595Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:23.597Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:23.598Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:23.599Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:23.599Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:23.737Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:23.737Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:23.738Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:23.739Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:23.739Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:23.740Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:23.741Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:03:23.741Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:03:23.742Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:23.742Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:23.743Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:03:23.744Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:23.745Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:03:23.746Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:03:23.750Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:23.752Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:23.752Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:23.753Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:23.754Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:03:23.754Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:23.755Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:23.755Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.756Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:23.757Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.758Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:23.758Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.759Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:23.759Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.760Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:23.760Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.761Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:23.762Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.762Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:23.766Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.768Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:23.769Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.770Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:23.771Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.772Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:23.772Z] [LOG] Regular deductions for Hari null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:23.774Z] [LOG] Combined deductions for Hari null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:03:23.777Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:23.777Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:23.777Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:23.777Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:23.778Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:23.778Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:23.778Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:03:23.779Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:03:23.779Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:23.781Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:23.781Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:03:23.781Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:23.782Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:03:23.782Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:03:23.783Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:23.783Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:23.783Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:23.784Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:23.784Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:03:23.785Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:23.785Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:23.785Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.785Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:23.786Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.786Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:23.786Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.787Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:23.787Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.787Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:23.787Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.788Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:23.788Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.788Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:23.788Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.788Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:23.789Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.789Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:23.789Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:23.789Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:23.790Z] [LOG] Regular deductions for Safna Nawas null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:23.790Z] [LOG] Combined deductions for Safna Nawas null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:03:23.951Z] [LOG] Creating components for record 3cd6d52c-00e7-4e61-bd3f-e1445bbb1056: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:23.953Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:03:23.964Z] [LOG] Creating components for record 3c2f2940-bb35-4f7c-a517-87308efb4d7f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:23.968Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:03:24.048Z] [LOG] GET /api/leaves/requests?status=&startDate=&endDate= - 304 - 1262ms
[2025-10-17T06:03:24.129Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:24.145Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:24.304Z] [LOG] Created payroll_record_component: 30dbc730-3285-4856-bbb9-80f4c9e2dcda for Attendance Deduction
[2025-10-17T06:03:24.307Z] [LOG] session eka meka {
  "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "1d501d4a-7eb5-41d3-afa7-b92ac757f3ee",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 11:33:01",
  "is_active": 1,
  "created_at": "2025-10-17 11:18:49",
  "user_active": 1
}
[2025-10-17T06:03:24.324Z] [LOG] Created payroll_record_component: 5ced986a-58cf-4ae5-8e8b-cd08626c6956 for Attendance Deduction
[2025-10-17T06:03:24.656Z] [LOG] ✅ Financial balances updated successfully for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:24.656Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:24.657Z] [LOG] 
======================================================================
[2025-10-17T06:03:24.658Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Hari null
[2025-10-17T06:03:24.658Z] [LOG] ======================================================================
[2025-10-17T06:03:24.659Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:03:24.660Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:03:24.660Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:24.661Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:24.661Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:24.662Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:24.663Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:03:24.664Z] [LOG] ======================================================================

[2025-10-17T06:03:24.664Z] [LOG] ✅ Hari null: Calculation completed successfully
[2025-10-17T06:03:24.665Z] [LOG] 📊 Progress: 10/34 (29.4%)
[2025-10-17T06:03:24.666Z] [LOG] 
🧮 Processing: Franklin null (EMP000018)
[2025-10-17T06:03:24.668Z] [LOG] 📋 Record ID: 401bd2ce-026c-4cb8-b172-7933b5fd1e99
[2025-10-17T06:03:24.669Z] [LOG] 
======================================================================
[2025-10-17T06:03:24.670Z] [LOG] 🧮 CALCULATING PAYROLL: Franklin null (EMP000018)
[2025-10-17T06:03:24.671Z] [LOG] ======================================================================
[2025-10-17T06:03:24.672Z] [LOG] ✅ Financial balances updated successfully for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:24.673Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:24.673Z] [LOG] 
======================================================================
[2025-10-17T06:03:24.674Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Safna Nawas null
[2025-10-17T06:03:24.675Z] [LOG] ======================================================================
[2025-10-17T06:03:24.676Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:03:24.676Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:03:24.677Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:24.677Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:24.678Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:24.679Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:24.680Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:03:24.681Z] [LOG] ======================================================================

[2025-10-17T06:03:24.682Z] [LOG] ✅ Safna Nawas null: Calculation completed successfully
[2025-10-17T06:03:24.685Z] [LOG] 📊 Progress: 6/31 (19.4%)
[2025-10-17T06:03:24.687Z] [LOG] 
🧮 Processing: Hari null (EMP000017)
[2025-10-17T06:03:24.688Z] [LOG] 📋 Record ID: 3cd6d52c-00e7-4e61-bd3f-e1445bbb1056
[2025-10-17T06:03:24.689Z] [LOG] 
======================================================================
[2025-10-17T06:03:24.689Z] [LOG] 🧮 CALCULATING PAYROLL: Hari null (EMP000017)
[2025-10-17T06:03:24.690Z] [LOG] ======================================================================
[2025-10-17T06:03:25.251Z] [LOG] GET /api/leaves/requests?status=&startDate=&endDate= - 304 - 1200ms
[2025-10-17T06:03:25.361Z] [LOG] 🔍 Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:25.361Z] [LOG]    Total components: 10
[2025-10-17T06:03:25.362Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:25.362Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-17T06:03:25.401Z] [LOG] 🔍 Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:25.402Z] [LOG]    Total components: 10
[2025-10-17T06:03:25.402Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:25.402Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:03:26.061Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:26.062Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:26.104Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:26.105Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:26.237Z] [LOG] 📊 Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:26.286Z] [LOG] 📊 Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:26.410Z] [LOG] 📊 Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:26.419Z] [LOG] session eka meka {
  "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "1d501d4a-7eb5-41d3-afa7-b92ac757f3ee",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 11:33:01",
  "is_active": 1,
  "created_at": "2025-10-17 11:18:49",
  "user_active": 1
}
[2025-10-17T06:03:26.464Z] [LOG] 📊 Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:26.586Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:26.586Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:26.587Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:26.587Z] [LOG] 💰 GROSS CALCULATION for Franklin null:
[2025-10-17T06:03:26.588Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:26.588Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:26.588Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:26.589Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:26.638Z] [LOG] 📊 Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:26.639Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:26.640Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:26.641Z] [LOG] 💰 GROSS CALCULATION for Hari null:
[2025-10-17T06:03:26.641Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:26.642Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:26.642Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:26.645Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:26.762Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:26.819Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:26.937Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:26.938Z] [LOG]    Employee ID: 0143c037-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:26.939Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:26.939Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:26.993Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:26.993Z] [LOG]    Employee ID: 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:26.994Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:26.995Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:27.115Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:27.116Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:27.116Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:27.117Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:27.118Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:27.171Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:27.172Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:27.173Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:27.173Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:27.174Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:27.294Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:27.295Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:27.295Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:27.296Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:27.298Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:27.298Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:27.299Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:03:27.300Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:03:27.300Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:27.301Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:27.302Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:03:27.303Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:27.303Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:03:27.304Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:03:27.304Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:27.305Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:27.306Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:27.307Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:27.308Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:03:27.309Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:27.310Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:27.310Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.311Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:27.311Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.312Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:27.315Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.315Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:27.316Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.316Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:27.317Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.317Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:27.318Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.318Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:27.319Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.319Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:27.320Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.320Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:27.321Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.321Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:27.321Z] [LOG] Regular deductions for Franklin null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:27.322Z] [LOG] Combined deductions for Franklin null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:03:27.348Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:27.349Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:27.349Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:27.350Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:27.350Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:27.351Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:27.351Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:03:27.352Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:03:27.352Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:27.352Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:27.353Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:03:27.353Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:27.354Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:03:27.354Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:03:27.354Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:27.355Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:27.355Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:27.355Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:27.356Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:03:27.356Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:27.357Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:27.357Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.357Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:27.358Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.358Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:27.358Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.359Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:27.359Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.360Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:27.360Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.360Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:27.361Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.361Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:27.361Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.362Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:27.362Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.362Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:27.363Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:27.364Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:27.365Z] [LOG] Regular deductions for Hari null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:27.365Z] [LOG] Combined deductions for Hari null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:03:27.370Z] [LOG] GET /api/leaves/requests?status=&startDate=&endDate= - 304 - 1186ms
[2025-10-17T06:03:27.499Z] [LOG] Creating components for record 401bd2ce-026c-4cb8-b172-7933b5fd1e99: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:27.500Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:03:27.543Z] [LOG] Creating components for record 3cd6d52c-00e7-4e61-bd3f-e1445bbb1056: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:27.545Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:03:27.675Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:27.719Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:27.849Z] [LOG] Created payroll_record_component: c55b5be6-d145-4271-84e5-0c453b5c67d9 for Attendance Deduction
[2025-10-17T06:03:27.894Z] [LOG] Created payroll_record_component: 0e319289-88f5-427e-917e-09dc942c109f for Attendance Deduction
[2025-10-17T06:03:28.195Z] [LOG] ✅ Financial balances updated successfully for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:28.196Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:28.196Z] [LOG] 
======================================================================
[2025-10-17T06:03:28.197Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Franklin null
[2025-10-17T06:03:28.197Z] [LOG] ======================================================================
[2025-10-17T06:03:28.198Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:03:28.199Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:03:28.199Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:28.200Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:28.201Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:28.201Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:28.202Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:03:28.203Z] [LOG] ======================================================================

[2025-10-17T06:03:28.204Z] [LOG] ✅ Franklin null: Calculation completed successfully
[2025-10-17T06:03:28.204Z] [LOG] 📊 Progress: 11/34 (32.4%)
[2025-10-17T06:03:28.205Z] [LOG] 
🧮 Processing: Safna Nawas null (EMP000021)
[2025-10-17T06:03:28.206Z] [LOG] 📋 Record ID: 3c2f2940-bb35-4f7c-a517-87308efb4d7f
[2025-10-17T06:03:28.206Z] [LOG] 
======================================================================
[2025-10-17T06:03:28.208Z] [LOG] 🧮 CALCULATING PAYROLL: Safna Nawas null (EMP000021)
[2025-10-17T06:03:28.210Z] [LOG] ======================================================================
[2025-10-17T06:03:28.245Z] [LOG] ✅ Financial balances updated successfully for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:28.246Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:28.247Z] [LOG] 
======================================================================
[2025-10-17T06:03:28.248Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Hari null
[2025-10-17T06:03:28.249Z] [LOG] ======================================================================
[2025-10-17T06:03:28.249Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:03:28.250Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:03:28.251Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:28.252Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:28.253Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:28.254Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:28.255Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:03:28.255Z] [LOG] ======================================================================

[2025-10-17T06:03:28.256Z] [LOG] ✅ Hari null: Calculation completed successfully
[2025-10-17T06:03:28.257Z] [LOG] 📊 Progress: 7/31 (22.6%)
[2025-10-17T06:03:28.257Z] [LOG] 
🧮 Processing: Franklin null (EMP000018)
[2025-10-17T06:03:28.258Z] [LOG] 📋 Record ID: 401bd2ce-026c-4cb8-b172-7933b5fd1e99
[2025-10-17T06:03:28.258Z] [LOG] 
======================================================================
[2025-10-17T06:03:28.259Z] [LOG] 🧮 CALCULATING PAYROLL: Franklin null (EMP000018)
[2025-10-17T06:03:28.260Z] [LOG] ======================================================================
[2025-10-17T06:03:28.966Z] [LOG] 🔍 Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:28.966Z] [LOG]    Total components: 10
[2025-10-17T06:03:28.966Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:28.967Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:03:28.980Z] [LOG] 🔍 Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:28.980Z] [LOG]    Total components: 10
[2025-10-17T06:03:28.980Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:28.981Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-17T06:03:29.289Z] [LOG] session eka meka {
  "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "1d501d4a-7eb5-41d3-afa7-b92ac757f3ee",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 11:33:01",
  "is_active": 1,
  "created_at": "2025-10-17 11:18:49",
  "user_active": 1
}
[2025-10-17T06:03:29.660Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:29.661Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:29.689Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:29.690Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:29.834Z] [LOG] 📊 Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:29.864Z] [LOG] 📊 Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:30.010Z] [LOG] 📊 Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:30.039Z] [LOG] 📊 Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:30.183Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:30.184Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:30.185Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:30.186Z] [LOG] 💰 GROSS CALCULATION for Safna Nawas null:
[2025-10-17T06:03:30.187Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:30.187Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:30.188Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:30.188Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.216Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:30.217Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:30.218Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:30.219Z] [LOG] 💰 GROSS CALCULATION for Franklin null:
[2025-10-17T06:03:30.219Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:30.220Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:30.221Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:30.221Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.366Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:30.397Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:30.540Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:30.541Z] [LOG]    Employee ID: 0143c977-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:30.541Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:30.542Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:30.571Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:30.572Z] [LOG]    Employee ID: 0143c037-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:30.572Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:30.573Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:30.716Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:30.717Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:30.718Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:30.718Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:30.719Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:30.746Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:30.748Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:30.749Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:30.749Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:30.750Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:30.904Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:30.905Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:30.906Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:30.906Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:30.907Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:30.907Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:30.908Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:03:30.909Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:03:30.909Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:30.910Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:30.911Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:03:30.912Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:30.914Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:03:30.917Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:03:30.918Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:30.919Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:30.920Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:30.920Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:30.921Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:03:30.922Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:30.922Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:30.923Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.924Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:30.924Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.925Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:30.925Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.926Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:30.926Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.927Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:30.928Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.928Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:30.929Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.932Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:30.933Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.934Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:30.936Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.936Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:30.937Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.938Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:30.938Z] [LOG] Regular deductions for Safna Nawas null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:30.939Z] [LOG] Combined deductions for Safna Nawas null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:03:30.944Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:30.945Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:30.945Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:30.945Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:30.946Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:30.948Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:30.948Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:03:30.949Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:03:30.949Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:30.950Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:30.950Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:03:30.951Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:30.951Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:03:30.951Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:03:30.952Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:30.952Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:30.952Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:30.953Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:30.953Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:03:30.954Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:30.954Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:30.954Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.954Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:30.955Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.955Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:30.955Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.956Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:30.956Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.956Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:30.957Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.957Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:30.957Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.958Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:30.958Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.958Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:30.959Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.959Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:30.959Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:30.959Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:30.960Z] [LOG] Regular deductions for Franklin null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:30.960Z] [LOG] Combined deductions for Franklin null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:03:31.119Z] [LOG] Creating components for record 3c2f2940-bb35-4f7c-a517-87308efb4d7f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:31.121Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:03:31.138Z] [LOG] Creating components for record 401bd2ce-026c-4cb8-b172-7933b5fd1e99: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:31.140Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:03:31.294Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:31.314Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:31.483Z] [LOG] Created payroll_record_component: 77be4f90-23b6-441b-9593-ecf09cf97575 for Attendance Deduction
[2025-10-17T06:03:31.492Z] [LOG] Created payroll_record_component: 33324356-242c-4756-94fc-3ff1315764b5 for Attendance Deduction
[2025-10-17T06:03:31.670Z] [LOG] GET /api/leaves/dashboard - 304 - 2618ms
[2025-10-17T06:03:31.849Z] [LOG] ✅ Financial balances updated successfully for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:31.849Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:31.850Z] [LOG] 
======================================================================
[2025-10-17T06:03:31.850Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Safna Nawas null
[2025-10-17T06:03:31.851Z] [LOG] ======================================================================
[2025-10-17T06:03:31.852Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:03:31.852Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:03:31.853Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:31.854Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:31.854Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:31.855Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:31.856Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:03:31.857Z] [LOG] ======================================================================

[2025-10-17T06:03:31.857Z] [LOG] ✅ Safna Nawas null: Calculation completed successfully
[2025-10-17T06:03:31.858Z] [LOG] 📊 Progress: 12/34 (35.3%)
[2025-10-17T06:03:31.859Z] [LOG] 
🧮 Processing: Saru null (EMP000022)
[2025-10-17T06:03:31.860Z] [LOG] 📋 Record ID: 29c100b6-dd8d-4267-bb08-41477b5b7e45
[2025-10-17T06:03:31.862Z] [LOG] 
======================================================================
[2025-10-17T06:03:31.863Z] [LOG] 🧮 CALCULATING PAYROLL: Saru null (EMP000022)
[2025-10-17T06:03:31.864Z] [LOG] ======================================================================
[2025-10-17T06:03:31.866Z] [LOG] ✅ Financial balances updated successfully for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:31.866Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:31.867Z] [LOG] 
======================================================================
[2025-10-17T06:03:31.869Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Franklin null
[2025-10-17T06:03:31.870Z] [LOG] ======================================================================
[2025-10-17T06:03:31.871Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:03:31.871Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:03:31.872Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:31.872Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:31.873Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:31.874Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:31.874Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:03:31.875Z] [LOG] ======================================================================

[2025-10-17T06:03:31.875Z] [LOG] ✅ Franklin null: Calculation completed successfully
[2025-10-17T06:03:31.876Z] [LOG] 📊 Progress: 8/31 (25.8%)
[2025-10-17T06:03:31.876Z] [LOG] 
🧮 Processing: Jessie null (EMP000013)
[2025-10-17T06:03:31.876Z] [LOG] 📋 Record ID: 4a015e9b-e7f6-494a-bbc4-3d5c0c801ccc
[2025-10-17T06:03:31.877Z] [LOG] 
======================================================================
[2025-10-17T06:03:31.877Z] [LOG] 🧮 CALCULATING PAYROLL: Jessie null (EMP000013)
[2025-10-17T06:03:31.877Z] [LOG] ======================================================================
[2025-10-17T06:03:32.554Z] [LOG] 🔍 Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:32.554Z] [LOG]    Total components: 10
[2025-10-17T06:03:32.555Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:32.556Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:03:32.619Z] [LOG] 🔍 Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:32.619Z] [LOG]    Total components: 10
[2025-10-17T06:03:32.620Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:32.621Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:03:33.252Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:33.252Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:33.315Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:33.316Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:33.425Z] [LOG] 📊 Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:33.491Z] [LOG] 📊 Found 0 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:33.623Z] [LOG] 📊 Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:33.668Z] [LOG] 📊 Found 0 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:33.797Z] [LOG] 📊 Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:33.797Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:33.798Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:33.799Z] [LOG] 💰 GROSS CALCULATION for Saru null:
[2025-10-17T06:03:33.800Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:33.800Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:33.801Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:33.801Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:33.850Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:33.851Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:33.852Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:33.853Z] [LOG] 💰 GROSS CALCULATION for Jessie null:
[2025-10-17T06:03:33.854Z] [LOG]    Base Salary: 60000
[2025-10-17T06:03:33.854Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:33.855Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:33.855Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:33.976Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:34.028Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:34.150Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:34.151Z] [LOG]    Employee ID: 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:34.151Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:34.152Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:34.202Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:34.203Z] [LOG]    Employee ID: 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:34.204Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:34.204Z] [LOG]    Base Salary: Rs.60000.00
[2025-10-17T06:03:34.324Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:34.325Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:34.326Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:34.326Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:34.327Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:34.376Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:34.378Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-17T06:03:34.379Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-17T06:03:34.381Z] [LOG]       Saturday Hourly Rate: Rs.282.35
[2025-10-17T06:03:34.381Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:34.501Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:34.501Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:34.502Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:34.503Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:34.503Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:34.504Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:34.504Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:03:34.505Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:03:34.506Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:34.506Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:34.507Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:03:34.508Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:34.509Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:03:34.510Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:03:34.510Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:34.511Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:34.511Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:34.512Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:34.516Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:03:34.517Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:34.517Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:34.518Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.518Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:34.519Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.520Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:34.520Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.521Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:34.522Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.523Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:34.523Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.524Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:34.525Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.525Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:34.526Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.527Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:34.527Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.528Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:34.528Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.529Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:34.533Z] [LOG] Regular deductions for Saru null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:34.535Z] [LOG] Combined deductions for Saru null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:03:34.556Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:34.557Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:34.557Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:34.557Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:34.558Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:34.558Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:34.558Z] [LOG]       Weekday: 17.00h × Rs.282.35 = Rs.4799.95
[2025-10-17T06:03:34.558Z] [LOG]       Saturday: 0.00h × Rs.282.35 = Rs.0.00
[2025-10-17T06:03:34.559Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:34.559Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:34.559Z] [LOG]       Total Earned Salary: Rs.4799.95
[2025-10-17T06:03:34.560Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:34.560Z] [LOG]       Base Salary: Rs.60000.00
[2025-10-17T06:03:34.560Z] [LOG]       Earned Salary: Rs.4799.95
[2025-10-17T06:03:34.560Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:34.561Z] [LOG]       Attendance Deduction: Rs.55200.05
[2025-10-17T06:03:34.561Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:34.561Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:34.561Z] [LOG]    Gross Salary: 60000
[2025-10-17T06:03:34.562Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:34.562Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:34.562Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.564Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:34.565Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.565Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:34.565Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.566Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:34.566Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.566Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:34.567Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.567Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:34.567Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.568Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:34.568Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.568Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:34.568Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.569Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:34.569Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:34.569Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:34.570Z] [LOG] Regular deductions for Jessie null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:34.570Z] [LOG] Combined deductions for Jessie null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 55200.05,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 55200.05
}
[2025-10-17T06:03:34.721Z] [LOG] Creating components for record 29c100b6-dd8d-4267-bb08-41477b5b7e45: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:34.722Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:03:34.745Z] [LOG] Creating components for record 4a015e9b-e7f6-494a-bbc4-3d5c0c801ccc: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:34.746Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 55200.05
}
[2025-10-17T06:03:34.898Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:34.921Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:35.097Z] [LOG] Created payroll_record_component: e94c8c7d-c566-404c-84d8-ff25221de401 for Attendance Deduction
[2025-10-17T06:03:35.098Z] [LOG] Created payroll_record_component: fe0ec82c-eba9-4373-ba5e-8f59ca26073c for Attendance Deduction
[2025-10-17T06:03:35.557Z] [LOG] ✅ Financial balances updated successfully for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:35.558Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:35.559Z] [LOG] 
======================================================================
[2025-10-17T06:03:35.559Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Jessie null
[2025-10-17T06:03:35.560Z] [LOG] ======================================================================
[2025-10-17T06:03:35.560Z] [LOG]    Gross Salary: Rs.60000.00
[2025-10-17T06:03:35.561Z] [LOG]    Total Deductions: Rs.55200.05
[2025-10-17T06:03:35.562Z] [LOG]       - Attendance Deduction: Rs.55200.05
[2025-10-17T06:03:35.562Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:35.565Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:35.565Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:35.566Z] [LOG]    NET SALARY: Rs.4799.95
[2025-10-17T06:03:35.567Z] [LOG] ======================================================================

[2025-10-17T06:03:35.567Z] [LOG] ✅ Jessie null: Calculation completed successfully
[2025-10-17T06:03:35.568Z] [LOG] 📊 Progress: 9/31 (29.0%)
[2025-10-17T06:03:35.569Z] [LOG] 
🧮 Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-17T06:03:35.572Z] [LOG] 📋 Record ID: 4a3f1c38-6e44-4b8b-862e-66a46e235425
[2025-10-17T06:03:35.574Z] [LOG] 
======================================================================
[2025-10-17T06:03:35.575Z] [LOG] 🧮 CALCULATING PAYROLL: Ruvindu Hewabandu null (EMP000027)
[2025-10-17T06:03:35.576Z] [LOG] ======================================================================
[2025-10-17T06:03:35.905Z] [LOG] ✅ Financial balances updated successfully for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:35.906Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:35.907Z] [LOG] 
======================================================================
[2025-10-17T06:03:35.907Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saru null
[2025-10-17T06:03:35.908Z] [LOG] ======================================================================
[2025-10-17T06:03:35.909Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:03:35.909Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:03:35.910Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:35.910Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:35.911Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:35.912Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:35.913Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:03:35.914Z] [LOG] ======================================================================

[2025-10-17T06:03:35.917Z] [LOG] ✅ Saru null: Calculation completed successfully
[2025-10-17T06:03:35.918Z] [LOG] 📊 Progress: 13/34 (38.2%)
[2025-10-17T06:03:35.919Z] [LOG] 
🧮 Processing: Ammaar Ilham (EMP000023)
[2025-10-17T06:03:35.920Z] [LOG] 📋 Record ID: b3e8f49f-3b1c-4bf3-a51f-e32c1e1e36d5
[2025-10-17T06:03:35.920Z] [LOG] 
======================================================================
[2025-10-17T06:03:35.921Z] [LOG] 🧮 CALCULATING PAYROLL: Ammaar Ilham (EMP000023)
[2025-10-17T06:03:35.922Z] [LOG] ======================================================================
[2025-10-17T06:03:36.272Z] [LOG] 🔍 Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:36.273Z] [LOG]    Total components: 10
[2025-10-17T06:03:36.273Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:36.274Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T06:03:36.616Z] [LOG] 🔍 Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:36.617Z] [LOG]    Total components: 10
[2025-10-17T06:03:36.617Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:36.617Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:03:36.970Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:36.971Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:37.146Z] [LOG] 📊 Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:37.319Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:37.320Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:37.322Z] [LOG] 📊 Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:37.494Z] [LOG] 📊 Found 0 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:37.495Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:37.496Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:37.497Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:37.498Z] [LOG] 💰 GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-17T06:03:37.498Z] [LOG]    Base Salary: 0
[2025-10-17T06:03:37.499Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:37.500Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:37.501Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:37.666Z] [LOG] 📊 Found 0 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:37.674Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:37.838Z] [LOG] 📊 Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:37.839Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:37.840Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:37.841Z] [LOG] 💰 GROSS CALCULATION for Ammaar Ilham:
[2025-10-17T06:03:37.841Z] [LOG]    Base Salary: 70000
[2025-10-17T06:03:37.842Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:37.843Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:37.843Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:37.850Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:37.851Z] [LOG]    Employee ID: 0143e915-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:37.852Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:37.853Z] [LOG]    Base Salary: Rs.0.00
[2025-10-17T06:03:38.021Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:38.027Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:38.028Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-17T06:03:38.028Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-17T06:03:38.029Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-17T06:03:38.030Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:38.196Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:38.197Z] [LOG]    Employee ID: 0143de00-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:38.197Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:38.198Z] [LOG]    Base Salary: Rs.70000.00
[2025-10-17T06:03:38.202Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:38.203Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:38.204Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:38.204Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:38.205Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:38.206Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:38.207Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:38.207Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:38.208Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:38.209Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:38.211Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T06:03:38.211Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:38.212Z] [LOG]       Base Salary: Rs.0.00
[2025-10-17T06:03:38.213Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T06:03:38.214Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:38.215Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-17T06:03:38.215Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-17T06:03:38.216Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:38.218Z] [LOG]    Gross Salary: 0
[2025-10-17T06:03:38.219Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:38.219Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:38.220Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.221Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:38.221Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.222Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:38.223Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.223Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:38.224Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.225Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:38.225Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.226Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:38.226Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.227Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:38.228Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.228Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:38.229Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.230Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:38.231Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.231Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:38.232Z] [LOG] Regular deductions for Ruvindu Hewabandu null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:38.233Z] [LOG] Combined deductions for Ruvindu Hewabandu null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 0
}
[2025-10-17T06:03:38.397Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:38.398Z] [LOG]       Daily Salary: Rs.2800.00
[2025-10-17T06:03:38.398Z] [LOG]       Weekday Hourly Rate: Rs.329.41
[2025-10-17T06:03:38.399Z] [LOG]       Saturday Hourly Rate: Rs.329.41
[2025-10-17T06:03:38.400Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:38.412Z] [LOG] Creating components for record 4a3f1c38-6e44-4b8b-862e-66a46e235425: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:38.415Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-17T06:03:38.574Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:38.574Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:38.575Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:38.575Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:38.576Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:38.577Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:38.577Z] [LOG]       Weekday: 17.00h × Rs.329.41 = Rs.5599.97
[2025-10-17T06:03:38.578Z] [LOG]       Saturday: 0.00h × Rs.329.41 = Rs.0.00
[2025-10-17T06:03:38.579Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:38.579Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:38.580Z] [LOG]       Total Earned Salary: Rs.5599.97
[2025-10-17T06:03:38.581Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:38.582Z] [LOG]       Base Salary: Rs.70000.00
[2025-10-17T06:03:38.582Z] [LOG]       Earned Salary: Rs.5599.97
[2025-10-17T06:03:38.583Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:38.584Z] [LOG]       Attendance Deduction: Rs.64400.03
[2025-10-17T06:03:38.584Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:38.585Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:38.587Z] [LOG]    Gross Salary: 70000
[2025-10-17T06:03:38.588Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:38.588Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:38.589Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.590Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:38.590Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.591Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:38.592Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.592Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:38.593Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.593Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:38.594Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.594Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:38.595Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.595Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:38.596Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.597Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:38.597Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.597Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:38.598Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:38.598Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:38.599Z] [LOG] Regular deductions for Ammaar Ilham: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:38.600Z] [LOG] Combined deductions for Ammaar Ilham: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 64400.03,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 64400.03
}
[2025-10-17T06:03:38.603Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:38.777Z] [LOG] Creating components for record b3e8f49f-3b1c-4bf3-a51f-e32c1e1e36d5: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:38.779Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 64400.03
}
[2025-10-17T06:03:38.781Z] [LOG] Created payroll_record_component: 191e6ea5-c05e-4661-9e1a-200a8b5ce9fd for Attendance Deduction
[2025-10-17T06:03:38.955Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:39.127Z] [LOG] ✅ Financial balances updated successfully for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:39.128Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:39.128Z] [LOG] 
======================================================================
[2025-10-17T06:03:39.129Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ruvindu Hewabandu null
[2025-10-17T06:03:39.130Z] [LOG] ======================================================================
[2025-10-17T06:03:39.130Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-17T06:03:39.131Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-17T06:03:39.131Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-17T06:03:39.132Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:39.132Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:39.133Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:39.134Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T06:03:39.135Z] [LOG] ======================================================================

[2025-10-17T06:03:39.135Z] [LOG] ✅ Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-17T06:03:39.136Z] [LOG] 📊 Progress: 10/31 (32.3%)
[2025-10-17T06:03:39.137Z] [LOG] 
🧮 Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-17T06:03:39.138Z] [LOG] 📋 Record ID: 4c199a6f-c0c7-4d18-884b-b8732bfefcdb
[2025-10-17T06:03:39.138Z] [LOG] 
======================================================================
[2025-10-17T06:03:39.141Z] [LOG] 🧮 CALCULATING PAYROLL: Viruna Damsiha Cooray null (EMP000038)
[2025-10-17T06:03:39.142Z] [LOG] ======================================================================
[2025-10-17T06:03:39.143Z] [LOG] Created payroll_record_component: 710f99fb-cbc8-4b2f-8c1c-fb61bde0a9fe for Attendance Deduction
[2025-10-17T06:03:39.489Z] [LOG] ✅ Financial balances updated successfully for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:39.490Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:39.490Z] [LOG] 
======================================================================
[2025-10-17T06:03:39.491Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ammaar Ilham
[2025-10-17T06:03:39.492Z] [LOG] ======================================================================
[2025-10-17T06:03:39.492Z] [LOG]    Gross Salary: Rs.70000.00
[2025-10-17T06:03:39.493Z] [LOG]    Total Deductions: Rs.64400.03
[2025-10-17T06:03:39.493Z] [LOG]       - Attendance Deduction: Rs.64400.03
[2025-10-17T06:03:39.494Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:39.495Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:39.496Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:39.496Z] [LOG]    NET SALARY: Rs.5599.97
[2025-10-17T06:03:39.497Z] [LOG] ======================================================================

[2025-10-17T06:03:39.498Z] [LOG] ✅ Ammaar Ilham: Calculation completed successfully
[2025-10-17T06:03:39.498Z] [LOG] 📊 Progress: 14/34 (41.2%)
[2025-10-17T06:03:39.499Z] [LOG] 
🧮 Processing: Waruni null (EMP000024)
[2025-10-17T06:03:39.500Z] [LOG] 📋 Record ID: f9c63ea3-fe23-462a-8754-f6d5541b074e
[2025-10-17T06:03:39.501Z] [LOG] 
======================================================================
[2025-10-17T06:03:39.502Z] [LOG] 🧮 CALCULATING PAYROLL: Waruni null (EMP000024)
[2025-10-17T06:03:39.504Z] [LOG] ======================================================================
[2025-10-17T06:03:39.841Z] [LOG] 🔍 Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:39.842Z] [LOG]    Total components: 10
[2025-10-17T06:03:39.843Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:39.843Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:03:40.206Z] [LOG] 🔍 Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:40.207Z] [LOG]    Total components: 10
[2025-10-17T06:03:40.207Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:40.208Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:03:40.539Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:40.540Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:40.714Z] [LOG] 📊 Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:40.899Z] [LOG] 📊 Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:40.904Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:40.905Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:41.073Z] [LOG] 📊 Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:41.074Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:41.075Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:41.076Z] [LOG] 💰 GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-17T06:03:41.076Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:41.077Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:41.077Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:41.078Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:41.080Z] [LOG] 📊 Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:41.250Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:41.258Z] [LOG] 📊 Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:41.425Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:41.425Z] [LOG]    Employee ID: 01441633-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:41.426Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:41.426Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:41.435Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:41.436Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:41.437Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:41.438Z] [LOG] 💰 GROSS CALCULATION for Waruni null:
[2025-10-17T06:03:41.439Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:41.439Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:41.440Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:41.441Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:41.611Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:41.613Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:41.614Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:41.615Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:41.615Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:41.706Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:41.792Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:41.793Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:41.794Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:41.794Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:41.795Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:41.796Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:41.797Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:03:41.798Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:03:41.798Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:41.799Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:41.800Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:03:41.801Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:41.802Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:03:41.803Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:03:41.804Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:41.805Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:41.807Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:41.807Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:41.808Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:03:41.809Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:41.809Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:41.810Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:41.811Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:41.811Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:41.812Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:41.814Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:41.814Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:41.815Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:41.816Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:41.816Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:41.817Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:41.818Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:41.819Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:41.820Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:41.821Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:41.821Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:41.822Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:41.823Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:41.823Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:41.824Z] [LOG] Regular deductions for Viruna Damsiha Cooray null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:41.825Z] [LOG] Combined deductions for Viruna Damsiha Cooray null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:03:41.881Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:41.881Z] [LOG]    Employee ID: 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:41.881Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:41.882Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:42.006Z] [LOG] Creating components for record 4c199a6f-c0c7-4d18-884b-b8732bfefcdb: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:42.007Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:03:42.053Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:42.054Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:42.054Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:42.054Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:42.055Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:42.182Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:42.230Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:42.230Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:42.230Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:42.231Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:42.231Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:42.231Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:42.232Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:03:42.232Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:03:42.232Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:42.233Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:42.233Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:03:42.233Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:42.234Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:03:42.234Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:03:42.234Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:42.234Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:42.235Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:42.235Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:42.235Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:03:42.236Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:42.236Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:42.236Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:42.237Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:42.237Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:42.237Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:42.237Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:42.238Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:42.238Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:42.238Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:42.238Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:42.239Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:42.239Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:42.239Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:42.239Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:42.240Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:42.240Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:42.240Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:42.241Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:42.241Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:42.242Z] [LOG] Regular deductions for Waruni null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:42.242Z] [LOG] Combined deductions for Waruni null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:03:42.362Z] [LOG] Created payroll_record_component: 942a1e7a-92e0-42af-9f22-b0b12fa51e2c for Attendance Deduction
[2025-10-17T06:03:42.424Z] [LOG] Creating components for record f9c63ea3-fe23-462a-8754-f6d5541b074e: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:42.425Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:03:42.607Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:42.769Z] [LOG] ✅ Financial balances updated successfully for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:42.769Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:42.770Z] [LOG] 
======================================================================
[2025-10-17T06:03:42.770Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Viruna Damsiha Cooray null
[2025-10-17T06:03:42.770Z] [LOG] ======================================================================
[2025-10-17T06:03:42.771Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:03:42.771Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:03:42.771Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:42.771Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:42.772Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:42.772Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:42.772Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:03:42.773Z] [LOG] ======================================================================

[2025-10-17T06:03:42.773Z] [LOG] ✅ Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-17T06:03:42.773Z] [LOG] 📊 Progress: 11/31 (35.5%)
[2025-10-17T06:03:42.773Z] [LOG] 
🧮 Processing: Kaushal Thambi (EMP465256103)
[2025-10-17T06:03:42.774Z] [LOG] 📋 Record ID: 5d82d7ae-2ed1-4955-a544-ce59478d7a79
[2025-10-17T06:03:42.774Z] [LOG] 
======================================================================
[2025-10-17T06:03:42.774Z] [LOG] 🧮 CALCULATING PAYROLL: Kaushal Thambi (EMP465256103)
[2025-10-17T06:03:42.775Z] [LOG] ======================================================================
[2025-10-17T06:03:42.789Z] [LOG] Created payroll_record_component: 2c2ea97a-8581-4d1d-beb3-7de742e755d2 for Attendance Deduction
[2025-10-17T06:03:43.135Z] [LOG] ✅ Financial balances updated successfully for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:43.136Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:43.136Z] [LOG] 
======================================================================
[2025-10-17T06:03:43.137Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Waruni null
[2025-10-17T06:03:43.138Z] [LOG] ======================================================================
[2025-10-17T06:03:43.138Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:03:43.139Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:03:43.140Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:43.140Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:43.141Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:43.141Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:43.142Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:03:43.143Z] [LOG] ======================================================================

[2025-10-17T06:03:43.144Z] [LOG] ✅ Waruni null: Calculation completed successfully
[2025-10-17T06:03:43.144Z] [LOG] 📊 Progress: 15/34 (44.1%)
[2025-10-17T06:03:43.145Z] [LOG] 
🧮 Processing: Piyumi null (EMP000025)
[2025-10-17T06:03:43.147Z] [LOG] 📋 Record ID: 897fdeea-acf2-48f8-92d2-5b38bfc9bf3b
[2025-10-17T06:03:43.148Z] [LOG] 
======================================================================
[2025-10-17T06:03:43.149Z] [LOG] 🧮 CALCULATING PAYROLL: Piyumi null (EMP000025)
[2025-10-17T06:03:43.150Z] [LOG] ======================================================================
[2025-10-17T06:03:43.475Z] [LOG] 🔍 Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-17T06:03:43.476Z] [LOG]    Total components: 10
[2025-10-17T06:03:43.477Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:43.477Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-17T06:03:43.849Z] [LOG] 🔍 Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:43.850Z] [LOG]    Total components: 10
[2025-10-17T06:03:43.851Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:43.851Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:03:44.176Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:44.176Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:44.350Z] [LOG] 📊 Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-17T06:03:44.524Z] [LOG] 📊 Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-17T06:03:44.555Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:44.556Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:44.707Z] [LOG] 📊 Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-17T06:03:44.708Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:44.709Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:44.709Z] [LOG] 💰 GROSS CALCULATION for Kaushal Thambi:
[2025-10-17T06:03:44.710Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:44.711Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:44.711Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:44.712Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:44.757Z] [LOG] 📊 Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:44.888Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:44.932Z] [LOG] 📊 Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:45.060Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:45.061Z] [LOG]    Employee ID: 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-17T06:03:45.062Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:45.062Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:45.106Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:45.107Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:45.108Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:45.109Z] [LOG] 💰 GROSS CALCULATION for Piyumi null:
[2025-10-17T06:03:45.109Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:45.110Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:45.111Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:45.111Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.240Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:45.241Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:45.241Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:45.242Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:45.242Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:45.287Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:45.418Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:45.419Z] [LOG]       Weekday (Mon-Fri): 8.50h
[2025-10-17T06:03:45.420Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:45.420Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:45.421Z] [LOG]       Total Worked: 8.50h
[2025-10-17T06:03:45.422Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:45.422Z] [LOG]       Weekday: 8.50h × Rs.235.29 = Rs.1999.96
[2025-10-17T06:03:45.423Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:03:45.424Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:45.424Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:45.425Z] [LOG]       Total Earned Salary: Rs.1999.96
[2025-10-17T06:03:45.426Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:45.427Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:03:45.427Z] [LOG]       Earned Salary: Rs.1999.96
[2025-10-17T06:03:45.428Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:45.428Z] [LOG]       Attendance Deduction: Rs.48000.04
[2025-10-17T06:03:45.431Z] [LOG]       📉 Deduction is 96.00% of base salary
[2025-10-17T06:03:45.432Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:45.432Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:03:45.433Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:45.434Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:45.434Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.435Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:45.436Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.437Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:45.437Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.438Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:45.438Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.439Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:45.440Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.440Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:45.441Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.441Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:45.442Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.443Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:45.443Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.444Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:45.444Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.445Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:45.446Z] [LOG] Regular deductions for Kaushal Thambi: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:45.447Z] [LOG] Combined deductions for Kaushal Thambi: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 48000.035,
      "details": "Based on worked hours (8.5h total)"
    }
  ],
  "total": 48000.035
}
[2025-10-17T06:03:45.460Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:45.461Z] [LOG]    Employee ID: 0143e565-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:45.462Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:45.463Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:45.628Z] [LOG] Creating components for record 5d82d7ae-2ed1-4955-a544-ce59478d7a79: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:45.630Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 48000.035
}
[2025-10-17T06:03:45.638Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:45.638Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:45.639Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:45.640Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:45.641Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:45.807Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:45.815Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:45.815Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:45.816Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:45.817Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:45.818Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:45.818Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:45.819Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:03:45.820Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:03:45.820Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:45.822Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:45.823Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:03:45.824Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:45.824Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:03:45.825Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:03:45.826Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:45.826Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:45.827Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:45.827Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:45.828Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:03:45.829Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:45.830Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:45.831Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.831Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:45.832Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.833Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:45.834Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.835Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:45.836Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.837Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:45.837Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.838Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:45.838Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.839Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:45.840Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.840Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:45.841Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.841Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:45.842Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:45.843Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:45.843Z] [LOG] Regular deductions for Piyumi null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:45.844Z] [LOG] Combined deductions for Piyumi null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:03:46.002Z] [LOG] Created payroll_record_component: 734cc386-0aed-4c7a-a28d-c84744148f27 for Attendance Deduction
[2025-10-17T06:03:46.039Z] [LOG] Creating components for record 897fdeea-acf2-48f8-92d2-5b38bfc9bf3b: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:46.040Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:03:46.217Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:46.375Z] [LOG] ✅ Financial balances updated successfully for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-17T06:03:46.376Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:46.376Z] [LOG] 
======================================================================
[2025-10-17T06:03:46.377Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Kaushal Thambi
[2025-10-17T06:03:46.377Z] [LOG] ======================================================================
[2025-10-17T06:03:46.377Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:03:46.378Z] [LOG]    Total Deductions: Rs.48000.04
[2025-10-17T06:03:46.378Z] [LOG]       - Attendance Deduction: Rs.48000.04
[2025-10-17T06:03:46.379Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:46.379Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:46.379Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:46.380Z] [LOG]    NET SALARY: Rs.1999.96
[2025-10-17T06:03:46.380Z] [LOG] ======================================================================

[2025-10-17T06:03:46.381Z] [LOG] ✅ Kaushal Thambi: Calculation completed successfully
[2025-10-17T06:03:46.381Z] [LOG] 📊 Progress: 12/31 (38.7%)
[2025-10-17T06:03:46.382Z] [LOG] 
🧮 Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-17T06:03:46.383Z] [LOG] 📋 Record ID: 78c2cbdd-cf43-4506-9793-10ca813263c0
[2025-10-17T06:03:46.383Z] [LOG] 
======================================================================
[2025-10-17T06:03:46.383Z] [LOG] 🧮 CALCULATING PAYROLL: R. D.A Kaushalya null (EMP000044)
[2025-10-17T06:03:46.384Z] [LOG] ======================================================================
[2025-10-17T06:03:46.414Z] [LOG] Created payroll_record_component: e2a607f3-9979-4bab-9f7c-a180d3d4d879 for Attendance Deduction
[2025-10-17T06:03:46.798Z] [LOG] ✅ Financial balances updated successfully for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:46.798Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:46.799Z] [LOG] 
======================================================================
[2025-10-17T06:03:46.800Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Piyumi null
[2025-10-17T06:03:46.800Z] [LOG] ======================================================================
[2025-10-17T06:03:46.801Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:03:46.801Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:03:46.802Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:46.803Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:46.803Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:46.804Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:46.804Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:03:46.805Z] [LOG] ======================================================================

[2025-10-17T06:03:46.806Z] [LOG] ✅ Piyumi null: Calculation completed successfully
[2025-10-17T06:03:46.807Z] [LOG] 📊 Progress: 16/34 (47.1%)
[2025-10-17T06:03:46.808Z] [LOG] 
🧮 Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-17T06:03:46.809Z] [LOG] 📋 Record ID: f27821f1-6be4-474c-bd6d-d36ce455a79e
[2025-10-17T06:03:46.811Z] [LOG] 
======================================================================
[2025-10-17T06:03:46.819Z] [LOG] 🧮 CALCULATING PAYROLL: Sujevan Selvaratnam null (EMP000026)
[2025-10-17T06:03:46.820Z] [LOG] ======================================================================
[2025-10-17T06:03:47.187Z] [LOG] 🔍 Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:47.187Z] [LOG]    Total components: 10
[2025-10-17T06:03:47.188Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:47.189Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:03:47.538Z] [LOG] 🔍 Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:47.539Z] [LOG]    Total components: 10
[2025-10-17T06:03:47.539Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:47.540Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T06:03:47.889Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:47.893Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:48.068Z] [LOG] 📊 Found 0 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:48.241Z] [LOG] 📊 Found 0 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:48.243Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:48.244Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:48.418Z] [LOG] 📊 Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:48.419Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:48.420Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:48.421Z] [LOG] 💰 GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-17T06:03:48.422Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:48.423Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:48.423Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:48.424Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:48.427Z] [LOG] 📊 Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:48.611Z] [LOG] 📊 Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:48.613Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:48.788Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:48.789Z] [LOG]    Employee ID: 01443963-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:48.790Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:48.790Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:48.792Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:48.793Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:48.794Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:48.794Z] [LOG] 💰 GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-17T06:03:48.795Z] [LOG]    Base Salary: 1
[2025-10-17T06:03:48.796Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:48.797Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:48.797Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:48.963Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:48.963Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:48.964Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:48.964Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:48.965Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:48.972Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:49.138Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:49.139Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:49.139Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:49.140Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:49.140Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:49.141Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:49.142Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:03:49.142Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:03:49.143Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:49.144Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:49.144Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:03:49.145Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:49.146Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:03:49.147Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:03:49.147Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:49.148Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:49.149Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:49.150Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:49.151Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:03:49.152Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:49.153Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:49.153Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.154Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:49.154Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.155Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:49.156Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.156Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:49.157Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.158Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:49.158Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.159Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:49.160Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.160Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:49.161Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.161Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:49.162Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.163Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:49.163Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.164Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:49.164Z] [LOG] Regular deductions for R. D.A Kaushalya null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:49.165Z] [LOG] Combined deductions for R. D.A Kaushalya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:03:49.171Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:49.172Z] [LOG]    Employee ID: 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:49.173Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:49.173Z] [LOG]    Base Salary: Rs.1.00
[2025-10-17T06:03:49.346Z] [LOG] Creating components for record 78c2cbdd-cf43-4506-9793-10ca813263c0: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:49.348Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:03:49.351Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:49.352Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-17T06:03:49.352Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-17T06:03:49.353Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-17T06:03:49.354Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:49.524Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:49.527Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:49.527Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:49.528Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:49.528Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:49.529Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:49.530Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:49.531Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:49.531Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:49.532Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:49.532Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:49.532Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T06:03:49.533Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:49.533Z] [LOG]       Base Salary: Rs.1.00
[2025-10-17T06:03:49.534Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T06:03:49.534Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:49.535Z] [LOG]       Attendance Deduction: Rs.1.00
[2025-10-17T06:03:49.535Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-17T06:03:49.536Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:49.536Z] [LOG]    Gross Salary: 1
[2025-10-17T06:03:49.537Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:49.537Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:49.537Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.538Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:49.538Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.539Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:49.539Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.539Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:49.540Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.540Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:49.540Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.541Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:49.541Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.541Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:49.542Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.542Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:49.542Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.543Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:49.543Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:49.544Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:49.544Z] [LOG] Regular deductions for Sujevan Selvaratnam null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:49.544Z] [LOG] Combined deductions for Sujevan Selvaratnam null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 1
}
[2025-10-17T06:03:49.705Z] [LOG] Created payroll_record_component: 9d339ea5-17fc-4b0b-aee1-72bca125e2d6 for Attendance Deduction
[2025-10-17T06:03:49.721Z] [LOG] Creating components for record f27821f1-6be4-474c-bd6d-d36ce455a79e: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:49.722Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1
}
[2025-10-17T06:03:49.900Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:50.056Z] [LOG] ✅ Financial balances updated successfully for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:50.057Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:50.058Z] [LOG] 
======================================================================
[2025-10-17T06:03:50.058Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: R. D.A Kaushalya null
[2025-10-17T06:03:50.059Z] [LOG] ======================================================================
[2025-10-17T06:03:50.059Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:03:50.060Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:03:50.061Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:50.061Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:50.062Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:50.063Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:50.063Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:03:50.064Z] [LOG] ======================================================================

[2025-10-17T06:03:50.065Z] [LOG] ✅ R. D.A Kaushalya null: Calculation completed successfully
[2025-10-17T06:03:50.066Z] [LOG] 📊 Progress: 13/31 (41.9%)
[2025-10-17T06:03:50.066Z] [LOG] 
🧮 Processing: Office Team null (EMP000041)
[2025-10-17T06:03:50.069Z] [LOG] 📋 Record ID: 89102bda-881f-4ca0-9a68-6d23f0d6c7fe
[2025-10-17T06:03:50.069Z] [LOG] 
======================================================================
[2025-10-17T06:03:50.070Z] [LOG] 🧮 CALCULATING PAYROLL: Office Team null (EMP000041)
[2025-10-17T06:03:50.071Z] [LOG] ======================================================================
[2025-10-17T06:03:50.081Z] [LOG] Created payroll_record_component: 3c848641-a5e3-4322-b9bb-34f108c13a73 for Attendance Deduction
[2025-10-17T06:03:50.426Z] [LOG] ✅ Financial balances updated successfully for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:50.427Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:50.428Z] [LOG] 
======================================================================
[2025-10-17T06:03:50.428Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sujevan Selvaratnam null
[2025-10-17T06:03:50.429Z] [LOG] ======================================================================
[2025-10-17T06:03:50.429Z] [LOG]    Gross Salary: Rs.1.00
[2025-10-17T06:03:50.430Z] [LOG]    Total Deductions: Rs.1.00
[2025-10-17T06:03:50.431Z] [LOG]       - Attendance Deduction: Rs.1.00
[2025-10-17T06:03:50.431Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:50.432Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:50.432Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:50.433Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T06:03:50.435Z] [LOG] ======================================================================

[2025-10-17T06:03:50.436Z] [LOG] ✅ Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-17T06:03:50.436Z] [LOG] 📊 Progress: 17/34 (50.0%)
[2025-10-17T06:03:50.439Z] [LOG] 
🧮 Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-17T06:03:50.440Z] [LOG] 📋 Record ID: 4a3f1c38-6e44-4b8b-862e-66a46e235425
[2025-10-17T06:03:50.441Z] [LOG] 
======================================================================
[2025-10-17T06:03:50.442Z] [LOG] 🧮 CALCULATING PAYROLL: Ruvindu Hewabandu null (EMP000027)
[2025-10-17T06:03:50.442Z] [LOG] ======================================================================
[2025-10-17T06:03:50.769Z] [LOG] 🔍 Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:50.770Z] [LOG]    Total components: 10
[2025-10-17T06:03:50.771Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:50.771Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T06:03:51.140Z] [LOG] 🔍 Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:51.140Z] [LOG]    Total components: 10
[2025-10-17T06:03:51.141Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:51.141Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T06:03:51.472Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:51.473Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:51.647Z] [LOG] 📊 Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:51.827Z] [LOG] 📊 Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:51.834Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:51.835Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:52.002Z] [LOG] 📊 Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:52.002Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:52.003Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:52.005Z] [LOG] 💰 GROSS CALCULATION for Office Team null:
[2025-10-17T06:03:52.006Z] [LOG]    Base Salary: 1
[2025-10-17T06:03:52.008Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:52.010Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:52.011Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:52.013Z] [LOG] 📊 Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:52.185Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:52.187Z] [LOG] 📊 Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:52.202Z] [LOG] session eka meka {
  "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "1d501d4a-7eb5-41d3-afa7-b92ac757f3ee",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 11:33:01",
  "is_active": 1,
  "created_at": "2025-10-17 11:18:49",
  "user_active": 1
}
[2025-10-17T06:03:52.209Z] [LOG] session eka meka {
  "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "1d501d4a-7eb5-41d3-afa7-b92ac757f3ee",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 11:33:01",
  "is_active": 1,
  "created_at": "2025-10-17 11:18:49",
  "user_active": 1
}
[2025-10-17T06:03:52.251Z] [LOG] session eka meka {
  "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "1d501d4a-7eb5-41d3-afa7-b92ac757f3ee",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 11:33:01",
  "is_active": 1,
  "created_at": "2025-10-17 11:18:49",
  "user_active": 1
}
[2025-10-17T06:03:52.254Z] [LOG] session eka meka {
  "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "1d501d4a-7eb5-41d3-afa7-b92ac757f3ee",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 11:33:01",
  "is_active": 1,
  "created_at": "2025-10-17 11:18:49",
  "user_active": 1
}
[2025-10-17T06:03:52.357Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:52.358Z] [LOG]    Employee ID: 01442b21-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:52.358Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:52.359Z] [LOG]    Base Salary: Rs.1.00
[2025-10-17T06:03:52.361Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:52.361Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:52.362Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:52.365Z] [LOG] 💰 GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-17T06:03:52.366Z] [LOG]    Base Salary: 0
[2025-10-17T06:03:52.366Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:52.367Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:52.368Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:52.534Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:52.534Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-17T06:03:52.535Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-17T06:03:52.535Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-17T06:03:52.536Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:52.544Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:52.710Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:52.711Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:52.712Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:52.713Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:52.714Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:52.715Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:52.715Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:52.716Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:52.717Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:52.718Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:52.719Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T06:03:52.719Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:52.720Z] [LOG]       Base Salary: Rs.1.00
[2025-10-17T06:03:52.720Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T06:03:52.721Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:52.722Z] [LOG]       Attendance Deduction: Rs.1.00
[2025-10-17T06:03:52.724Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-17T06:03:52.725Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:52.725Z] [LOG]    Gross Salary: 1
[2025-10-17T06:03:52.726Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:52.727Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:52.728Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:52.728Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:52.731Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:52.731Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:52.732Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:52.733Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:52.734Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:52.734Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:52.735Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:52.736Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:52.737Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:52.737Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:52.738Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:52.739Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:52.739Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:52.740Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:52.740Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:52.741Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:52.742Z] [LOG] Regular deductions for Office Team null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:52.742Z] [LOG] Combined deductions for Office Team null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 1
}
[2025-10-17T06:03:52.751Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:52.756Z] [LOG]    Employee ID: 0143e915-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:52.757Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:52.758Z] [LOG]    Base Salary: Rs.0.00
[2025-10-17T06:03:52.925Z] [LOG] Creating components for record 89102bda-881f-4ca0-9a68-6d23f0d6c7fe: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:52.927Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1
}
[2025-10-17T06:03:52.933Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:52.934Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-17T06:03:52.934Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-17T06:03:52.935Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-17T06:03:52.936Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:53.100Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:53.114Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:53.114Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:53.115Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:53.115Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:53.115Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:53.116Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:53.116Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:53.117Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:53.117Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:53.117Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:53.118Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T06:03:53.118Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:53.118Z] [LOG]       Base Salary: Rs.0.00
[2025-10-17T06:03:53.119Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T06:03:53.119Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:53.119Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-17T06:03:53.120Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-17T06:03:53.120Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:53.121Z] [LOG]    Gross Salary: 0
[2025-10-17T06:03:53.121Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:53.121Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:53.122Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:53.122Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:53.123Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:53.123Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:53.124Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:53.124Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:53.125Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:53.125Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:53.125Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:53.126Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:53.126Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:53.126Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:53.127Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:53.127Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:53.127Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:53.128Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:53.128Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:53.128Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:53.130Z] [LOG] Regular deductions for Ruvindu Hewabandu null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:53.131Z] [LOG] Combined deductions for Ruvindu Hewabandu null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 0
}
[2025-10-17T06:03:53.232Z] [LOG] GET /api/leaves/types - 304 - 1214ms
[2025-10-17T06:03:53.274Z] [LOG] Created payroll_record_component: b1722dc2-cf7c-41bd-8dc1-5f5c55e5ecdc for Attendance Deduction
[2025-10-17T06:03:53.306Z] [LOG] GET /api/leaves/requests?status=&startDate=&endDate= - 304 - 1282ms
[2025-10-17T06:03:53.308Z] [LOG] Creating components for record 4a3f1c38-6e44-4b8b-862e-66a46e235425: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:53.310Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-17T06:03:53.316Z] [LOG] GET /api/leaves/requests - 304 - 1294ms
[2025-10-17T06:03:53.484Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:53.487Z] [LOG] session eka meka {
  "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "1d501d4a-7eb5-41d3-afa7-b92ac757f3ee",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 11:33:01",
  "is_active": 1,
  "created_at": "2025-10-17 11:18:49",
  "user_active": 1
}
[2025-10-17T06:03:53.621Z] [LOG] ✅ Financial balances updated successfully for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:53.622Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:53.623Z] [LOG] 
======================================================================
[2025-10-17T06:03:53.623Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Office Team null
[2025-10-17T06:03:53.624Z] [LOG] ======================================================================
[2025-10-17T06:03:53.624Z] [LOG]    Gross Salary: Rs.1.00
[2025-10-17T06:03:53.625Z] [LOG]    Total Deductions: Rs.1.00
[2025-10-17T06:03:53.626Z] [LOG]       - Attendance Deduction: Rs.1.00
[2025-10-17T06:03:53.626Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:53.627Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:53.627Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:53.628Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T06:03:53.630Z] [LOG] ======================================================================

[2025-10-17T06:03:53.631Z] [LOG] ✅ Office Team null: Calculation completed successfully
[2025-10-17T06:03:53.632Z] [LOG] 📊 Progress: 14/31 (45.2%)
[2025-10-17T06:03:53.632Z] [LOG] 
🧮 Processing: Piyumi null (EMP000025)
[2025-10-17T06:03:53.633Z] [LOG] 📋 Record ID: 897fdeea-acf2-48f8-92d2-5b38bfc9bf3b
[2025-10-17T06:03:53.634Z] [LOG] 
======================================================================
[2025-10-17T06:03:53.635Z] [LOG] 🧮 CALCULATING PAYROLL: Piyumi null (EMP000025)
[2025-10-17T06:03:53.635Z] [LOG] ======================================================================
[2025-10-17T06:03:53.658Z] [LOG] Created payroll_record_component: 227a0e82-0ae5-47fd-83e9-feb5210e1583 for Attendance Deduction
[2025-10-17T06:03:54.005Z] [LOG] ✅ Financial balances updated successfully for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:54.006Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:54.006Z] [LOG] 
======================================================================
[2025-10-17T06:03:54.007Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ruvindu Hewabandu null
[2025-10-17T06:03:54.008Z] [LOG] ======================================================================
[2025-10-17T06:03:54.008Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-17T06:03:54.009Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-17T06:03:54.009Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-17T06:03:54.010Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:54.011Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:54.011Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:54.014Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T06:03:54.015Z] [LOG] ======================================================================

[2025-10-17T06:03:54.016Z] [LOG] ✅ Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-17T06:03:54.017Z] [LOG] 📊 Progress: 18/34 (52.9%)
[2025-10-17T06:03:54.018Z] [LOG] 
🧮 Processing: Rasanga null (EMP000028)
[2025-10-17T06:03:54.020Z] [LOG] 📋 Record ID: 97918003-73d5-460c-a91b-a4102d4316cd
[2025-10-17T06:03:54.020Z] [LOG] 
======================================================================
[2025-10-17T06:03:54.021Z] [LOG] 🧮 CALCULATING PAYROLL: Rasanga null (EMP000028)
[2025-10-17T06:03:54.022Z] [LOG] ======================================================================
[2025-10-17T06:03:54.201Z] [LOG] GET /api/leaves/requests?status=&startDate=&endDate= - 304 - 888ms
[2025-10-17T06:03:54.335Z] [LOG] 🔍 Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:54.336Z] [LOG]    Total components: 10
[2025-10-17T06:03:54.336Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:54.337Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:03:54.386Z] [LOG] session eka meka {
  "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "1d501d4a-7eb5-41d3-afa7-b92ac757f3ee",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 11:33:01",
  "is_active": 1,
  "created_at": "2025-10-17 11:18:49",
  "user_active": 1
}
[2025-10-17T06:03:54.637Z] [LOG] GET /api/leaves/dashboard - 304 - 2616ms
[2025-10-17T06:03:54.723Z] [LOG] 🔍 Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:54.724Z] [LOG]    Total components: 10
[2025-10-17T06:03:54.724Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:54.725Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-17T06:03:55.128Z] [LOG] GET /api/leaves/requests?status=&startDate=&endDate= - 304 - 920ms
[2025-10-17T06:03:55.130Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:55.131Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:55.308Z] [LOG] 📊 Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:55.484Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:55.485Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:55.489Z] [LOG] 📊 Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:55.661Z] [LOG] 📊 Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:55.663Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:55.663Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:55.664Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:55.665Z] [LOG] 💰 GROSS CALCULATION for Piyumi null:
[2025-10-17T06:03:55.666Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:55.666Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:55.667Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:55.667Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:55.835Z] [LOG] 📊 Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:55.843Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:56.009Z] [LOG] 📊 Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:56.010Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:56.011Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:56.012Z] [LOG] 💰 GROSS CALCULATION for Rasanga null:
[2025-10-17T06:03:56.012Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:56.013Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:56.013Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:56.014Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.018Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:56.019Z] [LOG]    Employee ID: 0143e565-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:56.021Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:56.021Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:56.185Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:56.209Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:56.209Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:56.210Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:56.210Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:56.210Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:56.360Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:56.361Z] [LOG]    Employee ID: 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:56.362Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:56.363Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:56.394Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:56.395Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:56.396Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:56.397Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:56.398Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:56.398Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:56.399Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:03:56.399Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:03:56.400Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:56.400Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:56.401Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:03:56.402Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:56.403Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:03:56.403Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:03:56.404Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:56.404Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:56.405Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:56.405Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:56.406Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:03:56.407Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:56.408Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:56.408Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.409Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:56.410Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.410Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:56.411Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.411Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:56.413Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.413Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:56.414Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.414Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:56.415Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.415Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:56.416Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.416Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:56.416Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.417Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:56.417Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.417Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:56.418Z] [LOG] Regular deductions for Piyumi null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:56.418Z] [LOG] Combined deductions for Piyumi null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:03:56.547Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:56.548Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:56.548Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:56.549Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:56.549Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:03:56.667Z] [LOG] Creating components for record 897fdeea-acf2-48f8-92d2-5b38bfc9bf3b: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:56.669Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:03:56.728Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:03:56.729Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:03:56.730Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:03:56.730Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:03:56.731Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:03:56.732Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:03:56.732Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:03:56.733Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:03:56.734Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:03:56.734Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:56.735Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:03:56.735Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:03:56.736Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:03:56.737Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:03:56.738Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:03:56.738Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:56.739Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:03:56.739Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:03:56.740Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:03:56.741Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:03:56.741Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:03:56.742Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.742Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:03:56.743Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.744Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:03:56.744Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.745Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:03:56.745Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.746Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:03:56.747Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.747Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:03:56.748Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.749Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:03:56.749Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.750Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:03:56.751Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.751Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:03:56.752Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:56.753Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:03:56.754Z] [LOG] Regular deductions for Rasanga null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:03:56.754Z] [LOG] Combined deductions for Rasanga null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:03:56.846Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:56.932Z] [LOG] Creating components for record 97918003-73d5-460c-a91b-a4102d4316cd: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:03:56.934Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:03:57.023Z] [LOG] Created payroll_record_component: d2cd4dcd-94e3-443a-93f9-1c49a0b75147 for Attendance Deduction
[2025-10-17T06:03:57.109Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:03:57.289Z] [LOG] Created payroll_record_component: 40ef1811-aa2e-4e0c-95e7-b4e5ae564a0a for Attendance Deduction
[2025-10-17T06:03:57.372Z] [LOG] ✅ Financial balances updated successfully for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:57.373Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:57.373Z] [LOG] 
======================================================================
[2025-10-17T06:03:57.374Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Piyumi null
[2025-10-17T06:03:57.375Z] [LOG] ======================================================================
[2025-10-17T06:03:57.375Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:03:57.376Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:03:57.376Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:57.377Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:57.377Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:57.378Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:57.379Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:03:57.380Z] [LOG] ======================================================================

[2025-10-17T06:03:57.381Z] [LOG] ✅ Piyumi null: Calculation completed successfully
[2025-10-17T06:03:57.381Z] [LOG] 📊 Progress: 15/31 (48.4%)
[2025-10-17T06:03:57.382Z] [LOG] 
🧮 Processing: Rasanga null (EMP000028)
[2025-10-17T06:03:57.383Z] [LOG] 📋 Record ID: 97918003-73d5-460c-a91b-a4102d4316cd
[2025-10-17T06:03:57.384Z] [LOG] 
======================================================================
[2025-10-17T06:03:57.385Z] [LOG] 🧮 CALCULATING PAYROLL: Rasanga null (EMP000028)
[2025-10-17T06:03:57.386Z] [LOG] ======================================================================
[2025-10-17T06:03:57.637Z] [LOG] ✅ Financial balances updated successfully for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:57.638Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:03:57.638Z] [LOG] 
======================================================================
[2025-10-17T06:03:57.639Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Rasanga null
[2025-10-17T06:03:57.639Z] [LOG] ======================================================================
[2025-10-17T06:03:57.640Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:03:57.641Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:03:57.641Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:03:57.642Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:03:57.642Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:03:57.643Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:03:57.644Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:03:57.645Z] [LOG] ======================================================================

[2025-10-17T06:03:57.646Z] [LOG] ✅ Rasanga null: Calculation completed successfully
[2025-10-17T06:03:57.646Z] [LOG] 📊 Progress: 19/34 (55.9%)
[2025-10-17T06:03:57.648Z] [LOG] 
🧮 Processing: Chamodi null (EMP000032)
[2025-10-17T06:03:57.649Z] [LOG] 📋 Record ID: ea3e34d0-b868-4294-bc1a-91d8ce2a0b83
[2025-10-17T06:03:57.650Z] [LOG] 
======================================================================
[2025-10-17T06:03:57.650Z] [LOG] 🧮 CALCULATING PAYROLL: Chamodi null (EMP000032)
[2025-10-17T06:03:57.651Z] [LOG] ======================================================================
[2025-10-17T06:03:58.120Z] [LOG] 🔍 Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:58.121Z] [LOG]    Total components: 10
[2025-10-17T06:03:58.121Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:58.122Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-17T06:03:58.356Z] [LOG] 🔍 Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-17T06:03:58.357Z] [LOG]    Total components: 10
[2025-10-17T06:03:58.358Z] [LOG]    Applicable components: 10
[2025-10-17T06:03:58.358Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:03:58.838Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:58.839Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:59.013Z] [LOG] 📊 Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:59.100Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:03:59.100Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:03:59.186Z] [LOG] 📊 Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:59.276Z] [LOG] 📊 Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:59.361Z] [LOG] 📊 Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:59.361Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:59.362Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:59.363Z] [LOG] 💰 GROSS CALCULATION for Rasanga null:
[2025-10-17T06:03:59.364Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:59.364Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:59.365Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:59.365Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:59.451Z] [LOG] 📊 Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:59.543Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:59.643Z] [LOG] 📊 Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:59.644Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:03:59.645Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:03:59.645Z] [LOG] 💰 GROSS CALCULATION for Chamodi null:
[2025-10-17T06:03:59.646Z] [LOG]    Base Salary: 50000
[2025-10-17T06:03:59.647Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:03:59.647Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:03:59.648Z] [LOG]    Fixed amount: 0
[2025-10-17T06:03:59.721Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:03:59.722Z] [LOG]    Employee ID: 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-17T06:03:59.722Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:03:59.723Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:03:59.822Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:03:59.901Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:03:59.902Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:03:59.902Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:03:59.903Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:03:59.903Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:00.002Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:00.002Z] [LOG]    Employee ID: 0143f302-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:00.004Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:00.005Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:04:00.076Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:00.076Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:00.076Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:00.077Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:00.077Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:00.077Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:00.078Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:04:00.078Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:04:00.078Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:00.079Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:00.079Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:04:00.080Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:00.080Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:04:00.080Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:04:00.081Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:00.081Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:00.081Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:00.082Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:00.082Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:04:00.082Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:00.083Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:00.083Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.083Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:00.083Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.084Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:00.084Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.084Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:00.085Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.085Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:00.085Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.085Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:00.086Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.086Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:00.086Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.086Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:00.087Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.087Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:00.087Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.088Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:00.088Z] [LOG] Regular deductions for Rasanga null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:00.088Z] [LOG] Combined deductions for Rasanga null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:04:00.190Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:00.191Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:04:00.192Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:04:00.192Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:04:00.193Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:00.270Z] [LOG] Creating components for record 97918003-73d5-460c-a91b-a4102d4316cd: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:00.274Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:04:00.369Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:00.369Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:00.370Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:00.370Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:00.371Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:00.371Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:00.372Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:04:00.373Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:04:00.373Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:00.374Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:00.375Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:04:00.376Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:00.377Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:04:00.377Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:04:00.378Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:00.378Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:00.381Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:00.382Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:00.382Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:04:00.383Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:00.384Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:00.384Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.385Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:00.385Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.386Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:00.387Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.387Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:00.388Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.388Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:00.389Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.389Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:00.390Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.391Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:00.392Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.392Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:00.393Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.393Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:00.394Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:00.394Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:00.395Z] [LOG] Regular deductions for Chamodi null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:00.397Z] [LOG] Combined deductions for Chamodi null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:04:00.447Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:00.575Z] [LOG] Creating components for record ea3e34d0-b868-4294-bc1a-91d8ce2a0b83: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:00.577Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:04:00.642Z] [LOG] Created payroll_record_component: fe157c90-73f0-4f0f-aee7-3309167fe854 for Attendance Deduction
[2025-10-17T06:04:00.785Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:00.962Z] [LOG] Created payroll_record_component: 83281df2-814f-4b4a-b0f9-2031a6f418e6 for Attendance Deduction
[2025-10-17T06:04:00.989Z] [LOG] ✅ Financial balances updated successfully for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:00.990Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:00.990Z] [LOG] 
======================================================================
[2025-10-17T06:04:00.991Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Rasanga null
[2025-10-17T06:04:00.992Z] [LOG] ======================================================================
[2025-10-17T06:04:00.992Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:04:00.993Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:04:00.994Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:00.994Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:00.995Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:00.995Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:00.997Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:04:00.997Z] [LOG] ======================================================================

[2025-10-17T06:04:00.998Z] [LOG] ✅ Rasanga null: Calculation completed successfully
[2025-10-17T06:04:00.999Z] [LOG] 📊 Progress: 16/31 (51.6%)
[2025-10-17T06:04:00.999Z] [LOG] 
🧮 Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-17T06:04:01.000Z] [LOG] 📋 Record ID: 98352b89-1662-4f83-9a4d-268a8198f068
[2025-10-17T06:04:01.001Z] [LOG] 
======================================================================
[2025-10-17T06:04:01.003Z] [LOG] 🧮 CALCULATING PAYROLL: Nimdiya Ranasinghe null (EMP000045)
[2025-10-17T06:04:01.004Z] [LOG] ======================================================================
[2025-10-17T06:04:01.316Z] [LOG] ✅ Financial balances updated successfully for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:01.317Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:01.317Z] [LOG] 
======================================================================
[2025-10-17T06:04:01.318Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chamodi null
[2025-10-17T06:04:01.318Z] [LOG] ======================================================================
[2025-10-17T06:04:01.319Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:04:01.320Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:04:01.320Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:01.321Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:01.321Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:01.322Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:01.323Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:04:01.324Z] [LOG] ======================================================================

[2025-10-17T06:04:01.325Z] [LOG] ✅ Chamodi null: Calculation completed successfully
[2025-10-17T06:04:01.325Z] [LOG] 📊 Progress: 20/34 (58.8%)
[2025-10-17T06:04:01.326Z] [LOG] 
🧮 Processing: Shandeep null (EMP000034)
[2025-10-17T06:04:01.328Z] [LOG] 📋 Record ID: cc510f75-5334-49f8-9b2b-793d9cfb47b9
[2025-10-17T06:04:01.330Z] [LOG] 
======================================================================
[2025-10-17T06:04:01.331Z] [LOG] 🧮 CALCULATING PAYROLL: Shandeep null (EMP000034)
[2025-10-17T06:04:01.332Z] [LOG] ======================================================================
[2025-10-17T06:04:01.764Z] [LOG] 🔍 Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:01.764Z] [LOG]    Total components: 10
[2025-10-17T06:04:01.765Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:01.765Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:04:02.045Z] [LOG] 🔍 Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:02.045Z] [LOG]    Total components: 10
[2025-10-17T06:04:02.046Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:02.046Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:04:02.461Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:02.462Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:02.640Z] [LOG] 📊 Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:02.759Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:02.760Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:02.828Z] [LOG] 📊 Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:02.936Z] [LOG] 📊 Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:03.005Z] [LOG] 📊 Found 0 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:03.006Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:03.007Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:03.008Z] [LOG] 💰 GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-17T06:04:03.009Z] [LOG]    Base Salary: 35000
[2025-10-17T06:04:03.009Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:03.010Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:03.010Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:03.113Z] [LOG] 📊 Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:03.185Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:03.295Z] [LOG] 📊 Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:03.296Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:03.297Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:03.297Z] [LOG] 💰 GROSS CALCULATION for Shandeep null:
[2025-10-17T06:04:03.298Z] [LOG]    Base Salary: 80000
[2025-10-17T06:04:03.299Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:03.299Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:03.300Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:03.383Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:03.384Z] [LOG]    Employee ID: 01444074-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:03.384Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:03.385Z] [LOG]    Base Salary: Rs.35000.00
[2025-10-17T06:04:03.474Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:03.561Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:03.562Z] [LOG]       Daily Salary: Rs.1400.00
[2025-10-17T06:04:03.563Z] [LOG]       Weekday Hourly Rate: Rs.164.71
[2025-10-17T06:04:03.563Z] [LOG]       Saturday Hourly Rate: Rs.164.71
[2025-10-17T06:04:03.564Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:03.651Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:03.652Z] [LOG]    Employee ID: 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:03.653Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:03.653Z] [LOG]    Base Salary: Rs.80000.00
[2025-10-17T06:04:03.740Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:03.741Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:03.741Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:03.742Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:03.742Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:03.743Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:03.744Z] [LOG]       Weekday: 17.00h × Rs.164.71 = Rs.2800.07
[2025-10-17T06:04:03.744Z] [LOG]       Saturday: 0.00h × Rs.164.71 = Rs.0.00
[2025-10-17T06:04:03.745Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:03.745Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:03.746Z] [LOG]       Total Earned Salary: Rs.2800.07
[2025-10-17T06:04:03.747Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:03.748Z] [LOG]       Base Salary: Rs.35000.00
[2025-10-17T06:04:03.749Z] [LOG]       Earned Salary: Rs.2800.07
[2025-10-17T06:04:03.749Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:03.750Z] [LOG]       Attendance Deduction: Rs.32199.93
[2025-10-17T06:04:03.750Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:03.752Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:03.753Z] [LOG]    Gross Salary: 35000
[2025-10-17T06:04:03.754Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:03.755Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:03.755Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:03.756Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:03.756Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:03.757Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:03.758Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:03.758Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:03.759Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:03.760Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:03.760Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:03.761Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:03.761Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:03.762Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:03.764Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:03.764Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:03.764Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:03.765Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:03.766Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:03.766Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:03.766Z] [LOG] Regular deductions for Nimdiya Ranasinghe null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:03.767Z] [LOG] Combined deductions for Nimdiya Ranasinghe null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 32199.93,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 32199.93
}
[2025-10-17T06:04:03.832Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:03.832Z] [LOG]       Daily Salary: Rs.3200.00
[2025-10-17T06:04:03.832Z] [LOG]       Weekday Hourly Rate: Rs.376.47
[2025-10-17T06:04:03.833Z] [LOG]       Saturday Hourly Rate: Rs.376.47
[2025-10-17T06:04:03.833Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:03.944Z] [LOG] Creating components for record 98352b89-1662-4f83-9a4d-268a8198f068: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:03.946Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 32199.93
}
[2025-10-17T06:04:04.012Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:04.013Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:04.013Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:04.014Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:04.014Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:04.015Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:04.015Z] [LOG]       Weekday: 17.00h × Rs.376.47 = Rs.6399.99
[2025-10-17T06:04:04.016Z] [LOG]       Saturday: 0.00h × Rs.376.47 = Rs.0.00
[2025-10-17T06:04:04.016Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:04.016Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:04.017Z] [LOG]       Total Earned Salary: Rs.6399.99
[2025-10-17T06:04:04.017Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:04.018Z] [LOG]       Base Salary: Rs.80000.00
[2025-10-17T06:04:04.018Z] [LOG]       Earned Salary: Rs.6399.99
[2025-10-17T06:04:04.019Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:04.019Z] [LOG]       Attendance Deduction: Rs.73600.01
[2025-10-17T06:04:04.020Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:04.020Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:04.020Z] [LOG]    Gross Salary: 80000
[2025-10-17T06:04:04.021Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:04.021Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:04.022Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:04.022Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:04.022Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:04.023Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:04.023Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:04.023Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:04.024Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:04.024Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:04.025Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:04.025Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:04.025Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:04.026Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:04.026Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:04.026Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:04.026Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:04.027Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:04.027Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:04.027Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:04.028Z] [LOG] Regular deductions for Shandeep null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:04.028Z] [LOG] Combined deductions for Shandeep null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 73600.01,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 73600.01
}
[2025-10-17T06:04:04.122Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:04.209Z] [LOG] Creating components for record cc510f75-5334-49f8-9b2b-793d9cfb47b9: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:04.211Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 73600.01
}
[2025-10-17T06:04:04.299Z] [LOG] Created payroll_record_component: 98a4258c-f0b7-4a3b-bdf1-2a4cb7b59083 for Attendance Deduction
[2025-10-17T06:04:04.396Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:04.572Z] [LOG] Created payroll_record_component: 2c72741b-a5ac-4c97-9bfd-8aaa4d1c6923 for Attendance Deduction
[2025-10-17T06:04:04.649Z] [LOG] ✅ Financial balances updated successfully for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:04.650Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:04.651Z] [LOG] 
======================================================================
[2025-10-17T06:04:04.651Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Nimdiya Ranasinghe null
[2025-10-17T06:04:04.652Z] [LOG] ======================================================================
[2025-10-17T06:04:04.652Z] [LOG]    Gross Salary: Rs.35000.00
[2025-10-17T06:04:04.653Z] [LOG]    Total Deductions: Rs.32199.93
[2025-10-17T06:04:04.654Z] [LOG]       - Attendance Deduction: Rs.32199.93
[2025-10-17T06:04:04.654Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:04.655Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:04.655Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:04.656Z] [LOG]    NET SALARY: Rs.2800.07
[2025-10-17T06:04:04.657Z] [LOG] ======================================================================

[2025-10-17T06:04:04.658Z] [LOG] ✅ Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-17T06:04:04.658Z] [LOG] 📊 Progress: 17/31 (54.8%)
[2025-10-17T06:04:04.659Z] [LOG] 
🧮 Processing: Anoj null (EMP000014)
[2025-10-17T06:04:04.660Z] [LOG] 📋 Record ID: 98cee313-2fd7-4cdd-84da-d34706644a3c
[2025-10-17T06:04:04.662Z] [LOG] 
======================================================================
[2025-10-17T06:04:04.664Z] [LOG] 🧮 CALCULATING PAYROLL: Anoj null (EMP000014)
[2025-10-17T06:04:04.664Z] [LOG] ======================================================================
[2025-10-17T06:04:04.923Z] [LOG] ✅ Financial balances updated successfully for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:04.924Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:04.924Z] [LOG] 
======================================================================
[2025-10-17T06:04:04.925Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Shandeep null
[2025-10-17T06:04:04.926Z] [LOG] ======================================================================
[2025-10-17T06:04:04.926Z] [LOG]    Gross Salary: Rs.80000.00
[2025-10-17T06:04:04.927Z] [LOG]    Total Deductions: Rs.73600.01
[2025-10-17T06:04:04.927Z] [LOG]       - Attendance Deduction: Rs.73600.01
[2025-10-17T06:04:04.928Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:04.928Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:04.929Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:04.930Z] [LOG]    NET SALARY: Rs.6399.99
[2025-10-17T06:04:04.931Z] [LOG] ======================================================================

[2025-10-17T06:04:04.931Z] [LOG] ✅ Shandeep null: Calculation completed successfully
[2025-10-17T06:04:04.932Z] [LOG] 📊 Progress: 21/34 (61.8%)
[2025-10-17T06:04:04.933Z] [LOG] 
🧮 Processing: Maryam null (EMP000035)
[2025-10-17T06:04:04.933Z] [LOG] 📋 Record ID: 36ed6f0c-b890-4902-ab42-ef71b738678f
[2025-10-17T06:04:04.936Z] [LOG] 
======================================================================
[2025-10-17T06:04:04.936Z] [LOG] 🧮 CALCULATING PAYROLL: Maryam null (EMP000035)
[2025-10-17T06:04:04.937Z] [LOG] ======================================================================
[2025-10-17T06:04:05.405Z] [LOG] 🔍 Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:05.406Z] [LOG]    Total components: 10
[2025-10-17T06:04:05.406Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:05.407Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:04:05.728Z] [LOG] 🔍 Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:05.729Z] [LOG]    Total components: 10
[2025-10-17T06:04:05.729Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:05.730Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-17T06:04:06.186Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:06.187Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:06.375Z] [LOG] 📊 Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:06.454Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:06.455Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:06.552Z] [LOG] 📊 Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:06.651Z] [LOG] 📊 Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:06.733Z] [LOG] 📊 Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:06.734Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:06.735Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:06.736Z] [LOG] 💰 GROSS CALCULATION for Anoj null:
[2025-10-17T06:04:06.737Z] [LOG]    Base Salary: 50000
[2025-10-17T06:04:06.737Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:06.738Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:06.738Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:07.140Z] [LOG] 📊 Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:07.143Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:07.336Z] [LOG] 📊 Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:07.336Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:07.337Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:07.338Z] [LOG] 💰 GROSS CALCULATION for Maryam null:
[2025-10-17T06:04:07.339Z] [LOG]    Base Salary: 40000
[2025-10-17T06:04:07.339Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:07.340Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:07.340Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:07.342Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:07.343Z] [LOG]    Employee ID: 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:07.343Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:07.344Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:04:07.513Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:07.522Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:07.523Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:04:07.523Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:04:07.524Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:04:07.525Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:07.687Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:07.688Z] [LOG]    Employee ID: 01440221-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:07.688Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:07.689Z] [LOG]    Base Salary: Rs.40000.00
[2025-10-17T06:04:07.700Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:07.701Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:07.701Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:07.702Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:07.703Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:07.704Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:07.704Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:04:07.705Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:04:07.706Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:07.708Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:07.709Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:04:07.709Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:07.710Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:04:07.711Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:04:07.711Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:07.712Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:07.713Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:07.714Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:07.714Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:04:07.715Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:07.716Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:07.717Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:07.718Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:07.719Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:07.720Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:07.720Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:07.721Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:07.721Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:07.722Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:07.723Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:07.723Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:07.724Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:07.724Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:07.724Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:07.725Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:07.725Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:07.725Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:07.726Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:07.726Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:07.726Z] [LOG] Regular deductions for Anoj null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:07.727Z] [LOG] Combined deductions for Anoj null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:04:07.864Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:07.865Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-17T06:04:07.865Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-17T06:04:07.866Z] [LOG]       Saturday Hourly Rate: Rs.188.24
[2025-10-17T06:04:07.867Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:07.905Z] [LOG] Creating components for record 98cee313-2fd7-4cdd-84da-d34706644a3c: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:07.907Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:04:08.042Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:08.043Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:08.043Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:08.044Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:08.044Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:08.045Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:08.046Z] [LOG]       Weekday: 17.00h × Rs.188.24 = Rs.3200.08
[2025-10-17T06:04:08.047Z] [LOG]       Saturday: 0.00h × Rs.188.24 = Rs.0.00
[2025-10-17T06:04:08.047Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:08.048Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:08.048Z] [LOG]       Total Earned Salary: Rs.3200.08
[2025-10-17T06:04:08.049Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:08.050Z] [LOG]       Base Salary: Rs.40000.00
[2025-10-17T06:04:08.051Z] [LOG]       Earned Salary: Rs.3200.08
[2025-10-17T06:04:08.051Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:08.052Z] [LOG]       Attendance Deduction: Rs.36799.92
[2025-10-17T06:04:08.053Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:08.054Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:08.054Z] [LOG]    Gross Salary: 40000
[2025-10-17T06:04:08.056Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:08.057Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:08.058Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:08.058Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:08.059Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:08.059Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:08.060Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:08.060Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:08.061Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:08.062Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:08.063Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:08.063Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:08.064Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:08.065Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:08.066Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:08.066Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:08.067Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:08.068Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:08.068Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:08.069Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:08.069Z] [LOG] Regular deductions for Maryam null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:08.070Z] [LOG] Combined deductions for Maryam null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 36799.92,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 36799.92
}
[2025-10-17T06:04:08.084Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:08.261Z] [LOG] Creating components for record 36ed6f0c-b890-4902-ab42-ef71b738678f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:08.263Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 36799.92
}
[2025-10-17T06:04:08.265Z] [LOG] Created payroll_record_component: ffba4f1f-0398-41d9-a243-317ec04de6cd for Attendance Deduction
[2025-10-17T06:04:08.446Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:08.632Z] [LOG] Created payroll_record_component: c03c64d9-e264-41e8-9f91-d2f2b9a5ad29 for Attendance Deduction
[2025-10-17T06:04:08.637Z] [LOG] ✅ Financial balances updated successfully for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:08.638Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:08.638Z] [LOG] 
======================================================================
[2025-10-17T06:04:08.639Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Anoj null
[2025-10-17T06:04:08.640Z] [LOG] ======================================================================
[2025-10-17T06:04:08.641Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:04:08.641Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:04:08.642Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:08.642Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:08.644Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:08.646Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:08.647Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:04:08.648Z] [LOG] ======================================================================

[2025-10-17T06:04:08.648Z] [LOG] ✅ Anoj null: Calculation completed successfully
[2025-10-17T06:04:08.649Z] [LOG] 📊 Progress: 18/31 (58.1%)
[2025-10-17T06:04:08.652Z] [LOG] 
🧮 Processing: Ammaar Ilham (EMP000023)
[2025-10-17T06:04:08.653Z] [LOG] 📋 Record ID: b3e8f49f-3b1c-4bf3-a51f-e32c1e1e36d5
[2025-10-17T06:04:08.655Z] [LOG] 
======================================================================
[2025-10-17T06:04:08.656Z] [LOG] 🧮 CALCULATING PAYROLL: Ammaar Ilham (EMP000023)
[2025-10-17T06:04:08.656Z] [LOG] ======================================================================
[2025-10-17T06:04:08.982Z] [LOG] ✅ Financial balances updated successfully for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:08.983Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:08.983Z] [LOG] 
======================================================================
[2025-10-17T06:04:08.984Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Maryam null
[2025-10-17T06:04:08.985Z] [LOG] ======================================================================
[2025-10-17T06:04:08.985Z] [LOG]    Gross Salary: Rs.40000.00
[2025-10-17T06:04:08.986Z] [LOG]    Total Deductions: Rs.36799.92
[2025-10-17T06:04:08.986Z] [LOG]       - Attendance Deduction: Rs.36799.92
[2025-10-17T06:04:08.987Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:08.987Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:08.988Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:08.989Z] [LOG]    NET SALARY: Rs.3200.08
[2025-10-17T06:04:08.990Z] [LOG] ======================================================================

[2025-10-17T06:04:08.990Z] [LOG] ✅ Maryam null: Calculation completed successfully
[2025-10-17T06:04:08.991Z] [LOG] 📊 Progress: 22/34 (64.7%)
[2025-10-17T06:04:08.992Z] [LOG] 
🧮 Processing: customer null (EMP000036)
[2025-10-17T06:04:08.992Z] [LOG] 📋 Record ID: c9cc82a7-3e11-4871-a5f8-693aba3ce590
[2025-10-17T06:04:08.993Z] [LOG] 
======================================================================
[2025-10-17T06:04:08.996Z] [LOG] 🧮 CALCULATING PAYROLL: customer null (EMP000036)
[2025-10-17T06:04:08.997Z] [LOG] ======================================================================
[2025-10-17T06:04:09.365Z] [LOG] 🔍 Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:09.366Z] [LOG]    Total components: 10
[2025-10-17T06:04:09.366Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:09.367Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:04:09.695Z] [LOG] 🔍 Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:09.696Z] [LOG]    Total components: 10
[2025-10-17T06:04:09.696Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:09.697Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T06:04:10.071Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:10.071Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:10.250Z] [LOG] 📊 Found 0 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:10.424Z] [LOG] 📊 Found 0 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:10.426Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:10.427Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:10.604Z] [LOG] 📊 Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:10.605Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:10.606Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:10.607Z] [LOG] 💰 GROSS CALCULATION for Ammaar Ilham:
[2025-10-17T06:04:10.607Z] [LOG]    Base Salary: 70000
[2025-10-17T06:04:10.608Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:10.608Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:10.609Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:10.611Z] [LOG] 📊 Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:10.782Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:10.784Z] [LOG] 📊 Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:10.958Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:10.959Z] [LOG]    Employee ID: 0143de00-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:10.960Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:10.960Z] [LOG]    Base Salary: Rs.70000.00
[2025-10-17T06:04:10.963Z] [LOG] 📊 Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:10.963Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:10.964Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:10.965Z] [LOG] 💰 GROSS CALCULATION for customer null:
[2025-10-17T06:04:10.966Z] [LOG]    Base Salary: 0
[2025-10-17T06:04:10.966Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:10.966Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:10.967Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.135Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:11.136Z] [LOG]       Daily Salary: Rs.2800.00
[2025-10-17T06:04:11.137Z] [LOG]       Weekday Hourly Rate: Rs.329.41
[2025-10-17T06:04:11.137Z] [LOG]       Saturday Hourly Rate: Rs.329.41
[2025-10-17T06:04:11.138Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:11.141Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:11.312Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:11.313Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:11.314Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:11.314Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:11.315Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:11.315Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:11.316Z] [LOG]       Weekday: 17.00h × Rs.329.41 = Rs.5599.97
[2025-10-17T06:04:11.317Z] [LOG]       Saturday: 0.00h × Rs.329.41 = Rs.0.00
[2025-10-17T06:04:11.317Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:11.318Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:11.318Z] [LOG]       Total Earned Salary: Rs.5599.97
[2025-10-17T06:04:11.319Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:11.321Z] [LOG]       Base Salary: Rs.70000.00
[2025-10-17T06:04:11.321Z] [LOG]       Earned Salary: Rs.5599.97
[2025-10-17T06:04:11.322Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:11.322Z] [LOG]       Attendance Deduction: Rs.64400.03
[2025-10-17T06:04:11.323Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:11.324Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:11.326Z] [LOG]    Gross Salary: 70000
[2025-10-17T06:04:11.327Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:11.328Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:11.328Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.329Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:11.330Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.330Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:11.331Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.332Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:11.333Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.334Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:11.335Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.336Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:11.336Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.337Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:11.338Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.338Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:11.339Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.339Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:11.340Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.341Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:11.341Z] [LOG] Regular deductions for Ammaar Ilham: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:11.342Z] [LOG] Combined deductions for Ammaar Ilham: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 64400.03,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 64400.03
}
[2025-10-17T06:04:11.348Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:11.351Z] [LOG]    Employee ID: 014409a2-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:11.352Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:11.353Z] [LOG]    Base Salary: Rs.0.00
[2025-10-17T06:04:11.525Z] [LOG] Creating components for record b3e8f49f-3b1c-4bf3-a51f-e32c1e1e36d5: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:11.526Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 64400.03
}
[2025-10-17T06:04:11.533Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:11.534Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-17T06:04:11.535Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-17T06:04:11.535Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-17T06:04:11.536Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:11.702Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:11.708Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:11.709Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:11.710Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:11.711Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:11.711Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:11.712Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:11.713Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:11.713Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:11.714Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:11.715Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:11.715Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T06:04:11.716Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:11.717Z] [LOG]       Base Salary: Rs.0.00
[2025-10-17T06:04:11.718Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T06:04:11.718Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:11.719Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-17T06:04:11.719Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-17T06:04:11.720Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:11.720Z] [LOG]    Gross Salary: 0
[2025-10-17T06:04:11.721Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:11.721Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:11.722Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.723Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:11.723Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.724Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:11.724Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.725Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:11.725Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.726Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:11.726Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.727Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:11.728Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.729Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:11.729Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.730Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:11.731Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.731Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:11.733Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:11.734Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:11.735Z] [LOG] Regular deductions for customer null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:11.736Z] [LOG] Combined deductions for customer null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 0
}
[2025-10-17T06:04:11.880Z] [LOG] Created payroll_record_component: c7face27-b9d2-4297-a34a-fb05b800e5e5 for Attendance Deduction
[2025-10-17T06:04:11.913Z] [LOG] Creating components for record c9cc82a7-3e11-4871-a5f8-693aba3ce590: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:11.915Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-17T06:04:12.090Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:12.240Z] [LOG] ✅ Financial balances updated successfully for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:12.241Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:12.241Z] [LOG] 
======================================================================
[2025-10-17T06:04:12.242Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ammaar Ilham
[2025-10-17T06:04:12.242Z] [LOG] ======================================================================
[2025-10-17T06:04:12.243Z] [LOG]    Gross Salary: Rs.70000.00
[2025-10-17T06:04:12.244Z] [LOG]    Total Deductions: Rs.64400.03
[2025-10-17T06:04:12.244Z] [LOG]       - Attendance Deduction: Rs.64400.03
[2025-10-17T06:04:12.245Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:12.245Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:12.246Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:12.246Z] [LOG]    NET SALARY: Rs.5599.97
[2025-10-17T06:04:12.247Z] [LOG] ======================================================================

[2025-10-17T06:04:12.248Z] [LOG] ✅ Ammaar Ilham: Calculation completed successfully
[2025-10-17T06:04:12.249Z] [LOG] 📊 Progress: 19/31 (61.3%)
[2025-10-17T06:04:12.250Z] [LOG] 
🧮 Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-17T06:04:12.253Z] [LOG] 📋 Record ID: b71993e3-bf25-4124-a619-31a5947ffac6
[2025-10-17T06:04:12.255Z] [LOG] 
======================================================================
[2025-10-17T06:04:12.256Z] [LOG] 🧮 CALCULATING PAYROLL: P.D.P Dilini Madushani null (EMP000043)
[2025-10-17T06:04:12.256Z] [LOG] ======================================================================
[2025-10-17T06:04:12.270Z] [LOG] Created payroll_record_component: b00eac84-6d08-46b8-a0f2-6ed9c49efffa for Attendance Deduction
[2025-10-17T06:04:12.640Z] [LOG] ✅ Financial balances updated successfully for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:12.641Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:12.642Z] [LOG] 
======================================================================
[2025-10-17T06:04:12.643Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: customer null
[2025-10-17T06:04:12.643Z] [LOG] ======================================================================
[2025-10-17T06:04:12.644Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-17T06:04:12.644Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-17T06:04:12.645Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-17T06:04:12.646Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:12.647Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:12.647Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:12.648Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T06:04:12.649Z] [LOG] ======================================================================

[2025-10-17T06:04:12.649Z] [LOG] ✅ customer null: Calculation completed successfully
[2025-10-17T06:04:12.650Z] [LOG] 📊 Progress: 23/34 (67.6%)
[2025-10-17T06:04:12.651Z] [LOG] 
🧮 Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-17T06:04:12.653Z] [LOG] 📋 Record ID: 4c199a6f-c0c7-4d18-884b-b8732bfefcdb
[2025-10-17T06:04:12.653Z] [LOG] 
======================================================================
[2025-10-17T06:04:12.654Z] [LOG] 🧮 CALCULATING PAYROLL: Viruna Damsiha Cooray null (EMP000038)
[2025-10-17T06:04:12.655Z] [LOG] ======================================================================
[2025-10-17T06:04:13.016Z] [LOG] 🔍 Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:13.017Z] [LOG]    Total components: 10
[2025-10-17T06:04:13.017Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:13.018Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T06:04:13.369Z] [LOG] 🔍 Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:13.370Z] [LOG]    Total components: 10
[2025-10-17T06:04:13.371Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:13.371Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:04:13.719Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:13.720Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:13.898Z] [LOG] 📊 Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:14.071Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:14.072Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:14.073Z] [LOG] 📊 Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:14.245Z] [LOG] 📊 Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:14.249Z] [LOG] 📊 Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:14.250Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:14.251Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:14.252Z] [LOG] 💰 GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-17T06:04:14.253Z] [LOG]    Base Salary: 50000
[2025-10-17T06:04:14.253Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:14.254Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:14.254Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:14.428Z] [LOG] 📊 Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:14.433Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:14.603Z] [LOG] 📊 Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:14.604Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:14.605Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:14.606Z] [LOG] 💰 GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-17T06:04:14.606Z] [LOG]    Base Salary: 50000
[2025-10-17T06:04:14.607Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:14.607Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:14.608Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:14.609Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:14.611Z] [LOG]    Employee ID: 014435dc-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:14.612Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:14.613Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:04:14.782Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:14.786Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:14.787Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:04:14.787Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:04:14.788Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:04:14.789Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:14.957Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:14.958Z] [LOG]    Employee ID: 01441633-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:14.959Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:14.959Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:04:14.964Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:14.964Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:14.965Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:14.966Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:14.966Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:14.967Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:14.968Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:04:14.969Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:04:14.969Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:14.971Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:14.972Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:04:14.973Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:14.973Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:04:14.974Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:04:14.975Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:14.975Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:14.976Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:14.976Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:14.978Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:04:14.980Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:14.983Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:14.984Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:14.985Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:14.985Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:14.986Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:14.986Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:14.986Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:14.987Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:14.987Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:14.987Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:14.988Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:14.988Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:14.988Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:14.989Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:14.989Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:14.989Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:14.990Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:14.990Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:14.990Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:14.991Z] [LOG] Regular deductions for P.D.P Dilini Madushani null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:14.991Z] [LOG] Combined deductions for P.D.P Dilini Madushani null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:04:15.134Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:15.134Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:04:15.135Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:04:15.135Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:04:15.135Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:15.167Z] [LOG] Creating components for record b71993e3-bf25-4124-a619-31a5947ffac6: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:15.168Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:04:15.309Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:15.310Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:15.310Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:15.311Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:15.311Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:15.312Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:15.313Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:04:15.313Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:04:15.314Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:15.315Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:15.315Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:04:15.316Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:15.317Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:04:15.318Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:04:15.318Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:15.319Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:15.320Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:15.322Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:15.323Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:04:15.323Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:15.324Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:15.324Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:15.325Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:15.326Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:15.326Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:15.327Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:15.328Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:15.328Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:15.329Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:15.330Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:15.330Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:15.331Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:15.331Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:15.332Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:15.333Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:15.334Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:15.335Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:15.335Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:15.336Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:15.337Z] [LOG] Regular deductions for Viruna Damsiha Cooray null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:15.337Z] [LOG] Combined deductions for Viruna Damsiha Cooray null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:04:15.344Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:15.517Z] [LOG] Creating components for record 4c199a6f-c0c7-4d18-884b-b8732bfefcdb: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:15.519Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:04:15.520Z] [LOG] Created payroll_record_component: 7b033b25-540e-47f8-9d0c-4d8dd7308ae2 for Attendance Deduction
[2025-10-17T06:04:15.701Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:15.874Z] [LOG] ✅ Financial balances updated successfully for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:15.874Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:15.875Z] [LOG] 
======================================================================
[2025-10-17T06:04:15.876Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: P.D.P Dilini Madushani null
[2025-10-17T06:04:15.876Z] [LOG] ======================================================================
[2025-10-17T06:04:15.877Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:04:15.877Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:04:15.878Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:15.879Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:15.879Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:15.880Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:15.880Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:04:15.881Z] [LOG] ======================================================================

[2025-10-17T06:04:15.882Z] [LOG] ✅ P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-17T06:04:15.883Z] [LOG] 📊 Progress: 20/31 (64.5%)
[2025-10-17T06:04:15.883Z] [LOG] 
🧮 Processing: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-17T06:04:15.884Z] [LOG] 📋 Record ID: c649f0f2-3f50-4ede-84ef-60c24d9c7eba
[2025-10-17T06:04:15.885Z] [LOG] 
======================================================================
[2025-10-17T06:04:15.888Z] [LOG] 🧮 CALCULATING PAYROLL: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-17T06:04:15.888Z] [LOG] ======================================================================
[2025-10-17T06:04:15.890Z] [LOG] Created payroll_record_component: ae052ee4-db13-4c43-bd8c-769bb96f2013 for Attendance Deduction
[2025-10-17T06:04:16.255Z] [LOG] ✅ Financial balances updated successfully for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:16.255Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:16.256Z] [LOG] 
======================================================================
[2025-10-17T06:04:16.257Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Viruna Damsiha Cooray null
[2025-10-17T06:04:16.257Z] [LOG] ======================================================================
[2025-10-17T06:04:16.258Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:04:16.259Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:04:16.259Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:16.260Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:16.260Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:16.261Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:16.261Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:04:16.262Z] [LOG] ======================================================================

[2025-10-17T06:04:16.263Z] [LOG] ✅ Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-17T06:04:16.264Z] [LOG] 📊 Progress: 24/34 (70.6%)
[2025-10-17T06:04:16.265Z] [LOG] 
🧮 Processing: Sithira null (EMP000039)
[2025-10-17T06:04:16.266Z] [LOG] 📋 Record ID: 1e535d88-d415-43fc-9de3-bbd5f66694ae
[2025-10-17T06:04:16.267Z] [LOG] 
======================================================================
[2025-10-17T06:04:16.268Z] [LOG] 🧮 CALCULATING PAYROLL: Sithira null (EMP000039)
[2025-10-17T06:04:16.268Z] [LOG] ======================================================================
[2025-10-17T06:04:16.606Z] [LOG] 🔍 Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:16.607Z] [LOG]    Total components: 10
[2025-10-17T06:04:16.607Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:16.608Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:04:16.975Z] [LOG] 🔍 Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:16.976Z] [LOG]    Total components: 10
[2025-10-17T06:04:16.976Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:16.977Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-17T06:04:17.315Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:17.316Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:17.491Z] [LOG] 📊 Found 0 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:17.712Z] [LOG] 📊 Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:17.717Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:17.718Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:17.893Z] [LOG] 📊 Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:17.895Z] [LOG] 📊 Found 0 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:17.895Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:17.896Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:17.897Z] [LOG] 💰 GROSS CALCULATION for Ashen Nirmal Wadugodapitiya null:
[2025-10-17T06:04:17.898Z] [LOG]    Base Salary: 50000
[2025-10-17T06:04:17.898Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:17.899Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:17.900Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.069Z] [LOG] 📊 Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:18.076Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:18.246Z] [LOG] 📊 Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:18.246Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:18.246Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:18.247Z] [LOG] 💰 GROSS CALCULATION for Sithira null:
[2025-10-17T06:04:18.247Z] [LOG]    Base Salary: 40000
[2025-10-17T06:04:18.247Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:18.247Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:18.247Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.261Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:18.261Z] [LOG]    Employee ID: 0144461e-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:18.262Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:18.262Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:04:18.424Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:18.439Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:18.440Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:04:18.441Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:04:18.441Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:04:18.442Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:18.599Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:18.600Z] [LOG]    Employee ID: 01441e19-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:18.600Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:18.601Z] [LOG]    Base Salary: Rs.40000.00
[2025-10-17T06:04:18.616Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:18.616Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:18.617Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:18.618Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:18.619Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:18.619Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:18.620Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:04:18.620Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:04:18.621Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:18.621Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:18.622Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:04:18.623Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:18.624Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:04:18.624Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:04:18.625Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:18.625Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:18.626Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:18.626Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:18.627Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:04:18.628Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:18.628Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:18.629Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.630Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:18.631Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.631Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:18.632Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.634Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:18.635Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.635Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:18.636Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.637Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:18.637Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.638Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:18.639Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.639Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:18.640Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.641Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:18.641Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.642Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:18.642Z] [LOG] Regular deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:18.643Z] [LOG] Combined deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:04:18.774Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:18.774Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-17T06:04:18.775Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-17T06:04:18.776Z] [LOG]       Saturday Hourly Rate: Rs.188.24
[2025-10-17T06:04:18.776Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:18.818Z] [LOG] Creating components for record c649f0f2-3f50-4ede-84ef-60c24d9c7eba: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:18.820Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:04:18.951Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:18.952Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:18.953Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:18.953Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:18.954Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:18.954Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:18.955Z] [LOG]       Weekday: 17.00h × Rs.188.24 = Rs.3200.08
[2025-10-17T06:04:18.956Z] [LOG]       Saturday: 0.00h × Rs.188.24 = Rs.0.00
[2025-10-17T06:04:18.956Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:18.957Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:18.957Z] [LOG]       Total Earned Salary: Rs.3200.08
[2025-10-17T06:04:18.958Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:18.959Z] [LOG]       Base Salary: Rs.40000.00
[2025-10-17T06:04:18.960Z] [LOG]       Earned Salary: Rs.3200.08
[2025-10-17T06:04:18.960Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:18.961Z] [LOG]       Attendance Deduction: Rs.36799.92
[2025-10-17T06:04:18.961Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:18.963Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:18.965Z] [LOG]    Gross Salary: 40000
[2025-10-17T06:04:18.966Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:18.966Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:18.967Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.968Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:18.968Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.969Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:18.970Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.970Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:18.971Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.972Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:18.972Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.973Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:18.973Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.974Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:18.974Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.975Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:18.975Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.976Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:18.976Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:18.976Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:18.977Z] [LOG] Regular deductions for Sithira null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:18.977Z] [LOG] Combined deductions for Sithira null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 36799.92,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 36799.92
}
[2025-10-17T06:04:19.000Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:19.158Z] [LOG] Creating components for record 1e535d88-d415-43fc-9de3-bbd5f66694ae: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:19.160Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 36799.92
}
[2025-10-17T06:04:19.177Z] [LOG] Created payroll_record_component: 8887c394-643b-498b-8215-803ceb67060e for Attendance Deduction
[2025-10-17T06:04:19.359Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:19.556Z] [LOG] ✅ Financial balances updated successfully for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:19.557Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:19.558Z] [LOG] 
======================================================================
[2025-10-17T06:04:19.560Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ashen Nirmal Wadugodapitiya null
[2025-10-17T06:04:19.560Z] [LOG] ======================================================================
[2025-10-17T06:04:19.561Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:04:19.562Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:04:19.562Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:19.563Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:19.564Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:19.564Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:19.565Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:04:19.565Z] [LOG] ======================================================================

[2025-10-17T06:04:19.566Z] [LOG] ✅ Ashen Nirmal Wadugodapitiya null: Calculation completed successfully
[2025-10-17T06:04:19.567Z] [LOG] 📊 Progress: 21/31 (67.7%)
[2025-10-17T06:04:19.568Z] [LOG] 
🧮 Processing: Dharshika null (EMP000009)
[2025-10-17T06:04:19.571Z] [LOG] 📋 Record ID: c6d62800-02f8-46e1-8a03-6fcf1e5fbad2
[2025-10-17T06:04:19.571Z] [LOG] 
======================================================================
[2025-10-17T06:04:19.572Z] [LOG] 🧮 CALCULATING PAYROLL: Dharshika null (EMP000009)
[2025-10-17T06:04:19.573Z] [LOG] ======================================================================
[2025-10-17T06:04:19.574Z] [LOG] Created payroll_record_component: 0b66ff09-5f35-426e-9062-18cfb4e2bf08 for Attendance Deduction
[2025-10-17T06:04:19.931Z] [LOG] ✅ Financial balances updated successfully for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:19.931Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:19.932Z] [LOG] 
======================================================================
[2025-10-17T06:04:19.933Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sithira null
[2025-10-17T06:04:19.933Z] [LOG] ======================================================================
[2025-10-17T06:04:19.934Z] [LOG]    Gross Salary: Rs.40000.00
[2025-10-17T06:04:19.934Z] [LOG]    Total Deductions: Rs.36799.92
[2025-10-17T06:04:19.935Z] [LOG]       - Attendance Deduction: Rs.36799.92
[2025-10-17T06:04:19.935Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:19.936Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:19.937Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:19.937Z] [LOG]    NET SALARY: Rs.3200.08
[2025-10-17T06:04:19.938Z] [LOG] ======================================================================

[2025-10-17T06:04:19.939Z] [LOG] ✅ Sithira null: Calculation completed successfully
[2025-10-17T06:04:19.939Z] [LOG] 📊 Progress: 25/34 (73.5%)
[2025-10-17T06:04:19.940Z] [LOG] 
🧮 Processing: Chemil null (EMP000040)
[2025-10-17T06:04:19.941Z] [LOG] 📋 Record ID: 11e788ef-9c3f-4d4e-a31c-ff17060b9384
[2025-10-17T06:04:19.943Z] [LOG] 
======================================================================
[2025-10-17T06:04:19.944Z] [LOG] 🧮 CALCULATING PAYROLL: Chemil null (EMP000040)
[2025-10-17T06:04:19.945Z] [LOG] ======================================================================
[2025-10-17T06:04:20.293Z] [LOG] 🔍 Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:20.294Z] [LOG]    Total components: 10
[2025-10-17T06:04:20.294Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:20.295Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:04:20.645Z] [LOG] 🔍 Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:20.646Z] [LOG]    Total components: 10
[2025-10-17T06:04:20.646Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:20.647Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:04:20.994Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:20.994Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:21.167Z] [LOG] 📊 Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:21.341Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:21.341Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:21.343Z] [LOG] 📊 Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:21.516Z] [LOG] 📊 Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:21.517Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:21.518Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:21.519Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:21.520Z] [LOG] 💰 GROSS CALCULATION for Dharshika null:
[2025-10-17T06:04:21.521Z] [LOG]    Base Salary: 100000
[2025-10-17T06:04:21.521Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:21.522Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:21.523Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:21.690Z] [LOG] 📊 Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:21.697Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:21.880Z] [LOG] 📊 Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:21.881Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:21.882Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:21.883Z] [LOG] 💰 GROSS CALCULATION for Chemil null:
[2025-10-17T06:04:21.883Z] [LOG]    Base Salary: 250000
[2025-10-17T06:04:21.884Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:21.884Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:21.885Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:21.886Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:21.888Z] [LOG]    Employee ID: 0143a994-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:21.888Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:21.889Z] [LOG]    Base Salary: Rs.100000.00
[2025-10-17T06:04:22.057Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:22.063Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:22.063Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-17T06:04:22.065Z] [LOG]       Weekday Hourly Rate: Rs.470.59
[2025-10-17T06:04:22.065Z] [LOG]       Saturday Hourly Rate: Rs.470.59
[2025-10-17T06:04:22.066Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:22.233Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:22.234Z] [LOG]    Employee ID: 01442599-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:22.234Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:22.235Z] [LOG]    Base Salary: Rs.250000.00
[2025-10-17T06:04:22.239Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:22.240Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:22.241Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:22.241Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:22.242Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:22.243Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:22.244Z] [LOG]       Weekday: 17.00h × Rs.470.59 = Rs.8000.03
[2025-10-17T06:04:22.244Z] [LOG]       Saturday: 0.00h × Rs.470.59 = Rs.0.00
[2025-10-17T06:04:22.245Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:22.247Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:22.248Z] [LOG]       Total Earned Salary: Rs.8000.03
[2025-10-17T06:04:22.249Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:22.249Z] [LOG]       Base Salary: Rs.100000.00
[2025-10-17T06:04:22.250Z] [LOG]       Earned Salary: Rs.8000.03
[2025-10-17T06:04:22.251Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:22.251Z] [LOG]       Attendance Deduction: Rs.91999.97
[2025-10-17T06:04:22.252Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:22.253Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:22.254Z] [LOG]    Gross Salary: 100000
[2025-10-17T06:04:22.254Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:22.255Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:22.255Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.256Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:22.256Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.257Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:22.257Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.258Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:22.259Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.259Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:22.260Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.261Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:22.261Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.262Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:22.264Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.265Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:22.266Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.267Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:22.268Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.269Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:22.269Z] [LOG] Regular deductions for Dharshika null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:22.270Z] [LOG] Combined deductions for Dharshika null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 91999.97,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 91999.97
}
[2025-10-17T06:04:22.423Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:22.424Z] [LOG]       Daily Salary: Rs.10000.00
[2025-10-17T06:04:22.425Z] [LOG]       Weekday Hourly Rate: Rs.1176.47
[2025-10-17T06:04:22.425Z] [LOG]       Saturday Hourly Rate: Rs.1176.47
[2025-10-17T06:04:22.426Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:22.452Z] [LOG] Creating components for record c6d62800-02f8-46e1-8a03-6fcf1e5fbad2: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:22.454Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 91999.97
}
[2025-10-17T06:04:22.640Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:22.640Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:22.641Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:22.641Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:22.642Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:22.643Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:22.643Z] [LOG]       Weekday: 17.00h × Rs.1176.47 = Rs.19999.99
[2025-10-17T06:04:22.644Z] [LOG]       Saturday: 0.00h × Rs.1176.47 = Rs.0.00
[2025-10-17T06:04:22.645Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:22.645Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:22.646Z] [LOG]       Total Earned Salary: Rs.19999.99
[2025-10-17T06:04:22.647Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:22.648Z] [LOG]       Base Salary: Rs.250000.00
[2025-10-17T06:04:22.648Z] [LOG]       Earned Salary: Rs.19999.99
[2025-10-17T06:04:22.649Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:22.649Z] [LOG]       Attendance Deduction: Rs.230000.01
[2025-10-17T06:04:22.650Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:22.651Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:22.653Z] [LOG]    Gross Salary: 250000
[2025-10-17T06:04:22.653Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:22.654Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:22.655Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.655Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:22.656Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.656Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:22.657Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.658Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:22.658Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.659Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:22.660Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.660Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:22.661Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.661Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:22.663Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.664Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:22.664Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.664Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:22.665Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:22.666Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:22.666Z] [LOG] Regular deductions for Chemil null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:22.667Z] [LOG] Combined deductions for Chemil null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 230000.01,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 230000.01
}
[2025-10-17T06:04:22.670Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:22.872Z] [LOG] Created payroll_record_component: d2007d2e-edea-4010-a8f7-5148ae47a214 for Attendance Deduction
[2025-10-17T06:04:22.873Z] [LOG] Creating components for record 11e788ef-9c3f-4d4e-a31c-ff17060b9384: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 1
}
[2025-10-17T06:04:22.875Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 230000.01
}
[2025-10-17T06:04:23.083Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:23.318Z] [LOG] ✅ Financial balances updated successfully for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:23.318Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:23.319Z] [LOG] 
======================================================================
[2025-10-17T06:04:23.319Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Dharshika null
[2025-10-17T06:04:23.320Z] [LOG] ======================================================================
[2025-10-17T06:04:23.321Z] [LOG]    Gross Salary: Rs.100000.00
[2025-10-17T06:04:23.321Z] [LOG]    Total Deductions: Rs.91999.97
[2025-10-17T06:04:23.322Z] [LOG]       - Attendance Deduction: Rs.91999.97
[2025-10-17T06:04:23.322Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:23.323Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:23.324Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:23.325Z] [LOG]    NET SALARY: Rs.8000.03
[2025-10-17T06:04:23.325Z] [LOG] ======================================================================

[2025-10-17T06:04:23.326Z] [LOG] ✅ Dharshika null: Calculation completed successfully
[2025-10-17T06:04:23.327Z] [LOG] 📊 Progress: 22/31 (71.0%)
[2025-10-17T06:04:23.327Z] [LOG] 
🧮 Processing: customer null (EMP000036)
[2025-10-17T06:04:23.329Z] [LOG] 📋 Record ID: c9cc82a7-3e11-4871-a5f8-693aba3ce590
[2025-10-17T06:04:23.331Z] [LOG] 
======================================================================
[2025-10-17T06:04:23.332Z] [LOG] 🧮 CALCULATING PAYROLL: customer null (EMP000036)
[2025-10-17T06:04:23.332Z] [LOG] ======================================================================
[2025-10-17T06:04:23.334Z] [LOG] Created payroll_record_component: 3b78bfd0-c250-4b53-85f8-0e324f7b30ad for Attendance Deduction
[2025-10-17T06:04:23.335Z] [LOG] Processing component: {
  "name": "Income Tax",
  "type": "tax",
  "amount": 12000
}
[2025-10-17T06:04:23.599Z] [LOG] Using existing component ID: 72f98b53-4bd5-4713-98d0-e3a641ad8d0f
[2025-10-17T06:04:23.792Z] [LOG] Created payroll_record_component: 741facbd-5fdd-441b-a3ad-2b43bef87bb9 for Income Tax
[2025-10-17T06:04:24.135Z] [LOG] 🔍 Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:24.136Z] [LOG]    Total components: 10
[2025-10-17T06:04:24.136Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:24.137Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T06:04:24.141Z] [LOG] ✅ Financial balances updated successfully for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:24.141Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:24.142Z] [LOG] 
======================================================================
[2025-10-17T06:04:24.143Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chemil null
[2025-10-17T06:04:24.144Z] [LOG] ======================================================================
[2025-10-17T06:04:24.144Z] [LOG]    Gross Salary: Rs.250000.00
[2025-10-17T06:04:24.145Z] [LOG]    Total Deductions: Rs.230000.01
[2025-10-17T06:04:24.146Z] [LOG]       - Attendance Deduction: Rs.230000.01
[2025-10-17T06:04:24.147Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:24.148Z] [LOG]    Total Taxes: Rs.12000.00
[2025-10-17T06:04:24.149Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:24.150Z] [LOG]    NET SALARY: Rs.7999.99
[2025-10-17T06:04:24.150Z] [LOG] ======================================================================

[2025-10-17T06:04:24.151Z] [LOG] ✅ Chemil null: Calculation completed successfully
[2025-10-17T06:04:24.152Z] [LOG] 📊 Progress: 26/34 (76.5%)
[2025-10-17T06:04:24.152Z] [LOG] 
🧮 Processing: Office Team null (EMP000041)
[2025-10-17T06:04:24.153Z] [LOG] 📋 Record ID: 89102bda-881f-4ca0-9a68-6d23f0d6c7fe
[2025-10-17T06:04:24.154Z] [LOG] 
======================================================================
[2025-10-17T06:04:24.155Z] [LOG] 🧮 CALCULATING PAYROLL: Office Team null (EMP000041)
[2025-10-17T06:04:24.155Z] [LOG] ======================================================================
[2025-10-17T06:04:24.849Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:24.850Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:24.851Z] [LOG] 🔍 Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:24.852Z] [LOG]    Total components: 10
[2025-10-17T06:04:24.852Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:24.853Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T06:04:25.022Z] [LOG] 📊 Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:25.200Z] [LOG] 📊 Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:25.373Z] [LOG] 📊 Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:25.374Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:25.375Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:25.376Z] [LOG] 💰 GROSS CALCULATION for customer null:
[2025-10-17T06:04:25.376Z] [LOG]    Base Salary: 0
[2025-10-17T06:04:25.377Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:25.378Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:25.378Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:25.554Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:25.562Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:25.562Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:25.731Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:25.732Z] [LOG]    Employee ID: 014409a2-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:25.733Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:25.733Z] [LOG]    Base Salary: Rs.0.00
[2025-10-17T06:04:25.735Z] [LOG] 📊 Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:25.909Z] [LOG] 📊 Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:25.911Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:25.911Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-17T06:04:25.912Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-17T06:04:25.913Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-17T06:04:25.913Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:26.084Z] [LOG] 📊 Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:26.085Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:26.086Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:26.087Z] [LOG] 💰 GROSS CALCULATION for Office Team null:
[2025-10-17T06:04:26.087Z] [LOG]    Base Salary: 1
[2025-10-17T06:04:26.088Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:26.088Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:26.089Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.091Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:26.091Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:26.092Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:26.093Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:26.093Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:26.094Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:26.095Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:26.096Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:26.097Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:26.098Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:26.099Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T06:04:26.099Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:26.100Z] [LOG]       Base Salary: Rs.0.00
[2025-10-17T06:04:26.101Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T06:04:26.101Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:26.103Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-17T06:04:26.103Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-17T06:04:26.104Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:26.105Z] [LOG]    Gross Salary: 0
[2025-10-17T06:04:26.105Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:26.106Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:26.106Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.107Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:26.108Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.108Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:26.109Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.109Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:26.110Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.111Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:26.111Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.112Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:26.113Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.114Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:26.115Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.115Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:26.116Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.116Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:26.117Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.117Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:26.117Z] [LOG] Regular deductions for customer null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:26.118Z] [LOG] Combined deductions for customer null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 0
}
[2025-10-17T06:04:26.266Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:26.302Z] [LOG] Creating components for record c9cc82a7-3e11-4871-a5f8-693aba3ce590: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:26.304Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-17T06:04:26.440Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:26.441Z] [LOG]    Employee ID: 01442b21-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:26.441Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:26.441Z] [LOG]    Base Salary: Rs.1.00
[2025-10-17T06:04:26.481Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:26.617Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:26.618Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-17T06:04:26.619Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-17T06:04:26.619Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-17T06:04:26.620Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:26.658Z] [LOG] Created payroll_record_component: 3fd03b4b-55cb-4f2d-bd2e-3fe49a3b22b7 for Attendance Deduction
[2025-10-17T06:04:26.795Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:26.796Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:26.797Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:26.797Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:26.798Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:26.798Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:26.799Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:26.800Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:26.800Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:26.801Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:26.801Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T06:04:26.802Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:26.803Z] [LOG]       Base Salary: Rs.1.00
[2025-10-17T06:04:26.804Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T06:04:26.805Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:26.805Z] [LOG]       Attendance Deduction: Rs.1.00
[2025-10-17T06:04:26.806Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-17T06:04:26.807Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:26.808Z] [LOG]    Gross Salary: 1
[2025-10-17T06:04:26.809Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:26.810Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:26.810Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.811Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:26.811Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.813Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:26.814Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.815Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:26.816Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.816Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:26.817Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.818Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:26.819Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.820Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:26.820Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.821Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:26.821Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.822Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:26.822Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:26.823Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:26.824Z] [LOG] Regular deductions for Office Team null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:26.825Z] [LOG] Combined deductions for Office Team null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 1
}
[2025-10-17T06:04:27.004Z] [LOG] Creating components for record 89102bda-881f-4ca0-9a68-6d23f0d6c7fe: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:27.005Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1
}
[2025-10-17T06:04:27.007Z] [LOG] ✅ Financial balances updated successfully for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:27.008Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:27.008Z] [LOG] 
======================================================================
[2025-10-17T06:04:27.009Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: customer null
[2025-10-17T06:04:27.010Z] [LOG] ======================================================================
[2025-10-17T06:04:27.011Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-17T06:04:27.011Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-17T06:04:27.012Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-17T06:04:27.013Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:27.013Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:27.014Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:27.015Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T06:04:27.016Z] [LOG] ======================================================================

[2025-10-17T06:04:27.017Z] [LOG] ✅ customer null: Calculation completed successfully
[2025-10-17T06:04:27.018Z] [LOG] 📊 Progress: 23/31 (74.2%)
[2025-10-17T06:04:27.019Z] [LOG] 
🧮 Processing: Shandeep null (EMP000034)
[2025-10-17T06:04:27.019Z] [LOG] 📋 Record ID: cc510f75-5334-49f8-9b2b-793d9cfb47b9
[2025-10-17T06:04:27.020Z] [LOG] 
======================================================================
[2025-10-17T06:04:27.021Z] [LOG] 🧮 CALCULATING PAYROLL: Shandeep null (EMP000034)
[2025-10-17T06:04:27.022Z] [LOG] ======================================================================
[2025-10-17T06:04:27.180Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:27.355Z] [LOG] Created payroll_record_component: f5b3052d-446a-4853-a3a1-78adde5c14c2 for Attendance Deduction
[2025-10-17T06:04:27.705Z] [LOG] ✅ Financial balances updated successfully for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:27.706Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:27.706Z] [LOG] 
======================================================================
[2025-10-17T06:04:27.707Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Office Team null
[2025-10-17T06:04:27.708Z] [LOG] ======================================================================
[2025-10-17T06:04:27.708Z] [LOG]    Gross Salary: Rs.1.00
[2025-10-17T06:04:27.709Z] [LOG]    Total Deductions: Rs.1.00
[2025-10-17T06:04:27.710Z] [LOG]       - Attendance Deduction: Rs.1.00
[2025-10-17T06:04:27.710Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:27.711Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:27.712Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:27.713Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T06:04:27.713Z] [LOG] ======================================================================

[2025-10-17T06:04:27.714Z] [LOG] ✅ Office Team null: Calculation completed successfully
[2025-10-17T06:04:27.715Z] [LOG] 📊 Progress: 27/34 (79.4%)
[2025-10-17T06:04:27.715Z] [LOG] 
🧮 Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-17T06:04:27.716Z] [LOG] 📋 Record ID: d3ed6fe6-e833-49bb-9803-b1eb5b17d946
[2025-10-17T06:04:27.718Z] [LOG] 
======================================================================
[2025-10-17T06:04:27.719Z] [LOG] 🧮 CALCULATING PAYROLL: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-17T06:04:27.720Z] [LOG] ======================================================================
[2025-10-17T06:04:27.721Z] [LOG] 🔍 Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:27.722Z] [LOG]    Total components: 10
[2025-10-17T06:04:27.723Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:27.723Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:04:28.412Z] [LOG] 🔍 Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:28.413Z] [LOG]    Total components: 10
[2025-10-17T06:04:28.413Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:28.414Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-17T06:04:28.421Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:28.422Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:28.601Z] [LOG] 📊 Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:28.776Z] [LOG] 📊 Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:28.948Z] [LOG] 📊 Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:28.949Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:28.950Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:28.951Z] [LOG] 💰 GROSS CALCULATION for Shandeep null:
[2025-10-17T06:04:28.951Z] [LOG]    Base Salary: 80000
[2025-10-17T06:04:28.952Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:28.952Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:28.953Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:29.123Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:29.123Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:29.136Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:29.307Z] [LOG] 📊 Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:29.309Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:29.310Z] [LOG]    Employee ID: 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:29.310Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:29.311Z] [LOG]    Base Salary: Rs.80000.00
[2025-10-17T06:04:29.539Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:29.540Z] [LOG]       Daily Salary: Rs.3200.00
[2025-10-17T06:04:29.540Z] [LOG]       Weekday Hourly Rate: Rs.376.47
[2025-10-17T06:04:29.541Z] [LOG]       Saturday Hourly Rate: Rs.376.47
[2025-10-17T06:04:29.541Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:29.543Z] [LOG] 📊 Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:29.716Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:29.717Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:29.718Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:29.718Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:29.719Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:29.719Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:29.720Z] [LOG]       Weekday: 17.00h × Rs.376.47 = Rs.6399.99
[2025-10-17T06:04:29.721Z] [LOG]       Saturday: 0.00h × Rs.376.47 = Rs.0.00
[2025-10-17T06:04:29.721Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:29.722Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:29.722Z] [LOG]       Total Earned Salary: Rs.6399.99
[2025-10-17T06:04:29.723Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:29.724Z] [LOG]       Base Salary: Rs.80000.00
[2025-10-17T06:04:29.725Z] [LOG]       Earned Salary: Rs.6399.99
[2025-10-17T06:04:29.725Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:29.726Z] [LOG]       Attendance Deduction: Rs.73600.01
[2025-10-17T06:04:29.726Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:29.730Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:29.731Z] [LOG]    Gross Salary: 80000
[2025-10-17T06:04:29.731Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:29.732Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:29.733Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:29.733Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:29.734Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:29.736Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:29.737Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:29.737Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:29.738Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:29.738Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:29.739Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:29.739Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:29.740Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:29.741Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:29.742Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:29.742Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:29.743Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:29.743Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:29.744Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:29.744Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:29.744Z] [LOG] Regular deductions for Shandeep null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:29.745Z] [LOG] Combined deductions for Shandeep null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 73600.01,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 73600.01
}
[2025-10-17T06:04:29.748Z] [LOG] 📊 Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:29.749Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:29.749Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:29.750Z] [LOG] 💰 GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-17T06:04:29.750Z] [LOG]    Base Salary: 50000
[2025-10-17T06:04:29.751Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:29.751Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:29.751Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:29.921Z] [LOG] Creating components for record cc510f75-5334-49f8-9b2b-793d9cfb47b9: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:29.923Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 73600.01
}
[2025-10-17T06:04:29.931Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:30.098Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:30.108Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:30.109Z] [LOG]    Employee ID: 0144315c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:30.110Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:30.111Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:04:30.272Z] [LOG] Created payroll_record_component: abaf21be-df17-4459-b474-11bf92cf8c08 for Attendance Deduction
[2025-10-17T06:04:30.285Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:30.285Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:04:30.286Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:04:30.287Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:04:30.287Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:30.463Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:30.464Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:30.464Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:30.465Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:30.466Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:30.466Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:30.467Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:04:30.468Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:04:30.468Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:30.469Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:30.469Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:04:30.470Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:30.471Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:04:30.472Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:04:30.472Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:30.473Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:30.474Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:30.476Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:30.477Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:04:30.477Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:30.478Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:30.478Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:30.479Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:30.480Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:30.481Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:30.481Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:30.483Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:30.484Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:30.485Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:30.485Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:30.486Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:30.487Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:30.487Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:30.488Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:30.489Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:30.489Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:30.490Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:30.490Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:30.491Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:30.491Z] [LOG] Regular deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:30.492Z] [LOG] Combined deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:04:30.632Z] [LOG] ✅ Financial balances updated successfully for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:30.632Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:30.633Z] [LOG] 
======================================================================
[2025-10-17T06:04:30.634Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Shandeep null
[2025-10-17T06:04:30.634Z] [LOG] ======================================================================
[2025-10-17T06:04:30.635Z] [LOG]    Gross Salary: Rs.80000.00
[2025-10-17T06:04:30.635Z] [LOG]    Total Deductions: Rs.73600.01
[2025-10-17T06:04:30.636Z] [LOG]       - Attendance Deduction: Rs.73600.01
[2025-10-17T06:04:30.636Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:30.637Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:30.637Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:30.638Z] [LOG]    NET SALARY: Rs.6399.99
[2025-10-17T06:04:30.639Z] [LOG] ======================================================================

[2025-10-17T06:04:30.640Z] [LOG] ✅ Shandeep null: Calculation completed successfully
[2025-10-17T06:04:30.640Z] [LOG] 📊 Progress: 24/31 (77.4%)
[2025-10-17T06:04:30.641Z] [LOG] 
🧮 Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-17T06:04:30.642Z] [LOG] 📋 Record ID: d3ed6fe6-e833-49bb-9803-b1eb5b17d946
[2025-10-17T06:04:30.643Z] [LOG] 
======================================================================
[2025-10-17T06:04:30.645Z] [LOG] 🧮 CALCULATING PAYROLL: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-17T06:04:30.647Z] [LOG] ======================================================================
[2025-10-17T06:04:30.686Z] [LOG] Creating components for record d3ed6fe6-e833-49bb-9803-b1eb5b17d946: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:30.689Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:04:30.865Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:31.042Z] [LOG] Created payroll_record_component: c5af350c-21a0-40be-816f-ca254e75aab6 for Attendance Deduction
[2025-10-17T06:04:31.352Z] [LOG] 🔍 Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:31.353Z] [LOG]    Total components: 10
[2025-10-17T06:04:31.353Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:31.354Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-17T06:04:31.390Z] [LOG] ✅ Financial balances updated successfully for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:31.391Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:31.391Z] [LOG] 
======================================================================
[2025-10-17T06:04:31.392Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: G.M Supathala Sadaru Madhushan null
[2025-10-17T06:04:31.393Z] [LOG] ======================================================================
[2025-10-17T06:04:31.393Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:04:31.394Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:04:31.395Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:31.395Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:31.397Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:31.398Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:31.398Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:04:31.399Z] [LOG] ======================================================================

[2025-10-17T06:04:31.400Z] [LOG] ✅ G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-17T06:04:31.402Z] [LOG] 📊 Progress: 28/34 (82.4%)
[2025-10-17T06:04:31.404Z] [LOG] 
🧮 Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-17T06:04:31.405Z] [LOG] 📋 Record ID: b71993e3-bf25-4124-a619-31a5947ffac6
[2025-10-17T06:04:31.405Z] [LOG] 
======================================================================
[2025-10-17T06:04:31.406Z] [LOG] 🧮 CALCULATING PAYROLL: P.D.P Dilini Madushani null (EMP000043)
[2025-10-17T06:04:31.407Z] [LOG] ======================================================================
[2025-10-17T06:04:32.057Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:32.058Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:32.186Z] [LOG] 🔍 Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:32.187Z] [LOG]    Total components: 10
[2025-10-17T06:04:32.187Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:32.188Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T06:04:32.232Z] [LOG] 📊 Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:32.420Z] [LOG] 📊 Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:32.594Z] [LOG] 📊 Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:32.595Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:32.595Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:32.596Z] [LOG] 💰 GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-17T06:04:32.596Z] [LOG]    Base Salary: 50000
[2025-10-17T06:04:32.597Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:32.597Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:32.598Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:32.782Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:32.887Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:32.887Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:32.956Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:32.957Z] [LOG]    Employee ID: 0144315c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:32.958Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:32.958Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:04:33.061Z] [LOG] 📊 Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:33.137Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:33.138Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:04:33.138Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:04:33.139Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:04:33.139Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:33.235Z] [LOG] 📊 Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:33.315Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:33.315Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:33.316Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:33.317Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:33.317Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:33.318Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:33.318Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:04:33.319Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:04:33.320Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:33.320Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:33.321Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:04:33.321Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:33.322Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:04:33.323Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:04:33.324Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:33.324Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:33.325Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:33.326Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:33.327Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:04:33.328Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:33.330Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:33.330Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:33.331Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:33.332Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:33.332Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:33.334Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:33.335Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:33.336Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:33.337Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:33.337Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:33.338Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:33.338Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:33.339Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:33.340Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:33.340Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:33.341Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:33.342Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:33.342Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:33.343Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:33.343Z] [LOG] Regular deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:33.344Z] [LOG] Combined deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:04:33.409Z] [LOG] 📊 Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:33.409Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:33.410Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:33.410Z] [LOG] 💰 GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-17T06:04:33.411Z] [LOG]    Base Salary: 50000
[2025-10-17T06:04:33.411Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:33.411Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:33.411Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:33.519Z] [LOG] Creating components for record d3ed6fe6-e833-49bb-9803-b1eb5b17d946: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:33.521Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:04:33.585Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:33.696Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:33.759Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:33.760Z] [LOG]    Employee ID: 014435dc-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:33.760Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:33.761Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:04:33.871Z] [LOG] Created payroll_record_component: d88a2fda-cdf6-4b9d-9d38-196d649e94ba for Attendance Deduction
[2025-10-17T06:04:33.936Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:33.937Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:04:33.938Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:04:33.938Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:04:33.939Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:34.112Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:34.113Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:34.114Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:34.114Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:34.115Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:34.115Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:34.116Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:04:34.117Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:04:34.117Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:34.118Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:34.118Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:04:34.119Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:34.120Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:04:34.121Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:04:34.121Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:34.122Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:34.122Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:34.123Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:34.124Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:04:34.126Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:34.126Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:34.127Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:34.128Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:34.128Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:34.130Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:34.131Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:34.131Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:34.132Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:34.133Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:34.134Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:34.134Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:34.136Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:34.137Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:34.138Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:34.138Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:34.139Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:34.139Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:34.140Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:34.140Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:34.141Z] [LOG] Regular deductions for P.D.P Dilini Madushani null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:34.142Z] [LOG] Combined deductions for P.D.P Dilini Madushani null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:04:34.220Z] [LOG] ✅ Financial balances updated successfully for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:34.220Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:34.220Z] [LOG] 
======================================================================
[2025-10-17T06:04:34.221Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: G.M Supathala Sadaru Madhushan null
[2025-10-17T06:04:34.221Z] [LOG] ======================================================================
[2025-10-17T06:04:34.222Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:04:34.222Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:04:34.223Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:34.223Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:34.224Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:34.225Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:34.225Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:04:34.226Z] [LOG] ======================================================================

[2025-10-17T06:04:34.227Z] [LOG] ✅ G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-17T06:04:34.227Z] [LOG] 📊 Progress: 25/31 (80.6%)
[2025-10-17T06:04:34.228Z] [LOG] 
🧮 Processing: Sumaiya null (EMP000016)
[2025-10-17T06:04:34.229Z] [LOG] 📋 Record ID: d62e49f3-d160-4624-9967-198ff8096457
[2025-10-17T06:04:34.230Z] [LOG] 
======================================================================
[2025-10-17T06:04:34.232Z] [LOG] 🧮 CALCULATING PAYROLL: Sumaiya null (EMP000016)
[2025-10-17T06:04:34.233Z] [LOG] ======================================================================
[2025-10-17T06:04:34.324Z] [LOG] Creating components for record b71993e3-bf25-4124-a619-31a5947ffac6: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:34.325Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:04:34.501Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:34.674Z] [LOG] Created payroll_record_component: 667204f9-066c-4f70-8316-4d31d2554320 for Attendance Deduction
[2025-10-17T06:04:34.937Z] [LOG] 🔍 Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:34.937Z] [LOG]    Total components: 10
[2025-10-17T06:04:34.938Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:34.938Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:04:35.026Z] [LOG] ✅ Financial balances updated successfully for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:35.027Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:35.028Z] [LOG] 
======================================================================
[2025-10-17T06:04:35.028Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: P.D.P Dilini Madushani null
[2025-10-17T06:04:35.029Z] [LOG] ======================================================================
[2025-10-17T06:04:35.029Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:04:35.030Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:04:35.031Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:35.031Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:35.032Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:35.032Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:35.033Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:04:35.034Z] [LOG] ======================================================================

[2025-10-17T06:04:35.035Z] [LOG] ✅ P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-17T06:04:35.035Z] [LOG] 📊 Progress: 29/34 (85.3%)
[2025-10-17T06:04:35.036Z] [LOG] 
🧮 Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-17T06:04:35.037Z] [LOG] 📋 Record ID: 78c2cbdd-cf43-4506-9793-10ca813263c0
[2025-10-17T06:04:35.039Z] [LOG] 
======================================================================
[2025-10-17T06:04:35.040Z] [LOG] 🧮 CALCULATING PAYROLL: R. D.A Kaushalya null (EMP000044)
[2025-10-17T06:04:35.040Z] [LOG] ======================================================================
[2025-10-17T06:04:35.637Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:35.637Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:35.734Z] [LOG] 🔍 Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:35.735Z] [LOG]    Total components: 10
[2025-10-17T06:04:35.736Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:35.736Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:04:35.810Z] [LOG] 📊 Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:35.985Z] [LOG] 📊 Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:36.161Z] [LOG] 📊 Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:36.162Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:36.163Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:36.164Z] [LOG] 💰 GROSS CALCULATION for Sumaiya null:
[2025-10-17T06:04:36.164Z] [LOG]    Base Salary: 60000
[2025-10-17T06:04:36.165Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:36.165Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:36.166Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:36.341Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:36.433Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:36.433Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:36.518Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:36.519Z] [LOG]    Employee ID: 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:36.520Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:36.520Z] [LOG]    Base Salary: Rs.60000.00
[2025-10-17T06:04:36.607Z] [LOG] 📊 Found 0 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:36.696Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:36.697Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-17T06:04:36.698Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-17T06:04:36.698Z] [LOG]       Saturday Hourly Rate: Rs.282.35
[2025-10-17T06:04:36.699Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:36.781Z] [LOG] 📊 Found 0 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:36.875Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:36.876Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:36.876Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:36.877Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:36.878Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:36.878Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:36.880Z] [LOG]       Weekday: 17.00h × Rs.282.35 = Rs.4799.95
[2025-10-17T06:04:36.881Z] [LOG]       Saturday: 0.00h × Rs.282.35 = Rs.0.00
[2025-10-17T06:04:36.882Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:36.883Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:36.884Z] [LOG]       Total Earned Salary: Rs.4799.95
[2025-10-17T06:04:36.884Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:36.885Z] [LOG]       Base Salary: Rs.60000.00
[2025-10-17T06:04:36.886Z] [LOG]       Earned Salary: Rs.4799.95
[2025-10-17T06:04:36.887Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:36.888Z] [LOG]       Attendance Deduction: Rs.55200.05
[2025-10-17T06:04:36.889Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:36.890Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:36.891Z] [LOG]    Gross Salary: 60000
[2025-10-17T06:04:36.891Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:36.892Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:36.893Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:36.893Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:36.894Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:36.895Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:36.895Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:36.897Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:36.898Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:36.901Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:36.901Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:36.902Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:36.903Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:36.904Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:36.904Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:36.905Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:36.905Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:36.907Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:36.907Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:36.908Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:36.908Z] [LOG] Regular deductions for Sumaiya null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:36.909Z] [LOG] Combined deductions for Sumaiya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 55200.05,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 55200.05
}
[2025-10-17T06:04:36.959Z] [LOG] 📊 Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:36.959Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:36.960Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:36.960Z] [LOG] 💰 GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-17T06:04:36.960Z] [LOG]    Base Salary: 50000
[2025-10-17T06:04:36.961Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:36.961Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:36.961Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:37.095Z] [LOG] Creating components for record d62e49f3-d160-4624-9967-198ff8096457: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:37.096Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 55200.05
}
[2025-10-17T06:04:37.136Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:37.271Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:37.313Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:37.314Z] [LOG]    Employee ID: 01443963-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:37.314Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:37.314Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:04:37.447Z] [LOG] Created payroll_record_component: 6fae7bd7-555b-4a27-bdab-7f702697e7f3 for Attendance Deduction
[2025-10-17T06:04:37.520Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:37.521Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:04:37.521Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:04:37.521Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:04:37.521Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:37.700Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:37.701Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:37.701Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:37.702Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:37.703Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:37.703Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:37.704Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:04:37.705Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:04:37.705Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:37.706Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:37.706Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:04:37.707Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:37.708Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:04:37.709Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:04:37.710Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:37.710Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:37.711Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:37.712Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:37.714Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:04:37.715Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:37.716Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:37.716Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:37.717Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:37.718Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:37.719Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:37.720Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:37.721Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:37.721Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:37.722Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:37.722Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:37.723Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:37.723Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:37.724Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:37.724Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:37.724Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:37.725Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:37.725Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:37.726Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:37.726Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:37.726Z] [LOG] Regular deductions for R. D.A Kaushalya null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:37.727Z] [LOG] Combined deductions for R. D.A Kaushalya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:04:37.795Z] [LOG] ✅ Financial balances updated successfully for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:37.795Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:37.796Z] [LOG] 
======================================================================
[2025-10-17T06:04:37.797Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sumaiya null
[2025-10-17T06:04:37.797Z] [LOG] ======================================================================
[2025-10-17T06:04:37.797Z] [LOG]    Gross Salary: Rs.60000.00
[2025-10-17T06:04:37.798Z] [LOG]    Total Deductions: Rs.55200.05
[2025-10-17T06:04:37.798Z] [LOG]       - Attendance Deduction: Rs.55200.05
[2025-10-17T06:04:37.798Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:37.799Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:37.799Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:37.800Z] [LOG]    NET SALARY: Rs.4799.95
[2025-10-17T06:04:37.800Z] [LOG] ======================================================================

[2025-10-17T06:04:37.800Z] [LOG] ✅ Sumaiya null: Calculation completed successfully
[2025-10-17T06:04:37.801Z] [LOG] 📊 Progress: 26/31 (83.9%)
[2025-10-17T06:04:37.801Z] [LOG] 
🧮 Processing: Ishara null (EMP000011)
[2025-10-17T06:04:37.802Z] [LOG] 📋 Record ID: da46e18c-c5f0-45d2-9647-1f6da929180a
[2025-10-17T06:04:37.802Z] [LOG] 
======================================================================
[2025-10-17T06:04:37.803Z] [LOG] 🧮 CALCULATING PAYROLL: Ishara null (EMP000011)
[2025-10-17T06:04:37.803Z] [LOG] ======================================================================
[2025-10-17T06:04:37.905Z] [LOG] Creating components for record 78c2cbdd-cf43-4506-9793-10ca813263c0: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:37.906Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:04:38.082Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:38.258Z] [LOG] Created payroll_record_component: 189cd372-6744-4125-a4e4-57af95c8c40d for Attendance Deduction
[2025-10-17T06:04:38.502Z] [LOG] 🔍 Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:38.503Z] [LOG]    Total components: 10
[2025-10-17T06:04:38.504Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:38.504Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-17T06:04:38.605Z] [LOG] ✅ Financial balances updated successfully for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:38.605Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:38.606Z] [LOG] 
======================================================================
[2025-10-17T06:04:38.607Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: R. D.A Kaushalya null
[2025-10-17T06:04:38.607Z] [LOG] ======================================================================
[2025-10-17T06:04:38.608Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:04:38.608Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:04:38.609Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:38.610Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:38.610Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:38.611Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:38.612Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:04:38.614Z] [LOG] ======================================================================

[2025-10-17T06:04:38.615Z] [LOG] ✅ R. D.A Kaushalya null: Calculation completed successfully
[2025-10-17T06:04:38.615Z] [LOG] 📊 Progress: 30/34 (88.2%)
[2025-10-17T06:04:38.616Z] [LOG] 
🧮 Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-17T06:04:38.617Z] [LOG] 📋 Record ID: 98352b89-1662-4f83-9a4d-268a8198f068
[2025-10-17T06:04:38.618Z] [LOG] 
======================================================================
[2025-10-17T06:04:38.619Z] [LOG] 🧮 CALCULATING PAYROLL: Nimdiya Ranasinghe null (EMP000045)
[2025-10-17T06:04:38.620Z] [LOG] ======================================================================
[2025-10-17T06:04:39.212Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:39.212Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:39.315Z] [LOG] 🔍 Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:39.316Z] [LOG]    Total components: 10
[2025-10-17T06:04:39.317Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:39.318Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:04:39.388Z] [LOG] 📊 Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:39.559Z] [LOG] session eka meka {
  "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "1d501d4a-7eb5-41d3-afa7-b92ac757f3ee",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 11:33:01",
  "is_active": 1,
  "created_at": "2025-10-17 11:18:49",
  "user_active": 1
}
[2025-10-17T06:04:39.571Z] [LOG] 📊 Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:39.621Z] [LOG] session eka meka {
  "id": "f4917a3b-ab1c-11f0-93ca-0050565d0e2b",
  "admin_user_id": "059304ea-24a5-4d78-a290-cf09b9e53c4c",
  "client_id": "it-signature",
  "token_jti": "1d501d4a-7eb5-41d3-afa7-b92ac757f3ee",
  "ip_address": "::1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "expires_at": "2025-10-18 11:33:01",
  "is_active": 1,
  "created_at": "2025-10-17 11:18:49",
  "user_active": 1
}
[2025-10-17T06:04:39.751Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:39.751Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:39.752Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:39.753Z] [LOG] 💰 GROSS CALCULATION for Ishara null:
[2025-10-17T06:04:39.754Z] [LOG]    Base Salary: 50000
[2025-10-17T06:04:39.754Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:39.755Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:39.755Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:39.930Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:40.027Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:40.028Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:40.102Z] [LOG] GET /api/leaves/types - 304 - 732ms
[2025-10-17T06:04:40.104Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:40.106Z] [LOG]    Employee ID: 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:40.107Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:40.107Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:04:40.203Z] [LOG] 📊 Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:40.284Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:40.285Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:04:40.285Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:04:40.286Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:04:40.286Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:40.379Z] [LOG] 📊 Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:40.460Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:40.461Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:40.463Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:40.464Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:40.464Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:40.465Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:40.466Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:04:40.466Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:04:40.467Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:40.468Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:40.469Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:04:40.469Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:40.470Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:04:40.471Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:04:40.471Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:40.473Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:40.474Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:40.475Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:40.475Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:04:40.476Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:40.476Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:40.477Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:40.478Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:40.480Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:40.481Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:40.482Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:40.483Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:40.484Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:40.484Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:40.485Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:40.486Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:40.486Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:40.486Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:40.487Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:40.487Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:40.488Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:40.488Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:40.488Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:40.489Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:40.489Z] [LOG] Regular deductions for Ishara null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:40.490Z] [LOG] Combined deductions for Ishara null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:04:40.555Z] [LOG] 📊 Found 0 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:40.556Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:40.557Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:40.558Z] [LOG] 💰 GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-17T06:04:40.559Z] [LOG]    Base Salary: 35000
[2025-10-17T06:04:40.559Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:40.560Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:40.561Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:40.665Z] [LOG] Creating components for record da46e18c-c5f0-45d2-9647-1f6da929180a: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:40.666Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:04:40.735Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:40.841Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:40.909Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:40.909Z] [LOG]    Employee ID: 01444074-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:40.910Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:40.910Z] [LOG]    Base Salary: Rs.35000.00
[2025-10-17T06:04:41.017Z] [LOG] Created payroll_record_component: 5b01f1f1-41ab-4f1f-a181-9dfd8d2395a9 for Attendance Deduction
[2025-10-17T06:04:41.103Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:41.104Z] [LOG]       Daily Salary: Rs.1400.00
[2025-10-17T06:04:41.104Z] [LOG]       Weekday Hourly Rate: Rs.164.71
[2025-10-17T06:04:41.105Z] [LOG]       Saturday Hourly Rate: Rs.164.71
[2025-10-17T06:04:41.105Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:41.280Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:41.281Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:41.281Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:41.282Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:41.283Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:41.283Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:41.284Z] [LOG]       Weekday: 17.00h × Rs.164.71 = Rs.2800.07
[2025-10-17T06:04:41.284Z] [LOG]       Saturday: 0.00h × Rs.164.71 = Rs.0.00
[2025-10-17T06:04:41.285Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:41.285Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:41.286Z] [LOG]       Total Earned Salary: Rs.2800.07
[2025-10-17T06:04:41.287Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:41.288Z] [LOG]       Base Salary: Rs.35000.00
[2025-10-17T06:04:41.290Z] [LOG]       Earned Salary: Rs.2800.07
[2025-10-17T06:04:41.290Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:41.291Z] [LOG]       Attendance Deduction: Rs.32199.93
[2025-10-17T06:04:41.292Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:41.293Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:41.294Z] [LOG]    Gross Salary: 35000
[2025-10-17T06:04:41.295Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:41.297Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:41.297Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:41.299Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:41.299Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:41.300Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:41.301Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:41.302Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:41.302Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:41.303Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:41.304Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:41.305Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:41.305Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:41.306Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:41.306Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:41.307Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:41.307Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:41.308Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:41.309Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:41.309Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:41.310Z] [LOG] Regular deductions for Nimdiya Ranasinghe null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:41.311Z] [LOG] Combined deductions for Nimdiya Ranasinghe null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 32199.93,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 32199.93
}
[2025-10-17T06:04:41.323Z] [LOG] GET /api/employees?limit=10000&page=1&status=active - 304 - 1951ms
[2025-10-17T06:04:41.365Z] [LOG] ✅ Financial balances updated successfully for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:41.366Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:41.366Z] [LOG] 
======================================================================
[2025-10-17T06:04:41.366Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ishara null
[2025-10-17T06:04:41.366Z] [LOG] ======================================================================
[2025-10-17T06:04:41.367Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:04:41.367Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:04:41.367Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:41.367Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:41.368Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:41.368Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:41.368Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:04:41.368Z] [LOG] ======================================================================

[2025-10-17T06:04:41.369Z] [LOG] ✅ Ishara null: Calculation completed successfully
[2025-10-17T06:04:41.369Z] [LOG] 📊 Progress: 27/31 (87.1%)
[2025-10-17T06:04:41.369Z] [LOG] 
🧮 Processing: Saruban null (EMP000007)
[2025-10-17T06:04:41.370Z] [LOG] 📋 Record ID: dd436f41-2b11-4039-b6d3-5908f152152f
[2025-10-17T06:04:41.370Z] [LOG] 
======================================================================
[2025-10-17T06:04:41.370Z] [LOG] 🧮 CALCULATING PAYROLL: Saruban null (EMP000007)
[2025-10-17T06:04:41.370Z] [LOG] ======================================================================
[2025-10-17T06:04:41.491Z] [LOG] Creating components for record 98352b89-1662-4f83-9a4d-268a8198f068: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:41.492Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 32199.93
}
[2025-10-17T06:04:41.669Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:41.842Z] [LOG] Created payroll_record_component: f00c90cb-6b3f-4753-ad88-997bf7d3b645 for Attendance Deduction
[2025-10-17T06:04:42.058Z] [LOG] 🔍 Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:42.059Z] [LOG]    Total components: 10
[2025-10-17T06:04:42.059Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:42.060Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T06:04:42.186Z] [LOG] ✅ Financial balances updated successfully for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:42.187Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:42.188Z] [LOG] 
======================================================================
[2025-10-17T06:04:42.188Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Nimdiya Ranasinghe null
[2025-10-17T06:04:42.189Z] [LOG] ======================================================================
[2025-10-17T06:04:42.190Z] [LOG]    Gross Salary: Rs.35000.00
[2025-10-17T06:04:42.190Z] [LOG]    Total Deductions: Rs.32199.93
[2025-10-17T06:04:42.191Z] [LOG]       - Attendance Deduction: Rs.32199.93
[2025-10-17T06:04:42.191Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:42.192Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:42.192Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:42.193Z] [LOG]    NET SALARY: Rs.2800.07
[2025-10-17T06:04:42.195Z] [LOG] ======================================================================

[2025-10-17T06:04:42.198Z] [LOG] ✅ Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-17T06:04:42.199Z] [LOG] 📊 Progress: 31/34 (91.2%)
[2025-10-17T06:04:42.202Z] [LOG] 
🧮 Processing: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-17T06:04:42.202Z] [LOG] 📋 Record ID: c649f0f2-3f50-4ede-84ef-60c24d9c7eba
[2025-10-17T06:04:42.203Z] [LOG] 
======================================================================
[2025-10-17T06:04:42.204Z] [LOG] 🧮 CALCULATING PAYROLL: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-17T06:04:42.204Z] [LOG] ======================================================================
[2025-10-17T06:04:42.766Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:42.767Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:42.942Z] [LOG] 🔍 Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:42.943Z] [LOG]    Total components: 10
[2025-10-17T06:04:42.943Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:42.944Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:04:42.948Z] [LOG] 📊 Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:43.137Z] [LOG] 📊 Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:43.315Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:43.315Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:43.316Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:43.317Z] [LOG] 💰 GROSS CALCULATION for Saruban null:
[2025-10-17T06:04:43.318Z] [LOG]    Base Salary: 0
[2025-10-17T06:04:43.318Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:43.319Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:43.320Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:43.494Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:43.663Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:43.664Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:43.669Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:43.670Z] [LOG]    Employee ID: 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:43.670Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:43.671Z] [LOG]    Base Salary: Rs.0.00
[2025-10-17T06:04:43.838Z] [LOG] 📊 Found 0 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:43.845Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:43.846Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-17T06:04:43.847Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-17T06:04:43.848Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-17T06:04:43.848Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:44.009Z] [LOG] 📊 Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:44.027Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:44.028Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:44.028Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:44.030Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:44.030Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:44.031Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:44.032Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:44.033Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:44.035Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:44.036Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:44.036Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T06:04:44.037Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:44.038Z] [LOG]       Base Salary: Rs.0.00
[2025-10-17T06:04:44.040Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T06:04:44.043Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:44.043Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-17T06:04:44.044Z] [LOG]       ✅ No deduction - Employee earned full salary!
[2025-10-17T06:04:44.044Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:44.045Z] [LOG]    Gross Salary: 0
[2025-10-17T06:04:44.047Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:44.048Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:44.052Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.053Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:44.054Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.054Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:44.055Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.055Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:44.055Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.055Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:44.056Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.056Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:44.056Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.056Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:44.057Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.058Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:44.058Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.058Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:44.058Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.059Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:44.059Z] [LOG] Regular deductions for Saruban null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:44.059Z] [LOG] Combined deductions for Saruban null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 0
}
[2025-10-17T06:04:44.182Z] [LOG] 📊 Found 0 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:44.182Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:44.183Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:44.183Z] [LOG] 💰 GROSS CALCULATION for Ashen Nirmal Wadugodapitiya null:
[2025-10-17T06:04:44.183Z] [LOG]    Base Salary: 50000
[2025-10-17T06:04:44.184Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:44.184Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:44.184Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.237Z] [LOG] Creating components for record dd436f41-2b11-4039-b6d3-5908f152152f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:44.238Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-17T06:04:44.356Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:44.413Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:44.532Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:44.532Z] [LOG]    Employee ID: 0144461e-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:44.533Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:44.533Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:04:44.590Z] [LOG] Created payroll_record_component: abf03794-6635-4491-b3df-89bd257941c6 for Attendance Deduction
[2025-10-17T06:04:44.707Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:44.708Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:04:44.708Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:04:44.708Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:04:44.708Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:44.890Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:44.891Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:44.892Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:44.892Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:44.893Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:44.893Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:44.894Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:04:44.895Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:04:44.896Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:44.898Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:44.898Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:04:44.902Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:44.907Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:04:44.908Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:04:44.908Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:44.909Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:44.909Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:44.910Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:44.911Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:04:44.911Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:44.915Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:44.919Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.923Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:44.924Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.925Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:44.926Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.927Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:44.928Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.929Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:44.930Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.930Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:44.932Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.933Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:44.933Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.934Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:44.934Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.934Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:44.934Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:44.935Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:44.935Z] [LOG] Regular deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:44.936Z] [LOG] Combined deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:04:44.938Z] [LOG] ✅ Financial balances updated successfully for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:44.938Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:44.938Z] [LOG] 
======================================================================
[2025-10-17T06:04:44.939Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saruban null
[2025-10-17T06:04:44.939Z] [LOG] ======================================================================
[2025-10-17T06:04:44.939Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-17T06:04:44.939Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-17T06:04:44.940Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-17T06:04:44.940Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:44.940Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:44.941Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:44.941Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T06:04:44.941Z] [LOG] ======================================================================

[2025-10-17T06:04:44.941Z] [LOG] ✅ Saruban null: Calculation completed successfully
[2025-10-17T06:04:44.942Z] [LOG] 📊 Progress: 28/31 (90.3%)
[2025-10-17T06:04:44.942Z] [LOG] 
🧮 Processing: Chamodi null (EMP000032)
[2025-10-17T06:04:44.942Z] [LOG] 📋 Record ID: ea3e34d0-b868-4294-bc1a-91d8ce2a0b83
[2025-10-17T06:04:44.942Z] [LOG] 
======================================================================
[2025-10-17T06:04:44.943Z] [LOG] 🧮 CALCULATING PAYROLL: Chamodi null (EMP000032)
[2025-10-17T06:04:44.943Z] [LOG] ======================================================================
[2025-10-17T06:04:45.112Z] [LOG] Creating components for record c649f0f2-3f50-4ede-84ef-60c24d9c7eba: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:45.113Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:04:45.294Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:45.473Z] [LOG] Created payroll_record_component: 57c1f934-19cf-4022-9d8f-76e0b9145367 for Attendance Deduction
[2025-10-17T06:04:45.669Z] [LOG] 🔍 Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:45.669Z] [LOG]    Total components: 10
[2025-10-17T06:04:45.670Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:45.671Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:04:45.846Z] [LOG] ✅ Financial balances updated successfully for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:45.847Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:45.848Z] [LOG] 
======================================================================
[2025-10-17T06:04:45.848Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ashen Nirmal Wadugodapitiya null
[2025-10-17T06:04:45.849Z] [LOG] ======================================================================
[2025-10-17T06:04:45.850Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:04:45.850Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:04:45.851Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:45.851Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:45.852Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:45.852Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:45.853Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:04:45.854Z] [LOG] ======================================================================

[2025-10-17T06:04:45.855Z] [LOG] ✅ Ashen Nirmal Wadugodapitiya null: Calculation completed successfully
[2025-10-17T06:04:45.856Z] [LOG] 📊 Progress: 32/34 (94.1%)
[2025-10-17T06:04:45.856Z] [LOG] 
🧮 Processing: Ratheeshanan null (EMP000047)
[2025-10-17T06:04:45.857Z] [LOG] 📋 Record ID: 399eafd3-f53e-4e9e-ae1d-7da452b0a514
[2025-10-17T06:04:45.859Z] [LOG] 
======================================================================
[2025-10-17T06:04:45.860Z] [LOG] 🧮 CALCULATING PAYROLL: Ratheeshanan null (EMP000047)
[2025-10-17T06:04:45.861Z] [LOG] ======================================================================
[2025-10-17T06:04:46.382Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:46.383Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:46.555Z] [LOG] 🔍 Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:46.556Z] [LOG]    Total components: 10
[2025-10-17T06:04:46.556Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:46.557Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-17T06:04:46.558Z] [LOG] 📊 Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:46.730Z] [LOG] 📊 Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:46.905Z] [LOG] 📊 Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:46.907Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:46.908Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:46.909Z] [LOG] 💰 GROSS CALCULATION for Chamodi null:
[2025-10-17T06:04:46.910Z] [LOG]    Base Salary: 50000
[2025-10-17T06:04:46.910Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:46.911Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:46.916Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:47.092Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:47.264Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:47.264Z] [LOG]    Employee ID: 0143f302-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:47.264Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:47.265Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:04:47.267Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:47.268Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:47.437Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:47.438Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:04:47.438Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:04:47.438Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:04:47.439Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:47.441Z] [LOG] 📊 Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:47.611Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:47.611Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:47.612Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:47.613Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:47.614Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:47.614Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:47.615Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-17T06:04:47.616Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:04:47.616Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:47.617Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:47.618Z] [LOG]       Total Earned Salary: Rs.3999.93
[2025-10-17T06:04:47.618Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:47.619Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:04:47.620Z] [LOG]       Earned Salary: Rs.3999.93
[2025-10-17T06:04:47.620Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:47.621Z] [LOG]       Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:47.622Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:47.622Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:47.624Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:04:47.625Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:47.626Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:47.626Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:47.627Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:47.627Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:47.628Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:47.630Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:47.631Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:47.631Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:47.632Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:47.633Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:47.634Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:47.635Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:47.636Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:47.637Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:47.637Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:47.638Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:47.638Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:47.639Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:47.639Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:47.640Z] [LOG] Regular deductions for Chamodi null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:47.641Z] [LOG] Combined deductions for Chamodi null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 46000.07,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 46000.07
}
[2025-10-17T06:04:47.646Z] [LOG] 📊 Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:47.819Z] [LOG] 📊 Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:47.819Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:47.820Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:47.821Z] [LOG] 💰 GROSS CALCULATION for Ratheeshanan null:
[2025-10-17T06:04:47.822Z] [LOG]    Base Salary: 25000
[2025-10-17T06:04:47.822Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:47.823Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:47.823Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:47.825Z] [LOG] Creating components for record ea3e34d0-b868-4294-bc1a-91d8ce2a0b83: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:47.827Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 46000.07
}
[2025-10-17T06:04:47.998Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:48.001Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:48.175Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:48.175Z] [LOG]    Employee ID: 01444966-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:48.176Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:48.177Z] [LOG]    Base Salary: Rs.25000.00
[2025-10-17T06:04:48.178Z] [LOG] Created payroll_record_component: 83415cf9-2286-4ccc-8114-90de8d4691d1 for Attendance Deduction
[2025-10-17T06:04:48.350Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:48.350Z] [LOG]       Daily Salary: Rs.1000.00
[2025-10-17T06:04:48.351Z] [LOG]       Weekday Hourly Rate: Rs.117.65
[2025-10-17T06:04:48.352Z] [LOG]       Saturday Hourly Rate: Rs.117.65
[2025-10-17T06:04:48.352Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:48.526Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:48.527Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:48.528Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:48.528Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:48.529Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:48.529Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:48.530Z] [LOG]       Weekday: 17.00h × Rs.117.65 = Rs.2000.05
[2025-10-17T06:04:48.531Z] [LOG]       Saturday: 0.00h × Rs.117.65 = Rs.0.00
[2025-10-17T06:04:48.532Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:48.532Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:48.533Z] [LOG]       Total Earned Salary: Rs.2000.05
[2025-10-17T06:04:48.534Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:48.534Z] [LOG]       Base Salary: Rs.25000.00
[2025-10-17T06:04:48.535Z] [LOG]       Earned Salary: Rs.2000.05
[2025-10-17T06:04:48.536Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:48.536Z] [LOG]       Attendance Deduction: Rs.22999.95
[2025-10-17T06:04:48.537Z] [LOG]       📉 Deduction is 92.00% of base salary
[2025-10-17T06:04:48.538Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:48.540Z] [LOG]    Gross Salary: 25000
[2025-10-17T06:04:48.540Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:48.541Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:48.542Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:48.542Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:48.543Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:48.543Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:48.544Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:48.545Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:48.546Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:48.546Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:48.547Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:48.548Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:48.549Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:48.549Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:48.551Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:48.552Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:48.553Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:48.553Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:48.554Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:48.554Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:48.554Z] [LOG] Regular deductions for Ratheeshanan null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:48.555Z] [LOG] Combined deductions for Ratheeshanan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 22999.95,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 22999.95
}
[2025-10-17T06:04:48.557Z] [LOG] ✅ Financial balances updated successfully for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:48.558Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:48.558Z] [LOG] 
======================================================================
[2025-10-17T06:04:48.558Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chamodi null
[2025-10-17T06:04:48.559Z] [LOG] ======================================================================
[2025-10-17T06:04:48.559Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:04:48.559Z] [LOG]    Total Deductions: Rs.46000.07
[2025-10-17T06:04:48.560Z] [LOG]       - Attendance Deduction: Rs.46000.07
[2025-10-17T06:04:48.560Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:48.560Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:48.561Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:48.561Z] [LOG]    NET SALARY: Rs.3999.93
[2025-10-17T06:04:48.562Z] [LOG] ======================================================================

[2025-10-17T06:04:48.562Z] [LOG] ✅ Chamodi null: Calculation completed successfully
[2025-10-17T06:04:48.563Z] [LOG] 📊 Progress: 29/31 (93.5%)
[2025-10-17T06:04:48.563Z] [LOG] 
🧮 Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-17T06:04:48.564Z] [LOG] 📋 Record ID: f27821f1-6be4-474c-bd6d-d36ce455a79e
[2025-10-17T06:04:48.564Z] [LOG] 
======================================================================
[2025-10-17T06:04:48.565Z] [LOG] 🧮 CALCULATING PAYROLL: Sujevan Selvaratnam null (EMP000026)
[2025-10-17T06:04:48.565Z] [LOG] ======================================================================
[2025-10-17T06:04:48.735Z] [LOG] Creating components for record 399eafd3-f53e-4e9e-ae1d-7da452b0a514: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:48.735Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 22999.95
}
[2025-10-17T06:04:48.906Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:49.082Z] [LOG] Created payroll_record_component: c71d8716-7d7a-4801-96d9-35992f8d7294 for Attendance Deduction
[2025-10-17T06:04:49.262Z] [LOG] 🔍 Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:49.262Z] [LOG]    Total components: 10
[2025-10-17T06:04:49.263Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:49.263Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-17T06:04:49.425Z] [LOG] ✅ Financial balances updated successfully for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:49.426Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:49.426Z] [LOG] 
======================================================================
[2025-10-17T06:04:49.427Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ratheeshanan null
[2025-10-17T06:04:49.428Z] [LOG] ======================================================================
[2025-10-17T06:04:49.428Z] [LOG]    Gross Salary: Rs.25000.00
[2025-10-17T06:04:49.429Z] [LOG]    Total Deductions: Rs.22999.95
[2025-10-17T06:04:49.429Z] [LOG]       - Attendance Deduction: Rs.22999.95
[2025-10-17T06:04:49.430Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:49.430Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:49.431Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:49.432Z] [LOG]    NET SALARY: Rs.2000.05
[2025-10-17T06:04:49.432Z] [LOG] ======================================================================

[2025-10-17T06:04:49.433Z] [LOG] ✅ Ratheeshanan null: Calculation completed successfully
[2025-10-17T06:04:49.434Z] [LOG] 📊 Progress: 33/34 (97.1%)
[2025-10-17T06:04:49.434Z] [LOG] 
🧮 Processing: Kaushal Thambi (EMP465256103)
[2025-10-17T06:04:49.435Z] [LOG] 📋 Record ID: 5d82d7ae-2ed1-4955-a544-ce59478d7a79
[2025-10-17T06:04:49.438Z] [LOG] 
======================================================================
[2025-10-17T06:04:49.439Z] [LOG] 🧮 CALCULATING PAYROLL: Kaushal Thambi (EMP465256103)
[2025-10-17T06:04:49.439Z] [LOG] ======================================================================
[2025-10-17T06:04:49.964Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:49.964Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:50.138Z] [LOG] 📊 Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:50.140Z] [LOG] 🔍 Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-17T06:04:50.140Z] [LOG]    Total components: 10
[2025-10-17T06:04:50.141Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:50.141Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-17T06:04:50.312Z] [LOG] 📊 Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:50.488Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:50.489Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:50.490Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:50.491Z] [LOG] 💰 GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-17T06:04:50.492Z] [LOG]    Base Salary: 1
[2025-10-17T06:04:50.492Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:50.493Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:50.493Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:50.668Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:50.842Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:50.843Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:50.845Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:50.846Z] [LOG]    Employee ID: 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:50.846Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:50.847Z] [LOG]    Base Salary: Rs.1.00
[2025-10-17T06:04:51.017Z] [LOG] 📊 Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-17T06:04:51.022Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:51.023Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-17T06:04:51.023Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-17T06:04:51.024Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-17T06:04:51.026Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:51.193Z] [LOG] 📊 Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-17T06:04:51.202Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:51.203Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-17T06:04:51.203Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:51.204Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:51.204Z] [LOG]       Total Worked: 17.00h
[2025-10-17T06:04:51.205Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:51.206Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:51.207Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:51.208Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:51.209Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:51.210Z] [LOG]       Total Earned Salary: Rs.0.00
[2025-10-17T06:04:51.211Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:51.211Z] [LOG]       Base Salary: Rs.1.00
[2025-10-17T06:04:51.213Z] [LOG]       Earned Salary: Rs.0.00
[2025-10-17T06:04:51.214Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:51.215Z] [LOG]       Attendance Deduction: Rs.1.00
[2025-10-17T06:04:51.215Z] [LOG]       📉 Deduction is 100.00% of base salary
[2025-10-17T06:04:51.217Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:51.219Z] [LOG]    Gross Salary: 1
[2025-10-17T06:04:51.220Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:51.221Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:51.221Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:51.222Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:51.222Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:51.223Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:51.224Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:51.224Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:51.224Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:51.224Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:51.225Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:51.226Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:51.226Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:51.226Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:51.227Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:51.227Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:51.227Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:51.228Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:51.228Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:51.228Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:51.229Z] [LOG] Regular deductions for Sujevan Selvaratnam null: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:51.230Z] [LOG] Combined deductions for Sujevan Selvaratnam null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 1,
      "details": "Based on worked hours (17h total)"
    }
  ],
  "total": 1
}
[2025-10-17T06:04:51.365Z] [LOG] 📊 Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-17T06:04:51.371Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:51.371Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:51.371Z] [LOG] 💰 GROSS CALCULATION for Kaushal Thambi:
[2025-10-17T06:04:51.372Z] [LOG]    Base Salary: 50000
[2025-10-17T06:04:51.372Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:51.372Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:51.372Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:51.409Z] [LOG] Creating components for record f27821f1-6be4-474c-bd6d-d36ce455a79e: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:51.410Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 1
}
[2025-10-17T06:04:51.549Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:51.581Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:51.723Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:51.724Z] [LOG]    Employee ID: 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-17T06:04:51.725Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:51.725Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:04:51.754Z] [LOG] Created payroll_record_component: 3271b7d1-e278-4449-98b1-0e330babc66d for Attendance Deduction
[2025-10-17T06:04:51.902Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-17T06:04:51.902Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-17T06:04:51.903Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-17T06:04:51.904Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-17T06:04:51.904Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-17T06:04:52.082Z] [LOG] 
   ⏰ Worked Hours (from attendance records):
[2025-10-17T06:04:52.083Z] [LOG]       Weekday (Mon-Fri): 8.50h
[2025-10-17T06:04:52.083Z] [LOG]       Saturday: 0.00h
[2025-10-17T06:04:52.084Z] [LOG]       Sunday: 0.00h
[2025-10-17T06:04:52.084Z] [LOG]       Total Worked: 8.50h
[2025-10-17T06:04:52.085Z] [LOG] 
   💵 Earned Salary Calculation (worked_hours × hourly_rate):
[2025-10-17T06:04:52.086Z] [LOG]       Weekday: 8.50h × Rs.235.29 = Rs.1999.96
[2025-10-17T06:04:52.086Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-17T06:04:52.087Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-17T06:04:52.087Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:52.088Z] [LOG]       Total Earned Salary: Rs.1999.96
[2025-10-17T06:04:52.089Z] [LOG] 
   📊 Final Calculation:
[2025-10-17T06:04:52.090Z] [LOG]       Base Salary: Rs.50000.00
[2025-10-17T06:04:52.090Z] [LOG]       Earned Salary: Rs.1999.96
[2025-10-17T06:04:52.091Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-17T06:04:52.092Z] [LOG]       Attendance Deduction: Rs.48000.04
[2025-10-17T06:04:52.092Z] [LOG]       📉 Deduction is 96.00% of base salary
[2025-10-17T06:04:52.093Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-17T06:04:52.095Z] [LOG]    Gross Salary: 50000
[2025-10-17T06:04:52.097Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-17T06:04:52.097Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-17T06:04:52.098Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:52.098Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-17T06:04:52.099Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:52.100Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-17T06:04:52.102Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:52.102Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-17T06:04:52.103Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:52.104Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-17T06:04:52.104Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:52.105Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-17T06:04:52.105Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:52.106Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-17T06:04:52.106Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:52.107Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-17T06:04:52.108Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:52.108Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-17T06:04:52.109Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:52.109Z] [LOG]    📊 Total Deductions: 0
[2025-10-17T06:04:52.110Z] [LOG] Regular deductions for Kaushal Thambi: {
  "components": [],
  "total": 0
}
[2025-10-17T06:04:52.111Z] [LOG] Combined deductions for Kaushal Thambi: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 48000.035,
      "details": "Based on worked hours (8.5h total)"
    }
  ],
  "total": 48000.035
}
[2025-10-17T06:04:52.119Z] [LOG] ✅ Financial balances updated successfully for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:52.120Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:52.121Z] [LOG] 
======================================================================
[2025-10-17T06:04:52.122Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sujevan Selvaratnam null
[2025-10-17T06:04:52.122Z] [LOG] ======================================================================
[2025-10-17T06:04:52.123Z] [LOG]    Gross Salary: Rs.1.00
[2025-10-17T06:04:52.123Z] [LOG]    Total Deductions: Rs.1.00
[2025-10-17T06:04:52.124Z] [LOG]       - Attendance Deduction: Rs.1.00
[2025-10-17T06:04:52.124Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:52.124Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:52.124Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:52.125Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-17T06:04:52.125Z] [LOG] ======================================================================

[2025-10-17T06:04:52.125Z] [LOG] ✅ Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-17T06:04:52.126Z] [LOG] 📊 Progress: 30/31 (96.8%)
[2025-10-17T06:04:52.126Z] [LOG] 
🧮 Processing: Waruni null (EMP000024)
[2025-10-17T06:04:52.127Z] [LOG] 📋 Record ID: f9c63ea3-fe23-462a-8754-f6d5541b074e
[2025-10-17T06:04:52.127Z] [LOG] 
======================================================================
[2025-10-17T06:04:52.127Z] [LOG] 🧮 CALCULATING PAYROLL: Waruni null (EMP000024)
[2025-10-17T06:04:52.128Z] [LOG] ======================================================================
[2025-10-17T06:04:52.292Z] [LOG] Creating components for record 5d82d7ae-2ed1-4955-a544-ce59478d7a79: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-17T06:04:52.293Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 48000.035
}
[2025-10-17T06:04:52.477Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-17T06:04:52.652Z] [LOG] Created payroll_record_component: af4c27b4-f687-4e8c-8b3a-e1d67c2e5663 for Attendance Deduction
[2025-10-17T06:04:52.845Z] [LOG] 🔍 Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-17T06:04:52.845Z] [LOG]    Total components: 10
[2025-10-17T06:04:52.845Z] [LOG]    Applicable components: 10
[2025-10-17T06:04:52.846Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-17T06:04:53.004Z] [LOG] ✅ Financial balances updated successfully for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-17T06:04:53.004Z] [LOG] ✅ Financial balances updated successfully
[2025-10-17T06:04:53.005Z] [LOG] 
======================================================================
[2025-10-17T06:04:53.006Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Kaushal Thambi
[2025-10-17T06:04:53.006Z] [LOG] ======================================================================
[2025-10-17T06:04:53.007Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-17T06:04:53.007Z] [LOG]    Total Deductions: Rs.48000.04
[2025-10-17T06:04:53.008Z] [LOG]       - Attendance Deduction: Rs.48000.04
[2025-10-17T06:04:53.009Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-17T06:04:53.009Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-17T06:04:53.010Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-17T06:04:53.011Z] [LOG]    NET SALARY: Rs.1999.96
[2025-10-17T06:04:53.011Z] [LOG] ======================================================================

[2025-10-17T06:04:53.012Z] [LOG] ✅ Kaushal Thambi: Calculation completed successfully
[2025-10-17T06:04:53.013Z] [LOG] 📊 Progress: 34/34 (100.0%)
[2025-10-17T06:04:53.014Z] [LOG] 
============================================================
[2025-10-17T06:04:53.015Z] [LOG] 📈 Processing Summary: 34 successful, 0 failed
[2025-10-17T06:04:53.550Z] [LOG] 
🔄 Processing financial records...
[2025-10-17T06:04:53.551Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-17T06:04:53.731Z] [LOG] 📊 Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:53.905Z] [LOG] 📊 Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:54.079Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:54.102Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-17T06:04:54.103Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-17T06:04:54.104Z] [LOG] 💰 GROSS CALCULATION for Waruni null:
[2025-10-17T06:04:54.138Z] [LOG]    Base Salary: 50000
[2025-10-17T06:04:54.139Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-17T06:04:54.139Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-17T06:04:54.140Z] [LOG]    Fixed amount: 0
[2025-10-17T06:04:54.313Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-17T06:04:54.492Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (NEW OPTIMIZED APPROACH)
[2025-10-17T06:04:54.492Z] [LOG]    Employee ID: 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-17T06:04:54.493Z] [LOG]    📅 Calculation Period: 2025-10-01 to 2025-10-16
[2025-10-17T06:04:54.494Z] [LOG]    Base Salary: Rs.50000.00
[2025-10-17T06:04:54.670Z] [LOG] 🎉 Payroll calculation completed successfully!
[2025-10-17T06:04:54.671Z] [LOG] 📊 Final Summary: 34 processed, 0 errors
[2025-10-17T06:04:54.672Z] [INFO] ================================================================================
[2025-10-17T06:04:54.672Z] [INFO] ⏰ Completed at: 2025-10-17T06:04:54.672Z
[2025-10-17T06:04:54.672Z] [INFO] 📊 Total log entries: 5654