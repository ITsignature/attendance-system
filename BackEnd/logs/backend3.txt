[2025-10-28T18:44:37.997Z] [INFO] 🚀 Payroll calculation logging started for run: 43efd0bf-046f-4f0f-aaac-3d76001af5ac
[2025-10-28T18:44:37.997Z] [INFO] 📁 Log file: E:\smart_attendance_system\BackEnd\logs\payroll-run-43efd0bf-046f-4f0f-aaac-3d76001af5ac-2025-10-28T18-44-37-997Z.txt
[2025-10-28T18:44:37.997Z] [INFO] ⏰ Started at: 2025-10-28T18:44:37.997Z
[2025-10-28T18:44:37.997Z] [INFO] ================================================================================
[2025-10-28T18:44:37.997Z] [LOG] 🚀 Starting payroll calculation for run: 43efd0bf-046f-4f0f-aaac-3d76001af5ac
[2025-10-28T18:44:37.997Z] [LOG] 👤 Client ID: it-signature, User ID: 059304ea-24a5-4d78-a290-cf09b9e53c4c
[2025-10-28T18:44:38.933Z] [LOG] ✅ Payroll run verified: October (MONTHLY_2025_10_REGULAR)
[2025-10-28T18:44:39.465Z] [LOG] 📊 Status updated to 'calculating'
[2025-10-28T18:44:40.161Z] [LOG] 👥 Processing 34 employee records:
[2025-10-28T18:44:40.161Z] [LOG] ============================================================
[2025-10-28T18:44:40.162Z] [LOG] 
🧮 Processing: customer null (EMP000036)
[2025-10-28T18:44:40.162Z] [LOG] 📋 Record ID: 03534db3-08e2-4e9a-acad-8cc74e80bc6d
[2025-10-28T18:44:40.164Z] [LOG] 
======================================================================
[2025-10-28T18:44:40.165Z] [LOG] 🧮 CALCULATING PAYROLL: customer null (EMP000036)
[2025-10-28T18:44:40.166Z] [LOG] ======================================================================
[2025-10-28T18:44:42.274Z] [LOG] 🔍 Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-28T18:44:42.274Z] [LOG]    Total components: 13
[2025-10-28T18:44:42.275Z] [LOG]    Applicable components: 13
[2025-10-28T18:44:42.275Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-28T18:44:44.165Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:44:44.166Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:44:44.671Z] [LOG] 📊 Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-28T18:44:45.146Z] [LOG] 📊 Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-28T18:44:45.634Z] [LOG] 📊 Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-28T18:44:45.635Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:44:45.635Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:44:46.520Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:44:46.520Z] [LOG]    👤 Employee: customer null (EMP000036)
[2025-10-28T18:44:46.521Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:44:46.521Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:44:46.521Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-28T18:44:46.522Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:44:46.995Z] [LOG] 
   💵 Pre-calculated Rates for customer null (EMP000036):
[2025-10-28T18:44:46.996Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-28T18:44:46.996Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-28T18:44:46.996Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-28T18:44:46.996Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:44:46.997Z] [LOG] 
   📊 Full Period Working Days for customer null (EMP000036):
[2025-10-28T18:44:46.997Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:44:48.587Z] [LOG] 
   📊 Working Days for Expected Calculation for customer null (EMP000036):
[2025-10-28T18:44:48.588Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:44:48.588Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:44:49.077Z] [LOG] 
   ⏰ Calculating Completed Hours for customer null (EMP000036) - All completed sessions:
[2025-10-28T18:44:49.078Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:44:49.078Z] [LOG]       Total completed sessions found: 0
[2025-10-28T18:44:49.713Z] [LOG] 
      📊 Aggregated Totals for customer null (EMP000036):
[2025-10-28T18:44:49.713Z] [LOG]          Weekday: 0.00h
[2025-10-28T18:44:49.713Z] [LOG]          Saturday: 0.00h
[2025-10-28T18:44:49.713Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:44:49.714Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:44:49.714Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for customer null (EMP000036) - completed sessions only:
[2025-10-28T18:44:49.714Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:44:49.714Z] [LOG]       Saturday: 34.00h
[2025-10-28T18:44:49.714Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:44:49.714Z] [LOG]       Total Expected: 204.00h
[2025-10-28T18:44:49.714Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for customer null (EMP000036) - completed sessions only:
[2025-10-28T18:44:49.715Z] [LOG]       Weekday: 0.00h
[2025-10-28T18:44:49.715Z] [LOG]       Saturday: 0.00h
[2025-10-28T18:44:49.715Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:44:49.715Z] [LOG]       Total Actual: 0.00h
[2025-10-28T18:44:49.715Z] [LOG] 
   💵 EXPECTED Earned Salary for customer null (EMP000036) - until NOW:
[2025-10-28T18:44:49.716Z] [LOG]       Weekday: 170.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:44:49.716Z] [LOG]       Saturday: 34.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:44:49.716Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:44:49.717Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:44:49.717Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-28T18:44:49.717Z] [LOG] 
   💵 ACTUAL Earned Salary for customer null (EMP000036) - including live session:
[2025-10-28T18:44:49.717Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:44:49.718Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:44:49.718Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:44:49.718Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:44:49.718Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T18:44:49.719Z] [LOG] 
   📊 FINAL CALCULATION for customer null (EMP000036):
[2025-10-28T18:44:49.719Z] [LOG]       Calculated At: Oct 29, 2025, 24:14:49
[2025-10-28T18:44:49.720Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-28T18:44:49.720Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T18:44:49.720Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:44:49.720Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-28T18:44:49.720Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:44:49.720Z] [LOG]       ✅ No deduction - customer null worked all expected hours!
[2025-10-28T18:44:49.721Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:44:49.721Z] [LOG]    Base Salary (Full): Rs.NaN
[2025-10-28T18:44:49.721Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T18:44:49.721Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T18:44:49.721Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:44:49.722Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:44:49.723Z] [LOG]    Gross Salary: 0
[2025-10-28T18:44:49.723Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:44:49.724Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:44:49.725Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:49.725Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:44:49.726Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:49.726Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:44:49.726Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:49.726Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:44:49.726Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:49.727Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:44:49.727Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:49.727Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:44:49.727Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:49.728Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:44:49.728Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:49.728Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:44:49.728Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:49.728Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:44:49.729Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:49.729Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:44:49.729Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:49.729Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:44:49.729Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T18:44:49.730Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:44:49.730Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:44:49.731Z] [LOG] 💰 GROSS CALCULATION for customer null:
[2025-10-28T18:44:49.731Z] [LOG]    Base Salary: 0
[2025-10-28T18:44:49.731Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:44:49.731Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:44:49.731Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:49.732Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:44:49.732Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:49.732Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:44:49.732Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:50.185Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:44:50.186Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:44:50.186Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:44:50.187Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:44:50.187Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T18:44:50.187Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:44:50.187Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:44:50.188Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T18:44:50.188Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:44:50.188Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:44:50.189Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:44:50.189Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:44:50.190Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:44:50.190Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T18:44:50.190Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:44:50.190Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T18:44:50.191Z] [LOG] 
💾 Database Update:
[2025-10-28T18:44:50.191Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:44:50.191Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:44:50.681Z] [LOG] 
📝 Components to save:
[2025-10-28T18:44:50.681Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T18:44:50.681Z] [LOG]    Deduction components: 0
[2025-10-28T18:44:50.682Z] [LOG] Creating components for record 03534db3-08e2-4e9a-acad-8cc74e80bc6d: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-28T18:44:51.385Z] [LOG] ✅ Financial balances updated successfully for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-28T18:44:51.385Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:44:51.386Z] [LOG] 
======================================================================
[2025-10-28T18:44:51.386Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: customer null
[2025-10-28T18:44:51.386Z] [LOG] ======================================================================
[2025-10-28T18:44:51.386Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-28T18:44:51.386Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T18:44:51.387Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T18:44:51.387Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:44:51.387Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:44:51.387Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:44:51.387Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:44:51.388Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T18:44:51.388Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:44:51.388Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:44:51.388Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:44:51.388Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:44:51.388Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:44:51.388Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-28T18:44:51.389Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:44:51.389Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:44:51.389Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T18:44:51.389Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:44:51.389Z] [LOG] ======================================================================

[2025-10-28T18:44:51.389Z] [LOG] ✅ customer null: Calculation completed successfully
[2025-10-28T18:44:51.389Z] [LOG] 📊 Progress: 1/34 (2.9%)
[2025-10-28T18:44:51.389Z] [LOG] 
🧮 Processing: Prasanthan null (EMP000001)
[2025-10-28T18:44:51.389Z] [LOG] 📋 Record ID: 1246bbed-5c46-49fe-b27b-931a065af5ff
[2025-10-28T18:44:51.390Z] [LOG] 
======================================================================
[2025-10-28T18:44:51.390Z] [LOG] 🧮 CALCULATING PAYROLL: Prasanthan null (EMP000001)
[2025-10-28T18:44:51.390Z] [LOG] ======================================================================
[2025-10-28T18:44:51.865Z] [LOG] 
⚙️  ATTENDANCE DOES NOT AFFECT SALARY for Prasanthan null
[2025-10-28T18:44:51.865Z] [LOG]    This employee will receive full base salary regardless of attendance.
[2025-10-28T18:44:51.865Z] [LOG]    (Setting stored in payroll_records from employee snapshot at run creation)
[2025-10-28T18:44:52.328Z] [LOG] 🔍 Component filtering for employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-28T18:44:52.329Z] [LOG]    Total components: 13
[2025-10-28T18:44:52.329Z] [LOG]    Applicable components: 13
[2025-10-28T18:44:52.329Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-28T18:44:53.469Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:44:53.469Z] [LOG] 🔄 Processing financial records for employee 014397c7-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:44:53.692Z] [LOG] 📊 Found 0 active loans for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-28T18:44:54.101Z] [LOG] 📊 Found 0 active advances for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-28T18:44:54.306Z] [LOG] 📊 Found 0 approved bonuses for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-28T18:44:54.306Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:44:54.306Z] [LOG] 
💰 Step 1: Using full base salary (attendance not considered)...
[2025-10-28T18:44:54.306Z] [LOG]    Base Salary (Full): Rs.150000.00
[2025-10-28T18:44:54.307Z] [LOG]    Actual Earned Base: Rs.150000.00 (Full salary)
[2025-10-28T18:44:54.307Z] [LOG]    Attendance Shortfall: Rs.0.00 (Not applicable)
[2025-10-28T18:44:54.307Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:44:54.307Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:44:54.307Z] [LOG]    Gross Salary: 150000
[2025-10-28T18:44:54.308Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:44:54.308Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:44:54.308Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:54.308Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:44:54.308Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:54.308Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:44:54.309Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:54.309Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:44:54.309Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:54.309Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:44:54.309Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:54.309Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:44:54.309Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:54.310Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:44:54.310Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:54.310Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:44:54.310Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:54.311Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:44:54.311Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:54.311Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:44:54.311Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:54.311Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:44:54.311Z] [LOG]    EPF/ETF calculated on: Rs.150000.00
[2025-10-28T18:44:54.311Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:44:54.312Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:44:54.312Z] [LOG] 💰 GROSS CALCULATION for Prasanthan null:
[2025-10-28T18:44:54.312Z] [LOG]    Base Salary: 150000
[2025-10-28T18:44:54.312Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:44:54.312Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:44:54.312Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:54.312Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:44:54.313Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:54.313Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:44:54.313Z] [LOG]    Fixed amount: 0
[2025-10-28T18:44:54.741Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:44:54.741Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:44:54.742Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:44:54.742Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:44:54.742Z] [LOG]    Actual Earned Base: Rs.150000.00
[2025-10-28T18:44:54.743Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:44:54.743Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:44:54.743Z] [LOG]    = Gross Salary: Rs.150000.00
[2025-10-28T18:44:54.744Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:44:54.744Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:44:54.744Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:44:54.744Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:44:54.745Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:44:54.745Z] [LOG]    Gross Salary: Rs.150000.00
[2025-10-28T18:44:54.746Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:44:54.746Z] [LOG]    = NET SALARY: Rs.150000.00
[2025-10-28T18:44:54.747Z] [LOG] 
💾 Database Update:
[2025-10-28T18:44:54.747Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:44:54.747Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:44:54.970Z] [LOG] 
📝 Components to save:
[2025-10-28T18:44:54.970Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:44:54.970Z] [LOG]    Deduction components: 0
[2025-10-28T18:44:54.971Z] [LOG] Creating components for record 1246bbed-5c46-49fe-b27b-931a065af5ff: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-28T18:44:54.972Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 150000
}
[2025-10-28T18:44:55.623Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:44:56.105Z] [LOG] Created payroll_record_component: cdd65d78-0fd1-4b49-ab91-c0874e0532e4 for Base Salary
[2025-10-28T18:44:56.505Z] [LOG] ✅ Financial balances updated successfully for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-28T18:44:56.505Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:44:56.506Z] [LOG] 
======================================================================
[2025-10-28T18:44:56.506Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Prasanthan null
[2025-10-28T18:44:56.506Z] [LOG] ======================================================================
[2025-10-28T18:44:56.507Z] [LOG]    Base Salary (Full): Rs.150000.00
[2025-10-28T18:44:56.507Z] [LOG]    Actual Earned Base (Attendance-based): Rs.150000.00
[2025-10-28T18:44:56.507Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T18:44:56.507Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:44:56.507Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:44:56.508Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:44:56.508Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:44:56.508Z] [LOG]    GROSS SALARY: Rs.150000.00
[2025-10-28T18:44:56.508Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:44:56.509Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:44:56.509Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:44:56.509Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:44:56.510Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:44:56.510Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-28T18:44:56.510Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:44:56.510Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:44:56.511Z] [LOG]    NET SALARY: Rs.150000.00
[2025-10-28T18:44:56.511Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:44:56.511Z] [LOG] ======================================================================

[2025-10-28T18:44:56.512Z] [LOG] ✅ Prasanthan null: Calculation completed successfully
[2025-10-28T18:44:56.512Z] [LOG] 📊 Progress: 2/34 (5.9%)
[2025-10-28T18:44:56.512Z] [LOG] 
🧮 Processing: Sumaiya null (EMP000016)
[2025-10-28T18:44:56.512Z] [LOG] 📋 Record ID: 16d6dd28-89a6-4ed4-a8cf-fa8068f8466e
[2025-10-28T18:44:56.512Z] [LOG] 
======================================================================
[2025-10-28T18:44:56.513Z] [LOG] 🧮 CALCULATING PAYROLL: Sumaiya null (EMP000016)
[2025-10-28T18:44:56.513Z] [LOG] ======================================================================
[2025-10-28T18:44:57.473Z] [LOG] 🔍 Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-28T18:44:57.473Z] [LOG]    Total components: 13
[2025-10-28T18:44:57.473Z] [LOG]    Applicable components: 13
[2025-10-28T18:44:57.474Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T18:44:58.505Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:44:58.505Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:44:58.912Z] [LOG] 📊 Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-28T18:44:59.161Z] [LOG] 📊 Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-28T18:44:59.373Z] [LOG] 📊 Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-28T18:44:59.374Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:44:59.374Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:44:59.808Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:44:59.809Z] [LOG]    👤 Employee: Sumaiya null (EMP000016)
[2025-10-28T18:44:59.809Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:44:59.809Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:44:59.809Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-28T18:44:59.809Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:45:00.229Z] [LOG] 
   💵 Pre-calculated Rates for Sumaiya null (EMP000016):
[2025-10-28T18:45:00.229Z] [LOG]       Daily Salary: Rs.2307.69
[2025-10-28T18:45:00.230Z] [LOG]       Weekday Hourly Rate: Rs.271.49
[2025-10-28T18:45:00.230Z] [LOG]       Saturday Hourly Rate: Rs.512.82
[2025-10-28T18:45:00.230Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:45:00.230Z] [LOG] 
   📊 Full Period Working Days for Sumaiya null (EMP000016):
[2025-10-28T18:45:00.230Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:01.145Z] [LOG] 
   📊 Working Days for Expected Calculation for Sumaiya null (EMP000016):
[2025-10-28T18:45:01.145Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:45:01.145Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:01.393Z] [LOG] 
   ⏰ Calculating Completed Hours for Sumaiya null (EMP000016) - All completed sessions:
[2025-10-28T18:45:01.394Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:45:01.394Z] [LOG]       Total completed sessions found: 21
[2025-10-28T18:45:01.394Z] [LOG] 
      📋 Attendance Breakdown for Sumaiya null (EMP000016):
[2025-10-28T18:45:01.394Z] [LOG]          1. 2025-10-01 (Weekday): 8.19h
[2025-10-28T18:45:01.394Z] [LOG]          2. 2025-10-02 (Weekday): 6.36h
[2025-10-28T18:45:01.394Z] [LOG]          3. 2025-10-03 (Weekday): 8.50h
[2025-10-28T18:45:01.394Z] [LOG]          4. 2025-10-04 (Saturday): 4.50h
[2025-10-28T18:45:01.394Z] [LOG]          5. 2025-10-07 (Weekday): 7.83h
[2025-10-28T18:45:01.395Z] [LOG]          6. 2025-10-08 (Weekday): 8.50h
[2025-10-28T18:45:01.395Z] [LOG]          7. 2025-10-09 (Weekday): 8.50h
[2025-10-28T18:45:01.395Z] [LOG]          8. 2025-10-10 (Weekday): 8.48h
[2025-10-28T18:45:01.395Z] [LOG]          9. 2025-10-11 (Saturday): 4.50h
[2025-10-28T18:45:01.395Z] [LOG]          10. 2025-10-13 (Weekday): 5.37h
[2025-10-28T18:45:01.395Z] [LOG]          11. 2025-10-14 (Weekday): 7.46h
[2025-10-28T18:45:01.395Z] [LOG]          12. 2025-10-15 (Weekday): 8.37h
[2025-10-28T18:45:01.395Z] [LOG]          13. 2025-10-16 (Weekday): 8.14h
[2025-10-28T18:45:01.396Z] [LOG]          14. 2025-10-17 (Weekday): 8.50h
[2025-10-28T18:45:01.396Z] [LOG]          15. 2025-10-18 (Saturday): 4.50h
[2025-10-28T18:45:01.396Z] [LOG]          16. 2025-10-20 (Weekday): 8.38h
[2025-10-28T18:45:01.396Z] [LOG]          17. 2025-10-21 (Weekday): 6.98h
[2025-10-28T18:45:01.396Z] [LOG]          18. 2025-10-22 (Weekday): 8.50h
[2025-10-28T18:45:01.396Z] [LOG]          19. 2025-10-23 (Weekday): 8.42h
[2025-10-28T18:45:01.396Z] [LOG]          20. 2025-10-24 (Weekday): 8.42h
[2025-10-28T18:45:01.396Z] [LOG]          21. 2025-10-25 (Saturday): 4.46h
[2025-10-28T18:45:01.625Z] [LOG] 
      📊 Aggregated Totals for Sumaiya null (EMP000016):
[2025-10-28T18:45:01.625Z] [LOG]          Weekday: 134.90h
[2025-10-28T18:45:01.625Z] [LOG]          Saturday: 17.96h
[2025-10-28T18:45:01.625Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:45:01.625Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:45:01.625Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Sumaiya null (EMP000016) - completed sessions only:
[2025-10-28T18:45:01.626Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:45:01.626Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:45:01.626Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:01.626Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:45:01.626Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Sumaiya null (EMP000016) - completed sessions only:
[2025-10-28T18:45:01.626Z] [LOG]       Weekday: 134.90h
[2025-10-28T18:45:01.626Z] [LOG]       Saturday: 17.96h
[2025-10-28T18:45:01.627Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:01.627Z] [LOG]       Total Actual: 152.86h
[2025-10-28T18:45:01.627Z] [LOG] 
   💵 EXPECTED Earned Salary for Sumaiya null (EMP000016) - until NOW:
[2025-10-28T18:45:01.627Z] [LOG]       Weekday: 170.00h × Rs.271.49 = Rs.46153.30
[2025-10-28T18:45:01.627Z] [LOG]       Saturday: 18.00h × Rs.512.82 = Rs.9230.76
[2025-10-28T18:45:01.627Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:01.627Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:01.627Z] [LOG]       Total Expected Earned: Rs.55384.06
[2025-10-28T18:45:01.627Z] [LOG] 
   💵 ACTUAL Earned Salary for Sumaiya null (EMP000016) - including live session:
[2025-10-28T18:45:01.628Z] [LOG]       Weekday: 134.90h × Rs.271.49 = Rs.36624.00
[2025-10-28T18:45:01.628Z] [LOG]       Saturday: 17.96h × Rs.512.82 = Rs.9210.25
[2025-10-28T18:45:01.628Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:01.628Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:01.628Z] [LOG]       Total Actual Earned: Rs.45834.25
[2025-10-28T18:45:01.628Z] [LOG] 
   📊 FINAL CALCULATION for Sumaiya null (EMP000016):
[2025-10-28T18:45:01.629Z] [LOG]       Calculated At: Oct 29, 2025, 24:15:01
[2025-10-28T18:45:01.629Z] [LOG]       Expected Earned: Rs.55384.06
[2025-10-28T18:45:01.629Z] [LOG]       Actual Earned: Rs.45834.25
[2025-10-28T18:45:01.629Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:01.629Z] [LOG]       Attendance Deduction: Rs.9549.81
[2025-10-28T18:45:01.629Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:45:01.630Z] [LOG]       📉 Shortfall for Sumaiya null: 35.14 hours (17.24% of expected)
[2025-10-28T18:45:01.630Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:45:01.630Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-28T18:45:01.630Z] [LOG]    Actual Earned Base: Rs.45834.25
[2025-10-28T18:45:01.630Z] [LOG]    Attendance Shortfall: Rs.9549.81
[2025-10-28T18:45:01.630Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:45:01.631Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:45:01.631Z] [LOG]    Gross Salary: 45834.2482
[2025-10-28T18:45:01.631Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:45:01.631Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:45:01.631Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:01.631Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:45:01.631Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:01.631Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:45:01.632Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:01.632Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:45:01.632Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:01.632Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:45:01.632Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:01.632Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:45:01.632Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:01.632Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:45:01.632Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:01.632Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:45:01.633Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:01.633Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:45:01.633Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:01.633Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:45:01.633Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:01.633Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:45:01.634Z] [LOG]    EPF/ETF calculated on: Rs.45834.25
[2025-10-28T18:45:01.634Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:45:01.634Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:45:01.634Z] [LOG] 💰 GROSS CALCULATION for Sumaiya null:
[2025-10-28T18:45:01.634Z] [LOG]    Base Salary: 60000
[2025-10-28T18:45:01.634Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:45:01.635Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:45:01.635Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:01.635Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:45:01.635Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:01.635Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:45:01.636Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:01.886Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:45:01.886Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:01.887Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:45:01.887Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:45:01.887Z] [LOG]    Actual Earned Base: Rs.45834.25
[2025-10-28T18:45:01.887Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:45:01.887Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:45:01.887Z] [LOG]    = Gross Salary: Rs.45834.25
[2025-10-28T18:45:01.887Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:45:01.888Z] [LOG]    Attendance Shortfall (Info): Rs.9549.81
[2025-10-28T18:45:01.888Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:45:01.888Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:45:01.888Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:45:01.888Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:45:01.888Z] [LOG]    Gross Salary: Rs.45834.25
[2025-10-28T18:45:01.888Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:45:01.888Z] [LOG]    = NET SALARY: Rs.45834.25
[2025-10-28T18:45:01.888Z] [LOG] 
💾 Database Update:
[2025-10-28T18:45:01.888Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:45:01.889Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:45:02.130Z] [LOG] 
📝 Components to save:
[2025-10-28T18:45:02.130Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:45:02.131Z] [LOG]    Deduction components: 1
[2025-10-28T18:45:02.131Z] [LOG] Creating components for record 16d6dd28-89a6-4ed4-a8cf-fa8068f8466e: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:45:02.131Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 45834.2482
}
[2025-10-28T18:45:02.371Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:45:02.583Z] [LOG] Created payroll_record_component: 898c7414-56a6-4734-afb9-19603e7e311c for Base Salary
[2025-10-28T18:45:02.583Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 9549.811800000003
}
[2025-10-28T18:45:02.793Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:45:03.034Z] [LOG] Created payroll_record_component: 3fd1bba4-7e2c-4c7f-89cf-8d57e137135b for Attendance Shortfall (Info)
[2025-10-28T18:45:03.729Z] [LOG] ✅ Financial balances updated successfully for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:03.730Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:45:03.730Z] [LOG] 
======================================================================
[2025-10-28T18:45:03.730Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sumaiya null
[2025-10-28T18:45:03.730Z] [LOG] ======================================================================
[2025-10-28T18:45:03.730Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-28T18:45:03.731Z] [LOG]    Actual Earned Base (Attendance-based): Rs.45834.25
[2025-10-28T18:45:03.731Z] [LOG]    Attendance Shortfall: Rs.9549.81
[2025-10-28T18:45:03.731Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:03.731Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:03.731Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:45:03.731Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:03.731Z] [LOG]    GROSS SALARY: Rs.45834.25
[2025-10-28T18:45:03.731Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:03.732Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:45:03.732Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:45:03.732Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:45:03.732Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:45:03.732Z] [LOG]       - Attendance Shortfall (Info): Rs.9549.81
[2025-10-28T18:45:03.732Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:45:03.733Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:03.733Z] [LOG]    NET SALARY: Rs.45834.25
[2025-10-28T18:45:03.733Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:45:03.733Z] [LOG] ======================================================================

[2025-10-28T18:45:03.733Z] [LOG] ✅ Sumaiya null: Calculation completed successfully
[2025-10-28T18:45:03.734Z] [LOG] 📊 Progress: 3/34 (8.8%)
[2025-10-28T18:45:03.734Z] [LOG] 
🧮 Processing: Office Team null (EMP000041)
[2025-10-28T18:45:03.734Z] [LOG] 📋 Record ID: 1a39dedb-4104-4d3f-a22d-7ac0e73f112a
[2025-10-28T18:45:03.734Z] [LOG] 
======================================================================
[2025-10-28T18:45:03.734Z] [LOG] 🧮 CALCULATING PAYROLL: Office Team null (EMP000041)
[2025-10-28T18:45:03.734Z] [LOG] ======================================================================
[2025-10-28T18:45:04.838Z] [LOG] 🔍 Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-28T18:45:04.838Z] [LOG]    Total components: 13
[2025-10-28T18:45:04.839Z] [LOG]    Applicable components: 13
[2025-10-28T18:45:04.839Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-28T18:45:05.668Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:45:05.668Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:45:05.883Z] [LOG] 📊 Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:06.119Z] [LOG] 📊 Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:06.333Z] [LOG] 📊 Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:06.333Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:45:06.334Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:45:06.795Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:45:06.796Z] [LOG]    👤 Employee: Office Team null (EMP000041)
[2025-10-28T18:45:06.796Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:45:06.796Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:45:06.796Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-28T18:45:06.796Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:45:07.049Z] [LOG] 
   💵 Pre-calculated Rates for Office Team null (EMP000041):
[2025-10-28T18:45:07.050Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-28T18:45:07.050Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-28T18:45:07.050Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-28T18:45:07.050Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:45:07.050Z] [LOG] 
   📊 Full Period Working Days for Office Team null (EMP000041):
[2025-10-28T18:45:07.050Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:07.786Z] [LOG] 
   📊 Working Days for Expected Calculation for Office Team null (EMP000041):
[2025-10-28T18:45:07.787Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:45:07.787Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:08.024Z] [LOG] 
   ⏰ Calculating Completed Hours for Office Team null (EMP000041) - All completed sessions:
[2025-10-28T18:45:08.025Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:45:08.025Z] [LOG]       Total completed sessions found: 0
[2025-10-28T18:45:08.256Z] [LOG] 
      📊 Aggregated Totals for Office Team null (EMP000041):
[2025-10-28T18:45:08.256Z] [LOG]          Weekday: 0.00h
[2025-10-28T18:45:08.257Z] [LOG]          Saturday: 0.00h
[2025-10-28T18:45:08.257Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:45:08.257Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:45:08.258Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Office Team null (EMP000041) - completed sessions only:
[2025-10-28T18:45:08.258Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:45:08.259Z] [LOG]       Saturday: 34.00h
[2025-10-28T18:45:08.259Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:08.259Z] [LOG]       Total Expected: 204.00h
[2025-10-28T18:45:08.259Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Office Team null (EMP000041) - completed sessions only:
[2025-10-28T18:45:08.260Z] [LOG]       Weekday: 0.00h
[2025-10-28T18:45:08.260Z] [LOG]       Saturday: 0.00h
[2025-10-28T18:45:08.260Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:08.261Z] [LOG]       Total Actual: 0.00h
[2025-10-28T18:45:08.261Z] [LOG] 
   💵 EXPECTED Earned Salary for Office Team null (EMP000041) - until NOW:
[2025-10-28T18:45:08.262Z] [LOG]       Weekday: 170.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:08.262Z] [LOG]       Saturday: 34.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:08.262Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:08.263Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:08.263Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-28T18:45:08.263Z] [LOG] 
   💵 ACTUAL Earned Salary for Office Team null (EMP000041) - including live session:
[2025-10-28T18:45:08.264Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:08.264Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:08.264Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:08.265Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:08.265Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T18:45:08.266Z] [LOG] 
   📊 FINAL CALCULATION for Office Team null (EMP000041):
[2025-10-28T18:45:08.266Z] [LOG]       Calculated At: Oct 29, 2025, 24:15:08
[2025-10-28T18:45:08.267Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-28T18:45:08.267Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T18:45:08.268Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:08.268Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-28T18:45:08.268Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:45:08.269Z] [LOG]       ✅ No deduction - Office Team null worked all expected hours!
[2025-10-28T18:45:08.269Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:45:08.270Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-28T18:45:08.270Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T18:45:08.270Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T18:45:08.271Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:45:08.271Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:45:08.271Z] [LOG]    Gross Salary: 0
[2025-10-28T18:45:08.271Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:45:08.272Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:45:08.272Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:08.272Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:45:08.273Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:08.273Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:45:08.273Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:08.273Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:45:08.274Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:08.274Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:45:08.274Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:08.275Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:45:08.275Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:08.275Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:45:08.275Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:08.276Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:45:08.276Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:08.277Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:45:08.277Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:08.277Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:45:08.278Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:08.278Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:45:08.279Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T18:45:08.280Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:45:08.280Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:45:08.281Z] [LOG] 💰 GROSS CALCULATION for Office Team null:
[2025-10-28T18:45:08.281Z] [LOG]    Base Salary: 1
[2025-10-28T18:45:08.281Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:45:08.282Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:45:08.282Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:08.282Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:45:08.282Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:08.283Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:45:08.283Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:08.581Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:45:08.581Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:08.581Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:45:08.582Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:45:08.582Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T18:45:08.583Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:45:08.583Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:45:08.583Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T18:45:08.583Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:45:08.584Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:45:08.584Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:45:08.585Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:45:08.585Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:45:08.585Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T18:45:08.586Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:45:08.586Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T18:45:08.586Z] [LOG] 
💾 Database Update:
[2025-10-28T18:45:08.586Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:45:08.587Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:45:08.829Z] [LOG] 
📝 Components to save:
[2025-10-28T18:45:08.830Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T18:45:08.830Z] [LOG]    Deduction components: 0
[2025-10-28T18:45:08.830Z] [LOG] Creating components for record 1a39dedb-4104-4d3f-a22d-7ac0e73f112a: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-28T18:45:09.284Z] [LOG] ✅ Financial balances updated successfully for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:09.284Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:45:09.284Z] [LOG] 
======================================================================
[2025-10-28T18:45:09.285Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Office Team null
[2025-10-28T18:45:09.285Z] [LOG] ======================================================================
[2025-10-28T18:45:09.285Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-28T18:45:09.286Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T18:45:09.286Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T18:45:09.287Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:09.287Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:09.287Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:45:09.288Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:09.288Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T18:45:09.288Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:09.289Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:45:09.289Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:45:09.289Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:45:09.290Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:45:09.290Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-28T18:45:09.290Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:45:09.291Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:09.291Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T18:45:09.292Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:45:09.292Z] [LOG] ======================================================================

[2025-10-28T18:45:09.292Z] [LOG] ✅ Office Team null: Calculation completed successfully
[2025-10-28T18:45:09.293Z] [LOG] 📊 Progress: 4/34 (11.8%)
[2025-10-28T18:45:09.293Z] [LOG] 
🧮 Processing: Faizan Faizan (EMP000003)
[2025-10-28T18:45:09.293Z] [LOG] 📋 Record ID: 1ff198ba-ea56-4b41-9a84-36ff5e81f595
[2025-10-28T18:45:09.294Z] [LOG] 
======================================================================
[2025-10-28T18:45:09.294Z] [LOG] 🧮 CALCULATING PAYROLL: Faizan Faizan (EMP000003)
[2025-10-28T18:45:09.294Z] [LOG] ======================================================================
[2025-10-28T18:45:09.867Z] [LOG] 
⚙️  ATTENDANCE DOES NOT AFFECT SALARY for Faizan Faizan
[2025-10-28T18:45:09.867Z] [LOG]    This employee will receive full base salary regardless of attendance.
[2025-10-28T18:45:09.868Z] [LOG]    (Setting stored in payroll_records from employee snapshot at run creation)
[2025-10-28T18:45:10.505Z] [LOG] 🔍 Component filtering for employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-28T18:45:10.506Z] [LOG]    Total components: 13
[2025-10-28T18:45:10.506Z] [LOG]    Applicable components: 13
[2025-10-28T18:45:10.506Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-28T18:45:11.347Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:45:11.348Z] [LOG] 🔄 Processing financial records for employee 0143a057-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:45:11.577Z] [LOG] 📊 Found 0 active loans for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:11.801Z] [LOG] 📊 Found 0 active advances for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:12.027Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:12.028Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:45:12.029Z] [LOG] 
💰 Step 1: Using full base salary (attendance not considered)...
[2025-10-28T18:45:12.029Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:45:12.029Z] [LOG]    Actual Earned Base: Rs.50000.00 (Full salary)
[2025-10-28T18:45:12.029Z] [LOG]    Attendance Shortfall: Rs.0.00 (Not applicable)
[2025-10-28T18:45:12.030Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:45:12.030Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:45:12.030Z] [LOG]    Gross Salary: 50000
[2025-10-28T18:45:12.030Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:45:12.031Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:45:12.031Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:12.031Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:45:12.031Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:12.032Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:45:12.032Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:12.032Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:45:12.033Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:12.033Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:45:12.033Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:12.034Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:45:12.034Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:12.035Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:45:12.035Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:12.035Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:45:12.035Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:12.036Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:45:12.036Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:12.036Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:45:12.036Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:12.036Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:45:12.037Z] [LOG]    EPF/ETF calculated on: Rs.50000.00
[2025-10-28T18:45:12.037Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:45:12.037Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:45:12.037Z] [LOG] 💰 GROSS CALCULATION for Faizan Faizan:
[2025-10-28T18:45:12.037Z] [LOG]    Base Salary: 50000
[2025-10-28T18:45:12.038Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:45:12.038Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:45:12.039Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:12.040Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:45:12.040Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:12.041Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:45:12.041Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:12.278Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:45:12.279Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:12.279Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:45:12.280Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:45:12.280Z] [LOG]    Actual Earned Base: Rs.50000.00
[2025-10-28T18:45:12.280Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:45:12.281Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:45:12.281Z] [LOG]    = Gross Salary: Rs.50000.00
[2025-10-28T18:45:12.281Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:45:12.282Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:45:12.282Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:45:12.282Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:45:12.282Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:45:12.282Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-28T18:45:12.283Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:45:12.283Z] [LOG]    = NET SALARY: Rs.50000.00
[2025-10-28T18:45:12.283Z] [LOG] 
💾 Database Update:
[2025-10-28T18:45:12.283Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:45:12.283Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:45:12.520Z] [LOG] 
📝 Components to save:
[2025-10-28T18:45:12.521Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:45:12.521Z] [LOG]    Deduction components: 0
[2025-10-28T18:45:12.521Z] [LOG] Creating components for record 1ff198ba-ea56-4b41-9a84-36ff5e81f595: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-28T18:45:12.522Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 50000
}
[2025-10-28T18:45:12.745Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:45:12.975Z] [LOG] Created payroll_record_component: 258d0356-038a-4109-992b-d66737ee2685 for Base Salary
[2025-10-28T18:45:13.483Z] [LOG] ✅ Financial balances updated successfully for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:13.483Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:45:13.484Z] [LOG] 
======================================================================
[2025-10-28T18:45:13.484Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Faizan Faizan
[2025-10-28T18:45:13.484Z] [LOG] ======================================================================
[2025-10-28T18:45:13.484Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:45:13.485Z] [LOG]    Actual Earned Base (Attendance-based): Rs.50000.00
[2025-10-28T18:45:13.485Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T18:45:13.485Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:13.485Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:13.486Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:45:13.486Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:13.486Z] [LOG]    GROSS SALARY: Rs.50000.00
[2025-10-28T18:45:13.486Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:13.487Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:45:13.487Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:45:13.487Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:45:13.487Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:45:13.488Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-28T18:45:13.488Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:45:13.488Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:13.488Z] [LOG]    NET SALARY: Rs.50000.00
[2025-10-28T18:45:13.489Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:45:13.489Z] [LOG] ======================================================================

[2025-10-28T18:45:13.489Z] [LOG] ✅ Faizan Faizan: Calculation completed successfully
[2025-10-28T18:45:13.490Z] [LOG] 📊 Progress: 5/34 (14.7%)
[2025-10-28T18:45:13.490Z] [LOG] 
🧮 Processing: Anoj null (EMP000014)
[2025-10-28T18:45:13.490Z] [LOG] 📋 Record ID: 389999c0-3c96-4856-bd91-d520cca4de08
[2025-10-28T18:45:13.490Z] [LOG] 
======================================================================
[2025-10-28T18:45:13.491Z] [LOG] 🧮 CALCULATING PAYROLL: Anoj null (EMP000014)
[2025-10-28T18:45:13.491Z] [LOG] ======================================================================
[2025-10-28T18:45:14.479Z] [LOG] 🔍 Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-28T18:45:14.479Z] [LOG]    Total components: 13
[2025-10-28T18:45:14.480Z] [LOG]    Applicable components: 13
[2025-10-28T18:45:14.480Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T18:45:15.516Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:45:15.517Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:45:15.721Z] [LOG] 📊 Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:15.947Z] [LOG] 📊 Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:16.173Z] [LOG] 📊 Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:16.173Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:45:16.174Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:45:16.629Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:45:16.630Z] [LOG]    👤 Employee: Anoj null (EMP000014)
[2025-10-28T18:45:16.630Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:45:16.630Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:45:16.630Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T18:45:16.631Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:45:16.863Z] [LOG] 
   💵 Pre-calculated Rates for Anoj null (EMP000014):
[2025-10-28T18:45:16.864Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-28T18:45:16.864Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-28T18:45:16.864Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-28T18:45:16.865Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:45:16.865Z] [LOG] 
   📊 Full Period Working Days for Anoj null (EMP000014):
[2025-10-28T18:45:16.865Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:17.541Z] [LOG] 
   📊 Working Days for Expected Calculation for Anoj null (EMP000014):
[2025-10-28T18:45:17.542Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:45:17.542Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:17.773Z] [LOG] 
   ⏰ Calculating Completed Hours for Anoj null (EMP000014) - All completed sessions:
[2025-10-28T18:45:17.774Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:45:17.774Z] [LOG]       Total completed sessions found: 16
[2025-10-28T18:45:17.774Z] [LOG] 
      📋 Attendance Breakdown for Anoj null (EMP000014):
[2025-10-28T18:45:17.775Z] [LOG]          1. 2025-10-01 (Weekday): 8.50h
[2025-10-28T18:45:17.775Z] [LOG]          2. 2025-10-02 (Weekday): 6.04h
[2025-10-28T18:45:17.775Z] [LOG]          3. 2025-10-03 (Weekday): 7.22h
[2025-10-28T18:45:17.776Z] [LOG]          4. 2025-10-04 (Saturday): 4.23h
[2025-10-28T18:45:17.776Z] [LOG]          5. 2025-10-07 (Weekday): 8.50h
[2025-10-28T18:45:17.776Z] [LOG]          6. 2025-10-08 (Weekday): 7.50h
[2025-10-28T18:45:17.777Z] [LOG]          7. 2025-10-09 (Weekday): 8.50h
[2025-10-28T18:45:17.777Z] [LOG]          8. 2025-10-10 (Weekday): 8.50h
[2025-10-28T18:45:17.777Z] [LOG]          9. 2025-10-11 (Saturday): 4.50h
[2025-10-28T18:45:17.778Z] [LOG]          10. 2025-10-13 (Weekday): 7.88h
[2025-10-28T18:45:17.778Z] [LOG]          11. 2025-10-17 (Weekday): 7.42h
[2025-10-28T18:45:17.778Z] [LOG]          12. 2025-10-18 (Saturday): 3.88h
[2025-10-28T18:45:17.779Z] [LOG]          13. 2025-10-21 (Weekday): 8.00h
[2025-10-28T18:45:17.779Z] [LOG]          14. 2025-10-22 (Weekday): 8.50h
[2025-10-28T18:45:17.779Z] [LOG]          15. 2025-10-23 (Weekday): 7.00h
[2025-10-28T18:45:17.780Z] [LOG]          16. 2025-10-24 (Weekday): 0.00h
[2025-10-28T18:45:18.141Z] [LOG] 
      📊 Aggregated Totals for Anoj null (EMP000014):
[2025-10-28T18:45:18.142Z] [LOG]          Weekday: 93.56h
[2025-10-28T18:45:18.142Z] [LOG]          Saturday: 12.61h
[2025-10-28T18:45:18.142Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:45:18.143Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:45:18.143Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Anoj null (EMP000014) - completed sessions only:
[2025-10-28T18:45:18.143Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:45:18.144Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:45:18.144Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:18.144Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:45:18.145Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Anoj null (EMP000014) - completed sessions only:
[2025-10-28T18:45:18.145Z] [LOG]       Weekday: 93.56h
[2025-10-28T18:45:18.145Z] [LOG]       Saturday: 12.61h
[2025-10-28T18:45:18.146Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:18.146Z] [LOG]       Total Actual: 106.17h
[2025-10-28T18:45:18.146Z] [LOG] 
   💵 EXPECTED Earned Salary for Anoj null (EMP000014) - until NOW:
[2025-10-28T18:45:18.147Z] [LOG]       Weekday: 170.00h × Rs.226.24 = Rs.38460.80
[2025-10-28T18:45:18.147Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-28T18:45:18.147Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:18.148Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:18.148Z] [LOG]       Total Expected Earned: Rs.46153.10
[2025-10-28T18:45:18.148Z] [LOG] 
   💵 ACTUAL Earned Salary for Anoj null (EMP000014) - including live session:
[2025-10-28T18:45:18.149Z] [LOG]       Weekday: 93.56h × Rs.226.24 = Rs.21167.01
[2025-10-28T18:45:18.149Z] [LOG]       Saturday: 12.61h × Rs.427.35 = Rs.5388.88
[2025-10-28T18:45:18.149Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:18.150Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:18.150Z] [LOG]       Total Actual Earned: Rs.26555.90
[2025-10-28T18:45:18.151Z] [LOG] 
   📊 FINAL CALCULATION for Anoj null (EMP000014):
[2025-10-28T18:45:18.151Z] [LOG]       Calculated At: Oct 29, 2025, 24:15:18
[2025-10-28T18:45:18.151Z] [LOG]       Expected Earned: Rs.46153.10
[2025-10-28T18:45:18.152Z] [LOG]       Actual Earned: Rs.26555.90
[2025-10-28T18:45:18.152Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:18.152Z] [LOG]       Attendance Deduction: Rs.19597.20
[2025-10-28T18:45:18.153Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:45:18.153Z] [LOG]       📉 Shortfall for Anoj null: 81.83 hours (42.46% of expected)
[2025-10-28T18:45:18.153Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:45:18.154Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:45:18.154Z] [LOG]    Actual Earned Base: Rs.26555.90
[2025-10-28T18:45:18.154Z] [LOG]    Attendance Shortfall: Rs.19597.20
[2025-10-28T18:45:18.154Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:45:18.155Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:45:18.155Z] [LOG]    Gross Salary: 26555.8979
[2025-10-28T18:45:18.156Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:45:18.156Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:45:18.156Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:18.156Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:45:18.157Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:18.157Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:45:18.157Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:18.158Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:45:18.158Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:18.158Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:45:18.158Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:18.159Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:45:18.159Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:18.159Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:45:18.159Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:18.160Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:45:18.160Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:18.160Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:45:18.160Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:18.160Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:45:18.161Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:18.161Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:45:18.161Z] [LOG]    EPF/ETF calculated on: Rs.26555.90
[2025-10-28T18:45:18.162Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:45:18.162Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:45:18.162Z] [LOG] 💰 GROSS CALCULATION for Anoj null:
[2025-10-28T18:45:18.163Z] [LOG]    Base Salary: 50000
[2025-10-28T18:45:18.163Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:45:18.163Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:45:18.164Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:18.164Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:45:18.165Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:18.165Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:45:18.165Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:18.366Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:45:18.367Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:18.367Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:45:18.368Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:45:18.368Z] [LOG]    Actual Earned Base: Rs.26555.90
[2025-10-28T18:45:18.368Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:45:18.369Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:45:18.369Z] [LOG]    = Gross Salary: Rs.26555.90
[2025-10-28T18:45:18.369Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:45:18.370Z] [LOG]    Attendance Shortfall (Info): Rs.19597.20
[2025-10-28T18:45:18.370Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:45:18.370Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:45:18.370Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:45:18.371Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:45:18.371Z] [LOG]    Gross Salary: Rs.26555.90
[2025-10-28T18:45:18.371Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:45:18.372Z] [LOG]    = NET SALARY: Rs.26555.90
[2025-10-28T18:45:18.372Z] [LOG] 
💾 Database Update:
[2025-10-28T18:45:18.373Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:45:18.373Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:45:18.586Z] [LOG] 
📝 Components to save:
[2025-10-28T18:45:18.586Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:45:18.587Z] [LOG]    Deduction components: 1
[2025-10-28T18:45:18.587Z] [LOG] Creating components for record 389999c0-3c96-4856-bd91-d520cca4de08: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:45:18.588Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 26555.8979
}
[2025-10-28T18:45:18.825Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:45:19.065Z] [LOG] Created payroll_record_component: 1cbd3a69-ab1d-47dc-919a-317746af607f for Base Salary
[2025-10-28T18:45:19.066Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 19597.202100000006
}
[2025-10-28T18:45:19.304Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:45:19.526Z] [LOG] Created payroll_record_component: b37b3c34-3383-4984-8329-e215f2027be8 for Attendance Shortfall (Info)
[2025-10-28T18:45:20.026Z] [LOG] ✅ Financial balances updated successfully for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:20.026Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:45:20.027Z] [LOG] 
======================================================================
[2025-10-28T18:45:20.027Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Anoj null
[2025-10-28T18:45:20.027Z] [LOG] ======================================================================
[2025-10-28T18:45:20.027Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:45:20.027Z] [LOG]    Actual Earned Base (Attendance-based): Rs.26555.90
[2025-10-28T18:45:20.028Z] [LOG]    Attendance Shortfall: Rs.19597.20
[2025-10-28T18:45:20.028Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:20.028Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:20.028Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:45:20.028Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:20.029Z] [LOG]    GROSS SALARY: Rs.26555.90
[2025-10-28T18:45:20.029Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:20.029Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:45:20.029Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:45:20.029Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:45:20.030Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:45:20.030Z] [LOG]       - Attendance Shortfall (Info): Rs.19597.20
[2025-10-28T18:45:20.030Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:45:20.030Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:20.030Z] [LOG]    NET SALARY: Rs.26555.90
[2025-10-28T18:45:20.030Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:45:20.031Z] [LOG] ======================================================================

[2025-10-28T18:45:20.031Z] [LOG] ✅ Anoj null: Calculation completed successfully
[2025-10-28T18:45:20.031Z] [LOG] 📊 Progress: 6/34 (17.6%)
[2025-10-28T18:45:20.031Z] [LOG] 
🧮 Processing: Jessie null (EMP000013)
[2025-10-28T18:45:20.031Z] [LOG] 📋 Record ID: 3d2bffdd-ecf7-4594-a6c9-17e3d26a2a02
[2025-10-28T18:45:20.032Z] [LOG] 
======================================================================
[2025-10-28T18:45:20.032Z] [LOG] 🧮 CALCULATING PAYROLL: Jessie null (EMP000013)
[2025-10-28T18:45:20.032Z] [LOG] ======================================================================
[2025-10-28T18:45:21.250Z] [LOG] 🔍 Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-28T18:45:21.251Z] [LOG]    Total components: 13
[2025-10-28T18:45:21.251Z] [LOG]    Applicable components: 13
[2025-10-28T18:45:21.251Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T18:45:22.162Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:45:22.163Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:45:22.442Z] [LOG] 📊 Found 0 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:22.870Z] [LOG] 📊 Found 0 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:23.078Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:23.078Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:45:23.079Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:45:23.546Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:45:23.547Z] [LOG]    👤 Employee: Jessie null (EMP000013)
[2025-10-28T18:45:23.547Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:45:23.547Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:45:23.548Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-28T18:45:23.548Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:45:23.802Z] [LOG] 
   💵 Pre-calculated Rates for Jessie null (EMP000013):
[2025-10-28T18:45:23.802Z] [LOG]       Daily Salary: Rs.2307.69
[2025-10-28T18:45:23.803Z] [LOG]       Weekday Hourly Rate: Rs.271.49
[2025-10-28T18:45:23.803Z] [LOG]       Saturday Hourly Rate: Rs.271.49
[2025-10-28T18:45:23.803Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:45:23.804Z] [LOG] 
   📊 Full Period Working Days for Jessie null (EMP000013):
[2025-10-28T18:45:23.804Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:24.604Z] [LOG] 
   📊 Working Days for Expected Calculation for Jessie null (EMP000013):
[2025-10-28T18:45:24.604Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:45:24.605Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:24.856Z] [LOG] 
   ⏰ Calculating Completed Hours for Jessie null (EMP000013) - All completed sessions:
[2025-10-28T18:45:24.857Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:45:24.857Z] [LOG]       Total completed sessions found: 15
[2025-10-28T18:45:24.857Z] [LOG] 
      📋 Attendance Breakdown for Jessie null (EMP000013):
[2025-10-28T18:45:24.858Z] [LOG]          1. 2025-10-01 (Weekday): 6.75h
[2025-10-28T18:45:24.858Z] [LOG]          2. 2025-10-02 (Weekday): 7.97h
[2025-10-28T18:45:24.858Z] [LOG]          3. 2025-10-03 (Weekday): 7.81h
[2025-10-28T18:45:24.859Z] [LOG]          4. 2025-10-07 (Weekday): 7.58h
[2025-10-28T18:45:24.859Z] [LOG]          5. 2025-10-08 (Weekday): 7.71h
[2025-10-28T18:45:24.859Z] [LOG]          6. 2025-10-10 (Weekday): 7.69h
[2025-10-28T18:45:24.860Z] [LOG]          7. 2025-10-13 (Weekday): 8.11h
[2025-10-28T18:45:24.860Z] [LOG]          8. 2025-10-14 (Weekday): 7.71h
[2025-10-28T18:45:24.860Z] [LOG]          9. 2025-10-15 (Weekday): 8.08h
[2025-10-28T18:45:24.861Z] [LOG]          10. 2025-10-16 (Weekday): 7.48h
[2025-10-28T18:45:24.861Z] [LOG]          11. 2025-10-17 (Weekday): 7.81h
[2025-10-28T18:45:24.861Z] [LOG]          12. 2025-10-21 (Weekday): 7.25h
[2025-10-28T18:45:24.862Z] [LOG]          13. 2025-10-22 (Weekday): 7.31h
[2025-10-28T18:45:24.862Z] [LOG]          14. 2025-10-23 (Weekday): 7.68h
[2025-10-28T18:45:24.862Z] [LOG]          15. 2025-10-24 (Weekday): 7.15h
[2025-10-28T18:45:25.065Z] [LOG] 
      📊 Aggregated Totals for Jessie null (EMP000013):
[2025-10-28T18:45:25.066Z] [LOG]          Weekday: 114.09h
[2025-10-28T18:45:25.066Z] [LOG]          Saturday: 0.00h
[2025-10-28T18:45:25.066Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:45:25.067Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:45:25.067Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Jessie null (EMP000013) - completed sessions only:
[2025-10-28T18:45:25.067Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:45:25.068Z] [LOG]       Saturday: 34.00h
[2025-10-28T18:45:25.068Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:25.068Z] [LOG]       Total Expected: 204.00h
[2025-10-28T18:45:25.069Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Jessie null (EMP000013) - completed sessions only:
[2025-10-28T18:45:25.069Z] [LOG]       Weekday: 114.09h
[2025-10-28T18:45:25.069Z] [LOG]       Saturday: 0.00h
[2025-10-28T18:45:25.070Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:25.070Z] [LOG]       Total Actual: 114.09h
[2025-10-28T18:45:25.070Z] [LOG] 
   💵 EXPECTED Earned Salary for Jessie null (EMP000013) - until NOW:
[2025-10-28T18:45:25.071Z] [LOG]       Weekday: 170.00h × Rs.271.49 = Rs.46153.30
[2025-10-28T18:45:25.071Z] [LOG]       Saturday: 34.00h × Rs.271.49 = Rs.9230.66
[2025-10-28T18:45:25.071Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:25.072Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:25.072Z] [LOG]       Total Expected Earned: Rs.55383.96
[2025-10-28T18:45:25.072Z] [LOG] 
   💵 ACTUAL Earned Salary for Jessie null (EMP000013) - including live session:
[2025-10-28T18:45:25.073Z] [LOG]       Weekday: 114.09h × Rs.271.49 = Rs.30974.29
[2025-10-28T18:45:25.073Z] [LOG]       Saturday: 0.00h × Rs.271.49 = Rs.0.00
[2025-10-28T18:45:25.073Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:25.074Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:25.074Z] [LOG]       Total Actual Earned: Rs.30974.29
[2025-10-28T18:45:25.075Z] [LOG] 
   📊 FINAL CALCULATION for Jessie null (EMP000013):
[2025-10-28T18:45:25.075Z] [LOG]       Calculated At: Oct 29, 2025, 24:15:25
[2025-10-28T18:45:25.075Z] [LOG]       Expected Earned: Rs.55383.96
[2025-10-28T18:45:25.076Z] [LOG]       Actual Earned: Rs.30974.29
[2025-10-28T18:45:25.076Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:25.077Z] [LOG]       Attendance Deduction: Rs.24409.67
[2025-10-28T18:45:25.077Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:45:25.077Z] [LOG]       📉 Shortfall for Jessie null: 89.91 hours (44.07% of expected)
[2025-10-28T18:45:25.078Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:45:25.078Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-28T18:45:25.079Z] [LOG]    Actual Earned Base: Rs.30974.29
[2025-10-28T18:45:25.079Z] [LOG]    Attendance Shortfall: Rs.24409.67
[2025-10-28T18:45:25.079Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:45:25.079Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:45:25.080Z] [LOG]    Gross Salary: 30974.294100000003
[2025-10-28T18:45:25.080Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:45:25.080Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:45:25.081Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:25.081Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:45:25.081Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:25.082Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:45:25.082Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:25.082Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:45:25.083Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:25.083Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:45:25.083Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:25.084Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:45:25.084Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:25.084Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:45:25.085Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:25.085Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:45:25.085Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:25.085Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:45:25.086Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:25.086Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:45:25.086Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:25.086Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:45:25.087Z] [LOG]    EPF/ETF calculated on: Rs.30974.29
[2025-10-28T18:45:25.087Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:45:25.087Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:45:25.088Z] [LOG] 💰 GROSS CALCULATION for Jessie null:
[2025-10-28T18:45:25.088Z] [LOG]    Base Salary: 60000
[2025-10-28T18:45:25.088Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:45:25.088Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:45:25.089Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:25.089Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:45:25.089Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:25.089Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:45:25.089Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:25.305Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:45:25.305Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:25.306Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:45:25.306Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:45:25.306Z] [LOG]    Actual Earned Base: Rs.30974.29
[2025-10-28T18:45:25.307Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:45:25.307Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:45:25.308Z] [LOG]    = Gross Salary: Rs.30974.29
[2025-10-28T18:45:25.308Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:45:25.308Z] [LOG]    Attendance Shortfall (Info): Rs.24409.67
[2025-10-28T18:45:25.309Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:45:25.309Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:45:25.309Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:45:25.310Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:45:25.310Z] [LOG]    Gross Salary: Rs.30974.29
[2025-10-28T18:45:25.310Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:45:25.311Z] [LOG]    = NET SALARY: Rs.30974.29
[2025-10-28T18:45:25.311Z] [LOG] 
💾 Database Update:
[2025-10-28T18:45:25.311Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:45:25.312Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:45:25.545Z] [LOG] 
📝 Components to save:
[2025-10-28T18:45:25.546Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:45:25.546Z] [LOG]    Deduction components: 1
[2025-10-28T18:45:25.547Z] [LOG] Creating components for record 3d2bffdd-ecf7-4594-a6c9-17e3d26a2a02: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:45:25.547Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 30974.294100000003
}
[2025-10-28T18:45:25.761Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:45:26.025Z] [LOG] Created payroll_record_component: d1e92b33-b7b8-4c93-acbb-cf5be6ecaa38 for Base Salary
[2025-10-28T18:45:26.026Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 24409.665900000004
}
[2025-10-28T18:45:26.265Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:45:26.505Z] [LOG] Created payroll_record_component: 829e44a2-b602-4ae9-aa60-f74d0d3dc5c2 for Attendance Shortfall (Info)
[2025-10-28T18:45:27.065Z] [LOG] ✅ Financial balances updated successfully for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:27.065Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:45:27.066Z] [LOG] 
======================================================================
[2025-10-28T18:45:27.066Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Jessie null
[2025-10-28T18:45:27.066Z] [LOG] ======================================================================
[2025-10-28T18:45:27.066Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-28T18:45:27.067Z] [LOG]    Actual Earned Base (Attendance-based): Rs.30974.29
[2025-10-28T18:45:27.067Z] [LOG]    Attendance Shortfall: Rs.24409.67
[2025-10-28T18:45:27.067Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:27.067Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:27.067Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:45:27.068Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:27.068Z] [LOG]    GROSS SALARY: Rs.30974.29
[2025-10-28T18:45:27.068Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:27.068Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:45:27.069Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:45:27.069Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:45:27.069Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:45:27.070Z] [LOG]       - Attendance Shortfall (Info): Rs.24409.67
[2025-10-28T18:45:27.070Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:45:27.070Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:27.070Z] [LOG]    NET SALARY: Rs.30974.29
[2025-10-28T18:45:27.071Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:45:27.071Z] [LOG] ======================================================================

[2025-10-28T18:45:27.071Z] [LOG] ✅ Jessie null: Calculation completed successfully
[2025-10-28T18:45:27.071Z] [LOG] 📊 Progress: 7/34 (20.6%)
[2025-10-28T18:45:27.071Z] [LOG] 
🧮 Processing: Ashen Nirmal Wadugodapitiya Wadugodapitiya (EMP000046)
[2025-10-28T18:45:27.071Z] [LOG] 📋 Record ID: 4204e341-7e03-474d-a476-e854a81c47fb
[2025-10-28T18:45:27.072Z] [LOG] 
======================================================================
[2025-10-28T18:45:27.072Z] [LOG] 🧮 CALCULATING PAYROLL: Ashen Nirmal Wadugodapitiya Wadugodapitiya (EMP000046)
[2025-10-28T18:45:27.072Z] [LOG] ======================================================================
[2025-10-28T18:45:28.058Z] [LOG] 🔍 Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-28T18:45:28.059Z] [LOG]    Total components: 13
[2025-10-28T18:45:28.059Z] [LOG]    Applicable components: 13
[2025-10-28T18:45:28.060Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T18:45:29.305Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:45:29.306Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:45:29.533Z] [LOG] 📊 Found 0 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:29.757Z] [LOG] 📊 Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:30.041Z] [LOG] 📊 Found 0 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:30.042Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:45:30.043Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:45:30.681Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:45:30.682Z] [LOG]    👤 Employee: Ashen Nirmal Wadugodapitiya Wadugodapitiya (EMP000046)
[2025-10-28T18:45:30.682Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:45:30.682Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:45:30.683Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T18:45:30.683Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:45:30.993Z] [LOG] 
   💵 Pre-calculated Rates for Ashen Nirmal Wadugodapitiya Wadugodapitiya (EMP000046):
[2025-10-28T18:45:30.994Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-28T18:45:30.994Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-28T18:45:30.994Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-28T18:45:30.995Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:45:30.995Z] [LOG] 
   📊 Full Period Working Days for Ashen Nirmal Wadugodapitiya Wadugodapitiya (EMP000046):
[2025-10-28T18:45:30.996Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:31.875Z] [LOG] 
   📊 Working Days for Expected Calculation for Ashen Nirmal Wadugodapitiya Wadugodapitiya (EMP000046):
[2025-10-28T18:45:31.875Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:45:31.875Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:32.121Z] [LOG] 
   ⏰ Calculating Completed Hours for Ashen Nirmal Wadugodapitiya Wadugodapitiya (EMP000046) - All completed sessions:
[2025-10-28T18:45:32.122Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:45:32.122Z] [LOG]       Total completed sessions found: 19
[2025-10-28T18:45:32.123Z] [LOG] 
      📋 Attendance Breakdown for Ashen Nirmal Wadugodapitiya Wadugodapitiya (EMP000046):
[2025-10-28T18:45:32.123Z] [LOG]          1. 2025-10-01 (Weekday): 8.50h
[2025-10-28T18:45:32.123Z] [LOG]          2. 2025-10-02 (Weekday): 8.47h
[2025-10-28T18:45:32.124Z] [LOG]          3. 2025-10-03 (Weekday): 8.50h
[2025-10-28T18:45:32.124Z] [LOG]          4. 2025-10-04 (Saturday): 4.50h
[2025-10-28T18:45:32.124Z] [LOG]          5. 2025-10-08 (Weekday): 8.50h
[2025-10-28T18:45:32.124Z] [LOG]          6. 2025-10-09 (Weekday): 8.50h
[2025-10-28T18:45:32.125Z] [LOG]          7. 2025-10-10 (Weekday): 8.50h
[2025-10-28T18:45:32.125Z] [LOG]          8. 2025-10-11 (Saturday): 4.50h
[2025-10-28T18:45:32.125Z] [LOG]          9. 2025-10-13 (Weekday): 8.50h
[2025-10-28T18:45:32.126Z] [LOG]          10. 2025-10-14 (Weekday): 8.50h
[2025-10-28T18:45:32.126Z] [LOG]          11. 2025-10-15 (Weekday): 7.47h
[2025-10-28T18:45:32.126Z] [LOG]          12. 2025-10-16 (Weekday): 8.50h
[2025-10-28T18:45:32.126Z] [LOG]          13. 2025-10-17 (Weekday): 8.50h
[2025-10-28T18:45:32.127Z] [LOG]          14. 2025-10-18 (Saturday): 4.50h
[2025-10-28T18:45:32.127Z] [LOG]          15. 2025-10-20 (Weekday): 8.50h
[2025-10-28T18:45:32.127Z] [LOG]          16. 2025-10-21 (Weekday): 8.38h
[2025-10-28T18:45:32.128Z] [LOG]          17. 2025-10-22 (Weekday): 8.50h
[2025-10-28T18:45:32.128Z] [LOG]          18. 2025-10-23 (Weekday): 8.33h
[2025-10-28T18:45:32.128Z] [LOG]          19. 2025-10-24 (Weekday): 8.26h
[2025-10-28T18:45:32.425Z] [LOG] 
      📊 Aggregated Totals for Ashen Nirmal Wadugodapitiya Wadugodapitiya (EMP000046):
[2025-10-28T18:45:32.426Z] [LOG]          Weekday: 134.41h
[2025-10-28T18:45:32.426Z] [LOG]          Saturday: 13.50h
[2025-10-28T18:45:32.427Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:45:32.427Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:45:32.427Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ashen Nirmal Wadugodapitiya Wadugodapitiya (EMP000046) - completed sessions only:
[2025-10-28T18:45:32.428Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:45:32.428Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:45:32.429Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:32.429Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:45:32.429Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ashen Nirmal Wadugodapitiya Wadugodapitiya (EMP000046) - completed sessions only:
[2025-10-28T18:45:32.430Z] [LOG]       Weekday: 134.41h
[2025-10-28T18:45:32.430Z] [LOG]       Saturday: 13.50h
[2025-10-28T18:45:32.430Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:32.431Z] [LOG]       Total Actual: 147.91h
[2025-10-28T18:45:32.431Z] [LOG] 
   💵 EXPECTED Earned Salary for Ashen Nirmal Wadugodapitiya Wadugodapitiya (EMP000046) - until NOW:
[2025-10-28T18:45:32.431Z] [LOG]       Weekday: 170.00h × Rs.226.24 = Rs.38460.80
[2025-10-28T18:45:32.432Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-28T18:45:32.432Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:32.433Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:32.433Z] [LOG]       Total Expected Earned: Rs.46153.10
[2025-10-28T18:45:32.433Z] [LOG] 
   💵 ACTUAL Earned Salary for Ashen Nirmal Wadugodapitiya Wadugodapitiya (EMP000046) - including live session:
[2025-10-28T18:45:32.433Z] [LOG]       Weekday: 134.41h × Rs.226.24 = Rs.30408.92
[2025-10-28T18:45:32.434Z] [LOG]       Saturday: 13.50h × Rs.427.35 = Rs.5769.23
[2025-10-28T18:45:32.434Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:32.434Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:32.435Z] [LOG]       Total Actual Earned: Rs.36178.14
[2025-10-28T18:45:32.435Z] [LOG] 
   📊 FINAL CALCULATION for Ashen Nirmal Wadugodapitiya Wadugodapitiya (EMP000046):
[2025-10-28T18:45:32.436Z] [LOG]       Calculated At: Oct 29, 2025, 24:15:32
[2025-10-28T18:45:32.436Z] [LOG]       Expected Earned: Rs.46153.10
[2025-10-28T18:45:32.436Z] [LOG]       Actual Earned: Rs.36178.14
[2025-10-28T18:45:32.437Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:32.437Z] [LOG]       Attendance Deduction: Rs.9974.96
[2025-10-28T18:45:32.437Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:45:32.438Z] [LOG]       📉 Shortfall for Ashen Nirmal Wadugodapitiya Wadugodapitiya: 40.09 hours (21.61% of expected)
[2025-10-28T18:45:32.438Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:45:32.438Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:45:32.439Z] [LOG]    Actual Earned Base: Rs.36178.14
[2025-10-28T18:45:32.439Z] [LOG]    Attendance Shortfall: Rs.9974.96
[2025-10-28T18:45:32.440Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:45:32.440Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:45:32.440Z] [LOG]    Gross Salary: 36178.1434
[2025-10-28T18:45:32.441Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:45:32.441Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:45:32.441Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:32.442Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:45:32.442Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:32.442Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:45:32.443Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:32.443Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:45:32.443Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:32.443Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:45:32.443Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:32.444Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:45:32.444Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:32.444Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:45:32.444Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:32.445Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:45:32.445Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:32.445Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:45:32.446Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:32.446Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:45:32.446Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:32.446Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:45:32.447Z] [LOG]    EPF/ETF calculated on: Rs.36178.14
[2025-10-28T18:45:32.447Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:45:32.448Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:45:32.448Z] [LOG] 💰 GROSS CALCULATION for Ashen Nirmal Wadugodapitiya Wadugodapitiya:
[2025-10-28T18:45:32.448Z] [LOG]    Base Salary: 50000
[2025-10-28T18:45:32.448Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:45:32.449Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:45:32.449Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:32.450Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:45:32.450Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:32.450Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:45:32.450Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:32.908Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:45:32.908Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:32.909Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:45:32.909Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:45:32.909Z] [LOG]    Actual Earned Base: Rs.36178.14
[2025-10-28T18:45:32.909Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:45:32.910Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:45:32.910Z] [LOG]    = Gross Salary: Rs.36178.14
[2025-10-28T18:45:32.910Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:45:32.911Z] [LOG]    Attendance Shortfall (Info): Rs.9974.96
[2025-10-28T18:45:32.911Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:45:32.911Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:45:32.911Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:45:32.912Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:45:32.912Z] [LOG]    Gross Salary: Rs.36178.14
[2025-10-28T18:45:32.912Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:45:32.912Z] [LOG]    = NET SALARY: Rs.36178.14
[2025-10-28T18:45:32.913Z] [LOG] 
💾 Database Update:
[2025-10-28T18:45:32.913Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:45:32.913Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:45:33.145Z] [LOG] 
📝 Components to save:
[2025-10-28T18:45:33.146Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:45:33.146Z] [LOG]    Deduction components: 1
[2025-10-28T18:45:33.147Z] [LOG] Creating components for record 4204e341-7e03-474d-a476-e854a81c47fb: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:45:33.147Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 36178.1434
}
[2025-10-28T18:45:33.402Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:45:33.625Z] [LOG] Created payroll_record_component: 7f77ba56-fadd-426b-b387-d1897e6f586c for Base Salary
[2025-10-28T18:45:33.625Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 9974.956600000005
}
[2025-10-28T18:45:33.865Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:45:34.073Z] [LOG] Created payroll_record_component: 7bd8d9e4-0de6-4c26-a82b-e2ab9f7cb252 for Attendance Shortfall (Info)
[2025-10-28T18:45:34.842Z] [LOG] ✅ Financial balances updated successfully for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:34.843Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:45:34.843Z] [LOG] 
======================================================================
[2025-10-28T18:45:34.844Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ashen Nirmal Wadugodapitiya Wadugodapitiya
[2025-10-28T18:45:34.844Z] [LOG] ======================================================================
[2025-10-28T18:45:34.845Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:45:34.845Z] [LOG]    Actual Earned Base (Attendance-based): Rs.36178.14
[2025-10-28T18:45:34.845Z] [LOG]    Attendance Shortfall: Rs.9974.96
[2025-10-28T18:45:34.845Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:34.846Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:34.846Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:45:34.847Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:34.847Z] [LOG]    GROSS SALARY: Rs.36178.14
[2025-10-28T18:45:34.847Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:34.848Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:45:34.848Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:45:34.848Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:45:34.849Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:45:34.849Z] [LOG]       - Attendance Shortfall (Info): Rs.9974.96
[2025-10-28T18:45:34.849Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:45:34.849Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:34.850Z] [LOG]    NET SALARY: Rs.36178.14
[2025-10-28T18:45:34.850Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:45:34.850Z] [LOG] ======================================================================

[2025-10-28T18:45:34.851Z] [LOG] ✅ Ashen Nirmal Wadugodapitiya Wadugodapitiya: Calculation completed successfully
[2025-10-28T18:45:34.851Z] [LOG] 📊 Progress: 8/34 (23.5%)
[2025-10-28T18:45:34.851Z] [LOG] 
🧮 Processing: Kaushal Thambi (EMP465256103)
[2025-10-28T18:45:34.852Z] [LOG] 📋 Record ID: 50b84254-6a1c-452e-94cd-55c5c2ac2106
[2025-10-28T18:45:34.852Z] [LOG] 
======================================================================
[2025-10-28T18:45:34.852Z] [LOG] 🧮 CALCULATING PAYROLL: Kaushal Thambi (EMP465256103)
[2025-10-28T18:45:34.852Z] [LOG] ======================================================================
[2025-10-28T18:45:35.816Z] [LOG] 🔍 Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-28T18:45:35.817Z] [LOG]    Total components: 13
[2025-10-28T18:45:35.817Z] [LOG]    Applicable components: 13
[2025-10-28T18:45:35.817Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-28T18:45:36.777Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:45:36.777Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:45:37.016Z] [LOG] 📊 Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-28T18:45:37.246Z] [LOG] 📊 Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-28T18:45:37.478Z] [LOG] 📊 Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-28T18:45:37.478Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:45:37.480Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:45:37.946Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:45:37.946Z] [LOG]    👤 Employee: Kaushal Thambi (EMP465256103)
[2025-10-28T18:45:37.946Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:45:37.947Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:45:37.947Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T18:45:37.947Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:45:38.193Z] [LOG] 
   💵 Pre-calculated Rates for Kaushal Thambi (EMP465256103):
[2025-10-28T18:45:38.194Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-28T18:45:38.194Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-28T18:45:38.195Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-28T18:45:38.195Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:45:38.195Z] [LOG] 
   📊 Full Period Working Days for Kaushal Thambi (EMP465256103):
[2025-10-28T18:45:38.196Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:38.908Z] [LOG] 
   📊 Working Days for Expected Calculation for Kaushal Thambi (EMP465256103):
[2025-10-28T18:45:38.909Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:45:38.909Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:39.161Z] [LOG] 
   ⏰ Calculating Completed Hours for Kaushal Thambi (EMP465256103) - All completed sessions:
[2025-10-28T18:45:39.161Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:45:39.162Z] [LOG]       Total completed sessions found: 21
[2025-10-28T18:45:39.162Z] [LOG] 
      📋 Attendance Breakdown for Kaushal Thambi (EMP465256103):
[2025-10-28T18:45:39.162Z] [LOG]          1. 2025-10-01 (Weekday): 8.50h
[2025-10-28T18:45:39.162Z] [LOG]          2. 2025-10-02 (Weekday): 8.34h
[2025-10-28T18:45:39.163Z] [LOG]          3. 2025-10-03 (Weekday): 8.02h
[2025-10-28T18:45:39.163Z] [LOG]          4. 2025-10-04 (Saturday): 4.50h
[2025-10-28T18:45:39.163Z] [LOG]          5. 2025-10-07 (Weekday): 8.26h
[2025-10-28T18:45:39.163Z] [LOG]          6. 2025-10-08 (Weekday): 8.50h
[2025-10-28T18:45:39.164Z] [LOG]          7. 2025-10-09 (Weekday): 8.50h
[2025-10-28T18:45:39.164Z] [LOG]          8. 2025-10-10 (Weekday): 8.09h
[2025-10-28T18:45:39.164Z] [LOG]          9. 2025-10-11 (Saturday): 4.50h
[2025-10-28T18:45:39.164Z] [LOG]          10. 2025-10-13 (Weekday): 8.44h
[2025-10-28T18:45:39.165Z] [LOG]          11. 2025-10-14 (Weekday): 8.50h
[2025-10-28T18:45:39.165Z] [LOG]          12. 2025-10-15 (Weekday): 8.25h
[2025-10-28T18:45:39.165Z] [LOG]          13. 2025-10-16 (Weekday): 8.48h
[2025-10-28T18:45:39.165Z] [LOG]          14. 2025-10-17 (Weekday): 8.50h
[2025-10-28T18:45:39.166Z] [LOG]          15. 2025-10-18 (Saturday): 4.50h
[2025-10-28T18:45:39.166Z] [LOG]          16. 2025-10-20 (Weekday): 8.50h
[2025-10-28T18:45:39.166Z] [LOG]          17. 2025-10-21 (Weekday): 8.32h
[2025-10-28T18:45:39.166Z] [LOG]          18. 2025-10-22 (Weekday): 8.50h
[2025-10-28T18:45:39.167Z] [LOG]          19. 2025-10-23 (Weekday): 8.36h
[2025-10-28T18:45:39.167Z] [LOG]          20. 2025-10-24 (Weekday): 8.50h
[2025-10-28T18:45:39.167Z] [LOG]          21. 2025-10-25 (Saturday): 4.39h
[2025-10-28T18:45:39.394Z] [LOG] 
      📊 Aggregated Totals for Kaushal Thambi (EMP465256103):
[2025-10-28T18:45:39.394Z] [LOG]          Weekday: 142.56h
[2025-10-28T18:45:39.395Z] [LOG]          Saturday: 17.89h
[2025-10-28T18:45:39.395Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:45:39.395Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:45:39.396Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Kaushal Thambi (EMP465256103) - completed sessions only:
[2025-10-28T18:45:39.396Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:45:39.396Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:45:39.397Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:39.397Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:45:39.397Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Kaushal Thambi (EMP465256103) - completed sessions only:
[2025-10-28T18:45:39.397Z] [LOG]       Weekday: 142.56h
[2025-10-28T18:45:39.398Z] [LOG]       Saturday: 17.89h
[2025-10-28T18:45:39.398Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:39.398Z] [LOG]       Total Actual: 160.45h
[2025-10-28T18:45:39.399Z] [LOG] 
   💵 EXPECTED Earned Salary for Kaushal Thambi (EMP465256103) - until NOW:
[2025-10-28T18:45:39.399Z] [LOG]       Weekday: 170.00h × Rs.226.24 = Rs.38460.80
[2025-10-28T18:45:39.399Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-28T18:45:39.399Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:39.400Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:39.400Z] [LOG]       Total Expected Earned: Rs.46153.10
[2025-10-28T18:45:39.401Z] [LOG] 
   💵 ACTUAL Earned Salary for Kaushal Thambi (EMP465256103) - including live session:
[2025-10-28T18:45:39.401Z] [LOG]       Weekday: 142.56h × Rs.226.24 = Rs.32252.77
[2025-10-28T18:45:39.401Z] [LOG]       Saturday: 17.89h × Rs.427.35 = Rs.7645.29
[2025-10-28T18:45:39.402Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:39.402Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:39.402Z] [LOG]       Total Actual Earned: Rs.39898.07
[2025-10-28T18:45:39.403Z] [LOG] 
   📊 FINAL CALCULATION for Kaushal Thambi (EMP465256103):
[2025-10-28T18:45:39.403Z] [LOG]       Calculated At: Oct 29, 2025, 24:15:39
[2025-10-28T18:45:39.404Z] [LOG]       Expected Earned: Rs.46153.10
[2025-10-28T18:45:39.404Z] [LOG]       Actual Earned: Rs.39898.07
[2025-10-28T18:45:39.404Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:39.405Z] [LOG]       Attendance Deduction: Rs.6255.03
[2025-10-28T18:45:39.405Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:45:39.405Z] [LOG]       📉 Shortfall for Kaushal Thambi: 27.55 hours (13.55% of expected)
[2025-10-28T18:45:39.406Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:45:39.406Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:45:39.406Z] [LOG]    Actual Earned Base: Rs.39898.07
[2025-10-28T18:45:39.407Z] [LOG]    Attendance Shortfall: Rs.6255.03
[2025-10-28T18:45:39.407Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:45:39.408Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:45:39.408Z] [LOG]    Gross Salary: 39898.0659
[2025-10-28T18:45:39.409Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:45:39.409Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:45:39.409Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:39.410Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:45:39.410Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:39.410Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:45:39.410Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:39.411Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:45:39.411Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:39.411Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:45:39.412Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:39.412Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:45:39.412Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:39.413Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:45:39.413Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:39.413Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:45:39.413Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:39.414Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:45:39.414Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:39.414Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:45:39.415Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:39.415Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:45:39.415Z] [LOG]    EPF/ETF calculated on: Rs.39898.07
[2025-10-28T18:45:39.415Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:45:39.416Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:45:39.416Z] [LOG] 💰 GROSS CALCULATION for Kaushal Thambi:
[2025-10-28T18:45:39.416Z] [LOG]    Base Salary: 50000
[2025-10-28T18:45:39.416Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:45:39.416Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:45:39.417Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:39.417Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:45:39.417Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:39.417Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:45:39.417Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:39.628Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:45:39.629Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:39.629Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:45:39.630Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:45:39.630Z] [LOG]    Actual Earned Base: Rs.39898.07
[2025-10-28T18:45:39.630Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:45:39.630Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:45:39.631Z] [LOG]    = Gross Salary: Rs.39898.07
[2025-10-28T18:45:39.631Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:45:39.632Z] [LOG]    Attendance Shortfall (Info): Rs.6255.03
[2025-10-28T18:45:39.632Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:45:39.632Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:45:39.633Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:45:39.633Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:45:39.633Z] [LOG]    Gross Salary: Rs.39898.07
[2025-10-28T18:45:39.634Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:45:39.634Z] [LOG]    = NET SALARY: Rs.39898.07
[2025-10-28T18:45:39.634Z] [LOG] 
💾 Database Update:
[2025-10-28T18:45:39.635Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:45:39.635Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:45:39.868Z] [LOG] 
📝 Components to save:
[2025-10-28T18:45:39.869Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:45:39.869Z] [LOG]    Deduction components: 1
[2025-10-28T18:45:39.869Z] [LOG] Creating components for record 50b84254-6a1c-452e-94cd-55c5c2ac2106: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:45:39.870Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 39898.0659
}
[2025-10-28T18:45:40.110Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:45:40.349Z] [LOG] Created payroll_record_component: 20c15478-f222-4a6d-a13f-d71b0205386a for Base Salary
[2025-10-28T18:45:40.350Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 6255.034100000004
}
[2025-10-28T18:45:40.590Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:45:40.826Z] [LOG] Created payroll_record_component: 0163f5ce-f017-442e-b266-80a305e7e8c4 for Attendance Shortfall (Info)
[2025-10-28T18:45:41.309Z] [LOG] ✅ Financial balances updated successfully for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-28T18:45:41.310Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:45:41.310Z] [LOG] 
======================================================================
[2025-10-28T18:45:41.311Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Kaushal Thambi
[2025-10-28T18:45:41.311Z] [LOG] ======================================================================
[2025-10-28T18:45:41.311Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:45:41.311Z] [LOG]    Actual Earned Base (Attendance-based): Rs.39898.07
[2025-10-28T18:45:41.312Z] [LOG]    Attendance Shortfall: Rs.6255.03
[2025-10-28T18:45:41.312Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:41.312Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:41.313Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:45:41.313Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:41.313Z] [LOG]    GROSS SALARY: Rs.39898.07
[2025-10-28T18:45:41.314Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:41.314Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:45:41.314Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:45:41.315Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:45:41.315Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:45:41.315Z] [LOG]       - Attendance Shortfall (Info): Rs.6255.03
[2025-10-28T18:45:41.316Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:45:41.316Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:41.316Z] [LOG]    NET SALARY: Rs.39898.07
[2025-10-28T18:45:41.317Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:45:41.317Z] [LOG] ======================================================================

[2025-10-28T18:45:41.317Z] [LOG] ✅ Kaushal Thambi: Calculation completed successfully
[2025-10-28T18:45:41.318Z] [LOG] 📊 Progress: 9/34 (26.5%)
[2025-10-28T18:45:41.318Z] [LOG] 
🧮 Processing: Saruban null (EMP000007)
[2025-10-28T18:45:41.318Z] [LOG] 📋 Record ID: 59d27bf7-a8bf-4079-8216-5bf277c97777
[2025-10-28T18:45:41.319Z] [LOG] 
======================================================================
[2025-10-28T18:45:41.319Z] [LOG] 🧮 CALCULATING PAYROLL: Saruban null (EMP000007)
[2025-10-28T18:45:41.319Z] [LOG] ======================================================================
[2025-10-28T18:45:42.426Z] [LOG] 🔍 Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-28T18:45:42.427Z] [LOG]    Total components: 13
[2025-10-28T18:45:42.427Z] [LOG]    Applicable components: 13
[2025-10-28T18:45:42.428Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-28T18:45:43.386Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:45:43.386Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:45:43.634Z] [LOG] 📊 Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:43.873Z] [LOG] 📊 Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:44.091Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:44.091Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:45:44.092Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:45:44.683Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:45:44.683Z] [LOG]    👤 Employee: Saruban null (EMP000007)
[2025-10-28T18:45:44.683Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:45:44.684Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:45:44.684Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-28T18:45:44.684Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:45:44.908Z] [LOG] 
   💵 Pre-calculated Rates for Saruban null (EMP000007):
[2025-10-28T18:45:44.909Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-28T18:45:44.909Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-28T18:45:44.909Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-28T18:45:44.910Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:45:44.910Z] [LOG] 
   📊 Full Period Working Days for Saruban null (EMP000007):
[2025-10-28T18:45:44.910Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:45.626Z] [LOG] 
   📊 Working Days for Expected Calculation for Saruban null (EMP000007):
[2025-10-28T18:45:45.626Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:45:45.626Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:45.860Z] [LOG] 
   ⏰ Calculating Completed Hours for Saruban null (EMP000007) - All completed sessions:
[2025-10-28T18:45:45.860Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:45:45.860Z] [LOG]       Total completed sessions found: 0
[2025-10-28T18:45:46.124Z] [LOG] 
      📊 Aggregated Totals for Saruban null (EMP000007):
[2025-10-28T18:45:46.124Z] [LOG]          Weekday: 0.00h
[2025-10-28T18:45:46.124Z] [LOG]          Saturday: 0.00h
[2025-10-28T18:45:46.125Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:45:46.125Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:45:46.125Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Saruban null (EMP000007) - completed sessions only:
[2025-10-28T18:45:46.125Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:45:46.126Z] [LOG]       Saturday: 34.00h
[2025-10-28T18:45:46.126Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:46.126Z] [LOG]       Total Expected: 204.00h
[2025-10-28T18:45:46.126Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Saruban null (EMP000007) - completed sessions only:
[2025-10-28T18:45:46.127Z] [LOG]       Weekday: 0.00h
[2025-10-28T18:45:46.127Z] [LOG]       Saturday: 0.00h
[2025-10-28T18:45:46.127Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:46.128Z] [LOG]       Total Actual: 0.00h
[2025-10-28T18:45:46.128Z] [LOG] 
   💵 EXPECTED Earned Salary for Saruban null (EMP000007) - until NOW:
[2025-10-28T18:45:46.128Z] [LOG]       Weekday: 170.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:46.128Z] [LOG]       Saturday: 34.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:46.129Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:46.129Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:46.129Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-28T18:45:46.129Z] [LOG] 
   💵 ACTUAL Earned Salary for Saruban null (EMP000007) - including live session:
[2025-10-28T18:45:46.130Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:46.130Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:46.130Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:46.131Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:46.131Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T18:45:46.132Z] [LOG] 
   📊 FINAL CALCULATION for Saruban null (EMP000007):
[2025-10-28T18:45:46.132Z] [LOG]       Calculated At: Oct 29, 2025, 24:15:46
[2025-10-28T18:45:46.132Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-28T18:45:46.132Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T18:45:46.133Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:46.133Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-28T18:45:46.133Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:45:46.133Z] [LOG]       ✅ No deduction - Saruban null worked all expected hours!
[2025-10-28T18:45:46.133Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:45:46.134Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-28T18:45:46.134Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T18:45:46.134Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T18:45:46.134Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:45:46.134Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:45:46.134Z] [LOG]    Gross Salary: 0
[2025-10-28T18:45:46.135Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:45:46.135Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:45:46.135Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:46.136Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:45:46.136Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:46.136Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:45:46.137Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:46.137Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:45:46.137Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:46.137Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:45:46.138Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:46.138Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:45:46.138Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:46.138Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:45:46.138Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:46.139Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:45:46.139Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:46.139Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:45:46.139Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:46.139Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:45:46.139Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:46.139Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:45:46.139Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T18:45:46.140Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:45:46.140Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:45:46.140Z] [LOG] 💰 GROSS CALCULATION for Saruban null:
[2025-10-28T18:45:46.140Z] [LOG]    Base Salary: 0
[2025-10-28T18:45:46.140Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:45:46.140Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:45:46.140Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:46.140Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:45:46.141Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:46.141Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:45:46.141Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:46.537Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:45:46.538Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:46.538Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:45:46.538Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:45:46.539Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T18:45:46.539Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:45:46.539Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:45:46.540Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T18:45:46.540Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:45:46.540Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:45:46.541Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:45:46.541Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:45:46.541Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:45:46.541Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T18:45:46.542Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:45:46.542Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T18:45:46.542Z] [LOG] 
💾 Database Update:
[2025-10-28T18:45:46.542Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:45:46.543Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:45:46.763Z] [LOG] 
📝 Components to save:
[2025-10-28T18:45:46.764Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T18:45:46.764Z] [LOG]    Deduction components: 0
[2025-10-28T18:45:46.764Z] [LOG] Creating components for record 59d27bf7-a8bf-4079-8216-5bf277c97777: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-28T18:45:47.224Z] [LOG] ✅ Financial balances updated successfully for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:47.225Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:45:47.225Z] [LOG] 
======================================================================
[2025-10-28T18:45:47.225Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saruban null
[2025-10-28T18:45:47.225Z] [LOG] ======================================================================
[2025-10-28T18:45:47.226Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-28T18:45:47.226Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T18:45:47.226Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T18:45:47.226Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:47.226Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:47.226Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:45:47.226Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:47.226Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T18:45:47.227Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:47.227Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:45:47.227Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:45:47.227Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:45:47.227Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:45:47.227Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-28T18:45:47.227Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:45:47.228Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:47.228Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T18:45:47.228Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:45:47.228Z] [LOG] ======================================================================

[2025-10-28T18:45:47.228Z] [LOG] ✅ Saruban null: Calculation completed successfully
[2025-10-28T18:45:47.228Z] [LOG] 📊 Progress: 10/34 (29.4%)
[2025-10-28T18:45:47.228Z] [LOG] 
🧮 Processing: Ammaar Ilham (EMP000023)
[2025-10-28T18:45:47.229Z] [LOG] 📋 Record ID: 62fbbe81-eeff-4eb2-9cc5-eeac51219a03
[2025-10-28T18:45:47.229Z] [LOG] 
======================================================================
[2025-10-28T18:45:47.229Z] [LOG] 🧮 CALCULATING PAYROLL: Ammaar Ilham (EMP000023)
[2025-10-28T18:45:47.229Z] [LOG] ======================================================================
[2025-10-28T18:45:48.213Z] [LOG] 🔍 Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-28T18:45:48.213Z] [LOG]    Total components: 13
[2025-10-28T18:45:48.213Z] [LOG]    Applicable components: 13
[2025-10-28T18:45:48.214Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T18:45:49.145Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:45:49.146Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:45:49.636Z] [LOG] 📊 Found 0 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:49.837Z] [LOG] 📊 Found 1 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:50.059Z] [LOG] 📊 Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:50.060Z] [LOG] 💸 Advance f9dffa20-fa56-4cce-bf1c-9a941f292dea: Deducting LKR 5000 (Remaining: LKR 5000)
[2025-10-28T18:45:50.060Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 5000,
  "bonuses": 0,
  "netAdjustment": -5000
}
[2025-10-28T18:45:50.060Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:45:50.513Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:45:50.514Z] [LOG]    👤 Employee: Ammaar Ilham (EMP000023)
[2025-10-28T18:45:50.514Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:45:50.514Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:45:50.515Z] [LOG]    Base Salary (Full Month): Rs.70000.00
[2025-10-28T18:45:50.515Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:45:50.753Z] [LOG] 
   💵 Pre-calculated Rates for Ammaar Ilham (EMP000023):
[2025-10-28T18:45:50.753Z] [LOG]       Daily Salary: Rs.2692.31
[2025-10-28T18:45:50.754Z] [LOG]       Weekday Hourly Rate: Rs.316.74
[2025-10-28T18:45:50.754Z] [LOG]       Saturday Hourly Rate: Rs.598.29
[2025-10-28T18:45:50.754Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:45:50.755Z] [LOG] 
   📊 Full Period Working Days for Ammaar Ilham (EMP000023):
[2025-10-28T18:45:50.755Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:51.466Z] [LOG] 
   📊 Working Days for Expected Calculation for Ammaar Ilham (EMP000023):
[2025-10-28T18:45:51.467Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:45:51.467Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:52.148Z] [LOG] 
   ⏰ Calculating Completed Hours for Ammaar Ilham (EMP000023) - All completed sessions:
[2025-10-28T18:45:52.148Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:45:52.148Z] [LOG]       Total completed sessions found: 19
[2025-10-28T18:45:52.149Z] [LOG] 
      📋 Attendance Breakdown for Ammaar Ilham (EMP000023):
[2025-10-28T18:45:52.149Z] [LOG]          1. 2025-10-01 (Weekday): 8.23h
[2025-10-28T18:45:52.149Z] [LOG]          2. 2025-10-02 (Weekday): 7.59h
[2025-10-28T18:45:52.149Z] [LOG]          3. 2025-10-03 (Weekday): 7.91h
[2025-10-28T18:45:52.150Z] [LOG]          4. 2025-10-04 (Saturday): 4.01h
[2025-10-28T18:45:52.150Z] [LOG]          5. 2025-10-07 (Weekday): 6.83h
[2025-10-28T18:45:52.150Z] [LOG]          6. 2025-10-08 (Weekday): 8.04h
[2025-10-28T18:45:52.151Z] [LOG]          7. 2025-10-09 (Weekday): 8.24h
[2025-10-28T18:45:52.151Z] [LOG]          8. 2025-10-10 (Weekday): 7.97h
[2025-10-28T18:45:52.151Z] [LOG]          9. 2025-10-11 (Saturday): 4.48h
[2025-10-28T18:45:52.151Z] [LOG]          10. 2025-10-13 (Weekday): 7.88h
[2025-10-28T18:45:52.152Z] [LOG]          11. 2025-10-15 (Weekday): 8.35h
[2025-10-28T18:45:52.152Z] [LOG]          12. 2025-10-16 (Weekday): 8.07h
[2025-10-28T18:45:52.152Z] [LOG]          13. 2025-10-17 (Weekday): 8.37h
[2025-10-28T18:45:52.152Z] [LOG]          14. 2025-10-18 (Saturday): 3.86h
[2025-10-28T18:45:52.153Z] [LOG]          15. 2025-10-20 (Weekday): 7.89h
[2025-10-28T18:45:52.153Z] [LOG]          16. 2025-10-22 (Weekday): 8.17h
[2025-10-28T18:45:52.153Z] [LOG]          17. 2025-10-23 (Weekday): 7.68h
[2025-10-28T18:45:52.153Z] [LOG]          18. 2025-10-24 (Weekday): 8.05h
[2025-10-28T18:45:52.153Z] [LOG]          19. 2025-10-25 (Saturday): 4.25h
[2025-10-28T18:45:52.345Z] [LOG] 
      📊 Aggregated Totals for Ammaar Ilham (EMP000023):
[2025-10-28T18:45:52.346Z] [LOG]          Weekday: 119.27h
[2025-10-28T18:45:52.346Z] [LOG]          Saturday: 16.60h
[2025-10-28T18:45:52.346Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:45:52.346Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:45:52.347Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ammaar Ilham (EMP000023) - completed sessions only:
[2025-10-28T18:45:52.347Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:45:52.347Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:45:52.348Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:52.348Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:45:52.348Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ammaar Ilham (EMP000023) - completed sessions only:
[2025-10-28T18:45:52.349Z] [LOG]       Weekday: 119.27h
[2025-10-28T18:45:52.349Z] [LOG]       Saturday: 16.60h
[2025-10-28T18:45:52.349Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:52.350Z] [LOG]       Total Actual: 135.87h
[2025-10-28T18:45:52.350Z] [LOG] 
   💵 EXPECTED Earned Salary for Ammaar Ilham (EMP000023) - until NOW:
[2025-10-28T18:45:52.351Z] [LOG]       Weekday: 170.00h × Rs.316.74 = Rs.53845.80
[2025-10-28T18:45:52.351Z] [LOG]       Saturday: 18.00h × Rs.598.29 = Rs.10769.22
[2025-10-28T18:45:52.351Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:52.352Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:52.352Z] [LOG]       Total Expected Earned: Rs.64615.02
[2025-10-28T18:45:52.352Z] [LOG] 
   💵 ACTUAL Earned Salary for Ammaar Ilham (EMP000023) - including live session:
[2025-10-28T18:45:52.352Z] [LOG]       Weekday: 119.27h × Rs.316.74 = Rs.37777.58
[2025-10-28T18:45:52.353Z] [LOG]       Saturday: 16.60h × Rs.598.29 = Rs.9931.61
[2025-10-28T18:45:52.353Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:52.353Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:52.353Z] [LOG]       Total Actual Earned: Rs.47709.19
[2025-10-28T18:45:52.354Z] [LOG] 
   📊 FINAL CALCULATION for Ammaar Ilham (EMP000023):
[2025-10-28T18:45:52.354Z] [LOG]       Calculated At: Oct 29, 2025, 24:15:52
[2025-10-28T18:45:52.355Z] [LOG]       Expected Earned: Rs.64615.02
[2025-10-28T18:45:52.355Z] [LOG]       Actual Earned: Rs.47709.19
[2025-10-28T18:45:52.355Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:52.355Z] [LOG]       Attendance Deduction: Rs.16905.83
[2025-10-28T18:45:52.355Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:45:52.356Z] [LOG]       📉 Shortfall for Ammaar Ilham: 52.13 hours (26.16% of expected)
[2025-10-28T18:45:52.356Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:45:52.356Z] [LOG]    Base Salary (Full): Rs.70000.00
[2025-10-28T18:45:52.357Z] [LOG]    Actual Earned Base: Rs.47709.19
[2025-10-28T18:45:52.357Z] [LOG]    Attendance Shortfall: Rs.16905.83
[2025-10-28T18:45:52.357Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:45:52.358Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:45:52.358Z] [LOG]    Gross Salary: 47709.1938
[2025-10-28T18:45:52.358Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:45:52.359Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:45:52.359Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:52.359Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:45:52.359Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:52.359Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:45:52.360Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:52.360Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:45:52.360Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:52.360Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:45:52.360Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:52.361Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:45:52.361Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:52.361Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:45:52.361Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:52.361Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:45:52.361Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:52.362Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:45:52.362Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:52.362Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:45:52.362Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:52.363Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:45:52.363Z] [LOG]    EPF/ETF calculated on: Rs.47709.19
[2025-10-28T18:45:52.363Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:45:52.363Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:45:52.364Z] [LOG] 💰 GROSS CALCULATION for Ammaar Ilham:
[2025-10-28T18:45:52.364Z] [LOG]    Base Salary: 70000
[2025-10-28T18:45:52.364Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:45:52.364Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:45:52.364Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:52.365Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:45:52.365Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:52.365Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:45:52.365Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:52.588Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:45:52.588Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:52.589Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:45:52.589Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:45:52.589Z] [LOG]    Actual Earned Base: Rs.47709.19
[2025-10-28T18:45:52.590Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:45:52.590Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:45:52.590Z] [LOG]    = Gross Salary: Rs.47709.19
[2025-10-28T18:45:52.591Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:45:52.591Z] [LOG]    Advance Deductions: Rs.5000.00
[2025-10-28T18:45:52.591Z] [LOG]    Attendance Shortfall (Info): Rs.16905.83
[2025-10-28T18:45:52.592Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:45:52.592Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.5000.00
[2025-10-28T18:45:52.592Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:45:52.592Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:45:52.593Z] [LOG]    Gross Salary: Rs.47709.19
[2025-10-28T18:45:52.593Z] [LOG]    - Total Deductions: Rs.5000.00
[2025-10-28T18:45:52.593Z] [LOG]    = NET SALARY: Rs.42709.19
[2025-10-28T18:45:52.593Z] [LOG] 
💾 Database Update:
[2025-10-28T18:45:52.594Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:45:52.594Z] [LOG]    Total Deductions: Rs.5000.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 5000.00)
[2025-10-28T18:45:52.820Z] [LOG] 
📝 Components to save:
[2025-10-28T18:45:52.821Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:45:52.821Z] [LOG]    Deduction components: 2
[2025-10-28T18:45:52.821Z] [LOG] Creating components for record 62fbbe81-eeff-4eb2-9cc5-eeac51219a03: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-28T18:45:52.822Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 47709.1938
}
[2025-10-28T18:45:53.065Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:45:53.312Z] [LOG] Created payroll_record_component: b9268a59-7971-435f-9cdb-187ff452af98 for Base Salary
[2025-10-28T18:45:53.313Z] [LOG] Processing component: {
  "name": "Advance Deductions",
  "type": "deduction",
  "amount": 5000
}
[2025-10-28T18:45:53.545Z] [LOG] Using existing component ID: 212471aa-dc59-47a4-9969-235f68be2fa4
[2025-10-28T18:45:53.786Z] [LOG] Created payroll_record_component: fba9b56b-2272-46b8-be36-827d8340fa8f for Advance Deductions
[2025-10-28T18:45:53.786Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 16905.826200000003
}
[2025-10-28T18:45:54.033Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:45:54.266Z] [LOG] Created payroll_record_component: b8368835-e1e8-4da1-8974-e1cab439edc9 for Attendance Shortfall (Info)
[2025-10-28T18:45:54.942Z] [LOG] ✅ Updated advance f9dffa20-fa56-4cce-bf1c-9a941f292dea: Remaining LKR 0, Status: completed
[2025-10-28T18:45:55.145Z] [LOG] ✅ Financial balances updated successfully for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:55.145Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:45:55.145Z] [LOG] 
======================================================================
[2025-10-28T18:45:55.146Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ammaar Ilham
[2025-10-28T18:45:55.146Z] [LOG] ======================================================================
[2025-10-28T18:45:55.146Z] [LOG]    Base Salary (Full): Rs.70000.00
[2025-10-28T18:45:55.146Z] [LOG]    Actual Earned Base (Attendance-based): Rs.47709.19
[2025-10-28T18:45:55.146Z] [LOG]    Attendance Shortfall: Rs.16905.83
[2025-10-28T18:45:55.147Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:55.147Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:55.147Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:45:55.147Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:55.148Z] [LOG]    GROSS SALARY: Rs.47709.19
[2025-10-28T18:45:55.148Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:55.148Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:45:55.148Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:45:55.148Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:45:55.149Z] [LOG]       - Advance Deductions: Rs.5000.00
[2025-10-28T18:45:55.149Z] [LOG]       - Attendance Shortfall (Info): Rs.16905.83
[2025-10-28T18:45:55.149Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.5000.00
[2025-10-28T18:45:55.149Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:45:55.150Z] [LOG]    NET SALARY: Rs.42709.19
[2025-10-28T18:45:55.150Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:45:55.150Z] [LOG] ======================================================================

[2025-10-28T18:45:55.150Z] [LOG] ✅ Ammaar Ilham: Calculation completed successfully
[2025-10-28T18:45:55.150Z] [LOG] 📊 Progress: 11/34 (32.4%)
[2025-10-28T18:45:55.151Z] [LOG] 
🧮 Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-28T18:45:55.151Z] [LOG] 📋 Record ID: 648049d2-ab2b-4f4e-9d1e-e2f4943e972d
[2025-10-28T18:45:55.151Z] [LOG] 
======================================================================
[2025-10-28T18:45:55.151Z] [LOG] 🧮 CALCULATING PAYROLL: Ruvindu Hewabandu null (EMP000027)
[2025-10-28T18:45:55.152Z] [LOG] ======================================================================
[2025-10-28T18:45:56.072Z] [LOG] 🔍 Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-28T18:45:56.072Z] [LOG]    Total components: 13
[2025-10-28T18:45:56.072Z] [LOG]    Applicable components: 13
[2025-10-28T18:45:56.072Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-28T18:45:56.905Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:45:56.906Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:45:57.153Z] [LOG] 📊 Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:57.355Z] [LOG] 📊 Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:57.569Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-28T18:45:57.570Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:45:57.571Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:45:58.033Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:45:58.034Z] [LOG]    👤 Employee: Ruvindu Hewabandu null (EMP000027)
[2025-10-28T18:45:58.034Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:45:58.034Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:45:58.035Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-28T18:45:58.035Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:45:58.226Z] [LOG] 
   💵 Pre-calculated Rates for Ruvindu Hewabandu null (EMP000027):
[2025-10-28T18:45:58.226Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-28T18:45:58.226Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-28T18:45:58.227Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-28T18:45:58.227Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:45:58.227Z] [LOG] 
   📊 Full Period Working Days for Ruvindu Hewabandu null (EMP000027):
[2025-10-28T18:45:58.227Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:58.921Z] [LOG] 
   📊 Working Days for Expected Calculation for Ruvindu Hewabandu null (EMP000027):
[2025-10-28T18:45:58.922Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:45:58.922Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:45:59.149Z] [LOG] 
   ⏰ Calculating Completed Hours for Ruvindu Hewabandu null (EMP000027) - All completed sessions:
[2025-10-28T18:45:59.149Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:45:59.149Z] [LOG]       Total completed sessions found: 0
[2025-10-28T18:45:59.386Z] [LOG] 
      📊 Aggregated Totals for Ruvindu Hewabandu null (EMP000027):
[2025-10-28T18:45:59.387Z] [LOG]          Weekday: 0.00h
[2025-10-28T18:45:59.387Z] [LOG]          Saturday: 0.00h
[2025-10-28T18:45:59.387Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:45:59.387Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:45:59.387Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ruvindu Hewabandu null (EMP000027) - completed sessions only:
[2025-10-28T18:45:59.388Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:45:59.388Z] [LOG]       Saturday: 34.00h
[2025-10-28T18:45:59.388Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:59.388Z] [LOG]       Total Expected: 204.00h
[2025-10-28T18:45:59.389Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ruvindu Hewabandu null (EMP000027) - completed sessions only:
[2025-10-28T18:45:59.389Z] [LOG]       Weekday: 0.00h
[2025-10-28T18:45:59.389Z] [LOG]       Saturday: 0.00h
[2025-10-28T18:45:59.389Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:45:59.389Z] [LOG]       Total Actual: 0.00h
[2025-10-28T18:45:59.390Z] [LOG] 
   💵 EXPECTED Earned Salary for Ruvindu Hewabandu null (EMP000027) - until NOW:
[2025-10-28T18:45:59.390Z] [LOG]       Weekday: 170.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:59.390Z] [LOG]       Saturday: 34.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:59.390Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:59.390Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:59.390Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-28T18:45:59.391Z] [LOG] 
   💵 ACTUAL Earned Salary for Ruvindu Hewabandu null (EMP000027) - including live session:
[2025-10-28T18:45:59.391Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:59.391Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:59.391Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:45:59.391Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:59.391Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T18:45:59.392Z] [LOG] 
   📊 FINAL CALCULATION for Ruvindu Hewabandu null (EMP000027):
[2025-10-28T18:45:59.393Z] [LOG]       Calculated At: Oct 29, 2025, 24:15:59
[2025-10-28T18:45:59.393Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-28T18:45:59.393Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T18:45:59.393Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:45:59.393Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-28T18:45:59.394Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:45:59.394Z] [LOG]       ✅ No deduction - Ruvindu Hewabandu null worked all expected hours!
[2025-10-28T18:45:59.394Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:45:59.394Z] [LOG]    Base Salary (Full): Rs.NaN
[2025-10-28T18:45:59.394Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T18:45:59.394Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T18:45:59.395Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:45:59.395Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:45:59.395Z] [LOG]    Gross Salary: 0
[2025-10-28T18:45:59.395Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:45:59.396Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:45:59.396Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:59.396Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:45:59.396Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:59.396Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:45:59.397Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:59.397Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:45:59.397Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:59.397Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:45:59.397Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:59.397Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:45:59.398Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:59.398Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:45:59.398Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:59.398Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:45:59.399Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:59.399Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:45:59.399Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:59.399Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:45:59.399Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:59.399Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:45:59.399Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T18:45:59.400Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:45:59.400Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:45:59.400Z] [LOG] 💰 GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-28T18:45:59.400Z] [LOG]    Base Salary: 0
[2025-10-28T18:45:59.400Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:45:59.400Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:45:59.401Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:59.401Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:45:59.401Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:59.401Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:45:59.401Z] [LOG]    Fixed amount: 0
[2025-10-28T18:45:59.782Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:45:59.782Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:45:59.783Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:45:59.783Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:45:59.783Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T18:45:59.783Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:45:59.783Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:45:59.783Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T18:45:59.784Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:45:59.784Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:45:59.784Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:45:59.784Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:45:59.784Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:45:59.784Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T18:45:59.784Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:45:59.785Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T18:45:59.785Z] [LOG] 
💾 Database Update:
[2025-10-28T18:45:59.785Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:45:59.785Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:45:59.979Z] [LOG] 
📝 Components to save:
[2025-10-28T18:45:59.979Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T18:45:59.979Z] [LOG]    Deduction components: 0
[2025-10-28T18:45:59.980Z] [LOG] Creating components for record 648049d2-ab2b-4f4e-9d1e-e2f4943e972d: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-28T18:46:00.378Z] [LOG] ✅ Financial balances updated successfully for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:00.379Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:46:00.379Z] [LOG] 
======================================================================
[2025-10-28T18:46:00.380Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ruvindu Hewabandu null
[2025-10-28T18:46:00.380Z] [LOG] ======================================================================
[2025-10-28T18:46:00.380Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-28T18:46:00.381Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T18:46:00.381Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T18:46:00.381Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:00.381Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:00.382Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:46:00.382Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:00.382Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T18:46:00.382Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:00.383Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:46:00.383Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:46:00.383Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:46:00.383Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:46:00.384Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-28T18:46:00.384Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:46:00.384Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:00.384Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T18:46:00.385Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:46:00.385Z] [LOG] ======================================================================

[2025-10-28T18:46:00.385Z] [LOG] ✅ Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-28T18:46:00.385Z] [LOG] 📊 Progress: 12/34 (35.3%)
[2025-10-28T18:46:00.385Z] [LOG] 
🧮 Processing: Hari null (EMP000017)
[2025-10-28T18:46:00.386Z] [LOG] 📋 Record ID: 7e48293a-a142-4781-a3b7-889c366a9f29
[2025-10-28T18:46:00.386Z] [LOG] 
======================================================================
[2025-10-28T18:46:00.386Z] [LOG] 🧮 CALCULATING PAYROLL: Hari null (EMP000017)
[2025-10-28T18:46:00.386Z] [LOG] ======================================================================
[2025-10-28T18:46:01.633Z] [LOG] 🔍 Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-28T18:46:01.633Z] [LOG]    Total components: 13
[2025-10-28T18:46:01.633Z] [LOG]    Applicable components: 13
[2025-10-28T18:46:01.634Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T18:46:02.593Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:46:02.594Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:46:02.839Z] [LOG] 📊 Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:03.286Z] [LOG] 📊 Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:03.492Z] [LOG] 📊 Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:03.492Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:46:03.493Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:46:03.946Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:46:03.946Z] [LOG]    👤 Employee: Hari null (EMP000017)
[2025-10-28T18:46:03.946Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:46:03.946Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:46:03.946Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T18:46:03.947Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:46:04.195Z] [LOG] 
   💵 Pre-calculated Rates for Hari null (EMP000017):
[2025-10-28T18:46:04.195Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-28T18:46:04.195Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-28T18:46:04.196Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-28T18:46:04.196Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:46:04.196Z] [LOG] 
   📊 Full Period Working Days for Hari null (EMP000017):
[2025-10-28T18:46:04.196Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:46:04.922Z] [LOG] 
   📊 Working Days for Expected Calculation for Hari null (EMP000017):
[2025-10-28T18:46:04.922Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:46:04.922Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:46:05.154Z] [LOG] 
   ⏰ Calculating Completed Hours for Hari null (EMP000017) - All completed sessions:
[2025-10-28T18:46:05.155Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:46:05.155Z] [LOG]       Total completed sessions found: 17
[2025-10-28T18:46:05.155Z] [LOG] 
      📋 Attendance Breakdown for Hari null (EMP000017):
[2025-10-28T18:46:05.156Z] [LOG]          1. 2025-10-01 (Weekday): 7.50h
[2025-10-28T18:46:05.156Z] [LOG]          2. 2025-10-02 (Weekday): 7.00h
[2025-10-28T18:46:05.156Z] [LOG]          3. 2025-10-03 (Weekday): 4.00h
[2025-10-28T18:46:05.157Z] [LOG]          4. 2025-10-04 (Saturday): 3.50h
[2025-10-28T18:46:05.157Z] [LOG]          5. 2025-10-07 (Weekday): 7.00h
[2025-10-28T18:46:05.157Z] [LOG]          6. 2025-10-08 (Weekday): 8.00h
[2025-10-28T18:46:05.157Z] [LOG]          7. 2025-10-09 (Weekday): 8.50h
[2025-10-28T18:46:05.157Z] [LOG]          8. 2025-10-10 (Weekday): 8.00h
[2025-10-28T18:46:05.158Z] [LOG]          9. 2025-10-11 (Saturday): 4.33h
[2025-10-28T18:46:05.158Z] [LOG]          10. 2025-10-14 (Weekday): 7.67h
[2025-10-28T18:46:05.158Z] [LOG]          11. 2025-10-15 (Weekday): 8.50h
[2025-10-28T18:46:05.158Z] [LOG]          12. 2025-10-16 (Weekday): 7.00h
[2025-10-28T18:46:05.159Z] [LOG]          13. 2025-10-17 (Weekday): 7.75h
[2025-10-28T18:46:05.159Z] [LOG]          14. 2025-10-18 (Saturday): 3.83h
[2025-10-28T18:46:05.159Z] [LOG]          15. 2025-10-22 (Weekday): 8.25h
[2025-10-28T18:46:05.159Z] [LOG]          16. 2025-10-23 (Weekday): 7.75h
[2025-10-28T18:46:05.160Z] [LOG]          17. 2025-10-24 (Weekday): 0.00h
[2025-10-28T18:46:05.393Z] [LOG] 
      📊 Aggregated Totals for Hari null (EMP000017):
[2025-10-28T18:46:05.393Z] [LOG]          Weekday: 96.92h
[2025-10-28T18:46:05.393Z] [LOG]          Saturday: 11.66h
[2025-10-28T18:46:05.394Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:46:05.394Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:46:05.394Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Hari null (EMP000017) - completed sessions only:
[2025-10-28T18:46:05.394Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:46:05.395Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:46:05.395Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:46:05.395Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:46:05.395Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Hari null (EMP000017) - completed sessions only:
[2025-10-28T18:46:05.396Z] [LOG]       Weekday: 96.92h
[2025-10-28T18:46:05.396Z] [LOG]       Saturday: 11.66h
[2025-10-28T18:46:05.396Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:46:05.396Z] [LOG]       Total Actual: 108.58h
[2025-10-28T18:46:05.397Z] [LOG] 
   💵 EXPECTED Earned Salary for Hari null (EMP000017) - until NOW:
[2025-10-28T18:46:05.397Z] [LOG]       Weekday: 170.00h × Rs.226.24 = Rs.38460.80
[2025-10-28T18:46:05.397Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-28T18:46:05.397Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:46:05.397Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:05.398Z] [LOG]       Total Expected Earned: Rs.46153.10
[2025-10-28T18:46:05.398Z] [LOG] 
   💵 ACTUAL Earned Salary for Hari null (EMP000017) - including live session:
[2025-10-28T18:46:05.398Z] [LOG]       Weekday: 96.92h × Rs.226.24 = Rs.21927.18
[2025-10-28T18:46:05.398Z] [LOG]       Saturday: 11.66h × Rs.427.35 = Rs.4982.90
[2025-10-28T18:46:05.398Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:46:05.398Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:05.399Z] [LOG]       Total Actual Earned: Rs.26910.08
[2025-10-28T18:46:05.399Z] [LOG] 
   📊 FINAL CALCULATION for Hari null (EMP000017):
[2025-10-28T18:46:05.399Z] [LOG]       Calculated At: Oct 29, 2025, 24:16:05
[2025-10-28T18:46:05.400Z] [LOG]       Expected Earned: Rs.46153.10
[2025-10-28T18:46:05.400Z] [LOG]       Actual Earned: Rs.26910.08
[2025-10-28T18:46:05.400Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:05.400Z] [LOG]       Attendance Deduction: Rs.19243.02
[2025-10-28T18:46:05.400Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:46:05.400Z] [LOG]       📉 Shortfall for Hari null: 79.42 hours (41.69% of expected)
[2025-10-28T18:46:05.400Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:46:05.401Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:46:05.401Z] [LOG]    Actual Earned Base: Rs.26910.08
[2025-10-28T18:46:05.401Z] [LOG]    Attendance Shortfall: Rs.19243.02
[2025-10-28T18:46:05.401Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:46:05.401Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:46:05.402Z] [LOG]    Gross Salary: 26910.081800000004
[2025-10-28T18:46:05.402Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:46:05.402Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:46:05.402Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:05.403Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:46:05.403Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:05.403Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:46:05.404Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:05.404Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:46:05.404Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:05.404Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:46:05.405Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:05.405Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:46:05.405Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:05.405Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:46:05.406Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:05.406Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:46:05.406Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:05.406Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:46:05.407Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:05.407Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:46:05.407Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:05.407Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:46:05.408Z] [LOG]    EPF/ETF calculated on: Rs.26910.08
[2025-10-28T18:46:05.408Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:46:05.408Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:46:05.409Z] [LOG] 💰 GROSS CALCULATION for Hari null:
[2025-10-28T18:46:05.409Z] [LOG]    Base Salary: 50000
[2025-10-28T18:46:05.409Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:46:05.409Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:46:05.410Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:05.410Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:46:05.410Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:05.410Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:46:05.410Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:05.783Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:46:05.783Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:05.783Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:46:05.784Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:46:05.784Z] [LOG]    Actual Earned Base: Rs.26910.08
[2025-10-28T18:46:05.785Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:46:05.785Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:46:05.785Z] [LOG]    = Gross Salary: Rs.26910.08
[2025-10-28T18:46:05.786Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:46:05.786Z] [LOG]    Attendance Shortfall (Info): Rs.19243.02
[2025-10-28T18:46:05.786Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:46:05.787Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:46:05.787Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:46:05.787Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:46:05.788Z] [LOG]    Gross Salary: Rs.26910.08
[2025-10-28T18:46:05.788Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:46:05.788Z] [LOG]    = NET SALARY: Rs.26910.08
[2025-10-28T18:46:05.788Z] [LOG] 
💾 Database Update:
[2025-10-28T18:46:05.789Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:46:05.789Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:46:06.031Z] [LOG] 
📝 Components to save:
[2025-10-28T18:46:06.031Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:46:06.032Z] [LOG]    Deduction components: 1
[2025-10-28T18:46:06.032Z] [LOG] Creating components for record 7e48293a-a142-4781-a3b7-889c366a9f29: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:46:06.032Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 26910.081800000004
}
[2025-10-28T18:46:06.273Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:46:06.472Z] [LOG] Created payroll_record_component: 8f211134-9125-41fd-a7fd-389878c01d6d for Base Salary
[2025-10-28T18:46:06.472Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 19243.018200000002
}
[2025-10-28T18:46:06.664Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:46:06.856Z] [LOG] Created payroll_record_component: f605a5ba-41ee-40c2-8f6b-8b7729cfc2db for Attendance Shortfall (Info)
[2025-10-28T18:46:07.242Z] [LOG] ✅ Financial balances updated successfully for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:07.243Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:46:07.243Z] [LOG] 
======================================================================
[2025-10-28T18:46:07.244Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Hari null
[2025-10-28T18:46:07.244Z] [LOG] ======================================================================
[2025-10-28T18:46:07.244Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:46:07.244Z] [LOG]    Actual Earned Base (Attendance-based): Rs.26910.08
[2025-10-28T18:46:07.245Z] [LOG]    Attendance Shortfall: Rs.19243.02
[2025-10-28T18:46:07.245Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:07.245Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:07.245Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:46:07.246Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:07.246Z] [LOG]    GROSS SALARY: Rs.26910.08
[2025-10-28T18:46:07.246Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:07.247Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:46:07.247Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:46:07.247Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:46:07.247Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:46:07.248Z] [LOG]       - Attendance Shortfall (Info): Rs.19243.02
[2025-10-28T18:46:07.248Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:46:07.248Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:07.248Z] [LOG]    NET SALARY: Rs.26910.08
[2025-10-28T18:46:07.249Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:46:07.249Z] [LOG] ======================================================================

[2025-10-28T18:46:07.249Z] [LOG] ✅ Hari null: Calculation completed successfully
[2025-10-28T18:46:07.250Z] [LOG] 📊 Progress: 13/34 (38.2%)
[2025-10-28T18:46:07.250Z] [LOG] 
🧮 Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-28T18:46:07.250Z] [LOG] 📋 Record ID: 8975c65f-2fac-4857-a87e-d046aed8b8e9
[2025-10-28T18:46:07.251Z] [LOG] 
======================================================================
[2025-10-28T18:46:07.251Z] [LOG] 🧮 CALCULATING PAYROLL: P.D.P Dilini Madushani null (EMP000043)
[2025-10-28T18:46:07.251Z] [LOG] ======================================================================
[2025-10-28T18:46:07.796Z] [LOG] 
⚙️  ATTENDANCE DOES NOT AFFECT SALARY for P.D.P Dilini Madushani null
[2025-10-28T18:46:07.796Z] [LOG]    This employee will receive full base salary regardless of attendance.
[2025-10-28T18:46:07.796Z] [LOG]    (Setting stored in payroll_records from employee snapshot at run creation)
[2025-10-28T18:46:08.274Z] [LOG] 🔍 Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-28T18:46:08.275Z] [LOG]    Total components: 13
[2025-10-28T18:46:08.275Z] [LOG]    Applicable components: 13
[2025-10-28T18:46:08.275Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-28T18:46:09.234Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:46:09.235Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:46:09.475Z] [LOG] 📊 Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:09.715Z] [LOG] 📊 Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:10.034Z] [LOG] 📊 Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:10.035Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:46:10.035Z] [LOG] 
💰 Step 1: Using full base salary (attendance not considered)...
[2025-10-28T18:46:10.036Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:46:10.036Z] [LOG]    Actual Earned Base: Rs.50000.00 (Full salary)
[2025-10-28T18:46:10.036Z] [LOG]    Attendance Shortfall: Rs.0.00 (Not applicable)
[2025-10-28T18:46:10.036Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:46:10.037Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:46:10.037Z] [LOG]    Gross Salary: 50000
[2025-10-28T18:46:10.038Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:46:10.038Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:46:10.038Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:10.038Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:46:10.039Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:10.039Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:46:10.039Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:10.039Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:46:10.040Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:10.040Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:46:10.040Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:10.041Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:46:10.041Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:10.041Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:46:10.042Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:10.042Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:46:10.042Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:10.043Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:46:10.043Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:10.043Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:46:10.043Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:10.044Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:46:10.044Z] [LOG]    EPF/ETF calculated on: Rs.50000.00
[2025-10-28T18:46:10.044Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:46:10.044Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:46:10.045Z] [LOG] 💰 GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-28T18:46:10.045Z] [LOG]    Base Salary: 50000
[2025-10-28T18:46:10.046Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:46:10.046Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:46:10.046Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:10.046Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:46:10.047Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:10.047Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:46:10.047Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:10.270Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:46:10.271Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:10.271Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:46:10.272Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:46:10.272Z] [LOG]    Actual Earned Base: Rs.50000.00
[2025-10-28T18:46:10.272Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:46:10.272Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:46:10.273Z] [LOG]    = Gross Salary: Rs.50000.00
[2025-10-28T18:46:10.273Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:46:10.273Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:46:10.274Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:46:10.274Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:46:10.274Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:46:10.275Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-28T18:46:10.275Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:46:10.275Z] [LOG]    = NET SALARY: Rs.50000.00
[2025-10-28T18:46:10.275Z] [LOG] 
💾 Database Update:
[2025-10-28T18:46:10.276Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:46:10.276Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:46:10.492Z] [LOG] 
📝 Components to save:
[2025-10-28T18:46:10.492Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:46:10.492Z] [LOG]    Deduction components: 0
[2025-10-28T18:46:10.493Z] [LOG] Creating components for record 8975c65f-2fac-4857-a87e-d046aed8b8e9: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-28T18:46:10.493Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 50000
}
[2025-10-28T18:46:10.698Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:46:10.907Z] [LOG] Created payroll_record_component: 8aba8483-9dc0-4ac3-9649-63f792b8bd77 for Base Salary
[2025-10-28T18:46:11.342Z] [LOG] ✅ Financial balances updated successfully for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:11.342Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:46:11.342Z] [LOG] 
======================================================================
[2025-10-28T18:46:11.343Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: P.D.P Dilini Madushani null
[2025-10-28T18:46:11.343Z] [LOG] ======================================================================
[2025-10-28T18:46:11.343Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:46:11.344Z] [LOG]    Actual Earned Base (Attendance-based): Rs.50000.00
[2025-10-28T18:46:11.344Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T18:46:11.344Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:11.345Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:11.345Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:46:11.345Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:11.345Z] [LOG]    GROSS SALARY: Rs.50000.00
[2025-10-28T18:46:11.345Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:11.346Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:46:11.346Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:46:11.346Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:46:11.346Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:46:11.346Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-28T18:46:11.347Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:46:11.347Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:11.347Z] [LOG]    NET SALARY: Rs.50000.00
[2025-10-28T18:46:11.348Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:46:11.348Z] [LOG] ======================================================================

[2025-10-28T18:46:11.348Z] [LOG] ✅ P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-28T18:46:11.349Z] [LOG] 📊 Progress: 14/34 (41.2%)
[2025-10-28T18:46:11.349Z] [LOG] 
🧮 Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-28T18:46:11.349Z] [LOG] 📋 Record ID: 8c534aae-7067-4246-90e2-bf4192ea6ef8
[2025-10-28T18:46:11.350Z] [LOG] 
======================================================================
[2025-10-28T18:46:11.350Z] [LOG] 🧮 CALCULATING PAYROLL: Viruna Damsiha Cooray null (EMP000038)
[2025-10-28T18:46:11.350Z] [LOG] ======================================================================
[2025-10-28T18:46:12.355Z] [LOG] 🔍 Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-28T18:46:12.356Z] [LOG]    Total components: 13
[2025-10-28T18:46:12.356Z] [LOG]    Applicable components: 13
[2025-10-28T18:46:12.356Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T18:46:13.306Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:46:13.307Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:46:13.548Z] [LOG] 📊 Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:13.794Z] [LOG] 📊 Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:14.042Z] [LOG] 📊 Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:14.043Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:46:14.043Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:46:14.642Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:46:14.643Z] [LOG]    👤 Employee: Viruna Damsiha Cooray null (EMP000038)
[2025-10-28T18:46:14.643Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:46:14.643Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:46:14.644Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T18:46:14.644Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:46:14.847Z] [LOG] 
   💵 Pre-calculated Rates for Viruna Damsiha Cooray null (EMP000038):
[2025-10-28T18:46:14.848Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-28T18:46:14.848Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-28T18:46:14.849Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-28T18:46:14.849Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:46:14.849Z] [LOG] 
   📊 Full Period Working Days for Viruna Damsiha Cooray null (EMP000038):
[2025-10-28T18:46:14.849Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:46:15.661Z] [LOG] 
   📊 Working Days for Expected Calculation for Viruna Damsiha Cooray null (EMP000038):
[2025-10-28T18:46:15.662Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:46:15.662Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:46:15.870Z] [LOG] 
   ⏰ Calculating Completed Hours for Viruna Damsiha Cooray null (EMP000038) - All completed sessions:
[2025-10-28T18:46:15.870Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:46:15.870Z] [LOG]       Total completed sessions found: 19
[2025-10-28T18:46:15.870Z] [LOG] 
      📋 Attendance Breakdown for Viruna Damsiha Cooray null (EMP000038):
[2025-10-28T18:46:15.871Z] [LOG]          1. 2025-10-01 (Weekday): 8.00h
[2025-10-28T18:46:15.871Z] [LOG]          2. 2025-10-02 (Weekday): 8.00h
[2025-10-28T18:46:15.871Z] [LOG]          3. 2025-10-03 (Weekday): 8.25h
[2025-10-28T18:46:15.871Z] [LOG]          4. 2025-10-04 (Saturday): 3.78h
[2025-10-28T18:46:15.871Z] [LOG]          5. 2025-10-07 (Weekday): 8.50h
[2025-10-28T18:46:15.872Z] [LOG]          6. 2025-10-08 (Weekday): 8.50h
[2025-10-28T18:46:15.872Z] [LOG]          7. 2025-10-09 (Weekday): 8.34h
[2025-10-28T18:46:15.872Z] [LOG]          8. 2025-10-10 (Weekday): 8.36h
[2025-10-28T18:46:15.872Z] [LOG]          9. 2025-10-11 (Saturday): 4.23h
[2025-10-28T18:46:15.873Z] [LOG]          10. 2025-10-13 (Weekday): 8.50h
[2025-10-28T18:46:15.873Z] [LOG]          11. 2025-10-15 (Weekday): 8.50h
[2025-10-28T18:46:15.873Z] [LOG]          12. 2025-10-16 (Weekday): 8.35h
[2025-10-28T18:46:15.873Z] [LOG]          13. 2025-10-17 (Weekday): 8.50h
[2025-10-28T18:46:15.874Z] [LOG]          14. 2025-10-18 (Saturday): 4.50h
[2025-10-28T18:46:15.874Z] [LOG]          15. 2025-10-20 (Weekday): 8.50h
[2025-10-28T18:46:15.874Z] [LOG]          16. 2025-10-21 (Weekday): 8.50h
[2025-10-28T18:46:15.874Z] [LOG]          17. 2025-10-22 (Weekday): 8.50h
[2025-10-28T18:46:15.874Z] [LOG]          18. 2025-10-23 (Weekday): 8.50h
[2025-10-28T18:46:15.875Z] [LOG]          19. 2025-10-24 (Weekday): 8.50h
[2025-10-28T18:46:16.106Z] [LOG] 
      📊 Aggregated Totals for Viruna Damsiha Cooray null (EMP000038):
[2025-10-28T18:46:16.106Z] [LOG]          Weekday: 134.30h
[2025-10-28T18:46:16.107Z] [LOG]          Saturday: 12.51h
[2025-10-28T18:46:16.107Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:46:16.107Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:46:16.108Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Viruna Damsiha Cooray null (EMP000038) - completed sessions only:
[2025-10-28T18:46:16.108Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:46:16.108Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:46:16.108Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:46:16.109Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:46:16.109Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Viruna Damsiha Cooray null (EMP000038) - completed sessions only:
[2025-10-28T18:46:16.109Z] [LOG]       Weekday: 134.30h
[2025-10-28T18:46:16.110Z] [LOG]       Saturday: 12.51h
[2025-10-28T18:46:16.110Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:46:16.110Z] [LOG]       Total Actual: 146.81h
[2025-10-28T18:46:16.111Z] [LOG] 
   💵 EXPECTED Earned Salary for Viruna Damsiha Cooray null (EMP000038) - until NOW:
[2025-10-28T18:46:16.111Z] [LOG]       Weekday: 170.00h × Rs.226.24 = Rs.38460.80
[2025-10-28T18:46:16.111Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-28T18:46:16.111Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:46:16.112Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:16.112Z] [LOG]       Total Expected Earned: Rs.46153.10
[2025-10-28T18:46:16.113Z] [LOG] 
   💵 ACTUAL Earned Salary for Viruna Damsiha Cooray null (EMP000038) - including live session:
[2025-10-28T18:46:16.113Z] [LOG]       Weekday: 134.30h × Rs.226.24 = Rs.30384.03
[2025-10-28T18:46:16.113Z] [LOG]       Saturday: 12.51h × Rs.427.35 = Rs.5346.15
[2025-10-28T18:46:16.113Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:46:16.114Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:16.114Z] [LOG]       Total Actual Earned: Rs.35730.18
[2025-10-28T18:46:16.115Z] [LOG] 
   📊 FINAL CALCULATION for Viruna Damsiha Cooray null (EMP000038):
[2025-10-28T18:46:16.115Z] [LOG]       Calculated At: Oct 29, 2025, 24:16:16
[2025-10-28T18:46:16.115Z] [LOG]       Expected Earned: Rs.46153.10
[2025-10-28T18:46:16.116Z] [LOG]       Actual Earned: Rs.35730.18
[2025-10-28T18:46:16.116Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:16.116Z] [LOG]       Attendance Deduction: Rs.10422.92
[2025-10-28T18:46:16.135Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:46:16.153Z] [LOG]       📉 Shortfall for Viruna Damsiha Cooray null: 41.19 hours (22.58% of expected)
[2025-10-28T18:46:16.153Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:46:16.154Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:46:16.154Z] [LOG]    Actual Earned Base: Rs.35730.18
[2025-10-28T18:46:16.161Z] [LOG]    Attendance Shortfall: Rs.10422.92
[2025-10-28T18:46:16.164Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:46:16.165Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:46:16.165Z] [LOG]    Gross Salary: 35730.1805
[2025-10-28T18:46:16.165Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:46:16.165Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:46:16.166Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:16.166Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:46:16.166Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:16.166Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:46:16.166Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:16.166Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:46:16.167Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:16.167Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:46:16.167Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:16.167Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:46:16.167Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:16.167Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:46:16.168Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:16.168Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:46:16.168Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:16.168Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:46:16.168Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:16.168Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:46:16.168Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:16.168Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:46:16.168Z] [LOG]    EPF/ETF calculated on: Rs.35730.18
[2025-10-28T18:46:16.169Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:46:16.169Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:46:16.169Z] [LOG] 💰 GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-28T18:46:16.169Z] [LOG]    Base Salary: 50000
[2025-10-28T18:46:16.169Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:46:16.169Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:46:16.169Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:16.170Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:46:16.170Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:16.170Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:46:16.170Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:16.433Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:46:16.434Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:16.434Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:46:16.434Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:46:16.434Z] [LOG]    Actual Earned Base: Rs.35730.18
[2025-10-28T18:46:16.435Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:46:16.435Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:46:16.435Z] [LOG]    = Gross Salary: Rs.35730.18
[2025-10-28T18:46:16.435Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:46:16.435Z] [LOG]    Attendance Shortfall (Info): Rs.10422.92
[2025-10-28T18:46:16.436Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:46:16.436Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:46:16.436Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:46:16.436Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:46:16.436Z] [LOG]    Gross Salary: Rs.35730.18
[2025-10-28T18:46:16.436Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:46:16.437Z] [LOG]    = NET SALARY: Rs.35730.18
[2025-10-28T18:46:16.437Z] [LOG] 
💾 Database Update:
[2025-10-28T18:46:16.437Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:46:16.437Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:46:16.666Z] [LOG] 
📝 Components to save:
[2025-10-28T18:46:16.666Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:46:16.666Z] [LOG]    Deduction components: 1
[2025-10-28T18:46:16.667Z] [LOG] Creating components for record 8c534aae-7067-4246-90e2-bf4192ea6ef8: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:46:16.667Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 35730.1805
}
[2025-10-28T18:46:16.906Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:46:17.154Z] [LOG] Created payroll_record_component: 78abb8bf-4042-4198-b47a-2d6715548f4b for Base Salary
[2025-10-28T18:46:17.155Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 10422.919500000004
}
[2025-10-28T18:46:17.386Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:46:17.588Z] [LOG] Created payroll_record_component: ce64f016-e9bf-4368-b6bc-1a6c6167b4a5 for Attendance Shortfall (Info)
[2025-10-28T18:46:18.037Z] [LOG] ✅ Financial balances updated successfully for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:18.038Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:46:18.038Z] [LOG] 
======================================================================
[2025-10-28T18:46:18.038Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Viruna Damsiha Cooray null
[2025-10-28T18:46:18.038Z] [LOG] ======================================================================
[2025-10-28T18:46:18.038Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:46:18.038Z] [LOG]    Actual Earned Base (Attendance-based): Rs.35730.18
[2025-10-28T18:46:18.038Z] [LOG]    Attendance Shortfall: Rs.10422.92
[2025-10-28T18:46:18.039Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:18.039Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:18.039Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:46:18.039Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:18.039Z] [LOG]    GROSS SALARY: Rs.35730.18
[2025-10-28T18:46:18.039Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:18.039Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:46:18.039Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:46:18.039Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:46:18.040Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:46:18.040Z] [LOG]       - Attendance Shortfall (Info): Rs.10422.92
[2025-10-28T18:46:18.040Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:46:18.040Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:18.040Z] [LOG]    NET SALARY: Rs.35730.18
[2025-10-28T18:46:18.040Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:46:18.040Z] [LOG] ======================================================================

[2025-10-28T18:46:18.040Z] [LOG] ✅ Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-28T18:46:18.040Z] [LOG] 📊 Progress: 15/34 (44.1%)
[2025-10-28T18:46:18.041Z] [LOG] 
🧮 Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-28T18:46:18.041Z] [LOG] 📋 Record ID: 90ad0471-4b62-4ee0-96c4-e86cb0f41a95
[2025-10-28T18:46:18.041Z] [LOG] 
======================================================================
[2025-10-28T18:46:18.041Z] [LOG] 🧮 CALCULATING PAYROLL: R. D.A Kaushalya null (EMP000044)
[2025-10-28T18:46:18.041Z] [LOG] ======================================================================
[2025-10-28T18:46:18.995Z] [LOG] 🔍 Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-28T18:46:18.995Z] [LOG]    Total components: 13
[2025-10-28T18:46:18.995Z] [LOG]    Applicable components: 13
[2025-10-28T18:46:18.996Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T18:46:20.034Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:46:20.034Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:46:20.283Z] [LOG] 📊 Found 1 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:20.515Z] [LOG] 📊 Found 1 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:20.762Z] [LOG] 📊 Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:20.763Z] [LOG] 💰 Loan 7cefbf18-49bb-4172-96ed-4dd17d3fd981: Deducting LKR 5012.5 (Remaining: LKR 10025.01)
[2025-10-28T18:46:20.763Z] [LOG] 💸 Advance 5710e8b1-3ea6-4f43-84ab-122bef18e18c: Deducting LKR 2000 (Remaining: LKR 2000)
[2025-10-28T18:46:20.764Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 5012.5,
  "advances": 2000,
  "bonuses": 0,
  "netAdjustment": -7012.5
}
[2025-10-28T18:46:20.764Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:46:21.236Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:46:21.236Z] [LOG]    👤 Employee: R. D.A Kaushalya null (EMP000044)
[2025-10-28T18:46:21.237Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:46:21.237Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:46:21.237Z] [LOG]    Base Salary (Full Month): Rs.79999.99
[2025-10-28T18:46:21.238Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:46:21.475Z] [LOG] 
   💵 Pre-calculated Rates for R. D.A Kaushalya null (EMP000044):
[2025-10-28T18:46:21.476Z] [LOG]       Daily Salary: Rs.3076.92
[2025-10-28T18:46:21.476Z] [LOG]       Weekday Hourly Rate: Rs.361.99
[2025-10-28T18:46:21.476Z] [LOG]       Saturday Hourly Rate: Rs.683.76
[2025-10-28T18:46:21.477Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:46:21.477Z] [LOG] 
   📊 Full Period Working Days for R. D.A Kaushalya null (EMP000044):
[2025-10-28T18:46:21.477Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:46:22.143Z] [LOG] 
   📊 Working Days for Expected Calculation for R. D.A Kaushalya null (EMP000044):
[2025-10-28T18:46:22.144Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:46:22.144Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:46:22.343Z] [LOG] 
   ⏰ Calculating Completed Hours for R. D.A Kaushalya null (EMP000044) - All completed sessions:
[2025-10-28T18:46:22.344Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:46:22.344Z] [LOG]       Total completed sessions found: 19
[2025-10-28T18:46:22.344Z] [LOG] 
      📋 Attendance Breakdown for R. D.A Kaushalya null (EMP000044):
[2025-10-28T18:46:22.344Z] [LOG]          1. 2025-10-01 (Weekday): 8.28h
[2025-10-28T18:46:22.345Z] [LOG]          2. 2025-10-02 (Weekday): 8.40h
[2025-10-28T18:46:22.345Z] [LOG]          3. 2025-10-03 (Weekday): 8.50h
[2025-10-28T18:46:22.345Z] [LOG]          4. 2025-10-04 (Saturday): 4.50h
[2025-10-28T18:46:22.346Z] [LOG]          5. 2025-10-07 (Weekday): 8.41h
[2025-10-28T18:46:22.346Z] [LOG]          6. 2025-10-08 (Weekday): 8.50h
[2025-10-28T18:46:22.346Z] [LOG]          7. 2025-10-10 (Weekday): 8.50h
[2025-10-28T18:46:22.347Z] [LOG]          8. 2025-10-11 (Saturday): 4.50h
[2025-10-28T18:46:22.347Z] [LOG]          9. 2025-10-13 (Weekday): 8.46h
[2025-10-28T18:46:22.347Z] [LOG]          10. 2025-10-14 (Weekday): 0.00h
[2025-10-28T18:46:22.348Z] [LOG]          11. 2025-10-15 (Weekday): 0.00h
[2025-10-28T18:46:22.348Z] [LOG]          12. 2025-10-17 (Weekday): 8.50h
[2025-10-28T18:46:22.348Z] [LOG]          13. 2025-10-18 (Saturday): 4.50h
[2025-10-28T18:46:22.349Z] [LOG]          14. 2025-10-20 (Weekday): 8.50h
[2025-10-28T18:46:22.349Z] [LOG]          15. 2025-10-21 (Weekday): 8.50h
[2025-10-28T18:46:22.349Z] [LOG]          16. 2025-10-22 (Weekday): 7.60h
[2025-10-28T18:46:22.350Z] [LOG]          17. 2025-10-23 (Weekday): 8.50h
[2025-10-28T18:46:22.350Z] [LOG]          18. 2025-10-24 (Weekday): 8.50h
[2025-10-28T18:46:22.350Z] [LOG]          19. 2025-10-25 (Saturday): 0.00h
[2025-10-28T18:46:22.811Z] [LOG] 
      📊 Aggregated Totals for R. D.A Kaushalya null (EMP000044):
[2025-10-28T18:46:22.812Z] [LOG]          Weekday: 109.15h
[2025-10-28T18:46:22.812Z] [LOG]          Saturday: 13.50h
[2025-10-28T18:46:22.812Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:46:22.813Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:46:22.813Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for R. D.A Kaushalya null (EMP000044) - completed sessions only:
[2025-10-28T18:46:22.814Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:46:22.814Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:46:22.814Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:46:22.814Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:46:22.815Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for R. D.A Kaushalya null (EMP000044) - completed sessions only:
[2025-10-28T18:46:22.815Z] [LOG]       Weekday: 109.15h
[2025-10-28T18:46:22.815Z] [LOG]       Saturday: 13.50h
[2025-10-28T18:46:22.815Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:46:22.816Z] [LOG]       Total Actual: 122.65h
[2025-10-28T18:46:22.816Z] [LOG] 
   💵 EXPECTED Earned Salary for R. D.A Kaushalya null (EMP000044) - until NOW:
[2025-10-28T18:46:22.816Z] [LOG]       Weekday: 170.00h × Rs.361.99 = Rs.61538.30
[2025-10-28T18:46:22.816Z] [LOG]       Saturday: 18.00h × Rs.683.76 = Rs.12307.68
[2025-10-28T18:46:22.816Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:46:22.816Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:22.817Z] [LOG]       Total Expected Earned: Rs.73845.98
[2025-10-28T18:46:22.817Z] [LOG] 
   💵 ACTUAL Earned Salary for R. D.A Kaushalya null (EMP000044) - including live session:
[2025-10-28T18:46:22.817Z] [LOG]       Weekday: 109.15h × Rs.361.99 = Rs.39511.21
[2025-10-28T18:46:22.817Z] [LOG]       Saturday: 13.50h × Rs.683.76 = Rs.9230.76
[2025-10-28T18:46:22.817Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:46:22.817Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:22.818Z] [LOG]       Total Actual Earned: Rs.48741.97
[2025-10-28T18:46:22.818Z] [LOG] 
   📊 FINAL CALCULATION for R. D.A Kaushalya null (EMP000044):
[2025-10-28T18:46:22.819Z] [LOG]       Calculated At: Oct 29, 2025, 24:16:22
[2025-10-28T18:46:22.819Z] [LOG]       Expected Earned: Rs.73845.98
[2025-10-28T18:46:22.819Z] [LOG]       Actual Earned: Rs.48741.97
[2025-10-28T18:46:22.819Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:22.820Z] [LOG]       Attendance Deduction: Rs.25104.01
[2025-10-28T18:46:22.820Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:46:22.820Z] [LOG]       📉 Shortfall for R. D.A Kaushalya null: 65.35 hours (34.00% of expected)
[2025-10-28T18:46:22.820Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:46:22.821Z] [LOG]    Base Salary (Full): Rs.79999.99
[2025-10-28T18:46:22.821Z] [LOG]    Actual Earned Base: Rs.48741.97
[2025-10-28T18:46:22.821Z] [LOG]    Attendance Shortfall: Rs.25104.01
[2025-10-28T18:46:22.822Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:46:22.822Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:46:22.822Z] [LOG]    Gross Salary: 48741.9685
[2025-10-28T18:46:22.822Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:46:22.823Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:46:22.823Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:22.823Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:46:22.823Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:22.824Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:46:22.824Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:22.824Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:46:22.825Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:22.825Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:46:22.825Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:22.826Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:46:22.826Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:22.826Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:46:22.826Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:22.827Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:46:22.827Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:22.827Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:46:22.827Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:22.828Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:46:22.828Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:22.828Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:46:22.828Z] [LOG]    EPF/ETF calculated on: Rs.48741.97
[2025-10-28T18:46:22.828Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:46:22.829Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:46:22.829Z] [LOG] 💰 GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-28T18:46:22.829Z] [LOG]    Base Salary: 79999.99
[2025-10-28T18:46:22.829Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:46:22.829Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:46:22.830Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:22.830Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:46:22.830Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:22.830Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:46:22.831Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:23.056Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:46:23.056Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:23.056Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:46:23.057Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:46:23.057Z] [LOG]    Actual Earned Base: Rs.48741.97
[2025-10-28T18:46:23.057Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:46:23.057Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:46:23.058Z] [LOG]    = Gross Salary: Rs.48741.97
[2025-10-28T18:46:23.058Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:46:23.058Z] [LOG]    Loan Deductions: Rs.5012.50
[2025-10-28T18:46:23.059Z] [LOG]    Advance Deductions: Rs.2000.00
[2025-10-28T18:46:23.059Z] [LOG]    Attendance Shortfall (Info): Rs.25104.01
[2025-10-28T18:46:23.059Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:46:23.060Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.7012.50
[2025-10-28T18:46:23.060Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:46:23.060Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:46:23.061Z] [LOG]    Gross Salary: Rs.48741.97
[2025-10-28T18:46:23.061Z] [LOG]    - Total Deductions: Rs.7012.50
[2025-10-28T18:46:23.061Z] [LOG]    = NET SALARY: Rs.41729.47
[2025-10-28T18:46:23.062Z] [LOG] 
💾 Database Update:
[2025-10-28T18:46:23.062Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:46:23.062Z] [LOG]    Total Deductions: Rs.7012.50 (EPF/ETF: 0.00 + Loans: 5012.50 + Advances: 2000.00)
[2025-10-28T18:46:23.315Z] [LOG] 
📝 Components to save:
[2025-10-28T18:46:23.315Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:46:23.316Z] [LOG]    Deduction components: 3
[2025-10-28T18:46:23.316Z] [LOG] Creating components for record 90ad0471-4b62-4ee0-96c4-e86cb0f41a95: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 3,
  "taxComponentsCount": 0
}
[2025-10-28T18:46:23.317Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 48741.9685
}
[2025-10-28T18:46:23.554Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:46:23.786Z] [LOG] Created payroll_record_component: 22b244a3-ed28-4b3a-9e48-98be3fdb996f for Base Salary
[2025-10-28T18:46:23.787Z] [LOG] Processing component: {
  "name": "Loan Deductions",
  "type": "deduction",
  "amount": 5012.5
}
[2025-10-28T18:46:24.034Z] [LOG] Using existing component ID: 64a0d7d8-8fdb-4968-a7a2-057590b481c7
[2025-10-28T18:46:24.274Z] [LOG] Created payroll_record_component: 7314825e-e364-4fba-9d2e-236819d17881 for Loan Deductions
[2025-10-28T18:46:24.274Z] [LOG] Processing component: {
  "name": "Advance Deductions",
  "type": "deduction",
  "amount": 2000
}
[2025-10-28T18:46:24.496Z] [LOG] Using existing component ID: 212471aa-dc59-47a4-9969-235f68be2fa4
[2025-10-28T18:46:24.747Z] [LOG] Created payroll_record_component: a84c5ffe-613e-416f-a9b0-0d8a3b0cc80b for Advance Deductions
[2025-10-28T18:46:24.748Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 25104.011500000008
}
[2025-10-28T18:46:24.987Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:46:25.227Z] [LOG] Created payroll_record_component: d6391224-ec9e-4c2d-bd87-7b0317754a17 for Attendance Shortfall (Info)
[2025-10-28T18:46:25.918Z] [LOG] ✅ Updated loan 7cefbf18-49bb-4172-96ed-4dd17d3fd981: Remaining LKR 5012.51, Status: active
[2025-10-28T18:46:26.322Z] [LOG] ✅ Updated advance 5710e8b1-3ea6-4f43-84ab-122bef18e18c: Remaining LKR 0, Status: completed
[2025-10-28T18:46:26.552Z] [LOG] ✅ Financial balances updated successfully for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:26.553Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:46:26.553Z] [LOG] 
======================================================================
[2025-10-28T18:46:26.553Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: R. D.A Kaushalya null
[2025-10-28T18:46:26.554Z] [LOG] ======================================================================
[2025-10-28T18:46:26.554Z] [LOG]    Base Salary (Full): Rs.79999.99
[2025-10-28T18:46:26.554Z] [LOG]    Actual Earned Base (Attendance-based): Rs.48741.97
[2025-10-28T18:46:26.555Z] [LOG]    Attendance Shortfall: Rs.25104.01
[2025-10-28T18:46:26.555Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:26.555Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:26.555Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:46:26.556Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:26.556Z] [LOG]    GROSS SALARY: Rs.48741.97
[2025-10-28T18:46:26.556Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:26.557Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:46:26.557Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:46:26.557Z] [LOG]       - Loan Deductions: Rs.5012.50
[2025-10-28T18:46:26.557Z] [LOG]       - Advance Deductions: Rs.2000.00
[2025-10-28T18:46:26.558Z] [LOG]       - Attendance Shortfall (Info): Rs.25104.01
[2025-10-28T18:46:26.558Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.7012.50
[2025-10-28T18:46:26.558Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:26.559Z] [LOG]    NET SALARY: Rs.41729.47
[2025-10-28T18:46:26.559Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:46:26.559Z] [LOG] ======================================================================

[2025-10-28T18:46:26.560Z] [LOG] ✅ R. D.A Kaushalya null: Calculation completed successfully
[2025-10-28T18:46:26.560Z] [LOG] 📊 Progress: 16/34 (47.1%)
[2025-10-28T18:46:26.560Z] [LOG] 
🧮 Processing: Chamodi null (EMP000032)
[2025-10-28T18:46:26.561Z] [LOG] 📋 Record ID: 985493e4-2354-455b-aad3-659704e8cf84
[2025-10-28T18:46:26.561Z] [LOG] 
======================================================================
[2025-10-28T18:46:26.561Z] [LOG] 🧮 CALCULATING PAYROLL: Chamodi null (EMP000032)
[2025-10-28T18:46:26.562Z] [LOG] ======================================================================
[2025-10-28T18:46:27.787Z] [LOG] 🔍 Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-28T18:46:27.788Z] [LOG]    Total components: 13
[2025-10-28T18:46:27.788Z] [LOG]    Applicable components: 13
[2025-10-28T18:46:27.788Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T18:46:28.675Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:46:28.675Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:46:28.915Z] [LOG] 📊 Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:29.233Z] [LOG] 📊 Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:29.475Z] [LOG] 📊 Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:29.475Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:46:29.476Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:46:29.875Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:46:29.875Z] [LOG]    👤 Employee: Chamodi null (EMP000032)
[2025-10-28T18:46:29.876Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:46:29.876Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:46:29.876Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T18:46:29.877Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:46:30.115Z] [LOG] 
   💵 Pre-calculated Rates for Chamodi null (EMP000032):
[2025-10-28T18:46:30.116Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-28T18:46:30.116Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-28T18:46:30.116Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-28T18:46:30.116Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:46:30.117Z] [LOG] 
   📊 Full Period Working Days for Chamodi null (EMP000032):
[2025-10-28T18:46:30.117Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:46:30.827Z] [LOG] 
   📊 Working Days for Expected Calculation for Chamodi null (EMP000032):
[2025-10-28T18:46:30.828Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:46:30.828Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:46:31.039Z] [LOG] 
   ⏰ Calculating Completed Hours for Chamodi null (EMP000032) - All completed sessions:
[2025-10-28T18:46:31.040Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:46:31.040Z] [LOG]       Total completed sessions found: 21
[2025-10-28T18:46:31.040Z] [LOG] 
      📋 Attendance Breakdown for Chamodi null (EMP000032):
[2025-10-28T18:46:31.041Z] [LOG]          1. 2025-10-01 (Weekday): 7.87h
[2025-10-28T18:46:31.041Z] [LOG]          2. 2025-10-02 (Weekday): 8.33h
[2025-10-28T18:46:31.041Z] [LOG]          3. 2025-10-03 (Weekday): 8.13h
[2025-10-28T18:46:31.042Z] [LOG]          4. 2025-10-04 (Saturday): 4.44h
[2025-10-28T18:46:31.042Z] [LOG]          5. 2025-10-07 (Weekday): 8.26h
[2025-10-28T18:46:31.042Z] [LOG]          6. 2025-10-08 (Weekday): 7.70h
[2025-10-28T18:46:31.042Z] [LOG]          7. 2025-10-09 (Weekday): 6.75h
[2025-10-28T18:46:31.043Z] [LOG]          8. 2025-10-10 (Weekday): 8.16h
[2025-10-28T18:46:31.043Z] [LOG]          9. 2025-10-11 (Saturday): 4.23h
[2025-10-28T18:46:31.043Z] [LOG]          10. 2025-10-13 (Weekday): 7.79h
[2025-10-28T18:46:31.044Z] [LOG]          11. 2025-10-14 (Weekday): 7.62h
[2025-10-28T18:46:31.044Z] [LOG]          12. 2025-10-15 (Weekday): 4.58h
[2025-10-28T18:46:31.044Z] [LOG]          13. 2025-10-16 (Weekday): 8.32h
[2025-10-28T18:46:31.044Z] [LOG]          14. 2025-10-17 (Weekday): 8.50h
[2025-10-28T18:46:31.045Z] [LOG]          15. 2025-10-18 (Saturday): 4.50h
[2025-10-28T18:46:31.045Z] [LOG]          16. 2025-10-20 (Weekday): 7.78h
[2025-10-28T18:46:31.045Z] [LOG]          17. 2025-10-21 (Weekday): 7.36h
[2025-10-28T18:46:31.046Z] [LOG]          18. 2025-10-22 (Weekday): 7.79h
[2025-10-28T18:46:31.046Z] [LOG]          19. 2025-10-23 (Weekday): 7.68h
[2025-10-28T18:46:31.046Z] [LOG]          20. 2025-10-24 (Weekday): 7.89h
[2025-10-28T18:46:31.046Z] [LOG]          21. 2025-10-25 (Saturday): 4.01h
[2025-10-28T18:46:31.450Z] [LOG] 
      📊 Aggregated Totals for Chamodi null (EMP000032):
[2025-10-28T18:46:31.450Z] [LOG]          Weekday: 130.51h
[2025-10-28T18:46:31.450Z] [LOG]          Saturday: 17.18h
[2025-10-28T18:46:31.451Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:46:31.451Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:46:31.451Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Chamodi null (EMP000032) - completed sessions only:
[2025-10-28T18:46:31.452Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:46:31.452Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:46:31.452Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:46:31.453Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:46:31.453Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Chamodi null (EMP000032) - completed sessions only:
[2025-10-28T18:46:31.453Z] [LOG]       Weekday: 130.51h
[2025-10-28T18:46:31.453Z] [LOG]       Saturday: 17.18h
[2025-10-28T18:46:31.454Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:46:31.454Z] [LOG]       Total Actual: 147.69h
[2025-10-28T18:46:31.454Z] [LOG] 
   💵 EXPECTED Earned Salary for Chamodi null (EMP000032) - until NOW:
[2025-10-28T18:46:31.455Z] [LOG]       Weekday: 170.00h × Rs.226.24 = Rs.38460.80
[2025-10-28T18:46:31.455Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-28T18:46:31.455Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:46:31.455Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:31.455Z] [LOG]       Total Expected Earned: Rs.46153.10
[2025-10-28T18:46:31.456Z] [LOG] 
   💵 ACTUAL Earned Salary for Chamodi null (EMP000032) - including live session:
[2025-10-28T18:46:31.456Z] [LOG]       Weekday: 130.51h × Rs.226.24 = Rs.29526.58
[2025-10-28T18:46:31.456Z] [LOG]       Saturday: 17.18h × Rs.427.35 = Rs.7341.87
[2025-10-28T18:46:31.456Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:46:31.457Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:31.457Z] [LOG]       Total Actual Earned: Rs.36868.46
[2025-10-28T18:46:31.458Z] [LOG] 
   📊 FINAL CALCULATION for Chamodi null (EMP000032):
[2025-10-28T18:46:31.458Z] [LOG]       Calculated At: Oct 29, 2025, 24:16:31
[2025-10-28T18:46:31.458Z] [LOG]       Expected Earned: Rs.46153.10
[2025-10-28T18:46:31.459Z] [LOG]       Actual Earned: Rs.36868.46
[2025-10-28T18:46:31.459Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:31.459Z] [LOG]       Attendance Deduction: Rs.9284.64
[2025-10-28T18:46:31.460Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:46:31.460Z] [LOG]       📉 Shortfall for Chamodi null: 40.31 hours (20.12% of expected)
[2025-10-28T18:46:31.460Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:46:31.461Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:46:31.461Z] [LOG]    Actual Earned Base: Rs.36868.46
[2025-10-28T18:46:31.461Z] [LOG]    Attendance Shortfall: Rs.9284.64
[2025-10-28T18:46:31.462Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:46:31.462Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:46:31.462Z] [LOG]    Gross Salary: 36868.4554
[2025-10-28T18:46:31.463Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:46:31.463Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:46:31.464Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:31.464Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:46:31.464Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:31.465Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:46:31.465Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:31.465Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:46:31.465Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:31.465Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:46:31.466Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:31.467Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:46:31.467Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:31.467Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:46:31.467Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:31.467Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:46:31.468Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:31.468Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:46:31.468Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:31.468Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:46:31.469Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:31.469Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:46:31.469Z] [LOG]    EPF/ETF calculated on: Rs.36868.46
[2025-10-28T18:46:31.469Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:46:31.470Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:46:31.470Z] [LOG] 💰 GROSS CALCULATION for Chamodi null:
[2025-10-28T18:46:31.470Z] [LOG]    Base Salary: 50000
[2025-10-28T18:46:31.470Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:46:31.470Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:46:31.471Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:31.471Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:46:31.471Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:31.471Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:46:31.471Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:31.700Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:46:31.700Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:31.700Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:46:31.701Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:46:31.701Z] [LOG]    Actual Earned Base: Rs.36868.46
[2025-10-28T18:46:31.701Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:46:31.702Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:46:31.702Z] [LOG]    = Gross Salary: Rs.36868.46
[2025-10-28T18:46:31.702Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:46:31.702Z] [LOG]    Attendance Shortfall (Info): Rs.9284.64
[2025-10-28T18:46:31.703Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:46:31.703Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:46:31.703Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:46:31.704Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:46:31.704Z] [LOG]    Gross Salary: Rs.36868.46
[2025-10-28T18:46:31.704Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:46:31.705Z] [LOG]    = NET SALARY: Rs.36868.46
[2025-10-28T18:46:31.705Z] [LOG] 
💾 Database Update:
[2025-10-28T18:46:31.705Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:46:31.706Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:46:31.946Z] [LOG] 
📝 Components to save:
[2025-10-28T18:46:31.947Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:46:31.947Z] [LOG]    Deduction components: 1
[2025-10-28T18:46:31.947Z] [LOG] Creating components for record 985493e4-2354-455b-aad3-659704e8cf84: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:46:31.948Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 36868.4554
}
[2025-10-28T18:46:32.194Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:46:32.426Z] [LOG] Created payroll_record_component: c99b4dda-0dc7-4dac-ac59-456d965a79b5 for Base Salary
[2025-10-28T18:46:32.427Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 9284.644600000007
}
[2025-10-28T18:46:32.674Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:46:32.906Z] [LOG] Created payroll_record_component: 362669a2-edbb-4b25-9b9a-1d08faeeebcd for Attendance Shortfall (Info)
[2025-10-28T18:46:33.387Z] [LOG] ✅ Financial balances updated successfully for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:33.387Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:46:33.387Z] [LOG] 
======================================================================
[2025-10-28T18:46:33.388Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chamodi null
[2025-10-28T18:46:33.388Z] [LOG] ======================================================================
[2025-10-28T18:46:33.388Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:46:33.388Z] [LOG]    Actual Earned Base (Attendance-based): Rs.36868.46
[2025-10-28T18:46:33.389Z] [LOG]    Attendance Shortfall: Rs.9284.64
[2025-10-28T18:46:33.389Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:33.389Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:33.389Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:46:33.390Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:33.390Z] [LOG]    GROSS SALARY: Rs.36868.46
[2025-10-28T18:46:33.390Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:33.390Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:46:33.391Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:46:33.391Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:46:33.391Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:46:33.391Z] [LOG]       - Attendance Shortfall (Info): Rs.9284.64
[2025-10-28T18:46:33.392Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:46:33.392Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:33.392Z] [LOG]    NET SALARY: Rs.36868.46
[2025-10-28T18:46:33.392Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:46:33.393Z] [LOG] ======================================================================

[2025-10-28T18:46:33.393Z] [LOG] ✅ Chamodi null: Calculation completed successfully
[2025-10-28T18:46:33.393Z] [LOG] 📊 Progress: 17/34 (50.0%)
[2025-10-28T18:46:33.394Z] [LOG] 
🧮 Processing: Saru null (EMP000022)
[2025-10-28T18:46:33.394Z] [LOG] 📋 Record ID: 9ac325d7-68b2-45a0-b2ca-c34bb624141e
[2025-10-28T18:46:33.394Z] [LOG] 
======================================================================
[2025-10-28T18:46:33.395Z] [LOG] 🧮 CALCULATING PAYROLL: Saru null (EMP000022)
[2025-10-28T18:46:33.395Z] [LOG] ======================================================================
[2025-10-28T18:46:34.335Z] [LOG] 🔍 Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-28T18:46:34.335Z] [LOG]    Total components: 13
[2025-10-28T18:46:34.335Z] [LOG]    Applicable components: 13
[2025-10-28T18:46:34.336Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T18:46:35.227Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:46:35.227Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:46:35.475Z] [LOG] 📊 Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:35.715Z] [LOG] 📊 Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:35.923Z] [LOG] 📊 Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:35.923Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:46:35.924Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:46:36.483Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:46:36.484Z] [LOG]    👤 Employee: Saru null (EMP000022)
[2025-10-28T18:46:36.484Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:46:36.485Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:46:36.485Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T18:46:36.485Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:46:36.914Z] [LOG] 
   💵 Pre-calculated Rates for Saru null (EMP000022):
[2025-10-28T18:46:36.915Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-28T18:46:36.915Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-28T18:46:36.915Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-28T18:46:36.916Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:46:36.916Z] [LOG] 
   📊 Full Period Working Days for Saru null (EMP000022):
[2025-10-28T18:46:36.916Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:46:37.582Z] [LOG] 
   📊 Working Days for Expected Calculation for Saru null (EMP000022):
[2025-10-28T18:46:37.582Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:46:37.583Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:46:37.799Z] [LOG] 
   ⏰ Calculating Completed Hours for Saru null (EMP000022) - All completed sessions:
[2025-10-28T18:46:37.799Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:46:37.800Z] [LOG]       Total completed sessions found: 15
[2025-10-28T18:46:37.800Z] [LOG] 
      📋 Attendance Breakdown for Saru null (EMP000022):
[2025-10-28T18:46:37.800Z] [LOG]          1. 2025-10-01 (Weekday): 8.50h
[2025-10-28T18:46:37.800Z] [LOG]          2. 2025-10-02 (Weekday): 8.50h
[2025-10-28T18:46:37.801Z] [LOG]          3. 2025-10-03 (Weekday): 8.00h
[2025-10-28T18:46:37.801Z] [LOG]          4. 2025-10-04 (Saturday): 3.73h
[2025-10-28T18:46:37.801Z] [LOG]          5. 2025-10-07 (Weekday): 8.50h
[2025-10-28T18:46:37.801Z] [LOG]          6. 2025-10-10 (Weekday): 8.00h
[2025-10-28T18:46:37.802Z] [LOG]          7. 2025-10-11 (Saturday): 4.50h
[2025-10-28T18:46:37.802Z] [LOG]          8. 2025-10-13 (Weekday): 8.50h
[2025-10-28T18:46:37.802Z] [LOG]          9. 2025-10-14 (Weekday): 8.50h
[2025-10-28T18:46:37.803Z] [LOG]          10. 2025-10-15 (Weekday): 8.50h
[2025-10-28T18:46:37.803Z] [LOG]          11. 2025-10-21 (Weekday): 7.47h
[2025-10-28T18:46:37.803Z] [LOG]          12. 2025-10-22 (Weekday): 8.50h
[2025-10-28T18:46:37.804Z] [LOG]          13. 2025-10-23 (Weekday): 7.62h
[2025-10-28T18:46:37.804Z] [LOG]          14. 2025-10-24 (Weekday): 7.78h
[2025-10-28T18:46:37.804Z] [LOG]          15. 2025-10-25 (Saturday): 4.50h
[2025-10-28T18:46:38.028Z] [LOG] 
      📊 Aggregated Totals for Saru null (EMP000022):
[2025-10-28T18:46:38.028Z] [LOG]          Weekday: 98.37h
[2025-10-28T18:46:38.028Z] [LOG]          Saturday: 12.73h
[2025-10-28T18:46:38.029Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:46:38.029Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:46:38.029Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Saru null (EMP000022) - completed sessions only:
[2025-10-28T18:46:38.029Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:46:38.030Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:46:38.030Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:46:38.030Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:46:38.030Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Saru null (EMP000022) - completed sessions only:
[2025-10-28T18:46:38.031Z] [LOG]       Weekday: 98.37h
[2025-10-28T18:46:38.031Z] [LOG]       Saturday: 12.73h
[2025-10-28T18:46:38.031Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:46:38.031Z] [LOG]       Total Actual: 111.10h
[2025-10-28T18:46:38.032Z] [LOG] 
   💵 EXPECTED Earned Salary for Saru null (EMP000022) - until NOW:
[2025-10-28T18:46:38.032Z] [LOG]       Weekday: 170.00h × Rs.226.24 = Rs.38460.80
[2025-10-28T18:46:38.032Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-28T18:46:38.032Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:46:38.033Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:38.033Z] [LOG]       Total Expected Earned: Rs.46153.10
[2025-10-28T18:46:38.033Z] [LOG] 
   💵 ACTUAL Earned Salary for Saru null (EMP000022) - including live session:
[2025-10-28T18:46:38.034Z] [LOG]       Weekday: 98.37h × Rs.226.24 = Rs.22255.23
[2025-10-28T18:46:38.034Z] [LOG]       Saturday: 12.73h × Rs.427.35 = Rs.5440.17
[2025-10-28T18:46:38.034Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:46:38.035Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:38.035Z] [LOG]       Total Actual Earned: Rs.27695.39
[2025-10-28T18:46:38.036Z] [LOG] 
   📊 FINAL CALCULATION for Saru null (EMP000022):
[2025-10-28T18:46:38.036Z] [LOG]       Calculated At: Oct 29, 2025, 24:16:38
[2025-10-28T18:46:38.036Z] [LOG]       Expected Earned: Rs.46153.10
[2025-10-28T18:46:38.037Z] [LOG]       Actual Earned: Rs.27695.39
[2025-10-28T18:46:38.037Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:38.037Z] [LOG]       Attendance Deduction: Rs.18457.71
[2025-10-28T18:46:38.037Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:46:38.038Z] [LOG]       📉 Shortfall for Saru null: 76.90 hours (39.99% of expected)
[2025-10-28T18:46:38.038Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:46:38.039Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:46:38.039Z] [LOG]    Actual Earned Base: Rs.27695.39
[2025-10-28T18:46:38.039Z] [LOG]    Attendance Shortfall: Rs.18457.71
[2025-10-28T18:46:38.039Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:46:38.039Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:46:38.039Z] [LOG]    Gross Salary: 27695.3943
[2025-10-28T18:46:38.040Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:46:38.040Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:46:38.040Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:38.040Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:46:38.041Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:38.041Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:46:38.041Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:38.042Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:46:38.042Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:38.042Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:46:38.043Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:38.043Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:46:38.043Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:38.043Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:46:38.044Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:38.044Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:46:38.044Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:38.044Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:46:38.045Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:38.045Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:46:38.045Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:38.045Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:46:38.046Z] [LOG]    EPF/ETF calculated on: Rs.27695.39
[2025-10-28T18:46:38.046Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:46:38.046Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:46:38.046Z] [LOG] 💰 GROSS CALCULATION for Saru null:
[2025-10-28T18:46:38.047Z] [LOG]    Base Salary: 50000
[2025-10-28T18:46:38.047Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:46:38.047Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:46:38.047Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:38.047Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:46:38.047Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:38.048Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:46:38.048Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:38.354Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:46:38.355Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:38.355Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:46:38.355Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:46:38.356Z] [LOG]    Actual Earned Base: Rs.27695.39
[2025-10-28T18:46:38.356Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:46:38.356Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:46:38.357Z] [LOG]    = Gross Salary: Rs.27695.39
[2025-10-28T18:46:38.357Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:46:38.357Z] [LOG]    Attendance Shortfall (Info): Rs.18457.71
[2025-10-28T18:46:38.357Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:46:38.358Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:46:38.358Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:46:38.358Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:46:38.359Z] [LOG]    Gross Salary: Rs.27695.39
[2025-10-28T18:46:38.359Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:46:38.359Z] [LOG]    = NET SALARY: Rs.27695.39
[2025-10-28T18:46:38.360Z] [LOG] 
💾 Database Update:
[2025-10-28T18:46:38.360Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:46:38.360Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:46:38.587Z] [LOG] 
📝 Components to save:
[2025-10-28T18:46:38.587Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:46:38.588Z] [LOG]    Deduction components: 1
[2025-10-28T18:46:38.588Z] [LOG] Creating components for record 9ac325d7-68b2-45a0-b2ca-c34bb624141e: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:46:38.588Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 27695.3943
}
[2025-10-28T18:46:38.827Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:46:39.075Z] [LOG] Created payroll_record_component: 10490c0e-c9db-43e7-aba2-7bc4ace73e59 for Base Salary
[2025-10-28T18:46:39.075Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 18457.705700000006
}
[2025-10-28T18:46:39.308Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:46:39.554Z] [LOG] Created payroll_record_component: e13d35de-c2bb-4a49-bc42-cd049b491e2f for Attendance Shortfall (Info)
[2025-10-28T18:46:40.011Z] [LOG] ✅ Financial balances updated successfully for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:40.011Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:46:40.011Z] [LOG] 
======================================================================
[2025-10-28T18:46:40.012Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saru null
[2025-10-28T18:46:40.012Z] [LOG] ======================================================================
[2025-10-28T18:46:40.012Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:46:40.012Z] [LOG]    Actual Earned Base (Attendance-based): Rs.27695.39
[2025-10-28T18:46:40.013Z] [LOG]    Attendance Shortfall: Rs.18457.71
[2025-10-28T18:46:40.013Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:40.013Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:40.014Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:46:40.014Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:40.014Z] [LOG]    GROSS SALARY: Rs.27695.39
[2025-10-28T18:46:40.015Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:40.015Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:46:40.015Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:46:40.015Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:46:40.016Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:46:40.016Z] [LOG]       - Attendance Shortfall (Info): Rs.18457.71
[2025-10-28T18:46:40.016Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:46:40.017Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:40.017Z] [LOG]    NET SALARY: Rs.27695.39
[2025-10-28T18:46:40.017Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:46:40.017Z] [LOG] ======================================================================

[2025-10-28T18:46:40.018Z] [LOG] ✅ Saru null: Calculation completed successfully
[2025-10-28T18:46:40.018Z] [LOG] 📊 Progress: 18/34 (52.9%)
[2025-10-28T18:46:40.018Z] [LOG] 
🧮 Processing: Safna Nawas null (EMP000021)
[2025-10-28T18:46:40.019Z] [LOG] 📋 Record ID: a491e5b9-2072-4f93-a57b-171ab11fcf8c
[2025-10-28T18:46:40.019Z] [LOG] 
======================================================================
[2025-10-28T18:46:40.020Z] [LOG] 🧮 CALCULATING PAYROLL: Safna Nawas null (EMP000021)
[2025-10-28T18:46:40.021Z] [LOG] ======================================================================
[2025-10-28T18:46:41.152Z] [LOG] 🔍 Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-28T18:46:41.152Z] [LOG]    Total components: 13
[2025-10-28T18:46:41.153Z] [LOG]    Applicable components: 13
[2025-10-28T18:46:41.153Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T18:46:42.283Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:46:42.283Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:46:42.499Z] [LOG] 📊 Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:42.748Z] [LOG] 📊 Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:42.995Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:42.995Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:46:42.996Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:46:43.404Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:46:43.404Z] [LOG]    👤 Employee: Safna Nawas null (EMP000021)
[2025-10-28T18:46:43.404Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:46:43.405Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:46:43.405Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T18:46:43.405Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:46:43.627Z] [LOG] 
   💵 Pre-calculated Rates for Safna Nawas null (EMP000021):
[2025-10-28T18:46:43.628Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-28T18:46:43.628Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-28T18:46:43.628Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-28T18:46:43.628Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:46:43.628Z] [LOG] 
   📊 Full Period Working Days for Safna Nawas null (EMP000021):
[2025-10-28T18:46:43.629Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:46:44.257Z] [LOG] 
   📊 Working Days for Expected Calculation for Safna Nawas null (EMP000021):
[2025-10-28T18:46:44.258Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:46:44.258Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:46:44.603Z] [LOG] 
   ⏰ Calculating Completed Hours for Safna Nawas null (EMP000021) - All completed sessions:
[2025-10-28T18:46:44.603Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:46:44.604Z] [LOG]       Total completed sessions found: 16
[2025-10-28T18:46:44.604Z] [LOG] 
      📋 Attendance Breakdown for Safna Nawas null (EMP000021):
[2025-10-28T18:46:44.604Z] [LOG]          1. 2025-10-01 (Weekday): 7.50h
[2025-10-28T18:46:44.604Z] [LOG]          2. 2025-10-02 (Weekday): 7.42h
[2025-10-28T18:46:44.605Z] [LOG]          3. 2025-10-03 (Weekday): 8.25h
[2025-10-28T18:46:44.605Z] [LOG]          4. 2025-10-04 (Saturday): 3.33h
[2025-10-28T18:46:44.605Z] [LOG]          5. 2025-10-07 (Weekday): 7.98h
[2025-10-28T18:46:44.606Z] [LOG]          6. 2025-10-08 (Weekday): 7.80h
[2025-10-28T18:46:44.606Z] [LOG]          7. 2025-10-09 (Weekday): 8.43h
[2025-10-28T18:46:44.606Z] [LOG]          8. 2025-10-10 (Weekday): 8.50h
[2025-10-28T18:46:44.606Z] [LOG]          9. 2025-10-11 (Saturday): 3.46h
[2025-10-28T18:46:44.606Z] [LOG]          10. 2025-10-13 (Weekday): 7.50h
[2025-10-28T18:46:44.607Z] [LOG]          11. 2025-10-14 (Weekday): 8.50h
[2025-10-28T18:46:44.607Z] [LOG]          12. 2025-10-15 (Weekday): 7.83h
[2025-10-28T18:46:44.607Z] [LOG]          13. 2025-10-16 (Weekday): 8.00h
[2025-10-28T18:46:44.608Z] [LOG]          14. 2025-10-17 (Weekday): 6.50h
[2025-10-28T18:46:44.608Z] [LOG]          15. 2025-10-18 (Saturday): 4.28h
[2025-10-28T18:46:44.608Z] [LOG]          16. 2025-10-25 (Saturday): 0.00h
[2025-10-28T18:46:44.849Z] [LOG] 
      📊 Aggregated Totals for Safna Nawas null (EMP000021):
[2025-10-28T18:46:44.849Z] [LOG]          Weekday: 94.21h
[2025-10-28T18:46:44.849Z] [LOG]          Saturday: 11.07h
[2025-10-28T18:46:44.850Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:46:44.850Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:46:44.850Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Safna Nawas null (EMP000021) - completed sessions only:
[2025-10-28T18:46:44.850Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:46:44.851Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:46:44.851Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:46:44.851Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:46:44.851Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Safna Nawas null (EMP000021) - completed sessions only:
[2025-10-28T18:46:44.852Z] [LOG]       Weekday: 94.21h
[2025-10-28T18:46:44.852Z] [LOG]       Saturday: 11.07h
[2025-10-28T18:46:44.852Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:46:44.852Z] [LOG]       Total Actual: 105.28h
[2025-10-28T18:46:44.853Z] [LOG] 
   💵 EXPECTED Earned Salary for Safna Nawas null (EMP000021) - until NOW:
[2025-10-28T18:46:44.853Z] [LOG]       Weekday: 170.00h × Rs.226.24 = Rs.38460.80
[2025-10-28T18:46:44.853Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-28T18:46:44.853Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:46:44.854Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:44.854Z] [LOG]       Total Expected Earned: Rs.46153.10
[2025-10-28T18:46:44.854Z] [LOG] 
   💵 ACTUAL Earned Salary for Safna Nawas null (EMP000021) - including live session:
[2025-10-28T18:46:44.854Z] [LOG]       Weekday: 94.21h × Rs.226.24 = Rs.21314.07
[2025-10-28T18:46:44.855Z] [LOG]       Saturday: 11.07h × Rs.427.35 = Rs.4730.76
[2025-10-28T18:46:44.855Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:46:44.855Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:44.855Z] [LOG]       Total Actual Earned: Rs.26044.83
[2025-10-28T18:46:44.856Z] [LOG] 
   📊 FINAL CALCULATION for Safna Nawas null (EMP000021):
[2025-10-28T18:46:44.856Z] [LOG]       Calculated At: Oct 29, 2025, 24:16:44
[2025-10-28T18:46:44.857Z] [LOG]       Expected Earned: Rs.46153.10
[2025-10-28T18:46:44.857Z] [LOG]       Actual Earned: Rs.26044.83
[2025-10-28T18:46:44.857Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:44.857Z] [LOG]       Attendance Deduction: Rs.20108.27
[2025-10-28T18:46:44.858Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:46:44.858Z] [LOG]       📉 Shortfall for Safna Nawas null: 82.72 hours (43.57% of expected)
[2025-10-28T18:46:44.858Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:46:44.859Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:46:44.859Z] [LOG]    Actual Earned Base: Rs.26044.83
[2025-10-28T18:46:44.859Z] [LOG]    Attendance Shortfall: Rs.20108.27
[2025-10-28T18:46:44.860Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:46:44.860Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:46:44.860Z] [LOG]    Gross Salary: 26044.8349
[2025-10-28T18:46:44.861Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:46:44.861Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:46:44.861Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:44.862Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:46:44.862Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:44.863Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:46:44.863Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:44.863Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:46:44.864Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:44.864Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:46:44.864Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:44.864Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:46:44.865Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:44.865Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:46:44.865Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:44.865Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:46:44.866Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:44.866Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:46:44.866Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:44.867Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:46:44.867Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:44.867Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:46:44.868Z] [LOG]    EPF/ETF calculated on: Rs.26044.83
[2025-10-28T18:46:44.868Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:46:44.868Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:46:44.869Z] [LOG] 💰 GROSS CALCULATION for Safna Nawas null:
[2025-10-28T18:46:44.869Z] [LOG]    Base Salary: 50000
[2025-10-28T18:46:44.869Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:46:44.869Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:46:44.870Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:44.870Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:46:44.870Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:44.870Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:46:44.870Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:45.235Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:46:45.236Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:45.236Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:46:45.237Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:46:45.237Z] [LOG]    Actual Earned Base: Rs.26044.83
[2025-10-28T18:46:45.237Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:46:45.237Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:46:45.238Z] [LOG]    = Gross Salary: Rs.26044.83
[2025-10-28T18:46:45.238Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:46:45.238Z] [LOG]    Attendance Shortfall (Info): Rs.20108.27
[2025-10-28T18:46:45.238Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:46:45.239Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:46:45.239Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:46:45.239Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:46:45.240Z] [LOG]    Gross Salary: Rs.26044.83
[2025-10-28T18:46:45.240Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:46:45.240Z] [LOG]    = NET SALARY: Rs.26044.83
[2025-10-28T18:46:45.240Z] [LOG] 
💾 Database Update:
[2025-10-28T18:46:45.241Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:46:45.241Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:46:45.546Z] [LOG] 
📝 Components to save:
[2025-10-28T18:46:45.547Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:46:45.547Z] [LOG]    Deduction components: 1
[2025-10-28T18:46:45.547Z] [LOG] Creating components for record a491e5b9-2072-4f93-a57b-171ab11fcf8c: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:46:45.548Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 26044.8349
}
[2025-10-28T18:46:45.794Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:46:46.027Z] [LOG] Created payroll_record_component: 6ee120ce-9e4e-42f9-805a-daa0e0b56d58 for Base Salary
[2025-10-28T18:46:46.028Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 20108.265100000004
}
[2025-10-28T18:46:46.269Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:46:46.507Z] [LOG] Created payroll_record_component: 8a7009ff-44f8-44c8-abc1-49d3e4a89280 for Attendance Shortfall (Info)
[2025-10-28T18:46:46.987Z] [LOG] ✅ Financial balances updated successfully for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:46.987Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:46:46.987Z] [LOG] 
======================================================================
[2025-10-28T18:46:46.988Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Safna Nawas null
[2025-10-28T18:46:46.988Z] [LOG] ======================================================================
[2025-10-28T18:46:46.988Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:46:46.988Z] [LOG]    Actual Earned Base (Attendance-based): Rs.26044.83
[2025-10-28T18:46:46.989Z] [LOG]    Attendance Shortfall: Rs.20108.27
[2025-10-28T18:46:46.989Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:46.989Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:46.990Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:46:46.990Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:46.990Z] [LOG]    GROSS SALARY: Rs.26044.83
[2025-10-28T18:46:46.990Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:46.991Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:46:46.991Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:46:46.991Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:46:46.992Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:46:46.992Z] [LOG]       - Attendance Shortfall (Info): Rs.20108.27
[2025-10-28T18:46:46.992Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:46:46.992Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:46.993Z] [LOG]    NET SALARY: Rs.26044.83
[2025-10-28T18:46:46.993Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:46:46.993Z] [LOG] ======================================================================

[2025-10-28T18:46:46.994Z] [LOG] ✅ Safna Nawas null: Calculation completed successfully
[2025-10-28T18:46:46.994Z] [LOG] 📊 Progress: 19/34 (55.9%)
[2025-10-28T18:46:46.994Z] [LOG] 
🧮 Processing: Chemil null (EMP000040)
[2025-10-28T18:46:46.994Z] [LOG] 📋 Record ID: a6d691d1-1a35-4748-9227-fd7437674fde
[2025-10-28T18:46:46.995Z] [LOG] 
======================================================================
[2025-10-28T18:46:46.995Z] [LOG] 🧮 CALCULATING PAYROLL: Chemil null (EMP000040)
[2025-10-28T18:46:46.995Z] [LOG] ======================================================================
[2025-10-28T18:46:47.955Z] [LOG] 🔍 Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-28T18:46:47.955Z] [LOG]    Total components: 13
[2025-10-28T18:46:47.956Z] [LOG]    Applicable components: 13
[2025-10-28T18:46:47.956Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T18:46:48.921Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:46:48.921Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:46:49.151Z] [LOG] 📊 Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:49.391Z] [LOG] 📊 Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:49.630Z] [LOG] 📊 Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:49.630Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:46:49.630Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:46:50.101Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:46:50.102Z] [LOG]    👤 Employee: Chemil null (EMP000040)
[2025-10-28T18:46:50.102Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:46:50.102Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:46:50.102Z] [LOG]    Base Salary (Full Month): Rs.250000.00
[2025-10-28T18:46:50.103Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:46:50.336Z] [LOG] 
   💵 Pre-calculated Rates for Chemil null (EMP000040):
[2025-10-28T18:46:50.336Z] [LOG]       Daily Salary: Rs.9615.38
[2025-10-28T18:46:50.337Z] [LOG]       Weekday Hourly Rate: Rs.1131.22
[2025-10-28T18:46:50.337Z] [LOG]       Saturday Hourly Rate: Rs.2136.75
[2025-10-28T18:46:50.337Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:46:50.337Z] [LOG] 
   📊 Full Period Working Days for Chemil null (EMP000040):
[2025-10-28T18:46:50.338Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:46:51.308Z] [LOG] 
   📊 Working Days for Expected Calculation for Chemil null (EMP000040):
[2025-10-28T18:46:51.308Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:46:51.308Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:46:51.554Z] [LOG] 
   ⏰ Calculating Completed Hours for Chemil null (EMP000040) - All completed sessions:
[2025-10-28T18:46:51.555Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:46:51.555Z] [LOG]       Total completed sessions found: 15
[2025-10-28T18:46:51.555Z] [LOG] 
      📋 Attendance Breakdown for Chemil null (EMP000040):
[2025-10-28T18:46:51.556Z] [LOG]          1. 2025-10-03 (Weekday): 7.00h
[2025-10-28T18:46:51.556Z] [LOG]          2. 2025-10-04 (Saturday): 4.50h
[2025-10-28T18:46:51.556Z] [LOG]          3. 2025-10-07 (Weekday): 8.50h
[2025-10-28T18:46:51.557Z] [LOG]          4. 2025-10-08 (Weekday): 8.50h
[2025-10-28T18:46:51.557Z] [LOG]          5. 2025-10-09 (Weekday): 8.50h
[2025-10-28T18:46:51.557Z] [LOG]          6. 2025-10-10 (Weekday): 8.50h
[2025-10-28T18:46:51.558Z] [LOG]          7. 2025-10-11 (Saturday): 4.50h
[2025-10-28T18:46:51.558Z] [LOG]          8. 2025-10-13 (Weekday): 8.50h
[2025-10-28T18:46:51.558Z] [LOG]          9. 2025-10-17 (Weekday): 8.50h
[2025-10-28T18:46:51.558Z] [LOG]          10. 2025-10-20 (Weekday): 8.50h
[2025-10-28T18:46:51.559Z] [LOG]          11. 2025-10-21 (Weekday): 8.50h
[2025-10-28T18:46:51.559Z] [LOG]          12. 2025-10-22 (Weekday): 8.50h
[2025-10-28T18:46:51.559Z] [LOG]          13. 2025-10-23 (Weekday): 8.50h
[2025-10-28T18:46:51.560Z] [LOG]          14. 2025-10-24 (Weekday): 8.50h
[2025-10-28T18:46:51.560Z] [LOG]          15. 2025-10-25 (Saturday): 4.25h
[2025-10-28T18:46:51.947Z] [LOG] 
      📊 Aggregated Totals for Chemil null (EMP000040):
[2025-10-28T18:46:51.948Z] [LOG]          Weekday: 100.50h
[2025-10-28T18:46:51.948Z] [LOG]          Saturday: 13.25h
[2025-10-28T18:46:51.948Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:46:51.949Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:46:51.949Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Chemil null (EMP000040) - completed sessions only:
[2025-10-28T18:46:51.949Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:46:51.949Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:46:51.950Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:46:51.950Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:46:51.950Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Chemil null (EMP000040) - completed sessions only:
[2025-10-28T18:46:51.950Z] [LOG]       Weekday: 100.50h
[2025-10-28T18:46:51.950Z] [LOG]       Saturday: 13.25h
[2025-10-28T18:46:51.950Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:46:51.950Z] [LOG]       Total Actual: 113.75h
[2025-10-28T18:46:51.951Z] [LOG] 
   💵 EXPECTED Earned Salary for Chemil null (EMP000040) - until NOW:
[2025-10-28T18:46:51.951Z] [LOG]       Weekday: 170.00h × Rs.1131.22 = Rs.192307.40
[2025-10-28T18:46:51.951Z] [LOG]       Saturday: 18.00h × Rs.2136.75 = Rs.38461.50
[2025-10-28T18:46:51.951Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:46:51.951Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:51.952Z] [LOG]       Total Expected Earned: Rs.230768.90
[2025-10-28T18:46:51.952Z] [LOG] 
   💵 ACTUAL Earned Salary for Chemil null (EMP000040) - including live session:
[2025-10-28T18:46:51.952Z] [LOG]       Weekday: 100.50h × Rs.1131.22 = Rs.113687.61
[2025-10-28T18:46:51.952Z] [LOG]       Saturday: 13.25h × Rs.2136.75 = Rs.28311.94
[2025-10-28T18:46:51.952Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:46:51.952Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:51.953Z] [LOG]       Total Actual Earned: Rs.141999.55
[2025-10-28T18:46:51.953Z] [LOG] 
   📊 FINAL CALCULATION for Chemil null (EMP000040):
[2025-10-28T18:46:51.953Z] [LOG]       Calculated At: Oct 29, 2025, 24:16:51
[2025-10-28T18:46:51.953Z] [LOG]       Expected Earned: Rs.230768.90
[2025-10-28T18:46:51.953Z] [LOG]       Actual Earned: Rs.141999.55
[2025-10-28T18:46:51.954Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:51.954Z] [LOG]       Attendance Deduction: Rs.88769.35
[2025-10-28T18:46:51.954Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:46:51.954Z] [LOG]       📉 Shortfall for Chemil null: 74.25 hours (38.47% of expected)
[2025-10-28T18:46:51.954Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:46:51.955Z] [LOG]    Base Salary (Full): Rs.250000.00
[2025-10-28T18:46:51.955Z] [LOG]    Actual Earned Base: Rs.141999.55
[2025-10-28T18:46:51.955Z] [LOG]    Attendance Shortfall: Rs.88769.35
[2025-10-28T18:46:51.955Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:46:51.955Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:46:51.955Z] [LOG]    Gross Salary: 141999.5475
[2025-10-28T18:46:51.956Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:46:51.956Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:46:51.956Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:51.956Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:46:51.956Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:51.956Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:46:51.957Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:51.957Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:46:51.957Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:51.957Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:46:51.958Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:51.958Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:46:51.958Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:51.958Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:46:51.959Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:51.959Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:46:51.959Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:51.959Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:46:51.959Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:51.959Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:46:51.960Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:51.960Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:46:51.960Z] [LOG]    EPF/ETF calculated on: Rs.141999.55
[2025-10-28T18:46:51.960Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:46:51.961Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:46:51.961Z] [LOG] 💰 GROSS CALCULATION for Chemil null:
[2025-10-28T18:46:51.961Z] [LOG]    Base Salary: 250000
[2025-10-28T18:46:51.961Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:46:51.961Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:46:51.962Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:51.962Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:46:51.962Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:51.962Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:46:51.963Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:52.269Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:46:52.270Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:52.270Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:46:52.270Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:46:52.271Z] [LOG]    Actual Earned Base: Rs.141999.55
[2025-10-28T18:46:52.271Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:46:52.271Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:46:52.271Z] [LOG]    = Gross Salary: Rs.141999.55
[2025-10-28T18:46:52.272Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:46:52.272Z] [LOG]    Attendance Shortfall (Info): Rs.88769.35
[2025-10-28T18:46:52.272Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:46:52.273Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:46:52.273Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:46:52.273Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:46:52.273Z] [LOG]    Gross Salary: Rs.141999.55
[2025-10-28T18:46:52.274Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:46:52.274Z] [LOG]    = NET SALARY: Rs.141999.55
[2025-10-28T18:46:52.274Z] [LOG] 
💾 Database Update:
[2025-10-28T18:46:52.274Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:46:52.275Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:46:52.507Z] [LOG] 
📝 Components to save:
[2025-10-28T18:46:52.508Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:46:52.508Z] [LOG]    Deduction components: 1
[2025-10-28T18:46:52.508Z] [LOG] Creating components for record a6d691d1-1a35-4748-9227-fd7437674fde: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:46:52.509Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 141999.5475
}
[2025-10-28T18:46:52.746Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:46:52.986Z] [LOG] Created payroll_record_component: c32f56b8-0e87-4a01-9c81-0819bd5d2587 for Base Salary
[2025-10-28T18:46:52.987Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 88769.35250000001
}
[2025-10-28T18:46:53.233Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:46:53.473Z] [LOG] Created payroll_record_component: 00edc331-66fb-44b9-a692-1a9c770c625c for Attendance Shortfall (Info)
[2025-10-28T18:46:53.952Z] [LOG] ✅ Financial balances updated successfully for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:53.952Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:46:53.952Z] [LOG] 
======================================================================
[2025-10-28T18:46:53.953Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chemil null
[2025-10-28T18:46:53.953Z] [LOG] ======================================================================
[2025-10-28T18:46:53.953Z] [LOG]    Base Salary (Full): Rs.250000.00
[2025-10-28T18:46:53.954Z] [LOG]    Actual Earned Base (Attendance-based): Rs.141999.55
[2025-10-28T18:46:53.954Z] [LOG]    Attendance Shortfall: Rs.88769.35
[2025-10-28T18:46:53.954Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:53.955Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:53.955Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:46:53.955Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:53.955Z] [LOG]    GROSS SALARY: Rs.141999.55
[2025-10-28T18:46:53.955Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:53.956Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:46:53.956Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:46:53.956Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:46:53.956Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:46:53.957Z] [LOG]       - Attendance Shortfall (Info): Rs.88769.35
[2025-10-28T18:46:53.957Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:46:53.957Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:46:53.957Z] [LOG]    NET SALARY: Rs.141999.55
[2025-10-28T18:46:53.958Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:46:53.958Z] [LOG] ======================================================================

[2025-10-28T18:46:53.958Z] [LOG] ✅ Chemil null: Calculation completed successfully
[2025-10-28T18:46:53.958Z] [LOG] 📊 Progress: 20/34 (58.8%)
[2025-10-28T18:46:53.959Z] [LOG] 
🧮 Processing: Dharshika null (EMP000009)
[2025-10-28T18:46:53.959Z] [LOG] 📋 Record ID: ae8cbcd4-4b31-4bb1-9bdc-058300abd91b
[2025-10-28T18:46:53.959Z] [LOG] 
======================================================================
[2025-10-28T18:46:53.959Z] [LOG] 🧮 CALCULATING PAYROLL: Dharshika null (EMP000009)
[2025-10-28T18:46:53.960Z] [LOG] ======================================================================
[2025-10-28T18:46:54.904Z] [LOG] 🔍 Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-28T18:46:54.904Z] [LOG]    Total components: 13
[2025-10-28T18:46:54.904Z] [LOG]    Applicable components: 13
[2025-10-28T18:46:54.905Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T18:46:56.107Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:46:56.107Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:46:56.346Z] [LOG] 📊 Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:56.587Z] [LOG] 📊 Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:56.827Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-28T18:46:56.828Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:46:56.828Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:46:57.307Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:46:57.307Z] [LOG]    👤 Employee: Dharshika null (EMP000009)
[2025-10-28T18:46:57.307Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:46:57.308Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:46:57.308Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-28T18:46:57.308Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:46:57.555Z] [LOG] 
   💵 Pre-calculated Rates for Dharshika null (EMP000009):
[2025-10-28T18:46:57.555Z] [LOG]       Daily Salary: Rs.3846.15
[2025-10-28T18:46:57.555Z] [LOG]       Weekday Hourly Rate: Rs.452.49
[2025-10-28T18:46:57.556Z] [LOG]       Saturday Hourly Rate: Rs.854.70
[2025-10-28T18:46:57.556Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:46:57.556Z] [LOG] 
   📊 Full Period Working Days for Dharshika null (EMP000009):
[2025-10-28T18:46:57.556Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:46:58.267Z] [LOG] 
   📊 Working Days for Expected Calculation for Dharshika null (EMP000009):
[2025-10-28T18:46:58.267Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:46:58.267Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:46:58.507Z] [LOG] 
   ⏰ Calculating Completed Hours for Dharshika null (EMP000009) - All completed sessions:
[2025-10-28T18:46:58.507Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:46:58.507Z] [LOG]       Total completed sessions found: 16
[2025-10-28T18:46:58.507Z] [LOG] 
      📋 Attendance Breakdown for Dharshika null (EMP000009):
[2025-10-28T18:46:58.507Z] [LOG]          1. 2025-10-01 (Weekday): 6.00h
[2025-10-28T18:46:58.507Z] [LOG]          2. 2025-10-02 (Weekday): 6.15h
[2025-10-28T18:46:58.507Z] [LOG]          3. 2025-10-03 (Weekday): 7.03h
[2025-10-28T18:46:58.507Z] [LOG]          4. 2025-10-07 (Weekday): 6.87h
[2025-10-28T18:46:58.507Z] [LOG]          5. 2025-10-08 (Weekday): 6.02h
[2025-10-28T18:46:58.508Z] [LOG]          6. 2025-10-09 (Weekday): 7.00h
[2025-10-28T18:46:58.508Z] [LOG]          7. 2025-10-10 (Weekday): 7.03h
[2025-10-28T18:46:58.508Z] [LOG]          8. 2025-10-11 (Saturday): 3.47h
[2025-10-28T18:46:58.508Z] [LOG]          9. 2025-10-13 (Weekday): 6.11h
[2025-10-28T18:46:58.508Z] [LOG]          10. 2025-10-14 (Weekday): 7.56h
[2025-10-28T18:46:58.508Z] [LOG]          11. 2025-10-15 (Weekday): 7.25h
[2025-10-28T18:46:58.508Z] [LOG]          12. 2025-10-16 (Weekday): 7.75h
[2025-10-28T18:46:58.508Z] [LOG]          13. 2025-10-17 (Weekday): 6.50h
[2025-10-28T18:46:58.508Z] [LOG]          14. 2025-10-21 (Weekday): 6.33h
[2025-10-28T18:46:58.508Z] [LOG]          15. 2025-10-22 (Weekday): 7.00h
[2025-10-28T18:46:58.508Z] [LOG]          16. 2025-10-23 (Weekday): 0.00h
[2025-10-28T18:46:58.746Z] [LOG] 
      📊 Aggregated Totals for Dharshika null (EMP000009):
[2025-10-28T18:46:58.746Z] [LOG]          Weekday: 94.60h
[2025-10-28T18:46:58.747Z] [LOG]          Saturday: 3.47h
[2025-10-28T18:46:58.747Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:46:58.747Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:46:58.747Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Dharshika null (EMP000009) - completed sessions only:
[2025-10-28T18:46:58.747Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:46:58.747Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:46:58.747Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:46:58.747Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:46:58.747Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Dharshika null (EMP000009) - completed sessions only:
[2025-10-28T18:46:58.748Z] [LOG]       Weekday: 94.60h
[2025-10-28T18:46:58.748Z] [LOG]       Saturday: 3.47h
[2025-10-28T18:46:58.748Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:46:58.748Z] [LOG]       Total Actual: 98.07h
[2025-10-28T18:46:58.748Z] [LOG] 
   💵 EXPECTED Earned Salary for Dharshika null (EMP000009) - until NOW:
[2025-10-28T18:46:58.748Z] [LOG]       Weekday: 170.00h × Rs.452.49 = Rs.76923.30
[2025-10-28T18:46:58.748Z] [LOG]       Saturday: 18.00h × Rs.854.70 = Rs.15384.60
[2025-10-28T18:46:58.748Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:46:58.749Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:58.749Z] [LOG]       Total Expected Earned: Rs.92307.90
[2025-10-28T18:46:58.749Z] [LOG] 
   💵 ACTUAL Earned Salary for Dharshika null (EMP000009) - including live session:
[2025-10-28T18:46:58.749Z] [LOG]       Weekday: 94.60h × Rs.452.49 = Rs.42805.55
[2025-10-28T18:46:58.749Z] [LOG]       Saturday: 3.47h × Rs.854.70 = Rs.2965.81
[2025-10-28T18:46:58.749Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:46:58.749Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:58.749Z] [LOG]       Total Actual Earned: Rs.45771.36
[2025-10-28T18:46:58.750Z] [LOG] 
   📊 FINAL CALCULATION for Dharshika null (EMP000009):
[2025-10-28T18:46:58.750Z] [LOG]       Calculated At: Oct 29, 2025, 24:16:58
[2025-10-28T18:46:58.750Z] [LOG]       Expected Earned: Rs.92307.90
[2025-10-28T18:46:58.750Z] [LOG]       Actual Earned: Rs.45771.36
[2025-10-28T18:46:58.750Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:46:58.750Z] [LOG]       Attendance Deduction: Rs.46536.54
[2025-10-28T18:46:58.751Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:46:58.751Z] [LOG]       📉 Shortfall for Dharshika null: 89.93 hours (50.41% of expected)
[2025-10-28T18:46:58.751Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:46:58.751Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-28T18:46:58.751Z] [LOG]    Actual Earned Base: Rs.45771.36
[2025-10-28T18:46:58.751Z] [LOG]    Attendance Shortfall: Rs.46536.54
[2025-10-28T18:46:58.751Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:46:58.751Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:46:58.751Z] [LOG]    Gross Salary: 45771.363
[2025-10-28T18:46:58.752Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:46:58.752Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:46:58.752Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:58.752Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:46:58.752Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:58.752Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:46:58.752Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:58.752Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:46:58.752Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:58.752Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:46:58.753Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:58.753Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:46:58.753Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:58.753Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:46:58.753Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:58.753Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:46:58.753Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:58.753Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:46:58.753Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:58.754Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:46:58.754Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:58.754Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:46:58.754Z] [LOG]    EPF/ETF calculated on: Rs.45771.36
[2025-10-28T18:46:58.754Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:46:58.754Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:46:58.754Z] [LOG] 💰 GROSS CALCULATION for Dharshika null:
[2025-10-28T18:46:58.754Z] [LOG]    Base Salary: 100000
[2025-10-28T18:46:58.754Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:46:58.755Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:46:58.755Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:58.755Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:46:58.755Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:58.755Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:46:58.755Z] [LOG]    Fixed amount: 0
[2025-10-28T18:46:58.964Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:46:58.964Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:46:58.964Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:46:58.965Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:46:58.965Z] [LOG]    Actual Earned Base: Rs.45771.36
[2025-10-28T18:46:58.965Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:46:58.965Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:46:58.965Z] [LOG]    = Gross Salary: Rs.45771.36
[2025-10-28T18:46:58.965Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:46:58.966Z] [LOG]    Attendance Shortfall (Info): Rs.46536.54
[2025-10-28T18:46:58.966Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:46:58.966Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:46:58.966Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:46:58.967Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:46:58.967Z] [LOG]    Gross Salary: Rs.45771.36
[2025-10-28T18:46:58.967Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:46:58.968Z] [LOG]    = NET SALARY: Rs.45771.36
[2025-10-28T18:46:58.968Z] [LOG] 
💾 Database Update:
[2025-10-28T18:46:58.968Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:46:58.968Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:46:59.174Z] [LOG] 
📝 Components to save:
[2025-10-28T18:46:59.174Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:46:59.175Z] [LOG]    Deduction components: 1
[2025-10-28T18:46:59.175Z] [LOG] Creating components for record ae8cbcd4-4b31-4bb1-9bdc-058300abd91b: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:46:59.175Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 45771.363
}
[2025-10-28T18:46:59.382Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:46:59.595Z] [LOG] Created payroll_record_component: 1904ff23-bee1-49e5-a1f5-ced5a44964ac for Base Salary
[2025-10-28T18:46:59.596Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 46536.53700000001
}
[2025-10-28T18:46:59.801Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:47:00.022Z] [LOG] Created payroll_record_component: df8ffcca-39be-43d9-8ab5-ecf053aa4134 for Attendance Shortfall (Info)
[2025-10-28T18:47:00.483Z] [LOG] ✅ Financial balances updated successfully for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:00.483Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:47:00.484Z] [LOG] 
======================================================================
[2025-10-28T18:47:00.484Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Dharshika null
[2025-10-28T18:47:00.484Z] [LOG] ======================================================================
[2025-10-28T18:47:00.485Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-28T18:47:00.485Z] [LOG]    Actual Earned Base (Attendance-based): Rs.45771.36
[2025-10-28T18:47:00.485Z] [LOG]    Attendance Shortfall: Rs.46536.54
[2025-10-28T18:47:00.486Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:00.486Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:00.486Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:47:00.486Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:00.487Z] [LOG]    GROSS SALARY: Rs.45771.36
[2025-10-28T18:47:00.487Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:00.487Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:47:00.488Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:47:00.488Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:47:00.488Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:47:00.489Z] [LOG]       - Attendance Shortfall (Info): Rs.46536.54
[2025-10-28T18:47:00.489Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:00.489Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:00.490Z] [LOG]    NET SALARY: Rs.45771.36
[2025-10-28T18:47:00.490Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:47:00.490Z] [LOG] ======================================================================

[2025-10-28T18:47:00.490Z] [LOG] ✅ Dharshika null: Calculation completed successfully
[2025-10-28T18:47:00.491Z] [LOG] 📊 Progress: 21/34 (61.8%)
[2025-10-28T18:47:00.491Z] [LOG] 
🧮 Processing: Sithira null (EMP000039)
[2025-10-28T18:47:00.491Z] [LOG] 📋 Record ID: bfd3abf5-5833-4476-aad4-d41a60246336
[2025-10-28T18:47:00.492Z] [LOG] 
======================================================================
[2025-10-28T18:47:00.492Z] [LOG] 🧮 CALCULATING PAYROLL: Sithira null (EMP000039)
[2025-10-28T18:47:00.492Z] [LOG] ======================================================================
[2025-10-28T18:47:01.480Z] [LOG] 🔍 Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-28T18:47:01.480Z] [LOG]    Total components: 13
[2025-10-28T18:47:01.481Z] [LOG]    Applicable components: 13
[2025-10-28T18:47:01.481Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-28T18:47:02.357Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:47:02.357Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:47:02.595Z] [LOG] 📊 Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:02.835Z] [LOG] 📊 Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:03.075Z] [LOG] 📊 Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:03.075Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:47:03.076Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:47:03.562Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:47:03.562Z] [LOG]    👤 Employee: Sithira null (EMP000039)
[2025-10-28T18:47:03.562Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:47:03.563Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:47:03.563Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-28T18:47:03.563Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:47:03.961Z] [LOG] 
   💵 Pre-calculated Rates for Sithira null (EMP000039):
[2025-10-28T18:47:03.962Z] [LOG]       Daily Salary: Rs.1538.46
[2025-10-28T18:47:03.962Z] [LOG]       Weekday Hourly Rate: Rs.181.00
[2025-10-28T18:47:03.962Z] [LOG]       Saturday Hourly Rate: Rs.341.88
[2025-10-28T18:47:03.963Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:47:03.963Z] [LOG] 
   📊 Full Period Working Days for Sithira null (EMP000039):
[2025-10-28T18:47:03.963Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:47:04.674Z] [LOG] 
   📊 Working Days for Expected Calculation for Sithira null (EMP000039):
[2025-10-28T18:47:04.675Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:47:04.675Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:47:04.911Z] [LOG] 
   ⏰ Calculating Completed Hours for Sithira null (EMP000039) - All completed sessions:
[2025-10-28T18:47:04.912Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:47:04.912Z] [LOG]       Total completed sessions found: 14
[2025-10-28T18:47:04.912Z] [LOG] 
      📋 Attendance Breakdown for Sithira null (EMP000039):
[2025-10-28T18:47:04.913Z] [LOG]          1. 2025-10-02 (Weekday): 8.47h
[2025-10-28T18:47:04.913Z] [LOG]          2. 2025-10-03 (Weekday): 8.35h
[2025-10-28T18:47:04.913Z] [LOG]          3. 2025-10-04 (Saturday): 4.18h
[2025-10-28T18:47:04.913Z] [LOG]          4. 2025-10-08 (Weekday): 8.31h
[2025-10-28T18:47:04.914Z] [LOG]          5. 2025-10-09 (Weekday): 8.40h
[2025-10-28T18:47:04.914Z] [LOG]          6. 2025-10-10 (Weekday): 8.29h
[2025-10-28T18:47:04.914Z] [LOG]          7. 2025-10-11 (Saturday): 4.31h
[2025-10-28T18:47:04.915Z] [LOG]          8. 2025-10-13 (Weekday): 8.40h
[2025-10-28T18:47:04.915Z] [LOG]          9. 2025-10-14 (Weekday): 7.96h
[2025-10-28T18:47:04.915Z] [LOG]          10. 2025-10-20 (Weekday): 7.54h
[2025-10-28T18:47:04.916Z] [LOG]          11. 2025-10-21 (Weekday): 8.00h
[2025-10-28T18:47:04.916Z] [LOG]          12. 2025-10-22 (Weekday): 7.12h
[2025-10-28T18:47:04.916Z] [LOG]          13. 2025-10-23 (Weekday): 8.00h
[2025-10-28T18:47:04.916Z] [LOG]          14. 2025-10-24 (Weekday): 7.89h
[2025-10-28T18:47:05.153Z] [LOG] 
      📊 Aggregated Totals for Sithira null (EMP000039):
[2025-10-28T18:47:05.153Z] [LOG]          Weekday: 96.73h
[2025-10-28T18:47:05.153Z] [LOG]          Saturday: 8.49h
[2025-10-28T18:47:05.154Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:47:05.154Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:47:05.154Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Sithira null (EMP000039) - completed sessions only:
[2025-10-28T18:47:05.154Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:47:05.155Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:47:05.155Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:47:05.155Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:47:05.156Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Sithira null (EMP000039) - completed sessions only:
[2025-10-28T18:47:05.156Z] [LOG]       Weekday: 96.73h
[2025-10-28T18:47:05.156Z] [LOG]       Saturday: 8.49h
[2025-10-28T18:47:05.156Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:47:05.157Z] [LOG]       Total Actual: 105.22h
[2025-10-28T18:47:05.157Z] [LOG] 
   💵 EXPECTED Earned Salary for Sithira null (EMP000039) - until NOW:
[2025-10-28T18:47:05.157Z] [LOG]       Weekday: 170.00h × Rs.181.00 = Rs.30770.00
[2025-10-28T18:47:05.158Z] [LOG]       Saturday: 18.00h × Rs.341.88 = Rs.6153.84
[2025-10-28T18:47:05.158Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:05.158Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:05.158Z] [LOG]       Total Expected Earned: Rs.36923.84
[2025-10-28T18:47:05.159Z] [LOG] 
   💵 ACTUAL Earned Salary for Sithira null (EMP000039) - including live session:
[2025-10-28T18:47:05.159Z] [LOG]       Weekday: 96.73h × Rs.181.00 = Rs.17508.13
[2025-10-28T18:47:05.159Z] [LOG]       Saturday: 8.49h × Rs.341.88 = Rs.2902.56
[2025-10-28T18:47:05.160Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:05.160Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:05.160Z] [LOG]       Total Actual Earned: Rs.20410.69
[2025-10-28T18:47:05.161Z] [LOG] 
   📊 FINAL CALCULATION for Sithira null (EMP000039):
[2025-10-28T18:47:05.161Z] [LOG]       Calculated At: Oct 29, 2025, 24:17:05
[2025-10-28T18:47:05.162Z] [LOG]       Expected Earned: Rs.36923.84
[2025-10-28T18:47:05.162Z] [LOG]       Actual Earned: Rs.20410.69
[2025-10-28T18:47:05.162Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:05.163Z] [LOG]       Attendance Deduction: Rs.16513.15
[2025-10-28T18:47:05.163Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:47:05.163Z] [LOG]       📉 Shortfall for Sithira null: 82.78 hours (44.72% of expected)
[2025-10-28T18:47:05.164Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:47:05.164Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-28T18:47:05.164Z] [LOG]    Actual Earned Base: Rs.20410.69
[2025-10-28T18:47:05.165Z] [LOG]    Attendance Shortfall: Rs.16513.15
[2025-10-28T18:47:05.165Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:47:05.165Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:47:05.166Z] [LOG]    Gross Salary: 20410.6912
[2025-10-28T18:47:05.166Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:47:05.166Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:47:05.167Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:05.167Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:47:05.168Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:05.168Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:47:05.168Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:05.169Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:47:05.169Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:05.169Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:47:05.169Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:05.170Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:47:05.170Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:05.170Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:47:05.170Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:05.171Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:47:05.171Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:05.171Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:47:05.171Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:05.172Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:47:05.172Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:05.172Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:47:05.173Z] [LOG]    EPF/ETF calculated on: Rs.20410.69
[2025-10-28T18:47:05.173Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:47:05.173Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:47:05.173Z] [LOG] 💰 GROSS CALCULATION for Sithira null:
[2025-10-28T18:47:05.174Z] [LOG]    Base Salary: 40000
[2025-10-28T18:47:05.174Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:47:05.174Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:47:05.174Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:05.174Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:47:05.175Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:05.175Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:47:05.175Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:05.395Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:47:05.395Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:05.395Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:47:05.396Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:47:05.396Z] [LOG]    Actual Earned Base: Rs.20410.69
[2025-10-28T18:47:05.396Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:47:05.397Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:47:05.397Z] [LOG]    = Gross Salary: Rs.20410.69
[2025-10-28T18:47:05.397Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:47:05.397Z] [LOG]    Attendance Shortfall (Info): Rs.16513.15
[2025-10-28T18:47:05.398Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:47:05.398Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:05.398Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:47:05.399Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:47:05.399Z] [LOG]    Gross Salary: Rs.20410.69
[2025-10-28T18:47:05.399Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:47:05.400Z] [LOG]    = NET SALARY: Rs.20410.69
[2025-10-28T18:47:05.400Z] [LOG] 
💾 Database Update:
[2025-10-28T18:47:05.400Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:47:05.400Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:47:05.626Z] [LOG] 
📝 Components to save:
[2025-10-28T18:47:05.627Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:47:05.627Z] [LOG]    Deduction components: 1
[2025-10-28T18:47:05.627Z] [LOG] Creating components for record bfd3abf5-5833-4476-aad4-d41a60246336: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:47:05.628Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 20410.6912
}
[2025-10-28T18:47:05.874Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:47:06.107Z] [LOG] Created payroll_record_component: 6bb27694-18b9-4474-b4b3-eb5385a97c24 for Base Salary
[2025-10-28T18:47:06.107Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 16513.148799999995
}
[2025-10-28T18:47:06.327Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:47:06.586Z] [LOG] Created payroll_record_component: e1e82093-5be6-4d99-8b68-64a743aa8280 for Attendance Shortfall (Info)
[2025-10-28T18:47:07.058Z] [LOG] ✅ Financial balances updated successfully for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:07.058Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:47:07.058Z] [LOG] 
======================================================================
[2025-10-28T18:47:07.059Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sithira null
[2025-10-28T18:47:07.059Z] [LOG] ======================================================================
[2025-10-28T18:47:07.059Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-28T18:47:07.059Z] [LOG]    Actual Earned Base (Attendance-based): Rs.20410.69
[2025-10-28T18:47:07.059Z] [LOG]    Attendance Shortfall: Rs.16513.15
[2025-10-28T18:47:07.060Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:07.060Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:07.060Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:47:07.061Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:07.061Z] [LOG]    GROSS SALARY: Rs.20410.69
[2025-10-28T18:47:07.061Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:07.061Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:47:07.062Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:47:07.062Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:47:07.062Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:47:07.063Z] [LOG]       - Attendance Shortfall (Info): Rs.16513.15
[2025-10-28T18:47:07.063Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:07.063Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:07.063Z] [LOG]    NET SALARY: Rs.20410.69
[2025-10-28T18:47:07.064Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:47:07.064Z] [LOG] ======================================================================

[2025-10-28T18:47:07.064Z] [LOG] ✅ Sithira null: Calculation completed successfully
[2025-10-28T18:47:07.065Z] [LOG] 📊 Progress: 22/34 (64.7%)
[2025-10-28T18:47:07.065Z] [LOG] 
🧮 Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-28T18:47:07.065Z] [LOG] 📋 Record ID: c7ca3468-f9d4-406b-823e-7d413863cbf5
[2025-10-28T18:47:07.066Z] [LOG] 
======================================================================
[2025-10-28T18:47:07.066Z] [LOG] 🧮 CALCULATING PAYROLL: Sujevan Selvaratnam null (EMP000026)
[2025-10-28T18:47:07.066Z] [LOG] ======================================================================
[2025-10-28T18:47:08.027Z] [LOG] 🔍 Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-28T18:47:08.027Z] [LOG]    Total components: 13
[2025-10-28T18:47:08.028Z] [LOG]    Applicable components: 13
[2025-10-28T18:47:08.028Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-28T18:47:09.054Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:47:09.054Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:47:09.323Z] [LOG] 📊 Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:09.545Z] [LOG] 📊 Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:09.874Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:09.875Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:47:09.875Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:47:10.355Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:47:10.355Z] [LOG]    👤 Employee: Sujevan Selvaratnam null (EMP000026)
[2025-10-28T18:47:10.355Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:47:10.356Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:47:10.356Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-28T18:47:10.356Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:47:10.593Z] [LOG] 
   💵 Pre-calculated Rates for Sujevan Selvaratnam null (EMP000026):
[2025-10-28T18:47:10.593Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-28T18:47:10.593Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-28T18:47:10.594Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-28T18:47:10.594Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:47:10.594Z] [LOG] 
   📊 Full Period Working Days for Sujevan Selvaratnam null (EMP000026):
[2025-10-28T18:47:10.594Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:47:11.316Z] [LOG] 
   📊 Working Days for Expected Calculation for Sujevan Selvaratnam null (EMP000026):
[2025-10-28T18:47:11.316Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:47:11.317Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:47:11.554Z] [LOG] 
   ⏰ Calculating Completed Hours for Sujevan Selvaratnam null (EMP000026) - All completed sessions:
[2025-10-28T18:47:11.554Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:47:11.554Z] [LOG]       Total completed sessions found: 0
[2025-10-28T18:47:11.788Z] [LOG] 
      📊 Aggregated Totals for Sujevan Selvaratnam null (EMP000026):
[2025-10-28T18:47:11.789Z] [LOG]          Weekday: 0.00h
[2025-10-28T18:47:11.789Z] [LOG]          Saturday: 0.00h
[2025-10-28T18:47:11.789Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:47:11.790Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:47:11.790Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Sujevan Selvaratnam null (EMP000026) - completed sessions only:
[2025-10-28T18:47:11.790Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:47:11.791Z] [LOG]       Saturday: 34.00h
[2025-10-28T18:47:11.791Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:47:11.791Z] [LOG]       Total Expected: 204.00h
[2025-10-28T18:47:11.792Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Sujevan Selvaratnam null (EMP000026) - completed sessions only:
[2025-10-28T18:47:11.792Z] [LOG]       Weekday: 0.00h
[2025-10-28T18:47:11.792Z] [LOG]       Saturday: 0.00h
[2025-10-28T18:47:11.792Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:47:11.793Z] [LOG]       Total Actual: 0.00h
[2025-10-28T18:47:11.793Z] [LOG] 
   💵 EXPECTED Earned Salary for Sujevan Selvaratnam null (EMP000026) - until NOW:
[2025-10-28T18:47:11.793Z] [LOG]       Weekday: 170.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:11.794Z] [LOG]       Saturday: 34.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:11.794Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:11.794Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:11.794Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-28T18:47:11.795Z] [LOG] 
   💵 ACTUAL Earned Salary for Sujevan Selvaratnam null (EMP000026) - including live session:
[2025-10-28T18:47:11.795Z] [LOG]       Weekday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:11.795Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:11.796Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:11.796Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:11.796Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-28T18:47:11.797Z] [LOG] 
   📊 FINAL CALCULATION for Sujevan Selvaratnam null (EMP000026):
[2025-10-28T18:47:11.797Z] [LOG]       Calculated At: Oct 29, 2025, 24:17:11
[2025-10-28T18:47:11.798Z] [LOG]       Expected Earned: Rs.0.00
[2025-10-28T18:47:11.798Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-28T18:47:11.798Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:11.798Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-28T18:47:11.799Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:47:11.799Z] [LOG]       ✅ No deduction - Sujevan Selvaratnam null worked all expected hours!
[2025-10-28T18:47:11.799Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:47:11.800Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-28T18:47:11.800Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T18:47:11.800Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T18:47:11.801Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:47:11.801Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:47:11.801Z] [LOG]    Gross Salary: 0
[2025-10-28T18:47:11.801Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:47:11.802Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:47:11.802Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:11.802Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:47:11.803Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:11.803Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:47:11.803Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:11.803Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:47:11.804Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:11.804Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:47:11.804Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:11.805Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:47:11.805Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:11.805Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:47:11.805Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:11.805Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:47:11.806Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:11.806Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:47:11.806Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:11.807Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:47:11.807Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:11.807Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:47:11.808Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-28T18:47:11.808Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:47:11.808Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:47:11.808Z] [LOG] 💰 GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-28T18:47:11.809Z] [LOG]    Base Salary: 1
[2025-10-28T18:47:11.809Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:47:11.809Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:47:11.809Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:11.810Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:47:11.810Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:11.810Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:47:11.810Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:12.461Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:47:12.462Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:12.462Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:47:12.462Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:47:12.463Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-28T18:47:12.463Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:47:12.463Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:47:12.464Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-28T18:47:12.464Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:47:12.464Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:47:12.465Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:12.465Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:47:12.465Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:47:12.466Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-28T18:47:12.466Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:47:12.466Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-28T18:47:12.466Z] [LOG] 
💾 Database Update:
[2025-10-28T18:47:12.466Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:47:12.467Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:47:12.667Z] [LOG] 
📝 Components to save:
[2025-10-28T18:47:12.667Z] [LOG]    Gross/Earnings components: 0
[2025-10-28T18:47:12.667Z] [LOG]    Deduction components: 0
[2025-10-28T18:47:12.667Z] [LOG] Creating components for record c7ca3468-f9d4-406b-823e-7d413863cbf5: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-28T18:47:13.367Z] [LOG] ✅ Financial balances updated successfully for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:13.368Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:47:13.368Z] [LOG] 
======================================================================
[2025-10-28T18:47:13.368Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sujevan Selvaratnam null
[2025-10-28T18:47:13.369Z] [LOG] ======================================================================
[2025-10-28T18:47:13.369Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-28T18:47:13.369Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-28T18:47:13.369Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T18:47:13.370Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:13.370Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:13.370Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:47:13.370Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:13.371Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-28T18:47:13.371Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:13.371Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:47:13.371Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:47:13.372Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:47:13.372Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:47:13.372Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-28T18:47:13.372Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:13.373Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:13.373Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-28T18:47:13.373Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:47:13.374Z] [LOG] ======================================================================

[2025-10-28T18:47:13.374Z] [LOG] ✅ Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-28T18:47:13.374Z] [LOG] 📊 Progress: 23/34 (67.6%)
[2025-10-28T18:47:13.374Z] [LOG] 
🧮 Processing: Franklin null (EMP000018)
[2025-10-28T18:47:13.375Z] [LOG] 📋 Record ID: ce64e9b8-cdec-48d2-ab05-3783223da510
[2025-10-28T18:47:13.375Z] [LOG] 
======================================================================
[2025-10-28T18:47:13.375Z] [LOG] 🧮 CALCULATING PAYROLL: Franklin null (EMP000018)
[2025-10-28T18:47:13.375Z] [LOG] ======================================================================
[2025-10-28T18:47:14.516Z] [LOG] 🔍 Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-28T18:47:14.517Z] [LOG]    Total components: 13
[2025-10-28T18:47:14.517Z] [LOG]    Applicable components: 13
[2025-10-28T18:47:14.517Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-28T18:47:15.463Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:47:15.463Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:47:15.715Z] [LOG] 📊 Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:15.962Z] [LOG] 📊 Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:16.186Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:16.186Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:47:16.187Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:47:16.673Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:47:16.674Z] [LOG]    👤 Employee: Franklin null (EMP000018)
[2025-10-28T18:47:16.674Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:47:16.674Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:47:16.675Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T18:47:16.675Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:47:16.914Z] [LOG] 
   💵 Pre-calculated Rates for Franklin null (EMP000018):
[2025-10-28T18:47:16.915Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-28T18:47:16.915Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-28T18:47:16.915Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-28T18:47:16.915Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:47:16.915Z] [LOG] 
   📊 Full Period Working Days for Franklin null (EMP000018):
[2025-10-28T18:47:16.916Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:47:17.611Z] [LOG] 
   📊 Working Days for Expected Calculation for Franklin null (EMP000018):
[2025-10-28T18:47:17.611Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:47:17.611Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:47:17.839Z] [LOG] 
   ⏰ Calculating Completed Hours for Franklin null (EMP000018) - All completed sessions:
[2025-10-28T18:47:17.839Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:47:17.840Z] [LOG]       Total completed sessions found: 17
[2025-10-28T18:47:17.840Z] [LOG] 
      📋 Attendance Breakdown for Franklin null (EMP000018):
[2025-10-28T18:47:17.840Z] [LOG]          1. 2025-10-01 (Weekday): 7.18h
[2025-10-28T18:47:17.840Z] [LOG]          2. 2025-10-02 (Weekday): 6.03h
[2025-10-28T18:47:17.840Z] [LOG]          3. 2025-10-03 (Weekday): 7.28h
[2025-10-28T18:47:17.841Z] [LOG]          4. 2025-10-07 (Weekday): 6.87h
[2025-10-28T18:47:17.841Z] [LOG]          5. 2025-10-09 (Weekday): 7.99h
[2025-10-28T18:47:17.841Z] [LOG]          6. 2025-10-10 (Weekday): 8.28h
[2025-10-28T18:47:17.841Z] [LOG]          7. 2025-10-11 (Saturday): 2.08h
[2025-10-28T18:47:17.841Z] [LOG]          8. 2025-10-13 (Weekday): 7.22h
[2025-10-28T18:47:17.841Z] [LOG]          9. 2025-10-14 (Weekday): 8.24h
[2025-10-28T18:47:17.842Z] [LOG]          10. 2025-10-16 (Weekday): 7.12h
[2025-10-28T18:47:17.842Z] [LOG]          11. 2025-10-17 (Weekday): 7.62h
[2025-10-28T18:47:17.842Z] [LOG]          12. 2025-10-18 (Saturday): 2.55h
[2025-10-28T18:47:17.842Z] [LOG]          13. 2025-10-20 (Weekday): 6.65h
[2025-10-28T18:47:17.842Z] [LOG]          14. 2025-10-21 (Weekday): 6.79h
[2025-10-28T18:47:17.843Z] [LOG]          15. 2025-10-23 (Weekday): 6.45h
[2025-10-28T18:47:17.843Z] [LOG]          16. 2025-10-24 (Weekday): 8.26h
[2025-10-28T18:47:17.843Z] [LOG]          17. 2025-10-25 (Saturday): 0.00h
[2025-10-28T18:47:18.073Z] [LOG] 
      📊 Aggregated Totals for Franklin null (EMP000018):
[2025-10-28T18:47:18.074Z] [LOG]          Weekday: 101.98h
[2025-10-28T18:47:18.074Z] [LOG]          Saturday: 4.63h
[2025-10-28T18:47:18.074Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:47:18.075Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:47:18.075Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Franklin null (EMP000018) - completed sessions only:
[2025-10-28T18:47:18.075Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:47:18.076Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:47:18.076Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:47:18.076Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:47:18.076Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Franklin null (EMP000018) - completed sessions only:
[2025-10-28T18:47:18.077Z] [LOG]       Weekday: 101.98h
[2025-10-28T18:47:18.077Z] [LOG]       Saturday: 4.63h
[2025-10-28T18:47:18.077Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:47:18.077Z] [LOG]       Total Actual: 106.61h
[2025-10-28T18:47:18.077Z] [LOG] 
   💵 EXPECTED Earned Salary for Franklin null (EMP000018) - until NOW:
[2025-10-28T18:47:18.077Z] [LOG]       Weekday: 170.00h × Rs.226.24 = Rs.38460.80
[2025-10-28T18:47:18.077Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-28T18:47:18.077Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:18.077Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:18.077Z] [LOG]       Total Expected Earned: Rs.46153.10
[2025-10-28T18:47:18.077Z] [LOG] 
   💵 ACTUAL Earned Salary for Franklin null (EMP000018) - including live session:
[2025-10-28T18:47:18.077Z] [LOG]       Weekday: 101.98h × Rs.226.24 = Rs.23071.96
[2025-10-28T18:47:18.077Z] [LOG]       Saturday: 4.63h × Rs.427.35 = Rs.1978.63
[2025-10-28T18:47:18.077Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:18.078Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:18.078Z] [LOG]       Total Actual Earned: Rs.25050.59
[2025-10-28T18:47:18.078Z] [LOG] 
   📊 FINAL CALCULATION for Franklin null (EMP000018):
[2025-10-28T18:47:18.079Z] [LOG]       Calculated At: Oct 29, 2025, 24:17:18
[2025-10-28T18:47:18.079Z] [LOG]       Expected Earned: Rs.46153.10
[2025-10-28T18:47:18.079Z] [LOG]       Actual Earned: Rs.25050.59
[2025-10-28T18:47:18.079Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:18.079Z] [LOG]       Attendance Deduction: Rs.21102.51
[2025-10-28T18:47:18.080Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:47:18.080Z] [LOG]       📉 Shortfall for Franklin null: 81.39 hours (45.72% of expected)
[2025-10-28T18:47:18.080Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:47:18.080Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:47:18.080Z] [LOG]    Actual Earned Base: Rs.25050.59
[2025-10-28T18:47:18.081Z] [LOG]    Attendance Shortfall: Rs.21102.51
[2025-10-28T18:47:18.081Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:47:18.081Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:47:18.081Z] [LOG]    Gross Salary: 25050.5857
[2025-10-28T18:47:18.082Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:47:18.083Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:47:18.083Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:18.083Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:47:18.083Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:18.084Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:47:18.084Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:18.085Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:47:18.085Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:18.086Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:47:18.086Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:18.086Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:47:18.086Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:18.086Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:47:18.087Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:18.089Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:47:18.089Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:18.089Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:47:18.090Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:18.090Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:47:18.090Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:18.090Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:47:18.090Z] [LOG]    EPF/ETF calculated on: Rs.25050.59
[2025-10-28T18:47:18.090Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:47:18.091Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:47:18.091Z] [LOG] 💰 GROSS CALCULATION for Franklin null:
[2025-10-28T18:47:18.091Z] [LOG]    Base Salary: 50000
[2025-10-28T18:47:18.091Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:47:18.091Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:47:18.092Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:18.092Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:47:18.092Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:18.092Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:47:18.093Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:18.346Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:47:18.346Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:18.347Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:47:18.347Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:47:18.347Z] [LOG]    Actual Earned Base: Rs.25050.59
[2025-10-28T18:47:18.347Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:47:18.347Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:47:18.347Z] [LOG]    = Gross Salary: Rs.25050.59
[2025-10-28T18:47:18.347Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:47:18.347Z] [LOG]    Attendance Shortfall (Info): Rs.21102.51
[2025-10-28T18:47:18.348Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:47:18.348Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:18.348Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:47:18.348Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:47:18.348Z] [LOG]    Gross Salary: Rs.25050.59
[2025-10-28T18:47:18.348Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:47:18.349Z] [LOG]    = NET SALARY: Rs.25050.59
[2025-10-28T18:47:18.349Z] [LOG] 
💾 Database Update:
[2025-10-28T18:47:18.349Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:47:18.349Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:47:18.722Z] [LOG] 
📝 Components to save:
[2025-10-28T18:47:18.723Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:47:18.723Z] [LOG]    Deduction components: 1
[2025-10-28T18:47:18.723Z] [LOG] Creating components for record ce64e9b8-cdec-48d2-ab05-3783223da510: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:47:18.724Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 25050.5857
}
[2025-10-28T18:47:18.998Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:47:19.226Z] [LOG] Created payroll_record_component: 1285bb0a-8108-4101-a1f1-98480151b85b for Base Salary
[2025-10-28T18:47:19.227Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 21102.514300000006
}
[2025-10-28T18:47:19.447Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:47:19.669Z] [LOG] Created payroll_record_component: 9e34a791-32ee-4262-b941-70bac00815d8 for Attendance Shortfall (Info)
[2025-10-28T18:47:20.302Z] [LOG] ✅ Financial balances updated successfully for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:20.302Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:47:20.303Z] [LOG] 
======================================================================
[2025-10-28T18:47:20.303Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Franklin null
[2025-10-28T18:47:20.303Z] [LOG] ======================================================================
[2025-10-28T18:47:20.303Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:47:20.303Z] [LOG]    Actual Earned Base (Attendance-based): Rs.25050.59
[2025-10-28T18:47:20.303Z] [LOG]    Attendance Shortfall: Rs.21102.51
[2025-10-28T18:47:20.304Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:20.304Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:20.304Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:47:20.304Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:20.305Z] [LOG]    GROSS SALARY: Rs.25050.59
[2025-10-28T18:47:20.305Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:20.305Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:47:20.305Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:47:20.306Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:47:20.306Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:47:20.306Z] [LOG]       - Attendance Shortfall (Info): Rs.21102.51
[2025-10-28T18:47:20.306Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:20.307Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:20.307Z] [LOG]    NET SALARY: Rs.25050.59
[2025-10-28T18:47:20.307Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:47:20.307Z] [LOG] ======================================================================

[2025-10-28T18:47:20.307Z] [LOG] ✅ Franklin null: Calculation completed successfully
[2025-10-28T18:47:20.308Z] [LOG] 📊 Progress: 24/34 (70.6%)
[2025-10-28T18:47:20.308Z] [LOG] 
🧮 Processing: Ishara null (EMP000011)
[2025-10-28T18:47:20.308Z] [LOG] 📋 Record ID: d384efac-89ac-4e6c-840b-427d37f5b610
[2025-10-28T18:47:20.308Z] [LOG] 
======================================================================
[2025-10-28T18:47:20.308Z] [LOG] 🧮 CALCULATING PAYROLL: Ishara null (EMP000011)
[2025-10-28T18:47:20.309Z] [LOG] ======================================================================
[2025-10-28T18:47:20.725Z] [LOG] 
⚙️  ATTENDANCE DOES NOT AFFECT SALARY for Ishara null
[2025-10-28T18:47:20.726Z] [LOG]    This employee will receive full base salary regardless of attendance.
[2025-10-28T18:47:20.726Z] [LOG]    (Setting stored in payroll_records from employee snapshot at run creation)
[2025-10-28T18:47:21.115Z] [LOG] 🔍 Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-28T18:47:21.116Z] [LOG]    Total components: 13
[2025-10-28T18:47:21.116Z] [LOG]    Applicable components: 13
[2025-10-28T18:47:21.116Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-28T18:47:22.052Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:47:22.052Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:47:22.279Z] [LOG] 📊 Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:22.501Z] [LOG] 📊 Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:22.754Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:22.754Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:47:22.755Z] [LOG] 
💰 Step 1: Using full base salary (attendance not considered)...
[2025-10-28T18:47:22.755Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:47:22.755Z] [LOG]    Actual Earned Base: Rs.50000.00 (Full salary)
[2025-10-28T18:47:22.755Z] [LOG]    Attendance Shortfall: Rs.0.00 (Not applicable)
[2025-10-28T18:47:22.756Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:47:22.756Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:47:22.756Z] [LOG]    Gross Salary: 50000
[2025-10-28T18:47:22.757Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:47:22.757Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:47:22.757Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:22.757Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:47:22.758Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:22.758Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:47:22.758Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:22.758Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:47:22.758Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:22.759Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:47:22.759Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:22.759Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:47:22.759Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:22.760Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:47:22.760Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:22.760Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:47:22.760Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:22.760Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:47:22.760Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:22.761Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:47:22.761Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:22.761Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:47:22.761Z] [LOG]    EPF/ETF calculated on: Rs.50000.00
[2025-10-28T18:47:22.761Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:47:22.761Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:47:22.762Z] [LOG] 💰 GROSS CALCULATION for Ishara null:
[2025-10-28T18:47:22.762Z] [LOG]    Base Salary: 50000
[2025-10-28T18:47:22.762Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:47:22.762Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:47:22.762Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:22.762Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:47:22.762Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:22.763Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:47:22.763Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:22.998Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:47:22.998Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:22.998Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:47:22.998Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:47:22.998Z] [LOG]    Actual Earned Base: Rs.50000.00
[2025-10-28T18:47:22.999Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:47:22.999Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:47:22.999Z] [LOG]    = Gross Salary: Rs.50000.00
[2025-10-28T18:47:22.999Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:47:22.999Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:47:22.999Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:22.999Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:47:22.999Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:47:23.000Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-28T18:47:23.000Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:47:23.000Z] [LOG]    = NET SALARY: Rs.50000.00
[2025-10-28T18:47:23.000Z] [LOG] 
💾 Database Update:
[2025-10-28T18:47:23.000Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:47:23.000Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:47:23.226Z] [LOG] 
📝 Components to save:
[2025-10-28T18:47:23.226Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:47:23.227Z] [LOG]    Deduction components: 0
[2025-10-28T18:47:23.227Z] [LOG] Creating components for record d384efac-89ac-4e6c-840b-427d37f5b610: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-28T18:47:23.227Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 50000
}
[2025-10-28T18:47:23.466Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:47:23.707Z] [LOG] Created payroll_record_component: 89cd9a0e-535b-4436-8de5-56a67fa0cb0a for Base Salary
[2025-10-28T18:47:24.186Z] [LOG] ✅ Financial balances updated successfully for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:24.186Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:47:24.186Z] [LOG] 
======================================================================
[2025-10-28T18:47:24.186Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ishara null
[2025-10-28T18:47:24.186Z] [LOG] ======================================================================
[2025-10-28T18:47:24.187Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:47:24.187Z] [LOG]    Actual Earned Base (Attendance-based): Rs.50000.00
[2025-10-28T18:47:24.187Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T18:47:24.187Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:24.187Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:24.187Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:47:24.187Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:24.187Z] [LOG]    GROSS SALARY: Rs.50000.00
[2025-10-28T18:47:24.188Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:24.188Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:47:24.188Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:47:24.188Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:47:24.188Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:47:24.188Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-28T18:47:24.188Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:24.188Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:24.189Z] [LOG]    NET SALARY: Rs.50000.00
[2025-10-28T18:47:24.189Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:47:24.189Z] [LOG] ======================================================================

[2025-10-28T18:47:24.189Z] [LOG] ✅ Ishara null: Calculation completed successfully
[2025-10-28T18:47:24.189Z] [LOG] 📊 Progress: 25/34 (73.5%)
[2025-10-28T18:47:24.189Z] [LOG] 
🧮 Processing: Shandeep null (EMP000034)
[2025-10-28T18:47:24.189Z] [LOG] 📋 Record ID: ebeff31a-9b9d-4eb6-b34d-58335930d6ed
[2025-10-28T18:47:24.189Z] [LOG] 
======================================================================
[2025-10-28T18:47:24.190Z] [LOG] 🧮 CALCULATING PAYROLL: Shandeep null (EMP000034)
[2025-10-28T18:47:24.190Z] [LOG] ======================================================================
[2025-10-28T18:47:25.306Z] [LOG] 🔍 Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-28T18:47:25.306Z] [LOG]    Total components: 13
[2025-10-28T18:47:25.306Z] [LOG]    Applicable components: 13
[2025-10-28T18:47:25.307Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T18:47:26.346Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:47:26.346Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:47:26.562Z] [LOG] 📊 Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:26.826Z] [LOG] 📊 Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:27.066Z] [LOG] 📊 Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:27.067Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:47:27.067Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:47:27.546Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:47:27.546Z] [LOG]    👤 Employee: Shandeep null (EMP000034)
[2025-10-28T18:47:27.547Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:47:27.547Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:47:27.547Z] [LOG]    Base Salary (Full Month): Rs.80000.00
[2025-10-28T18:47:27.547Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:47:27.786Z] [LOG] 
   💵 Pre-calculated Rates for Shandeep null (EMP000034):
[2025-10-28T18:47:27.786Z] [LOG]       Daily Salary: Rs.3076.92
[2025-10-28T18:47:27.787Z] [LOG]       Weekday Hourly Rate: Rs.361.99
[2025-10-28T18:47:27.787Z] [LOG]       Saturday Hourly Rate: Rs.683.76
[2025-10-28T18:47:27.787Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:47:27.787Z] [LOG] 
   📊 Full Period Working Days for Shandeep null (EMP000034):
[2025-10-28T18:47:27.788Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:47:28.507Z] [LOG] 
   📊 Working Days for Expected Calculation for Shandeep null (EMP000034):
[2025-10-28T18:47:28.508Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:47:28.508Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:47:28.746Z] [LOG] 
   ⏰ Calculating Completed Hours for Shandeep null (EMP000034) - All completed sessions:
[2025-10-28T18:47:28.747Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:47:28.747Z] [LOG]       Total completed sessions found: 17
[2025-10-28T18:47:28.747Z] [LOG] 
      📋 Attendance Breakdown for Shandeep null (EMP000034):
[2025-10-28T18:47:28.747Z] [LOG]          1. 2025-10-01 (Weekday): 8.50h
[2025-10-28T18:47:28.747Z] [LOG]          2. 2025-10-02 (Weekday): 6.83h
[2025-10-28T18:47:28.747Z] [LOG]          3. 2025-10-04 (Saturday): 4.50h
[2025-10-28T18:47:28.747Z] [LOG]          4. 2025-10-07 (Weekday): 7.56h
[2025-10-28T18:47:28.747Z] [LOG]          5. 2025-10-08 (Weekday): 7.55h
[2025-10-28T18:47:28.747Z] [LOG]          6. 2025-10-09 (Weekday): 8.00h
[2025-10-28T18:47:28.747Z] [LOG]          7. 2025-10-10 (Weekday): 7.50h
[2025-10-28T18:47:28.748Z] [LOG]          8. 2025-10-11 (Saturday): 4.50h
[2025-10-28T18:47:28.748Z] [LOG]          9. 2025-10-13 (Weekday): 5.91h
[2025-10-28T18:47:28.748Z] [LOG]          10. 2025-10-14 (Weekday): 7.26h
[2025-10-28T18:47:28.748Z] [LOG]          11. 2025-10-15 (Weekday): 7.58h
[2025-10-28T18:47:28.748Z] [LOG]          12. 2025-10-16 (Weekday): 8.00h
[2025-10-28T18:47:28.748Z] [LOG]          13. 2025-10-17 (Weekday): 7.52h
[2025-10-28T18:47:28.748Z] [LOG]          14. 2025-10-18 (Saturday): 4.50h
[2025-10-28T18:47:28.748Z] [LOG]          15. 2025-10-22 (Weekday): 7.00h
[2025-10-28T18:47:28.748Z] [LOG]          16. 2025-10-23 (Weekday): 7.56h
[2025-10-28T18:47:28.748Z] [LOG]          17. 2025-10-24 (Weekday): 0.00h
[2025-10-28T18:47:28.986Z] [LOG] 
      📊 Aggregated Totals for Shandeep null (EMP000034):
[2025-10-28T18:47:28.986Z] [LOG]          Weekday: 96.77h
[2025-10-28T18:47:28.986Z] [LOG]          Saturday: 13.50h
[2025-10-28T18:47:28.987Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:47:28.987Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:47:28.987Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Shandeep null (EMP000034) - completed sessions only:
[2025-10-28T18:47:28.987Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:47:28.987Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:47:28.987Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:47:28.987Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:47:28.988Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Shandeep null (EMP000034) - completed sessions only:
[2025-10-28T18:47:28.988Z] [LOG]       Weekday: 96.77h
[2025-10-28T18:47:28.988Z] [LOG]       Saturday: 13.50h
[2025-10-28T18:47:28.988Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:47:28.988Z] [LOG]       Total Actual: 110.27h
[2025-10-28T18:47:28.988Z] [LOG] 
   💵 EXPECTED Earned Salary for Shandeep null (EMP000034) - until NOW:
[2025-10-28T18:47:28.989Z] [LOG]       Weekday: 170.00h × Rs.361.99 = Rs.61538.30
[2025-10-28T18:47:28.989Z] [LOG]       Saturday: 18.00h × Rs.683.76 = Rs.12307.68
[2025-10-28T18:47:28.989Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:28.989Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:28.989Z] [LOG]       Total Expected Earned: Rs.73845.98
[2025-10-28T18:47:28.989Z] [LOG] 
   💵 ACTUAL Earned Salary for Shandeep null (EMP000034) - including live session:
[2025-10-28T18:47:28.989Z] [LOG]       Weekday: 96.77h × Rs.361.99 = Rs.35029.77
[2025-10-28T18:47:28.990Z] [LOG]       Saturday: 13.50h × Rs.683.76 = Rs.9230.76
[2025-10-28T18:47:28.990Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:28.990Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:28.990Z] [LOG]       Total Actual Earned: Rs.44260.53
[2025-10-28T18:47:28.990Z] [LOG] 
   📊 FINAL CALCULATION for Shandeep null (EMP000034):
[2025-10-28T18:47:28.991Z] [LOG]       Calculated At: Oct 29, 2025, 24:17:28
[2025-10-28T18:47:28.991Z] [LOG]       Expected Earned: Rs.73845.98
[2025-10-28T18:47:28.991Z] [LOG]       Actual Earned: Rs.44260.53
[2025-10-28T18:47:28.991Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:28.991Z] [LOG]       Attendance Deduction: Rs.29585.45
[2025-10-28T18:47:28.991Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:47:28.991Z] [LOG]       📉 Shortfall for Shandeep null: 77.73 hours (40.06% of expected)
[2025-10-28T18:47:28.991Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:47:28.991Z] [LOG]    Base Salary (Full): Rs.80000.00
[2025-10-28T18:47:28.991Z] [LOG]    Actual Earned Base: Rs.44260.53
[2025-10-28T18:47:28.991Z] [LOG]    Attendance Shortfall: Rs.29585.45
[2025-10-28T18:47:28.992Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:47:28.992Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:47:28.992Z] [LOG]    Gross Salary: 44260.5323
[2025-10-28T18:47:28.992Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:47:28.992Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:47:28.992Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:28.992Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:47:28.992Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:28.992Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:47:28.992Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:28.993Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:47:28.993Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:28.993Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:47:28.993Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:28.993Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:47:28.993Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:28.993Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:47:28.993Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:28.993Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:47:28.993Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:28.993Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:47:28.994Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:28.994Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:47:28.994Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:28.994Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:47:28.994Z] [LOG]    EPF/ETF calculated on: Rs.44260.53
[2025-10-28T18:47:28.994Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:47:28.994Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:47:28.994Z] [LOG] 💰 GROSS CALCULATION for Shandeep null:
[2025-10-28T18:47:28.994Z] [LOG]    Base Salary: 80000
[2025-10-28T18:47:28.994Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:47:28.994Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:47:28.994Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:28.995Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:47:28.995Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:28.995Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:47:28.995Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:29.226Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:47:29.226Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:29.227Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:47:29.227Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:47:29.227Z] [LOG]    Actual Earned Base: Rs.44260.53
[2025-10-28T18:47:29.227Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:47:29.227Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:47:29.228Z] [LOG]    = Gross Salary: Rs.44260.53
[2025-10-28T18:47:29.228Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:47:29.228Z] [LOG]    Attendance Shortfall (Info): Rs.29585.45
[2025-10-28T18:47:29.228Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:47:29.228Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:29.228Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:47:29.229Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:47:29.229Z] [LOG]    Gross Salary: Rs.44260.53
[2025-10-28T18:47:29.229Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:47:29.229Z] [LOG]    = NET SALARY: Rs.44260.53
[2025-10-28T18:47:29.229Z] [LOG] 
💾 Database Update:
[2025-10-28T18:47:29.229Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:47:29.230Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:47:29.454Z] [LOG] 
📝 Components to save:
[2025-10-28T18:47:29.454Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:47:29.454Z] [LOG]    Deduction components: 1
[2025-10-28T18:47:29.454Z] [LOG] Creating components for record ebeff31a-9b9d-4eb6-b34d-58335930d6ed: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:47:29.454Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 44260.5323
}
[2025-10-28T18:47:29.706Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:47:29.946Z] [LOG] Created payroll_record_component: aebc3a55-f827-4171-a400-fd1f75f891c3 for Base Salary
[2025-10-28T18:47:29.947Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 29585.44770000001
}
[2025-10-28T18:47:30.186Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:47:30.426Z] [LOG] Created payroll_record_component: 29de920c-cb27-4c02-8685-0d6501199cd0 for Attendance Shortfall (Info)
[2025-10-28T18:47:30.895Z] [LOG] ✅ Financial balances updated successfully for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:30.895Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:47:30.895Z] [LOG] 
======================================================================
[2025-10-28T18:47:30.895Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Shandeep null
[2025-10-28T18:47:30.896Z] [LOG] ======================================================================
[2025-10-28T18:47:30.896Z] [LOG]    Base Salary (Full): Rs.80000.00
[2025-10-28T18:47:30.896Z] [LOG]    Actual Earned Base (Attendance-based): Rs.44260.53
[2025-10-28T18:47:30.896Z] [LOG]    Attendance Shortfall: Rs.29585.45
[2025-10-28T18:47:30.896Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:30.896Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:30.897Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:47:30.897Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:30.897Z] [LOG]    GROSS SALARY: Rs.44260.53
[2025-10-28T18:47:30.897Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:30.897Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:47:30.897Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:47:30.897Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:47:30.898Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:47:30.898Z] [LOG]       - Attendance Shortfall (Info): Rs.29585.45
[2025-10-28T18:47:30.898Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:30.898Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:30.898Z] [LOG]    NET SALARY: Rs.44260.53
[2025-10-28T18:47:30.898Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:47:30.899Z] [LOG] ======================================================================

[2025-10-28T18:47:30.899Z] [LOG] ✅ Shandeep null: Calculation completed successfully
[2025-10-28T18:47:30.899Z] [LOG] 📊 Progress: 26/34 (76.5%)
[2025-10-28T18:47:30.899Z] [LOG] 
🧮 Processing: Rasanga null (EMP000028)
[2025-10-28T18:47:30.899Z] [LOG] 📋 Record ID: eeba4585-73bf-4c6c-b437-b5fa29d66051
[2025-10-28T18:47:30.900Z] [LOG] 
======================================================================
[2025-10-28T18:47:30.900Z] [LOG] 🧮 CALCULATING PAYROLL: Rasanga null (EMP000028)
[2025-10-28T18:47:30.900Z] [LOG] ======================================================================
[2025-10-28T18:47:31.314Z] [LOG] 
⚙️  ATTENDANCE DOES NOT AFFECT SALARY for Rasanga null
[2025-10-28T18:47:31.314Z] [LOG]    This employee will receive full base salary regardless of attendance.
[2025-10-28T18:47:31.315Z] [LOG]    (Setting stored in payroll_records from employee snapshot at run creation)
[2025-10-28T18:47:31.787Z] [LOG] 🔍 Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-28T18:47:31.788Z] [LOG]    Total components: 13
[2025-10-28T18:47:31.788Z] [LOG]    Applicable components: 13
[2025-10-28T18:47:31.788Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-28T18:47:32.842Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:47:32.843Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:47:33.052Z] [LOG] 📊 Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:33.442Z] [LOG] 📊 Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:33.708Z] [LOG] 📊 Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:33.709Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:47:33.709Z] [LOG] 
💰 Step 1: Using full base salary (attendance not considered)...
[2025-10-28T18:47:33.709Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:47:33.709Z] [LOG]    Actual Earned Base: Rs.50000.00 (Full salary)
[2025-10-28T18:47:33.710Z] [LOG]    Attendance Shortfall: Rs.0.00 (Not applicable)
[2025-10-28T18:47:33.710Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:47:33.710Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:47:33.711Z] [LOG]    Gross Salary: 50000
[2025-10-28T18:47:33.711Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:47:33.711Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:47:33.711Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:33.712Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:47:33.712Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:33.712Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:47:33.712Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:33.712Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:47:33.713Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:33.713Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:47:33.713Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:33.713Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:47:33.714Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:33.714Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:47:33.714Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:33.715Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:47:33.715Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:33.715Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:47:33.715Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:33.716Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:47:33.716Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:33.716Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:47:33.716Z] [LOG]    EPF/ETF calculated on: Rs.50000.00
[2025-10-28T18:47:33.717Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:47:33.717Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:47:33.717Z] [LOG] 💰 GROSS CALCULATION for Rasanga null:
[2025-10-28T18:47:33.717Z] [LOG]    Base Salary: 50000
[2025-10-28T18:47:33.717Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:47:33.718Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:47:33.718Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:33.718Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:47:33.718Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:33.719Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:47:33.719Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:33.946Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:47:33.947Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:33.947Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:47:33.947Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:47:33.947Z] [LOG]    Actual Earned Base: Rs.50000.00
[2025-10-28T18:47:33.948Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:47:33.948Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:47:33.948Z] [LOG]    = Gross Salary: Rs.50000.00
[2025-10-28T18:47:33.948Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:47:33.949Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:47:33.949Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:33.949Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:47:33.950Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:47:33.950Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-28T18:47:33.950Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:47:33.951Z] [LOG]    = NET SALARY: Rs.50000.00
[2025-10-28T18:47:33.951Z] [LOG] 
💾 Database Update:
[2025-10-28T18:47:33.951Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:47:33.951Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:47:34.186Z] [LOG] 
📝 Components to save:
[2025-10-28T18:47:34.187Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:47:34.187Z] [LOG]    Deduction components: 0
[2025-10-28T18:47:34.187Z] [LOG] Creating components for record eeba4585-73bf-4c6c-b437-b5fa29d66051: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-28T18:47:34.188Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 50000
}
[2025-10-28T18:47:34.448Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:47:34.826Z] [LOG] Created payroll_record_component: 6d6e08ae-3dbd-4ded-930e-ef69d006c062 for Base Salary
[2025-10-28T18:47:35.314Z] [LOG] ✅ Financial balances updated successfully for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:35.315Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:47:35.315Z] [LOG] 
======================================================================
[2025-10-28T18:47:35.315Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Rasanga null
[2025-10-28T18:47:35.315Z] [LOG] ======================================================================
[2025-10-28T18:47:35.316Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:47:35.316Z] [LOG]    Actual Earned Base (Attendance-based): Rs.50000.00
[2025-10-28T18:47:35.316Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T18:47:35.316Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:35.317Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:35.317Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:47:35.317Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:35.317Z] [LOG]    GROSS SALARY: Rs.50000.00
[2025-10-28T18:47:35.317Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:35.318Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:47:35.318Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:47:35.318Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:47:35.318Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:47:35.318Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-28T18:47:35.319Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:35.319Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:35.319Z] [LOG]    NET SALARY: Rs.50000.00
[2025-10-28T18:47:35.319Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:47:35.319Z] [LOG] ======================================================================

[2025-10-28T18:47:35.320Z] [LOG] ✅ Rasanga null: Calculation completed successfully
[2025-10-28T18:47:35.320Z] [LOG] 📊 Progress: 27/34 (79.4%)
[2025-10-28T18:47:35.320Z] [LOG] 
🧮 Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-28T18:47:35.320Z] [LOG] 📋 Record ID: f008656f-beee-45a5-8828-2bc216448eb8
[2025-10-28T18:47:35.320Z] [LOG] 
======================================================================
[2025-10-28T18:47:35.321Z] [LOG] 🧮 CALCULATING PAYROLL: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-28T18:47:35.321Z] [LOG] ======================================================================
[2025-10-28T18:47:35.795Z] [LOG] 
⚙️  ATTENDANCE DOES NOT AFFECT SALARY for G.M Supathala Sadaru Madhushan null
[2025-10-28T18:47:35.795Z] [LOG]    This employee will receive full base salary regardless of attendance.
[2025-10-28T18:47:35.796Z] [LOG]    (Setting stored in payroll_records from employee snapshot at run creation)
[2025-10-28T18:47:36.265Z] [LOG] 🔍 Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-28T18:47:36.266Z] [LOG]    Total components: 13
[2025-10-28T18:47:36.266Z] [LOG]    Applicable components: 13
[2025-10-28T18:47:36.266Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-28T18:47:37.226Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:47:37.227Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:47:37.452Z] [LOG] 📊 Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:37.663Z] [LOG] 📊 Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:37.883Z] [LOG] 📊 Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:37.883Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:47:37.884Z] [LOG] 
💰 Step 1: Using full base salary (attendance not considered)...
[2025-10-28T18:47:37.884Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:47:37.884Z] [LOG]    Actual Earned Base: Rs.50000.00 (Full salary)
[2025-10-28T18:47:37.885Z] [LOG]    Attendance Shortfall: Rs.0.00 (Not applicable)
[2025-10-28T18:47:37.885Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:47:37.885Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:47:37.886Z] [LOG]    Gross Salary: 50000
[2025-10-28T18:47:37.886Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:47:37.886Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:47:37.887Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:37.887Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:47:37.887Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:37.887Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:47:37.888Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:37.888Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:47:37.888Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:37.889Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:47:37.889Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:37.889Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:47:37.890Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:37.890Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:47:37.890Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:37.891Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:47:37.891Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:37.891Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:47:37.891Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:37.892Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:47:37.892Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:37.892Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:47:37.892Z] [LOG]    EPF/ETF calculated on: Rs.50000.00
[2025-10-28T18:47:37.893Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:47:37.893Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:47:37.893Z] [LOG] 💰 GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-28T18:47:37.894Z] [LOG]    Base Salary: 50000
[2025-10-28T18:47:37.894Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:47:37.894Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:47:37.895Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:37.895Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:47:37.895Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:37.896Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:47:37.896Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:38.119Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:47:38.120Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:38.120Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:47:38.121Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:47:38.121Z] [LOG]    Actual Earned Base: Rs.50000.00
[2025-10-28T18:47:38.121Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:47:38.123Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:47:38.123Z] [LOG]    = Gross Salary: Rs.50000.00
[2025-10-28T18:47:38.124Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:47:38.124Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:47:38.124Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:38.124Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:47:38.124Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:47:38.125Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-28T18:47:38.125Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:47:38.125Z] [LOG]    = NET SALARY: Rs.50000.00
[2025-10-28T18:47:38.125Z] [LOG] 
💾 Database Update:
[2025-10-28T18:47:38.126Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:47:38.126Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:47:38.335Z] [LOG] 
📝 Components to save:
[2025-10-28T18:47:38.335Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:47:38.336Z] [LOG]    Deduction components: 0
[2025-10-28T18:47:38.336Z] [LOG] Creating components for record f008656f-beee-45a5-8828-2bc216448eb8: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-28T18:47:38.337Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 50000
}
[2025-10-28T18:47:38.550Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:47:38.777Z] [LOG] Created payroll_record_component: e9f24f68-9463-425c-a9b3-14fbeda2f240 for Base Salary
[2025-10-28T18:47:39.278Z] [LOG] ✅ Financial balances updated successfully for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:39.279Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:47:39.279Z] [LOG] 
======================================================================
[2025-10-28T18:47:39.279Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: G.M Supathala Sadaru Madhushan null
[2025-10-28T18:47:39.279Z] [LOG] ======================================================================
[2025-10-28T18:47:39.280Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:47:39.280Z] [LOG]    Actual Earned Base (Attendance-based): Rs.50000.00
[2025-10-28T18:47:39.280Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-28T18:47:39.281Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:39.281Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:39.281Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:47:39.281Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:39.282Z] [LOG]    GROSS SALARY: Rs.50000.00
[2025-10-28T18:47:39.282Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:39.282Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:47:39.282Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:47:39.283Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:47:39.283Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:47:39.283Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-28T18:47:39.283Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:39.284Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:39.284Z] [LOG]    NET SALARY: Rs.50000.00
[2025-10-28T18:47:39.284Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:47:39.285Z] [LOG] ======================================================================

[2025-10-28T18:47:39.285Z] [LOG] ✅ G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-28T18:47:39.285Z] [LOG] 📊 Progress: 28/34 (82.4%)
[2025-10-28T18:47:39.286Z] [LOG] 
🧮 Processing: Waruni null (EMP000024)
[2025-10-28T18:47:39.286Z] [LOG] 📋 Record ID: f45749ec-308f-454a-9193-b6cb558d3e5d
[2025-10-28T18:47:39.286Z] [LOG] 
======================================================================
[2025-10-28T18:47:39.287Z] [LOG] 🧮 CALCULATING PAYROLL: Waruni null (EMP000024)
[2025-10-28T18:47:39.287Z] [LOG] ======================================================================
[2025-10-28T18:47:40.090Z] [LOG] 🔍 Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-28T18:47:40.091Z] [LOG]    Total components: 13
[2025-10-28T18:47:40.091Z] [LOG]    Applicable components: 13
[2025-10-28T18:47:40.091Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T18:47:40.954Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:47:40.954Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:47:41.196Z] [LOG] 📊 Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:41.449Z] [LOG] 📊 Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:41.690Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:41.690Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:47:41.691Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:47:42.340Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:47:42.340Z] [LOG]    👤 Employee: Waruni null (EMP000024)
[2025-10-28T18:47:42.341Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:47:42.341Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:47:42.341Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T18:47:42.341Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:47:42.556Z] [LOG] 
   💵 Pre-calculated Rates for Waruni null (EMP000024):
[2025-10-28T18:47:42.556Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-28T18:47:42.556Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-28T18:47:42.557Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-28T18:47:42.557Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:47:42.557Z] [LOG] 
   📊 Full Period Working Days for Waruni null (EMP000024):
[2025-10-28T18:47:42.558Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:47:43.307Z] [LOG] 
   📊 Working Days for Expected Calculation for Waruni null (EMP000024):
[2025-10-28T18:47:43.307Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:47:43.307Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:47:43.555Z] [LOG] 
   ⏰ Calculating Completed Hours for Waruni null (EMP000024) - All completed sessions:
[2025-10-28T18:47:43.555Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:47:43.555Z] [LOG]       Total completed sessions found: 21
[2025-10-28T18:47:43.555Z] [LOG] 
      📋 Attendance Breakdown for Waruni null (EMP000024):
[2025-10-28T18:47:43.556Z] [LOG]          1. 2025-10-01 (Weekday): 8.08h
[2025-10-28T18:47:43.556Z] [LOG]          2. 2025-10-02 (Weekday): 8.33h
[2025-10-28T18:47:43.556Z] [LOG]          3. 2025-10-03 (Weekday): 8.50h
[2025-10-28T18:47:43.556Z] [LOG]          4. 2025-10-04 (Saturday): 4.50h
[2025-10-28T18:47:43.556Z] [LOG]          5. 2025-10-07 (Weekday): 8.50h
[2025-10-28T18:47:43.557Z] [LOG]          6. 2025-10-08 (Weekday): 8.50h
[2025-10-28T18:47:43.557Z] [LOG]          7. 2025-10-09 (Weekday): 8.50h
[2025-10-28T18:47:43.557Z] [LOG]          8. 2025-10-10 (Weekday): 8.50h
[2025-10-28T18:47:43.557Z] [LOG]          9. 2025-10-11 (Saturday): 4.50h
[2025-10-28T18:47:43.557Z] [LOG]          10. 2025-10-13 (Weekday): 8.50h
[2025-10-28T18:47:43.557Z] [LOG]          11. 2025-10-14 (Weekday): 8.50h
[2025-10-28T18:47:43.558Z] [LOG]          12. 2025-10-15 (Weekday): 8.50h
[2025-10-28T18:47:43.558Z] [LOG]          13. 2025-10-16 (Weekday): 8.42h
[2025-10-28T18:47:43.558Z] [LOG]          14. 2025-10-17 (Weekday): 8.50h
[2025-10-28T18:47:43.558Z] [LOG]          15. 2025-10-18 (Saturday): 4.50h
[2025-10-28T18:47:43.558Z] [LOG]          16. 2025-10-20 (Weekday): 8.50h
[2025-10-28T18:47:43.558Z] [LOG]          17. 2025-10-21 (Weekday): 8.50h
[2025-10-28T18:47:43.558Z] [LOG]          18. 2025-10-22 (Weekday): 8.50h
[2025-10-28T18:47:43.558Z] [LOG]          19. 2025-10-23 (Weekday): 8.36h
[2025-10-28T18:47:43.559Z] [LOG]          20. 2025-10-24 (Weekday): 7.98h
[2025-10-28T18:47:43.559Z] [LOG]          21. 2025-10-25 (Saturday): 4.50h
[2025-10-28T18:47:43.783Z] [LOG] 
      📊 Aggregated Totals for Waruni null (EMP000024):
[2025-10-28T18:47:43.783Z] [LOG]          Weekday: 143.17h
[2025-10-28T18:47:43.783Z] [LOG]          Saturday: 18.00h
[2025-10-28T18:47:43.783Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:47:43.783Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:47:43.783Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Waruni null (EMP000024) - completed sessions only:
[2025-10-28T18:47:43.784Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:47:43.784Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:47:43.784Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:47:43.784Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:47:43.784Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Waruni null (EMP000024) - completed sessions only:
[2025-10-28T18:47:43.784Z] [LOG]       Weekday: 143.17h
[2025-10-28T18:47:43.784Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:47:43.784Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:47:43.784Z] [LOG]       Total Actual: 161.17h
[2025-10-28T18:47:43.784Z] [LOG] 
   💵 EXPECTED Earned Salary for Waruni null (EMP000024) - until NOW:
[2025-10-28T18:47:43.785Z] [LOG]       Weekday: 170.00h × Rs.226.24 = Rs.38460.80
[2025-10-28T18:47:43.785Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-28T18:47:43.785Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:43.785Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:43.785Z] [LOG]       Total Expected Earned: Rs.46153.10
[2025-10-28T18:47:43.785Z] [LOG] 
   💵 ACTUAL Earned Salary for Waruni null (EMP000024) - including live session:
[2025-10-28T18:47:43.785Z] [LOG]       Weekday: 143.17h × Rs.226.24 = Rs.32390.78
[2025-10-28T18:47:43.785Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-28T18:47:43.785Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:43.786Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:43.786Z] [LOG]       Total Actual Earned: Rs.40083.08
[2025-10-28T18:47:43.786Z] [LOG] 
   📊 FINAL CALCULATION for Waruni null (EMP000024):
[2025-10-28T18:47:43.786Z] [LOG]       Calculated At: Oct 29, 2025, 24:17:43
[2025-10-28T18:47:43.786Z] [LOG]       Expected Earned: Rs.46153.10
[2025-10-28T18:47:43.786Z] [LOG]       Actual Earned: Rs.40083.08
[2025-10-28T18:47:43.787Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:43.787Z] [LOG]       Attendance Deduction: Rs.6070.02
[2025-10-28T18:47:43.787Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:47:43.787Z] [LOG]       📉 Shortfall for Waruni null: 26.83 hours (13.15% of expected)
[2025-10-28T18:47:43.787Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:47:43.787Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:47:43.787Z] [LOG]    Actual Earned Base: Rs.40083.08
[2025-10-28T18:47:43.787Z] [LOG]    Attendance Shortfall: Rs.6070.02
[2025-10-28T18:47:43.787Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:47:43.787Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:47:43.788Z] [LOG]    Gross Salary: 40083.080799999996
[2025-10-28T18:47:43.788Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:47:43.788Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:47:43.788Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:43.788Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:47:43.788Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:43.788Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:47:43.788Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:43.788Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:47:43.789Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:43.789Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:47:43.789Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:43.789Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:47:43.789Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:43.789Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:47:43.789Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:43.790Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:47:43.790Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:43.790Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:47:43.791Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:43.791Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:47:43.791Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:43.791Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:47:43.791Z] [LOG]    EPF/ETF calculated on: Rs.40083.08
[2025-10-28T18:47:43.791Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:47:43.792Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:47:43.792Z] [LOG] 💰 GROSS CALCULATION for Waruni null:
[2025-10-28T18:47:43.792Z] [LOG]    Base Salary: 50000
[2025-10-28T18:47:43.792Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:47:43.792Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:47:43.792Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:43.792Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:47:43.793Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:43.793Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:47:43.793Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:44.115Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:47:44.115Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:44.116Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:47:44.116Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:47:44.116Z] [LOG]    Actual Earned Base: Rs.40083.08
[2025-10-28T18:47:44.116Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:47:44.117Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:47:44.117Z] [LOG]    = Gross Salary: Rs.40083.08
[2025-10-28T18:47:44.117Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:47:44.118Z] [LOG]    Attendance Shortfall (Info): Rs.6070.02
[2025-10-28T18:47:44.118Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:47:44.118Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:44.118Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:47:44.119Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:47:44.119Z] [LOG]    Gross Salary: Rs.40083.08
[2025-10-28T18:47:44.119Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:47:44.120Z] [LOG]    = NET SALARY: Rs.40083.08
[2025-10-28T18:47:44.120Z] [LOG] 
💾 Database Update:
[2025-10-28T18:47:44.120Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:47:44.120Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:47:44.434Z] [LOG] 
📝 Components to save:
[2025-10-28T18:47:44.435Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:47:44.435Z] [LOG]    Deduction components: 1
[2025-10-28T18:47:44.435Z] [LOG] Creating components for record f45749ec-308f-454a-9193-b6cb558d3e5d: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:47:44.436Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 40083.080799999996
}
[2025-10-28T18:47:44.674Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:47:44.906Z] [LOG] Created payroll_record_component: 05295f13-3342-4bb7-a8dc-7d5b93ed3f63 for Base Salary
[2025-10-28T18:47:44.907Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 6070.01920000001
}
[2025-10-28T18:47:45.147Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:47:45.394Z] [LOG] Created payroll_record_component: d63390f9-fd16-4db2-b74c-2bb1142886a9 for Attendance Shortfall (Info)
[2025-10-28T18:47:45.882Z] [LOG] ✅ Financial balances updated successfully for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:45.883Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:47:45.883Z] [LOG] 
======================================================================
[2025-10-28T18:47:45.884Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Waruni null
[2025-10-28T18:47:45.884Z] [LOG] ======================================================================
[2025-10-28T18:47:45.884Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:47:45.884Z] [LOG]    Actual Earned Base (Attendance-based): Rs.40083.08
[2025-10-28T18:47:45.885Z] [LOG]    Attendance Shortfall: Rs.6070.02
[2025-10-28T18:47:45.885Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:45.885Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:45.885Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:47:45.886Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:45.886Z] [LOG]    GROSS SALARY: Rs.40083.08
[2025-10-28T18:47:45.886Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:45.886Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:47:45.887Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:47:45.887Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:47:45.887Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:47:45.888Z] [LOG]       - Attendance Shortfall (Info): Rs.6070.02
[2025-10-28T18:47:45.888Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:45.888Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:45.889Z] [LOG]    NET SALARY: Rs.40083.08
[2025-10-28T18:47:45.889Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:47:45.889Z] [LOG] ======================================================================

[2025-10-28T18:47:45.889Z] [LOG] ✅ Waruni null: Calculation completed successfully
[2025-10-28T18:47:45.890Z] [LOG] 📊 Progress: 29/34 (85.3%)
[2025-10-28T18:47:45.890Z] [LOG] 
🧮 Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-28T18:47:45.890Z] [LOG] 📋 Record ID: f4ff3f9b-5d38-442f-ad9d-555607e32bdd
[2025-10-28T18:47:45.890Z] [LOG] 
======================================================================
[2025-10-28T18:47:45.891Z] [LOG] 🧮 CALCULATING PAYROLL: Nimdiya Ranasinghe null (EMP000045)
[2025-10-28T18:47:45.891Z] [LOG] ======================================================================
[2025-10-28T18:47:46.836Z] [LOG] 🔍 Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-28T18:47:46.837Z] [LOG]    Total components: 13
[2025-10-28T18:47:46.837Z] [LOG]    Applicable components: 13
[2025-10-28T18:47:46.837Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T18:47:47.795Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:47:47.795Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:47:48.036Z] [LOG] 📊 Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:48.275Z] [LOG] 📊 Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:48.508Z] [LOG] 📊 Found 1 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:48.508Z] [LOG] 🎁 Bonus 51bba675-b8e0-4f46-82d2-d6953f2753bf: Adding LKR 1000 (performance)
[2025-10-28T18:47:48.509Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 1000,
  "netAdjustment": 1000
}
[2025-10-28T18:47:48.509Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:47:48.986Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:47:48.987Z] [LOG]    👤 Employee: Nimdiya Ranasinghe null (EMP000045)
[2025-10-28T18:47:48.987Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:47:48.987Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:47:48.988Z] [LOG]    Base Salary (Full Month): Rs.35000.00
[2025-10-28T18:47:48.988Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:47:49.225Z] [LOG] 
   💵 Pre-calculated Rates for Nimdiya Ranasinghe null (EMP000045):
[2025-10-28T18:47:49.226Z] [LOG]       Daily Salary: Rs.1346.15
[2025-10-28T18:47:49.226Z] [LOG]       Weekday Hourly Rate: Rs.158.37
[2025-10-28T18:47:49.226Z] [LOG]       Saturday Hourly Rate: Rs.299.15
[2025-10-28T18:47:49.226Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:47:49.226Z] [LOG] 
   📊 Full Period Working Days for Nimdiya Ranasinghe null (EMP000045):
[2025-10-28T18:47:49.227Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:47:49.951Z] [LOG] 
   📊 Working Days for Expected Calculation for Nimdiya Ranasinghe null (EMP000045):
[2025-10-28T18:47:49.951Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:47:49.952Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:47:50.195Z] [LOG] 
   ⏰ Calculating Completed Hours for Nimdiya Ranasinghe null (EMP000045) - All completed sessions:
[2025-10-28T18:47:50.195Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:47:50.195Z] [LOG]       Total completed sessions found: 16
[2025-10-28T18:47:50.196Z] [LOG] 
      📋 Attendance Breakdown for Nimdiya Ranasinghe null (EMP000045):
[2025-10-28T18:47:50.196Z] [LOG]          1. 2025-10-02 (Weekday): 8.47h
[2025-10-28T18:47:50.197Z] [LOG]          2. 2025-10-03 (Weekday): 8.50h
[2025-10-28T18:47:50.197Z] [LOG]          3. 2025-10-04 (Saturday): 4.50h
[2025-10-28T18:47:50.197Z] [LOG]          4. 2025-10-08 (Weekday): 8.50h
[2025-10-28T18:47:50.197Z] [LOG]          5. 2025-10-09 (Weekday): 8.50h
[2025-10-28T18:47:50.198Z] [LOG]          6. 2025-10-10 (Weekday): 8.50h
[2025-10-28T18:47:50.198Z] [LOG]          7. 2025-10-11 (Saturday): 4.50h
[2025-10-28T18:47:50.198Z] [LOG]          8. 2025-10-13 (Weekday): 8.50h
[2025-10-28T18:47:50.199Z] [LOG]          9. 2025-10-14 (Weekday): 8.50h
[2025-10-28T18:47:50.199Z] [LOG]          10. 2025-10-15 (Weekday): 8.50h
[2025-10-28T18:47:50.199Z] [LOG]          11. 2025-10-16 (Weekday): 8.50h
[2025-10-28T18:47:50.199Z] [LOG]          12. 2025-10-17 (Weekday): 8.17h
[2025-10-28T18:47:50.200Z] [LOG]          13. 2025-10-18 (Saturday): 4.50h
[2025-10-28T18:47:50.200Z] [LOG]          14. 2025-10-22 (Weekday): 5.50h
[2025-10-28T18:47:50.200Z] [LOG]          15. 2025-10-23 (Weekday): 8.47h
[2025-10-28T18:47:50.201Z] [LOG]          16. 2025-10-24 (Weekday): 8.00h
[2025-10-28T18:47:50.429Z] [LOG] 
      📊 Aggregated Totals for Nimdiya Ranasinghe null (EMP000045):
[2025-10-28T18:47:50.430Z] [LOG]          Weekday: 106.61h
[2025-10-28T18:47:50.430Z] [LOG]          Saturday: 13.50h
[2025-10-28T18:47:50.430Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:47:50.431Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:47:50.431Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Nimdiya Ranasinghe null (EMP000045) - completed sessions only:
[2025-10-28T18:47:50.431Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:47:50.432Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:47:50.432Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:47:50.432Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:47:50.433Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Nimdiya Ranasinghe null (EMP000045) - completed sessions only:
[2025-10-28T18:47:50.433Z] [LOG]       Weekday: 106.61h
[2025-10-28T18:47:50.433Z] [LOG]       Saturday: 13.50h
[2025-10-28T18:47:50.433Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:47:50.434Z] [LOG]       Total Actual: 120.11h
[2025-10-28T18:47:50.434Z] [LOG] 
   💵 EXPECTED Earned Salary for Nimdiya Ranasinghe null (EMP000045) - until NOW:
[2025-10-28T18:47:50.434Z] [LOG]       Weekday: 170.00h × Rs.158.37 = Rs.26922.90
[2025-10-28T18:47:50.434Z] [LOG]       Saturday: 18.00h × Rs.299.15 = Rs.5384.70
[2025-10-28T18:47:50.435Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:50.435Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:50.435Z] [LOG]       Total Expected Earned: Rs.32307.60
[2025-10-28T18:47:50.436Z] [LOG] 
   💵 ACTUAL Earned Salary for Nimdiya Ranasinghe null (EMP000045) - including live session:
[2025-10-28T18:47:50.436Z] [LOG]       Weekday: 106.61h × Rs.158.37 = Rs.16883.83
[2025-10-28T18:47:50.436Z] [LOG]       Saturday: 13.50h × Rs.299.15 = Rs.4038.52
[2025-10-28T18:47:50.437Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:50.437Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:50.437Z] [LOG]       Total Actual Earned: Rs.20922.35
[2025-10-28T18:47:50.438Z] [LOG] 
   📊 FINAL CALCULATION for Nimdiya Ranasinghe null (EMP000045):
[2025-10-28T18:47:50.438Z] [LOG]       Calculated At: Oct 29, 2025, 24:17:50
[2025-10-28T18:47:50.439Z] [LOG]       Expected Earned: Rs.32307.60
[2025-10-28T18:47:50.439Z] [LOG]       Actual Earned: Rs.20922.35
[2025-10-28T18:47:50.439Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:50.440Z] [LOG]       Attendance Deduction: Rs.11385.25
[2025-10-28T18:47:50.440Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:47:50.440Z] [LOG]       📉 Shortfall for Nimdiya Ranasinghe null: 67.89 hours (35.24% of expected)
[2025-10-28T18:47:50.441Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:47:50.441Z] [LOG]    Base Salary (Full): Rs.35000.00
[2025-10-28T18:47:50.441Z] [LOG]    Actual Earned Base: Rs.20922.35
[2025-10-28T18:47:50.442Z] [LOG]    Attendance Shortfall: Rs.11385.25
[2025-10-28T18:47:50.442Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:47:50.442Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:47:50.442Z] [LOG]    Gross Salary: 20922.350700000003
[2025-10-28T18:47:50.444Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:47:50.444Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:47:50.445Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:50.445Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:47:50.445Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:50.445Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:47:50.446Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:50.446Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:47:50.446Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:50.446Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:47:50.447Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:50.447Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:47:50.447Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:50.447Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:47:50.448Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:50.448Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:47:50.448Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:50.449Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:47:50.449Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:50.449Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:47:50.449Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:50.450Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:47:50.450Z] [LOG]    EPF/ETF calculated on: Rs.20922.35
[2025-10-28T18:47:50.450Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:47:50.451Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:47:50.451Z] [LOG] 💰 GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-28T18:47:50.451Z] [LOG]    Base Salary: 35000
[2025-10-28T18:47:50.451Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:47:50.451Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:47:50.451Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:50.451Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:47:50.451Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:50.452Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:47:50.452Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:50.830Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:47:50.831Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:50.831Z] [LOG]    Financial Bonuses: Rs.1000.00
[2025-10-28T18:47:50.832Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:47:50.832Z] [LOG]    Actual Earned Base: Rs.20922.35
[2025-10-28T18:47:50.832Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:47:50.833Z] [LOG]    + Bonuses: Rs.1000.00
[2025-10-28T18:47:50.833Z] [LOG]    = Gross Salary: Rs.21922.35
[2025-10-28T18:47:50.833Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:47:50.834Z] [LOG]    Attendance Shortfall (Info): Rs.11385.25
[2025-10-28T18:47:50.834Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:47:50.834Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:50.835Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:47:50.835Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:47:50.835Z] [LOG]    Gross Salary: Rs.21922.35
[2025-10-28T18:47:50.836Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:47:50.836Z] [LOG]    = NET SALARY: Rs.21922.35
[2025-10-28T18:47:50.836Z] [LOG] 
💾 Database Update:
[2025-10-28T18:47:50.837Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.1000.00 (Allowances: 0.00 + Bonuses: 1000.00)
[2025-10-28T18:47:50.837Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:47:51.074Z] [LOG] 
📝 Components to save:
[2025-10-28T18:47:51.075Z] [LOG]    Gross/Earnings components: 2
[2025-10-28T18:47:51.075Z] [LOG]    Deduction components: 1
[2025-10-28T18:47:51.075Z] [LOG] Creating components for record f4ff3f9b-5d38-442f-ad9d-555607e32bdd: {
  "grossComponentsCount": 2,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:47:51.076Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 20922.350700000003
}
[2025-10-28T18:47:51.316Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:47:51.623Z] [LOG] Created payroll_record_component: 622c0ae8-a6b9-4db0-ab53-cb3e470bcc52 for Base Salary
[2025-10-28T18:47:51.624Z] [LOG] Processing component: {
  "name": "Financial Bonuses",
  "type": "earning",
  "amount": 1000
}
[2025-10-28T18:47:51.867Z] [LOG] Using existing component ID: 358d4714-0a37-484b-979d-f8fa6c68d465
[2025-10-28T18:47:52.107Z] [LOG] Created payroll_record_component: 698a106b-335d-4fe2-be05-14bd4b7b257d for Financial Bonuses
[2025-10-28T18:47:52.108Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 11385.2493
}
[2025-10-28T18:47:52.355Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:47:52.587Z] [LOG] Created payroll_record_component: 9b3449d7-331b-4c73-9803-99a1c0cadd37 for Attendance Shortfall (Info)
[2025-10-28T18:47:53.386Z] [LOG] ✅ Updated bonus 51bba675-b8e0-4f46-82d2-d6953f2753bf: Status changed to 'paid'
[2025-10-28T18:47:53.627Z] [LOG] ✅ Financial balances updated successfully for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:53.628Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:47:53.628Z] [LOG] 
======================================================================
[2025-10-28T18:47:53.628Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Nimdiya Ranasinghe null
[2025-10-28T18:47:53.629Z] [LOG] ======================================================================
[2025-10-28T18:47:53.629Z] [LOG]    Base Salary (Full): Rs.35000.00
[2025-10-28T18:47:53.629Z] [LOG]    Actual Earned Base (Attendance-based): Rs.20922.35
[2025-10-28T18:47:53.630Z] [LOG]    Attendance Shortfall: Rs.11385.25
[2025-10-28T18:47:53.630Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:53.630Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:53.631Z] [LOG]    Bonuses: Rs.1000.00
[2025-10-28T18:47:53.631Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:53.631Z] [LOG]    GROSS SALARY: Rs.21922.35
[2025-10-28T18:47:53.631Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:53.632Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:47:53.632Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:47:53.632Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:47:53.632Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:47:53.633Z] [LOG]       - Attendance Shortfall (Info): Rs.11385.25
[2025-10-28T18:47:53.633Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:53.633Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:47:53.634Z] [LOG]    NET SALARY: Rs.21922.35
[2025-10-28T18:47:53.634Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:47:53.634Z] [LOG] ======================================================================

[2025-10-28T18:47:53.635Z] [LOG] ✅ Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-28T18:47:53.635Z] [LOG] 📊 Progress: 30/34 (88.2%)
[2025-10-28T18:47:53.635Z] [LOG] 
🧮 Processing: Maryam null (EMP000035)
[2025-10-28T18:47:53.636Z] [LOG] 📋 Record ID: f5ceb591-6cfe-4522-b2bb-a51a147860c1
[2025-10-28T18:47:53.636Z] [LOG] 
======================================================================
[2025-10-28T18:47:53.636Z] [LOG] 🧮 CALCULATING PAYROLL: Maryam null (EMP000035)
[2025-10-28T18:47:53.637Z] [LOG] ======================================================================
[2025-10-28T18:47:54.595Z] [LOG] 🔍 Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-28T18:47:54.595Z] [LOG]    Total components: 13
[2025-10-28T18:47:54.595Z] [LOG]    Applicable components: 13
[2025-10-28T18:47:54.596Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-28T18:47:55.498Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:47:55.498Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:47:55.708Z] [LOG] 📊 Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:55.955Z] [LOG] 📊 Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:56.188Z] [LOG] 📊 Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-28T18:47:56.188Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:47:56.189Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:47:56.803Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:47:56.803Z] [LOG]    👤 Employee: Maryam null (EMP000035)
[2025-10-28T18:47:56.804Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:47:56.804Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:47:56.804Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-28T18:47:56.805Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:47:57.203Z] [LOG] 
   💵 Pre-calculated Rates for Maryam null (EMP000035):
[2025-10-28T18:47:57.204Z] [LOG]       Daily Salary: Rs.1538.46
[2025-10-28T18:47:57.204Z] [LOG]       Weekday Hourly Rate: Rs.181.00
[2025-10-28T18:47:57.204Z] [LOG]       Saturday Hourly Rate: Rs.341.88
[2025-10-28T18:47:57.204Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:47:57.205Z] [LOG] 
   📊 Full Period Working Days for Maryam null (EMP000035):
[2025-10-28T18:47:57.205Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:47:57.963Z] [LOG] 
   📊 Working Days for Expected Calculation for Maryam null (EMP000035):
[2025-10-28T18:47:57.963Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:47:57.964Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:47:58.176Z] [LOG] 
   ⏰ Calculating Completed Hours for Maryam null (EMP000035) - All completed sessions:
[2025-10-28T18:47:58.177Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:47:58.177Z] [LOG]       Total completed sessions found: 19
[2025-10-28T18:47:58.177Z] [LOG] 
      📋 Attendance Breakdown for Maryam null (EMP000035):
[2025-10-28T18:47:58.177Z] [LOG]          1. 2025-10-01 (Weekday): 7.61h
[2025-10-28T18:47:58.178Z] [LOG]          2. 2025-10-02 (Weekday): 8.25h
[2025-10-28T18:47:58.178Z] [LOG]          3. 2025-10-03 (Weekday): 7.79h
[2025-10-28T18:47:58.178Z] [LOG]          4. 2025-10-04 (Saturday): 4.23h
[2025-10-28T18:47:58.179Z] [LOG]          5. 2025-10-07 (Weekday): 8.18h
[2025-10-28T18:47:58.179Z] [LOG]          6. 2025-10-08 (Weekday): 8.38h
[2025-10-28T18:47:58.179Z] [LOG]          7. 2025-10-09 (Weekday): 8.05h
[2025-10-28T18:47:58.179Z] [LOG]          8. 2025-10-10 (Weekday): 7.92h
[2025-10-28T18:47:58.180Z] [LOG]          9. 2025-10-11 (Saturday): 4.50h
[2025-10-28T18:47:58.180Z] [LOG]          10. 2025-10-13 (Weekday): 8.16h
[2025-10-28T18:47:58.180Z] [LOG]          11. 2025-10-14 (Weekday): 8.39h
[2025-10-28T18:47:58.181Z] [LOG]          12. 2025-10-15 (Weekday): 8.17h
[2025-10-28T18:47:58.181Z] [LOG]          13. 2025-10-16 (Weekday): 7.92h
[2025-10-28T18:47:58.181Z] [LOG]          14. 2025-10-18 (Saturday): 4.50h
[2025-10-28T18:47:58.181Z] [LOG]          15. 2025-10-20 (Weekday): 8.06h
[2025-10-28T18:47:58.182Z] [LOG]          16. 2025-10-21 (Weekday): 7.79h
[2025-10-28T18:47:58.182Z] [LOG]          17. 2025-10-22 (Weekday): 8.13h
[2025-10-28T18:47:58.182Z] [LOG]          18. 2025-10-23 (Weekday): 8.22h
[2025-10-28T18:47:58.182Z] [LOG]          19. 2025-10-24 (Weekday): 7.08h
[2025-10-28T18:47:58.426Z] [LOG] 
      📊 Aggregated Totals for Maryam null (EMP000035):
[2025-10-28T18:47:58.427Z] [LOG]          Weekday: 128.10h
[2025-10-28T18:47:58.427Z] [LOG]          Saturday: 13.23h
[2025-10-28T18:47:58.427Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:47:58.428Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:47:58.428Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Maryam null (EMP000035) - completed sessions only:
[2025-10-28T18:47:58.428Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:47:58.429Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:47:58.429Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:47:58.429Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:47:58.430Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Maryam null (EMP000035) - completed sessions only:
[2025-10-28T18:47:58.430Z] [LOG]       Weekday: 128.10h
[2025-10-28T18:47:58.430Z] [LOG]       Saturday: 13.23h
[2025-10-28T18:47:58.430Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:47:58.431Z] [LOG]       Total Actual: 141.33h
[2025-10-28T18:47:58.431Z] [LOG] 
   💵 EXPECTED Earned Salary for Maryam null (EMP000035) - until NOW:
[2025-10-28T18:47:58.431Z] [LOG]       Weekday: 170.00h × Rs.181.00 = Rs.30770.00
[2025-10-28T18:47:58.431Z] [LOG]       Saturday: 18.00h × Rs.341.88 = Rs.6153.84
[2025-10-28T18:47:58.432Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:58.432Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:58.432Z] [LOG]       Total Expected Earned: Rs.36923.84
[2025-10-28T18:47:58.432Z] [LOG] 
   💵 ACTUAL Earned Salary for Maryam null (EMP000035) - including live session:
[2025-10-28T18:47:58.433Z] [LOG]       Weekday: 128.10h × Rs.181.00 = Rs.23186.10
[2025-10-28T18:47:58.433Z] [LOG]       Saturday: 13.23h × Rs.341.88 = Rs.4523.07
[2025-10-28T18:47:58.433Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:47:58.434Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:58.434Z] [LOG]       Total Actual Earned: Rs.27709.17
[2025-10-28T18:47:58.435Z] [LOG] 
   📊 FINAL CALCULATION for Maryam null (EMP000035):
[2025-10-28T18:47:58.435Z] [LOG]       Calculated At: Oct 29, 2025, 24:17:58
[2025-10-28T18:47:58.436Z] [LOG]       Expected Earned: Rs.36923.84
[2025-10-28T18:47:58.436Z] [LOG]       Actual Earned: Rs.27709.17
[2025-10-28T18:47:58.436Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:47:58.437Z] [LOG]       Attendance Deduction: Rs.9214.67
[2025-10-28T18:47:58.437Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:47:58.437Z] [LOG]       📉 Shortfall for Maryam null: 46.67 hours (24.96% of expected)
[2025-10-28T18:47:58.438Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:47:58.438Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-28T18:47:58.438Z] [LOG]    Actual Earned Base: Rs.27709.17
[2025-10-28T18:47:58.439Z] [LOG]    Attendance Shortfall: Rs.9214.67
[2025-10-28T18:47:58.439Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:47:58.439Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:47:58.440Z] [LOG]    Gross Salary: 27709.1724
[2025-10-28T18:47:58.440Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:47:58.440Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:47:58.441Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:58.441Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:47:58.441Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:58.441Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:47:58.442Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:58.442Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:47:58.442Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:58.442Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:47:58.442Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:58.443Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:47:58.443Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:58.443Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:47:58.444Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:58.444Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:47:58.444Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:58.444Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:47:58.445Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:58.445Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:47:58.445Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:58.446Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:47:58.446Z] [LOG]    EPF/ETF calculated on: Rs.27709.17
[2025-10-28T18:47:58.446Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:47:58.446Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:47:58.447Z] [LOG] 💰 GROSS CALCULATION for Maryam null:
[2025-10-28T18:47:58.447Z] [LOG]    Base Salary: 40000
[2025-10-28T18:47:58.447Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:47:58.447Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:47:58.448Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:58.448Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:47:58.448Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:58.448Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:47:58.448Z] [LOG]    Fixed amount: 0
[2025-10-28T18:47:58.827Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:47:58.828Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:47:58.828Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:47:58.828Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:47:58.829Z] [LOG]    Actual Earned Base: Rs.27709.17
[2025-10-28T18:47:58.829Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:47:58.829Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:47:58.829Z] [LOG]    = Gross Salary: Rs.27709.17
[2025-10-28T18:47:58.829Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:47:58.830Z] [LOG]    Attendance Shortfall (Info): Rs.9214.67
[2025-10-28T18:47:58.830Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:47:58.830Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:47:58.830Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:47:58.831Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:47:58.831Z] [LOG]    Gross Salary: Rs.27709.17
[2025-10-28T18:47:58.831Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:47:58.831Z] [LOG]    = NET SALARY: Rs.27709.17
[2025-10-28T18:47:58.831Z] [LOG] 
💾 Database Update:
[2025-10-28T18:47:58.832Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:47:58.832Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:47:59.078Z] [LOG] 
📝 Components to save:
[2025-10-28T18:47:59.078Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:47:59.078Z] [LOG]    Deduction components: 1
[2025-10-28T18:47:59.079Z] [LOG] Creating components for record f5ceb591-6cfe-4522-b2bb-a51a147860c1: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:47:59.079Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 27709.1724
}
[2025-10-28T18:47:59.316Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:47:59.702Z] [LOG] Created payroll_record_component: 24dfa736-a0aa-4b4f-adee-0b5c8b1c20db for Base Salary
[2025-10-28T18:47:59.703Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 9214.667599999997
}
[2025-10-28T18:47:59.913Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:48:00.303Z] [LOG] Created payroll_record_component: 6d0cb6f0-0f7f-4d9d-84eb-600e4d8d9e3c for Attendance Shortfall (Info)
[2025-10-28T18:48:00.748Z] [LOG] ✅ Financial balances updated successfully for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-28T18:48:00.748Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:48:00.748Z] [LOG] 
======================================================================
[2025-10-28T18:48:00.749Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Maryam null
[2025-10-28T18:48:00.749Z] [LOG] ======================================================================
[2025-10-28T18:48:00.749Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-28T18:48:00.749Z] [LOG]    Actual Earned Base (Attendance-based): Rs.27709.17
[2025-10-28T18:48:00.750Z] [LOG]    Attendance Shortfall: Rs.9214.67
[2025-10-28T18:48:00.750Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:48:00.750Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:48:00.750Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:48:00.751Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:48:00.751Z] [LOG]    GROSS SALARY: Rs.27709.17
[2025-10-28T18:48:00.751Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:48:00.751Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:48:00.752Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:48:00.752Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:48:00.752Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:48:00.753Z] [LOG]       - Attendance Shortfall (Info): Rs.9214.67
[2025-10-28T18:48:00.753Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:48:00.753Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:48:00.754Z] [LOG]    NET SALARY: Rs.27709.17
[2025-10-28T18:48:00.754Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:48:00.754Z] [LOG] ======================================================================

[2025-10-28T18:48:00.754Z] [LOG] ✅ Maryam null: Calculation completed successfully
[2025-10-28T18:48:00.754Z] [LOG] 📊 Progress: 31/34 (91.2%)
[2025-10-28T18:48:00.755Z] [LOG] 
🧮 Processing: Uthpala null (EMP000006)
[2025-10-28T18:48:00.755Z] [LOG] 📋 Record ID: f69add6e-afdc-4135-88a5-2e0a8c4c3106
[2025-10-28T18:48:00.755Z] [LOG] 
======================================================================
[2025-10-28T18:48:00.755Z] [LOG] 🧮 CALCULATING PAYROLL: Uthpala null (EMP000006)
[2025-10-28T18:48:00.755Z] [LOG] ======================================================================
[2025-10-28T18:48:01.707Z] [LOG] 🔍 Component filtering for employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-28T18:48:01.708Z] [LOG]    Total components: 13
[2025-10-28T18:48:01.708Z] [LOG]    Applicable components: 13
[2025-10-28T18:48:01.708Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-28T18:48:02.668Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:48:02.668Z] [LOG] 🔄 Processing financial records for employee 0143a539-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:48:02.887Z] [LOG] 📊 Found 0 active loans for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-28T18:48:03.142Z] [LOG] 📊 Found 0 active advances for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-28T18:48:03.555Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-28T18:48:03.556Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:48:03.556Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:48:04.163Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:48:04.164Z] [LOG]    👤 Employee: Uthpala null (EMP000006)
[2025-10-28T18:48:04.164Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:48:04.164Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:48:04.164Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-28T18:48:04.165Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:48:04.428Z] [LOG] 
   💵 Pre-calculated Rates for Uthpala null (EMP000006):
[2025-10-28T18:48:04.428Z] [LOG]       Daily Salary: Rs.3846.15
[2025-10-28T18:48:04.428Z] [LOG]       Weekday Hourly Rate: Rs.480.77
[2025-10-28T18:48:04.428Z] [LOG]       Saturday Hourly Rate: Rs.854.70
[2025-10-28T18:48:04.429Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:48:04.429Z] [LOG] 
   📊 Full Period Working Days for Uthpala null (EMP000006):
[2025-10-28T18:48:04.429Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:48:05.147Z] [LOG] 
   📊 Working Days for Expected Calculation for Uthpala null (EMP000006):
[2025-10-28T18:48:05.148Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:48:05.148Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:48:05.388Z] [LOG] 
   ⏰ Calculating Completed Hours for Uthpala null (EMP000006) - All completed sessions:
[2025-10-28T18:48:05.388Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:48:05.388Z] [LOG]       Total completed sessions found: 15
[2025-10-28T18:48:05.389Z] [LOG] 
      📋 Attendance Breakdown for Uthpala null (EMP000006):
[2025-10-28T18:48:05.389Z] [LOG]          1. 2025-10-01 (Weekday): 7.33h
[2025-10-28T18:48:05.389Z] [LOG]          2. 2025-10-02 (Weekday): 6.50h
[2025-10-28T18:48:05.390Z] [LOG]          3. 2025-10-03 (Weekday): 6.50h
[2025-10-28T18:48:05.390Z] [LOG]          4. 2025-10-04 (Saturday): 2.41h
[2025-10-28T18:48:05.390Z] [LOG]          5. 2025-10-07 (Weekday): 4.50h
[2025-10-28T18:48:05.390Z] [LOG]          6. 2025-10-08 (Weekday): 6.00h
[2025-10-28T18:48:05.391Z] [LOG]          7. 2025-10-09 (Weekday): 7.00h
[2025-10-28T18:48:05.391Z] [LOG]          8. 2025-10-10 (Weekday): 6.54h
[2025-10-28T18:48:05.391Z] [LOG]          9. 2025-10-11 (Saturday): 2.42h
[2025-10-28T18:48:05.391Z] [LOG]          10. 2025-10-13 (Weekday): 7.00h
[2025-10-28T18:48:05.392Z] [LOG]          11. 2025-10-14 (Weekday): 7.50h
[2025-10-28T18:48:05.392Z] [LOG]          12. 2025-10-15 (Weekday): 6.08h
[2025-10-28T18:48:05.392Z] [LOG]          13. 2025-10-16 (Weekday): 5.91h
[2025-10-28T18:48:05.393Z] [LOG]          14. 2025-10-17 (Weekday): 7.48h
[2025-10-28T18:48:05.393Z] [LOG]          15. 2025-10-18 (Saturday): 3.36h
[2025-10-28T18:48:05.635Z] [LOG] 
      📊 Aggregated Totals for Uthpala null (EMP000006):
[2025-10-28T18:48:05.636Z] [LOG]          Weekday: 78.34h
[2025-10-28T18:48:05.636Z] [LOG]          Saturday: 8.19h
[2025-10-28T18:48:05.636Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:48:05.637Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:48:05.637Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Uthpala null (EMP000006) - completed sessions only:
[2025-10-28T18:48:05.637Z] [LOG]       Weekday: 160.00h
[2025-10-28T18:48:05.637Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:48:05.638Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:48:05.638Z] [LOG]       Total Expected: 178.00h
[2025-10-28T18:48:05.638Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Uthpala null (EMP000006) - completed sessions only:
[2025-10-28T18:48:05.639Z] [LOG]       Weekday: 78.34h
[2025-10-28T18:48:05.639Z] [LOG]       Saturday: 8.19h
[2025-10-28T18:48:05.639Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:48:05.639Z] [LOG]       Total Actual: 86.53h
[2025-10-28T18:48:05.640Z] [LOG] 
   💵 EXPECTED Earned Salary for Uthpala null (EMP000006) - until NOW:
[2025-10-28T18:48:05.640Z] [LOG]       Weekday: 160.00h × Rs.480.77 = Rs.76923.20
[2025-10-28T18:48:05.640Z] [LOG]       Saturday: 18.00h × Rs.854.70 = Rs.15384.60
[2025-10-28T18:48:05.641Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:48:05.641Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:48:05.641Z] [LOG]       Total Expected Earned: Rs.92307.80
[2025-10-28T18:48:05.642Z] [LOG] 
   💵 ACTUAL Earned Salary for Uthpala null (EMP000006) - including live session:
[2025-10-28T18:48:05.642Z] [LOG]       Weekday: 78.34h × Rs.480.77 = Rs.37663.52
[2025-10-28T18:48:05.642Z] [LOG]       Saturday: 8.19h × Rs.854.70 = Rs.6999.99
[2025-10-28T18:48:05.643Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:48:05.643Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:48:05.643Z] [LOG]       Total Actual Earned: Rs.44663.51
[2025-10-28T18:48:05.644Z] [LOG] 
   📊 FINAL CALCULATION for Uthpala null (EMP000006):
[2025-10-28T18:48:05.644Z] [LOG]       Calculated At: Oct 29, 2025, 24:18:05
[2025-10-28T18:48:05.645Z] [LOG]       Expected Earned: Rs.92307.80
[2025-10-28T18:48:05.645Z] [LOG]       Actual Earned: Rs.44663.51
[2025-10-28T18:48:05.645Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:48:05.645Z] [LOG]       Attendance Deduction: Rs.47644.29
[2025-10-28T18:48:05.646Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:48:05.646Z] [LOG]       📉 Shortfall for Uthpala null: 91.47 hours (51.61% of expected)
[2025-10-28T18:48:05.646Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:48:05.647Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-28T18:48:05.647Z] [LOG]    Actual Earned Base: Rs.44663.51
[2025-10-28T18:48:05.648Z] [LOG]    Attendance Shortfall: Rs.47644.29
[2025-10-28T18:48:05.648Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:48:05.648Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:48:05.649Z] [LOG]    Gross Salary: 44663.514800000004
[2025-10-28T18:48:05.649Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:48:05.649Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:48:05.650Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:05.650Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:48:05.650Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:05.651Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:48:05.651Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:05.651Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:48:05.651Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:05.652Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:48:05.652Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:05.652Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:48:05.653Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:05.653Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:48:05.653Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:05.654Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:48:05.654Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:05.654Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:48:05.655Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:05.655Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:48:05.655Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:05.655Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:48:05.655Z] [LOG]    EPF/ETF calculated on: Rs.44663.51
[2025-10-28T18:48:05.656Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:48:05.656Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:48:05.657Z] [LOG] 💰 GROSS CALCULATION for Uthpala null:
[2025-10-28T18:48:05.657Z] [LOG]    Base Salary: 100000
[2025-10-28T18:48:05.657Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:48:05.657Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:48:05.658Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:05.658Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:48:05.658Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:05.659Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:48:05.659Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:05.875Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:48:05.876Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:48:05.876Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:48:05.877Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:48:05.877Z] [LOG]    Actual Earned Base: Rs.44663.51
[2025-10-28T18:48:05.877Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:48:05.878Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:48:05.878Z] [LOG]    = Gross Salary: Rs.44663.51
[2025-10-28T18:48:05.878Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:48:05.879Z] [LOG]    Attendance Shortfall (Info): Rs.47644.29
[2025-10-28T18:48:05.879Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:48:05.879Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:48:05.879Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:48:05.880Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:48:05.880Z] [LOG]    Gross Salary: Rs.44663.51
[2025-10-28T18:48:05.880Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:48:05.881Z] [LOG]    = NET SALARY: Rs.44663.51
[2025-10-28T18:48:05.881Z] [LOG] 
💾 Database Update:
[2025-10-28T18:48:05.881Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:48:05.881Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:48:06.187Z] [LOG] 
📝 Components to save:
[2025-10-28T18:48:06.187Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:48:06.187Z] [LOG]    Deduction components: 1
[2025-10-28T18:48:06.188Z] [LOG] Creating components for record f69add6e-afdc-4135-88a5-2e0a8c4c3106: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:48:06.188Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 44663.514800000004
}
[2025-10-28T18:48:06.395Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:48:06.823Z] [LOG] Created payroll_record_component: d6cde42a-69e1-4edc-bc38-d0adea2b8749 for Base Salary
[2025-10-28T18:48:06.823Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 47644.2852
}
[2025-10-28T18:48:07.068Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:48:07.281Z] [LOG] Created payroll_record_component: 79a6d5d3-6ef7-48c1-bae7-35ad4991aeea for Attendance Shortfall (Info)
[2025-10-28T18:48:07.787Z] [LOG] ✅ Financial balances updated successfully for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-28T18:48:07.787Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:48:07.787Z] [LOG] 
======================================================================
[2025-10-28T18:48:07.788Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Uthpala null
[2025-10-28T18:48:07.788Z] [LOG] ======================================================================
[2025-10-28T18:48:07.788Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-28T18:48:07.789Z] [LOG]    Actual Earned Base (Attendance-based): Rs.44663.51
[2025-10-28T18:48:07.789Z] [LOG]    Attendance Shortfall: Rs.47644.29
[2025-10-28T18:48:07.789Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:48:07.789Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:48:07.790Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:48:07.790Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:48:07.790Z] [LOG]    GROSS SALARY: Rs.44663.51
[2025-10-28T18:48:07.791Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:48:07.791Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:48:07.791Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:48:07.791Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:48:07.792Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:48:07.792Z] [LOG]       - Attendance Shortfall (Info): Rs.47644.29
[2025-10-28T18:48:07.792Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:48:07.793Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:48:07.793Z] [LOG]    NET SALARY: Rs.44663.51
[2025-10-28T18:48:07.793Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:48:07.793Z] [LOG] ======================================================================

[2025-10-28T18:48:07.794Z] [LOG] ✅ Uthpala null: Calculation completed successfully
[2025-10-28T18:48:07.794Z] [LOG] 📊 Progress: 32/34 (94.1%)
[2025-10-28T18:48:07.794Z] [LOG] 
🧮 Processing: Piyumi null (EMP000025)
[2025-10-28T18:48:07.795Z] [LOG] 📋 Record ID: f93c2869-0491-4550-8db7-bcc0bd5fb69b
[2025-10-28T18:48:07.795Z] [LOG] 
======================================================================
[2025-10-28T18:48:07.795Z] [LOG] 🧮 CALCULATING PAYROLL: Piyumi null (EMP000025)
[2025-10-28T18:48:07.796Z] [LOG] ======================================================================
[2025-10-28T18:48:08.747Z] [LOG] 🔍 Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-28T18:48:08.748Z] [LOG]    Total components: 13
[2025-10-28T18:48:08.748Z] [LOG]    Applicable components: 13
[2025-10-28T18:48:08.748Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-28T18:48:09.665Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:48:09.666Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:48:09.955Z] [LOG] 📊 Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-28T18:48:10.197Z] [LOG] 📊 Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-28T18:48:10.428Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-28T18:48:10.429Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:48:10.429Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:48:10.909Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:48:10.910Z] [LOG]    👤 Employee: Piyumi null (EMP000025)
[2025-10-28T18:48:10.910Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:48:10.910Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:48:10.910Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-28T18:48:10.911Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:48:11.165Z] [LOG] 
   💵 Pre-calculated Rates for Piyumi null (EMP000025):
[2025-10-28T18:48:11.165Z] [LOG]       Daily Salary: Rs.1923.08
[2025-10-28T18:48:11.165Z] [LOG]       Weekday Hourly Rate: Rs.226.24
[2025-10-28T18:48:11.166Z] [LOG]       Saturday Hourly Rate: Rs.427.35
[2025-10-28T18:48:11.166Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:48:11.166Z] [LOG] 
   📊 Full Period Working Days for Piyumi null (EMP000025):
[2025-10-28T18:48:11.166Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:48:11.867Z] [LOG] 
   📊 Working Days for Expected Calculation for Piyumi null (EMP000025):
[2025-10-28T18:48:11.868Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:48:11.868Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:48:12.069Z] [LOG] 
   ⏰ Calculating Completed Hours for Piyumi null (EMP000025) - All completed sessions:
[2025-10-28T18:48:12.070Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:48:12.070Z] [LOG]       Total completed sessions found: 19
[2025-10-28T18:48:12.070Z] [LOG] 
      📋 Attendance Breakdown for Piyumi null (EMP000025):
[2025-10-28T18:48:12.071Z] [LOG]          1. 2025-10-01 (Weekday): 8.50h
[2025-10-28T18:48:12.071Z] [LOG]          2. 2025-10-02 (Weekday): 8.50h
[2025-10-28T18:48:12.071Z] [LOG]          3. 2025-10-03 (Weekday): 7.09h
[2025-10-28T18:48:12.071Z] [LOG]          4. 2025-10-04 (Saturday): 3.78h
[2025-10-28T18:48:12.072Z] [LOG]          5. 2025-10-07 (Weekday): 8.50h
[2025-10-28T18:48:12.072Z] [LOG]          6. 2025-10-08 (Weekday): 8.50h
[2025-10-28T18:48:12.072Z] [LOG]          7. 2025-10-09 (Weekday): 7.68h
[2025-10-28T18:48:12.073Z] [LOG]          8. 2025-10-10 (Weekday): 8.50h
[2025-10-28T18:48:12.073Z] [LOG]          9. 2025-10-11 (Saturday): 4.50h
[2025-10-28T18:48:12.073Z] [LOG]          10. 2025-10-13 (Weekday): 8.50h
[2025-10-28T18:48:12.073Z] [LOG]          11. 2025-10-14 (Weekday): 8.50h
[2025-10-28T18:48:12.074Z] [LOG]          12. 2025-10-16 (Weekday): 8.50h
[2025-10-28T18:48:12.074Z] [LOG]          13. 2025-10-17 (Weekday): 8.50h
[2025-10-28T18:48:12.074Z] [LOG]          14. 2025-10-18 (Saturday): 3.26h
[2025-10-28T18:48:12.074Z] [LOG]          15. 2025-10-20 (Weekday): 8.50h
[2025-10-28T18:48:12.075Z] [LOG]          16. 2025-10-21 (Weekday): 8.50h
[2025-10-28T18:48:12.075Z] [LOG]          17. 2025-10-22 (Weekday): 8.50h
[2025-10-28T18:48:12.075Z] [LOG]          18. 2025-10-23 (Weekday): 8.50h
[2025-10-28T18:48:12.076Z] [LOG]          19. 2025-10-24 (Weekday): 8.50h
[2025-10-28T18:48:12.463Z] [LOG] 
      📊 Aggregated Totals for Piyumi null (EMP000025):
[2025-10-28T18:48:12.464Z] [LOG]          Weekday: 133.77h
[2025-10-28T18:48:12.464Z] [LOG]          Saturday: 11.54h
[2025-10-28T18:48:12.464Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:48:12.465Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:48:12.465Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Piyumi null (EMP000025) - completed sessions only:
[2025-10-28T18:48:12.465Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:48:12.466Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:48:12.466Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:48:12.466Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:48:12.466Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Piyumi null (EMP000025) - completed sessions only:
[2025-10-28T18:48:12.467Z] [LOG]       Weekday: 133.77h
[2025-10-28T18:48:12.467Z] [LOG]       Saturday: 11.54h
[2025-10-28T18:48:12.467Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:48:12.468Z] [LOG]       Total Actual: 145.31h
[2025-10-28T18:48:12.468Z] [LOG] 
   💵 EXPECTED Earned Salary for Piyumi null (EMP000025) - until NOW:
[2025-10-28T18:48:12.468Z] [LOG]       Weekday: 170.00h × Rs.226.24 = Rs.38460.80
[2025-10-28T18:48:12.468Z] [LOG]       Saturday: 18.00h × Rs.427.35 = Rs.7692.30
[2025-10-28T18:48:12.469Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:48:12.469Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:48:12.470Z] [LOG]       Total Expected Earned: Rs.46153.10
[2025-10-28T18:48:12.470Z] [LOG] 
   💵 ACTUAL Earned Salary for Piyumi null (EMP000025) - including live session:
[2025-10-28T18:48:12.470Z] [LOG]       Weekday: 133.77h × Rs.226.24 = Rs.30264.12
[2025-10-28T18:48:12.470Z] [LOG]       Saturday: 11.54h × Rs.427.35 = Rs.4931.62
[2025-10-28T18:48:12.471Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:48:12.471Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:48:12.471Z] [LOG]       Total Actual Earned: Rs.35195.74
[2025-10-28T18:48:12.472Z] [LOG] 
   📊 FINAL CALCULATION for Piyumi null (EMP000025):
[2025-10-28T18:48:12.473Z] [LOG]       Calculated At: Oct 29, 2025, 24:18:12
[2025-10-28T18:48:12.473Z] [LOG]       Expected Earned: Rs.46153.10
[2025-10-28T18:48:12.473Z] [LOG]       Actual Earned: Rs.35195.74
[2025-10-28T18:48:12.473Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:48:12.474Z] [LOG]       Attendance Deduction: Rs.10957.36
[2025-10-28T18:48:12.474Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:48:12.474Z] [LOG]       📉 Shortfall for Piyumi null: 42.69 hours (23.74% of expected)
[2025-10-28T18:48:12.474Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:48:12.475Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:48:12.475Z] [LOG]    Actual Earned Base: Rs.35195.74
[2025-10-28T18:48:12.476Z] [LOG]    Attendance Shortfall: Rs.10957.36
[2025-10-28T18:48:12.476Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:48:12.476Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:48:12.476Z] [LOG]    Gross Salary: 35195.743800000004
[2025-10-28T18:48:12.477Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:48:12.477Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:48:12.478Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:12.478Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:48:12.478Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:12.478Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:48:12.478Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:12.478Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:48:12.479Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:12.479Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:48:12.479Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:12.479Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:48:12.480Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:12.480Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:48:12.480Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:12.480Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:48:12.481Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:12.481Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:48:12.481Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:12.482Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:48:12.482Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:12.482Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:48:12.482Z] [LOG]    EPF/ETF calculated on: Rs.35195.74
[2025-10-28T18:48:12.482Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:48:12.482Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:48:12.483Z] [LOG] 💰 GROSS CALCULATION for Piyumi null:
[2025-10-28T18:48:12.483Z] [LOG]    Base Salary: 50000
[2025-10-28T18:48:12.483Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:48:12.484Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:48:12.484Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:12.484Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:48:12.484Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:12.485Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:48:12.485Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:12.891Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:48:12.892Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:48:12.892Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:48:12.893Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:48:12.893Z] [LOG]    Actual Earned Base: Rs.35195.74
[2025-10-28T18:48:12.893Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:48:12.893Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:48:12.894Z] [LOG]    = Gross Salary: Rs.35195.74
[2025-10-28T18:48:12.894Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:48:12.894Z] [LOG]    Attendance Shortfall (Info): Rs.10957.36
[2025-10-28T18:48:12.894Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:48:12.895Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:48:12.895Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:48:12.895Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:48:12.896Z] [LOG]    Gross Salary: Rs.35195.74
[2025-10-28T18:48:12.896Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:48:12.896Z] [LOG]    = NET SALARY: Rs.35195.74
[2025-10-28T18:48:12.897Z] [LOG] 
💾 Database Update:
[2025-10-28T18:48:12.897Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:48:12.897Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:48:13.109Z] [LOG] 
📝 Components to save:
[2025-10-28T18:48:13.109Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:48:13.109Z] [LOG]    Deduction components: 1
[2025-10-28T18:48:13.110Z] [LOG] Creating components for record f93c2869-0491-4550-8db7-bcc0bd5fb69b: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:48:13.110Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 35195.743800000004
}
[2025-10-28T18:48:13.323Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:48:13.548Z] [LOG] Created payroll_record_component: 4eef0f58-c36a-4059-bc17-6879e4c0aa14 for Base Salary
[2025-10-28T18:48:13.548Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 10957.356200000002
}
[2025-10-28T18:48:13.787Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:48:14.027Z] [LOG] Created payroll_record_component: 73be72f0-5e49-412d-abd7-e9fc8e28ea64 for Attendance Shortfall (Info)
[2025-10-28T18:48:14.507Z] [LOG] ✅ Financial balances updated successfully for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-28T18:48:14.507Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:48:14.508Z] [LOG] 
======================================================================
[2025-10-28T18:48:14.508Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Piyumi null
[2025-10-28T18:48:14.508Z] [LOG] ======================================================================
[2025-10-28T18:48:14.509Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-28T18:48:14.509Z] [LOG]    Actual Earned Base (Attendance-based): Rs.35195.74
[2025-10-28T18:48:14.509Z] [LOG]    Attendance Shortfall: Rs.10957.36
[2025-10-28T18:48:14.510Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:48:14.510Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:48:14.511Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:48:14.511Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:48:14.511Z] [LOG]    GROSS SALARY: Rs.35195.74
[2025-10-28T18:48:14.511Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:48:14.512Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:48:14.512Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:48:14.512Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:48:14.513Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:48:14.513Z] [LOG]       - Attendance Shortfall (Info): Rs.10957.36
[2025-10-28T18:48:14.513Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:48:14.513Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:48:14.513Z] [LOG]    NET SALARY: Rs.35195.74
[2025-10-28T18:48:14.513Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:48:14.514Z] [LOG] ======================================================================

[2025-10-28T18:48:14.514Z] [LOG] ✅ Piyumi null: Calculation completed successfully
[2025-10-28T18:48:14.514Z] [LOG] 📊 Progress: 33/34 (97.1%)
[2025-10-28T18:48:14.514Z] [LOG] 
🧮 Processing: Ratheeshanan null (EMP000047)
[2025-10-28T18:48:14.514Z] [LOG] 📋 Record ID: ffd274e2-5252-4f66-8b7e-77d8898d9668
[2025-10-28T18:48:14.515Z] [LOG] 
======================================================================
[2025-10-28T18:48:14.515Z] [LOG] 🧮 CALCULATING PAYROLL: Ratheeshanan null (EMP000047)
[2025-10-28T18:48:14.515Z] [LOG] ======================================================================
[2025-10-28T18:48:15.467Z] [LOG] 🔍 Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-28T18:48:15.468Z] [LOG]    Total components: 13
[2025-10-28T18:48:15.468Z] [LOG]    Applicable components: 13
[2025-10-28T18:48:15.468Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-28T18:48:16.587Z] [LOG] 
🔄 Processing financial records...
[2025-10-28T18:48:16.588Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-28T18:48:16.835Z] [LOG] 📊 Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-28T18:48:17.075Z] [LOG] 📊 Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-28T18:48:17.387Z] [LOG] 📊 Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-28T18:48:17.388Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-28T18:48:17.388Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-28T18:48:17.876Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (FINAL CALCULATION - Completed sessions only)
[2025-10-28T18:48:17.877Z] [LOG]    👤 Employee: Ratheeshanan null (EMP000047)
[2025-10-28T18:48:17.877Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-28T18:48:17.877Z] [LOG]    📅 Calculation Until: 2025-10-28 (PARTIAL - Until Today)
[2025-10-28T18:48:17.877Z] [LOG]    Base Salary (Full Month): Rs.25000.00
[2025-10-28T18:48:17.877Z] [LOG]    Mode: ✅ FINAL (completed sessions only)
[2025-10-28T18:48:18.104Z] [LOG] 
   💵 Pre-calculated Rates for Ratheeshanan null (EMP000047):
[2025-10-28T18:48:18.105Z] [LOG]       Daily Salary: Rs.961.54
[2025-10-28T18:48:18.105Z] [LOG]       Weekday Hourly Rate: Rs.113.12
[2025-10-28T18:48:18.105Z] [LOG]       Saturday Hourly Rate: Rs.213.68
[2025-10-28T18:48:18.105Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-28T18:48:18.105Z] [LOG] 
   📊 Full Period Working Days for Ratheeshanan null (EMP000047):
[2025-10-28T18:48:18.105Z] [LOG]       Weekdays: 22, Saturdays: 4, Sundays: 0
[2025-10-28T18:48:18.927Z] [LOG] 
   📊 Working Days for Expected Calculation for Ratheeshanan null (EMP000047):
[2025-10-28T18:48:18.928Z] [LOG]       Up to: 2025-10-29 (including today)
[2025-10-28T18:48:18.928Z] [LOG]       Weekdays: 20, Saturdays: 4, Sundays: 0
[2025-10-28T18:48:19.159Z] [LOG] 
   ⏰ Calculating Completed Hours for Ratheeshanan null (EMP000047) - All completed sessions:
[2025-10-28T18:48:19.160Z] [LOG]       Period: 2025-10-01 to 2025-10-28
[2025-10-28T18:48:19.160Z] [LOG]       Total completed sessions found: 18
[2025-10-28T18:48:19.161Z] [LOG] 
      📋 Attendance Breakdown for Ratheeshanan null (EMP000047):
[2025-10-28T18:48:19.161Z] [LOG]          1. 2025-10-01 (Weekday): 7.88h
[2025-10-28T18:48:19.161Z] [LOG]          2. 2025-10-02 (Weekday): 8.25h
[2025-10-28T18:48:19.162Z] [LOG]          3. 2025-10-03 (Weekday): 8.08h
[2025-10-28T18:48:19.162Z] [LOG]          4. 2025-10-04 (Saturday): 4.50h
[2025-10-28T18:48:19.163Z] [LOG]          5. 2025-10-07 (Weekday): 7.72h
[2025-10-28T18:48:19.163Z] [LOG]          6. 2025-10-08 (Weekday): 8.50h
[2025-10-28T18:48:19.163Z] [LOG]          7. 2025-10-09 (Weekday): 8.50h
[2025-10-28T18:48:19.163Z] [LOG]          8. 2025-10-10 (Weekday): 8.50h
[2025-10-28T18:48:19.163Z] [LOG]          9. 2025-10-11 (Saturday): 4.50h
[2025-10-28T18:48:19.164Z] [LOG]          10. 2025-10-13 (Weekday): 7.78h
[2025-10-28T18:48:19.164Z] [LOG]          11. 2025-10-14 (Weekday): 8.50h
[2025-10-28T18:48:19.164Z] [LOG]          12. 2025-10-16 (Weekday): 8.50h
[2025-10-28T18:48:19.164Z] [LOG]          13. 2025-10-17 (Weekday): 6.30h
[2025-10-28T18:48:19.165Z] [LOG]          14. 2025-10-18 (Saturday): 4.50h
[2025-10-28T18:48:19.165Z] [LOG]          15. 2025-10-21 (Weekday): 8.50h
[2025-10-28T18:48:19.165Z] [LOG]          16. 2025-10-22 (Weekday): 8.42h
[2025-10-28T18:48:19.166Z] [LOG]          17. 2025-10-23 (Weekday): 8.50h
[2025-10-28T18:48:19.166Z] [LOG]          18. 2025-10-24 (Weekday): 8.50h
[2025-10-28T18:48:19.382Z] [LOG] 
      📊 Aggregated Totals for Ratheeshanan null (EMP000047):
[2025-10-28T18:48:19.382Z] [LOG]          Weekday: 122.43h
[2025-10-28T18:48:19.383Z] [LOG]          Saturday: 13.50h
[2025-10-28T18:48:19.383Z] [LOG]          Sunday: 0.00h
[2025-10-28T18:48:19.383Z] [LOG] 
   ⏰ Live session calculation SKIPPED (final calculation mode)
[2025-10-28T18:48:19.383Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours for Ratheeshanan null (EMP000047) - completed sessions only:
[2025-10-28T18:48:19.384Z] [LOG]       Weekday: 170.00h
[2025-10-28T18:48:19.384Z] [LOG]       Saturday: 18.00h
[2025-10-28T18:48:19.384Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:48:19.384Z] [LOG]       Total Expected: 188.00h
[2025-10-28T18:48:19.385Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours for Ratheeshanan null (EMP000047) - completed sessions only:
[2025-10-28T18:48:19.385Z] [LOG]       Weekday: 122.43h
[2025-10-28T18:48:19.385Z] [LOG]       Saturday: 13.50h
[2025-10-28T18:48:19.386Z] [LOG]       Sunday: 0.00h
[2025-10-28T18:48:19.386Z] [LOG]       Total Actual: 135.93h
[2025-10-28T18:48:19.386Z] [LOG] 
   💵 EXPECTED Earned Salary for Ratheeshanan null (EMP000047) - until NOW:
[2025-10-28T18:48:19.386Z] [LOG]       Weekday: 170.00h × Rs.113.12 = Rs.19230.40
[2025-10-28T18:48:19.387Z] [LOG]       Saturday: 18.00h × Rs.213.68 = Rs.3846.24
[2025-10-28T18:48:19.387Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:48:19.387Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:48:19.387Z] [LOG]       Total Expected Earned: Rs.23076.64
[2025-10-28T18:48:19.388Z] [LOG] 
   💵 ACTUAL Earned Salary for Ratheeshanan null (EMP000047) - including live session:
[2025-10-28T18:48:19.388Z] [LOG]       Weekday: 122.43h × Rs.113.12 = Rs.13849.28
[2025-10-28T18:48:19.388Z] [LOG]       Saturday: 13.50h × Rs.213.68 = Rs.2884.68
[2025-10-28T18:48:19.388Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-28T18:48:19.388Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:48:19.388Z] [LOG]       Total Actual Earned: Rs.16733.96
[2025-10-28T18:48:19.389Z] [LOG] 
   📊 FINAL CALCULATION for Ratheeshanan null (EMP000047):
[2025-10-28T18:48:19.390Z] [LOG]       Calculated At: Oct 29, 2025, 24:18:19
[2025-10-28T18:48:19.390Z] [LOG]       Expected Earned: Rs.23076.64
[2025-10-28T18:48:19.390Z] [LOG]       Actual Earned: Rs.16733.96
[2025-10-28T18:48:19.390Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-28T18:48:19.391Z] [LOG]       Attendance Deduction: Rs.6342.68
[2025-10-28T18:48:19.391Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-28T18:48:19.391Z] [LOG]       📉 Shortfall for Ratheeshanan null: 52.07 hours (27.49% of expected)
[2025-10-28T18:48:19.391Z] [LOG] 
   ✅ FINAL MODE: Only completed sessions counted (today's ongoing session excluded).
[2025-10-28T18:48:19.392Z] [LOG]    Base Salary (Full): Rs.25000.00
[2025-10-28T18:48:19.392Z] [LOG]    Actual Earned Base: Rs.16733.96
[2025-10-28T18:48:19.392Z] [LOG]    Attendance Shortfall: Rs.6342.68
[2025-10-28T18:48:19.392Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-28T18:48:19.393Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-28T18:48:19.393Z] [LOG]    Gross Salary: 16733.961600000002
[2025-10-28T18:48:19.393Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-28T18:48:19.394Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-28T18:48:19.394Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:19.394Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-28T18:48:19.394Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:19.395Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-28T18:48:19.395Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:19.395Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-28T18:48:19.396Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:19.396Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-28T18:48:19.396Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:19.396Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-28T18:48:19.396Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:19.396Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-28T18:48:19.396Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:19.397Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-28T18:48:19.397Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:19.397Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-28T18:48:19.397Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:19.397Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-28T18:48:19.397Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:19.397Z] [LOG]    📊 Total Deductions: 0
[2025-10-28T18:48:19.397Z] [LOG]    EPF/ETF calculated on: Rs.16733.96
[2025-10-28T18:48:19.398Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-28T18:48:19.398Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-28T18:48:19.398Z] [LOG] 💰 GROSS CALCULATION for Ratheeshanan null:
[2025-10-28T18:48:19.398Z] [LOG]    Base Salary: 25000
[2025-10-28T18:48:19.398Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-28T18:48:19.398Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-28T18:48:19.398Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:19.399Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-28T18:48:19.399Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:19.399Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-28T18:48:19.399Z] [LOG]    Fixed amount: 0
[2025-10-28T18:48:19.844Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-28T18:48:19.844Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:48:19.845Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-28T18:48:19.845Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-28T18:48:19.845Z] [LOG]    Actual Earned Base: Rs.16733.96
[2025-10-28T18:48:19.846Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-28T18:48:19.846Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-28T18:48:19.846Z] [LOG]    = Gross Salary: Rs.16733.96
[2025-10-28T18:48:19.846Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-28T18:48:19.846Z] [LOG]    Attendance Shortfall (Info): Rs.6342.68
[2025-10-28T18:48:19.847Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-28T18:48:19.847Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-28T18:48:19.847Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-28T18:48:19.848Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-28T18:48:19.848Z] [LOG]    Gross Salary: Rs.16733.96
[2025-10-28T18:48:19.848Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-28T18:48:19.848Z] [LOG]    = NET SALARY: Rs.16733.96
[2025-10-28T18:48:19.848Z] [LOG] 
💾 Database Update:
[2025-10-28T18:48:19.848Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-28T18:48:19.849Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-28T18:48:20.107Z] [LOG] 
📝 Components to save:
[2025-10-28T18:48:20.107Z] [LOG]    Gross/Earnings components: 1
[2025-10-28T18:48:20.108Z] [LOG]    Deduction components: 1
[2025-10-28T18:48:20.108Z] [LOG] Creating components for record ffd274e2-5252-4f66-8b7e-77d8898d9668: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-28T18:48:20.108Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 16733.961600000002
}
[2025-10-28T18:48:20.551Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-28T18:48:20.765Z] [LOG] Created payroll_record_component: 0c468073-fd6b-4365-81d0-5d849c069176 for Base Salary
[2025-10-28T18:48:20.765Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 6342.678400000001
}
[2025-10-28T18:48:20.954Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-28T18:48:21.227Z] [LOG] Created payroll_record_component: 12069366-31f4-4001-8de0-263d46c7f784 for Attendance Shortfall (Info)
[2025-10-28T18:48:21.707Z] [LOG] ✅ Financial balances updated successfully for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-28T18:48:21.707Z] [LOG] ✅ Financial balances updated successfully
[2025-10-28T18:48:21.708Z] [LOG] 
======================================================================
[2025-10-28T18:48:21.708Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ratheeshanan null
[2025-10-28T18:48:21.708Z] [LOG] ======================================================================
[2025-10-28T18:48:21.708Z] [LOG]    Base Salary (Full): Rs.25000.00
[2025-10-28T18:48:21.708Z] [LOG]    Actual Earned Base (Attendance-based): Rs.16733.96
[2025-10-28T18:48:21.709Z] [LOG]    Attendance Shortfall: Rs.6342.68
[2025-10-28T18:48:21.709Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:48:21.709Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-28T18:48:21.709Z] [LOG]    Bonuses: Rs.0.00
[2025-10-28T18:48:21.709Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:48:21.709Z] [LOG]    GROSS SALARY: Rs.16733.96
[2025-10-28T18:48:21.710Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:48:21.710Z] [LOG]    Deductions Breakdown:
[2025-10-28T18:48:21.710Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-28T18:48:21.710Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-28T18:48:21.710Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-28T18:48:21.711Z] [LOG]       - Attendance Shortfall (Info): Rs.6342.68
[2025-10-28T18:48:21.711Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-28T18:48:21.711Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-28T18:48:21.711Z] [LOG]    NET SALARY: Rs.16733.96
[2025-10-28T18:48:21.711Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-28T18:48:21.711Z] [LOG] ======================================================================

[2025-10-28T18:48:21.712Z] [LOG] ✅ Ratheeshanan null: Calculation completed successfully
[2025-10-28T18:48:21.712Z] [LOG] 📊 Progress: 34/34 (100.0%)
[2025-10-28T18:48:21.712Z] [LOG] 
============================================================
[2025-10-28T18:48:21.712Z] [LOG] 📈 Processing Summary: 34 successful, 0 failed
[2025-10-28T18:48:23.620Z] [LOG] 🎉 Payroll calculation completed successfully!
[2025-10-28T18:48:23.620Z] [LOG] 📊 Final Summary: 34 processed, 0 errors
[2025-10-28T18:48:23.621Z] [INFO] ================================================================================
[2025-10-28T18:48:23.621Z] [INFO] ⏰ Completed at: 2025-10-28T18:48:23.621Z
[2025-10-28T18:48:23.621Z] [INFO] 📊 Total log entries: 5774