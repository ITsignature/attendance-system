[2025-10-22T08:05:29.415Z] [INFO] 🚀 Payroll calculation logging started for run: 9cfaed65-3437-4021-a0c5-74112d7ea8d3
[2025-10-22T08:05:29.415Z] [INFO] 📁 Log file: D:\attendance-system\BackEnd\logs\payroll-run-9cfaed65-3437-4021-a0c5-74112d7ea8d3-2025-10-22T08-05-29-415Z.txt
[2025-10-22T08:05:29.415Z] [INFO] ⏰ Started at: 2025-10-22T08:05:29.415Z
[2025-10-22T08:05:29.415Z] [INFO] ================================================================================
[2025-10-22T08:05:29.415Z] [LOG] 🚀 Starting payroll calculation for run: 9cfaed65-3437-4021-a0c5-74112d7ea8d3
[2025-10-22T08:05:29.416Z] [LOG] 👤 Client ID: it-signature, User ID: 059304ea-24a5-4d78-a290-cf09b9e53c4c
[2025-10-22T08:05:29.999Z] [LOG] ✅ Payroll run verified: October (MONTHLY_2025_10_REGULAR)
[2025-10-22T08:05:30.359Z] [LOG] 📊 Status updated to 'calculating'
[2025-10-22T08:05:30.953Z] [LOG] 👥 Processing 34 employee records:
[2025-10-22T08:05:30.954Z] [LOG] ============================================================
[2025-10-22T08:05:30.954Z] [LOG] 
🧮 Processing: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-22T08:05:30.955Z] [LOG] 📋 Record ID: 0b18362a-c9c5-41a0-a72b-94969e110f52
[2025-10-22T08:05:30.957Z] [LOG] 
======================================================================
[2025-10-22T08:05:30.958Z] [LOG] 🧮 CALCULATING PAYROLL: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-22T08:05:30.959Z] [LOG] ======================================================================
[2025-10-22T08:05:32.409Z] [LOG] 🔍 Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-22T08:05:32.409Z] [LOG]    Total components: 10
[2025-10-22T08:05:32.410Z] [LOG]    Applicable components: 10
[2025-10-22T08:05:32.411Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T08:05:33.904Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:05:33.905Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:05:34.266Z] [LOG] 📊 Found 0 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:34.628Z] [LOG] 📊 Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:34.987Z] [LOG] 📊 Found 0 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:34.989Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:05:34.991Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:05:34.993Z] [LOG] 💰 GROSS CALCULATION for Ashen Nirmal Wadugodapitiya null:
[2025-10-22T08:05:34.994Z] [LOG]    Base Salary: 50000
[2025-10-22T08:05:34.994Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:05:34.995Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:05:34.996Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:35.426Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:05:35.808Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:05:35.808Z] [LOG]    Employee ID: 0144461e-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:35.809Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:05:35.810Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:05:35.810Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T08:05:36.171Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:05:36.172Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T08:05:36.172Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T08:05:36.173Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T08:05:36.173Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:05:36.173Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:05:36.174Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:05:37.248Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:05:37.249Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:05:37.630Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:05:37.631Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:05:37.631Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:05:37.631Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:05:37.992Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:05:37.992Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:05:37.993Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:05:37.993Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:05:37.993Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:05:37.994Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:05:37.994Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:05:37.994Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:05:37.995Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:05:37.995Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:05:37.995Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:05:37.996Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T08:05:37.996Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T08:05:37.996Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:05:37.996Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:05:37.997Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T08:05:37.997Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:05:37.997Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T08:05:37.998Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T08:05:37.998Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:05:37.998Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:05:37.999Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T08:05:37.999Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:05:38.000Z] [LOG]       Calculated At: Oct 22, 2025, 13:35:37
[2025-10-22T08:05:38.000Z] [LOG]       Expected Earned (until NOW): Rs.31999.44
[2025-10-22T08:05:38.000Z] [LOG]       Actual Earned (until NOW): Rs.3999.93
[2025-10-22T08:05:38.000Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:05:38.001Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T08:05:38.001Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:05:38.001Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:05:38.002Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:05:38.003Z] [LOG]    Gross Salary: 50000
[2025-10-22T08:05:38.003Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:05:38.003Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:05:38.004Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:38.005Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:05:38.005Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:38.006Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:05:38.006Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:38.006Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:05:38.006Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:38.007Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:05:38.007Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:38.007Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:05:38.007Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:38.008Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:05:38.008Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:38.008Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:05:38.009Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:38.009Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:05:38.009Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:38.010Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:05:38.010Z] [LOG] Regular deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:05:38.011Z] [LOG] Combined deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:35:37)"
    }
  ],
  "total": 27999.51
}
[2025-10-22T08:05:38.371Z] [LOG] Creating components for record 0b18362a-c9c5-41a0-a72b-94969e110f52: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:05:38.373Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T08:05:38.804Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:05:39.188Z] [LOG] Created payroll_record_component: 322bd1b7-1f40-4008-8615-45cd156db0a4 for Attendance Deduction
[2025-10-22T08:05:39.556Z] [LOG] ✅ Financial balances updated successfully for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:39.557Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:05:39.557Z] [LOG] 
======================================================================
[2025-10-22T08:05:39.559Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ashen Nirmal Wadugodapitiya null
[2025-10-22T08:05:39.559Z] [LOG] ======================================================================
[2025-10-22T08:05:39.560Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T08:05:39.561Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T08:05:39.561Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T08:05:39.562Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:05:39.563Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:05:39.564Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:05:39.564Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T08:05:39.565Z] [LOG] ======================================================================

[2025-10-22T08:05:39.566Z] [LOG] ✅ Ashen Nirmal Wadugodapitiya null: Calculation completed successfully
[2025-10-22T08:05:39.566Z] [LOG] 📊 Progress: 1/34 (2.9%)
[2025-10-22T08:05:39.567Z] [LOG] 
🧮 Processing: Dharshika null (EMP000009)
[2025-10-22T08:05:39.568Z] [LOG] 📋 Record ID: 0bd56a3f-f47e-4744-bc9e-f39b5dbdf37c
[2025-10-22T08:05:39.569Z] [LOG] 
======================================================================
[2025-10-22T08:05:39.569Z] [LOG] 🧮 CALCULATING PAYROLL: Dharshika null (EMP000009)
[2025-10-22T08:05:39.570Z] [LOG] ======================================================================
[2025-10-22T08:05:40.387Z] [LOG] 🔍 Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-22T08:05:40.387Z] [LOG]    Total components: 10
[2025-10-22T08:05:40.388Z] [LOG]    Applicable components: 10
[2025-10-22T08:05:40.389Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T08:05:41.133Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:05:41.134Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:05:41.320Z] [LOG] 📊 Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:41.500Z] [LOG] 📊 Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:41.676Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:41.676Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:05:41.678Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:05:41.679Z] [LOG] 💰 GROSS CALCULATION for Dharshika null:
[2025-10-22T08:05:41.679Z] [LOG]    Base Salary: 100000
[2025-10-22T08:05:41.680Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:05:41.680Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:05:41.681Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:41.863Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:05:42.047Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:05:42.048Z] [LOG]    Employee ID: 0143a994-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:42.049Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:05:42.049Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:05:42.050Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-22T08:05:42.229Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:05:42.230Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-22T08:05:42.231Z] [LOG]       Weekday Hourly Rate: Rs.470.59
[2025-10-22T08:05:42.232Z] [LOG]       Saturday Hourly Rate: Rs.470.59
[2025-10-22T08:05:42.232Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:05:42.233Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:05:42.234Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:05:42.777Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:05:42.778Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:05:42.959Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:05:42.960Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:05:42.960Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:05:42.961Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:05:43.139Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:05:43.140Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:05:43.140Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:05:43.141Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:05:43.142Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:05:43.144Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:05:43.145Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:05:43.146Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:05:43.147Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:05:43.148Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:05:43.148Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:05:43.149Z] [LOG]       Weekday: 110.50h × Rs.470.59 = Rs.52000.19
[2025-10-22T08:05:43.150Z] [LOG]       Saturday: 25.50h × Rs.470.59 = Rs.12000.05
[2025-10-22T08:05:43.150Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:05:43.151Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:05:43.152Z] [LOG]       Total Expected Earned: Rs.64000.24
[2025-10-22T08:05:43.152Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:05:43.153Z] [LOG]       Weekday: 17.00h × Rs.470.59 = Rs.8000.03
[2025-10-22T08:05:43.154Z] [LOG]       Saturday: 0.00h × Rs.470.59 = Rs.0.00
[2025-10-22T08:05:43.155Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:05:43.156Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:05:43.156Z] [LOG]       Total Actual Earned: Rs.8000.03
[2025-10-22T08:05:43.158Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:05:43.158Z] [LOG]       Calculated At: Oct 22, 2025, 13:35:43
[2025-10-22T08:05:43.159Z] [LOG]       Expected Earned (until NOW): Rs.64000.24
[2025-10-22T08:05:43.159Z] [LOG]       Actual Earned (until NOW): Rs.8000.03
[2025-10-22T08:05:43.160Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:05:43.160Z] [LOG]       Attendance Deduction: Rs.56000.21
[2025-10-22T08:05:43.161Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:05:43.161Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:05:43.161Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:05:43.162Z] [LOG]    Gross Salary: 100000
[2025-10-22T08:05:43.162Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:05:43.162Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:05:43.163Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:43.163Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:05:43.163Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:43.164Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:05:43.164Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:43.164Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:05:43.165Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:43.165Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:05:43.165Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:43.166Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:05:43.166Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:43.166Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:05:43.167Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:43.167Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:05:43.168Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:43.168Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:05:43.168Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:43.169Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:05:43.169Z] [LOG] Regular deductions for Dharshika null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:05:43.170Z] [LOG] Combined deductions for Dharshika null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 56000.21,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:35:43)"
    }
  ],
  "total": 56000.21
}
[2025-10-22T08:05:43.349Z] [LOG] Creating components for record 0bd56a3f-f47e-4744-bc9e-f39b5dbdf37c: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:05:43.351Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 56000.21
}
[2025-10-22T08:05:43.537Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:05:43.721Z] [LOG] Created payroll_record_component: b126bec1-6ca5-4c1a-923f-9d58f24e8119 for Attendance Deduction
[2025-10-22T08:05:44.078Z] [LOG] ✅ Financial balances updated successfully for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:44.078Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:05:44.079Z] [LOG] 
======================================================================
[2025-10-22T08:05:44.080Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Dharshika null
[2025-10-22T08:05:44.080Z] [LOG] ======================================================================
[2025-10-22T08:05:44.081Z] [LOG]    Gross Salary: Rs.100000.00
[2025-10-22T08:05:44.082Z] [LOG]    Total Deductions: Rs.56000.21
[2025-10-22T08:05:44.082Z] [LOG]       - Attendance Deduction: Rs.56000.21
[2025-10-22T08:05:44.083Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:05:44.084Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:05:44.084Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:05:44.085Z] [LOG]    NET SALARY: Rs.43999.79
[2025-10-22T08:05:44.086Z] [LOG] ======================================================================

[2025-10-22T08:05:44.087Z] [LOG] ✅ Dharshika null: Calculation completed successfully
[2025-10-22T08:05:44.088Z] [LOG] 📊 Progress: 2/34 (5.9%)
[2025-10-22T08:05:44.088Z] [LOG] 
🧮 Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-22T08:05:44.089Z] [LOG] 📋 Record ID: 0d39b3ea-249d-4690-9f1e-0fc62343db34
[2025-10-22T08:05:44.090Z] [LOG] 
======================================================================
[2025-10-22T08:05:44.091Z] [LOG] 🧮 CALCULATING PAYROLL: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-22T08:05:44.092Z] [LOG] ======================================================================
[2025-10-22T08:05:44.798Z] [LOG] 🔍 Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-22T08:05:44.799Z] [LOG]    Total components: 10
[2025-10-22T08:05:44.799Z] [LOG]    Applicable components: 10
[2025-10-22T08:05:44.800Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-22T08:05:45.506Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:05:45.507Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:05:45.721Z] [LOG] 📊 Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:45.945Z] [LOG] 📊 Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:46.139Z] [LOG] 📊 Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:46.140Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:05:46.140Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:05:46.141Z] [LOG] 💰 GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-22T08:05:46.141Z] [LOG]    Base Salary: 50000
[2025-10-22T08:05:46.141Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:05:46.142Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:05:46.142Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:46.318Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:05:46.496Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:05:46.496Z] [LOG]    Employee ID: 0144315c-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:46.497Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:05:46.497Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:05:46.498Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T08:05:46.677Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:05:46.678Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T08:05:46.679Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T08:05:46.679Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T08:05:46.680Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:05:46.680Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:05:46.681Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:05:47.219Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:05:47.220Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:05:47.406Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:05:47.407Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:05:47.407Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:05:47.408Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:05:47.588Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:05:47.589Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:05:47.589Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:05:47.590Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:05:47.590Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:05:47.591Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:05:47.592Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:05:47.592Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:05:47.593Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:05:47.594Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:05:47.595Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:05:47.596Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T08:05:47.597Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T08:05:47.597Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:05:47.598Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:05:47.599Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T08:05:47.599Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:05:47.600Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T08:05:47.601Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T08:05:47.602Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:05:47.602Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:05:47.603Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T08:05:47.605Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:05:47.605Z] [LOG]       Calculated At: Oct 22, 2025, 13:35:47
[2025-10-22T08:05:47.606Z] [LOG]       Expected Earned (until NOW): Rs.31999.44
[2025-10-22T08:05:47.607Z] [LOG]       Actual Earned (until NOW): Rs.3999.93
[2025-10-22T08:05:47.607Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:05:47.608Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T08:05:47.609Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:05:47.609Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:05:47.610Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:05:47.611Z] [LOG]    Gross Salary: 50000
[2025-10-22T08:05:47.612Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:05:47.612Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:05:47.613Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:47.613Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:05:47.614Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:47.615Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:05:47.615Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:47.616Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:05:47.616Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:47.617Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:05:47.618Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:47.618Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:05:47.619Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:47.619Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:05:47.620Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:47.621Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:05:47.622Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:47.622Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:05:47.623Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:47.624Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:05:47.625Z] [LOG] Regular deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:05:47.626Z] [LOG] Combined deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:35:47)"
    }
  ],
  "total": 27999.51
}
[2025-10-22T08:05:47.841Z] [LOG] Creating components for record 0d39b3ea-249d-4690-9f1e-0fc62343db34: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:05:47.843Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T08:05:48.021Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:05:48.200Z] [LOG] Created payroll_record_component: c5025809-f696-4532-8c77-45c1d97d39f9 for Attendance Deduction
[2025-10-22T08:05:48.559Z] [LOG] ✅ Financial balances updated successfully for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:48.560Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:05:48.561Z] [LOG] 
======================================================================
[2025-10-22T08:05:48.561Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: G.M Supathala Sadaru Madhushan null
[2025-10-22T08:05:48.562Z] [LOG] ======================================================================
[2025-10-22T08:05:48.563Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T08:05:48.563Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T08:05:48.564Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T08:05:48.564Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:05:48.565Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:05:48.566Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:05:48.567Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T08:05:48.567Z] [LOG] ======================================================================

[2025-10-22T08:05:48.569Z] [LOG] ✅ G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-22T08:05:48.569Z] [LOG] 📊 Progress: 3/34 (8.8%)
[2025-10-22T08:05:48.570Z] [LOG] 
🧮 Processing: Rasanga null (EMP000028)
[2025-10-22T08:05:48.571Z] [LOG] 📋 Record ID: 0dc53db6-8561-492f-b534-307ae7f01347
[2025-10-22T08:05:48.572Z] [LOG] 
======================================================================
[2025-10-22T08:05:48.573Z] [LOG] 🧮 CALCULATING PAYROLL: Rasanga null (EMP000028)
[2025-10-22T08:05:48.574Z] [LOG] ======================================================================
[2025-10-22T08:05:49.349Z] [LOG] 🔍 Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-22T08:05:49.350Z] [LOG]    Total components: 10
[2025-10-22T08:05:49.351Z] [LOG]    Applicable components: 10
[2025-10-22T08:05:49.351Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-22T08:05:50.079Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:05:50.080Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:05:50.298Z] [LOG] 📊 Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:50.477Z] [LOG] 📊 Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:50.655Z] [LOG] 📊 Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:50.656Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:05:50.657Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:05:50.658Z] [LOG] 💰 GROSS CALCULATION for Rasanga null:
[2025-10-22T08:05:50.658Z] [LOG]    Base Salary: 50000
[2025-10-22T08:05:50.659Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:05:50.660Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:05:50.660Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:50.840Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:05:51.037Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:05:51.038Z] [LOG]    Employee ID: 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:51.038Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:05:51.039Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:05:51.040Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T08:05:51.242Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:05:51.243Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T08:05:51.244Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T08:05:51.245Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T08:05:51.245Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:05:51.246Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:05:51.247Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:05:51.849Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:05:51.849Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:05:52.027Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:05:52.028Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:05:52.028Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:05:52.028Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:05:52.217Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:05:52.217Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:05:52.218Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:05:52.218Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:05:52.218Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:05:52.219Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:05:52.219Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:05:52.220Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:05:52.220Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:05:52.221Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:05:52.221Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:05:52.222Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T08:05:52.222Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T08:05:52.223Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:05:52.223Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:05:52.224Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T08:05:52.224Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:05:52.225Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T08:05:52.225Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T08:05:52.225Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:05:52.226Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:05:52.226Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T08:05:52.227Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:05:52.227Z] [LOG]       Calculated At: Oct 22, 2025, 13:35:52
[2025-10-22T08:05:52.228Z] [LOG]       Expected Earned (until NOW): Rs.31999.44
[2025-10-22T08:05:52.228Z] [LOG]       Actual Earned (until NOW): Rs.3999.93
[2025-10-22T08:05:52.229Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:05:52.229Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T08:05:52.229Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:05:52.230Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:05:52.230Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:05:52.230Z] [LOG]    Gross Salary: 50000
[2025-10-22T08:05:52.231Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:05:52.231Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:05:52.231Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:52.231Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:05:52.232Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:52.232Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:05:52.233Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:52.233Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:05:52.233Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:52.234Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:05:52.234Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:52.234Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:05:52.235Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:52.235Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:05:52.235Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:52.236Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:05:52.236Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:52.236Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:05:52.237Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:52.237Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:05:52.238Z] [LOG] Regular deductions for Rasanga null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:05:52.238Z] [LOG] Combined deductions for Rasanga null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:35:52)"
    }
  ],
  "total": 27999.51
}
[2025-10-22T08:05:52.419Z] [LOG] Creating components for record 0dc53db6-8561-492f-b534-307ae7f01347: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:05:52.421Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T08:05:52.598Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:05:52.785Z] [LOG] Created payroll_record_component: 6724d6cb-a3ea-490c-9800-60e577ff7ccd for Attendance Deduction
[2025-10-22T08:05:53.146Z] [LOG] ✅ Financial balances updated successfully for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:53.147Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:05:53.147Z] [LOG] 
======================================================================
[2025-10-22T08:05:53.148Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Rasanga null
[2025-10-22T08:05:53.149Z] [LOG] ======================================================================
[2025-10-22T08:05:53.149Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T08:05:53.150Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T08:05:53.151Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T08:05:53.151Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:05:53.152Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:05:53.154Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:05:53.155Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T08:05:53.156Z] [LOG] ======================================================================

[2025-10-22T08:05:53.157Z] [LOG] ✅ Rasanga null: Calculation completed successfully
[2025-10-22T08:05:53.157Z] [LOG] 📊 Progress: 4/34 (11.8%)
[2025-10-22T08:05:53.159Z] [LOG] 
🧮 Processing: Maryam null (EMP000035)
[2025-10-22T08:05:53.160Z] [LOG] 📋 Record ID: 19466998-3e31-4ecf-bbbf-5b6703493c81
[2025-10-22T08:05:53.161Z] [LOG] 
======================================================================
[2025-10-22T08:05:53.162Z] [LOG] 🧮 CALCULATING PAYROLL: Maryam null (EMP000035)
[2025-10-22T08:05:53.163Z] [LOG] ======================================================================
[2025-10-22T08:05:53.891Z] [LOG] 🔍 Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-22T08:05:53.891Z] [LOG]    Total components: 10
[2025-10-22T08:05:53.892Z] [LOG]    Applicable components: 10
[2025-10-22T08:05:53.892Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-22T08:05:54.705Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:05:54.706Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:05:55.002Z] [LOG] 📊 Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:55.200Z] [LOG] 📊 Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:55.423Z] [LOG] 📊 Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:55.424Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:05:55.425Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:05:55.426Z] [LOG] 💰 GROSS CALCULATION for Maryam null:
[2025-10-22T08:05:55.427Z] [LOG]    Base Salary: 40000
[2025-10-22T08:05:55.427Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:05:55.428Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:05:55.429Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:55.861Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:05:56.040Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:05:56.040Z] [LOG]    Employee ID: 01440221-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:56.041Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:05:56.042Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:05:56.042Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-22T08:05:56.222Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:05:56.223Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-22T08:05:56.224Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-22T08:05:56.225Z] [LOG]       Saturday Hourly Rate: Rs.188.24
[2025-10-22T08:05:56.225Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:05:56.226Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:05:56.226Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:05:56.789Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:05:56.790Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:05:56.967Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:05:56.968Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:05:56.969Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:05:56.969Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:05:57.155Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:05:57.156Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:05:57.156Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:05:57.157Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:05:57.158Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:05:57.158Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:05:57.159Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:05:57.160Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:05:57.160Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:05:57.161Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:05:57.162Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:05:57.163Z] [LOG]       Weekday: 110.50h × Rs.188.24 = Rs.20800.52
[2025-10-22T08:05:57.164Z] [LOG]       Saturday: 25.50h × Rs.188.24 = Rs.4800.12
[2025-10-22T08:05:57.164Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:05:57.165Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:05:57.166Z] [LOG]       Total Expected Earned: Rs.25600.64
[2025-10-22T08:05:57.167Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:05:57.168Z] [LOG]       Weekday: 17.00h × Rs.188.24 = Rs.3200.08
[2025-10-22T08:05:57.168Z] [LOG]       Saturday: 0.00h × Rs.188.24 = Rs.0.00
[2025-10-22T08:05:57.169Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:05:57.170Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:05:57.170Z] [LOG]       Total Actual Earned: Rs.3200.08
[2025-10-22T08:05:57.172Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:05:57.173Z] [LOG]       Calculated At: Oct 22, 2025, 13:35:57
[2025-10-22T08:05:57.174Z] [LOG]       Expected Earned (until NOW): Rs.25600.64
[2025-10-22T08:05:57.174Z] [LOG]       Actual Earned (until NOW): Rs.3200.08
[2025-10-22T08:05:57.175Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:05:57.176Z] [LOG]       Attendance Deduction: Rs.22400.56
[2025-10-22T08:05:57.176Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:05:57.177Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:05:57.178Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:05:57.179Z] [LOG]    Gross Salary: 40000
[2025-10-22T08:05:57.179Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:05:57.180Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:05:57.181Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:57.181Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:05:57.182Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:57.183Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:05:57.183Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:57.184Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:05:57.185Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:57.185Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:05:57.186Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:57.186Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:05:57.187Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:57.188Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:05:57.188Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:57.189Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:05:57.190Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:57.190Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:05:57.191Z] [LOG]    Fixed amount: 0
[2025-10-22T08:05:57.192Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:05:57.192Z] [LOG] Regular deductions for Maryam null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:05:57.193Z] [LOG] Combined deductions for Maryam null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 22400.559999999998,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:35:57)"
    }
  ],
  "total": 22400.559999999998
}
[2025-10-22T08:05:57.377Z] [LOG] Creating components for record 19466998-3e31-4ecf-bbbf-5b6703493c81: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:05:57.380Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 22400.559999999998
}
[2025-10-22T08:05:57.579Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:05:57.758Z] [LOG] Created payroll_record_component: c271c8a2-8233-4df0-92b5-b3ad91dea57a for Attendance Deduction
[2025-10-22T08:05:58.190Z] [LOG] ✅ Financial balances updated successfully for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-22T08:05:58.190Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:05:58.191Z] [LOG] 
======================================================================
[2025-10-22T08:05:58.192Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Maryam null
[2025-10-22T08:05:58.192Z] [LOG] ======================================================================
[2025-10-22T08:05:58.193Z] [LOG]    Gross Salary: Rs.40000.00
[2025-10-22T08:05:58.194Z] [LOG]    Total Deductions: Rs.22400.56
[2025-10-22T08:05:58.194Z] [LOG]       - Attendance Deduction: Rs.22400.56
[2025-10-22T08:05:58.195Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:05:58.196Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:05:58.197Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:05:58.198Z] [LOG]    NET SALARY: Rs.17599.44
[2025-10-22T08:05:58.198Z] [LOG] ======================================================================

[2025-10-22T08:05:58.199Z] [LOG] ✅ Maryam null: Calculation completed successfully
[2025-10-22T08:05:58.200Z] [LOG] 📊 Progress: 5/34 (14.7%)
[2025-10-22T08:05:58.201Z] [LOG] 
🧮 Processing: Franklin null (EMP000018)
[2025-10-22T08:05:58.202Z] [LOG] 📋 Record ID: 22a38226-5eb0-4d2e-ab49-72ec2e3bcf45
[2025-10-22T08:05:58.203Z] [LOG] 
======================================================================
[2025-10-22T08:05:58.203Z] [LOG] 🧮 CALCULATING PAYROLL: Franklin null (EMP000018)
[2025-10-22T08:05:58.204Z] [LOG] ======================================================================
[2025-10-22T08:05:58.924Z] [LOG] 🔍 Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-22T08:05:58.925Z] [LOG]    Total components: 10
[2025-10-22T08:05:58.926Z] [LOG]    Applicable components: 10
[2025-10-22T08:05:58.927Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-22T08:05:59.647Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:05:59.648Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:05:59.843Z] [LOG] 📊 Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:00.024Z] [LOG] 📊 Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:00.212Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:00.212Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:06:00.213Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:06:00.213Z] [LOG] 💰 GROSS CALCULATION for Franklin null:
[2025-10-22T08:06:00.213Z] [LOG]    Base Salary: 50000
[2025-10-22T08:06:00.214Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:06:00.214Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:06:00.214Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:00.414Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:06:00.631Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:06:00.632Z] [LOG]    Employee ID: 0143c037-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:00.632Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:06:00.632Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:06:00.632Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T08:06:00.825Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:06:00.825Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T08:06:00.826Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T08:06:00.826Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T08:06:00.826Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:06:00.826Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:06:00.827Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:06:01.410Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:06:01.410Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:06:01.588Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:06:01.588Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:01.589Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:01.589Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:01.772Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:06:01.772Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:06:01.772Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:06:01.772Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:01.773Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:06:01.773Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:06:01.773Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:01.774Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:01.774Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:01.774Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:06:01.774Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:06:01.775Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T08:06:01.775Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T08:06:01.775Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:01.775Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:01.776Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T08:06:01.776Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:06:01.776Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T08:06:01.777Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T08:06:01.777Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:01.777Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:01.777Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T08:06:01.778Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:06:01.778Z] [LOG]       Calculated At: Oct 22, 2025, 13:36:01
[2025-10-22T08:06:01.779Z] [LOG]       Expected Earned (until NOW): Rs.31999.44
[2025-10-22T08:06:01.779Z] [LOG]       Actual Earned (until NOW): Rs.3999.93
[2025-10-22T08:06:01.779Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:01.780Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T08:06:01.780Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:06:01.781Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:06:01.781Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:06:01.781Z] [LOG]    Gross Salary: 50000
[2025-10-22T08:06:01.782Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:06:01.782Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:06:01.782Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:01.782Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:06:01.783Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:01.783Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:06:01.783Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:01.784Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:06:01.784Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:01.784Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:06:01.784Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:01.785Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:06:01.785Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:01.785Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:06:01.785Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:01.785Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:06:01.786Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:01.786Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:06:01.786Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:01.787Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:06:01.787Z] [LOG] Regular deductions for Franklin null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:06:01.787Z] [LOG] Combined deductions for Franklin null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:36:01)"
    }
  ],
  "total": 27999.51
}
[2025-10-22T08:06:01.965Z] [LOG] Creating components for record 22a38226-5eb0-4d2e-ab49-72ec2e3bcf45: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:06:01.966Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T08:06:02.159Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:06:02.340Z] [LOG] Created payroll_record_component: f34fa0e2-3567-4a00-ba14-55bf4ca9ae14 for Attendance Deduction
[2025-10-22T08:06:02.697Z] [LOG] ✅ Financial balances updated successfully for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:02.697Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:06:02.698Z] [LOG] 
======================================================================
[2025-10-22T08:06:02.698Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Franklin null
[2025-10-22T08:06:02.698Z] [LOG] ======================================================================
[2025-10-22T08:06:02.698Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T08:06:02.699Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T08:06:02.699Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T08:06:02.699Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:06:02.699Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:06:02.699Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:06:02.700Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T08:06:02.700Z] [LOG] ======================================================================

[2025-10-22T08:06:02.700Z] [LOG] ✅ Franklin null: Calculation completed successfully
[2025-10-22T08:06:02.701Z] [LOG] 📊 Progress: 6/34 (17.6%)
[2025-10-22T08:06:02.701Z] [LOG] 
🧮 Processing: Office Team null (EMP000041)
[2025-10-22T08:06:02.701Z] [LOG] 📋 Record ID: 239524c5-1bb3-4d92-b127-87442ca433dc
[2025-10-22T08:06:02.702Z] [LOG] 
======================================================================
[2025-10-22T08:06:02.702Z] [LOG] 🧮 CALCULATING PAYROLL: Office Team null (EMP000041)
[2025-10-22T08:06:02.702Z] [LOG] ======================================================================
[2025-10-22T08:06:03.444Z] [LOG] 🔍 Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-22T08:06:03.444Z] [LOG]    Total components: 10
[2025-10-22T08:06:03.445Z] [LOG]    Applicable components: 10
[2025-10-22T08:06:03.445Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-22T08:06:04.175Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:06:04.176Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:06:04.351Z] [LOG] 📊 Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:04.532Z] [LOG] 📊 Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:04.730Z] [LOG] 📊 Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:04.730Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:06:04.731Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:06:04.731Z] [LOG] 💰 GROSS CALCULATION for Office Team null:
[2025-10-22T08:06:04.731Z] [LOG]    Base Salary: 1
[2025-10-22T08:06:04.732Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:06:04.732Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:06:04.732Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:04.921Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:06:05.097Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:06:05.097Z] [LOG]    Employee ID: 01442b21-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:05.098Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:06:05.098Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:06:05.098Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-22T08:06:05.283Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:06:05.283Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-22T08:06:05.284Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-22T08:06:05.284Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-22T08:06:05.284Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:06:05.284Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:06:05.284Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:06:06.027Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:06:06.027Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:06:06.230Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:06:06.231Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:06.231Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:06.231Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:06.455Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:06:06.456Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:06:06.456Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:06:06.456Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:06.456Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:06:06.456Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:06:06.457Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:06.457Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:06.457Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:06.457Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:06:06.457Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:06:06.457Z] [LOG]       Weekday: 110.50h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:06.457Z] [LOG]       Saturday: 25.50h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:06.458Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:06.458Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:06.458Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-22T08:06:06.458Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:06:06.458Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:06.458Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:06.458Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:06.458Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:06.459Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-22T08:06:06.459Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:06:06.459Z] [LOG]       Calculated At: Oct 22, 2025, 13:36:06
[2025-10-22T08:06:06.459Z] [LOG]       Expected Earned (until NOW): Rs.0.00
[2025-10-22T08:06:06.459Z] [LOG]       Actual Earned (until NOW): Rs.0.00
[2025-10-22T08:06:06.460Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:06.460Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-22T08:06:06.460Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:06:06.460Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-22T08:06:06.460Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:06:06.460Z] [LOG]    Gross Salary: 1
[2025-10-22T08:06:06.460Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:06:06.461Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:06:06.461Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:06.461Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:06:06.461Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:06.462Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:06:06.462Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:06.462Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:06:06.462Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:06.462Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:06:06.463Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:06.463Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:06:06.463Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:06.463Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:06:06.463Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:06.463Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:06:06.463Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:06.464Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:06:06.464Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:06.464Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:06:06.464Z] [LOG] Regular deductions for Office Team null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:06:06.464Z] [LOG] Combined deductions for Office Team null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:36:06)"
    }
  ],
  "total": 0
}
[2025-10-22T08:06:06.656Z] [LOG] Creating components for record 239524c5-1bb3-4d92-b127-87442ca433dc: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:06:06.657Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-22T08:06:06.892Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:06:07.081Z] [LOG] Created payroll_record_component: d38df045-db12-42a4-ab87-b66b4731f952 for Attendance Deduction
[2025-10-22T08:06:07.489Z] [LOG] ✅ Financial balances updated successfully for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:07.489Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:06:07.489Z] [LOG] 
======================================================================
[2025-10-22T08:06:07.490Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Office Team null
[2025-10-22T08:06:07.490Z] [LOG] ======================================================================
[2025-10-22T08:06:07.490Z] [LOG]    Gross Salary: Rs.1.00
[2025-10-22T08:06:07.490Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-22T08:06:07.490Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-22T08:06:07.491Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:06:07.491Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:06:07.491Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:06:07.491Z] [LOG]    NET SALARY: Rs.1.00
[2025-10-22T08:06:07.491Z] [LOG] ======================================================================

[2025-10-22T08:06:07.491Z] [LOG] ✅ Office Team null: Calculation completed successfully
[2025-10-22T08:06:07.492Z] [LOG] 📊 Progress: 7/34 (20.6%)
[2025-10-22T08:06:07.492Z] [LOG] 
🧮 Processing: Saruban null (EMP000007)
[2025-10-22T08:06:07.492Z] [LOG] 📋 Record ID: 2539b95c-060a-437b-901d-45242acdcf7f
[2025-10-22T08:06:07.492Z] [LOG] 
======================================================================
[2025-10-22T08:06:07.492Z] [LOG] 🧮 CALCULATING PAYROLL: Saruban null (EMP000007)
[2025-10-22T08:06:07.493Z] [LOG] ======================================================================
[2025-10-22T08:06:08.207Z] [LOG] 🔍 Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-22T08:06:08.208Z] [LOG]    Total components: 10
[2025-10-22T08:06:08.208Z] [LOG]    Applicable components: 10
[2025-10-22T08:06:08.208Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-22T08:06:08.966Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:06:08.967Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:06:09.160Z] [LOG] 📊 Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:09.338Z] [LOG] 📊 Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:09.539Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:09.540Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:06:09.541Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:06:09.542Z] [LOG] 💰 GROSS CALCULATION for Saruban null:
[2025-10-22T08:06:09.542Z] [LOG]    Base Salary: 0
[2025-10-22T08:06:09.543Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:06:09.544Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:06:09.544Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:09.792Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:06:09.972Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:06:09.973Z] [LOG]    Employee ID: 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:09.973Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:06:09.973Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:06:09.974Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-22T08:06:10.150Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:06:10.151Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-22T08:06:10.151Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-22T08:06:10.152Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-22T08:06:10.152Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:06:10.152Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:06:10.152Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:06:10.762Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:06:10.762Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:06:10.940Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:06:10.941Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:10.942Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:10.942Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:11.118Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:06:11.119Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:06:11.120Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:06:11.121Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:11.121Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:06:11.122Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:06:11.123Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:11.123Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:11.124Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:11.124Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:06:11.125Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:06:11.127Z] [LOG]       Weekday: 110.50h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:11.127Z] [LOG]       Saturday: 25.50h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:11.128Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:11.129Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:11.129Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-22T08:06:11.130Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:06:11.131Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:11.132Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:11.132Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:11.133Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:11.134Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-22T08:06:11.135Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:06:11.136Z] [LOG]       Calculated At: Oct 22, 2025, 13:36:11
[2025-10-22T08:06:11.136Z] [LOG]       Expected Earned (until NOW): Rs.0.00
[2025-10-22T08:06:11.137Z] [LOG]       Actual Earned (until NOW): Rs.0.00
[2025-10-22T08:06:11.138Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:11.139Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-22T08:06:11.140Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:06:11.140Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-22T08:06:11.141Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:06:11.142Z] [LOG]    Gross Salary: 0
[2025-10-22T08:06:11.142Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:06:11.143Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:06:11.144Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:11.145Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:06:11.145Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:11.146Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:06:11.147Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:11.147Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:06:11.149Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:11.149Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:06:11.150Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:11.151Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:06:11.151Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:11.152Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:06:11.152Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:11.153Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:06:11.154Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:11.155Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:06:11.155Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:11.156Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:06:11.156Z] [LOG] Regular deductions for Saruban null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:06:11.157Z] [LOG] Combined deductions for Saruban null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:36:11)"
    }
  ],
  "total": 0
}
[2025-10-22T08:06:11.340Z] [LOG] Creating components for record 2539b95c-060a-437b-901d-45242acdcf7f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:06:11.342Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-22T08:06:11.523Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:06:11.700Z] [LOG] Created payroll_record_component: 52d9ea14-43cd-4238-9685-cc64e20d7e24 for Attendance Deduction
[2025-10-22T08:06:12.058Z] [LOG] ✅ Financial balances updated successfully for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:12.058Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:06:12.059Z] [LOG] 
======================================================================
[2025-10-22T08:06:12.060Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saruban null
[2025-10-22T08:06:12.060Z] [LOG] ======================================================================
[2025-10-22T08:06:12.061Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-22T08:06:12.062Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-22T08:06:12.062Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-22T08:06:12.063Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:06:12.063Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:06:12.064Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:06:12.065Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-22T08:06:12.066Z] [LOG] ======================================================================

[2025-10-22T08:06:12.067Z] [LOG] ✅ Saruban null: Calculation completed successfully
[2025-10-22T08:06:12.068Z] [LOG] 📊 Progress: 8/34 (23.5%)
[2025-10-22T08:06:12.069Z] [LOG] 
🧮 Processing: Anoj null (EMP000014)
[2025-10-22T08:06:12.071Z] [LOG] 📋 Record ID: 46e805c2-afe0-4688-b8de-04c62e0b8b11
[2025-10-22T08:06:12.072Z] [LOG] 
======================================================================
[2025-10-22T08:06:12.072Z] [LOG] 🧮 CALCULATING PAYROLL: Anoj null (EMP000014)
[2025-10-22T08:06:12.073Z] [LOG] ======================================================================
[2025-10-22T08:06:12.832Z] [LOG] 🔍 Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-22T08:06:12.832Z] [LOG]    Total components: 10
[2025-10-22T08:06:12.833Z] [LOG]    Applicable components: 10
[2025-10-22T08:06:12.834Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T08:06:13.840Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:06:13.841Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:06:14.034Z] [LOG] 📊 Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:14.239Z] [LOG] 📊 Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:14.499Z] [LOG] 📊 Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:14.500Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:06:14.502Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:06:14.502Z] [LOG] 💰 GROSS CALCULATION for Anoj null:
[2025-10-22T08:06:14.503Z] [LOG]    Base Salary: 50000
[2025-10-22T08:06:14.504Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:06:14.504Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:06:14.505Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:14.704Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:06:14.915Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:06:14.915Z] [LOG]    Employee ID: 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:14.916Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:06:14.917Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:06:14.917Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T08:06:15.117Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:06:15.117Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T08:06:15.118Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T08:06:15.118Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T08:06:15.118Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:06:15.118Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:06:15.119Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:06:15.676Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:06:15.676Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:06:15.885Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:06:15.885Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:15.886Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:15.887Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:16.064Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:06:16.065Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:06:16.066Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:06:16.066Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:16.067Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:06:16.068Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:06:16.068Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:16.069Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:16.070Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:16.071Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:06:16.072Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:06:16.072Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T08:06:16.073Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T08:06:16.074Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:16.074Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:16.075Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T08:06:16.076Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:06:16.077Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T08:06:16.077Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T08:06:16.078Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:16.079Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:16.079Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T08:06:16.081Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:06:16.081Z] [LOG]       Calculated At: Oct 22, 2025, 13:36:16
[2025-10-22T08:06:16.082Z] [LOG]       Expected Earned (until NOW): Rs.31999.44
[2025-10-22T08:06:16.083Z] [LOG]       Actual Earned (until NOW): Rs.3999.93
[2025-10-22T08:06:16.083Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:16.084Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T08:06:16.085Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:06:16.085Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:06:16.087Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:06:16.088Z] [LOG]    Gross Salary: 50000
[2025-10-22T08:06:16.089Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:06:16.089Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:06:16.090Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:16.090Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:06:16.091Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:16.092Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:06:16.092Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:16.093Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:06:16.094Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:16.094Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:06:16.095Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:16.096Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:06:16.096Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:16.097Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:06:16.098Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:16.098Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:06:16.099Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:16.100Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:06:16.100Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:16.101Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:06:16.102Z] [LOG] Regular deductions for Anoj null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:06:16.103Z] [LOG] Combined deductions for Anoj null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:36:16)"
    }
  ],
  "total": 27999.51
}
[2025-10-22T08:06:16.312Z] [LOG] Creating components for record 46e805c2-afe0-4688-b8de-04c62e0b8b11: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:06:16.314Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T08:06:16.606Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:06:16.799Z] [LOG] Created payroll_record_component: bba16a13-75a0-4904-b2ea-4247a02e4618 for Attendance Deduction
[2025-10-22T08:06:17.247Z] [LOG] ✅ Financial balances updated successfully for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:17.248Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:06:17.249Z] [LOG] 
======================================================================
[2025-10-22T08:06:17.249Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Anoj null
[2025-10-22T08:06:17.249Z] [LOG] ======================================================================
[2025-10-22T08:06:17.249Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T08:06:17.250Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T08:06:17.250Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T08:06:17.250Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:06:17.250Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:06:17.251Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:06:17.251Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T08:06:17.251Z] [LOG] ======================================================================

[2025-10-22T08:06:17.251Z] [LOG] ✅ Anoj null: Calculation completed successfully
[2025-10-22T08:06:17.252Z] [LOG] 📊 Progress: 9/34 (26.5%)
[2025-10-22T08:06:17.252Z] [LOG] 
🧮 Processing: Chemil null (EMP000040)
[2025-10-22T08:06:17.252Z] [LOG] 📋 Record ID: 47e2ae3b-6da7-499c-845f-8415bed0dcf7
[2025-10-22T08:06:17.252Z] [LOG] 
======================================================================
[2025-10-22T08:06:17.253Z] [LOG] 🧮 CALCULATING PAYROLL: Chemil null (EMP000040)
[2025-10-22T08:06:17.253Z] [LOG] ======================================================================
[2025-10-22T08:06:18.064Z] [LOG] 🔍 Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-22T08:06:18.065Z] [LOG]    Total components: 10
[2025-10-22T08:06:18.066Z] [LOG]    Applicable components: 10
[2025-10-22T08:06:18.066Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T08:06:18.831Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:06:18.831Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:06:19.014Z] [LOG] 📊 Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:19.191Z] [LOG] 📊 Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:19.373Z] [LOG] 📊 Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:19.373Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:06:19.375Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:06:19.376Z] [LOG] 💰 GROSS CALCULATION for Chemil null:
[2025-10-22T08:06:19.376Z] [LOG]    Base Salary: 250000
[2025-10-22T08:06:19.377Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:06:19.378Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:06:19.381Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:19.559Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:06:19.772Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:06:19.773Z] [LOG]    Employee ID: 01442599-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:19.773Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:06:19.773Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:06:19.774Z] [LOG]    Base Salary (Full Month): Rs.250000.00
[2025-10-22T08:06:19.950Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:06:19.950Z] [LOG]       Daily Salary: Rs.10000.00
[2025-10-22T08:06:19.951Z] [LOG]       Weekday Hourly Rate: Rs.1176.47
[2025-10-22T08:06:19.951Z] [LOG]       Saturday Hourly Rate: Rs.1176.47
[2025-10-22T08:06:19.952Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:06:19.952Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:06:19.953Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:06:20.522Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:06:20.523Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:06:20.701Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:06:20.702Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:20.702Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:20.703Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:20.904Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:06:20.905Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:06:20.906Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:06:20.906Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:20.907Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:06:20.908Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:06:20.909Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:20.909Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:20.910Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:20.911Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:06:20.912Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:06:20.913Z] [LOG]       Weekday: 110.50h × Rs.1176.47 = Rs.129999.93
[2025-10-22T08:06:20.913Z] [LOG]       Saturday: 25.50h × Rs.1176.47 = Rs.29999.99
[2025-10-22T08:06:20.914Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:20.915Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:20.916Z] [LOG]       Total Expected Earned: Rs.159999.92
[2025-10-22T08:06:20.916Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:06:20.917Z] [LOG]       Weekday: 17.00h × Rs.1176.47 = Rs.19999.99
[2025-10-22T08:06:20.919Z] [LOG]       Saturday: 0.00h × Rs.1176.47 = Rs.0.00
[2025-10-22T08:06:20.921Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:20.921Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:20.922Z] [LOG]       Total Actual Earned: Rs.19999.99
[2025-10-22T08:06:20.923Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:06:20.924Z] [LOG]       Calculated At: Oct 22, 2025, 13:36:20
[2025-10-22T08:06:20.925Z] [LOG]       Expected Earned (until NOW): Rs.159999.92
[2025-10-22T08:06:20.925Z] [LOG]       Actual Earned (until NOW): Rs.19999.99
[2025-10-22T08:06:20.926Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:20.927Z] [LOG]       Attendance Deduction: Rs.139999.93
[2025-10-22T08:06:20.928Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:06:20.928Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:06:20.929Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:06:20.930Z] [LOG]    Gross Salary: 250000
[2025-10-22T08:06:20.931Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:06:20.932Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:06:20.932Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:20.933Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:06:20.934Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:20.935Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:06:20.935Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:20.936Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:06:20.937Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:20.937Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:06:20.938Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:20.939Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:06:20.939Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:20.939Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:06:20.940Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:20.940Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:06:20.940Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:20.940Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:06:20.941Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:20.941Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:06:20.941Z] [LOG] Regular deductions for Chemil null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:06:20.942Z] [LOG] Combined deductions for Chemil null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 139999.93,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:36:20)"
    }
  ],
  "total": 139999.93
}
[2025-10-22T08:06:21.122Z] [LOG] Creating components for record 47e2ae3b-6da7-499c-845f-8415bed0dcf7: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 1
}
[2025-10-22T08:06:21.123Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 139999.93
}
[2025-10-22T08:06:21.306Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:06:21.483Z] [LOG] Created payroll_record_component: a463d84f-5c43-4f9d-a47b-16afbfcea410 for Attendance Deduction
[2025-10-22T08:06:21.483Z] [LOG] Processing component: {
  "name": "Income Tax",
  "type": "tax",
  "amount": 12000
}
[2025-10-22T08:06:21.665Z] [LOG] Using existing component ID: 72f98b53-4bd5-4713-98d0-e3a641ad8d0f
[2025-10-22T08:06:22.021Z] [LOG] Created payroll_record_component: 5ad964e7-56b2-4bfc-a5a6-1f11b1839124 for Income Tax
[2025-10-22T08:06:22.377Z] [LOG] ✅ Financial balances updated successfully for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:22.378Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:06:22.379Z] [LOG] 
======================================================================
[2025-10-22T08:06:22.379Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chemil null
[2025-10-22T08:06:22.380Z] [LOG] ======================================================================
[2025-10-22T08:06:22.381Z] [LOG]    Gross Salary: Rs.250000.00
[2025-10-22T08:06:22.381Z] [LOG]    Total Deductions: Rs.139999.93
[2025-10-22T08:06:22.382Z] [LOG]       - Attendance Deduction: Rs.139999.93
[2025-10-22T08:06:22.383Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:06:22.383Z] [LOG]    Total Taxes: Rs.12000.00
[2025-10-22T08:06:22.384Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:06:22.385Z] [LOG]    NET SALARY: Rs.98000.07
[2025-10-22T08:06:22.386Z] [LOG] ======================================================================

[2025-10-22T08:06:22.386Z] [LOG] ✅ Chemil null: Calculation completed successfully
[2025-10-22T08:06:22.387Z] [LOG] 📊 Progress: 10/34 (29.4%)
[2025-10-22T08:06:22.388Z] [LOG] 
🧮 Processing: Prasanthan null (EMP000001)
[2025-10-22T08:06:22.389Z] [LOG] 📋 Record ID: 4b6320ec-0c0a-4b7c-bc22-c2cb9e61ed92
[2025-10-22T08:06:22.389Z] [LOG] 
======================================================================
[2025-10-22T08:06:22.390Z] [LOG] 🧮 CALCULATING PAYROLL: Prasanthan null (EMP000001)
[2025-10-22T08:06:22.391Z] [LOG] ======================================================================
[2025-10-22T08:06:23.148Z] [LOG] 🔍 Component filtering for employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-22T08:06:23.148Z] [LOG]    Total components: 10
[2025-10-22T08:06:23.149Z] [LOG]    Applicable components: 10
[2025-10-22T08:06:23.150Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-22T08:06:23.882Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:06:23.883Z] [LOG] 🔄 Processing financial records for employee 014397c7-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:06:24.069Z] [LOG] 📊 Found 0 active loans for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:24.249Z] [LOG] 📊 Found 0 active advances for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:24.425Z] [LOG] 📊 Found 0 approved bonuses for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:24.426Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:06:24.427Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:06:24.428Z] [LOG] 💰 GROSS CALCULATION for Prasanthan null:
[2025-10-22T08:06:24.429Z] [LOG]    Base Salary: 150000
[2025-10-22T08:06:24.429Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:06:24.430Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:06:24.431Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:24.606Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:06:24.786Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:06:24.787Z] [LOG]    Employee ID: 014397c7-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:24.788Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:06:24.788Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:06:24.789Z] [LOG]    Base Salary (Full Month): Rs.150000.00
[2025-10-22T08:06:24.971Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:06:24.972Z] [LOG]       Daily Salary: Rs.6000.00
[2025-10-22T08:06:24.972Z] [LOG]       Weekday Hourly Rate: Rs.705.88
[2025-10-22T08:06:24.973Z] [LOG]       Saturday Hourly Rate: Rs.705.88
[2025-10-22T08:06:24.973Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:06:24.974Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:06:24.975Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:06:25.557Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:06:25.558Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:06:25.738Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:06:25.739Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:25.739Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:25.740Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:25.937Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:06:25.938Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:06:25.939Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:06:25.939Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:25.940Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:06:25.941Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:06:25.941Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:25.942Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:25.943Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:25.944Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:06:25.944Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:06:25.946Z] [LOG]       Weekday: 110.50h × Rs.705.88 = Rs.77999.74
[2025-10-22T08:06:25.946Z] [LOG]       Saturday: 25.50h × Rs.705.88 = Rs.17999.94
[2025-10-22T08:06:25.947Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:25.947Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:25.948Z] [LOG]       Total Expected Earned: Rs.95999.68
[2025-10-22T08:06:25.949Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:06:25.950Z] [LOG]       Weekday: 17.00h × Rs.705.88 = Rs.11999.96
[2025-10-22T08:06:25.950Z] [LOG]       Saturday: 0.00h × Rs.705.88 = Rs.0.00
[2025-10-22T08:06:25.951Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:25.951Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:25.952Z] [LOG]       Total Actual Earned: Rs.11999.96
[2025-10-22T08:06:25.953Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:06:25.954Z] [LOG]       Calculated At: Oct 22, 2025, 13:36:25
[2025-10-22T08:06:25.955Z] [LOG]       Expected Earned (until NOW): Rs.95999.68
[2025-10-22T08:06:25.956Z] [LOG]       Actual Earned (until NOW): Rs.11999.96
[2025-10-22T08:06:25.956Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:25.957Z] [LOG]       Attendance Deduction: Rs.83999.72
[2025-10-22T08:06:25.957Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:06:25.958Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:06:25.959Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:06:25.959Z] [LOG]    Gross Salary: 150000
[2025-10-22T08:06:25.960Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:06:25.961Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:06:25.961Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:25.962Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:06:25.963Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:25.963Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:06:25.964Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:25.965Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:06:25.965Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:25.966Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:06:25.967Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:25.967Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:06:25.968Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:25.969Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:06:25.969Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:25.970Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:06:25.971Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:25.971Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:06:25.972Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:25.972Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:06:25.973Z] [LOG] Regular deductions for Prasanthan null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:06:25.974Z] [LOG] Combined deductions for Prasanthan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 83999.72,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:36:25)"
    }
  ],
  "total": 83999.72
}
[2025-10-22T08:06:26.158Z] [LOG] Creating components for record 4b6320ec-0c0a-4b7c-bc22-c2cb9e61ed92: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 1
}
[2025-10-22T08:06:26.160Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 83999.72
}
[2025-10-22T08:06:26.338Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:06:26.519Z] [LOG] Created payroll_record_component: 5e3bcb76-c288-479c-81ef-0beb12f1a90e for Attendance Deduction
[2025-10-22T08:06:26.520Z] [LOG] Processing component: {
  "name": "Income Tax",
  "type": "tax",
  "amount": 3000
}
[2025-10-22T08:06:26.701Z] [LOG] Using existing component ID: 72f98b53-4bd5-4713-98d0-e3a641ad8d0f
[2025-10-22T08:06:26.935Z] [LOG] Created payroll_record_component: 32e6e2c1-e6aa-4136-b463-b547af997012 for Income Tax
[2025-10-22T08:06:27.324Z] [LOG] ✅ Financial balances updated successfully for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:27.325Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:06:27.326Z] [LOG] 
======================================================================
[2025-10-22T08:06:27.327Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Prasanthan null
[2025-10-22T08:06:27.327Z] [LOG] ======================================================================
[2025-10-22T08:06:27.328Z] [LOG]    Gross Salary: Rs.150000.00
[2025-10-22T08:06:27.328Z] [LOG]    Total Deductions: Rs.83999.72
[2025-10-22T08:06:27.329Z] [LOG]       - Attendance Deduction: Rs.83999.72
[2025-10-22T08:06:27.330Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:06:27.330Z] [LOG]    Total Taxes: Rs.3000.00
[2025-10-22T08:06:27.331Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:06:27.332Z] [LOG]    NET SALARY: Rs.63000.28
[2025-10-22T08:06:27.333Z] [LOG] ======================================================================

[2025-10-22T08:06:27.334Z] [LOG] ✅ Prasanthan null: Calculation completed successfully
[2025-10-22T08:06:27.334Z] [LOG] 📊 Progress: 11/34 (32.4%)
[2025-10-22T08:06:27.335Z] [LOG] 
🧮 Processing: Ishara null (EMP000011)
[2025-10-22T08:06:27.336Z] [LOG] 📋 Record ID: 4e4d9c94-ea5b-49ca-88de-a1619a8f238b
[2025-10-22T08:06:27.337Z] [LOG] 
======================================================================
[2025-10-22T08:06:27.338Z] [LOG] 🧮 CALCULATING PAYROLL: Ishara null (EMP000011)
[2025-10-22T08:06:27.338Z] [LOG] ======================================================================
[2025-10-22T08:06:28.043Z] [LOG] 🔍 Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-22T08:06:28.044Z] [LOG]    Total components: 10
[2025-10-22T08:06:28.044Z] [LOG]    Applicable components: 10
[2025-10-22T08:06:28.045Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-22T08:06:28.785Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:06:28.786Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:06:28.969Z] [LOG] 📊 Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:29.163Z] [LOG] 📊 Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:29.343Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:29.344Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:06:29.345Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:06:29.346Z] [LOG] 💰 GROSS CALCULATION for Ishara null:
[2025-10-22T08:06:29.347Z] [LOG]    Base Salary: 50000
[2025-10-22T08:06:29.347Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:06:29.348Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:06:29.349Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:29.529Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:06:29.858Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:06:29.859Z] [LOG]    Employee ID: 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:29.859Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:06:29.859Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:06:29.859Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T08:06:30.039Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:06:30.040Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T08:06:30.040Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T08:06:30.041Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T08:06:30.042Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:06:30.042Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:06:30.043Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:06:30.581Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:06:30.582Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:06:30.764Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:06:30.764Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:30.765Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:30.765Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:30.959Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:06:30.960Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:06:30.960Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:06:30.961Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:30.962Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:06:30.962Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:06:30.963Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:30.964Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:30.964Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:30.965Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:06:30.966Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:06:30.967Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T08:06:30.968Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T08:06:30.968Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:30.969Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:30.970Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T08:06:30.970Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:06:30.972Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T08:06:30.972Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T08:06:30.973Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:30.974Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:30.974Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T08:06:30.975Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:06:30.976Z] [LOG]       Calculated At: Oct 22, 2025, 13:36:30
[2025-10-22T08:06:30.977Z] [LOG]       Expected Earned (until NOW): Rs.31999.44
[2025-10-22T08:06:30.978Z] [LOG]       Actual Earned (until NOW): Rs.3999.93
[2025-10-22T08:06:30.978Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:30.979Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T08:06:30.980Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:06:30.980Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:06:30.981Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:06:30.982Z] [LOG]    Gross Salary: 50000
[2025-10-22T08:06:30.982Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:06:30.983Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:06:30.983Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:30.984Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:06:30.985Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:30.985Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:06:30.986Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:30.986Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:06:30.987Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:30.988Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:06:30.989Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:30.989Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:06:30.989Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:30.990Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:06:30.990Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:30.991Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:06:30.991Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:30.991Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:06:30.992Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:30.992Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:06:30.992Z] [LOG] Regular deductions for Ishara null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:06:30.993Z] [LOG] Combined deductions for Ishara null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:36:30)"
    }
  ],
  "total": 27999.51
}
[2025-10-22T08:06:31.182Z] [LOG] Creating components for record 4e4d9c94-ea5b-49ca-88de-a1619a8f238b: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:06:31.184Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T08:06:31.365Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:06:31.547Z] [LOG] Created payroll_record_component: 10bb051f-28ec-469f-9c6d-d1626f1cf418 for Attendance Deduction
[2025-10-22T08:06:31.911Z] [LOG] ✅ Financial balances updated successfully for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:31.912Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:06:31.912Z] [LOG] 
======================================================================
[2025-10-22T08:06:31.913Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ishara null
[2025-10-22T08:06:31.914Z] [LOG] ======================================================================
[2025-10-22T08:06:31.914Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T08:06:31.915Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T08:06:31.916Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T08:06:31.916Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:06:31.917Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:06:31.918Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:06:31.919Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T08:06:31.920Z] [LOG] ======================================================================

[2025-10-22T08:06:31.920Z] [LOG] ✅ Ishara null: Calculation completed successfully
[2025-10-22T08:06:31.921Z] [LOG] 📊 Progress: 12/34 (35.3%)
[2025-10-22T08:06:31.922Z] [LOG] 
🧮 Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-22T08:06:31.923Z] [LOG] 📋 Record ID: 5aca9297-dac6-42c0-8a44-3ee9cbcb60ad
[2025-10-22T08:06:31.924Z] [LOG] 
======================================================================
[2025-10-22T08:06:31.924Z] [LOG] 🧮 CALCULATING PAYROLL: R. D.A Kaushalya null (EMP000044)
[2025-10-22T08:06:31.925Z] [LOG] ======================================================================
[2025-10-22T08:06:32.683Z] [LOG] 🔍 Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-22T08:06:32.683Z] [LOG]    Total components: 10
[2025-10-22T08:06:32.684Z] [LOG]    Applicable components: 10
[2025-10-22T08:06:32.685Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T08:06:33.405Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:06:33.406Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:06:33.606Z] [LOG] 📊 Found 0 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:33.791Z] [LOG] 📊 Found 0 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:33.973Z] [LOG] 📊 Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:33.974Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:06:33.975Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:06:33.976Z] [LOG] 💰 GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-22T08:06:33.977Z] [LOG]    Base Salary: 50000
[2025-10-22T08:06:33.977Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:06:33.978Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:06:33.979Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:34.156Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:06:34.334Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:06:34.335Z] [LOG]    Employee ID: 01443963-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:34.336Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:06:34.336Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:06:34.337Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T08:06:34.541Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:06:34.542Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T08:06:34.543Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T08:06:34.544Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T08:06:34.544Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:06:34.545Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:06:34.546Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:06:35.133Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:06:35.133Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:06:35.311Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:06:35.312Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:35.313Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:35.313Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:35.494Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:06:35.495Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:06:35.496Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:06:35.496Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:35.497Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:06:35.498Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:06:35.498Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:35.499Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:35.499Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:35.500Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:06:35.501Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:06:35.502Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T08:06:35.503Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T08:06:35.504Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:35.504Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:35.505Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T08:06:35.505Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:06:35.506Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T08:06:35.507Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T08:06:35.508Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:35.509Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:35.509Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T08:06:35.510Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:06:35.511Z] [LOG]       Calculated At: Oct 22, 2025, 13:36:35
[2025-10-22T08:06:35.512Z] [LOG]       Expected Earned (until NOW): Rs.31999.44
[2025-10-22T08:06:35.513Z] [LOG]       Actual Earned (until NOW): Rs.3999.93
[2025-10-22T08:06:35.513Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:35.514Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T08:06:35.514Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:06:35.515Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:06:35.516Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:06:35.516Z] [LOG]    Gross Salary: 50000
[2025-10-22T08:06:35.517Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:06:35.517Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:06:35.518Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:35.519Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:06:35.519Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:35.520Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:06:35.520Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:35.521Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:06:35.521Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:35.521Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:06:35.522Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:35.522Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:06:35.522Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:35.523Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:06:35.523Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:35.524Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:06:35.524Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:35.524Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:06:35.525Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:35.525Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:06:35.525Z] [LOG] Regular deductions for R. D.A Kaushalya null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:06:35.526Z] [LOG] Combined deductions for R. D.A Kaushalya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:36:35)"
    }
  ],
  "total": 27999.51
}
[2025-10-22T08:06:35.710Z] [LOG] Creating components for record 5aca9297-dac6-42c0-8a44-3ee9cbcb60ad: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:06:35.712Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T08:06:35.892Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:06:36.071Z] [LOG] Created payroll_record_component: b0286477-e499-48dc-94b6-d0112ad610e2 for Attendance Deduction
[2025-10-22T08:06:36.431Z] [LOG] ✅ Financial balances updated successfully for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:36.432Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:06:36.432Z] [LOG] 
======================================================================
[2025-10-22T08:06:36.433Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: R. D.A Kaushalya null
[2025-10-22T08:06:36.434Z] [LOG] ======================================================================
[2025-10-22T08:06:36.434Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T08:06:36.435Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T08:06:36.436Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T08:06:36.436Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:06:36.437Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:06:36.438Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:06:36.439Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T08:06:36.439Z] [LOG] ======================================================================

[2025-10-22T08:06:36.440Z] [LOG] ✅ R. D.A Kaushalya null: Calculation completed successfully
[2025-10-22T08:06:36.441Z] [LOG] 📊 Progress: 13/34 (38.2%)
[2025-10-22T08:06:36.442Z] [LOG] 
🧮 Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-22T08:06:36.442Z] [LOG] 📋 Record ID: 5ca4f401-dc6b-4245-ac3d-1d38e6a4ab51
[2025-10-22T08:06:36.443Z] [LOG] 
======================================================================
[2025-10-22T08:06:36.444Z] [LOG] 🧮 CALCULATING PAYROLL: Sujevan Selvaratnam null (EMP000026)
[2025-10-22T08:06:36.445Z] [LOG] ======================================================================
[2025-10-22T08:06:37.189Z] [LOG] 🔍 Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-22T08:06:37.189Z] [LOG]    Total components: 10
[2025-10-22T08:06:37.190Z] [LOG]    Applicable components: 10
[2025-10-22T08:06:37.191Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-22T08:06:37.918Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:06:37.919Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:06:38.103Z] [LOG] 📊 Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:38.283Z] [LOG] 📊 Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:38.465Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:38.465Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:06:38.466Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:06:38.466Z] [LOG] 💰 GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-22T08:06:38.466Z] [LOG]    Base Salary: 1
[2025-10-22T08:06:38.467Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:06:38.467Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:06:38.467Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:38.648Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:06:38.825Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:06:38.825Z] [LOG]    Employee ID: 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:38.826Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:06:38.826Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:06:38.826Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-22T08:06:39.004Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:06:39.004Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-22T08:06:39.004Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-22T08:06:39.005Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-22T08:06:39.005Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:06:39.005Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:06:39.005Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:06:39.549Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:06:39.550Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:06:39.732Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:06:39.732Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:39.732Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:39.733Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:39.911Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:06:39.911Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:06:39.911Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:06:39.912Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:39.912Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:06:39.912Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:06:39.912Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:39.912Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:39.913Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:39.913Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:06:39.913Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:06:39.913Z] [LOG]       Weekday: 110.50h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:39.913Z] [LOG]       Saturday: 25.50h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:39.913Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:39.914Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:39.914Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-22T08:06:39.914Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:06:39.914Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:39.914Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:39.915Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:39.915Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:39.915Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-22T08:06:39.916Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:06:39.916Z] [LOG]       Calculated At: Oct 22, 2025, 13:36:39
[2025-10-22T08:06:39.916Z] [LOG]       Expected Earned (until NOW): Rs.0.00
[2025-10-22T08:06:39.916Z] [LOG]       Actual Earned (until NOW): Rs.0.00
[2025-10-22T08:06:39.917Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:39.917Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-22T08:06:39.917Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:06:39.917Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-22T08:06:39.918Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:06:39.918Z] [LOG]    Gross Salary: 1
[2025-10-22T08:06:39.918Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:06:39.918Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:06:39.919Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:39.919Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:06:39.919Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:39.919Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:06:39.919Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:39.920Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:06:39.920Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:39.920Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:06:39.920Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:39.921Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:06:39.922Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:39.922Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:06:39.922Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:39.922Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:06:39.922Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:39.922Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:06:39.923Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:39.923Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:06:39.923Z] [LOG] Regular deductions for Sujevan Selvaratnam null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:06:39.923Z] [LOG] Combined deductions for Sujevan Selvaratnam null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:36:39)"
    }
  ],
  "total": 0
}
[2025-10-22T08:06:40.152Z] [LOG] Creating components for record 5ca4f401-dc6b-4245-ac3d-1d38e6a4ab51: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:06:40.153Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-22T08:06:40.330Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:06:40.509Z] [LOG] Created payroll_record_component: db6f6b8f-094d-4a58-bf9a-5ced03eb1ec9 for Attendance Deduction
[2025-10-22T08:06:40.864Z] [LOG] ✅ Financial balances updated successfully for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:40.864Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:06:40.865Z] [LOG] 
======================================================================
[2025-10-22T08:06:40.865Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sujevan Selvaratnam null
[2025-10-22T08:06:40.865Z] [LOG] ======================================================================
[2025-10-22T08:06:40.865Z] [LOG]    Gross Salary: Rs.1.00
[2025-10-22T08:06:40.866Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-22T08:06:40.866Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-22T08:06:40.867Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:06:40.867Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:06:40.867Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:06:40.868Z] [LOG]    NET SALARY: Rs.1.00
[2025-10-22T08:06:40.868Z] [LOG] ======================================================================

[2025-10-22T08:06:40.869Z] [LOG] ✅ Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-22T08:06:40.869Z] [LOG] 📊 Progress: 14/34 (41.2%)
[2025-10-22T08:06:40.869Z] [LOG] 
🧮 Processing: Safna Nawas null (EMP000021)
[2025-10-22T08:06:40.869Z] [LOG] 📋 Record ID: 61e5883b-2634-466d-8503-15eab9ee4278
[2025-10-22T08:06:40.870Z] [LOG] 
======================================================================
[2025-10-22T08:06:40.870Z] [LOG] 🧮 CALCULATING PAYROLL: Safna Nawas null (EMP000021)
[2025-10-22T08:06:40.870Z] [LOG] ======================================================================
[2025-10-22T08:06:41.618Z] [LOG] 🔍 Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-22T08:06:41.619Z] [LOG]    Total components: 10
[2025-10-22T08:06:41.619Z] [LOG]    Applicable components: 10
[2025-10-22T08:06:41.619Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T08:06:42.337Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:06:42.337Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:06:42.516Z] [LOG] 📊 Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:42.718Z] [LOG] 📊 Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:42.912Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:42.912Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:06:42.913Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:06:42.913Z] [LOG] 💰 GROSS CALCULATION for Safna Nawas null:
[2025-10-22T08:06:42.913Z] [LOG]    Base Salary: 50000
[2025-10-22T08:06:42.914Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:06:42.914Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:06:42.914Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:43.120Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:06:43.295Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:06:43.295Z] [LOG]    Employee ID: 0143c977-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:43.295Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:06:43.296Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:06:43.296Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T08:06:43.526Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:06:43.526Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T08:06:43.527Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T08:06:43.527Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T08:06:43.527Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:06:43.528Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:06:43.528Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:06:44.203Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:06:44.203Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:06:44.463Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:06:44.463Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:44.463Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:44.464Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:44.650Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:06:44.651Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:06:44.651Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:06:44.651Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:44.651Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:06:44.652Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:06:44.652Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:44.652Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:44.653Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:44.653Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:06:44.653Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:06:44.653Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T08:06:44.654Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T08:06:44.654Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:44.654Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:44.655Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T08:06:44.655Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:06:44.655Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T08:06:44.656Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T08:06:44.656Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:44.656Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:44.656Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T08:06:44.657Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:06:44.657Z] [LOG]       Calculated At: Oct 22, 2025, 13:36:44
[2025-10-22T08:06:44.657Z] [LOG]       Expected Earned (until NOW): Rs.31999.44
[2025-10-22T08:06:44.657Z] [LOG]       Actual Earned (until NOW): Rs.3999.93
[2025-10-22T08:06:44.658Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:44.658Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T08:06:44.658Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:06:44.659Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:06:44.659Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:06:44.659Z] [LOG]    Gross Salary: 50000
[2025-10-22T08:06:44.659Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:06:44.659Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:06:44.660Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:44.660Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:06:44.660Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:44.660Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:06:44.661Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:44.661Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:06:44.661Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:44.662Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:06:44.662Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:44.662Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:06:44.662Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:44.662Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:06:44.663Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:44.663Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:06:44.663Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:44.663Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:06:44.664Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:44.664Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:06:44.664Z] [LOG] Regular deductions for Safna Nawas null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:06:44.665Z] [LOG] Combined deductions for Safna Nawas null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:36:44)"
    }
  ],
  "total": 27999.51
}
[2025-10-22T08:06:44.861Z] [LOG] Creating components for record 61e5883b-2634-466d-8503-15eab9ee4278: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:06:44.862Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T08:06:45.039Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:06:45.217Z] [LOG] Created payroll_record_component: 73f38c96-9f79-4788-b01e-78bd3a6eab07 for Attendance Deduction
[2025-10-22T08:06:45.573Z] [LOG] ✅ Financial balances updated successfully for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:45.574Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:06:45.574Z] [LOG] 
======================================================================
[2025-10-22T08:06:45.574Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Safna Nawas null
[2025-10-22T08:06:45.574Z] [LOG] ======================================================================
[2025-10-22T08:06:45.574Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T08:06:45.575Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T08:06:45.575Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T08:06:45.575Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:06:45.576Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:06:45.576Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:06:45.576Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T08:06:45.576Z] [LOG] ======================================================================

[2025-10-22T08:06:45.577Z] [LOG] ✅ Safna Nawas null: Calculation completed successfully
[2025-10-22T08:06:45.577Z] [LOG] 📊 Progress: 15/34 (44.1%)
[2025-10-22T08:06:45.577Z] [LOG] 
🧮 Processing: Uthpala null (EMP000006)
[2025-10-22T08:06:45.578Z] [LOG] 📋 Record ID: 6755652a-51f6-461d-a0d0-75a65bc2defa
[2025-10-22T08:06:45.578Z] [LOG] 
======================================================================
[2025-10-22T08:06:45.578Z] [LOG] 🧮 CALCULATING PAYROLL: Uthpala null (EMP000006)
[2025-10-22T08:06:45.579Z] [LOG] ======================================================================
[2025-10-22T08:06:46.374Z] [LOG] 🔍 Component filtering for employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-22T08:06:46.374Z] [LOG]    Total components: 10
[2025-10-22T08:06:46.374Z] [LOG]    Applicable components: 10
[2025-10-22T08:06:46.374Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-22T08:06:49.103Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:06:49.103Z] [LOG] 🔄 Processing financial records for employee 0143a539-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:06:49.285Z] [LOG] 📊 Found 0 active loans for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:49.479Z] [LOG] 📊 Found 0 active advances for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:49.710Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:49.711Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:06:49.712Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:06:49.713Z] [LOG] 💰 GROSS CALCULATION for Uthpala null:
[2025-10-22T08:06:49.713Z] [LOG]    Base Salary: 100000
[2025-10-22T08:06:49.714Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:06:49.715Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:06:49.715Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:49.939Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:06:50.164Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:06:50.165Z] [LOG]    Employee ID: 0143a539-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:50.166Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:06:50.167Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:06:50.167Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-22T08:06:50.773Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:06:50.773Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-22T08:06:50.774Z] [LOG]       Weekday Hourly Rate: Rs.500.00
[2025-10-22T08:06:50.775Z] [LOG]       Saturday Hourly Rate: Rs.500.00
[2025-10-22T08:06:50.775Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:06:50.776Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:06:50.777Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:06:51.334Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:06:51.335Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:06:51.522Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:06:51.523Z] [LOG]       Weekday: 15.00h
[2025-10-22T08:06:51.524Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:51.524Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:51.708Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:06:51.709Z] [LOG]       Weekday: 104.00h
[2025-10-22T08:06:51.709Z] [LOG]       Saturday: 24.00h
[2025-10-22T08:06:51.709Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:51.709Z] [LOG]       Total Expected: 128.00h
[2025-10-22T08:06:51.709Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:06:51.710Z] [LOG]       Weekday: 15.00h
[2025-10-22T08:06:51.710Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:51.710Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:51.710Z] [LOG]       Total Actual: 15.00h
[2025-10-22T08:06:51.710Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:06:51.710Z] [LOG]       Weekday: 104.00h × Rs.500.00 = Rs.52000.00
[2025-10-22T08:06:51.711Z] [LOG]       Saturday: 24.00h × Rs.500.00 = Rs.12000.00
[2025-10-22T08:06:51.711Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:51.711Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:51.711Z] [LOG]       Total Expected Earned: Rs.64000.00
[2025-10-22T08:06:51.713Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:06:51.714Z] [LOG]       Weekday: 15.00h × Rs.500.00 = Rs.7500.00
[2025-10-22T08:06:51.714Z] [LOG]       Saturday: 0.00h × Rs.500.00 = Rs.0.00
[2025-10-22T08:06:51.714Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:51.714Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:51.715Z] [LOG]       Total Actual Earned: Rs.7500.00
[2025-10-22T08:06:51.715Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:06:51.716Z] [LOG]       Calculated At: Oct 22, 2025, 13:36:51
[2025-10-22T08:06:51.716Z] [LOG]       Expected Earned (until NOW): Rs.64000.00
[2025-10-22T08:06:51.716Z] [LOG]       Actual Earned (until NOW): Rs.7500.00
[2025-10-22T08:06:51.716Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:51.717Z] [LOG]       Attendance Deduction: Rs.56500.00
[2025-10-22T08:06:51.717Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:06:51.717Z] [LOG]       📉 Shortfall: 113.00 hours (88.28% of expected)
[2025-10-22T08:06:51.717Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:06:51.717Z] [LOG]    Gross Salary: 100000
[2025-10-22T08:06:51.717Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:06:51.717Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:06:51.718Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:51.718Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:06:51.718Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:51.718Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:06:51.718Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:51.719Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:06:51.719Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:51.719Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:06:51.719Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:51.719Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:06:51.720Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:51.720Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:06:51.720Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:51.720Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:06:51.720Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:51.720Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:06:51.720Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:51.721Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:06:51.721Z] [LOG] Regular deductions for Uthpala null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:06:51.721Z] [LOG] Combined deductions for Uthpala null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 56500,
      "details": "Shortfall: 113.00h of 128.00h expected (calculated at Oct 22, 2025, 13:36:51)"
    }
  ],
  "total": 56500
}
[2025-10-22T08:06:51.898Z] [LOG] Creating components for record 6755652a-51f6-461d-a0d0-75a65bc2defa: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:06:51.899Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 56500
}
[2025-10-22T08:06:52.076Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:06:52.256Z] [LOG] Created payroll_record_component: 710fff52-38df-44d0-bfcc-0cebade458e0 for Attendance Deduction
[2025-10-22T08:06:52.622Z] [LOG] ✅ Financial balances updated successfully for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:52.623Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:06:52.624Z] [LOG] 
======================================================================
[2025-10-22T08:06:52.624Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Uthpala null
[2025-10-22T08:06:52.625Z] [LOG] ======================================================================
[2025-10-22T08:06:52.626Z] [LOG]    Gross Salary: Rs.100000.00
[2025-10-22T08:06:52.626Z] [LOG]    Total Deductions: Rs.56500.00
[2025-10-22T08:06:52.627Z] [LOG]       - Attendance Deduction: Rs.56500.00
[2025-10-22T08:06:52.627Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:06:52.628Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:06:52.629Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:06:52.630Z] [LOG]    NET SALARY: Rs.43500.00
[2025-10-22T08:06:52.631Z] [LOG] ======================================================================

[2025-10-22T08:06:52.632Z] [LOG] ✅ Uthpala null: Calculation completed successfully
[2025-10-22T08:06:52.632Z] [LOG] 📊 Progress: 16/34 (47.1%)
[2025-10-22T08:06:52.633Z] [LOG] 
🧮 Processing: customer null (EMP000036)
[2025-10-22T08:06:52.634Z] [LOG] 📋 Record ID: 6dbafd66-ff0f-4c35-9982-92c0f052e877
[2025-10-22T08:06:52.635Z] [LOG] 
======================================================================
[2025-10-22T08:06:52.636Z] [LOG] 🧮 CALCULATING PAYROLL: customer null (EMP000036)
[2025-10-22T08:06:52.636Z] [LOG] ======================================================================
[2025-10-22T08:06:53.372Z] [LOG] 🔍 Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-22T08:06:53.373Z] [LOG]    Total components: 10
[2025-10-22T08:06:53.373Z] [LOG]    Applicable components: 10
[2025-10-22T08:06:53.374Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-22T08:06:54.144Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:06:54.165Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:06:54.427Z] [LOG] 📊 Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:54.637Z] [LOG] 📊 Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:54.815Z] [LOG] 📊 Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:54.815Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:06:54.816Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:06:54.817Z] [LOG] 💰 GROSS CALCULATION for customer null:
[2025-10-22T08:06:54.817Z] [LOG]    Base Salary: 0
[2025-10-22T08:06:54.818Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:06:54.818Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:06:54.818Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:55.001Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:06:55.181Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:06:55.181Z] [LOG]    Employee ID: 014409a2-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:55.182Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:06:55.183Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:06:55.183Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-22T08:06:55.364Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:06:55.365Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-22T08:06:55.366Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-22T08:06:55.366Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-22T08:06:55.367Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:06:55.367Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:06:55.368Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:06:56.228Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:06:56.228Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:06:56.412Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:06:56.413Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:56.413Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:56.414Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:56.682Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:06:56.682Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:06:56.683Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:06:56.683Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:56.684Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:06:56.685Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:06:56.686Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:06:56.686Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:06:56.687Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:06:56.687Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:06:56.688Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:06:56.690Z] [LOG]       Weekday: 110.50h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:56.690Z] [LOG]       Saturday: 25.50h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:56.691Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:56.692Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:56.692Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-22T08:06:56.693Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:06:56.696Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:56.697Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:56.697Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:06:56.698Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:56.699Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-22T08:06:56.700Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:06:56.701Z] [LOG]       Calculated At: Oct 22, 2025, 13:36:56
[2025-10-22T08:06:56.701Z] [LOG]       Expected Earned (until NOW): Rs.0.00
[2025-10-22T08:06:56.702Z] [LOG]       Actual Earned (until NOW): Rs.0.00
[2025-10-22T08:06:56.702Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:06:56.703Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-22T08:06:56.704Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:06:56.704Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-22T08:06:56.705Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:06:56.706Z] [LOG]    Gross Salary: 0
[2025-10-22T08:06:56.706Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:06:56.707Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:06:56.707Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:56.708Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:06:56.709Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:56.709Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:06:56.710Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:56.711Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:06:56.711Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:56.712Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:06:56.713Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:56.713Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:06:56.714Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:56.714Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:06:56.714Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:56.715Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:06:56.715Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:56.715Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:06:56.715Z] [LOG]    Fixed amount: 0
[2025-10-22T08:06:56.716Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:06:56.716Z] [LOG] Regular deductions for customer null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:06:56.717Z] [LOG] Combined deductions for customer null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:36:56)"
    }
  ],
  "total": 0
}
[2025-10-22T08:06:56.904Z] [LOG] Creating components for record 6dbafd66-ff0f-4c35-9982-92c0f052e877: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:06:56.906Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-22T08:06:57.127Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:06:57.308Z] [LOG] Created payroll_record_component: 9e3c278d-3a76-460e-b75d-465b5ccfd4dc for Attendance Deduction
[2025-10-22T08:06:57.759Z] [LOG] ✅ Financial balances updated successfully for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-22T08:06:57.759Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:06:57.760Z] [LOG] 
======================================================================
[2025-10-22T08:06:57.760Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: customer null
[2025-10-22T08:06:57.761Z] [LOG] ======================================================================
[2025-10-22T08:06:57.761Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-22T08:06:57.762Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-22T08:06:57.762Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-22T08:06:57.764Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:06:57.765Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:06:57.766Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:06:57.766Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-22T08:06:57.767Z] [LOG] ======================================================================

[2025-10-22T08:06:57.767Z] [LOG] ✅ customer null: Calculation completed successfully
[2025-10-22T08:06:57.768Z] [LOG] 📊 Progress: 17/34 (50.0%)
[2025-10-22T08:06:57.768Z] [LOG] 
🧮 Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-22T08:06:57.769Z] [LOG] 📋 Record ID: 6f69b650-ac2e-402b-99dc-d281b479ca92
[2025-10-22T08:06:57.769Z] [LOG] 
======================================================================
[2025-10-22T08:06:57.770Z] [LOG] 🧮 CALCULATING PAYROLL: Nimdiya Ranasinghe null (EMP000045)
[2025-10-22T08:06:57.770Z] [LOG] ======================================================================
[2025-10-22T08:06:58.997Z] [LOG] 🔍 Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-22T08:06:58.998Z] [LOG]    Total components: 10
[2025-10-22T08:06:58.998Z] [LOG]    Applicable components: 10
[2025-10-22T08:06:58.998Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T08:06:59.712Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:06:59.713Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:06:59.888Z] [LOG] 📊 Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:00.066Z] [LOG] 📊 Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:00.258Z] [LOG] 📊 Found 0 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:00.258Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:07:00.260Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:07:00.260Z] [LOG] 💰 GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-22T08:07:00.261Z] [LOG]    Base Salary: 35000
[2025-10-22T08:07:00.262Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:07:00.262Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:07:00.263Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:00.437Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:07:00.628Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:07:00.628Z] [LOG]    Employee ID: 01444074-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:00.629Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:07:00.630Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:07:00.630Z] [LOG]    Base Salary (Full Month): Rs.35000.00
[2025-10-22T08:07:00.804Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:07:00.805Z] [LOG]       Daily Salary: Rs.1400.00
[2025-10-22T08:07:00.805Z] [LOG]       Weekday Hourly Rate: Rs.164.71
[2025-10-22T08:07:00.806Z] [LOG]       Saturday Hourly Rate: Rs.164.71
[2025-10-22T08:07:00.806Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:07:00.807Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:07:00.808Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:07:01.335Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:07:01.336Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:07:01.526Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:07:01.527Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:01.528Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:01.528Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:01.703Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:07:01.703Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:07:01.704Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:07:01.704Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:01.704Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:07:01.705Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:07:01.705Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:01.705Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:01.706Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:01.706Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:07:01.706Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:07:01.707Z] [LOG]       Weekday: 110.50h × Rs.164.71 = Rs.18200.46
[2025-10-22T08:07:01.707Z] [LOG]       Saturday: 25.50h × Rs.164.71 = Rs.4200.11
[2025-10-22T08:07:01.707Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:01.707Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:01.708Z] [LOG]       Total Expected Earned: Rs.22400.56
[2025-10-22T08:07:01.708Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:07:01.708Z] [LOG]       Weekday: 17.00h × Rs.164.71 = Rs.2800.07
[2025-10-22T08:07:01.709Z] [LOG]       Saturday: 0.00h × Rs.164.71 = Rs.0.00
[2025-10-22T08:07:01.709Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:01.709Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:01.710Z] [LOG]       Total Actual Earned: Rs.2800.07
[2025-10-22T08:07:01.710Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:07:01.711Z] [LOG]       Calculated At: Oct 22, 2025, 13:37:01
[2025-10-22T08:07:01.711Z] [LOG]       Expected Earned (until NOW): Rs.22400.56
[2025-10-22T08:07:01.711Z] [LOG]       Actual Earned (until NOW): Rs.2800.07
[2025-10-22T08:07:01.711Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:01.712Z] [LOG]       Attendance Deduction: Rs.19600.49
[2025-10-22T08:07:01.712Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:07:01.712Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:07:01.712Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:07:01.713Z] [LOG]    Gross Salary: 35000
[2025-10-22T08:07:01.713Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:07:01.713Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:07:01.714Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:01.714Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:07:01.714Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:01.715Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:07:01.715Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:01.715Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:07:01.715Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:01.715Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:07:01.716Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:01.716Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:07:01.716Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:01.716Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:07:01.717Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:01.717Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:07:01.717Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:01.717Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:07:01.718Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:01.718Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:07:01.718Z] [LOG] Regular deductions for Nimdiya Ranasinghe null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:07:01.718Z] [LOG] Combined deductions for Nimdiya Ranasinghe null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 19600.49,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:37:01)"
    }
  ],
  "total": 19600.49
}
[2025-10-22T08:07:01.910Z] [LOG] Creating components for record 6f69b650-ac2e-402b-99dc-d281b479ca92: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:07:01.912Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 19600.49
}
[2025-10-22T08:07:02.094Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:07:02.274Z] [LOG] Created payroll_record_component: caba2faf-cd2c-42f8-be7a-abb02378aed2 for Attendance Deduction
[2025-10-22T08:07:02.631Z] [LOG] ✅ Financial balances updated successfully for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:02.631Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:07:02.632Z] [LOG] 
======================================================================
[2025-10-22T08:07:02.633Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Nimdiya Ranasinghe null
[2025-10-22T08:07:02.634Z] [LOG] ======================================================================
[2025-10-22T08:07:02.634Z] [LOG]    Gross Salary: Rs.35000.00
[2025-10-22T08:07:02.635Z] [LOG]    Total Deductions: Rs.19600.49
[2025-10-22T08:07:02.635Z] [LOG]       - Attendance Deduction: Rs.19600.49
[2025-10-22T08:07:02.636Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:07:02.636Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:07:02.637Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:07:02.638Z] [LOG]    NET SALARY: Rs.15399.51
[2025-10-22T08:07:02.638Z] [LOG] ======================================================================

[2025-10-22T08:07:02.639Z] [LOG] ✅ Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-22T08:07:02.640Z] [LOG] 📊 Progress: 18/34 (52.9%)
[2025-10-22T08:07:02.640Z] [LOG] 
🧮 Processing: Saru null (EMP000022)
[2025-10-22T08:07:02.641Z] [LOG] 📋 Record ID: 74e2a286-a51c-4727-a143-7765bf1a0f49
[2025-10-22T08:07:02.642Z] [LOG] 
======================================================================
[2025-10-22T08:07:02.643Z] [LOG] 🧮 CALCULATING PAYROLL: Saru null (EMP000022)
[2025-10-22T08:07:02.643Z] [LOG] ======================================================================
[2025-10-22T08:07:03.396Z] [LOG] 🔍 Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-22T08:07:03.396Z] [LOG]    Total components: 10
[2025-10-22T08:07:03.397Z] [LOG]    Applicable components: 10
[2025-10-22T08:07:03.397Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T08:07:04.110Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:07:04.111Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:07:04.295Z] [LOG] 📊 Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:04.544Z] [LOG] 📊 Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:04.722Z] [LOG] 📊 Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:04.723Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:07:04.724Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:07:04.725Z] [LOG] 💰 GROSS CALCULATION for Saru null:
[2025-10-22T08:07:04.726Z] [LOG]    Base Salary: 50000
[2025-10-22T08:07:04.726Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:07:04.727Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:07:04.727Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:04.927Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:07:05.103Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:07:05.104Z] [LOG]    Employee ID: 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:05.105Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:07:05.105Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:07:05.106Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T08:07:05.284Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:07:05.285Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T08:07:05.285Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T08:07:05.286Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T08:07:05.286Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:07:05.287Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:07:05.288Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:07:05.824Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:07:05.825Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:07:06.001Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:07:06.001Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:06.002Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:06.003Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:06.178Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:07:06.179Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:07:06.180Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:07:06.180Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:06.181Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:07:06.181Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:07:06.182Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:06.183Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:06.183Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:06.184Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:07:06.184Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:07:06.185Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T08:07:06.186Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T08:07:06.187Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:06.188Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:06.188Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T08:07:06.189Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:07:06.190Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T08:07:06.190Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T08:07:06.191Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:06.192Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:06.192Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T08:07:06.194Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:07:06.194Z] [LOG]       Calculated At: Oct 22, 2025, 13:37:06
[2025-10-22T08:07:06.195Z] [LOG]       Expected Earned (until NOW): Rs.31999.44
[2025-10-22T08:07:06.196Z] [LOG]       Actual Earned (until NOW): Rs.3999.93
[2025-10-22T08:07:06.197Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:06.197Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T08:07:06.198Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:07:06.198Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:07:06.199Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:07:06.200Z] [LOG]    Gross Salary: 50000
[2025-10-22T08:07:06.200Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:07:06.201Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:07:06.201Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:06.202Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:07:06.203Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:06.203Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:07:06.204Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:06.204Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:07:06.205Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:06.206Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:07:06.206Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:06.207Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:07:06.207Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:06.208Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:07:06.209Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:06.209Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:07:06.210Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:06.210Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:07:06.211Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:06.212Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:07:06.212Z] [LOG] Regular deductions for Saru null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:07:06.213Z] [LOG] Combined deductions for Saru null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:37:06)"
    }
  ],
  "total": 27999.51
}
[2025-10-22T08:07:06.395Z] [LOG] Creating components for record 74e2a286-a51c-4727-a143-7765bf1a0f49: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:07:06.397Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T08:07:06.573Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:07:06.752Z] [LOG] Created payroll_record_component: 2bfc50d7-6384-4bdd-be3c-c751c4264514 for Attendance Deduction
[2025-10-22T08:07:07.173Z] [LOG] ✅ Financial balances updated successfully for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:07.174Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:07:07.174Z] [LOG] 
======================================================================
[2025-10-22T08:07:07.174Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saru null
[2025-10-22T08:07:07.175Z] [LOG] ======================================================================
[2025-10-22T08:07:07.175Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T08:07:07.176Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T08:07:07.176Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T08:07:07.176Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:07:07.177Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:07:07.177Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:07:07.177Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T08:07:07.178Z] [LOG] ======================================================================

[2025-10-22T08:07:07.178Z] [LOG] ✅ Saru null: Calculation completed successfully
[2025-10-22T08:07:07.178Z] [LOG] 📊 Progress: 19/34 (55.9%)
[2025-10-22T08:07:07.180Z] [LOG] 
🧮 Processing: Shandeep null (EMP000034)
[2025-10-22T08:07:07.180Z] [LOG] 📋 Record ID: 79a39224-d849-454b-bea5-265904f55ff1
[2025-10-22T08:07:07.180Z] [LOG] 
======================================================================
[2025-10-22T08:07:07.181Z] [LOG] 🧮 CALCULATING PAYROLL: Shandeep null (EMP000034)
[2025-10-22T08:07:07.181Z] [LOG] ======================================================================
[2025-10-22T08:07:08.140Z] [LOG] 🔍 Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-22T08:07:08.140Z] [LOG]    Total components: 10
[2025-10-22T08:07:08.141Z] [LOG]    Applicable components: 10
[2025-10-22T08:07:08.141Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T08:07:09.372Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:07:09.373Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:07:09.693Z] [LOG] 📊 Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:09.917Z] [LOG] 📊 Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:10.099Z] [LOG] 📊 Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:10.100Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:07:10.101Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:07:10.102Z] [LOG] 💰 GROSS CALCULATION for Shandeep null:
[2025-10-22T08:07:10.103Z] [LOG]    Base Salary: 80000
[2025-10-22T08:07:10.103Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:07:10.104Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:07:10.105Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:10.289Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:07:10.508Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:07:10.509Z] [LOG]    Employee ID: 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:10.509Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:07:10.509Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:07:10.509Z] [LOG]    Base Salary (Full Month): Rs.80000.00
[2025-10-22T08:07:10.758Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:07:10.758Z] [LOG]       Daily Salary: Rs.3200.00
[2025-10-22T08:07:10.758Z] [LOG]       Weekday Hourly Rate: Rs.376.47
[2025-10-22T08:07:10.758Z] [LOG]       Saturday Hourly Rate: Rs.376.47
[2025-10-22T08:07:10.759Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:07:10.759Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:07:10.759Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:07:11.636Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:07:11.637Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:07:12.159Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:07:12.160Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:12.160Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:12.161Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:12.373Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:07:12.373Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:07:12.374Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:07:12.375Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:12.375Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:07:12.376Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:07:12.376Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:12.377Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:12.377Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:12.378Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:07:12.379Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:07:12.380Z] [LOG]       Weekday: 110.50h × Rs.376.47 = Rs.41599.94
[2025-10-22T08:07:12.381Z] [LOG]       Saturday: 25.50h × Rs.376.47 = Rs.9599.99
[2025-10-22T08:07:12.381Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:12.382Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:12.382Z] [LOG]       Total Expected Earned: Rs.51199.92
[2025-10-22T08:07:12.383Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:07:12.384Z] [LOG]       Weekday: 17.00h × Rs.376.47 = Rs.6399.99
[2025-10-22T08:07:12.385Z] [LOG]       Saturday: 0.00h × Rs.376.47 = Rs.0.00
[2025-10-22T08:07:12.386Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:12.386Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:12.387Z] [LOG]       Total Actual Earned: Rs.6399.99
[2025-10-22T08:07:12.388Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:07:12.389Z] [LOG]       Calculated At: Oct 22, 2025, 13:37:12
[2025-10-22T08:07:12.389Z] [LOG]       Expected Earned (until NOW): Rs.51199.92
[2025-10-22T08:07:12.390Z] [LOG]       Actual Earned (until NOW): Rs.6399.99
[2025-10-22T08:07:12.391Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:12.391Z] [LOG]       Attendance Deduction: Rs.44799.93
[2025-10-22T08:07:12.392Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:07:12.392Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:07:12.393Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:07:12.394Z] [LOG]    Gross Salary: 80000
[2025-10-22T08:07:12.394Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:07:12.395Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:07:12.395Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:12.397Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:07:12.397Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:12.398Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:07:12.398Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:12.399Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:07:12.400Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:12.400Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:07:12.401Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:12.402Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:07:12.402Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:12.403Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:07:12.403Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:12.403Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:07:12.404Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:12.404Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:07:12.404Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:12.405Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:07:12.405Z] [LOG] Regular deductions for Shandeep null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:07:12.406Z] [LOG] Combined deductions for Shandeep null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 44799.93000000001,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:37:12)"
    }
  ],
  "total": 44799.93000000001
}
[2025-10-22T08:07:12.609Z] [LOG] Creating components for record 79a39224-d849-454b-bea5-265904f55ff1: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:07:12.611Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 44799.93000000001
}
[2025-10-22T08:07:13.123Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:07:13.632Z] [LOG] Created payroll_record_component: ea2e7dc7-50b7-45b8-88fb-168195d74717 for Attendance Deduction
[2025-10-22T08:07:14.066Z] [LOG] ✅ Financial balances updated successfully for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:14.067Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:07:14.067Z] [LOG] 
======================================================================
[2025-10-22T08:07:14.068Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Shandeep null
[2025-10-22T08:07:14.069Z] [LOG] ======================================================================
[2025-10-22T08:07:14.069Z] [LOG]    Gross Salary: Rs.80000.00
[2025-10-22T08:07:14.070Z] [LOG]    Total Deductions: Rs.44799.93
[2025-10-22T08:07:14.070Z] [LOG]       - Attendance Deduction: Rs.44799.93
[2025-10-22T08:07:14.071Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:07:14.071Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:07:14.072Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:07:14.073Z] [LOG]    NET SALARY: Rs.35200.07
[2025-10-22T08:07:14.073Z] [LOG] ======================================================================

[2025-10-22T08:07:14.074Z] [LOG] ✅ Shandeep null: Calculation completed successfully
[2025-10-22T08:07:14.075Z] [LOG] 📊 Progress: 20/34 (58.8%)
[2025-10-22T08:07:14.075Z] [LOG] 
🧮 Processing: Sumaiya null (EMP000016)
[2025-10-22T08:07:14.076Z] [LOG] 📋 Record ID: 7f4687e4-fc58-4548-a3ba-7777b83e7e56
[2025-10-22T08:07:14.077Z] [LOG] 
======================================================================
[2025-10-22T08:07:14.077Z] [LOG] 🧮 CALCULATING PAYROLL: Sumaiya null (EMP000016)
[2025-10-22T08:07:14.078Z] [LOG] ======================================================================
[2025-10-22T08:07:15.412Z] [LOG] 🔍 Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-22T08:07:15.412Z] [LOG]    Total components: 10
[2025-10-22T08:07:15.413Z] [LOG]    Applicable components: 10
[2025-10-22T08:07:15.414Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T08:07:16.891Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:07:16.892Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:07:17.071Z] [LOG] 📊 Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:17.254Z] [LOG] 📊 Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:17.436Z] [LOG] 📊 Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:17.436Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:07:17.436Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:07:17.437Z] [LOG] 💰 GROSS CALCULATION for Sumaiya null:
[2025-10-22T08:07:17.437Z] [LOG]    Base Salary: 60000
[2025-10-22T08:07:17.437Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:07:17.437Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:07:17.437Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:17.655Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:07:17.848Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:07:17.848Z] [LOG]    Employee ID: 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:17.848Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:07:17.849Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:07:17.849Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-22T08:07:18.182Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:07:18.183Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-22T08:07:18.183Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-22T08:07:18.183Z] [LOG]       Saturday Hourly Rate: Rs.282.35
[2025-10-22T08:07:18.183Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:07:18.183Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:07:18.183Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:07:19.001Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:07:19.001Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:07:19.265Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:07:19.266Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:19.266Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:19.266Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:19.542Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:07:19.542Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:07:19.542Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:07:19.543Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:19.543Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:07:19.543Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:07:19.543Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:19.544Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:19.544Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:19.544Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:07:19.544Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:07:19.544Z] [LOG]       Weekday: 110.50h × Rs.282.35 = Rs.31199.68
[2025-10-22T08:07:19.545Z] [LOG]       Saturday: 25.50h × Rs.282.35 = Rs.7199.93
[2025-10-22T08:07:19.545Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:19.545Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:19.546Z] [LOG]       Total Expected Earned: Rs.38399.60
[2025-10-22T08:07:19.546Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:07:19.546Z] [LOG]       Weekday: 17.00h × Rs.282.35 = Rs.4799.95
[2025-10-22T08:07:19.546Z] [LOG]       Saturday: 0.00h × Rs.282.35 = Rs.0.00
[2025-10-22T08:07:19.546Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:19.547Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:19.547Z] [LOG]       Total Actual Earned: Rs.4799.95
[2025-10-22T08:07:19.547Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:07:19.547Z] [LOG]       Calculated At: Oct 22, 2025, 13:37:19
[2025-10-22T08:07:19.548Z] [LOG]       Expected Earned (until NOW): Rs.38399.60
[2025-10-22T08:07:19.548Z] [LOG]       Actual Earned (until NOW): Rs.4799.95
[2025-10-22T08:07:19.548Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:19.548Z] [LOG]       Attendance Deduction: Rs.33599.65
[2025-10-22T08:07:19.548Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:07:19.548Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:07:19.549Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:07:19.549Z] [LOG]    Gross Salary: 60000
[2025-10-22T08:07:19.549Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:07:19.549Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:07:19.550Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:19.550Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:07:19.550Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:19.550Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:07:19.551Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:19.551Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:07:19.551Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:19.551Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:07:19.551Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:19.551Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:07:19.552Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:19.552Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:07:19.552Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:19.552Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:07:19.552Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:19.553Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:07:19.553Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:19.553Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:07:19.553Z] [LOG] Regular deductions for Sumaiya null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:07:19.554Z] [LOG] Combined deductions for Sumaiya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 33599.65000000001,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:37:19)"
    }
  ],
  "total": 33599.65000000001
}
[2025-10-22T08:07:19.812Z] [LOG] Creating components for record 7f4687e4-fc58-4548-a3ba-7777b83e7e56: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:07:19.813Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 33599.65000000001
}
[2025-10-22T08:07:20.017Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:07:20.405Z] [LOG] Created payroll_record_component: c4f0e6a2-bb7f-467c-bb99-c7d64ff6582d for Attendance Deduction
[2025-10-22T08:07:21.234Z] [LOG] ✅ Financial balances updated successfully for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:21.234Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:07:21.234Z] [LOG] 
======================================================================
[2025-10-22T08:07:21.235Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sumaiya null
[2025-10-22T08:07:21.235Z] [LOG] ======================================================================
[2025-10-22T08:07:21.235Z] [LOG]    Gross Salary: Rs.60000.00
[2025-10-22T08:07:21.235Z] [LOG]    Total Deductions: Rs.33599.65
[2025-10-22T08:07:21.236Z] [LOG]       - Attendance Deduction: Rs.33599.65
[2025-10-22T08:07:21.236Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:07:21.236Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:07:21.236Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:07:21.237Z] [LOG]    NET SALARY: Rs.26400.35
[2025-10-22T08:07:21.237Z] [LOG] ======================================================================

[2025-10-22T08:07:21.237Z] [LOG] ✅ Sumaiya null: Calculation completed successfully
[2025-10-22T08:07:21.237Z] [LOG] 📊 Progress: 21/34 (61.8%)
[2025-10-22T08:07:21.237Z] [LOG] 
🧮 Processing: Piyumi null (EMP000025)
[2025-10-22T08:07:21.238Z] [LOG] 📋 Record ID: 88571066-b0c6-4069-bffa-bf5eb6654d18
[2025-10-22T08:07:21.238Z] [LOG] 
======================================================================
[2025-10-22T08:07:21.238Z] [LOG] 🧮 CALCULATING PAYROLL: Piyumi null (EMP000025)
[2025-10-22T08:07:21.239Z] [LOG] ======================================================================
[2025-10-22T08:07:22.131Z] [LOG] 🔍 Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-22T08:07:22.131Z] [LOG]    Total components: 10
[2025-10-22T08:07:22.131Z] [LOG]    Applicable components: 10
[2025-10-22T08:07:22.131Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T08:07:22.852Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:07:22.852Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:07:23.030Z] [LOG] 📊 Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:23.210Z] [LOG] 📊 Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:23.387Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:23.388Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:07:23.388Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:07:23.388Z] [LOG] 💰 GROSS CALCULATION for Piyumi null:
[2025-10-22T08:07:23.389Z] [LOG]    Base Salary: 50000
[2025-10-22T08:07:23.389Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:07:23.389Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:07:23.389Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:23.565Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:07:23.741Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:07:23.741Z] [LOG]    Employee ID: 0143e565-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:23.741Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:07:23.741Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:07:23.742Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T08:07:23.919Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:07:23.920Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T08:07:23.920Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T08:07:23.920Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T08:07:23.920Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:07:23.920Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:07:23.921Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:07:24.462Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:07:24.462Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:07:24.640Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:07:24.640Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:24.640Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:24.640Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:24.818Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:07:24.818Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:07:24.818Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:07:24.819Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:24.819Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:07:24.819Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:07:24.819Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:24.819Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:24.819Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:24.819Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:07:24.820Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:07:24.820Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T08:07:24.820Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T08:07:24.820Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:24.820Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:24.820Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T08:07:24.820Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:07:24.820Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T08:07:24.821Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T08:07:24.821Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:24.821Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:24.821Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T08:07:24.821Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:07:24.821Z] [LOG]       Calculated At: Oct 22, 2025, 13:37:24
[2025-10-22T08:07:24.822Z] [LOG]       Expected Earned (until NOW): Rs.31999.44
[2025-10-22T08:07:24.822Z] [LOG]       Actual Earned (until NOW): Rs.3999.93
[2025-10-22T08:07:24.822Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:24.822Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T08:07:24.822Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:07:24.822Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:07:24.822Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:07:24.822Z] [LOG]    Gross Salary: 50000
[2025-10-22T08:07:24.822Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:07:24.823Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:07:24.823Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:24.823Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:07:24.823Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:24.823Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:07:24.823Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:24.824Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:07:24.824Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:24.824Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:07:24.824Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:24.824Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:07:24.824Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:24.824Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:07:24.824Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:24.825Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:07:24.825Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:24.825Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:07:24.825Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:24.825Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:07:24.825Z] [LOG] Regular deductions for Piyumi null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:07:24.825Z] [LOG] Combined deductions for Piyumi null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:37:24)"
    }
  ],
  "total": 27999.51
}
[2025-10-22T08:07:25.003Z] [LOG] Creating components for record 88571066-b0c6-4069-bffa-bf5eb6654d18: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:07:25.003Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T08:07:25.179Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:07:25.372Z] [LOG] Created payroll_record_component: 95d49821-25b6-41af-b310-d3bb92a1e4ee for Attendance Deduction
[2025-10-22T08:07:25.742Z] [LOG] ✅ Financial balances updated successfully for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:25.742Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:07:25.742Z] [LOG] 
======================================================================
[2025-10-22T08:07:25.742Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Piyumi null
[2025-10-22T08:07:25.743Z] [LOG] ======================================================================
[2025-10-22T08:07:25.743Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T08:07:25.743Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T08:07:25.743Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T08:07:25.744Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:07:25.744Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:07:25.744Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:07:25.744Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T08:07:25.745Z] [LOG] ======================================================================

[2025-10-22T08:07:25.745Z] [LOG] ✅ Piyumi null: Calculation completed successfully
[2025-10-22T08:07:25.745Z] [LOG] 📊 Progress: 22/34 (64.7%)
[2025-10-22T08:07:25.746Z] [LOG] 
🧮 Processing: Chamodi null (EMP000032)
[2025-10-22T08:07:25.747Z] [LOG] 📋 Record ID: 89ceea4d-10b2-49d2-8d07-0c0124e5c259
[2025-10-22T08:07:25.747Z] [LOG] 
======================================================================
[2025-10-22T08:07:25.747Z] [LOG] 🧮 CALCULATING PAYROLL: Chamodi null (EMP000032)
[2025-10-22T08:07:25.747Z] [LOG] ======================================================================
[2025-10-22T08:07:26.462Z] [LOG] 🔍 Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-22T08:07:26.463Z] [LOG]    Total components: 10
[2025-10-22T08:07:26.463Z] [LOG]    Applicable components: 10
[2025-10-22T08:07:26.464Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T08:07:27.182Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:07:27.183Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:07:27.366Z] [LOG] 📊 Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:27.541Z] [LOG] 📊 Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:27.734Z] [LOG] 📊 Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:27.735Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:07:27.736Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:07:27.737Z] [LOG] 💰 GROSS CALCULATION for Chamodi null:
[2025-10-22T08:07:27.738Z] [LOG]    Base Salary: 50000
[2025-10-22T08:07:27.738Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:07:27.739Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:07:27.739Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:27.916Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:07:28.095Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:07:28.097Z] [LOG]    Employee ID: 0143f302-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:28.097Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:07:28.098Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:07:28.099Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T08:07:28.280Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:07:28.282Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T08:07:28.283Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T08:07:28.283Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T08:07:28.284Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:07:28.285Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:07:28.286Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:07:28.835Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:07:28.836Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:07:29.013Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:07:29.014Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:29.015Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:29.016Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:29.196Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:07:29.197Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:07:29.198Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:07:29.198Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:29.199Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:07:29.199Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:07:29.200Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:29.201Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:29.201Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:29.202Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:07:29.202Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:07:29.204Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T08:07:29.205Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T08:07:29.205Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:29.206Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:29.206Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T08:07:29.207Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:07:29.208Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T08:07:29.208Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T08:07:29.209Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:29.210Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:29.210Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T08:07:29.212Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:07:29.214Z] [LOG]       Calculated At: Oct 22, 2025, 13:37:29
[2025-10-22T08:07:29.215Z] [LOG]       Expected Earned (until NOW): Rs.31999.44
[2025-10-22T08:07:29.216Z] [LOG]       Actual Earned (until NOW): Rs.3999.93
[2025-10-22T08:07:29.216Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:29.217Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T08:07:29.217Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:07:29.218Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:07:29.219Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:07:29.219Z] [LOG]    Gross Salary: 50000
[2025-10-22T08:07:29.220Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:07:29.220Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:07:29.221Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:29.222Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:07:29.222Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:29.223Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:07:29.223Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:29.224Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:07:29.225Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:29.225Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:07:29.226Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:29.227Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:07:29.227Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:29.228Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:07:29.229Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:29.231Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:07:29.233Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:29.233Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:07:29.233Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:29.234Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:07:29.234Z] [LOG] Regular deductions for Chamodi null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:07:29.234Z] [LOG] Combined deductions for Chamodi null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:37:29)"
    }
  ],
  "total": 27999.51
}
[2025-10-22T08:07:29.416Z] [LOG] Creating components for record 89ceea4d-10b2-49d2-8d07-0c0124e5c259: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:07:29.418Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T08:07:29.605Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:07:29.786Z] [LOG] Created payroll_record_component: ace9bf7f-f2e5-46f7-b0b4-9610cd4c68f6 for Attendance Deduction
[2025-10-22T08:07:30.140Z] [LOG] ✅ Financial balances updated successfully for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:30.141Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:07:30.141Z] [LOG] 
======================================================================
[2025-10-22T08:07:30.142Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chamodi null
[2025-10-22T08:07:30.143Z] [LOG] ======================================================================
[2025-10-22T08:07:30.143Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T08:07:30.144Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T08:07:30.144Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T08:07:30.145Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:07:30.146Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:07:30.148Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:07:30.149Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T08:07:30.149Z] [LOG] ======================================================================

[2025-10-22T08:07:30.150Z] [LOG] ✅ Chamodi null: Calculation completed successfully
[2025-10-22T08:07:30.151Z] [LOG] 📊 Progress: 23/34 (67.6%)
[2025-10-22T08:07:30.151Z] [LOG] 
🧮 Processing: Ratheeshanan null (EMP000047)
[2025-10-22T08:07:30.152Z] [LOG] 📋 Record ID: 8ae1a041-814c-41fc-bbba-9501a59551d2
[2025-10-22T08:07:30.153Z] [LOG] 
======================================================================
[2025-10-22T08:07:30.154Z] [LOG] 🧮 CALCULATING PAYROLL: Ratheeshanan null (EMP000047)
[2025-10-22T08:07:30.155Z] [LOG] ======================================================================
[2025-10-22T08:07:30.869Z] [LOG] 🔍 Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-22T08:07:30.870Z] [LOG]    Total components: 10
[2025-10-22T08:07:30.871Z] [LOG]    Applicable components: 10
[2025-10-22T08:07:30.871Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T08:07:31.582Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:07:31.583Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:07:31.763Z] [LOG] 📊 Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:31.945Z] [LOG] 📊 Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:32.124Z] [LOG] 📊 Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:32.124Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:07:32.126Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:07:32.126Z] [LOG] 💰 GROSS CALCULATION for Ratheeshanan null:
[2025-10-22T08:07:32.127Z] [LOG]    Base Salary: 25000
[2025-10-22T08:07:32.128Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:07:32.128Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:07:32.129Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:32.306Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:07:32.485Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:07:32.486Z] [LOG]    Employee ID: 01444966-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:32.487Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:07:32.487Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:07:32.488Z] [LOG]    Base Salary (Full Month): Rs.25000.00
[2025-10-22T08:07:32.679Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:07:32.680Z] [LOG]       Daily Salary: Rs.1000.00
[2025-10-22T08:07:32.681Z] [LOG]       Weekday Hourly Rate: Rs.117.65
[2025-10-22T08:07:32.682Z] [LOG]       Saturday Hourly Rate: Rs.117.65
[2025-10-22T08:07:32.682Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:07:32.682Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:07:32.683Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:07:33.215Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:07:33.216Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:07:33.396Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:07:33.397Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:33.398Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:33.398Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:33.579Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:07:33.580Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:07:33.581Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:07:33.581Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:33.582Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:07:33.582Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:07:33.583Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:33.584Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:33.584Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:33.585Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:07:33.585Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:07:33.587Z] [LOG]       Weekday: 110.50h × Rs.117.65 = Rs.13000.33
[2025-10-22T08:07:33.588Z] [LOG]       Saturday: 25.50h × Rs.117.65 = Rs.3000.08
[2025-10-22T08:07:33.588Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:33.589Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:33.589Z] [LOG]       Total Expected Earned: Rs.16000.40
[2025-10-22T08:07:33.590Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:07:33.591Z] [LOG]       Weekday: 17.00h × Rs.117.65 = Rs.2000.05
[2025-10-22T08:07:33.592Z] [LOG]       Saturday: 0.00h × Rs.117.65 = Rs.0.00
[2025-10-22T08:07:33.592Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:33.593Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:33.594Z] [LOG]       Total Actual Earned: Rs.2000.05
[2025-10-22T08:07:33.595Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:07:33.597Z] [LOG]       Calculated At: Oct 22, 2025, 13:37:33
[2025-10-22T08:07:33.599Z] [LOG]       Expected Earned (until NOW): Rs.16000.40
[2025-10-22T08:07:33.599Z] [LOG]       Actual Earned (until NOW): Rs.2000.05
[2025-10-22T08:07:33.600Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:33.600Z] [LOG]       Attendance Deduction: Rs.14000.35
[2025-10-22T08:07:33.601Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:07:33.602Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:07:33.602Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:07:33.603Z] [LOG]    Gross Salary: 25000
[2025-10-22T08:07:33.604Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:07:33.604Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:07:33.605Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:33.608Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:07:33.610Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:33.611Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:07:33.614Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:33.615Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:07:33.615Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:33.615Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:07:33.616Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:33.617Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:07:33.617Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:33.618Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:07:33.618Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:33.619Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:07:33.619Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:33.619Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:07:33.619Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:33.620Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:07:33.620Z] [LOG] Regular deductions for Ratheeshanan null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:07:33.620Z] [LOG] Combined deductions for Ratheeshanan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 14000.350000000002,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:37:33)"
    }
  ],
  "total": 14000.350000000002
}
[2025-10-22T08:07:33.808Z] [LOG] Creating components for record 8ae1a041-814c-41fc-bbba-9501a59551d2: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:07:33.810Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 14000.350000000002
}
[2025-10-22T08:07:33.990Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:07:34.172Z] [LOG] Created payroll_record_component: cfbaee3c-8878-473c-80c4-13a4703c1032 for Attendance Deduction
[2025-10-22T08:07:34.529Z] [LOG] ✅ Financial balances updated successfully for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:34.530Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:07:34.531Z] [LOG] 
======================================================================
[2025-10-22T08:07:34.532Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ratheeshanan null
[2025-10-22T08:07:34.532Z] [LOG] ======================================================================
[2025-10-22T08:07:34.533Z] [LOG]    Gross Salary: Rs.25000.00
[2025-10-22T08:07:34.533Z] [LOG]    Total Deductions: Rs.14000.35
[2025-10-22T08:07:34.534Z] [LOG]       - Attendance Deduction: Rs.14000.35
[2025-10-22T08:07:34.534Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:07:34.535Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:07:34.536Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:07:34.536Z] [LOG]    NET SALARY: Rs.10999.65
[2025-10-22T08:07:34.537Z] [LOG] ======================================================================

[2025-10-22T08:07:34.538Z] [LOG] ✅ Ratheeshanan null: Calculation completed successfully
[2025-10-22T08:07:34.539Z] [LOG] 📊 Progress: 24/34 (70.6%)
[2025-10-22T08:07:34.539Z] [LOG] 
🧮 Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-22T08:07:34.540Z] [LOG] 📋 Record ID: a7826128-8ad2-4c39-8c8b-77ae8c44cae9
[2025-10-22T08:07:34.541Z] [LOG] 
======================================================================
[2025-10-22T08:07:34.542Z] [LOG] 🧮 CALCULATING PAYROLL: P.D.P Dilini Madushani null (EMP000043)
[2025-10-22T08:07:34.542Z] [LOG] ======================================================================
[2025-10-22T08:07:35.287Z] [LOG] 🔍 Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-22T08:07:35.288Z] [LOG]    Total components: 10
[2025-10-22T08:07:35.288Z] [LOG]    Applicable components: 10
[2025-10-22T08:07:35.288Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-22T08:07:36.003Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:07:36.004Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:07:36.197Z] [LOG] 📊 Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:36.376Z] [LOG] 📊 Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:36.553Z] [LOG] 📊 Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:36.554Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:07:36.555Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:07:36.555Z] [LOG] 💰 GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-22T08:07:36.556Z] [LOG]    Base Salary: 50000
[2025-10-22T08:07:36.557Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:07:36.557Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:07:36.558Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:36.743Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:07:36.922Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:07:36.923Z] [LOG]    Employee ID: 014435dc-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:36.923Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:07:36.924Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:07:36.925Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T08:07:37.106Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:07:37.107Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T08:07:37.108Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T08:07:37.108Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T08:07:37.109Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:07:37.109Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:07:37.110Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:07:37.646Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:07:37.646Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:07:37.826Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:07:37.827Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:37.827Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:37.828Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:38.009Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:07:38.009Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:07:38.010Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:07:38.010Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:38.011Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:07:38.011Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:07:38.013Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:38.014Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:38.015Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:38.016Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:07:38.016Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:07:38.017Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T08:07:38.018Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T08:07:38.018Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:38.019Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:38.019Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T08:07:38.020Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:07:38.021Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T08:07:38.022Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T08:07:38.022Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:38.023Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:38.023Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T08:07:38.024Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:07:38.025Z] [LOG]       Calculated At: Oct 22, 2025, 13:37:38
[2025-10-22T08:07:38.026Z] [LOG]       Expected Earned (until NOW): Rs.31999.44
[2025-10-22T08:07:38.027Z] [LOG]       Actual Earned (until NOW): Rs.3999.93
[2025-10-22T08:07:38.027Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:38.028Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T08:07:38.028Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:07:38.031Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:07:38.031Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:07:38.032Z] [LOG]    Gross Salary: 50000
[2025-10-22T08:07:38.032Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:07:38.033Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:07:38.034Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:38.034Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:07:38.035Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:38.035Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:07:38.036Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:38.036Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:07:38.037Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:38.038Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:07:38.038Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:38.039Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:07:38.040Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:38.040Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:07:38.041Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:38.041Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:07:38.042Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:38.042Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:07:38.043Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:38.044Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:07:38.044Z] [LOG] Regular deductions for P.D.P Dilini Madushani null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:07:38.045Z] [LOG] Combined deductions for P.D.P Dilini Madushani null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:37:38)"
    }
  ],
  "total": 27999.51
}
[2025-10-22T08:07:38.233Z] [LOG] Creating components for record a7826128-8ad2-4c39-8c8b-77ae8c44cae9: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:07:38.234Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T08:07:38.412Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:07:38.594Z] [LOG] Created payroll_record_component: f5a3d9d6-2d77-45b0-b5c6-e0dad9b09284 for Attendance Deduction
[2025-10-22T08:07:38.946Z] [LOG] ✅ Financial balances updated successfully for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:38.947Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:07:38.948Z] [LOG] 
======================================================================
[2025-10-22T08:07:38.948Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: P.D.P Dilini Madushani null
[2025-10-22T08:07:38.949Z] [LOG] ======================================================================
[2025-10-22T08:07:38.950Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T08:07:38.950Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T08:07:38.951Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T08:07:38.951Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:07:38.952Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:07:38.952Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:07:38.953Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T08:07:38.954Z] [LOG] ======================================================================

[2025-10-22T08:07:38.955Z] [LOG] ✅ P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-22T08:07:38.955Z] [LOG] 📊 Progress: 25/34 (73.5%)
[2025-10-22T08:07:38.956Z] [LOG] 
🧮 Processing: Waruni null (EMP000024)
[2025-10-22T08:07:38.957Z] [LOG] 📋 Record ID: b541d9b6-a799-4405-929b-f0823ca6abd3
[2025-10-22T08:07:38.957Z] [LOG] 
======================================================================
[2025-10-22T08:07:38.958Z] [LOG] 🧮 CALCULATING PAYROLL: Waruni null (EMP000024)
[2025-10-22T08:07:38.958Z] [LOG] ======================================================================
[2025-10-22T08:07:39.670Z] [LOG] 🔍 Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-22T08:07:39.670Z] [LOG]    Total components: 10
[2025-10-22T08:07:39.671Z] [LOG]    Applicable components: 10
[2025-10-22T08:07:39.671Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T08:07:40.393Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:07:40.394Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:07:40.573Z] [LOG] 📊 Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:40.751Z] [LOG] 📊 Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:40.933Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:40.934Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:07:40.935Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:07:40.935Z] [LOG] 💰 GROSS CALCULATION for Waruni null:
[2025-10-22T08:07:40.936Z] [LOG]    Base Salary: 50000
[2025-10-22T08:07:40.937Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:07:40.937Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:07:40.938Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:41.114Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:07:41.294Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:07:41.294Z] [LOG]    Employee ID: 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:41.295Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:07:41.295Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:07:41.295Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T08:07:41.483Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:07:41.484Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T08:07:41.485Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T08:07:41.485Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T08:07:41.485Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:07:41.486Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:07:41.486Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:07:42.257Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:07:42.258Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:07:42.480Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:07:42.481Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:42.482Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:42.482Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:42.686Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:07:42.687Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:07:42.688Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:07:42.688Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:42.688Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:07:42.689Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:07:42.689Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:42.690Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:42.690Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:42.691Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:07:42.691Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:07:42.692Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T08:07:42.692Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T08:07:42.692Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:42.693Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:42.693Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T08:07:42.694Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:07:42.694Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T08:07:42.695Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T08:07:42.695Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:42.696Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:42.697Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T08:07:42.698Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:07:42.698Z] [LOG]       Calculated At: Oct 22, 2025, 13:37:42
[2025-10-22T08:07:42.698Z] [LOG]       Expected Earned (until NOW): Rs.31999.44
[2025-10-22T08:07:42.699Z] [LOG]       Actual Earned (until NOW): Rs.3999.93
[2025-10-22T08:07:42.699Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:42.700Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T08:07:42.700Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:07:42.700Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:07:42.701Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:07:42.701Z] [LOG]    Gross Salary: 50000
[2025-10-22T08:07:42.702Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:07:42.702Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:07:42.702Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:42.703Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:07:42.703Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:42.704Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:07:42.704Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:42.705Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:07:42.705Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:42.705Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:07:42.706Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:42.706Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:07:42.706Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:42.707Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:07:42.707Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:42.708Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:07:42.708Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:42.708Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:07:42.709Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:42.709Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:07:42.709Z] [LOG] Regular deductions for Waruni null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:07:42.710Z] [LOG] Combined deductions for Waruni null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:37:42)"
    }
  ],
  "total": 27999.51
}
[2025-10-22T08:07:43.049Z] [LOG] Creating components for record b541d9b6-a799-4405-929b-f0823ca6abd3: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:07:43.051Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T08:07:43.293Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:07:43.617Z] [LOG] Created payroll_record_component: 20ee7883-674f-4586-8988-2d729ad7ce77 for Attendance Deduction
[2025-10-22T08:07:44.264Z] [LOG] ✅ Financial balances updated successfully for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:44.265Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:07:44.265Z] [LOG] 
======================================================================
[2025-10-22T08:07:44.266Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Waruni null
[2025-10-22T08:07:44.267Z] [LOG] ======================================================================
[2025-10-22T08:07:44.267Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T08:07:44.268Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T08:07:44.268Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T08:07:44.269Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:07:44.269Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:07:44.270Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:07:44.271Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T08:07:44.272Z] [LOG] ======================================================================

[2025-10-22T08:07:44.273Z] [LOG] ✅ Waruni null: Calculation completed successfully
[2025-10-22T08:07:44.273Z] [LOG] 📊 Progress: 26/34 (76.5%)
[2025-10-22T08:07:44.274Z] [LOG] 
🧮 Processing: Kaushal Thambi (EMP465256103)
[2025-10-22T08:07:44.275Z] [LOG] 📋 Record ID: c6b89d54-4d25-48b5-9b6a-1bd97d3048d6
[2025-10-22T08:07:44.275Z] [LOG] 
======================================================================
[2025-10-22T08:07:44.276Z] [LOG] 🧮 CALCULATING PAYROLL: Kaushal Thambi (EMP465256103)
[2025-10-22T08:07:44.277Z] [LOG] ======================================================================
[2025-10-22T08:07:45.815Z] [LOG] 🔍 Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-22T08:07:45.815Z] [LOG]    Total components: 10
[2025-10-22T08:07:45.816Z] [LOG]    Applicable components: 10
[2025-10-22T08:07:45.816Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-22T08:07:46.531Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:07:46.531Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:07:46.709Z] [LOG] 📊 Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-22T08:07:46.886Z] [LOG] 📊 Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-22T08:07:47.066Z] [LOG] 📊 Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-22T08:07:47.066Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:07:47.067Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:07:47.068Z] [LOG] 💰 GROSS CALCULATION for Kaushal Thambi:
[2025-10-22T08:07:47.069Z] [LOG]    Base Salary: 50000
[2025-10-22T08:07:47.069Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:07:47.070Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:07:47.070Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:47.247Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:07:47.444Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:07:47.445Z] [LOG]    Employee ID: 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-22T08:07:47.445Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:07:47.447Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:07:47.447Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T08:07:47.629Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:07:47.630Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T08:07:47.630Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T08:07:47.630Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T08:07:47.630Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:07:47.630Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:07:47.631Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:07:48.162Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:07:48.164Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:07:48.345Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:07:48.347Z] [LOG]       Weekday: 8.50h
[2025-10-22T08:07:48.347Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:48.348Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:48.524Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:07:48.525Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:07:48.525Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:07:48.525Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:48.525Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:07:48.526Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:07:48.526Z] [LOG]       Weekday: 8.50h
[2025-10-22T08:07:48.526Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:48.526Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:48.527Z] [LOG]       Total Actual: 8.50h
[2025-10-22T08:07:48.527Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:07:48.527Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T08:07:48.527Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T08:07:48.527Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:48.528Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:48.528Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T08:07:48.528Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:07:48.528Z] [LOG]       Weekday: 8.50h × Rs.235.29 = Rs.1999.96
[2025-10-22T08:07:48.529Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T08:07:48.529Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:48.529Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:48.530Z] [LOG]       Total Actual Earned: Rs.1999.96
[2025-10-22T08:07:48.530Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:07:48.531Z] [LOG]       Calculated At: Oct 22, 2025, 13:37:48
[2025-10-22T08:07:48.531Z] [LOG]       Expected Earned (until NOW): Rs.31999.44
[2025-10-22T08:07:48.531Z] [LOG]       Actual Earned (until NOW): Rs.1999.96
[2025-10-22T08:07:48.531Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:48.531Z] [LOG]       Attendance Deduction: Rs.29999.47
[2025-10-22T08:07:48.531Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:07:48.532Z] [LOG]       📉 Shortfall: 127.50 hours (93.75% of expected)
[2025-10-22T08:07:48.532Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:07:48.532Z] [LOG]    Gross Salary: 50000
[2025-10-22T08:07:48.532Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:07:48.532Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:07:48.532Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:48.533Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:07:48.533Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:48.533Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:07:48.533Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:48.534Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:07:48.534Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:48.534Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:07:48.534Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:48.534Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:07:48.535Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:48.535Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:07:48.535Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:48.535Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:07:48.535Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:48.536Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:07:48.536Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:48.536Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:07:48.536Z] [LOG] Regular deductions for Kaushal Thambi: {
  "components": [],
  "total": 0
}
[2025-10-22T08:07:48.537Z] [LOG] Combined deductions for Kaushal Thambi: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 29999.475,
      "details": "Shortfall: 127.50h of 136.00h expected (calculated at Oct 22, 2025, 13:37:48)"
    }
  ],
  "total": 29999.475
}
[2025-10-22T08:07:48.729Z] [LOG] Creating components for record c6b89d54-4d25-48b5-9b6a-1bd97d3048d6: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:07:48.731Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 29999.475
}
[2025-10-22T08:07:48.908Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:07:49.089Z] [LOG] Created payroll_record_component: 5637f65d-8702-4947-9c63-31b26bcaff2f for Attendance Deduction
[2025-10-22T08:07:49.443Z] [LOG] ✅ Financial balances updated successfully for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-22T08:07:49.444Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:07:49.444Z] [LOG] 
======================================================================
[2025-10-22T08:07:49.445Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Kaushal Thambi
[2025-10-22T08:07:49.445Z] [LOG] ======================================================================
[2025-10-22T08:07:49.447Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T08:07:49.447Z] [LOG]    Total Deductions: Rs.29999.47
[2025-10-22T08:07:49.448Z] [LOG]       - Attendance Deduction: Rs.29999.47
[2025-10-22T08:07:49.448Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:07:49.449Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:07:49.450Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:07:49.451Z] [LOG]    NET SALARY: Rs.20000.53
[2025-10-22T08:07:49.451Z] [LOG] ======================================================================

[2025-10-22T08:07:49.452Z] [LOG] ✅ Kaushal Thambi: Calculation completed successfully
[2025-10-22T08:07:49.453Z] [LOG] 📊 Progress: 27/34 (79.4%)
[2025-10-22T08:07:49.453Z] [LOG] 
🧮 Processing: Ammaar Ilham (EMP000023)
[2025-10-22T08:07:49.454Z] [LOG] 📋 Record ID: c845c4ac-d178-45b4-aea5-039dbb4921b3
[2025-10-22T08:07:49.455Z] [LOG] 
======================================================================
[2025-10-22T08:07:49.456Z] [LOG] 🧮 CALCULATING PAYROLL: Ammaar Ilham (EMP000023)
[2025-10-22T08:07:49.456Z] [LOG] ======================================================================
[2025-10-22T08:07:50.160Z] [LOG] 🔍 Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-22T08:07:50.161Z] [LOG]    Total components: 10
[2025-10-22T08:07:50.162Z] [LOG]    Applicable components: 10
[2025-10-22T08:07:50.162Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T08:07:50.873Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:07:50.874Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:07:51.048Z] [LOG] 📊 Found 0 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:51.224Z] [LOG] 📊 Found 0 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:51.401Z] [LOG] 📊 Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:51.401Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:07:51.402Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:07:51.403Z] [LOG] 💰 GROSS CALCULATION for Ammaar Ilham:
[2025-10-22T08:07:51.403Z] [LOG]    Base Salary: 70000
[2025-10-22T08:07:51.403Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:07:51.404Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:07:51.404Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:51.592Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:07:51.768Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:07:51.768Z] [LOG]    Employee ID: 0143de00-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:51.769Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:07:51.770Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:07:51.770Z] [LOG]    Base Salary (Full Month): Rs.70000.00
[2025-10-22T08:07:51.947Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:07:51.948Z] [LOG]       Daily Salary: Rs.2800.00
[2025-10-22T08:07:51.949Z] [LOG]       Weekday Hourly Rate: Rs.329.41
[2025-10-22T08:07:51.949Z] [LOG]       Saturday Hourly Rate: Rs.329.41
[2025-10-22T08:07:51.950Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:07:51.950Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:07:51.951Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:07:52.483Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:07:52.484Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:07:52.661Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:07:52.661Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:52.662Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:52.663Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:52.843Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:07:52.843Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:07:52.844Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:07:52.845Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:52.845Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:07:52.846Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:07:52.847Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:52.848Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:52.848Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:52.849Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:07:52.850Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:07:52.851Z] [LOG]       Weekday: 110.50h × Rs.329.41 = Rs.36399.81
[2025-10-22T08:07:52.851Z] [LOG]       Saturday: 25.50h × Rs.329.41 = Rs.8399.95
[2025-10-22T08:07:52.852Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:52.853Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:52.853Z] [LOG]       Total Expected Earned: Rs.44799.76
[2025-10-22T08:07:52.854Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:07:52.854Z] [LOG]       Weekday: 17.00h × Rs.329.41 = Rs.5599.97
[2025-10-22T08:07:52.855Z] [LOG]       Saturday: 0.00h × Rs.329.41 = Rs.0.00
[2025-10-22T08:07:52.856Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:52.856Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:52.857Z] [LOG]       Total Actual Earned: Rs.5599.97
[2025-10-22T08:07:52.858Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:07:52.859Z] [LOG]       Calculated At: Oct 22, 2025, 13:37:52
[2025-10-22T08:07:52.860Z] [LOG]       Expected Earned (until NOW): Rs.44799.76
[2025-10-22T08:07:52.860Z] [LOG]       Actual Earned (until NOW): Rs.5599.97
[2025-10-22T08:07:52.861Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:52.861Z] [LOG]       Attendance Deduction: Rs.39199.79
[2025-10-22T08:07:52.862Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:07:52.864Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:07:52.865Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:07:52.866Z] [LOG]    Gross Salary: 70000
[2025-10-22T08:07:52.867Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:07:52.867Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:07:52.868Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:52.868Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:07:52.869Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:52.870Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:07:52.870Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:52.871Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:07:52.871Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:52.872Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:07:52.873Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:52.873Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:07:52.873Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:52.874Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:07:52.874Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:52.874Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:07:52.875Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:52.875Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:07:52.875Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:52.876Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:07:52.876Z] [LOG] Regular deductions for Ammaar Ilham: {
  "components": [],
  "total": 0
}
[2025-10-22T08:07:52.877Z] [LOG] Combined deductions for Ammaar Ilham: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 39199.79,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:37:52)"
    }
  ],
  "total": 39199.79
}
[2025-10-22T08:07:53.057Z] [LOG] Creating components for record c845c4ac-d178-45b4-aea5-039dbb4921b3: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:07:53.058Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 39199.79
}
[2025-10-22T08:07:53.236Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:07:53.411Z] [LOG] Created payroll_record_component: 37060568-484a-4a15-9e6b-ef6f6c355c5f for Attendance Deduction
[2025-10-22T08:07:53.767Z] [LOG] ✅ Financial balances updated successfully for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:53.768Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:07:53.769Z] [LOG] 
======================================================================
[2025-10-22T08:07:53.769Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ammaar Ilham
[2025-10-22T08:07:53.770Z] [LOG] ======================================================================
[2025-10-22T08:07:53.770Z] [LOG]    Gross Salary: Rs.70000.00
[2025-10-22T08:07:53.771Z] [LOG]    Total Deductions: Rs.39199.79
[2025-10-22T08:07:53.772Z] [LOG]       - Attendance Deduction: Rs.39199.79
[2025-10-22T08:07:53.772Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:07:53.773Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:07:53.773Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:07:53.774Z] [LOG]    NET SALARY: Rs.30800.21
[2025-10-22T08:07:53.775Z] [LOG] ======================================================================

[2025-10-22T08:07:53.776Z] [LOG] ✅ Ammaar Ilham: Calculation completed successfully
[2025-10-22T08:07:53.777Z] [LOG] 📊 Progress: 28/34 (82.4%)
[2025-10-22T08:07:53.777Z] [LOG] 
🧮 Processing: Faizan Faizan (EMP000003)
[2025-10-22T08:07:53.778Z] [LOG] 📋 Record ID: c84f907e-e760-49b5-930d-cc96834d0509
[2025-10-22T08:07:53.781Z] [LOG] 
======================================================================
[2025-10-22T08:07:53.782Z] [LOG] 🧮 CALCULATING PAYROLL: Faizan Faizan (EMP000003)
[2025-10-22T08:07:53.783Z] [LOG] ======================================================================
[2025-10-22T08:07:54.497Z] [LOG] 🔍 Component filtering for employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-22T08:07:54.499Z] [LOG]    Total components: 10
[2025-10-22T08:07:54.500Z] [LOG]    Applicable components: 10
[2025-10-22T08:07:54.501Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-22T08:07:55.229Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:07:55.229Z] [LOG] 🔄 Processing financial records for employee 0143a057-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:07:55.409Z] [LOG] 📊 Found 0 active loans for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:55.589Z] [LOG] 📊 Found 0 active advances for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:55.788Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:55.789Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:07:55.790Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:07:55.791Z] [LOG] 💰 GROSS CALCULATION for Faizan Faizan:
[2025-10-22T08:07:55.791Z] [LOG]    Base Salary: 50000
[2025-10-22T08:07:55.792Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:07:55.792Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:07:55.793Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:55.985Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:07:56.164Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:07:56.164Z] [LOG]    Employee ID: 0143a057-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:56.165Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:07:56.165Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:07:56.166Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T08:07:56.345Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:07:56.346Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T08:07:56.346Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T08:07:56.347Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T08:07:56.347Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:07:56.348Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:07:56.348Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:07:56.878Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:07:56.879Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:07:57.055Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:07:57.056Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:57.056Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:57.057Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:57.245Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:07:57.246Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:07:57.246Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:07:57.247Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:57.247Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:07:57.248Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:07:57.249Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:07:57.249Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:07:57.250Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:07:57.250Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:07:57.251Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:07:57.252Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T08:07:57.255Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T08:07:57.255Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:57.256Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:57.257Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T08:07:57.257Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:07:57.258Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T08:07:57.259Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T08:07:57.259Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:07:57.260Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:57.260Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T08:07:57.262Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:07:57.262Z] [LOG]       Calculated At: Oct 22, 2025, 13:37:57
[2025-10-22T08:07:57.263Z] [LOG]       Expected Earned (until NOW): Rs.31999.44
[2025-10-22T08:07:57.264Z] [LOG]       Actual Earned (until NOW): Rs.3999.93
[2025-10-22T08:07:57.264Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:07:57.265Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T08:07:57.265Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:07:57.266Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:07:57.267Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:07:57.267Z] [LOG]    Gross Salary: 50000
[2025-10-22T08:07:57.268Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:07:57.268Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:07:57.269Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:57.271Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:07:57.272Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:57.272Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:07:57.273Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:57.274Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:07:57.274Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:57.275Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:07:57.276Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:57.276Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:07:57.277Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:57.277Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:07:57.278Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:57.279Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:07:57.279Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:57.280Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:07:57.280Z] [LOG]    Fixed amount: 0
[2025-10-22T08:07:57.281Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:07:57.281Z] [LOG] Regular deductions for Faizan Faizan: {
  "components": [],
  "total": 0
}
[2025-10-22T08:07:57.282Z] [LOG] Combined deductions for Faizan Faizan: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:37:57)"
    }
  ],
  "total": 27999.51
}
[2025-10-22T08:07:57.464Z] [LOG] Creating components for record c84f907e-e760-49b5-930d-cc96834d0509: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:07:57.466Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T08:07:57.654Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:07:57.833Z] [LOG] Created payroll_record_component: 845c93f8-8329-4381-a343-a898d6b9a771 for Attendance Deduction
[2025-10-22T08:07:58.187Z] [LOG] ✅ Financial balances updated successfully for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:58.188Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:07:58.188Z] [LOG] 
======================================================================
[2025-10-22T08:07:58.189Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Faizan Faizan
[2025-10-22T08:07:58.189Z] [LOG] ======================================================================
[2025-10-22T08:07:58.190Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T08:07:58.190Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T08:07:58.191Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T08:07:58.191Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:07:58.192Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:07:58.192Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:07:58.193Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T08:07:58.193Z] [LOG] ======================================================================

[2025-10-22T08:07:58.194Z] [LOG] ✅ Faizan Faizan: Calculation completed successfully
[2025-10-22T08:07:58.194Z] [LOG] 📊 Progress: 29/34 (85.3%)
[2025-10-22T08:07:58.195Z] [LOG] 
🧮 Processing: Jessie null (EMP000013)
[2025-10-22T08:07:58.195Z] [LOG] 📋 Record ID: ced51263-609d-476e-8e4d-3a148a349345
[2025-10-22T08:07:58.196Z] [LOG] 
======================================================================
[2025-10-22T08:07:58.197Z] [LOG] 🧮 CALCULATING PAYROLL: Jessie null (EMP000013)
[2025-10-22T08:07:58.197Z] [LOG] ======================================================================
[2025-10-22T08:07:58.913Z] [LOG] 🔍 Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-22T08:07:58.914Z] [LOG]    Total components: 10
[2025-10-22T08:07:58.914Z] [LOG]    Applicable components: 10
[2025-10-22T08:07:58.915Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T08:07:59.628Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:07:59.629Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:07:59.810Z] [LOG] 📊 Found 0 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-22T08:07:59.988Z] [LOG] 📊 Found 0 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:00.166Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:00.167Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:08:00.168Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:08:00.169Z] [LOG] 💰 GROSS CALCULATION for Jessie null:
[2025-10-22T08:08:00.170Z] [LOG]    Base Salary: 60000
[2025-10-22T08:08:00.171Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:08:00.172Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:08:00.172Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:00.350Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:08:00.532Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:08:00.532Z] [LOG]    Employee ID: 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:00.533Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:08:00.533Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:08:00.534Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-22T08:08:00.721Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:08:00.722Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-22T08:08:00.722Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-22T08:08:00.723Z] [LOG]       Saturday Hourly Rate: Rs.282.35
[2025-10-22T08:08:00.724Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:08:00.724Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:08:00.725Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:08:01.260Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:08:01.260Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:08:01.438Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:08:01.439Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:08:01.440Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:08:01.440Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:08:01.620Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:08:01.621Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:08:01.622Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:08:01.622Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:08:01.623Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:08:01.623Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:08:01.624Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:08:01.625Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:08:01.625Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:08:01.626Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:08:01.626Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:08:01.628Z] [LOG]       Weekday: 110.50h × Rs.282.35 = Rs.31199.68
[2025-10-22T08:08:01.628Z] [LOG]       Saturday: 25.50h × Rs.282.35 = Rs.7199.93
[2025-10-22T08:08:01.629Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:08:01.629Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:08:01.630Z] [LOG]       Total Expected Earned: Rs.38399.60
[2025-10-22T08:08:01.631Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:08:01.631Z] [LOG]       Weekday: 17.00h × Rs.282.35 = Rs.4799.95
[2025-10-22T08:08:01.632Z] [LOG]       Saturday: 0.00h × Rs.282.35 = Rs.0.00
[2025-10-22T08:08:01.633Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:08:01.633Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:08:01.634Z] [LOG]       Total Actual Earned: Rs.4799.95
[2025-10-22T08:08:01.635Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:08:01.636Z] [LOG]       Calculated At: Oct 22, 2025, 13:38:01
[2025-10-22T08:08:01.638Z] [LOG]       Expected Earned (until NOW): Rs.38399.60
[2025-10-22T08:08:01.639Z] [LOG]       Actual Earned (until NOW): Rs.4799.95
[2025-10-22T08:08:01.639Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:08:01.640Z] [LOG]       Attendance Deduction: Rs.33599.65
[2025-10-22T08:08:01.640Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:08:01.640Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:08:01.641Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:08:01.641Z] [LOG]    Gross Salary: 60000
[2025-10-22T08:08:01.641Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:08:01.642Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:08:01.642Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:01.642Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:08:01.643Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:01.643Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:08:01.643Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:01.644Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:08:01.644Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:01.644Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:08:01.645Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:01.645Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:08:01.645Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:01.646Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:08:01.646Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:01.646Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:08:01.646Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:01.647Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:08:01.647Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:01.647Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:08:01.648Z] [LOG] Regular deductions for Jessie null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:08:01.648Z] [LOG] Combined deductions for Jessie null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 33599.65000000001,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:38:01)"
    }
  ],
  "total": 33599.65000000001
}
[2025-10-22T08:08:01.828Z] [LOG] Creating components for record ced51263-609d-476e-8e4d-3a148a349345: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:08:01.830Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 33599.65000000001
}
[2025-10-22T08:08:02.007Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:08:02.186Z] [LOG] Created payroll_record_component: dcb893a8-ac03-44aa-b7b1-0904443303c3 for Attendance Deduction
[2025-10-22T08:08:02.547Z] [LOG] ✅ Financial balances updated successfully for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:02.548Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:08:02.548Z] [LOG] 
======================================================================
[2025-10-22T08:08:02.549Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Jessie null
[2025-10-22T08:08:02.550Z] [LOG] ======================================================================
[2025-10-22T08:08:02.550Z] [LOG]    Gross Salary: Rs.60000.00
[2025-10-22T08:08:02.551Z] [LOG]    Total Deductions: Rs.33599.65
[2025-10-22T08:08:02.551Z] [LOG]       - Attendance Deduction: Rs.33599.65
[2025-10-22T08:08:02.552Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:08:02.553Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:08:02.554Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:08:02.555Z] [LOG]    NET SALARY: Rs.26400.35
[2025-10-22T08:08:02.556Z] [LOG] ======================================================================

[2025-10-22T08:08:02.557Z] [LOG] ✅ Jessie null: Calculation completed successfully
[2025-10-22T08:08:02.557Z] [LOG] 📊 Progress: 30/34 (88.2%)
[2025-10-22T08:08:02.558Z] [LOG] 
🧮 Processing: Hari null (EMP000017)
[2025-10-22T08:08:02.559Z] [LOG] 📋 Record ID: cf5a7e82-3b03-496f-89ee-f5dc191bf61a
[2025-10-22T08:08:02.559Z] [LOG] 
======================================================================
[2025-10-22T08:08:02.560Z] [LOG] 🧮 CALCULATING PAYROLL: Hari null (EMP000017)
[2025-10-22T08:08:02.561Z] [LOG] ======================================================================
[2025-10-22T08:08:03.306Z] [LOG] 🔍 Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-22T08:08:03.307Z] [LOG]    Total components: 10
[2025-10-22T08:08:03.307Z] [LOG]    Applicable components: 10
[2025-10-22T08:08:03.307Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T08:08:04.021Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:08:04.021Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:08:04.207Z] [LOG] 📊 Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:04.387Z] [LOG] 📊 Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:04.565Z] [LOG] 📊 Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:04.566Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:08:04.567Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:08:04.567Z] [LOG] 💰 GROSS CALCULATION for Hari null:
[2025-10-22T08:08:04.567Z] [LOG]    Base Salary: 50000
[2025-10-22T08:08:04.568Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:08:04.568Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:08:04.568Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:04.748Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:08:04.927Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:08:04.928Z] [LOG]    Employee ID: 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:04.929Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:08:04.929Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:08:04.930Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T08:08:05.109Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:08:05.110Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T08:08:05.111Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T08:08:05.111Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T08:08:05.112Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:08:05.112Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:08:05.113Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:08:05.644Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:08:05.645Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:08:05.824Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:08:05.825Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:08:05.825Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:08:05.826Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:08:06.003Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:08:06.003Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:08:06.004Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:08:06.004Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:08:06.004Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:08:06.004Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:08:06.005Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:08:06.005Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:08:06.005Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:08:06.005Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:08:06.006Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:08:06.006Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T08:08:06.006Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T08:08:06.006Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:08:06.007Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:08:06.007Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T08:08:06.007Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:08:06.008Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T08:08:06.008Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T08:08:06.009Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:08:06.009Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:08:06.010Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T08:08:06.010Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:08:06.011Z] [LOG]       Calculated At: Oct 22, 2025, 13:38:06
[2025-10-22T08:08:06.011Z] [LOG]       Expected Earned (until NOW): Rs.31999.44
[2025-10-22T08:08:06.012Z] [LOG]       Actual Earned (until NOW): Rs.3999.93
[2025-10-22T08:08:06.012Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:08:06.012Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T08:08:06.013Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:08:06.013Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:08:06.013Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:08:06.014Z] [LOG]    Gross Salary: 50000
[2025-10-22T08:08:06.014Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:08:06.014Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:08:06.014Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:06.015Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:08:06.015Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:06.015Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:08:06.015Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:06.016Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:08:06.016Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:06.016Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:08:06.016Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:06.016Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:08:06.017Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:06.017Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:08:06.017Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:06.017Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:08:06.018Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:06.018Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:08:06.018Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:06.018Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:08:06.019Z] [LOG] Regular deductions for Hari null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:08:06.019Z] [LOG] Combined deductions for Hari null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:38:06)"
    }
  ],
  "total": 27999.51
}
[2025-10-22T08:08:06.198Z] [LOG] Creating components for record cf5a7e82-3b03-496f-89ee-f5dc191bf61a: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:08:06.198Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T08:08:06.376Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:08:06.557Z] [LOG] Created payroll_record_component: 2147fd5e-d467-4db2-ad58-dea1c7ded91f for Attendance Deduction
[2025-10-22T08:08:06.914Z] [LOG] ✅ Financial balances updated successfully for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:06.915Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:08:06.916Z] [LOG] 
======================================================================
[2025-10-22T08:08:06.917Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Hari null
[2025-10-22T08:08:06.917Z] [LOG] ======================================================================
[2025-10-22T08:08:06.918Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T08:08:06.920Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T08:08:06.921Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T08:08:06.922Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:08:06.923Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:08:06.924Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:08:06.924Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T08:08:06.925Z] [LOG] ======================================================================

[2025-10-22T08:08:06.926Z] [LOG] ✅ Hari null: Calculation completed successfully
[2025-10-22T08:08:06.926Z] [LOG] 📊 Progress: 31/34 (91.2%)
[2025-10-22T08:08:06.927Z] [LOG] 
🧮 Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-22T08:08:06.928Z] [LOG] 📋 Record ID: d0a1c229-a778-4094-856d-07dbc9e9d84a
[2025-10-22T08:08:06.929Z] [LOG] 
======================================================================
[2025-10-22T08:08:06.929Z] [LOG] 🧮 CALCULATING PAYROLL: Ruvindu Hewabandu null (EMP000027)
[2025-10-22T08:08:06.930Z] [LOG] ======================================================================
[2025-10-22T08:08:07.636Z] [LOG] 🔍 Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-22T08:08:07.637Z] [LOG]    Total components: 10
[2025-10-22T08:08:07.638Z] [LOG]    Applicable components: 10
[2025-10-22T08:08:07.638Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-22T08:08:08.349Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:08:08.349Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:08:08.528Z] [LOG] 📊 Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:08.708Z] [LOG] 📊 Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:08.886Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:08.886Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:08:08.887Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:08:08.887Z] [LOG] 💰 GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-22T08:08:08.888Z] [LOG]    Base Salary: 0
[2025-10-22T08:08:08.888Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:08:08.888Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:08:08.889Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:09.065Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:08:09.243Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:08:09.244Z] [LOG]    Employee ID: 0143e915-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:09.245Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:08:09.245Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:08:09.246Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-22T08:08:09.429Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:08:09.429Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-22T08:08:09.430Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-22T08:08:09.430Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-22T08:08:09.431Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:08:09.431Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:08:09.432Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:08:09.963Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:08:09.964Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:08:10.151Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:08:10.151Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:08:10.152Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:08:10.153Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:08:10.330Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:08:10.331Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:08:10.331Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:08:10.332Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:08:10.332Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:08:10.333Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:08:10.334Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:08:10.334Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:08:10.335Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:08:10.335Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:08:10.336Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:08:10.339Z] [LOG]       Weekday: 110.50h × Rs.0.00 = Rs.0.00
[2025-10-22T08:08:10.339Z] [LOG]       Saturday: 25.50h × Rs.0.00 = Rs.0.00
[2025-10-22T08:08:10.339Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:08:10.340Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:08:10.340Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-22T08:08:10.340Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:08:10.340Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:08:10.341Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:08:10.341Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:08:10.341Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:08:10.341Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-22T08:08:10.342Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:08:10.342Z] [LOG]       Calculated At: Oct 22, 2025, 13:38:10
[2025-10-22T08:08:10.342Z] [LOG]       Expected Earned (until NOW): Rs.0.00
[2025-10-22T08:08:10.343Z] [LOG]       Actual Earned (until NOW): Rs.0.00
[2025-10-22T08:08:10.343Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:08:10.343Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-22T08:08:10.344Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:08:10.344Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-22T08:08:10.344Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:08:10.344Z] [LOG]    Gross Salary: 0
[2025-10-22T08:08:10.345Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:08:10.345Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:08:10.345Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:10.345Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:08:10.345Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:10.346Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:08:10.346Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:10.346Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:08:10.346Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:10.347Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:08:10.347Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:10.347Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:08:10.347Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:10.348Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:08:10.348Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:10.348Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:08:10.348Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:10.349Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:08:10.349Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:10.349Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:08:10.349Z] [LOG] Regular deductions for Ruvindu Hewabandu null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:08:10.350Z] [LOG] Combined deductions for Ruvindu Hewabandu null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:38:10)"
    }
  ],
  "total": 0
}
[2025-10-22T08:08:10.528Z] [LOG] Creating components for record d0a1c229-a778-4094-856d-07dbc9e9d84a: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:08:10.530Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-22T08:08:10.706Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:08:10.888Z] [LOG] Created payroll_record_component: 0f6b1523-7c99-4109-aefb-ec31d94e6087 for Attendance Deduction
[2025-10-22T08:08:11.242Z] [LOG] ✅ Financial balances updated successfully for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:11.242Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:08:11.242Z] [LOG] 
======================================================================
[2025-10-22T08:08:11.243Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ruvindu Hewabandu null
[2025-10-22T08:08:11.243Z] [LOG] ======================================================================
[2025-10-22T08:08:11.243Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-22T08:08:11.244Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-22T08:08:11.244Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-22T08:08:11.244Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:08:11.245Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:08:11.245Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:08:11.245Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-22T08:08:11.246Z] [LOG] ======================================================================

[2025-10-22T08:08:11.246Z] [LOG] ✅ Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-22T08:08:11.246Z] [LOG] 📊 Progress: 32/34 (94.1%)
[2025-10-22T08:08:11.247Z] [LOG] 
🧮 Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-22T08:08:11.247Z] [LOG] 📋 Record ID: dcb6572c-ab7a-4c5c-be22-2ce7df6feb60
[2025-10-22T08:08:11.247Z] [LOG] 
======================================================================
[2025-10-22T08:08:11.248Z] [LOG] 🧮 CALCULATING PAYROLL: Viruna Damsiha Cooray null (EMP000038)
[2025-10-22T08:08:11.248Z] [LOG] ======================================================================
[2025-10-22T08:08:11.958Z] [LOG] 🔍 Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-22T08:08:11.959Z] [LOG]    Total components: 10
[2025-10-22T08:08:11.959Z] [LOG]    Applicable components: 10
[2025-10-22T08:08:11.960Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T08:08:12.675Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:08:12.676Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:08:12.853Z] [LOG] 📊 Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:13.030Z] [LOG] 📊 Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:13.214Z] [LOG] 📊 Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:13.215Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:08:13.216Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:08:13.217Z] [LOG] 💰 GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-22T08:08:13.217Z] [LOG]    Base Salary: 50000
[2025-10-22T08:08:13.218Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:08:13.218Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:08:13.219Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:13.398Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:08:13.574Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:08:13.575Z] [LOG]    Employee ID: 01441633-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:13.575Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:08:13.576Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:08:13.576Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T08:08:13.756Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:08:13.756Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T08:08:13.757Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T08:08:13.757Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T08:08:13.757Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:08:13.758Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:08:13.758Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:08:14.289Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:08:14.290Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:08:14.467Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:08:14.467Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:08:14.468Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:08:14.468Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:08:14.651Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:08:14.655Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:08:14.656Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:08:14.657Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:08:14.657Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:08:14.658Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:08:14.659Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:08:14.661Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:08:14.661Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:08:14.662Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:08:14.662Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:08:14.662Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T08:08:14.662Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T08:08:14.663Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:08:14.663Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:08:14.663Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T08:08:14.663Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:08:14.664Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T08:08:14.664Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T08:08:14.664Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:08:14.664Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:08:14.665Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T08:08:14.665Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:08:14.666Z] [LOG]       Calculated At: Oct 22, 2025, 13:38:14
[2025-10-22T08:08:14.666Z] [LOG]       Expected Earned (until NOW): Rs.31999.44
[2025-10-22T08:08:14.666Z] [LOG]       Actual Earned (until NOW): Rs.3999.93
[2025-10-22T08:08:14.667Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:08:14.667Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T08:08:14.667Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:08:14.667Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:08:14.667Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:08:14.668Z] [LOG]    Gross Salary: 50000
[2025-10-22T08:08:14.668Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:08:14.668Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:08:14.668Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:14.669Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:08:14.669Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:14.670Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:08:14.670Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:14.671Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:08:14.671Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:14.671Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:08:14.671Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:14.672Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:08:14.672Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:14.672Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:08:14.672Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:14.673Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:08:14.673Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:14.673Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:08:14.673Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:14.673Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:08:14.674Z] [LOG] Regular deductions for Viruna Damsiha Cooray null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:08:14.674Z] [LOG] Combined deductions for Viruna Damsiha Cooray null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:38:14)"
    }
  ],
  "total": 27999.51
}
[2025-10-22T08:08:14.858Z] [LOG] Creating components for record dcb6572c-ab7a-4c5c-be22-2ce7df6feb60: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:08:14.860Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T08:08:15.038Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:08:15.216Z] [LOG] Created payroll_record_component: 025807cb-1865-4f79-a321-6b09ed15329a for Attendance Deduction
[2025-10-22T08:08:15.573Z] [LOG] ✅ Financial balances updated successfully for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:15.574Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:08:15.574Z] [LOG] 
======================================================================
[2025-10-22T08:08:15.575Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Viruna Damsiha Cooray null
[2025-10-22T08:08:15.575Z] [LOG] ======================================================================
[2025-10-22T08:08:15.576Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T08:08:15.577Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T08:08:15.577Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T08:08:15.578Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:08:15.578Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:08:15.579Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:08:15.580Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T08:08:15.581Z] [LOG] ======================================================================

[2025-10-22T08:08:15.581Z] [LOG] ✅ Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-22T08:08:15.582Z] [LOG] 📊 Progress: 33/34 (97.1%)
[2025-10-22T08:08:15.583Z] [LOG] 
🧮 Processing: Sithira null (EMP000039)
[2025-10-22T08:08:15.583Z] [LOG] 📋 Record ID: e099c65e-2ad3-4e85-8ea7-58632ad04cf1
[2025-10-22T08:08:15.584Z] [LOG] 
======================================================================
[2025-10-22T08:08:15.585Z] [LOG] 🧮 CALCULATING PAYROLL: Sithira null (EMP000039)
[2025-10-22T08:08:15.586Z] [LOG] ======================================================================
[2025-10-22T08:08:16.305Z] [LOG] 🔍 Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-22T08:08:16.307Z] [LOG]    Total components: 10
[2025-10-22T08:08:16.307Z] [LOG]    Applicable components: 10
[2025-10-22T08:08:16.308Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-22T08:08:17.026Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T08:08:17.027Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T08:08:17.211Z] [LOG] 📊 Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:17.390Z] [LOG] 📊 Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:17.570Z] [LOG] 📊 Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:17.571Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T08:08:17.572Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T08:08:17.573Z] [LOG] 💰 GROSS CALCULATION for Sithira null:
[2025-10-22T08:08:17.574Z] [LOG]    Base Salary: 40000
[2025-10-22T08:08:17.574Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T08:08:17.575Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T08:08:17.575Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:17.757Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T08:08:17.936Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T08:08:17.938Z] [LOG]    Employee ID: 01441e19-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:17.938Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T08:08:17.939Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T08:08:17.940Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-22T08:08:18.123Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T08:08:18.123Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-22T08:08:18.123Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-22T08:08:18.124Z] [LOG]       Saturday Hourly Rate: Rs.188.24
[2025-10-22T08:08:18.124Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T08:08:18.125Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T08:08:18.125Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T08:08:18.657Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-22T08:08:18.657Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T08:08:18.839Z] [LOG] 
   ⏰ Completed Hours (Until Yesterday):
[2025-10-22T08:08:18.840Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:08:18.841Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:08:18.841Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:08:19.022Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-22T08:08:19.023Z] [LOG]       Weekday: 110.50h
[2025-10-22T08:08:19.024Z] [LOG]       Saturday: 25.50h
[2025-10-22T08:08:19.024Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:08:19.025Z] [LOG]       Total Expected: 136.00h
[2025-10-22T08:08:19.025Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-22T08:08:19.026Z] [LOG]       Weekday: 17.00h
[2025-10-22T08:08:19.027Z] [LOG]       Saturday: 0.00h
[2025-10-22T08:08:19.027Z] [LOG]       Sunday: 0.00h
[2025-10-22T08:08:19.028Z] [LOG]       Total Actual: 17.00h
[2025-10-22T08:08:19.029Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-22T08:08:19.030Z] [LOG]       Weekday: 110.50h × Rs.188.24 = Rs.20800.52
[2025-10-22T08:08:19.031Z] [LOG]       Saturday: 25.50h × Rs.188.24 = Rs.4800.12
[2025-10-22T08:08:19.032Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:08:19.032Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:08:19.033Z] [LOG]       Total Expected Earned: Rs.25600.64
[2025-10-22T08:08:19.033Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-22T08:08:19.035Z] [LOG]       Weekday: 17.00h × Rs.188.24 = Rs.3200.08
[2025-10-22T08:08:19.035Z] [LOG]       Saturday: 0.00h × Rs.188.24 = Rs.0.00
[2025-10-22T08:08:19.037Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T08:08:19.038Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:08:19.039Z] [LOG]       Total Actual Earned: Rs.3200.08
[2025-10-22T08:08:19.040Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-22T08:08:19.040Z] [LOG]       Calculated At: Oct 22, 2025, 13:38:19
[2025-10-22T08:08:19.041Z] [LOG]       Expected Earned (until NOW): Rs.25600.64
[2025-10-22T08:08:19.041Z] [LOG]       Actual Earned (until NOW): Rs.3200.08
[2025-10-22T08:08:19.041Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T08:08:19.042Z] [LOG]       Attendance Deduction: Rs.22400.56
[2025-10-22T08:08:19.042Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T08:08:19.042Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T08:08:19.043Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T08:08:19.043Z] [LOG]    Gross Salary: 40000
[2025-10-22T08:08:19.043Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T08:08:19.044Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T08:08:19.044Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:19.044Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T08:08:19.045Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:19.045Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T08:08:19.045Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:19.046Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T08:08:19.046Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:19.046Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T08:08:19.047Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:19.047Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T08:08:19.047Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:19.048Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T08:08:19.048Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:19.048Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T08:08:19.049Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:19.049Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T08:08:19.049Z] [LOG]    Fixed amount: 0
[2025-10-22T08:08:19.050Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T08:08:19.050Z] [LOG] Regular deductions for Sithira null: {
  "components": [],
  "total": 0
}
[2025-10-22T08:08:19.050Z] [LOG] Combined deductions for Sithira null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 22400.559999999998,
      "details": "Shortfall: 119.00h of 136.00h expected (calculated at Oct 22, 2025, 13:38:19)"
    }
  ],
  "total": 22400.559999999998
}
[2025-10-22T08:08:19.233Z] [LOG] Creating components for record e099c65e-2ad3-4e85-8ea7-58632ad04cf1: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T08:08:19.235Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 22400.559999999998
}
[2025-10-22T08:08:19.416Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T08:08:19.595Z] [LOG] Created payroll_record_component: 880e0866-3c38-4227-8f89-a0f38a6a0d0d for Attendance Deduction
[2025-10-22T08:08:19.959Z] [LOG] ✅ Financial balances updated successfully for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-22T08:08:19.960Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T08:08:19.960Z] [LOG] 
======================================================================
[2025-10-22T08:08:19.961Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sithira null
[2025-10-22T08:08:19.961Z] [LOG] ======================================================================
[2025-10-22T08:08:19.961Z] [LOG]    Gross Salary: Rs.40000.00
[2025-10-22T08:08:19.962Z] [LOG]    Total Deductions: Rs.22400.56
[2025-10-22T08:08:19.962Z] [LOG]       - Attendance Deduction: Rs.22400.56
[2025-10-22T08:08:19.963Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T08:08:19.963Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T08:08:19.964Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T08:08:19.964Z] [LOG]    NET SALARY: Rs.17599.44
[2025-10-22T08:08:19.964Z] [LOG] ======================================================================

[2025-10-22T08:08:19.965Z] [LOG] ✅ Sithira null: Calculation completed successfully
[2025-10-22T08:08:19.965Z] [LOG] 📊 Progress: 34/34 (100.0%)
[2025-10-22T08:08:19.966Z] [LOG] 
============================================================
[2025-10-22T08:08:19.967Z] [LOG] 📈 Processing Summary: 34 successful, 0 failed
[2025-10-22T08:08:21.439Z] [LOG] 🎉 Payroll calculation completed successfully!
[2025-10-22T08:08:21.440Z] [LOG] 📊 Final Summary: 34 processed, 0 errors
[2025-10-22T08:08:21.441Z] [INFO] ================================================================================
[2025-10-22T08:08:21.441Z] [INFO] ⏰ Completed at: 2025-10-22T08:08:21.441Z
[2025-10-22T08:08:21.441Z] [INFO] 📊 Total log entries: 3864