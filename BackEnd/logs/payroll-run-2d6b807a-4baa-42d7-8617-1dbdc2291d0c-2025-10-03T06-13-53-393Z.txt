[2025-10-03T06:13:53.393Z] [INFO] ğŸš€ Payroll calculation logging started for run: 2d6b807a-4baa-42d7-8617-1dbdc2291d0c
[2025-10-03T06:13:53.393Z] [INFO] ğŸ“ Log file: D:\attendance-system\BackEnd\logs\payroll-run-2d6b807a-4baa-42d7-8617-1dbdc2291d0c-2025-10-03T06-13-53-393Z.txt
[2025-10-03T06:13:53.393Z] [INFO] â° Started at: 2025-10-03T06:13:53.393Z
[2025-10-03T06:13:53.393Z] [INFO] ================================================================================
[2025-10-03T06:13:53.393Z] [LOG] ğŸš€ Starting payroll calculation for run: 2d6b807a-4baa-42d7-8617-1dbdc2291d0c
[2025-10-03T06:13:53.393Z] [LOG] ğŸ‘¤ Client ID: it-signature, User ID: 059304ea-24a5-4d78-a290-cf09b9e53c4c
[2025-10-03T06:13:53.929Z] [LOG] âœ… Payroll run verified: august (MONTHLY_2025_08_REGULAR)
[2025-10-03T06:13:54.282Z] [LOG] ğŸ“Š Status updated to 'calculating'
[2025-10-03T06:13:54.839Z] [LOG] ğŸ‘¥ Processing 34 employee records:
[2025-10-03T06:13:54.840Z] [LOG] ============================================================
[2025-10-03T06:13:54.841Z] [LOG] 
ğŸ§® Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-03T06:13:54.842Z] [LOG] ğŸ“‹ Record ID: 0294123f-a3ce-42e5-bfc9-a15c24dd0b9e
[2025-10-03T06:13:56.282Z] [LOG] ğŸ” Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-03T06:13:56.283Z] [LOG]    Total components: 8
[2025-10-03T06:13:56.284Z] [LOG]    Applicable components: 8
[2025-10-03T06:13:56.285Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-03T06:13:58.100Z] [LOG] ğŸ” Fetched 0 attendance records for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-03T06:13:58.101Z] [LOG] âš ï¸  ATTENTION: Employee 0143e915-7105-11f0-a50f-98e743540430 has NO attendance records in this payroll period!
[2025-10-03T06:13:58.455Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:14:00.554Z] [LOG] Employee 0143e915-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:14:00.554Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8h = 160h
[2025-10-03T06:14:00.555Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:14:00.555Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:14:00.559Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-03T06:14:00.559Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:14:00.559Z] [LOG] ================================================================================
[2025-10-03T06:14:00.560Z] [LOG] ================================================================================
[2025-10-03T06:14:00.560Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:14:00.560Z] [LOG]    Sum of all daily counted hours (rounded): 0h
[2025-10-03T06:14:00.560Z] [LOG]    Expected hours: 160h
[2025-10-03T06:14:00.561Z] [LOG]    Shortfall: 160.00h
[2025-10-03T06:14:00.561Z] [LOG] ================================================================================
[2025-10-03T06:14:00.916Z] [LOG] ğŸ”„ Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430...
[2025-10-03T06:14:00.917Z] [LOG] ğŸ”„ Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:14:01.267Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:01.640Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:01.991Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:01.993Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:14:01.997Z] [LOG] ğŸ’° GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-03T06:14:01.997Z] [LOG]    Base Salary: 0
[2025-10-03T06:14:01.998Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:14:02.346Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:14:03.049Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:14:03.398Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:14:03.749Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:14:04.097Z] [LOG] Employee 0143e915-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:14:04.098Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:14:04.098Z] [LOG] ============================================================
[2025-10-03T06:14:04.098Z] [LOG] ğŸ‘¤ Employee ID: 0143e915-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:04.121Z] [LOG] ğŸ’° Base Salary: 0
[2025-10-03T06:14:04.121Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:14:04.122Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:14:04.122Z] [LOG] â° Employee Daily Hours: 8h/day
[2025-10-03T06:14:04.122Z] [LOG] ğŸ’µ Per-Day Salary: 0.00
[2025-10-03T06:14:04.123Z] [LOG] â±ï¸  Hourly Rate: 0.00
[2025-10-03T06:14:04.123Z] [LOG] 
[2025-10-03T06:14:04.123Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:14:04.124Z] [LOG]    Expected Hours: 160
[2025-10-03T06:14:04.124Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8h = 200.00h
[2025-10-03T06:14:04.124Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:14:04.124Z] [LOG]    Worked Hours: 0
[2025-10-03T06:14:04.124Z] [LOG]    âš ï¸  Shortfall Hours: 160
[2025-10-03T06:14:04.124Z] [LOG]    ğŸ’¸ Shortfall Deduction: 160h Ã— 0.00 = 0.00
[2025-10-03T06:14:04.125Z] [LOG] ============================================================
[2025-10-03T06:14:05.181Z] [LOG] ğŸ“… Weekend absence check for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-03T06:14:05.182Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:14:05.182Z] [LOG]    Attended weekend dates: 0 days
[2025-10-03T06:14:05.182Z] [LOG]    Absent weekend dates: 5 days
[2025-10-03T06:14:05.183Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:14:05.183Z] [LOG]    Gross Salary: 0
[2025-10-03T06:14:05.183Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:14:05.184Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:14:05.184Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:05.185Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:14:05.185Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:05.185Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:14:05.185Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:05.185Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:14:05.186Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:05.186Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:14:05.186Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:05.186Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:14:05.187Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:05.187Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:14:05.187Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:05.187Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:14:05.188Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:05.188Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:14:05.188Z] [LOG] Regular deductions for Ruvindu Hewabandu null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:14:05.189Z] [LOG] Combined deductions for Ruvindu Hewabandu null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 0,
      "details": "160 hours Ã— 0.00"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 0,
      "details": "5 weekend days Ã— 0.00"
    }
  ],
  "total": 0
}
[2025-10-03T06:14:05.542Z] [LOG] Creating components for record 0294123f-a3ce-42e5-bfc9-a15c24dd0b9e: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:14:05.545Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 0
}
[2025-10-03T06:14:05.899Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:14:06.248Z] [LOG] Created payroll_record_component: c1ada5ba-0b32-46b5-adab-002e93870a9b for Working Hours Shortfall
[2025-10-03T06:14:06.248Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 0
}
[2025-10-03T06:14:06.423Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:14:06.600Z] [LOG] Created payroll_record_component: 4d33b7a2-6f24-4717-83fb-a3092d5963be for Weekend Absent Days
[2025-10-03T06:14:07.311Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:14:07.314Z] [ERROR] âŒ Error updating financial balances for employee 0143e915-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:14:07.319Z] [LOG] âœ… Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-03T06:14:07.320Z] [LOG] ğŸ“Š Progress: 1/34 (2.9%)
[2025-10-03T06:14:07.320Z] [LOG] 
ğŸ§® Processing: Rasanga null (EMP000028)
[2025-10-03T06:14:07.320Z] [LOG] ğŸ“‹ Record ID: 038c68ce-f5e2-4ca4-8174-d65f25ae7c70
[2025-10-03T06:14:08.027Z] [LOG] ğŸ” Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-03T06:14:08.028Z] [LOG]    Total components: 8
[2025-10-03T06:14:08.028Z] [LOG]    Applicable components: 8
[2025-10-03T06:14:08.029Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-03T06:14:08.915Z] [LOG] ğŸ” Fetched 0 attendance records for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:08.916Z] [LOG] âš ï¸  ATTENTION: Employee 0143eaec-7105-11f0-a50f-98e743540430 has NO attendance records in this payroll period!
[2025-10-03T06:14:09.091Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:14:10.341Z] [LOG] Employee 0143eaec-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:14:10.342Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8h = 160h
[2025-10-03T06:14:10.343Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:14:10.343Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:14:10.352Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-03T06:14:10.353Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:14:10.353Z] [LOG] ================================================================================
[2025-10-03T06:14:10.354Z] [LOG] ================================================================================
[2025-10-03T06:14:10.355Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:14:10.355Z] [LOG]    Sum of all daily counted hours (rounded): 0h
[2025-10-03T06:14:10.356Z] [LOG]    Expected hours: 160h
[2025-10-03T06:14:10.356Z] [LOG]    Shortfall: 160.00h
[2025-10-03T06:14:10.357Z] [LOG] ================================================================================
[2025-10-03T06:14:10.540Z] [LOG] ğŸ”„ Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430...
[2025-10-03T06:14:10.541Z] [LOG] ğŸ”„ Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:14:10.719Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:10.895Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:11.070Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:11.071Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:14:11.071Z] [LOG] ğŸ’° GROSS CALCULATION for Rasanga null:
[2025-10-03T06:14:11.071Z] [LOG]    Base Salary: 50000
[2025-10-03T06:14:11.071Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:14:11.248Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:14:11.606Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:14:11.968Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:14:12.145Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:14:12.498Z] [LOG] Employee 0143eaec-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:14:12.498Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:14:12.499Z] [LOG] ============================================================
[2025-10-03T06:14:12.500Z] [LOG] ğŸ‘¤ Employee ID: 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:12.502Z] [LOG] ğŸ’° Base Salary: 50,000
[2025-10-03T06:14:12.505Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:14:12.506Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:14:12.506Z] [LOG] â° Employee Daily Hours: 8h/day
[2025-10-03T06:14:12.507Z] [LOG] ğŸ’µ Per-Day Salary: 2000.00
[2025-10-03T06:14:12.508Z] [LOG] â±ï¸  Hourly Rate: 250.00
[2025-10-03T06:14:12.508Z] [LOG] 
[2025-10-03T06:14:12.509Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:14:12.509Z] [LOG]    Expected Hours: 160
[2025-10-03T06:14:12.510Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8h = 200.00h
[2025-10-03T06:14:12.511Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:14:12.511Z] [LOG]    Worked Hours: 0
[2025-10-03T06:14:12.511Z] [LOG]    âš ï¸  Shortfall Hours: 160
[2025-10-03T06:14:12.512Z] [LOG]    ğŸ’¸ Shortfall Deduction: 160h Ã— 250.00 = 40000.00
[2025-10-03T06:14:12.512Z] [LOG] ============================================================
[2025-10-03T06:14:13.223Z] [LOG] ğŸ“… Weekend absence check for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-03T06:14:13.223Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:14:13.224Z] [LOG]    Attended weekend dates: 0 days
[2025-10-03T06:14:13.224Z] [LOG]    Absent weekend dates: 5 days
[2025-10-03T06:14:13.225Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:14:13.225Z] [LOG]    Gross Salary: 50000
[2025-10-03T06:14:13.226Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:14:13.226Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:14:13.227Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:13.227Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:14:13.228Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:13.228Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:14:13.228Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:13.229Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:14:13.229Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:13.230Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:14:13.231Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:13.231Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:14:13.231Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:13.232Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:14:13.232Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:13.233Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:14:13.233Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:13.235Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:14:13.236Z] [LOG] Regular deductions for Rasanga null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:14:13.236Z] [LOG] Combined deductions for Rasanga null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 40000,
      "details": "160 hours Ã— 250.00"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 10000,
      "details": "5 weekend days Ã— 2000.00"
    }
  ],
  "total": 50000
}
[2025-10-03T06:14:13.416Z] [LOG] Creating components for record 038c68ce-f5e2-4ca4-8174-d65f25ae7c70: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:14:13.417Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 40000
}
[2025-10-03T06:14:13.594Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:14:13.772Z] [LOG] Created payroll_record_component: 288cb996-44b5-47ee-abfa-df934046a22a for Working Hours Shortfall
[2025-10-03T06:14:13.772Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 10000
}
[2025-10-03T06:14:13.952Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:14:14.138Z] [LOG] Created payroll_record_component: 511194f0-b3f1-4bf5-92a2-0a64db273010 for Weekend Absent Days
[2025-10-03T06:14:14.681Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:14:14.683Z] [ERROR] âŒ Error updating financial balances for employee 0143eaec-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:14:14.686Z] [LOG] âœ… Rasanga null: Calculation completed successfully
[2025-10-03T06:14:14.686Z] [LOG] ğŸ“Š Progress: 2/34 (5.9%)
[2025-10-03T06:14:14.686Z] [LOG] 
ğŸ§® Processing: Shandeep null (EMP000034)
[2025-10-03T06:14:14.687Z] [LOG] ğŸ“‹ Record ID: 08f98732-69cc-4bf9-b38d-52efa20326fe
[2025-10-03T06:14:15.397Z] [LOG] ğŸ” Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-03T06:14:15.397Z] [LOG]    Total components: 8
[2025-10-03T06:14:15.397Z] [LOG]    Applicable components: 8
[2025-10-03T06:14:15.398Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-03T06:14:16.810Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:17.163Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:17.516Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:17.867Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:18.220Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:18.572Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:18.928Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:19.289Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:19.639Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:19.983Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:20.337Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:20.688Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:20.871Z] [LOG] ğŸ” Fetched 23 attendance records for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:21.051Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:14:21.942Z] [LOG] Employee 0143fc5a-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:14:21.943Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:14:21.943Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:14:21.944Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:14:21.947Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-03T06:14:21.947Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:14:21.947Z] [LOG] ================================================================================
[2025-10-03T06:14:21.948Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 8.53h worked â†’ 7.9319444444444445h counted â†’ OVERLAP 09:04-17:00 = 7.932h (attendance table)
[2025-10-03T06:14:21.948Z] [LOG]    âœ… Added to weekday total: 7.9319444444444445h
[2025-10-03T06:14:21.948Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:14:21.948Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:14:21.949Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 8.73h worked â†’ 8h counted â†’ OVERLAP 09:00-17:00 = 8.000h (attendance table)
[2025-10-03T06:14:21.949Z] [LOG]    âœ… Added to weekday total: 8h
[2025-10-03T06:14:21.949Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 8.07h worked â†’ 7.886388888888889h counted â†’ OVERLAP 09:06-17:00 = 7.886h (attendance table)
[2025-10-03T06:14:21.949Z] [LOG]    âœ… Added to weekday total: 7.886388888888889h
[2025-10-03T06:14:21.950Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 8.75h worked â†’ 8.083333333333334h counted â†’ OVERLAP 08:55-17:00 = 8.083h (attendance table)
[2025-10-03T06:14:21.950Z] [LOG]    âœ… Added to weekday total: 8.083333333333334h
[2025-10-03T06:14:21.950Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 8.82h worked â†’ 8.166666666666666h counted â†’ OVERLAP 08:50-17:00 = 8.167h (attendance table)
[2025-10-03T06:14:21.951Z] [LOG]    âœ… Added to weekday total: 8.166666666666666h
[2025-10-03T06:14:21.951Z] [LOG] ğŸ“… 2025-08-09 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:14:21.951Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:14:21.952Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 8.92h worked â†’ 7.916666666666667h counted â†’ OVERLAP 09:05-17:00 = 7.917h (attendance table)
[2025-10-03T06:14:21.952Z] [LOG]    âœ… Added to weekday total: 7.916666666666667h
[2025-10-03T06:14:21.952Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 9.33h worked â†’ 8.333333333333334h counted â†’ OVERLAP 08:40-17:00 = 8.333h (attendance table)
[2025-10-03T06:14:21.952Z] [LOG]    âœ… Added to weekday total: 8.333333333333334h
[2025-10-03T06:14:21.953Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 8.75h worked â†’ 8.25h counted â†’ OVERLAP 08:45-17:00 = 8.250h (attendance table)
[2025-10-03T06:14:21.953Z] [LOG]    âœ… Added to weekday total: 8.25h
[2025-10-03T06:14:21.953Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 8.71h worked â†’ 8.212222222222222h counted â†’ OVERLAP 08:47-17:00 = 8.212h (attendance table)
[2025-10-03T06:14:21.953Z] [LOG]    âœ… Added to weekday total: 8.212222222222222h
[2025-10-03T06:14:21.954Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 8.67h worked â†’ 8.166666666666666h counted â†’ OVERLAP 08:50-17:00 = 8.167h (attendance table)
[2025-10-03T06:14:21.954Z] [LOG]    âœ… Added to weekday total: 8.166666666666666h
[2025-10-03T06:14:21.954Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:14:21.955Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:14:21.955Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 8.67h worked â†’ 8.166666666666666h counted â†’ OVERLAP 08:50-17:00 = 8.167h (attendance table)
[2025-10-03T06:14:21.955Z] [LOG]    âœ… Added to weekday total: 8.166666666666666h
[2025-10-03T06:14:21.956Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 8.68h worked â†’ 8.166666666666666h counted â†’ OVERLAP 08:50-17:00 = 8.167h (attendance table)
[2025-10-03T06:14:21.956Z] [LOG]    âœ… Added to weekday total: 8.166666666666666h
[2025-10-03T06:14:21.957Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 7.89h worked â†’ 7.525h counted â†’ OVERLAP 09:28-17:00 = 7.525h (attendance table)
[2025-10-03T06:14:21.957Z] [LOG]    âœ… Added to weekday total: 7.525h
[2025-10-03T06:14:21.957Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 7.95h worked â†’ 7.451388888888889h counted â†’ OVERLAP 09:32-17:00 = 7.451h (attendance table)
[2025-10-03T06:14:21.958Z] [LOG]    âœ… Added to weekday total: 7.451388888888889h
[2025-10-03T06:14:21.958Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:14:21.959Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:14:21.959Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 8h worked â†’ 8h counted â†’ OVERLAP 09:00-17:00 = 8.000h (attendance table)
[2025-10-03T06:14:21.960Z] [LOG]    âœ… Added to weekday total: 8h
[2025-10-03T06:14:21.960Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 4h worked â†’ 3.5h counted â†’ OVERLAP 13:30-17:00 = 3.500h (attendance table)
[2025-10-03T06:14:21.960Z] [LOG]    âœ… Added to weekday total: 3.5h
[2025-10-03T06:14:21.960Z] [LOG] ğŸ“… 2025-08-27 (WEEKDAY): 8.67h worked â†’ 8.083333333333334h counted â†’ OVERLAP 08:55-17:00 = 8.083h (attendance table)
[2025-10-03T06:14:21.961Z] [LOG]    âœ… Added to weekday total: 8.083333333333334h
[2025-10-03T06:14:21.961Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 7.5h worked â†’ 7.5h counted â†’ OVERLAP 09:30-17:00 = 7.500h (attendance table)
[2025-10-03T06:14:21.962Z] [LOG]    âœ… Added to weekday total: 7.5h
[2025-10-03T06:14:21.962Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:14:21.962Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:14:21.963Z] [LOG] ================================================================================
[2025-10-03T06:14:21.963Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:14:21.963Z] [LOG]    Sum of all daily counted hours (rounded): 139.3403h
[2025-10-03T06:14:21.963Z] [LOG]    Expected hours: 170h
[2025-10-03T06:14:21.963Z] [LOG]    Shortfall: 30.66h
[2025-10-03T06:14:21.964Z] [LOG] ================================================================================
[2025-10-03T06:14:22.178Z] [LOG] ğŸ”„ Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430...
[2025-10-03T06:14:22.178Z] [LOG] ğŸ”„ Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:14:22.361Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:22.537Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:22.723Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:22.724Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:14:22.725Z] [LOG] ğŸ’° GROSS CALCULATION for Shandeep null:
[2025-10-03T06:14:22.726Z] [LOG]    Base Salary: 80000
[2025-10-03T06:14:22.727Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:14:22.902Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:14:23.250Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:14:23.605Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:14:23.784Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:14:23.964Z] [LOG] Employee 0143fc5a-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:14:23.964Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:14:23.965Z] [LOG] ============================================================
[2025-10-03T06:14:23.966Z] [LOG] ğŸ‘¤ Employee ID: 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:23.967Z] [LOG] ğŸ’° Base Salary: 80,000
[2025-10-03T06:14:23.967Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:14:23.968Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:14:23.969Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:14:23.969Z] [LOG] ğŸ’µ Per-Day Salary: 3200.00
[2025-10-03T06:14:23.970Z] [LOG] â±ï¸  Hourly Rate: 376.47
[2025-10-03T06:14:23.971Z] [LOG] 
[2025-10-03T06:14:23.972Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:14:23.972Z] [LOG]    Expected Hours: 170
[2025-10-03T06:14:23.973Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:14:23.974Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:14:23.974Z] [LOG]    Worked Hours: 139.3403
[2025-10-03T06:14:23.977Z] [LOG]    âš ï¸  Shortfall Hours: 30.659699999999987
[2025-10-03T06:14:23.978Z] [LOG]    ğŸ’¸ Shortfall Deduction: 30.659699999999987h Ã— 376.47 = 11542.48
[2025-10-03T06:14:23.979Z] [LOG] ============================================================
[2025-10-03T06:14:24.333Z] [LOG] âœ… Weekend Day Met: 2025-08-02 (Saturday)
[2025-10-03T06:14:24.334Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:14:24.334Z] [LOG] âœ… Weekend Day Met: 2025-08-09 (Saturday)
[2025-10-03T06:14:24.334Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:14:24.334Z] [LOG] âœ… Weekend Day Met: 2025-08-16 (Saturday)
[2025-10-03T06:14:24.335Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:14:24.335Z] [LOG] âœ… Weekend Day Met: 2025-08-23 (Saturday)
[2025-10-03T06:14:24.335Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:14:24.335Z] [LOG] âœ… Weekend Day Met: 2025-08-30 (Saturday)
[2025-10-03T06:14:24.336Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:14:24.688Z] [LOG] ğŸ“… Weekend absence check for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-03T06:14:24.688Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:14:24.689Z] [LOG]    Attended weekend dates: 5 days
[2025-10-03T06:14:24.689Z] [LOG]    Absent weekend dates: 0 days
[2025-10-03T06:14:24.689Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:14:24.690Z] [LOG]    Gross Salary: 80000
[2025-10-03T06:14:24.690Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:14:24.691Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:14:24.691Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:24.691Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:14:24.692Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:24.694Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:14:24.694Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:24.695Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:14:24.696Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:24.696Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:14:24.697Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:24.697Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:14:24.697Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:24.698Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:14:24.698Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:24.699Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:14:24.699Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:24.699Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:14:24.700Z] [LOG] Regular deductions for Shandeep null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:14:24.700Z] [LOG] Combined deductions for Shandeep null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 11542.475294117643,
      "details": "30.659699999999987 hours Ã— 376.47"
    }
  ],
  "total": 11542.475294117643
}
[2025-10-03T06:14:24.880Z] [LOG] Creating components for record 08f98732-69cc-4bf9-b38d-52efa20326fe: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-03T06:14:24.882Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 11542.475294117643
}
[2025-10-03T06:14:25.090Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:14:25.265Z] [LOG] Created payroll_record_component: 19831770-a6de-4369-97de-2d4bbc4a02d2 for Working Hours Shortfall
[2025-10-03T06:14:25.791Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:14:25.795Z] [ERROR] âŒ Error updating financial balances for employee 0143fc5a-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:14:25.798Z] [LOG] âœ… Shandeep null: Calculation completed successfully
[2025-10-03T06:14:25.798Z] [LOG] ğŸ“Š Progress: 3/34 (8.8%)
[2025-10-03T06:14:25.798Z] [LOG] 
ğŸ§® Processing: Piyumi null (EMP000025)
[2025-10-03T06:14:25.799Z] [LOG] ğŸ“‹ Record ID: 2d632a5e-a93a-4abc-af9f-0c3757766bd2
[2025-10-03T06:14:26.516Z] [LOG] ğŸ” Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-03T06:14:26.516Z] [LOG]    Total components: 8
[2025-10-03T06:14:26.516Z] [LOG]    Applicable components: 8
[2025-10-03T06:14:26.516Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-03T06:14:27.561Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:27.741Z] [LOG] ğŸ” Fetched 21 attendance records for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:27.938Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:14:28.834Z] [LOG] Employee 0143e565-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:14:28.835Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:14:28.836Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:14:28.836Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:14:28.874Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-03T06:14:28.874Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:14:28.877Z] [LOG] ================================================================================
[2025-10-03T06:14:28.878Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 3.61h worked â†’ 2.6102777777777777h counted â†’ OVERLAP 10:23-13:00 = 2.610h (attendance table)
[2025-10-03T06:14:28.879Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 2.6102777777777777h
[2025-10-03T06:14:28.879Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:14:28.880Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:14:28.880Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:14:28.881Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:14:28.881Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 11.58h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:14:28.881Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:14:28.882Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:14:28.882Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:14:28.882Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:14:28.883Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:14:28.883Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:14:28.883Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:14:28.884Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 8.49h worked â†’ 8.4875h counted â†’ OVERLAP 08:30-17:00 = 8.488h (attendance table)
[2025-10-03T06:14:28.884Z] [LOG]    âœ… Added to weekday total: 8.4875h
[2025-10-03T06:14:28.884Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:14:28.885Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:14:28.885Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:14:28.885Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:14:28.885Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:14:28.886Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:14:28.886Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:14:28.886Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:14:28.886Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 3.96h worked â†’ 3.965h counted â†’ OVERLAP 13:02-17:00 = 3.965h (attendance table)
[2025-10-03T06:14:28.887Z] [LOG]    âœ… Added to weekday total: 3.965h
[2025-10-03T06:14:28.887Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:14:28.888Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:14:28.889Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:14:28.889Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:14:28.889Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:14:28.889Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:14:28.890Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:14:28.890Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:14:28.890Z] [LOG] ğŸ“… 2025-08-27 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:14:28.891Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:14:28.891Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:14:28.891Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:14:28.893Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:14:28.899Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:14:28.902Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:14:28.903Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:14:28.903Z] [LOG] ================================================================================
[2025-10-03T06:14:28.903Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:14:28.904Z] [LOG]    Sum of all daily counted hours (rounded): 139.9525h
[2025-10-03T06:14:28.904Z] [LOG]    Expected hours: 170h
[2025-10-03T06:14:28.904Z] [LOG]    Shortfall: 30.05h
[2025-10-03T06:14:28.904Z] [LOG] ================================================================================
[2025-10-03T06:14:29.078Z] [LOG] ğŸ”„ Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430...
[2025-10-03T06:14:29.078Z] [LOG] ğŸ”„ Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:14:29.253Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:29.428Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:29.601Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:29.602Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:14:29.603Z] [LOG] ğŸ’° GROSS CALCULATION for Piyumi null:
[2025-10-03T06:14:29.604Z] [LOG]    Base Salary: 50000
[2025-10-03T06:14:29.604Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:14:29.780Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:14:30.131Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:14:30.523Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:14:30.701Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:14:30.881Z] [LOG] Employee 0143e565-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:14:30.882Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:14:30.883Z] [LOG] ============================================================
[2025-10-03T06:14:30.884Z] [LOG] ğŸ‘¤ Employee ID: 0143e565-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:30.884Z] [LOG] ğŸ’° Base Salary: 50,000
[2025-10-03T06:14:30.885Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:14:30.885Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:14:30.886Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:14:30.887Z] [LOG] ğŸ’µ Per-Day Salary: 2000.00
[2025-10-03T06:14:30.887Z] [LOG] â±ï¸  Hourly Rate: 235.29
[2025-10-03T06:14:30.888Z] [LOG] 
[2025-10-03T06:14:30.889Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:14:30.889Z] [LOG]    Expected Hours: 170
[2025-10-03T06:14:30.890Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:14:30.893Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:14:30.895Z] [LOG]    Worked Hours: 139.9525
[2025-10-03T06:14:30.896Z] [LOG]    âš ï¸  Shortfall Hours: 30.047500000000014
[2025-10-03T06:14:30.897Z] [LOG]    ğŸ’¸ Shortfall Deduction: 30.047500000000014h Ã— 235.29 = 7070.00
[2025-10-03T06:14:30.898Z] [LOG] ============================================================
[2025-10-03T06:14:31.260Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-02 (Saturday)
[2025-10-03T06:14:31.261Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:14:31.262Z] [LOG]    Actual: 10:23:23 - 14:00:00
[2025-10-03T06:14:31.262Z] [LOG]    Calculation: OVERLAP 10:23-13:00 = 2.610h
[2025-10-03T06:14:31.263Z] [LOG]    Payable Hours: 2.610h
[2025-10-03T06:14:31.264Z] [LOG]    Shortfall: 1.890h
[2025-10-03T06:14:31.264Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:14:31.265Z] [LOG]    Deduction: 839.88
[2025-10-03T06:14:31.266Z] [LOG] âœ… Weekend Day Met: 2025-08-16 (Saturday)
[2025-10-03T06:14:31.266Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:14:31.267Z] [LOG] âœ… Weekend Day Met: 2025-08-23 (Saturday)
[2025-10-03T06:14:31.268Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:14:31.270Z] [LOG] âœ… Weekend Day Met: 2025-08-30 (Saturday)
[2025-10-03T06:14:31.270Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:14:31.621Z] [LOG] ğŸ“… Weekend absence check for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-03T06:14:31.622Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:14:31.622Z] [LOG]    Attended weekend dates: 4 days
[2025-10-03T06:14:31.622Z] [LOG]    Absent weekend dates: 1 days
[2025-10-03T06:14:31.622Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:14:31.623Z] [LOG]    Gross Salary: 50000
[2025-10-03T06:14:31.623Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:14:31.623Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:14:31.623Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:31.624Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:14:31.624Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:31.624Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:14:31.624Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:31.625Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:14:31.625Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:31.626Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:14:31.626Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:31.626Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:14:31.627Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:31.627Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:14:31.627Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:31.627Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:14:31.628Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:31.628Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:14:31.628Z] [LOG] Regular deductions for Piyumi null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:14:31.628Z] [LOG] Combined deductions for Piyumi null: {
  "components": [
    {
      "code": "WEEKEND_SHORTFALL",
      "name": "Weekend Shortfall Deduction",
      "type": "deduction",
      "category": "other",
      "amount": 839.8765432098766,
      "details": "Total 1.89h shortfall - 2025-08-02 (Saturday): 1.89h"
    },
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 7070.000000000003,
      "details": "30.047500000000014 hours Ã— 235.29"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 2000,
      "details": "1 weekend days Ã— 2000.00"
    }
  ],
  "total": 9909.876543209879
}
[2025-10-03T06:14:31.807Z] [LOG] Creating components for record 2d632a5e-a93a-4abc-af9f-0c3757766bd2: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 3,
  "taxComponentsCount": 0
}
[2025-10-03T06:14:31.809Z] [LOG] Processing component: {
  "name": "Weekend Shortfall Deduction",
  "type": "deduction",
  "amount": 839.8765432098766
}
[2025-10-03T06:14:31.986Z] [LOG] Using existing component ID: 106fdfbf-ee30-432b-8a98-9c8f6cef1ae1
[2025-10-03T06:14:32.160Z] [LOG] Created payroll_record_component: 6fbb29e3-036d-4b89-9bf2-396cd2b397f0 for Weekend Shortfall Deduction
[2025-10-03T06:14:32.161Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 7070.000000000003
}
[2025-10-03T06:14:32.339Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:14:32.513Z] [LOG] Created payroll_record_component: 48bff3b0-4f39-40f8-a293-d3215c7a7346 for Working Hours Shortfall
[2025-10-03T06:14:32.514Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 2000
}
[2025-10-03T06:14:32.690Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:14:32.866Z] [LOG] Created payroll_record_component: 6eba7795-e554-4601-9d4b-a43257189279 for Weekend Absent Days
[2025-10-03T06:14:33.391Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:14:33.403Z] [ERROR] âŒ Error updating financial balances for employee 0143e565-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:14:33.414Z] [LOG] âœ… Piyumi null: Calculation completed successfully
[2025-10-03T06:14:33.414Z] [LOG] ğŸ“Š Progress: 4/34 (11.8%)
[2025-10-03T06:14:33.415Z] [LOG] 
ğŸ§® Processing: Ratheeshanan null (EMP000047)
[2025-10-03T06:14:33.415Z] [LOG] ğŸ“‹ Record ID: 3bef23ab-a876-46f8-a11b-15a63a311381
[2025-10-03T06:14:34.124Z] [LOG] ğŸ” Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-03T06:14:34.124Z] [LOG]    Total components: 8
[2025-10-03T06:14:34.124Z] [LOG]    Applicable components: 8
[2025-10-03T06:14:34.124Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-03T06:14:35.320Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:36.138Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:38.179Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:39.385Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:39.973Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:40.936Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:41.832Z] [LOG] ğŸ” Fetched 22 attendance records for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:42.880Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:14:46.148Z] [LOG] Employee 01444966-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:14:46.148Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:14:46.149Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:14:46.149Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:14:46.152Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-03T06:14:46.152Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:14:46.152Z] [LOG] ================================================================================
[2025-10-03T06:14:46.152Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 8.28h worked â†’ 8.216666666666667h counted â†’ OVERLAP 08:47-17:00 = 8.217h (attendance table)
[2025-10-03T06:14:46.153Z] [LOG]    âœ… Added to weekday total: 8.216666666666667h
[2025-10-03T06:14:46.153Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:14:46.153Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:14:46.153Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 8.46h worked â†’ 8.35h counted â†’ OVERLAP 08:39-17:00 = 8.350h (attendance table)
[2025-10-03T06:14:46.153Z] [LOG]    âœ… Added to weekday total: 8.35h
[2025-10-03T06:14:46.153Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 8.29h worked â†’ 8.226666666666667h counted â†’ OVERLAP 08:46-17:00 = 8.227h (attendance table)
[2025-10-03T06:14:46.154Z] [LOG]    âœ… Added to weekday total: 8.226666666666667h
[2025-10-03T06:14:46.154Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 8.46h worked â†’ 8.211944444444445h counted â†’ OVERLAP 08:47-17:00 = 8.212h (attendance table)
[2025-10-03T06:14:46.155Z] [LOG]    âœ… Added to weekday total: 8.211944444444445h
[2025-10-03T06:14:46.155Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 8.32h worked â†’ 8.183333333333334h counted â†’ OVERLAP 08:49-17:00 = 8.183h (attendance table)
[2025-10-03T06:14:46.156Z] [LOG]    âœ… Added to weekday total: 8.183333333333334h
[2025-10-03T06:14:46.156Z] [LOG] ğŸ“… 2025-08-09 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:14:46.156Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:14:46.156Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 8.33h worked â†’ 8.191944444444445h counted â†’ OVERLAP 08:48-17:00 = 8.192h (attendance table)
[2025-10-03T06:14:46.156Z] [LOG]    âœ… Added to weekday total: 8.191944444444445h
[2025-10-03T06:14:46.157Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 9.12h worked â†’ 8.208055555555555h counted â†’ OVERLAP 08:47-17:00 = 8.208h (attendance table)
[2025-10-03T06:14:46.157Z] [LOG]    âœ… Added to weekday total: 8.208055555555555h
[2025-10-03T06:14:46.157Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 8.52h worked â†’ 8.416666666666666h counted â†’ OVERLAP 08:35-17:00 = 8.417h (attendance table)
[2025-10-03T06:14:46.158Z] [LOG]    âœ… Added to weekday total: 8.416666666666666h
[2025-10-03T06:14:46.158Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 8.57h worked â†’ 8.466666666666667h counted â†’ OVERLAP 08:32-17:00 = 8.467h (attendance table)
[2025-10-03T06:14:46.158Z] [LOG]    âœ… Added to weekday total: 8.466666666666667h
[2025-10-03T06:14:46.159Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:14:46.159Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:14:46.160Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 8.25h worked â†’ 8.16388888888889h counted â†’ OVERLAP 08:50-17:00 = 8.164h (attendance table)
[2025-10-03T06:14:46.160Z] [LOG]    âœ… Added to weekday total: 8.16388888888889h
[2025-10-03T06:14:46.161Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 9.32h worked â†’ 8.416666666666666h counted â†’ OVERLAP 08:35-17:00 = 8.417h (attendance table)
[2025-10-03T06:14:46.161Z] [LOG]    âœ… Added to weekday total: 8.416666666666666h
[2025-10-03T06:14:46.161Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 8.4h worked â†’ 8.383333333333333h counted â†’ OVERLAP 08:37-17:00 = 8.383h (attendance table)
[2025-10-03T06:14:46.161Z] [LOG]    âœ… Added to weekday total: 8.383333333333333h
[2025-10-03T06:14:46.162Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 8.18h worked â†’ 7.7780555555555555h counted â†’ OVERLAP 09:13-17:00 = 7.778h (attendance table)
[2025-10-03T06:14:46.162Z] [LOG]    âœ… Added to weekday total: 7.7780555555555555h
[2025-10-03T06:14:46.162Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 8.62h worked â†’ 8.416666666666666h counted â†’ OVERLAP 08:35-17:00 = 8.417h (attendance table)
[2025-10-03T06:14:46.162Z] [LOG]    âœ… Added to weekday total: 8.416666666666666h
[2025-10-03T06:14:46.163Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:14:46.163Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:14:46.163Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 8.26h worked â†’ 7.473333333333334h counted â†’ OVERLAP 09:31-17:00 = 7.473h (attendance table)
[2025-10-03T06:14:46.163Z] [LOG]    âœ… Added to weekday total: 7.473333333333334h
[2025-10-03T06:14:46.163Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 8.28h worked â†’ 8.25h counted â†’ OVERLAP 08:45-17:00 = 8.250h (attendance table)
[2025-10-03T06:14:46.163Z] [LOG]    âœ… Added to weekday total: 8.25h
[2025-10-03T06:14:46.164Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 8.75h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:14:46.164Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:14:46.164Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:14:46.164Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:14:46.164Z] [LOG] ================================================================================
[2025-10-03T06:14:46.165Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:14:46.165Z] [LOG]    Sum of all daily counted hours (rounded): 139.8539h
[2025-10-03T06:14:46.165Z] [LOG]    Expected hours: 170h
[2025-10-03T06:14:46.165Z] [LOG]    Shortfall: 30.15h
[2025-10-03T06:14:46.165Z] [LOG] ================================================================================
[2025-10-03T06:14:46.382Z] [LOG] ğŸ”„ Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430...
[2025-10-03T06:14:46.383Z] [LOG] ğŸ”„ Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:14:46.558Z] [LOG] ğŸ“Š Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:46.753Z] [LOG] ğŸ“Š Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:46.927Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:46.928Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:14:46.929Z] [LOG] ğŸ’° GROSS CALCULATION for Ratheeshanan null:
[2025-10-03T06:14:46.929Z] [LOG]    Base Salary: 25000
[2025-10-03T06:14:46.930Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:14:47.180Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:14:47.530Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:14:47.879Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:14:48.441Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:14:48.700Z] [LOG] Employee 01444966-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:14:48.700Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:14:48.701Z] [LOG] ============================================================
[2025-10-03T06:14:48.701Z] [LOG] ğŸ‘¤ Employee ID: 01444966-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:48.701Z] [LOG] ğŸ’° Base Salary: 25,000
[2025-10-03T06:14:48.701Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:14:48.702Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:14:48.702Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:14:48.702Z] [LOG] ğŸ’µ Per-Day Salary: 1000.00
[2025-10-03T06:14:48.702Z] [LOG] â±ï¸  Hourly Rate: 117.65
[2025-10-03T06:14:48.702Z] [LOG] 
[2025-10-03T06:14:48.703Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:14:48.703Z] [LOG]    Expected Hours: 170
[2025-10-03T06:14:48.703Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:14:48.703Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:14:48.704Z] [LOG]    Worked Hours: 139.8539
[2025-10-03T06:14:48.704Z] [LOG]    âš ï¸  Shortfall Hours: 30.14609999999999
[2025-10-03T06:14:48.704Z] [LOG]    ğŸ’¸ Shortfall Deduction: 30.14609999999999h Ã— 117.65 = 3546.60
[2025-10-03T06:14:48.704Z] [LOG] ============================================================
[2025-10-03T06:14:49.052Z] [LOG] âœ… Weekend Day Met: 2025-08-02 (Saturday)
[2025-10-03T06:14:49.053Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:14:49.053Z] [LOG] âœ… Weekend Day Met: 2025-08-09 (Saturday)
[2025-10-03T06:14:49.054Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:14:49.054Z] [LOG] âœ… Weekend Day Met: 2025-08-16 (Saturday)
[2025-10-03T06:14:49.054Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:14:49.055Z] [LOG] âœ… Weekend Day Met: 2025-08-23 (Saturday)
[2025-10-03T06:14:49.055Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:14:49.055Z] [LOG] âœ… Weekend Day Met: 2025-08-30 (Saturday)
[2025-10-03T06:14:49.056Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:14:49.404Z] [LOG] ğŸ“… Weekend absence check for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-03T06:14:49.405Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:14:49.405Z] [LOG]    Attended weekend dates: 5 days
[2025-10-03T06:14:49.406Z] [LOG]    Absent weekend dates: 0 days
[2025-10-03T06:14:49.406Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:14:49.407Z] [LOG]    Gross Salary: 25000
[2025-10-03T06:14:49.408Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:14:49.408Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:14:49.409Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:49.411Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:14:49.412Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:49.413Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:14:49.414Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:49.414Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:14:49.415Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:49.416Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:14:49.417Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:49.418Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:14:49.418Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:49.419Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:14:49.420Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:49.421Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:14:49.422Z] [LOG]    Fixed amount: 0
[2025-10-03T06:14:49.422Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:14:49.423Z] [LOG] Regular deductions for Ratheeshanan null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:14:49.424Z] [LOG] Combined deductions for Ratheeshanan null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 3546.5999999999985,
      "details": "30.14609999999999 hours Ã— 117.65"
    }
  ],
  "total": 3546.5999999999985
}
[2025-10-03T06:14:49.606Z] [LOG] Creating components for record 3bef23ab-a876-46f8-a11b-15a63a311381: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-03T06:14:49.608Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 3546.5999999999985
}
[2025-10-03T06:14:49.784Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:14:49.974Z] [LOG] Created payroll_record_component: 40137cb7-78d5-4707-ad6c-144f52fd5e4b for Working Hours Shortfall
[2025-10-03T06:14:50.520Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:14:50.526Z] [ERROR] âŒ Error updating financial balances for employee 01444966-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:14:50.535Z] [LOG] âœ… Ratheeshanan null: Calculation completed successfully
[2025-10-03T06:14:50.536Z] [LOG] ğŸ“Š Progress: 5/34 (14.7%)
[2025-10-03T06:14:50.536Z] [LOG] 
ğŸ§® Processing: Uthpala null (EMP000006)
[2025-10-03T06:14:50.537Z] [LOG] ğŸ“‹ Record ID: 3df5d965-deab-44a3-a8f6-b28a69fd653f
[2025-10-03T06:14:51.253Z] [LOG] ğŸ” Component filtering for employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-03T06:14:51.254Z] [LOG]    Total components: 8
[2025-10-03T06:14:51.254Z] [LOG]    Applicable components: 8
[2025-10-03T06:14:51.255Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-03T06:14:52.301Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:52.654Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:53.004Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:53.354Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:53.699Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:54.050Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:54.403Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:54.775Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:55.127Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:55.478Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:55.833Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:56.184Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:56.535Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:56.887Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:57.244Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:57.592Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:57.950Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:14:58.127Z] [LOG] ğŸ” Fetched 23 attendance records for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:58.302Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:14:59.273Z] [LOG] Employee 0143a539-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 09:30:00 - 17:30:00 = 8 hours
[2025-10-03T06:14:59.274Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8h = 160h
[2025-10-03T06:14:59.274Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:14:59.275Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:14:59.280Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-03T06:14:59.280Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:14:59.280Z] [LOG] ================================================================================
[2025-10-03T06:14:59.280Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 9.67h worked â†’ 7.564166666666667h counted â†’ OVERLAP 09:56-17:30 = 7.564h (attendance table)
[2025-10-03T06:14:59.281Z] [LOG]    âœ… Added to weekday total: 7.564166666666667h
[2025-10-03T06:14:59.281Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 5.34h worked â†’ 3.341666666666667h counted â†’ OVERLAP 09:39-13:00 = 3.342h (attendance table)
[2025-10-03T06:14:59.281Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.341666666666667h
[2025-10-03T06:14:59.281Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 10.35h worked â†’ 8h counted â†’ OVERLAP 09:30-17:30 = 8.000h (attendance table)
[2025-10-03T06:14:59.282Z] [LOG]    âœ… Added to weekday total: 8h
[2025-10-03T06:14:59.282Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 9.2h worked â†’ 7.704444444444444h counted â†’ OVERLAP 09:47-17:30 = 7.704h (attendance table)
[2025-10-03T06:14:59.282Z] [LOG]    âœ… Added to weekday total: 7.704444444444444h
[2025-10-03T06:14:59.283Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 9.45h worked â†’ 6.865555555555556h counted â†’ OVERLAP 10:38-17:30 = 6.866h (attendance table)
[2025-10-03T06:14:59.283Z] [LOG]    âœ… Added to weekday total: 6.865555555555556h
[2025-10-03T06:14:59.283Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 10.33h worked â†’ 8h counted â†’ OVERLAP 09:30-17:30 = 8.000h (attendance table)
[2025-10-03T06:14:59.284Z] [LOG]    âœ… Added to weekday total: 8h
[2025-10-03T06:14:59.284Z] [LOG] ğŸ“… 2025-08-09 (WEEKEND): 7.25h worked â†’ 3.25h counted â†’ OVERLAP 09:45-13:00 = 3.250h (attendance table)
[2025-10-03T06:14:59.284Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.25h
[2025-10-03T06:14:59.285Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 10h worked â†’ 7.5h counted â†’ OVERLAP 10:00-17:30 = 7.500h (attendance table)
[2025-10-03T06:14:59.285Z] [LOG]    âœ… Added to weekday total: 7.5h
[2025-10-03T06:14:59.285Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 11.75h worked â†’ 8h counted â†’ OVERLAP 09:30-17:30 = 8.000h (attendance table)
[2025-10-03T06:14:59.286Z] [LOG]    âœ… Added to weekday total: 8h
[2025-10-03T06:14:59.286Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 11.34h worked â†’ 8h counted â†’ OVERLAP 09:30-17:30 = 8.000h (attendance table)
[2025-10-03T06:14:59.286Z] [LOG]    âœ… Added to weekday total: 8h
[2025-10-03T06:14:59.286Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 8.73h worked â†’ 2.7280555555555557h counted â†’ OVERLAP 10:16-13:00 = 2.728h (attendance table)
[2025-10-03T06:14:59.287Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 2.7280555555555557h
[2025-10-03T06:14:59.287Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 8.15h worked â†’ 7.646944444444444h counted â†’ OVERLAP 09:51-17:30 = 7.647h (attendance table)
[2025-10-03T06:14:59.287Z] [LOG]    âœ… Added to weekday total: 7.646944444444444h
[2025-10-03T06:14:59.287Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 8h worked â†’ 7.5h counted â†’ OVERLAP 10:00-17:30 = 7.500h (attendance table)
[2025-10-03T06:14:59.287Z] [LOG]    âœ… Added to weekday total: 7.5h
[2025-10-03T06:14:59.288Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 9.04h worked â†’ 7.788055555555555h counted â†’ OVERLAP 09:42-17:30 = 7.788h (attendance table)
[2025-10-03T06:14:59.288Z] [LOG]    âœ… Added to weekday total: 7.788055555555555h
[2025-10-03T06:14:59.288Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 7.75h worked â†’ 6.7525h counted â†’ OVERLAP 10:44-17:30 = 6.753h (attendance table)
[2025-10-03T06:14:59.288Z] [LOG]    âœ… Added to weekday total: 6.7525h
[2025-10-03T06:14:59.288Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 9.5h worked â†’ 8h counted â†’ OVERLAP 09:30-17:30 = 8.000h (attendance table)
[2025-10-03T06:14:59.288Z] [LOG]    âœ… Added to weekday total: 8h
[2025-10-03T06:14:59.289Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 5h worked â†’ 3h counted â†’ OVERLAP 10:00-13:00 = 3.000h (attendance table)
[2025-10-03T06:14:59.289Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3h
[2025-10-03T06:14:59.289Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 8.03h worked â†’ 7.5h counted â†’ OVERLAP 09:30-17:00 = 7.500h (attendance table)
[2025-10-03T06:14:59.289Z] [LOG]    âœ… Added to weekday total: 7.5h
[2025-10-03T06:14:59.289Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 7.48h worked â†’ 6.982777777777778h counted â†’ OVERLAP 10:31-17:30 = 6.983h (attendance table)
[2025-10-03T06:14:59.290Z] [LOG]    âœ… Added to weekday total: 6.982777777777778h
[2025-10-03T06:14:59.290Z] [LOG] ğŸ“… 2025-08-27 (WEEKDAY): 8.27h worked â†’ 7.77h counted â†’ OVERLAP 09:43-17:30 = 7.770h (attendance table)
[2025-10-03T06:14:59.290Z] [LOG]    âœ… Added to weekday total: 7.77h
[2025-10-03T06:14:59.290Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 6.42h worked â†’ 6.416666666666667h counted â†’ OVERLAP 10:35-17:00 = 6.417h (attendance table)
[2025-10-03T06:14:59.290Z] [LOG]    âœ… Added to weekday total: 6.416666666666667h
[2025-10-03T06:14:59.290Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 9.23h worked â†’ 7.730555555555555h counted â†’ OVERLAP 09:46-17:30 = 7.731h (attendance table)
[2025-10-03T06:14:59.291Z] [LOG]    âœ… Added to weekday total: 7.730555555555555h
[2025-10-03T06:14:59.291Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 5.5h worked â†’ 3.5h counted â†’ OVERLAP 09:30-13:00 = 3.500h (attendance table)
[2025-10-03T06:14:59.291Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.5h
[2025-10-03T06:14:59.291Z] [LOG] ================================================================================
[2025-10-03T06:14:59.291Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:14:59.292Z] [LOG]    Sum of all daily counted hours (rounded): 135.7217h
[2025-10-03T06:14:59.292Z] [LOG]    Expected hours: 160h
[2025-10-03T06:14:59.292Z] [LOG]    Shortfall: 24.28h
[2025-10-03T06:14:59.292Z] [LOG] ================================================================================
[2025-10-03T06:14:59.470Z] [LOG] ğŸ”„ Processing financial records for employee 0143a539-7105-11f0-a50f-98e743540430...
[2025-10-03T06:14:59.471Z] [LOG] ğŸ”„ Processing financial records for employee 0143a539-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:14:59.646Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-03T06:14:59.828Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:00.008Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:00.009Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:15:00.010Z] [LOG] ğŸ’° GROSS CALCULATION for Uthpala null:
[2025-10-03T06:15:00.010Z] [LOG]    Base Salary: 100000
[2025-10-03T06:15:00.011Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:15:00.188Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:15:00.560Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:15:00.913Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:15:01.091Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:15:01.268Z] [LOG] Employee 0143a539-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 09:30:00 - 17:30:00 = 8 hours
[2025-10-03T06:15:01.269Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:15:01.269Z] [LOG] ============================================================
[2025-10-03T06:15:01.270Z] [LOG] ğŸ‘¤ Employee ID: 0143a539-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:01.271Z] [LOG] ğŸ’° Base Salary: 100,000
[2025-10-03T06:15:01.271Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:15:01.272Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:15:01.272Z] [LOG] â° Employee Daily Hours: 8h/day
[2025-10-03T06:15:01.273Z] [LOG] ğŸ’µ Per-Day Salary: 4000.00
[2025-10-03T06:15:01.274Z] [LOG] â±ï¸  Hourly Rate: 500.00
[2025-10-03T06:15:01.274Z] [LOG] 
[2025-10-03T06:15:01.275Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:15:01.276Z] [LOG]    Expected Hours: 160
[2025-10-03T06:15:01.277Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8h = 200.00h
[2025-10-03T06:15:01.277Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:15:01.278Z] [LOG]    Worked Hours: 135.7217
[2025-10-03T06:15:01.279Z] [LOG]    âš ï¸  Shortfall Hours: 24.2783
[2025-10-03T06:15:01.279Z] [LOG]    ğŸ’¸ Shortfall Deduction: 24.2783h Ã— 500.00 = 12139.15
[2025-10-03T06:15:01.280Z] [LOG] ============================================================
[2025-10-03T06:15:01.636Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-02 (Saturday)
[2025-10-03T06:15:01.636Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:15:01.637Z] [LOG]    Actual: 09:39:30 - 15:00:00
[2025-10-03T06:15:01.637Z] [LOG]    Calculation: OVERLAP 09:39-13:00 = 3.342h
[2025-10-03T06:15:01.637Z] [LOG]    Payable Hours: 3.342h
[2025-10-03T06:15:01.637Z] [LOG]    Shortfall: 1.158h
[2025-10-03T06:15:01.638Z] [LOG]    Hourly Rate: 888.89 (Day Salary 4000 Ã· 4.5h)
[2025-10-03T06:15:01.638Z] [LOG]    Deduction: 1029.63
[2025-10-03T06:15:01.638Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-09 (Saturday)
[2025-10-03T06:15:01.638Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:15:01.638Z] [LOG]    Actual: 09:45:00 - 17:00:00
[2025-10-03T06:15:01.639Z] [LOG]    Calculation: OVERLAP 09:45-13:00 = 3.250h
[2025-10-03T06:15:01.639Z] [LOG]    Payable Hours: 3.250h
[2025-10-03T06:15:01.639Z] [LOG]    Shortfall: 1.250h
[2025-10-03T06:15:01.640Z] [LOG]    Hourly Rate: 888.89 (Day Salary 4000 Ã· 4.5h)
[2025-10-03T06:15:01.640Z] [LOG]    Deduction: 1111.11
[2025-10-03T06:15:01.640Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-16 (Saturday)
[2025-10-03T06:15:01.641Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:15:01.641Z] [LOG]    Actual: 10:16:19 - 19:00:00
[2025-10-03T06:15:01.641Z] [LOG]    Calculation: OVERLAP 10:16-13:00 = 2.728h
[2025-10-03T06:15:01.641Z] [LOG]    Payable Hours: 2.728h
[2025-10-03T06:15:01.641Z] [LOG]    Shortfall: 1.772h
[2025-10-03T06:15:01.642Z] [LOG]    Hourly Rate: 888.89 (Day Salary 4000 Ã· 4.5h)
[2025-10-03T06:15:01.642Z] [LOG]    Deduction: 1575.06
[2025-10-03T06:15:01.642Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-23 (Saturday)
[2025-10-03T06:15:01.642Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:15:01.643Z] [LOG]    Actual: 10:00:00 - 15:00:00
[2025-10-03T06:15:01.643Z] [LOG]    Calculation: OVERLAP 10:00-13:00 = 3.000h
[2025-10-03T06:15:01.643Z] [LOG]    Payable Hours: 3.000h
[2025-10-03T06:15:01.643Z] [LOG]    Shortfall: 1.500h
[2025-10-03T06:15:01.644Z] [LOG]    Hourly Rate: 888.89 (Day Salary 4000 Ã· 4.5h)
[2025-10-03T06:15:01.644Z] [LOG]    Deduction: 1333.33
[2025-10-03T06:15:01.644Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-30 (Saturday)
[2025-10-03T06:15:01.644Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:15:01.645Z] [LOG]    Actual: 09:30:00 - 15:00:00
[2025-10-03T06:15:01.645Z] [LOG]    Calculation: OVERLAP 09:30-13:00 = 3.500h
[2025-10-03T06:15:01.645Z] [LOG]    Payable Hours: 3.500h
[2025-10-03T06:15:01.645Z] [LOG]    Shortfall: 1.000h
[2025-10-03T06:15:01.646Z] [LOG]    Hourly Rate: 888.89 (Day Salary 4000 Ã· 4.5h)
[2025-10-03T06:15:01.646Z] [LOG]    Deduction: 888.89
[2025-10-03T06:15:01.995Z] [LOG] ğŸ“… Weekend absence check for employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-03T06:15:01.996Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:15:01.997Z] [LOG]    Attended weekend dates: 5 days
[2025-10-03T06:15:01.997Z] [LOG]    Absent weekend dates: 0 days
[2025-10-03T06:15:01.998Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:15:01.999Z] [LOG]    Gross Salary: 100000
[2025-10-03T06:15:01.999Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:15:02.000Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:15:02.000Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:02.001Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:15:02.002Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:02.002Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:15:02.003Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:02.004Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:15:02.005Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:02.006Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:15:02.006Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:02.007Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:15:02.009Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:02.010Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:15:02.010Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:02.011Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:15:02.012Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:02.012Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:15:02.013Z] [LOG] Regular deductions for Uthpala null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:15:02.014Z] [LOG] Combined deductions for Uthpala null: {
  "components": [
    {
      "code": "WEEKEND_SHORTFALL",
      "name": "Weekend Shortfall Deduction",
      "type": "deduction",
      "category": "other",
      "amount": 5938.024691358025,
      "details": "Total 6.68h shortfall - 2025-08-02 (Saturday): 1.16h, 2025-08-09 (Saturday): 1.25h, 2025-08-16 (Saturday): 1.77h, 2025-08-23 (Saturday): 1.50h, 2025-08-30 (Saturday): 1.00h"
    },
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 12139.150000000001,
      "details": "24.2783 hours Ã— 500.00"
    }
  ],
  "total": 18077.17469135803
}
[2025-10-03T06:15:02.204Z] [LOG] Creating components for record 3df5d965-deab-44a3-a8f6-b28a69fd653f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:15:02.206Z] [LOG] Processing component: {
  "name": "Weekend Shortfall Deduction",
  "type": "deduction",
  "amount": 5938.024691358025
}
[2025-10-03T06:15:02.383Z] [LOG] Using existing component ID: 106fdfbf-ee30-432b-8a98-9c8f6cef1ae1
[2025-10-03T06:15:02.568Z] [LOG] Created payroll_record_component: 955e785f-c118-4852-8639-9341dbd4283f for Weekend Shortfall Deduction
[2025-10-03T06:15:02.568Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 12139.150000000001
}
[2025-10-03T06:15:02.745Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:15:02.926Z] [LOG] Created payroll_record_component: ba4c3f30-6243-4a4c-b84e-aa145345f6dd for Working Hours Shortfall
[2025-10-03T06:15:03.455Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:15:03.463Z] [ERROR] âŒ Error updating financial balances for employee 0143a539-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:15:03.470Z] [LOG] âœ… Uthpala null: Calculation completed successfully
[2025-10-03T06:15:03.471Z] [LOG] ğŸ“Š Progress: 6/34 (17.6%)
[2025-10-03T06:15:03.471Z] [LOG] 
ğŸ§® Processing: Anoj null (EMP000014)
[2025-10-03T06:15:03.472Z] [LOG] ğŸ“‹ Record ID: 42a7c5b2-d41c-492d-8fe8-833567203936
[2025-10-03T06:15:04.176Z] [LOG] ğŸ” Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-03T06:15:04.176Z] [LOG]    Total components: 8
[2025-10-03T06:15:04.177Z] [LOG]    Applicable components: 8
[2025-10-03T06:15:04.177Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-03T06:15:05.233Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:05.588Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:05.939Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:06.287Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:06.636Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:06.988Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:07.346Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:07.704Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:08.055Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:08.405Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:08.752Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:09.114Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:09.463Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:09.819Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:10.170Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:10.345Z] [LOG] ğŸ” Fetched 17 attendance records for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:10.520Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:15:11.398Z] [LOG] Employee 0143afc6-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:15:11.398Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:15:11.398Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:15:11.399Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:15:11.401Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-03T06:15:11.401Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:15:11.401Z] [LOG] ================================================================================
[2025-10-03T06:15:11.402Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 15.16h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:15:11.402Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:15:11.402Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 6.07h worked â†’ 4.473888888888889h counted â†’ OVERLAP 08:31-13:00 = 4.474h (attendance table)
[2025-10-03T06:15:11.403Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.473888888888889h
[2025-10-03T06:15:11.403Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 8.64h worked â†’ 8h counted â†’ OVERLAP 09:00-17:00 = 8.000h (attendance table)
[2025-10-03T06:15:11.403Z] [LOG]    âœ… Added to weekday total: 8h
[2025-10-03T06:15:11.403Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 9.17h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:15:11.403Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:15:11.404Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 11.58h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:15:11.404Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:15:11.404Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 11h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:15:11.404Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:15:11.404Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 10.58h worked â†’ 7.982777777777778h counted â†’ OVERLAP 09:01-17:00 = 7.983h (attendance table)
[2025-10-03T06:15:11.404Z] [LOG]    âœ… Added to weekday total: 7.982777777777778h
[2025-10-03T06:15:11.405Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 10.48h worked â†’ 8.475277777777778h counted â†’ OVERLAP 08:31-17:00 = 8.475h (attendance table)
[2025-10-03T06:15:11.405Z] [LOG]    âœ… Added to weekday total: 8.475277777777778h
[2025-10-03T06:15:11.405Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 10.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:15:11.405Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:15:11.405Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 9.07h worked â†’ 8.071111111111112h counted â†’ OVERLAP 08:55-17:00 = 8.071h (attendance table)
[2025-10-03T06:15:11.406Z] [LOG]    âœ… Added to weekday total: 8.071111111111112h
[2025-10-03T06:15:11.406Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 9.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:15:11.406Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:15:11.406Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 12h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:15:11.407Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:15:11.407Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 9.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:15:11.407Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:15:11.407Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 9.25h worked â†’ 8.25h counted â†’ OVERLAP 08:45-17:00 = 8.250h (attendance table)
[2025-10-03T06:15:11.407Z] [LOG]    âœ… Added to weekday total: 8.25h
[2025-10-03T06:15:11.408Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 7.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:15:11.408Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:15:11.408Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 9.25h worked â†’ 8.25h counted â†’ OVERLAP 08:45-17:00 = 8.250h (attendance table)
[2025-10-03T06:15:11.409Z] [LOG]    âœ… Added to weekday total: 8.25h
[2025-10-03T06:15:11.409Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 6.25h worked â†’ 3.2508333333333335h counted â†’ OVERLAP 09:44-13:00 = 3.251h (attendance table)
[2025-10-03T06:15:11.409Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.2508333333333335h
[2025-10-03T06:15:11.410Z] [LOG] ================================================================================
[2025-10-03T06:15:11.410Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:15:11.410Z] [LOG]    Sum of all daily counted hours (rounded): 108.5292h
[2025-10-03T06:15:11.410Z] [LOG]    Expected hours: 170h
[2025-10-03T06:15:11.411Z] [LOG]    Shortfall: 61.47h
[2025-10-03T06:15:11.411Z] [LOG] ================================================================================
[2025-10-03T06:15:11.588Z] [LOG] ğŸ”„ Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430...
[2025-10-03T06:15:11.589Z] [LOG] ğŸ”„ Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:15:11.765Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:11.944Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:12.120Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:12.120Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:15:12.121Z] [LOG] ğŸ’° GROSS CALCULATION for Anoj null:
[2025-10-03T06:15:12.121Z] [LOG]    Base Salary: 50000
[2025-10-03T06:15:12.121Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:15:12.297Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:15:12.643Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:15:13.001Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:15:13.177Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:15:13.352Z] [LOG] Employee 0143afc6-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:15:13.353Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:15:13.353Z] [LOG] ============================================================
[2025-10-03T06:15:13.353Z] [LOG] ğŸ‘¤ Employee ID: 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:13.353Z] [LOG] ğŸ’° Base Salary: 50,000
[2025-10-03T06:15:13.354Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:15:13.358Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:15:13.360Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:15:13.362Z] [LOG] ğŸ’µ Per-Day Salary: 2000.00
[2025-10-03T06:15:13.362Z] [LOG] â±ï¸  Hourly Rate: 235.29
[2025-10-03T06:15:13.362Z] [LOG] 
[2025-10-03T06:15:13.362Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:15:13.363Z] [LOG]    Expected Hours: 170
[2025-10-03T06:15:13.363Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:15:13.364Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:15:13.364Z] [LOG]    Worked Hours: 108.5292
[2025-10-03T06:15:13.364Z] [LOG]    âš ï¸  Shortfall Hours: 61.4708
[2025-10-03T06:15:13.365Z] [LOG]    ğŸ’¸ Shortfall Deduction: 61.4708h Ã— 235.29 = 14463.72
[2025-10-03T06:15:13.366Z] [LOG] ============================================================
[2025-10-03T06:15:13.718Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-02 (Saturday)
[2025-10-03T06:15:13.718Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:15:13.718Z] [LOG]    Actual: 08:31:34 - 14:36:00
[2025-10-03T06:15:13.719Z] [LOG]    Calculation: OVERLAP 08:31-13:00 = 4.474h
[2025-10-03T06:15:13.719Z] [LOG]    Payable Hours: 4.474h
[2025-10-03T06:15:13.719Z] [LOG]    Shortfall: 0.026h
[2025-10-03T06:15:13.719Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:15:13.719Z] [LOG]    Deduction: 11.60
[2025-10-03T06:15:13.720Z] [LOG] âœ… Weekend Day Met: 2025-08-16 (Saturday)
[2025-10-03T06:15:13.720Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:15:13.720Z] [LOG] âœ… Weekend Day Met: 2025-08-23 (Saturday)
[2025-10-03T06:15:13.720Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:15:13.720Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-30 (Saturday)
[2025-10-03T06:15:13.721Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:15:13.721Z] [LOG]    Actual: 09:44:57 - 16:00:00
[2025-10-03T06:15:13.721Z] [LOG]    Calculation: OVERLAP 09:44-13:00 = 3.251h
[2025-10-03T06:15:13.721Z] [LOG]    Payable Hours: 3.251h
[2025-10-03T06:15:13.721Z] [LOG]    Shortfall: 1.249h
[2025-10-03T06:15:13.722Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:15:13.722Z] [LOG]    Deduction: 555.19
[2025-10-03T06:15:14.093Z] [LOG] ğŸ“… Weekend absence check for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-03T06:15:14.094Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:15:14.094Z] [LOG]    Attended weekend dates: 4 days
[2025-10-03T06:15:14.094Z] [LOG]    Absent weekend dates: 1 days
[2025-10-03T06:15:14.094Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:15:14.095Z] [LOG]    Gross Salary: 50000
[2025-10-03T06:15:14.095Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:15:14.095Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:15:14.096Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:14.096Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:15:14.096Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:14.096Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:15:14.096Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:14.096Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:15:14.097Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:14.097Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:15:14.097Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:14.097Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:15:14.098Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:14.098Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:15:14.098Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:14.098Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:15:14.099Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:14.099Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:15:14.099Z] [LOG] Regular deductions for Anoj null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:15:14.099Z] [LOG] Combined deductions for Anoj null: {
  "components": [
    {
      "code": "WEEKEND_SHORTFALL",
      "name": "Weekend Shortfall Deduction",
      "type": "deduction",
      "category": "other",
      "amount": 566.7901234567898,
      "details": "Total 1.28h shortfall - 2025-08-02 (Saturday): 0.03h, 2025-08-30 (Saturday): 1.25h"
    },
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 14463.717647058822,
      "details": "61.4708 hours Ã— 235.29"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 2000,
      "details": "1 weekend days Ã— 2000.00"
    }
  ],
  "total": 17030.50777051561
}
[2025-10-03T06:15:14.278Z] [LOG] Creating components for record 42a7c5b2-d41c-492d-8fe8-833567203936: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 3,
  "taxComponentsCount": 0
}
[2025-10-03T06:15:14.279Z] [LOG] Processing component: {
  "name": "Weekend Shortfall Deduction",
  "type": "deduction",
  "amount": 566.7901234567898
}
[2025-10-03T06:15:14.455Z] [LOG] Using existing component ID: 106fdfbf-ee30-432b-8a98-9c8f6cef1ae1
[2025-10-03T06:15:14.633Z] [LOG] Created payroll_record_component: deb2bb6b-7f24-42ea-936c-aed1941f6103 for Weekend Shortfall Deduction
[2025-10-03T06:15:14.633Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 14463.717647058822
}
[2025-10-03T06:15:14.806Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:15:14.983Z] [LOG] Created payroll_record_component: 85f21aae-5374-4faf-b7c2-640da49ca999 for Working Hours Shortfall
[2025-10-03T06:15:14.984Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 2000
}
[2025-10-03T06:15:15.163Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:15:15.339Z] [LOG] Created payroll_record_component: ef972b69-06ca-43c2-b837-dc52bd92b506 for Weekend Absent Days
[2025-10-03T06:15:15.859Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:15:15.863Z] [ERROR] âŒ Error updating financial balances for employee 0143afc6-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:15:15.867Z] [LOG] âœ… Anoj null: Calculation completed successfully
[2025-10-03T06:15:15.868Z] [LOG] ğŸ“Š Progress: 7/34 (20.6%)
[2025-10-03T06:15:15.868Z] [LOG] 
ğŸ§® Processing: Ishara null (EMP000011)
[2025-10-03T06:15:15.868Z] [LOG] ğŸ“‹ Record ID: 42e5feb4-228c-4759-83ef-a355da16ba68
[2025-10-03T06:15:16.566Z] [LOG] ğŸ” Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-03T06:15:16.566Z] [LOG]    Total components: 8
[2025-10-03T06:15:16.567Z] [LOG]    Applicable components: 8
[2025-10-03T06:15:16.567Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-03T06:15:17.457Z] [LOG] ğŸ” Fetched 0 attendance records for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:17.458Z] [LOG] âš ï¸  ATTENTION: Employee 0143ac0c-7105-11f0-a50f-98e743540430 has NO attendance records in this payroll period!
[2025-10-03T06:15:17.638Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:15:18.688Z] [LOG] Employee 0143ac0c-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:15:18.689Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8h = 160h
[2025-10-03T06:15:18.689Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:15:18.690Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:15:18.704Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-03T06:15:18.705Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:15:18.705Z] [LOG] ================================================================================
[2025-10-03T06:15:18.706Z] [LOG] ================================================================================
[2025-10-03T06:15:18.707Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:15:18.711Z] [LOG]    Sum of all daily counted hours (rounded): 0h
[2025-10-03T06:15:18.712Z] [LOG]    Expected hours: 160h
[2025-10-03T06:15:18.713Z] [LOG]    Shortfall: 160.00h
[2025-10-03T06:15:18.713Z] [LOG] ================================================================================
[2025-10-03T06:15:18.888Z] [LOG] ğŸ”„ Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430...
[2025-10-03T06:15:18.889Z] [LOG] ğŸ”„ Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:15:19.065Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:19.243Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:20.050Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:20.051Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:15:20.053Z] [LOG] ğŸ’° GROSS CALCULATION for Ishara null:
[2025-10-03T06:15:20.054Z] [LOG]    Base Salary: 50000
[2025-10-03T06:15:20.054Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:15:20.297Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:15:20.777Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:15:21.616Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:15:21.794Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:15:22.311Z] [LOG] Employee 0143ac0c-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:15:22.312Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:15:22.312Z] [LOG] ============================================================
[2025-10-03T06:15:22.312Z] [LOG] ğŸ‘¤ Employee ID: 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:22.313Z] [LOG] ğŸ’° Base Salary: 50,000
[2025-10-03T06:15:22.313Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:15:22.314Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:15:22.314Z] [LOG] â° Employee Daily Hours: 8h/day
[2025-10-03T06:15:22.314Z] [LOG] ğŸ’µ Per-Day Salary: 2000.00
[2025-10-03T06:15:22.315Z] [LOG] â±ï¸  Hourly Rate: 250.00
[2025-10-03T06:15:22.315Z] [LOG] 
[2025-10-03T06:15:22.316Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:15:22.316Z] [LOG]    Expected Hours: 160
[2025-10-03T06:15:22.316Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8h = 200.00h
[2025-10-03T06:15:22.317Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:15:22.318Z] [LOG]    Worked Hours: 0
[2025-10-03T06:15:22.318Z] [LOG]    âš ï¸  Shortfall Hours: 160
[2025-10-03T06:15:22.319Z] [LOG]    ğŸ’¸ Shortfall Deduction: 160h Ã— 250.00 = 40000.00
[2025-10-03T06:15:22.320Z] [LOG] ============================================================
[2025-10-03T06:15:24.618Z] [LOG] ğŸ“… Weekend absence check for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-03T06:15:24.618Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:15:24.619Z] [LOG]    Attended weekend dates: 0 days
[2025-10-03T06:15:24.619Z] [LOG]    Absent weekend dates: 5 days
[2025-10-03T06:15:24.620Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:15:24.621Z] [LOG]    Gross Salary: 50000
[2025-10-03T06:15:24.621Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:15:24.622Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:15:24.623Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:24.624Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:15:24.625Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:24.625Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:15:24.626Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:24.627Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:15:24.627Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:24.628Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:15:24.629Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:24.630Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:15:24.630Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:24.631Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:15:24.632Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:24.632Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:15:24.633Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:24.633Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:15:24.634Z] [LOG] Regular deductions for Ishara null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:15:24.635Z] [LOG] Combined deductions for Ishara null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 40000,
      "details": "160 hours Ã— 250.00"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 10000,
      "details": "5 weekend days Ã— 2000.00"
    }
  ],
  "total": 50000
}
[2025-10-03T06:15:27.045Z] [LOG] Creating components for record 42e5feb4-228c-4759-83ef-a355da16ba68: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:15:27.048Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 40000
}
[2025-10-03T06:15:27.592Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:15:27.834Z] [LOG] Created payroll_record_component: b77ef92c-fb7d-48af-94f3-0d2f456fc277 for Working Hours Shortfall
[2025-10-03T06:15:27.835Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 10000
}
[2025-10-03T06:15:28.011Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:15:28.184Z] [LOG] Created payroll_record_component: 7c5830ee-a08d-4e9a-ae2e-fd81c0eb6926 for Weekend Absent Days
[2025-10-03T06:15:28.708Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:15:28.720Z] [ERROR] âŒ Error updating financial balances for employee 0143ac0c-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:15:28.726Z] [LOG] âœ… Ishara null: Calculation completed successfully
[2025-10-03T06:15:28.727Z] [LOG] ğŸ“Š Progress: 8/34 (23.5%)
[2025-10-03T06:15:28.727Z] [LOG] 
ğŸ§® Processing: Saruban null (EMP000007)
[2025-10-03T06:15:28.728Z] [LOG] ğŸ“‹ Record ID: 44438041-c007-49cc-9a44-b90bb1b37f70
[2025-10-03T06:15:29.423Z] [LOG] ğŸ” Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-03T06:15:29.423Z] [LOG]    Total components: 8
[2025-10-03T06:15:29.423Z] [LOG]    Applicable components: 8
[2025-10-03T06:15:29.424Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-03T06:15:30.302Z] [LOG] ğŸ” Fetched 0 attendance records for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:30.302Z] [LOG] âš ï¸  ATTENTION: Employee 0143a6e3-7105-11f0-a50f-98e743540430 has NO attendance records in this payroll period!
[2025-10-03T06:15:30.480Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:15:31.690Z] [LOG] Employee 0143a6e3-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:15:31.691Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8h = 160h
[2025-10-03T06:15:31.691Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:15:31.692Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:15:31.694Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-03T06:15:31.694Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:15:31.695Z] [LOG] ================================================================================
[2025-10-03T06:15:31.695Z] [LOG] ================================================================================
[2025-10-03T06:15:31.695Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:15:31.696Z] [LOG]    Sum of all daily counted hours (rounded): 0h
[2025-10-03T06:15:31.696Z] [LOG]    Expected hours: 160h
[2025-10-03T06:15:31.696Z] [LOG]    Shortfall: 160.00h
[2025-10-03T06:15:31.696Z] [LOG] ================================================================================
[2025-10-03T06:15:31.983Z] [LOG] ğŸ”„ Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430...
[2025-10-03T06:15:31.984Z] [LOG] ğŸ”„ Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:15:32.162Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:32.337Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:32.511Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:32.512Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:15:32.512Z] [LOG] ğŸ’° GROSS CALCULATION for Saruban null:
[2025-10-03T06:15:32.513Z] [LOG]    Base Salary: 0
[2025-10-03T06:15:32.513Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:15:32.684Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:15:33.041Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:15:33.391Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:15:33.566Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:15:33.916Z] [LOG] Employee 0143a6e3-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:15:33.917Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:15:33.917Z] [LOG] ============================================================
[2025-10-03T06:15:33.917Z] [LOG] ğŸ‘¤ Employee ID: 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:33.918Z] [LOG] ğŸ’° Base Salary: 0
[2025-10-03T06:15:33.918Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:15:33.918Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:15:33.918Z] [LOG] â° Employee Daily Hours: 8h/day
[2025-10-03T06:15:33.919Z] [LOG] ğŸ’µ Per-Day Salary: 0.00
[2025-10-03T06:15:33.919Z] [LOG] â±ï¸  Hourly Rate: 0.00
[2025-10-03T06:15:33.919Z] [LOG] 
[2025-10-03T06:15:33.919Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:15:33.920Z] [LOG]    Expected Hours: 160
[2025-10-03T06:15:33.920Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8h = 200.00h
[2025-10-03T06:15:33.920Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:15:33.921Z] [LOG]    Worked Hours: 0
[2025-10-03T06:15:33.921Z] [LOG]    âš ï¸  Shortfall Hours: 160
[2025-10-03T06:15:33.921Z] [LOG]    ğŸ’¸ Shortfall Deduction: 160h Ã— 0.00 = 0.00
[2025-10-03T06:15:33.921Z] [LOG] ============================================================
[2025-10-03T06:15:34.645Z] [LOG] ğŸ“… Weekend absence check for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-03T06:15:34.645Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:15:34.645Z] [LOG]    Attended weekend dates: 0 days
[2025-10-03T06:15:34.646Z] [LOG]    Absent weekend dates: 5 days
[2025-10-03T06:15:34.646Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:15:34.647Z] [LOG]    Gross Salary: 0
[2025-10-03T06:15:34.647Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:15:34.647Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:15:34.648Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:34.648Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:15:34.648Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:34.649Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:15:34.649Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:34.649Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:15:34.650Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:34.650Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:15:34.650Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:34.651Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:15:34.651Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:34.651Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:15:34.651Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:34.652Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:15:34.652Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:34.652Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:15:34.652Z] [LOG] Regular deductions for Saruban null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:15:34.653Z] [LOG] Combined deductions for Saruban null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 0,
      "details": "160 hours Ã— 0.00"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 0,
      "details": "5 weekend days Ã— 0.00"
    }
  ],
  "total": 0
}
[2025-10-03T06:15:34.833Z] [LOG] Creating components for record 44438041-c007-49cc-9a44-b90bb1b37f70: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:15:34.835Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 0
}
[2025-10-03T06:15:35.010Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:15:35.191Z] [LOG] Created payroll_record_component: 993fa8e6-40ac-413a-8ff9-39309d18a436 for Working Hours Shortfall
[2025-10-03T06:15:35.191Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 0
}
[2025-10-03T06:15:35.368Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:15:35.543Z] [LOG] Created payroll_record_component: f935595f-9fd4-4f48-93ff-1c583c421556 for Weekend Absent Days
[2025-10-03T06:15:36.102Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:15:36.109Z] [ERROR] âŒ Error updating financial balances for employee 0143a6e3-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:15:36.119Z] [LOG] âœ… Saruban null: Calculation completed successfully
[2025-10-03T06:15:36.120Z] [LOG] ğŸ“Š Progress: 9/34 (26.5%)
[2025-10-03T06:15:36.121Z] [LOG] 
ğŸ§® Processing: Ammaar Ilham (EMP000023)
[2025-10-03T06:15:36.122Z] [LOG] ğŸ“‹ Record ID: 49a605a0-2b53-4330-bc2e-0c8557a55a28
[2025-10-03T06:15:36.836Z] [LOG] ğŸ” Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-03T06:15:36.836Z] [LOG]    Total components: 8
[2025-10-03T06:15:36.837Z] [LOG]    Applicable components: 8
[2025-10-03T06:15:36.839Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-03T06:15:37.890Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:38.244Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:38.634Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:39.002Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:39.362Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:39.713Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:40.061Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:40.420Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:40.769Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:41.123Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:41.925Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:42.331Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:42.682Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:43.032Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:43.213Z] [LOG] ğŸ” Fetched 25 attendance records for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:43.397Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:15:44.278Z] [LOG] Employee 0143de00-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:15:44.279Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:15:44.280Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:15:44.281Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:15:44.289Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-03T06:15:44.290Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:15:44.291Z] [LOG] ================================================================================
[2025-10-03T06:15:44.292Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 8.51h worked â†’ 8.177777777777777h counted â†’ OVERLAP 08:49-17:00 = 8.178h (attendance table)
[2025-10-03T06:15:44.292Z] [LOG]    âœ… Added to weekday total: 8.177777777777777h
[2025-10-03T06:15:44.293Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 5.93h worked â†’ 3.6008333333333336h counted â†’ OVERLAP 09:23-13:00 = 3.601h (attendance table)
[2025-10-03T06:15:44.294Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.6008333333333336h
[2025-10-03T06:15:44.294Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 9.25h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:15:44.295Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:15:44.296Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 7.64h worked â†’ 7.103055555555556h counted â†’ OVERLAP 09:53-17:00 = 7.103h (attendance table)
[2025-10-03T06:15:44.296Z] [LOG]    âœ… Added to weekday total: 7.103055555555556h
[2025-10-03T06:15:44.297Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 8.1h worked â†’ 7.372777777777777h counted â†’ OVERLAP 09:37-17:00 = 7.373h (attendance table)
[2025-10-03T06:15:44.298Z] [LOG]    âœ… Added to weekday total: 7.372777777777777h
[2025-10-03T06:15:44.298Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:15:44.299Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:15:44.300Z] [LOG] ğŸ“… 2025-08-09 (WEEKEND): 4.89h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:15:44.303Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:15:44.304Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 8.69h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:15:44.304Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:15:44.305Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 8.11h worked â†’ 8.083333333333334h counted â†’ OVERLAP 08:55-17:00 = 8.083h (attendance table)
[2025-10-03T06:15:44.306Z] [LOG]    âœ… Added to weekday total: 8.083333333333334h
[2025-10-03T06:15:44.307Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 7.64h worked â†’ 7.1113888888888885h counted â†’ OVERLAP 09:53-17:00 = 7.111h (attendance table)
[2025-10-03T06:15:44.307Z] [LOG]    âœ… Added to weekday total: 7.1113888888888885h
[2025-10-03T06:15:44.308Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 8.08h worked â†’ 7.684722222222222h counted â†’ OVERLAP 09:18-17:00 = 7.685h (attendance table)
[2025-10-03T06:15:44.309Z] [LOG]    âœ… Added to weekday total: 7.684722222222222h
[2025-10-03T06:15:44.310Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 7.36h worked â†’ 6.544444444444444h counted â†’ OVERLAP 10:27-17:00 = 6.544h (attendance table)
[2025-10-03T06:15:44.311Z] [LOG]    âœ… Added to weekday total: 6.544444444444444h
[2025-10-03T06:15:44.311Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 5.04h worked â†’ 4.403888888888889h counted â†’ OVERLAP 08:35-13:00 = 4.404h (attendance table)
[2025-10-03T06:15:44.312Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.403888888888889h
[2025-10-03T06:15:44.312Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 9.58h worked â†’ 8.25h counted â†’ OVERLAP 08:45-17:00 = 8.250h (attendance table)
[2025-10-03T06:15:44.312Z] [LOG]    âœ… Added to weekday total: 8.25h
[2025-10-03T06:15:44.313Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 8.79h worked â†’ 8.231666666666667h counted â†’ OVERLAP 08:46-17:00 = 8.232h (attendance table)
[2025-10-03T06:15:44.313Z] [LOG]    âœ… Added to weekday total: 8.231666666666667h
[2025-10-03T06:15:44.315Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 8.93h worked â†’ 8.25h counted â†’ OVERLAP 08:45-17:00 = 8.250h (attendance table)
[2025-10-03T06:15:44.315Z] [LOG]    âœ… Added to weekday total: 8.25h
[2025-10-03T06:15:44.316Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 4.65h worked â†’ 4.646111111111111h counted â†’ OVERLAP 08:40-13:18 = 4.646h (attendance table)
[2025-10-03T06:15:44.316Z] [LOG]    âœ… Added to weekday total: 4.646111111111111h
[2025-10-03T06:15:44.318Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 9.4h worked â†’ 8.441944444444445h counted â†’ OVERLAP 08:33-17:00 = 8.442h (attendance table)
[2025-10-03T06:15:44.319Z] [LOG]    âœ… Added to weekday total: 8.441944444444445h
[2025-10-03T06:15:44.320Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 5.49h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:15:44.321Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:15:44.321Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 9.09h worked â†’ 8.335555555555555h counted â†’ OVERLAP 08:39-17:00 = 8.336h (attendance table)
[2025-10-03T06:15:44.322Z] [LOG]    âœ… Added to weekday total: 8.335555555555555h
[2025-10-03T06:15:44.322Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 10.24h worked â†’ 8.422777777777778h counted â†’ OVERLAP 08:34-17:00 = 8.423h (attendance table)
[2025-10-03T06:15:44.323Z] [LOG]    âœ… Added to weekday total: 8.422777777777778h
[2025-10-03T06:15:44.323Z] [LOG] ğŸ“… 2025-08-27 (WEEKDAY): 9.68h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:15:44.324Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:15:44.324Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 9.39h worked â†’ 8.072777777777778h counted â†’ OVERLAP 08:55-17:00 = 8.073h (attendance table)
[2025-10-03T06:15:44.324Z] [LOG]    âœ… Added to weekday total: 8.072777777777778h
[2025-10-03T06:15:44.325Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 8.97h worked â†’ 8.474444444444444h counted â†’ OVERLAP 08:31-17:00 = 8.474h (attendance table)
[2025-10-03T06:15:44.325Z] [LOG]    âœ… Added to weekday total: 8.474444444444444h
[2025-10-03T06:15:44.326Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 8.28h worked â†’ 4.333333333333333h counted â†’ OVERLAP 08:40-13:00 = 4.333h (attendance table)
[2025-10-03T06:15:44.326Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.333333333333333h
[2025-10-03T06:15:44.327Z] [LOG] ================================================================================
[2025-10-03T06:15:44.328Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:15:44.328Z] [LOG]    Sum of all daily counted hours (rounded): 157.2028h
[2025-10-03T06:15:44.328Z] [LOG]    Expected hours: 170h
[2025-10-03T06:15:44.329Z] [LOG]    Shortfall: 12.80h
[2025-10-03T06:15:44.329Z] [LOG] ================================================================================
[2025-10-03T06:15:44.505Z] [LOG] ğŸ”„ Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430...
[2025-10-03T06:15:44.506Z] [LOG] ğŸ”„ Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:15:44.683Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:44.858Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:45.034Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:45.035Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:15:45.037Z] [LOG] ğŸ’° GROSS CALCULATION for Ammaar Ilham:
[2025-10-03T06:15:45.037Z] [LOG]    Base Salary: 70000
[2025-10-03T06:15:45.038Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:15:45.213Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:15:45.570Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:15:45.922Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:15:46.098Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:15:46.273Z] [LOG] Employee 0143de00-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:15:46.273Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:15:46.273Z] [LOG] ============================================================
[2025-10-03T06:15:46.274Z] [LOG] ğŸ‘¤ Employee ID: 0143de00-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:46.274Z] [LOG] ğŸ’° Base Salary: 70,000
[2025-10-03T06:15:46.274Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:15:46.275Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:15:46.275Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:15:46.275Z] [LOG] ğŸ’µ Per-Day Salary: 2800.00
[2025-10-03T06:15:46.276Z] [LOG] â±ï¸  Hourly Rate: 329.41
[2025-10-03T06:15:46.276Z] [LOG] 
[2025-10-03T06:15:46.276Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:15:46.277Z] [LOG]    Expected Hours: 170
[2025-10-03T06:15:46.277Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:15:46.277Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:15:46.278Z] [LOG]    Worked Hours: 157.2028
[2025-10-03T06:15:46.278Z] [LOG]    âš ï¸  Shortfall Hours: 12.797200000000004
[2025-10-03T06:15:46.278Z] [LOG]    ğŸ’¸ Shortfall Deduction: 12.797200000000004h Ã— 329.41 = 4215.55
[2025-10-03T06:15:46.279Z] [LOG] ============================================================
[2025-10-03T06:15:46.635Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-02 (Saturday)
[2025-10-03T06:15:46.635Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:15:46.636Z] [LOG]    Actual: 09:23:57 - 15:19:51
[2025-10-03T06:15:46.636Z] [LOG]    Calculation: OVERLAP 09:23-13:00 = 3.601h
[2025-10-03T06:15:46.636Z] [LOG]    Payable Hours: 3.601h
[2025-10-03T06:15:46.636Z] [LOG]    Shortfall: 0.899h
[2025-10-03T06:15:46.637Z] [LOG]    Hourly Rate: 622.22 (Day Salary 2800 Ã· 4.5h)
[2025-10-03T06:15:46.637Z] [LOG]    Deduction: 559.48
[2025-10-03T06:15:46.637Z] [LOG] âœ… Weekend Day Met: 2025-08-09 (Saturday)
[2025-10-03T06:15:46.637Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:15:46.638Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-16 (Saturday)
[2025-10-03T06:15:46.638Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:15:46.639Z] [LOG]    Actual: 08:35:46 - 13:38:10
[2025-10-03T06:15:46.639Z] [LOG]    Calculation: OVERLAP 08:35-13:00 = 4.404h
[2025-10-03T06:15:46.639Z] [LOG]    Payable Hours: 4.404h
[2025-10-03T06:15:46.640Z] [LOG]    Shortfall: 0.096h
[2025-10-03T06:15:46.640Z] [LOG]    Hourly Rate: 622.22 (Day Salary 2800 Ã· 4.5h)
[2025-10-03T06:15:46.640Z] [LOG]    Deduction: 59.80
[2025-10-03T06:15:46.641Z] [LOG] âœ… Weekend Day Met: 2025-08-23 (Saturday)
[2025-10-03T06:15:46.641Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:15:46.641Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-30 (Saturday)
[2025-10-03T06:15:46.642Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:15:46.642Z] [LOG]    Actual: 08:40:00 - 16:57:00
[2025-10-03T06:15:46.642Z] [LOG]    Calculation: OVERLAP 08:40-13:00 = 4.333h
[2025-10-03T06:15:46.642Z] [LOG]    Payable Hours: 4.333h
[2025-10-03T06:15:46.643Z] [LOG]    Shortfall: 0.167h
[2025-10-03T06:15:46.643Z] [LOG]    Hourly Rate: 622.22 (Day Salary 2800 Ã· 4.5h)
[2025-10-03T06:15:46.643Z] [LOG]    Deduction: 103.70
[2025-10-03T06:15:46.997Z] [LOG] ğŸ“… Weekend absence check for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-03T06:15:46.997Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:15:46.997Z] [LOG]    Attended weekend dates: 5 days
[2025-10-03T06:15:46.997Z] [LOG]    Absent weekend dates: 0 days
[2025-10-03T06:15:46.997Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:15:46.998Z] [LOG]    Gross Salary: 70000
[2025-10-03T06:15:46.998Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:15:46.998Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:15:46.998Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:46.999Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:15:46.999Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:46.999Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:15:46.999Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:47.000Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:15:47.000Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:47.000Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:15:47.001Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:47.001Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:15:47.001Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:47.002Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:15:47.002Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:47.003Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:15:47.003Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:47.004Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:15:47.005Z] [LOG] Regular deductions for Ammaar Ilham: {
  "components": [],
  "total": 0
}
[2025-10-03T06:15:47.006Z] [LOG] Combined deductions for Ammaar Ilham: {
  "components": [
    {
      "code": "WEEKEND_SHORTFALL",
      "name": "Weekend Shortfall Deduction",
      "type": "deduction",
      "category": "other",
      "amount": 722.9876543209876,
      "details": "Total 1.16h shortfall - 2025-08-02 (Saturday): 0.90h, 2025-08-16 (Saturday): 0.10h, 2025-08-30 (Saturday): 0.17h"
    },
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 4215.548235294119,
      "details": "12.797200000000004 hours Ã— 329.41"
    }
  ],
  "total": 4938.5358896151065
}
[2025-10-03T06:15:47.187Z] [LOG] Creating components for record 49a605a0-2b53-4330-bc2e-0c8557a55a28: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:15:47.188Z] [LOG] Processing component: {
  "name": "Weekend Shortfall Deduction",
  "type": "deduction",
  "amount": 722.9876543209876
}
[2025-10-03T06:15:47.363Z] [LOG] Using existing component ID: 106fdfbf-ee30-432b-8a98-9c8f6cef1ae1
[2025-10-03T06:15:47.537Z] [LOG] Created payroll_record_component: 27d0c3c1-7243-4421-b8f7-4d376af40fe4 for Weekend Shortfall Deduction
[2025-10-03T06:15:47.537Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 4215.548235294119
}
[2025-10-03T06:15:47.721Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:15:47.901Z] [LOG] Created payroll_record_component: fc18eee5-7b80-4757-acd6-377ec0c5cab6 for Working Hours Shortfall
[2025-10-03T06:15:48.427Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:15:48.430Z] [ERROR] âŒ Error updating financial balances for employee 0143de00-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:15:48.432Z] [LOG] âœ… Ammaar Ilham: Calculation completed successfully
[2025-10-03T06:15:48.433Z] [LOG] ğŸ“Š Progress: 10/34 (29.4%)
[2025-10-03T06:15:48.433Z] [LOG] 
ğŸ§® Processing: Franklin null (EMP000018)
[2025-10-03T06:15:48.433Z] [LOG] ğŸ“‹ Record ID: 5effb188-5497-4009-8982-24a91ea9c18f
[2025-10-03T06:15:49.171Z] [LOG] ğŸ” Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-03T06:15:49.173Z] [LOG]    Total components: 8
[2025-10-03T06:15:49.173Z] [LOG]    Applicable components: 8
[2025-10-03T06:15:49.174Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-03T06:15:50.238Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:50.596Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:50.946Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:51.302Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:51.659Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:52.007Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:52.356Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:52.748Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:53.098Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:15:53.281Z] [LOG] ğŸ” Fetched 23 attendance records for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:53.458Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:15:54.353Z] [LOG] Employee 0143c037-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:15:54.353Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:15:54.353Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:15:54.353Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:15:54.355Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-03T06:15:54.356Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:15:54.356Z] [LOG] ================================================================================
[2025-10-03T06:15:54.357Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 9.8h worked â†’ 7.523611111111111h counted â†’ OVERLAP 09:28-17:00 = 7.524h (attendance table)
[2025-10-03T06:15:54.357Z] [LOG]    âœ… Added to weekday total: 7.523611111111111h
[2025-10-03T06:15:54.357Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 4.14h worked â†’ 2.5052777777777777h counted â†’ OVERLAP 10:29-13:00 = 2.505h (attendance table)
[2025-10-03T06:15:54.357Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 2.5052777777777777h
[2025-10-03T06:15:54.358Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 7.43h worked â†’ 6.398888888888889h counted â†’ OVERLAP 10:36-17:00 = 6.399h (attendance table)
[2025-10-03T06:15:54.358Z] [LOG]    âœ… Added to weekday total: 6.398888888888889h
[2025-10-03T06:15:54.358Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 8.26h worked â†’ 6.606111111111111h counted â†’ OVERLAP 10:23-17:00 = 6.606h (attendance table)
[2025-10-03T06:15:54.358Z] [LOG]    âœ… Added to weekday total: 6.606111111111111h
[2025-10-03T06:15:54.359Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 7.57h worked â†’ 7.573333333333333h counted â†’ OVERLAP 09:18-16:52 = 7.573h (attendance table)
[2025-10-03T06:15:54.359Z] [LOG]    âœ… Added to weekday total: 7.573333333333333h
[2025-10-03T06:15:54.359Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 9.1h worked â†’ 6.680833333333333h counted â†’ OVERLAP 10:19-17:00 = 6.681h (attendance table)
[2025-10-03T06:15:54.360Z] [LOG]    âœ… Added to weekday total: 6.680833333333333h
[2025-10-03T06:15:54.360Z] [LOG] ğŸ“… 2025-08-09 (WEEKEND): 4.18h worked â†’ 0.8844444444444445h counted â†’ OVERLAP 12:06-13:00 = 0.884h (attendance table)
[2025-10-03T06:15:54.360Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 0.8844444444444445h
[2025-10-03T06:15:54.360Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 10.02h worked â†’ 7.506944444444445h counted â†’ OVERLAP 09:29-17:00 = 7.507h (attendance table)
[2025-10-03T06:15:54.361Z] [LOG]    âœ… Added to weekday total: 7.506944444444445h
[2025-10-03T06:15:54.361Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 10.92h worked â†’ 7.374722222222222h counted â†’ OVERLAP 09:37-17:00 = 7.375h (attendance table)
[2025-10-03T06:15:54.361Z] [LOG]    âœ… Added to weekday total: 7.374722222222222h
[2025-10-03T06:15:54.361Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 6.18h worked â†’ 5.593055555555556h counted â†’ OVERLAP 11:24-17:00 = 5.593h (attendance table)
[2025-10-03T06:15:54.361Z] [LOG]    âœ… Added to weekday total: 5.593055555555556h
[2025-10-03T06:15:54.362Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 7.9h worked â†’ 6.578333333333333h counted â†’ OVERLAP 10:25-17:00 = 6.578h (attendance table)
[2025-10-03T06:15:54.362Z] [LOG]    âœ… Added to weekday total: 6.578333333333333h
[2025-10-03T06:15:54.362Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 9.41h worked â†’ 7.051388888888889h counted â†’ OVERLAP 09:56-17:00 = 7.051h (attendance table)
[2025-10-03T06:15:54.362Z] [LOG]    âœ… Added to weekday total: 7.051388888888889h
[2025-10-03T06:15:54.363Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 9h worked â†’ 3h counted â†’ OVERLAP 10:00-13:00 = 3.000h (attendance table)
[2025-10-03T06:15:54.363Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3h
[2025-10-03T06:15:54.363Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 9.28h worked â†’ 6.714166666666666h counted â†’ OVERLAP 10:17-17:00 = 6.714h (attendance table)
[2025-10-03T06:15:54.363Z] [LOG]    âœ… Added to weekday total: 6.714166666666666h
[2025-10-03T06:15:54.363Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 7.8h worked â†’ 6.644722222222223h counted â†’ OVERLAP 10:21-17:00 = 6.645h (attendance table)
[2025-10-03T06:15:54.364Z] [LOG]    âœ… Added to weekday total: 6.644722222222223h
[2025-10-03T06:15:54.364Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 6.8h worked â†’ 6.469444444444444h counted â†’ OVERLAP 10:31-17:00 = 6.469h (attendance table)
[2025-10-03T06:15:54.364Z] [LOG]    âœ… Added to weekday total: 6.469444444444444h
[2025-10-03T06:15:54.364Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 6.66h worked â†’ 5.995833333333334h counted â†’ OVERLAP 11:00-17:00 = 5.996h (attendance table)
[2025-10-03T06:15:54.364Z] [LOG]    âœ… Added to weekday total: 5.995833333333334h
[2025-10-03T06:15:54.364Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 3.72h worked â†’ 3.062777777777778h counted â†’ OVERLAP 09:56-13:00 = 3.063h (attendance table)
[2025-10-03T06:15:54.365Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.062777777777778h
[2025-10-03T06:15:54.365Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 6.64h worked â†’ 6.6369444444444445h counted â†’ OVERLAP 10:21-17:00 = 6.637h (attendance table)
[2025-10-03T06:15:54.365Z] [LOG]    âœ… Added to weekday total: 6.6369444444444445h
[2025-10-03T06:15:54.365Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 8.94h worked â†’ 7.152222222222222h counted â†’ OVERLAP 09:50-17:00 = 7.152h (attendance table)
[2025-10-03T06:15:54.365Z] [LOG]    âœ… Added to weekday total: 7.152222222222222h
[2025-10-03T06:15:54.366Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 7.82h worked â†’ 6.613333333333333h counted â†’ OVERLAP 10:23-17:00 = 6.613h (attendance table)
[2025-10-03T06:15:54.366Z] [LOG]    âœ… Added to weekday total: 6.613333333333333h
[2025-10-03T06:15:54.366Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 8.96h worked â†’ 6.652777777777778h counted â†’ OVERLAP 10:20-17:00 = 6.653h (attendance table)
[2025-10-03T06:15:54.366Z] [LOG]    âœ… Added to weekday total: 6.652777777777778h
[2025-10-03T06:15:54.366Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 4.16h worked â†’ 2.155h counted â†’ OVERLAP 10:50-13:00 = 2.155h (attendance table)
[2025-10-03T06:15:54.366Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 2.155h
[2025-10-03T06:15:54.367Z] [LOG] ================================================================================
[2025-10-03T06:15:54.367Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:15:54.367Z] [LOG]    Sum of all daily counted hours (rounded): 121.7667h
[2025-10-03T06:15:54.368Z] [LOG]    Expected hours: 170h
[2025-10-03T06:15:54.368Z] [LOG]    Shortfall: 48.23h
[2025-10-03T06:15:54.369Z] [LOG] ================================================================================
[2025-10-03T06:15:54.546Z] [LOG] ğŸ”„ Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430...
[2025-10-03T06:15:54.547Z] [LOG] ğŸ”„ Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:15:54.730Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:54.907Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:55.083Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:55.085Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:15:55.087Z] [LOG] ğŸ’° GROSS CALCULATION for Franklin null:
[2025-10-03T06:15:55.087Z] [LOG]    Base Salary: 50000
[2025-10-03T06:15:55.088Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:15:55.264Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:15:55.621Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:15:55.991Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:15:56.170Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:15:56.362Z] [LOG] Employee 0143c037-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:15:56.363Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:15:56.363Z] [LOG] ============================================================
[2025-10-03T06:15:56.364Z] [LOG] ğŸ‘¤ Employee ID: 0143c037-7105-11f0-a50f-98e743540430
[2025-10-03T06:15:56.365Z] [LOG] ğŸ’° Base Salary: 50,000
[2025-10-03T06:15:56.365Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:15:56.366Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:15:56.367Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:15:56.368Z] [LOG] ğŸ’µ Per-Day Salary: 2000.00
[2025-10-03T06:15:56.370Z] [LOG] â±ï¸  Hourly Rate: 235.29
[2025-10-03T06:15:56.371Z] [LOG] 
[2025-10-03T06:15:56.372Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:15:56.373Z] [LOG]    Expected Hours: 170
[2025-10-03T06:15:56.373Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:15:56.374Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:15:56.375Z] [LOG]    Worked Hours: 121.7667
[2025-10-03T06:15:56.376Z] [LOG]    âš ï¸  Shortfall Hours: 48.2333
[2025-10-03T06:15:56.376Z] [LOG]    ğŸ’¸ Shortfall Deduction: 48.2333h Ã— 235.29 = 11349.01
[2025-10-03T06:15:56.377Z] [LOG] ============================================================
[2025-10-03T06:15:56.735Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-02 (Saturday)
[2025-10-03T06:15:56.736Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:15:56.736Z] [LOG]    Actual: 10:29:41 - 14:38:17
[2025-10-03T06:15:56.736Z] [LOG]    Calculation: OVERLAP 10:29-13:00 = 2.505h
[2025-10-03T06:15:56.736Z] [LOG]    Payable Hours: 2.505h
[2025-10-03T06:15:56.737Z] [LOG]    Shortfall: 1.995h
[2025-10-03T06:15:56.737Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:15:56.737Z] [LOG]    Deduction: 886.54
[2025-10-03T06:15:56.738Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-09 (Saturday)
[2025-10-03T06:15:56.738Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:15:56.738Z] [LOG]    Actual: 12:06:56 - 16:18:00
[2025-10-03T06:15:56.739Z] [LOG]    Calculation: OVERLAP 12:06-13:00 = 0.884h
[2025-10-03T06:15:56.739Z] [LOG]    Payable Hours: 0.884h
[2025-10-03T06:15:56.739Z] [LOG]    Shortfall: 3.616h
[2025-10-03T06:15:56.739Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:15:56.740Z] [LOG]    Deduction: 1606.91
[2025-10-03T06:15:56.740Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-16 (Saturday)
[2025-10-03T06:15:56.740Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:15:56.740Z] [LOG]    Actual: 10:00:00 - 19:00:00
[2025-10-03T06:15:56.741Z] [LOG]    Calculation: OVERLAP 10:00-13:00 = 3.000h
[2025-10-03T06:15:56.741Z] [LOG]    Payable Hours: 3.000h
[2025-10-03T06:15:56.741Z] [LOG]    Shortfall: 1.500h
[2025-10-03T06:15:56.741Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:15:56.742Z] [LOG]    Deduction: 666.67
[2025-10-03T06:15:56.742Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-23 (Saturday)
[2025-10-03T06:15:56.742Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:15:56.742Z] [LOG]    Actual: 09:56:14 - 13:39:10
[2025-10-03T06:15:56.742Z] [LOG]    Calculation: OVERLAP 09:56-13:00 = 3.063h
[2025-10-03T06:15:56.743Z] [LOG]    Payable Hours: 3.063h
[2025-10-03T06:15:56.743Z] [LOG]    Shortfall: 1.437h
[2025-10-03T06:15:56.743Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:15:56.743Z] [LOG]    Deduction: 638.77
[2025-10-03T06:15:56.743Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-30 (Saturday)
[2025-10-03T06:15:56.744Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:15:56.744Z] [LOG]    Actual: 10:50:42 - 15:00:00
[2025-10-03T06:15:56.744Z] [LOG]    Calculation: OVERLAP 10:50-13:00 = 2.155h
[2025-10-03T06:15:56.744Z] [LOG]    Payable Hours: 2.155h
[2025-10-03T06:15:56.745Z] [LOG]    Shortfall: 2.345h
[2025-10-03T06:15:56.746Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:15:56.747Z] [LOG]    Deduction: 1042.22
[2025-10-03T06:15:57.105Z] [LOG] ğŸ“… Weekend absence check for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-03T06:15:57.106Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:15:57.106Z] [LOG]    Attended weekend dates: 5 days
[2025-10-03T06:15:57.106Z] [LOG]    Absent weekend dates: 0 days
[2025-10-03T06:15:57.107Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:15:57.107Z] [LOG]    Gross Salary: 50000
[2025-10-03T06:15:57.108Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:15:57.108Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:15:57.108Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:57.108Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:15:57.109Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:57.109Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:15:57.109Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:57.110Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:15:57.110Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:57.110Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:15:57.111Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:57.111Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:15:57.111Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:57.112Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:15:57.112Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:57.112Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:15:57.113Z] [LOG]    Fixed amount: 0
[2025-10-03T06:15:57.113Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:15:57.113Z] [LOG] Regular deductions for Franklin null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:15:57.114Z] [LOG] Combined deductions for Franklin null: {
  "components": [
    {
      "code": "WEEKEND_SHORTFALL",
      "name": "Weekend Shortfall Deduction",
      "type": "deduction",
      "category": "other",
      "amount": 4841.111111111111,
      "details": "Total 10.89h shortfall - 2025-08-02 (Saturday): 1.99h, 2025-08-09 (Saturday): 3.62h, 2025-08-16 (Saturday): 1.50h, 2025-08-23 (Saturday): 1.44h, 2025-08-30 (Saturday): 2.35h"
    },
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 11349.011764705881,
      "details": "48.2333 hours Ã— 235.29"
    }
  ],
  "total": 16190.122875816993
}
[2025-10-03T06:15:57.295Z] [LOG] Creating components for record 5effb188-5497-4009-8982-24a91ea9c18f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:15:57.296Z] [LOG] Processing component: {
  "name": "Weekend Shortfall Deduction",
  "type": "deduction",
  "amount": 4841.111111111111
}
[2025-10-03T06:15:57.504Z] [LOG] Using existing component ID: 106fdfbf-ee30-432b-8a98-9c8f6cef1ae1
[2025-10-03T06:15:57.725Z] [LOG] Created payroll_record_component: 387300da-6f79-4057-bdb0-0625d0db8143 for Weekend Shortfall Deduction
[2025-10-03T06:15:57.726Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 11349.011764705881
}
[2025-10-03T06:15:57.903Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:15:58.083Z] [LOG] Created payroll_record_component: 563a45a7-d9a0-49d6-ad3b-8a5dd0136b07 for Working Hours Shortfall
[2025-10-03T06:15:59.023Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:15:59.025Z] [ERROR] âŒ Error updating financial balances for employee 0143c037-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:15:59.027Z] [LOG] âœ… Franklin null: Calculation completed successfully
[2025-10-03T06:15:59.028Z] [LOG] ğŸ“Š Progress: 11/34 (32.4%)
[2025-10-03T06:15:59.028Z] [LOG] 
ğŸ§® Processing: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-03T06:15:59.028Z] [LOG] ğŸ“‹ Record ID: 698c3e8b-8d3e-419d-81ae-ef2fa77a9fea
[2025-10-03T06:15:59.751Z] [LOG] ğŸ” Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-03T06:15:59.755Z] [LOG]    Total components: 8
[2025-10-03T06:15:59.756Z] [LOG]    Applicable components: 8
[2025-10-03T06:15:59.757Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-03T06:16:00.876Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:01.223Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:01.572Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:01.921Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:02.272Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:02.624Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:02.984Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:03.331Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:03.680Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:04.030Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:04.384Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:04.737Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:05.091Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:05.441Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:05.792Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:06.142Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:06.498Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:06.850Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:07.208Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:07.557Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:07.734Z] [LOG] ğŸ” Fetched 23 attendance records for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:07.911Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:16:08.801Z] [LOG] Employee 0144461e-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:16:08.801Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:16:08.801Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:16:08.802Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:16:08.805Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-03T06:16:08.805Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:16:08.805Z] [LOG] ================================================================================
[2025-10-03T06:16:08.805Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 8.96h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:08.806Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:08.806Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 6.83h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:16:08.807Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:16:08.807Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 8.72h worked â†’ 7.916388888888889h counted â†’ OVERLAP 09:05-17:00 = 7.916h (attendance table)
[2025-10-03T06:16:08.807Z] [LOG]    âœ… Added to weekday total: 7.916388888888889h
[2025-10-03T06:16:08.807Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 9.06h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:08.808Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:08.808Z] [LOG] ğŸ“… 2025-08-09 (WEEKEND): 4.9h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:16:08.808Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:16:08.808Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 10.15h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:08.809Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:08.809Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 9.56h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:08.809Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:08.809Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 9.21h worked â†’ 8.451944444444445h counted â†’ OVERLAP 08:32-17:00 = 8.452h (attendance table)
[2025-10-03T06:16:08.809Z] [LOG]    âœ… Added to weekday total: 8.451944444444445h
[2025-10-03T06:16:08.810Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 8.86h worked â†’ 8.462222222222222h counted â†’ OVERLAP 08:32-17:00 = 8.462h (attendance table)
[2025-10-03T06:16:08.810Z] [LOG]    âœ… Added to weekday total: 8.462222222222222h
[2025-10-03T06:16:08.810Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 9.01h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:08.810Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:08.810Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:16:08.811Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:16:08.811Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 9.95h worked â†’ 8.374444444444444h counted â†’ OVERLAP 08:37-17:00 = 8.374h (attendance table)
[2025-10-03T06:16:08.812Z] [LOG]    âœ… Added to weekday total: 8.374444444444444h
[2025-10-03T06:16:08.813Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 9.06h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:08.813Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:08.813Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 10.1h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:08.814Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:08.814Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 9.25h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:08.814Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:08.815Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 8.83h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:08.815Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:08.815Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:16:08.815Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:16:08.816Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 10.63h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:08.816Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:08.816Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 8.98h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:08.816Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:08.817Z] [LOG] ğŸ“… 2025-08-27 (WEEKDAY): 9.1h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:08.817Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:08.818Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 8.59h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:08.818Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:08.818Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 9.56h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:08.819Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:08.819Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:16:08.819Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:16:08.819Z] [LOG] ================================================================================
[2025-10-03T06:16:08.820Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:16:08.820Z] [LOG]    Sum of all daily counted hours (rounded): 152.205h
[2025-10-03T06:16:08.820Z] [LOG]    Expected hours: 170h
[2025-10-03T06:16:08.820Z] [LOG]    Shortfall: 17.79h
[2025-10-03T06:16:08.820Z] [LOG] ================================================================================
[2025-10-03T06:16:08.998Z] [LOG] ğŸ”„ Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430...
[2025-10-03T06:16:08.998Z] [LOG] ğŸ”„ Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:16:09.175Z] [LOG] ğŸ“Š Found 0 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:09.349Z] [LOG] ğŸ“Š Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:09.529Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:09.530Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:16:09.530Z] [LOG] ğŸ’° GROSS CALCULATION for Ashen Nirmal Wadugodapitiya null:
[2025-10-03T06:16:09.531Z] [LOG]    Base Salary: 50000
[2025-10-03T06:16:09.531Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:16:09.709Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:16:10.059Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:16:10.419Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:16:10.594Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:16:10.771Z] [LOG] Employee 0144461e-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:16:10.772Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:16:10.772Z] [LOG] ============================================================
[2025-10-03T06:16:10.773Z] [LOG] ğŸ‘¤ Employee ID: 0144461e-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:10.773Z] [LOG] ğŸ’° Base Salary: 50,000
[2025-10-03T06:16:10.774Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:16:10.775Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:16:10.775Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:16:10.776Z] [LOG] ğŸ’µ Per-Day Salary: 2000.00
[2025-10-03T06:16:10.776Z] [LOG] â±ï¸  Hourly Rate: 235.29
[2025-10-03T06:16:10.777Z] [LOG] 
[2025-10-03T06:16:10.778Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:16:10.778Z] [LOG]    Expected Hours: 170
[2025-10-03T06:16:10.779Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:16:10.780Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:16:10.780Z] [LOG]    Worked Hours: 152.205
[2025-10-03T06:16:10.781Z] [LOG]    âš ï¸  Shortfall Hours: 17.794999999999987
[2025-10-03T06:16:10.781Z] [LOG]    ğŸ’¸ Shortfall Deduction: 17.794999999999987h Ã— 235.29 = 4187.06
[2025-10-03T06:16:10.782Z] [LOG] ============================================================
[2025-10-03T06:16:11.139Z] [LOG] âœ… Weekend Day Met: 2025-08-02 (Saturday)
[2025-10-03T06:16:11.140Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:16:11.140Z] [LOG] âœ… Weekend Day Met: 2025-08-09 (Saturday)
[2025-10-03T06:16:11.140Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:16:11.140Z] [LOG] âœ… Weekend Day Met: 2025-08-16 (Saturday)
[2025-10-03T06:16:11.140Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:16:11.141Z] [LOG] âœ… Weekend Day Met: 2025-08-23 (Saturday)
[2025-10-03T06:16:11.141Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:16:11.141Z] [LOG] âœ… Weekend Day Met: 2025-08-30 (Saturday)
[2025-10-03T06:16:11.141Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:16:11.495Z] [LOG] ğŸ“… Weekend absence check for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-03T06:16:11.495Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:16:11.495Z] [LOG]    Attended weekend dates: 5 days
[2025-10-03T06:16:11.496Z] [LOG]    Absent weekend dates: 0 days
[2025-10-03T06:16:11.496Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:16:11.497Z] [LOG]    Gross Salary: 50000
[2025-10-03T06:16:11.497Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:16:11.497Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:16:11.498Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:11.498Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:16:11.498Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:11.499Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:16:11.499Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:11.499Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:16:11.500Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:11.500Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:16:11.500Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:11.501Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:16:11.501Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:11.501Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:16:11.501Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:11.502Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:16:11.502Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:11.502Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:16:11.502Z] [LOG] Regular deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:16:11.503Z] [LOG] Combined deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 4187.058823529409,
      "details": "17.794999999999987 hours Ã— 235.29"
    }
  ],
  "total": 4187.058823529409
}
[2025-10-03T06:16:11.679Z] [LOG] Creating components for record 698c3e8b-8d3e-419d-81ae-ef2fa77a9fea: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-03T06:16:11.680Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 4187.058823529409
}
[2025-10-03T06:16:11.860Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:16:12.037Z] [LOG] Created payroll_record_component: 6a9d1caa-6f12-4b33-8783-07f8025b0fa0 for Working Hours Shortfall
[2025-10-03T06:16:12.569Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:16:12.572Z] [ERROR] âŒ Error updating financial balances for employee 0144461e-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:16:12.574Z] [LOG] âœ… Ashen Nirmal Wadugodapitiya null: Calculation completed successfully
[2025-10-03T06:16:12.574Z] [LOG] ğŸ“Š Progress: 12/34 (35.3%)
[2025-10-03T06:16:12.574Z] [LOG] 
ğŸ§® Processing: Dharshika null (EMP000009)
[2025-10-03T06:16:12.575Z] [LOG] ğŸ“‹ Record ID: 69941f33-1f3a-4f65-a124-e1e21b03995c
[2025-10-03T06:16:13.279Z] [LOG] ğŸ” Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-03T06:16:13.280Z] [LOG]    Total components: 8
[2025-10-03T06:16:13.280Z] [LOG]    Applicable components: 8
[2025-10-03T06:16:13.281Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-03T06:16:14.344Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:14.692Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:15.040Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:15.393Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:15.744Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:16.100Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:16.450Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:16.806Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:17.155Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:17.510Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:17.865Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:18.216Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:18.564Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:18.928Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:19.298Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:19.474Z] [LOG] ğŸ” Fetched 22 attendance records for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:19.652Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:16:20.537Z] [LOG] Employee 0143a994-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:16:20.538Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:16:20.538Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:16:20.538Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:16:20.540Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-03T06:16:20.540Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:16:20.541Z] [LOG] ================================================================================
[2025-10-03T06:16:20.541Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 10.37h worked â†’ 7.753611111111111h counted â†’ OVERLAP 09:14-17:00 = 7.754h (attendance table)
[2025-10-03T06:16:20.541Z] [LOG]    âœ… Added to weekday total: 7.753611111111111h
[2025-10-03T06:16:20.541Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 9.71h worked â†’ 8.166666666666666h counted â†’ OVERLAP 08:50-17:00 = 8.167h (attendance table)
[2025-10-03T06:16:20.542Z] [LOG]    âœ… Added to weekday total: 8.166666666666666h
[2025-10-03T06:16:20.542Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:20.542Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:20.543Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:20.543Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:20.543Z] [LOG] ğŸ“… 2025-08-09 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:16:20.544Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:16:20.544Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 10.46h worked â†’ 8.091388888888888h counted â†’ OVERLAP 08:54-17:00 = 8.091h (attendance table)
[2025-10-03T06:16:20.544Z] [LOG]    âœ… Added to weekday total: 8.091388888888888h
[2025-10-03T06:16:20.544Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 10.99h worked â†’ 7.433333333333334h counted â†’ OVERLAP 09:34-17:00 = 7.433h (attendance table)
[2025-10-03T06:16:20.544Z] [LOG]    âœ… Added to weekday total: 7.433333333333334h
[2025-10-03T06:16:20.545Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 7.82h worked â†’ 4.755833333333333h counted â†’ OVERLAP 12:14-17:00 = 4.756h (attendance table)
[2025-10-03T06:16:20.545Z] [LOG]    âœ… Added to weekday total: 4.755833333333333h
[2025-10-03T06:16:20.545Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 10.18h worked â†’ 7.688888888888889h counted â†’ OVERLAP 09:18-17:00 = 7.689h (attendance table)
[2025-10-03T06:16:20.545Z] [LOG]    âœ… Added to weekday total: 7.688888888888889h
[2025-10-03T06:16:20.545Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 10.69h worked â†’ 7.098333333333334h counted â†’ OVERLAP 09:54-17:00 = 7.098h (attendance table)
[2025-10-03T06:16:20.546Z] [LOG]    âœ… Added to weekday total: 7.098333333333334h
[2025-10-03T06:16:20.546Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 7.28h worked â†’ 3.3433333333333333h counted â†’ OVERLAP 09:39-13:00 = 3.343h (attendance table)
[2025-10-03T06:16:20.546Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.3433333333333333h
[2025-10-03T06:16:20.546Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 9.03h worked â†’ 7.332777777777777h counted â†’ OVERLAP 09:40-17:00 = 7.333h (attendance table)
[2025-10-03T06:16:20.547Z] [LOG]    âœ… Added to weekday total: 7.332777777777777h
[2025-10-03T06:16:20.547Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 10.18h worked â†’ 7.5h counted â†’ OVERLAP 09:30-17:00 = 7.500h (attendance table)
[2025-10-03T06:16:20.547Z] [LOG]    âœ… Added to weekday total: 7.5h
[2025-10-03T06:16:20.548Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 9.81h worked â†’ 7.285555555555556h counted â†’ OVERLAP 09:42-17:00 = 7.286h (attendance table)
[2025-10-03T06:16:20.548Z] [LOG]    âœ… Added to weekday total: 7.285555555555556h
[2025-10-03T06:16:20.548Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 9.19h worked â†’ 6.996944444444445h counted â†’ OVERLAP 10:00-17:00 = 6.997h (attendance table)
[2025-10-03T06:16:20.548Z] [LOG]    âœ… Added to weekday total: 6.996944444444445h
[2025-10-03T06:16:20.549Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 8.61h worked â†’ 7.426666666666667h counted â†’ OVERLAP 09:34-17:00 = 7.427h (attendance table)
[2025-10-03T06:16:20.549Z] [LOG]    âœ… Added to weekday total: 7.426666666666667h
[2025-10-03T06:16:20.549Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 10.71h worked â†’ 8.068333333333333h counted â†’ OVERLAP 08:55-17:00 = 8.068h (attendance table)
[2025-10-03T06:16:20.549Z] [LOG]    âœ… Added to weekday total: 8.068333333333333h
[2025-10-03T06:16:20.549Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 9.08h worked â†’ 7.339166666666666h counted â†’ OVERLAP 09:39-17:00 = 7.339h (attendance table)
[2025-10-03T06:16:20.550Z] [LOG]    âœ… Added to weekday total: 7.339166666666666h
[2025-10-03T06:16:20.550Z] [LOG] ğŸ“… 2025-08-27 (WEEKDAY): 8.5h worked â†’ 5h counted â†’ OVERLAP 12:00-17:00 = 5.000h (attendance table)
[2025-10-03T06:16:20.550Z] [LOG]    âœ… Added to weekday total: 5h
[2025-10-03T06:16:20.550Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 8.57h worked â†’ 6.769166666666667h counted â†’ OVERLAP 10:13-17:00 = 6.769h (attendance table)
[2025-10-03T06:16:20.551Z] [LOG]    âœ… Added to weekday total: 6.769166666666667h
[2025-10-03T06:16:20.551Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 10.83h worked â†’ 7.010833333333333h counted â†’ OVERLAP 09:59-17:00 = 7.011h (attendance table)
[2025-10-03T06:16:20.551Z] [LOG]    âœ… Added to weekday total: 7.010833333333333h
[2025-10-03T06:16:20.551Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 7.49h worked â†’ 3.2225h counted â†’ OVERLAP 09:46-13:00 = 3.223h (attendance table)
[2025-10-03T06:16:20.551Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.2225h
[2025-10-03T06:16:20.552Z] [LOG] ================================================================================
[2025-10-03T06:16:20.552Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:16:20.552Z] [LOG]    Sum of all daily counted hours (rounded): 138.7175h
[2025-10-03T06:16:20.552Z] [LOG]    Expected hours: 170h
[2025-10-03T06:16:20.552Z] [LOG]    Shortfall: 31.28h
[2025-10-03T06:16:20.552Z] [LOG] ================================================================================
[2025-10-03T06:16:20.732Z] [LOG] ğŸ”„ Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430...
[2025-10-03T06:16:20.733Z] [LOG] ğŸ”„ Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:16:20.908Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:21.086Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:21.263Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:21.264Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:16:21.265Z] [LOG] ğŸ’° GROSS CALCULATION for Dharshika null:
[2025-10-03T06:16:21.266Z] [LOG]    Base Salary: 100000
[2025-10-03T06:16:21.266Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:16:21.441Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:16:21.791Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:16:22.166Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:16:22.340Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:16:22.516Z] [LOG] Employee 0143a994-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:16:22.517Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:16:22.518Z] [LOG] ============================================================
[2025-10-03T06:16:22.518Z] [LOG] ğŸ‘¤ Employee ID: 0143a994-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:22.520Z] [LOG] ğŸ’° Base Salary: 100,000
[2025-10-03T06:16:22.521Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:16:22.522Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:16:22.525Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:16:22.526Z] [LOG] ğŸ’µ Per-Day Salary: 4000.00
[2025-10-03T06:16:22.526Z] [LOG] â±ï¸  Hourly Rate: 470.59
[2025-10-03T06:16:22.527Z] [LOG] 
[2025-10-03T06:16:22.527Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:16:22.528Z] [LOG]    Expected Hours: 170
[2025-10-03T06:16:22.529Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:16:22.529Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:16:22.530Z] [LOG]    Worked Hours: 138.7175
[2025-10-03T06:16:22.530Z] [LOG]    âš ï¸  Shortfall Hours: 31.2825
[2025-10-03T06:16:22.531Z] [LOG]    ğŸ’¸ Shortfall Deduction: 31.2825h Ã— 470.59 = 14721.18
[2025-10-03T06:16:22.532Z] [LOG] ============================================================
[2025-10-03T06:16:22.889Z] [LOG] âœ… Weekend Day Met: 2025-08-09 (Saturday)
[2025-10-03T06:16:22.889Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:16:22.890Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-16 (Saturday)
[2025-10-03T06:16:22.891Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:16:22.891Z] [LOG]    Actual: 09:39:24 - 16:56:23
[2025-10-03T06:16:22.892Z] [LOG]    Calculation: OVERLAP 09:39-13:00 = 3.343h
[2025-10-03T06:16:22.893Z] [LOG]    Payable Hours: 3.343h
[2025-10-03T06:16:22.894Z] [LOG]    Shortfall: 1.157h
[2025-10-03T06:16:22.894Z] [LOG]    Hourly Rate: 888.89 (Day Salary 4000 Ã· 4.5h)
[2025-10-03T06:16:22.895Z] [LOG]    Deduction: 1028.15
[2025-10-03T06:16:22.896Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-30 (Saturday)
[2025-10-03T06:16:22.897Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:16:22.897Z] [LOG]    Actual: 09:46:39 - 17:16:00
[2025-10-03T06:16:22.898Z] [LOG]    Calculation: OVERLAP 09:46-13:00 = 3.223h
[2025-10-03T06:16:22.898Z] [LOG]    Payable Hours: 3.223h
[2025-10-03T06:16:22.898Z] [LOG]    Shortfall: 1.277h
[2025-10-03T06:16:22.899Z] [LOG]    Hourly Rate: 888.89 (Day Salary 4000 Ã· 4.5h)
[2025-10-03T06:16:22.899Z] [LOG]    Deduction: 1135.56
[2025-10-03T06:16:23.268Z] [LOG] ğŸ“… Weekend absence check for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-03T06:16:23.269Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:16:23.269Z] [LOG]    Attended weekend dates: 3 days
[2025-10-03T06:16:23.269Z] [LOG]    Absent weekend dates: 2 days
[2025-10-03T06:16:23.269Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:16:23.270Z] [LOG]    Gross Salary: 100000
[2025-10-03T06:16:23.270Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:16:23.270Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:16:23.271Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:23.271Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:16:23.271Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:23.272Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:16:23.272Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:23.272Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:16:23.273Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:23.273Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:16:23.273Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:23.273Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:16:23.274Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:23.274Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:16:23.274Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:23.275Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:16:23.275Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:23.275Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:16:23.275Z] [LOG] Regular deductions for Dharshika null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:16:23.276Z] [LOG] Combined deductions for Dharshika null: {
  "components": [
    {
      "code": "WEEKEND_SHORTFALL",
      "name": "Weekend Shortfall Deduction",
      "type": "deduction",
      "category": "other",
      "amount": 2163.7037037037035,
      "details": "Total 2.43h shortfall - 2025-08-16 (Saturday): 1.16h, 2025-08-30 (Saturday): 1.28h"
    },
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 14721.176470588234,
      "details": "31.2825 hours Ã— 470.59"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 8000,
      "details": "2 weekend days Ã— 4000.00"
    }
  ],
  "total": 24884.88017429194
}
[2025-10-03T06:16:23.456Z] [LOG] Creating components for record 69941f33-1f3a-4f65-a124-e1e21b03995c: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 3,
  "taxComponentsCount": 0
}
[2025-10-03T06:16:23.458Z] [LOG] Processing component: {
  "name": "Weekend Shortfall Deduction",
  "type": "deduction",
  "amount": 2163.7037037037035
}
[2025-10-03T06:16:23.636Z] [LOG] Using existing component ID: 106fdfbf-ee30-432b-8a98-9c8f6cef1ae1
[2025-10-03T06:16:23.812Z] [LOG] Created payroll_record_component: 862f631f-4742-49b1-9d55-25a43a490d08 for Weekend Shortfall Deduction
[2025-10-03T06:16:23.812Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 14721.176470588234
}
[2025-10-03T06:16:23.988Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:16:24.165Z] [LOG] Created payroll_record_component: b18e69bc-67be-49c7-8822-22a7c6105ba6 for Working Hours Shortfall
[2025-10-03T06:16:24.169Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 8000
}
[2025-10-03T06:16:24.345Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:16:24.523Z] [LOG] Created payroll_record_component: dbd3bcc9-b033-4d34-8aca-58d68300ea1b for Weekend Absent Days
[2025-10-03T06:16:25.051Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:16:25.057Z] [ERROR] âŒ Error updating financial balances for employee 0143a994-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:16:25.065Z] [LOG] âœ… Dharshika null: Calculation completed successfully
[2025-10-03T06:16:25.066Z] [LOG] ğŸ“Š Progress: 13/34 (38.2%)
[2025-10-03T06:16:25.067Z] [LOG] 
ğŸ§® Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-03T06:16:25.069Z] [LOG] ğŸ“‹ Record ID: 6a01a15f-3a10-49c9-a5c9-1a5095e7966c
[2025-10-03T06:16:25.769Z] [LOG] ğŸ” Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-03T06:16:25.770Z] [LOG]    Total components: 8
[2025-10-03T06:16:25.771Z] [LOG]    Applicable components: 8
[2025-10-03T06:16:25.771Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-03T06:16:26.840Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:27.194Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:27.547Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:27.902Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:28.250Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:28.601Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:28.960Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:29.309Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:29.656Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:30.007Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:30.361Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:30.725Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:31.080Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:31.431Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:31.780Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:31.978Z] [LOG] ğŸ” Fetched 25 attendance records for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:32.166Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:16:33.037Z] [LOG] Employee 01443963-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:16:33.038Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:16:33.038Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:16:33.039Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:16:33.046Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-03T06:16:33.047Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:16:33.048Z] [LOG] ================================================================================
[2025-10-03T06:16:33.048Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 8.93h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:33.049Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:33.050Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:16:33.051Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:16:33.052Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 9.1h worked â†’ 8.416666666666666h counted â†’ OVERLAP 08:35-17:00 = 8.417h (attendance table)
[2025-10-03T06:16:33.053Z] [LOG]    âœ… Added to weekday total: 8.416666666666666h
[2025-10-03T06:16:33.053Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 8.89h worked â†’ 8.487777777777778h counted â†’ OVERLAP 08:30-17:00 = 8.488h (attendance table)
[2025-10-03T06:16:33.054Z] [LOG]    âœ… Added to weekday total: 8.487777777777778h
[2025-10-03T06:16:33.055Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 8.19h worked â†’ 7.957777777777777h counted â†’ OVERLAP 09:02-17:00 = 7.958h (attendance table)
[2025-10-03T06:16:33.056Z] [LOG]    âœ… Added to weekday total: 7.957777777777777h
[2025-10-03T06:16:33.056Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 8.51h worked â†’ 8.200833333333334h counted â†’ OVERLAP 08:47-17:00 = 8.201h (attendance table)
[2025-10-03T06:16:33.057Z] [LOG]    âœ… Added to weekday total: 8.200833333333334h
[2025-10-03T06:16:33.058Z] [LOG] ğŸ“… 2025-08-09 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:16:33.058Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:16:33.059Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 9.05h worked â†’ 8h counted â†’ OVERLAP 09:00-17:00 = 8.000h (attendance table)
[2025-10-03T06:16:33.060Z] [LOG]    âœ… Added to weekday total: 8h
[2025-10-03T06:16:33.061Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 9h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:33.061Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:33.061Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 8.97h worked â†’ 8.202777777777778h counted â†’ OVERLAP 08:47-17:00 = 8.203h (attendance table)
[2025-10-03T06:16:33.062Z] [LOG]    âœ… Added to weekday total: 8.202777777777778h
[2025-10-03T06:16:33.062Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 8.42h worked â†’ 8.060555555555556h counted â†’ OVERLAP 08:56-17:00 = 8.061h (attendance table)
[2025-10-03T06:16:33.063Z] [LOG]    âœ… Added to weekday total: 8.060555555555556h
[2025-10-03T06:16:33.063Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 8.85h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:33.063Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:33.064Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:16:33.064Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:16:33.065Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 9.69h worked â†’ 8.17361111111111h counted â†’ OVERLAP 08:49-17:00 = 8.174h (attendance table)
[2025-10-03T06:16:33.065Z] [LOG]    âœ… Added to weekday total: 8.17361111111111h
[2025-10-03T06:16:33.066Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 5.72h worked â†’ 5.058611111111111h counted â†’ OVERLAP 11:56-17:00 = 5.059h (attendance table)
[2025-10-03T06:16:33.066Z] [LOG]    âœ… Added to weekday total: 5.058611111111111h
[2025-10-03T06:16:33.066Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 9.03h worked â†’ 8.3825h counted â†’ OVERLAP 08:37-17:00 = 8.383h (attendance table)
[2025-10-03T06:16:33.067Z] [LOG]    âœ… Added to weekday total: 8.3825h
[2025-10-03T06:16:33.067Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 8.48h worked â†’ 8.334722222222222h counted â†’ OVERLAP 08:39-17:00 = 8.335h (attendance table)
[2025-10-03T06:16:33.068Z] [LOG]    âœ… Added to weekday total: 8.334722222222222h
[2025-10-03T06:16:33.068Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 8.13h worked â†’ 7.506111111111111h counted â†’ OVERLAP 09:29-17:00 = 7.506h (attendance table)
[2025-10-03T06:16:33.068Z] [LOG]    âœ… Added to weekday total: 7.506111111111111h
[2025-10-03T06:16:33.069Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:16:33.069Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:16:33.069Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 11.38h worked â†’ 8.133888888888889h counted â†’ OVERLAP 08:51-17:00 = 8.134h (attendance table)
[2025-10-03T06:16:33.070Z] [LOG]    âœ… Added to weekday total: 8.133888888888889h
[2025-10-03T06:16:33.070Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 8.84h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:33.071Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:33.071Z] [LOG] ğŸ“… 2025-08-27 (WEEKDAY): 8.77h worked â†’ 8.440555555555555h counted â†’ OVERLAP 08:33-17:00 = 8.441h (attendance table)
[2025-10-03T06:16:33.071Z] [LOG]    âœ… Added to weekday total: 8.440555555555555h
[2025-10-03T06:16:33.072Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 8.59h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:33.072Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:33.072Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 9.41h worked â†’ 8.343333333333334h counted â†’ OVERLAP 08:39-17:00 = 8.343h (attendance table)
[2025-10-03T06:16:33.073Z] [LOG]    âœ… Added to weekday total: 8.343333333333334h
[2025-10-03T06:16:33.073Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:16:33.073Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:16:33.074Z] [LOG] ================================================================================
[2025-10-03T06:16:33.074Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:16:33.074Z] [LOG]    Sum of all daily counted hours (rounded): 162.1997h
[2025-10-03T06:16:33.075Z] [LOG]    Expected hours: 170h
[2025-10-03T06:16:33.075Z] [LOG]    Shortfall: 7.80h
[2025-10-03T06:16:33.075Z] [LOG] ================================================================================
[2025-10-03T06:16:33.254Z] [LOG] ğŸ”„ Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430...
[2025-10-03T06:16:33.255Z] [LOG] ğŸ”„ Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:16:33.432Z] [LOG] ğŸ“Š Found 0 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:33.611Z] [LOG] ğŸ“Š Found 0 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:33.786Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:33.786Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:16:33.787Z] [LOG] ğŸ’° GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-03T06:16:33.787Z] [LOG]    Base Salary: 50000
[2025-10-03T06:16:33.787Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:16:33.963Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:16:34.317Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:16:34.665Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:16:34.841Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:16:35.017Z] [LOG] Employee 01443963-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:16:35.017Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:16:35.018Z] [LOG] ============================================================
[2025-10-03T06:16:35.018Z] [LOG] ğŸ‘¤ Employee ID: 01443963-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:35.018Z] [LOG] ğŸ’° Base Salary: 50,000
[2025-10-03T06:16:35.018Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:16:35.018Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:16:35.018Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:16:35.018Z] [LOG] ğŸ’µ Per-Day Salary: 2000.00
[2025-10-03T06:16:35.019Z] [LOG] â±ï¸  Hourly Rate: 235.29
[2025-10-03T06:16:35.019Z] [LOG] 
[2025-10-03T06:16:35.019Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:16:35.019Z] [LOG]    Expected Hours: 170
[2025-10-03T06:16:35.019Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:16:35.019Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:16:35.019Z] [LOG]    Worked Hours: 162.1997
[2025-10-03T06:16:35.019Z] [LOG]    âš ï¸  Shortfall Hours: 7.800299999999993
[2025-10-03T06:16:35.020Z] [LOG]    ğŸ’¸ Shortfall Deduction: 7.800299999999993h Ã— 235.29 = 1835.36
[2025-10-03T06:16:35.020Z] [LOG] ============================================================
[2025-10-03T06:16:35.371Z] [LOG] âœ… Weekend Day Met: 2025-08-02 (Saturday)
[2025-10-03T06:16:35.371Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:16:35.371Z] [LOG] âœ… Weekend Day Met: 2025-08-09 (Saturday)
[2025-10-03T06:16:35.371Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:16:35.372Z] [LOG] âœ… Weekend Day Met: 2025-08-16 (Saturday)
[2025-10-03T06:16:35.372Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:16:35.372Z] [LOG] âœ… Weekend Day Met: 2025-08-23 (Saturday)
[2025-10-03T06:16:35.372Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:16:35.373Z] [LOG] âœ… Weekend Day Met: 2025-08-30 (Saturday)
[2025-10-03T06:16:35.373Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:16:35.721Z] [LOG] ğŸ“… Weekend absence check for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-03T06:16:35.721Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:16:35.721Z] [LOG]    Attended weekend dates: 5 days
[2025-10-03T06:16:35.721Z] [LOG]    Absent weekend dates: 0 days
[2025-10-03T06:16:35.721Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:16:35.721Z] [LOG]    Gross Salary: 50000
[2025-10-03T06:16:35.722Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:16:35.722Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:16:35.722Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:35.722Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:16:35.722Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:35.722Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:16:35.722Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:35.723Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:16:35.723Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:35.723Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:16:35.723Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:35.723Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:16:35.723Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:35.723Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:16:35.724Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:35.724Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:16:35.724Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:35.724Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:16:35.724Z] [LOG] Regular deductions for R. D.A Kaushalya null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:16:35.724Z] [LOG] Combined deductions for R. D.A Kaushalya null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 1835.3647058823512,
      "details": "7.800299999999993 hours Ã— 235.29"
    }
  ],
  "total": 1835.3647058823512
}
[2025-10-03T06:16:35.922Z] [LOG] Creating components for record 6a01a15f-3a10-49c9-a5c9-1a5095e7966c: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-03T06:16:35.922Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 1835.3647058823512
}
[2025-10-03T06:16:36.099Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:16:36.296Z] [LOG] Created payroll_record_component: 1bc05f33-c927-44b1-a629-165b8214006b for Working Hours Shortfall
[2025-10-03T06:16:36.824Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:16:36.827Z] [ERROR] âŒ Error updating financial balances for employee 01443963-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:16:36.829Z] [LOG] âœ… R. D.A Kaushalya null: Calculation completed successfully
[2025-10-03T06:16:36.830Z] [LOG] ğŸ“Š Progress: 14/34 (41.2%)
[2025-10-03T06:16:36.830Z] [LOG] 
ğŸ§® Processing: Maryam null (EMP000035)
[2025-10-03T06:16:36.830Z] [LOG] ğŸ“‹ Record ID: 73e2fbf7-6e9c-48d3-ab38-60f6de1d1fe1
[2025-10-03T06:16:37.544Z] [LOG] ğŸ” Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-03T06:16:37.544Z] [LOG]    Total components: 8
[2025-10-03T06:16:37.545Z] [LOG]    Applicable components: 8
[2025-10-03T06:16:37.545Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-03T06:16:38.627Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:38.975Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:39.334Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:39.684Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:40.054Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:40.404Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:40.760Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:41.110Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:41.467Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:41.845Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:42.205Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:42.554Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:42.914Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:43.267Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:43.617Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:16:43.798Z] [LOG] ğŸ” Fetched 23 attendance records for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:43.980Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:16:44.870Z] [LOG] Employee 01440221-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:16:44.871Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:16:44.872Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:16:44.873Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:16:44.880Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-03T06:16:44.881Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:16:44.881Z] [LOG] ================================================================================
[2025-10-03T06:16:44.882Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 7.94h worked â†’ 7.7716666666666665h counted â†’ OVERLAP 09:13-17:00 = 7.772h (attendance table)
[2025-10-03T06:16:44.883Z] [LOG]    âœ… Added to weekday total: 7.7716666666666665h
[2025-10-03T06:16:44.884Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:16:44.885Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:16:44.885Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 8.2h worked â†’ 8.2h counted â†’ OVERLAP 08:48-17:00 = 8.200h (attendance table)
[2025-10-03T06:16:44.886Z] [LOG]    âœ… Added to weekday total: 8.2h
[2025-10-03T06:16:44.887Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 8.75h worked â†’ 8.481666666666667h counted â†’ OVERLAP 08:31-17:00 = 8.482h (attendance table)
[2025-10-03T06:16:44.888Z] [LOG]    âœ… Added to weekday total: 8.481666666666667h
[2025-10-03T06:16:44.889Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 8.55h worked â†’ 8.318888888888889h counted â†’ OVERLAP 08:40-17:00 = 8.319h (attendance table)
[2025-10-03T06:16:44.890Z] [LOG]    âœ… Added to weekday total: 8.318888888888889h
[2025-10-03T06:16:44.891Z] [LOG] ğŸ“… 2025-08-09 (WEEKEND): 6h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:16:44.891Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:16:44.892Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 8.89h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:44.892Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:44.893Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 8.65h worked â†’ 8.31861111111111h counted â†’ OVERLAP 08:40-17:00 = 8.319h (attendance table)
[2025-10-03T06:16:44.893Z] [LOG]    âœ… Added to weekday total: 8.31861111111111h
[2025-10-03T06:16:44.894Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 8.9h worked â†’ 8.440833333333334h counted â†’ OVERLAP 08:33-17:00 = 8.441h (attendance table)
[2025-10-03T06:16:44.895Z] [LOG]    âœ… Added to weekday total: 8.440833333333334h
[2025-10-03T06:16:44.896Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 8.95h worked â†’ 8.490833333333333h counted â†’ OVERLAP 08:30-17:00 = 8.491h (attendance table)
[2025-10-03T06:16:44.896Z] [LOG]    âœ… Added to weekday total: 8.490833333333333h
[2025-10-03T06:16:44.897Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 8.97h worked â†’ 8.333333333333334h counted â†’ OVERLAP 08:40-17:00 = 8.333h (attendance table)
[2025-10-03T06:16:44.898Z] [LOG]    âœ… Added to weekday total: 8.333333333333334h
[2025-10-03T06:16:44.898Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 5.12h worked â†’ 4.370555555555556h counted â†’ OVERLAP 08:37-13:00 = 4.371h (attendance table)
[2025-10-03T06:16:44.899Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.370555555555556h
[2025-10-03T06:16:44.900Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 8.76h worked â†’ 8.42388888888889h counted â†’ OVERLAP 08:34-17:00 = 8.424h (attendance table)
[2025-10-03T06:16:44.901Z] [LOG]    âœ… Added to weekday total: 8.42388888888889h
[2025-10-03T06:16:44.902Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 8.55h worked â†’ 8.332777777777778h counted â†’ OVERLAP 08:40-17:00 = 8.333h (attendance table)
[2025-10-03T06:16:44.902Z] [LOG]    âœ… Added to weekday total: 8.332777777777778h
[2025-10-03T06:16:44.903Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 8.82h worked â†’ 8.383333333333333h counted â†’ OVERLAP 08:37-17:00 = 8.383h (attendance table)
[2025-10-03T06:16:44.904Z] [LOG]    âœ… Added to weekday total: 8.383333333333333h
[2025-10-03T06:16:44.904Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 8.59h worked â†’ 8.421111111111111h counted â†’ OVERLAP 08:34-17:00 = 8.421h (attendance table)
[2025-10-03T06:16:44.905Z] [LOG]    âœ… Added to weekday total: 8.421111111111111h
[2025-10-03T06:16:44.906Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 8.29h worked â†’ 8.0275h counted â†’ OVERLAP 08:58-17:00 = 8.027h (attendance table)
[2025-10-03T06:16:44.906Z] [LOG]    âœ… Added to weekday total: 8.0275h
[2025-10-03T06:16:44.907Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 4.48h worked â†’ 3.961388888888889h counted â†’ OVERLAP 09:02-13:00 = 3.961h (attendance table)
[2025-10-03T06:16:44.908Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.961388888888889h
[2025-10-03T06:16:44.908Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 8.68h worked â†’ 8.224722222222223h counted â†’ OVERLAP 08:46-17:00 = 8.225h (attendance table)
[2025-10-03T06:16:44.909Z] [LOG]    âœ… Added to weekday total: 8.224722222222223h
[2025-10-03T06:16:44.909Z] [LOG] ğŸ“… 2025-08-27 (WEEKDAY): 8.84h worked â†’ 8.266388888888889h counted â†’ OVERLAP 08:44-17:00 = 8.266h (attendance table)
[2025-10-03T06:16:44.910Z] [LOG]    âœ… Added to weekday total: 8.266388888888889h
[2025-10-03T06:16:44.911Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 8.87h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:16:44.911Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:16:44.911Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 6.98h worked â†’ 6.6433333333333335h counted â†’ OVERLAP 10:21-17:00 = 6.643h (attendance table)
[2025-10-03T06:16:44.911Z] [LOG]    âœ… Added to weekday total: 6.6433333333333335h
[2025-10-03T06:16:44.912Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 4.98h worked â†’ 4.416666666666667h counted â†’ OVERLAP 08:35-13:00 = 4.417h (attendance table)
[2025-10-03T06:16:44.912Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.416666666666667h
[2025-10-03T06:16:44.912Z] [LOG] ================================================================================
[2025-10-03T06:16:44.913Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:16:44.913Z] [LOG]    Sum of all daily counted hours (rounded): 148.0789h
[2025-10-03T06:16:44.913Z] [LOG]    Expected hours: 170h
[2025-10-03T06:16:44.913Z] [LOG]    Shortfall: 21.92h
[2025-10-03T06:16:44.914Z] [LOG] ================================================================================
[2025-10-03T06:16:45.090Z] [LOG] ğŸ”„ Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430...
[2025-10-03T06:16:45.091Z] [LOG] ğŸ”„ Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:16:45.273Z] [LOG] ğŸ“Š Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:45.450Z] [LOG] ğŸ“Š Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:45.627Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:45.627Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:16:45.628Z] [LOG] ğŸ’° GROSS CALCULATION for Maryam null:
[2025-10-03T06:16:45.628Z] [LOG]    Base Salary: 40000
[2025-10-03T06:16:45.629Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:16:45.805Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:16:46.163Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:16:46.513Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:16:46.691Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:16:46.870Z] [LOG] Employee 01440221-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:16:46.871Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:16:46.872Z] [LOG] ============================================================
[2025-10-03T06:16:46.872Z] [LOG] ğŸ‘¤ Employee ID: 01440221-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:46.873Z] [LOG] ğŸ’° Base Salary: 40,000
[2025-10-03T06:16:46.874Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:16:46.874Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:16:46.875Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:16:46.875Z] [LOG] ğŸ’µ Per-Day Salary: 1600.00
[2025-10-03T06:16:46.876Z] [LOG] â±ï¸  Hourly Rate: 188.24
[2025-10-03T06:16:46.877Z] [LOG] 
[2025-10-03T06:16:46.877Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:16:46.878Z] [LOG]    Expected Hours: 170
[2025-10-03T06:16:46.879Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:16:46.879Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:16:46.880Z] [LOG]    Worked Hours: 148.0789
[2025-10-03T06:16:46.881Z] [LOG]    âš ï¸  Shortfall Hours: 21.921099999999996
[2025-10-03T06:16:46.881Z] [LOG]    ğŸ’¸ Shortfall Deduction: 21.921099999999996h Ã— 188.24 = 4126.32
[2025-10-03T06:16:46.882Z] [LOG] ============================================================
[2025-10-03T06:16:47.246Z] [LOG] âœ… Weekend Day Met: 2025-08-02 (Saturday)
[2025-10-03T06:16:47.247Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:16:47.247Z] [LOG] âœ… Weekend Day Met: 2025-08-09 (Saturday)
[2025-10-03T06:16:47.248Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:16:47.248Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-16 (Saturday)
[2025-10-03T06:16:47.248Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:16:47.249Z] [LOG]    Actual: 08:37:46 - 13:45:00
[2025-10-03T06:16:47.249Z] [LOG]    Calculation: OVERLAP 08:37-13:00 = 4.371h
[2025-10-03T06:16:47.249Z] [LOG]    Payable Hours: 4.371h
[2025-10-03T06:16:47.249Z] [LOG]    Shortfall: 0.129h
[2025-10-03T06:16:47.250Z] [LOG]    Hourly Rate: 355.56 (Day Salary 1600 Ã· 4.5h)
[2025-10-03T06:16:47.250Z] [LOG]    Deduction: 46.02
[2025-10-03T06:16:47.250Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-23 (Saturday)
[2025-10-03T06:16:47.251Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:16:47.251Z] [LOG]    Actual: 09:02:19 - 13:31:22
[2025-10-03T06:16:47.251Z] [LOG]    Calculation: OVERLAP 09:02-13:00 = 3.961h
[2025-10-03T06:16:47.251Z] [LOG]    Payable Hours: 3.961h
[2025-10-03T06:16:47.252Z] [LOG]    Shortfall: 0.539h
[2025-10-03T06:16:47.252Z] [LOG]    Hourly Rate: 355.56 (Day Salary 1600 Ã· 4.5h)
[2025-10-03T06:16:47.253Z] [LOG]    Deduction: 191.51
[2025-10-03T06:16:47.254Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-30 (Saturday)
[2025-10-03T06:16:47.254Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:16:47.255Z] [LOG]    Actual: 08:35:00 - 13:34:00
[2025-10-03T06:16:47.255Z] [LOG]    Calculation: OVERLAP 08:35-13:00 = 4.417h
[2025-10-03T06:16:47.256Z] [LOG]    Payable Hours: 4.417h
[2025-10-03T06:16:47.257Z] [LOG]    Shortfall: 0.083h
[2025-10-03T06:16:47.257Z] [LOG]    Hourly Rate: 355.56 (Day Salary 1600 Ã· 4.5h)
[2025-10-03T06:16:47.258Z] [LOG]    Deduction: 29.63
[2025-10-03T06:16:47.610Z] [LOG] ğŸ“… Weekend absence check for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-03T06:16:47.611Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:16:47.611Z] [LOG]    Attended weekend dates: 5 days
[2025-10-03T06:16:47.612Z] [LOG]    Absent weekend dates: 0 days
[2025-10-03T06:16:47.613Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:16:47.613Z] [LOG]    Gross Salary: 40000
[2025-10-03T06:16:47.614Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:16:47.615Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:16:47.616Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:47.617Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:16:47.618Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:47.618Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:16:47.619Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:47.619Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:16:47.620Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:47.620Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:16:47.621Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:47.621Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:16:47.621Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:47.621Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:16:47.622Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:47.622Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:16:47.622Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:47.623Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:16:47.623Z] [LOG] Regular deductions for Maryam null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:16:47.623Z] [LOG] Combined deductions for Maryam null: {
  "components": [
    {
      "code": "WEEKEND_SHORTFALL",
      "name": "Weekend Shortfall Deduction",
      "type": "deduction",
      "category": "other",
      "amount": 267.1604938271602,
      "details": "Total 0.75h shortfall - 2025-08-16 (Saturday): 0.13h, 2025-08-23 (Saturday): 0.54h, 2025-08-30 (Saturday): 0.08h"
    },
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 4126.324705882353,
      "details": "21.921099999999996 hours Ã— 188.24"
    }
  ],
  "total": 4393.485199709513
}
[2025-10-03T06:16:47.803Z] [LOG] Creating components for record 73e2fbf7-6e9c-48d3-ab38-60f6de1d1fe1: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:16:47.803Z] [LOG] Processing component: {
  "name": "Weekend Shortfall Deduction",
  "type": "deduction",
  "amount": 267.1604938271602
}
[2025-10-03T06:16:47.987Z] [LOG] Using existing component ID: 106fdfbf-ee30-432b-8a98-9c8f6cef1ae1
[2025-10-03T06:16:48.168Z] [LOG] Created payroll_record_component: 391da00d-6e16-4541-8e12-327ed331cd2c for Weekend Shortfall Deduction
[2025-10-03T06:16:48.169Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 4126.324705882353
}
[2025-10-03T06:16:48.348Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:16:48.528Z] [LOG] Created payroll_record_component: d4611187-6cbd-4f4e-9246-7a355d18d4a6 for Working Hours Shortfall
[2025-10-03T06:16:49.061Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:16:49.065Z] [ERROR] âŒ Error updating financial balances for employee 01440221-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:16:49.067Z] [LOG] âœ… Maryam null: Calculation completed successfully
[2025-10-03T06:16:49.068Z] [LOG] ğŸ“Š Progress: 15/34 (44.1%)
[2025-10-03T06:16:49.068Z] [LOG] 
ğŸ§® Processing: customer null (EMP000036)
[2025-10-03T06:16:49.068Z] [LOG] ğŸ“‹ Record ID: 76a26629-b8a7-4d89-adc0-14be29063805
[2025-10-03T06:16:49.778Z] [LOG] ğŸ” Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-03T06:16:49.778Z] [LOG]    Total components: 8
[2025-10-03T06:16:49.779Z] [LOG]    Applicable components: 8
[2025-10-03T06:16:49.779Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-03T06:16:50.661Z] [LOG] ğŸ” Fetched 0 attendance records for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:50.662Z] [LOG] âš ï¸  ATTENTION: Employee 014409a2-7105-11f0-a50f-98e743540430 has NO attendance records in this payroll period!
[2025-10-03T06:16:50.838Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:16:51.891Z] [LOG] Employee 014409a2-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:16:51.892Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8h = 160h
[2025-10-03T06:16:51.892Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:16:51.893Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:16:51.900Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-03T06:16:51.901Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:16:51.902Z] [LOG] ================================================================================
[2025-10-03T06:16:51.903Z] [LOG] ================================================================================
[2025-10-03T06:16:51.903Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:16:51.904Z] [LOG]    Sum of all daily counted hours (rounded): 0h
[2025-10-03T06:16:51.904Z] [LOG]    Expected hours: 160h
[2025-10-03T06:16:51.905Z] [LOG]    Shortfall: 160.00h
[2025-10-03T06:16:51.906Z] [LOG] ================================================================================
[2025-10-03T06:16:52.081Z] [LOG] ğŸ”„ Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430...
[2025-10-03T06:16:52.082Z] [LOG] ğŸ”„ Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:16:52.265Z] [LOG] ğŸ“Š Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:52.445Z] [LOG] ğŸ“Š Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:52.620Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:52.620Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:16:52.621Z] [LOG] ğŸ’° GROSS CALCULATION for customer null:
[2025-10-03T06:16:52.621Z] [LOG]    Base Salary: 0
[2025-10-03T06:16:52.621Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:16:52.797Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:16:53.160Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:16:53.510Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:16:53.684Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:16:54.035Z] [LOG] Employee 014409a2-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:16:54.036Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:16:54.036Z] [LOG] ============================================================
[2025-10-03T06:16:54.037Z] [LOG] ğŸ‘¤ Employee ID: 014409a2-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:54.038Z] [LOG] ğŸ’° Base Salary: 0
[2025-10-03T06:16:54.038Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:16:54.039Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:16:54.039Z] [LOG] â° Employee Daily Hours: 8h/day
[2025-10-03T06:16:54.040Z] [LOG] ğŸ’µ Per-Day Salary: 0.00
[2025-10-03T06:16:54.041Z] [LOG] â±ï¸  Hourly Rate: 0.00
[2025-10-03T06:16:54.041Z] [LOG] 
[2025-10-03T06:16:54.042Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:16:54.043Z] [LOG]    Expected Hours: 160
[2025-10-03T06:16:54.043Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8h = 200.00h
[2025-10-03T06:16:54.044Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:16:54.045Z] [LOG]    Worked Hours: 0
[2025-10-03T06:16:54.045Z] [LOG]    âš ï¸  Shortfall Hours: 160
[2025-10-03T06:16:54.046Z] [LOG]    ğŸ’¸ Shortfall Deduction: 160h Ã— 0.00 = 0.00
[2025-10-03T06:16:54.046Z] [LOG] ============================================================
[2025-10-03T06:16:54.758Z] [LOG] ğŸ“… Weekend absence check for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-03T06:16:54.758Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:16:54.759Z] [LOG]    Attended weekend dates: 0 days
[2025-10-03T06:16:54.759Z] [LOG]    Absent weekend dates: 5 days
[2025-10-03T06:16:54.759Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:16:54.759Z] [LOG]    Gross Salary: 0
[2025-10-03T06:16:54.760Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:16:54.760Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:16:54.760Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:54.761Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:16:54.761Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:54.761Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:16:54.761Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:54.762Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:16:54.762Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:54.762Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:16:54.763Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:54.764Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:16:54.765Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:54.765Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:16:54.766Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:54.766Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:16:54.766Z] [LOG]    Fixed amount: 0
[2025-10-03T06:16:54.768Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:16:54.769Z] [LOG] Regular deductions for customer null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:16:54.770Z] [LOG] Combined deductions for customer null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 0,
      "details": "160 hours Ã— 0.00"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 0,
      "details": "5 weekend days Ã— 0.00"
    }
  ],
  "total": 0
}
[2025-10-03T06:16:54.951Z] [LOG] Creating components for record 76a26629-b8a7-4d89-adc0-14be29063805: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:16:54.957Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 0
}
[2025-10-03T06:16:55.135Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:16:55.314Z] [LOG] Created payroll_record_component: e1e04f55-35e3-4783-bc68-0774d628a059 for Working Hours Shortfall
[2025-10-03T06:16:55.315Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 0
}
[2025-10-03T06:16:55.493Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:16:55.670Z] [LOG] Created payroll_record_component: a048e710-1461-4b4e-9108-1846fe473392 for Weekend Absent Days
[2025-10-03T06:16:56.206Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:16:56.209Z] [ERROR] âŒ Error updating financial balances for employee 014409a2-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:16:56.213Z] [LOG] âœ… customer null: Calculation completed successfully
[2025-10-03T06:16:56.213Z] [LOG] ğŸ“Š Progress: 16/34 (47.1%)
[2025-10-03T06:16:56.213Z] [LOG] 
ğŸ§® Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-03T06:16:56.214Z] [LOG] ğŸ“‹ Record ID: 78039cdc-3834-4375-997b-4cbd8067a2cd
[2025-10-03T06:16:56.931Z] [LOG] ğŸ” Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-03T06:16:56.932Z] [LOG]    Total components: 8
[2025-10-03T06:16:56.932Z] [LOG]    Applicable components: 8
[2025-10-03T06:16:56.933Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-03T06:16:57.817Z] [LOG] ğŸ” Fetched 0 attendance records for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:57.818Z] [LOG] âš ï¸  ATTENTION: Employee 0143e6c3-7105-11f0-a50f-98e743540430 has NO attendance records in this payroll period!
[2025-10-03T06:16:57.995Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:16:59.070Z] [LOG] Employee 0143e6c3-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:16:59.071Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8h = 160h
[2025-10-03T06:16:59.071Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:16:59.072Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:16:59.079Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-03T06:16:59.080Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:16:59.080Z] [LOG] ================================================================================
[2025-10-03T06:16:59.081Z] [LOG] ================================================================================
[2025-10-03T06:16:59.082Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:16:59.082Z] [LOG]    Sum of all daily counted hours (rounded): 0h
[2025-10-03T06:16:59.083Z] [LOG]    Expected hours: 160h
[2025-10-03T06:16:59.084Z] [LOG]    Shortfall: 160.00h
[2025-10-03T06:16:59.084Z] [LOG] ================================================================================
[2025-10-03T06:16:59.264Z] [LOG] ğŸ”„ Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430...
[2025-10-03T06:16:59.264Z] [LOG] ğŸ”„ Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:16:59.441Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:59.622Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:59.795Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-03T06:16:59.795Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:16:59.796Z] [LOG] ğŸ’° GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-03T06:16:59.796Z] [LOG]    Base Salary: 1
[2025-10-03T06:16:59.796Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:16:59.972Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:17:00.337Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:17:00.686Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:17:00.865Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:17:01.214Z] [LOG] Employee 0143e6c3-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:17:01.215Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:17:01.216Z] [LOG] ============================================================
[2025-10-03T06:17:01.216Z] [LOG] ğŸ‘¤ Employee ID: 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:01.217Z] [LOG] ğŸ’° Base Salary: 1
[2025-10-03T06:17:01.218Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:17:01.218Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:17:01.219Z] [LOG] â° Employee Daily Hours: 8h/day
[2025-10-03T06:17:01.219Z] [LOG] ğŸ’µ Per-Day Salary: 0.04
[2025-10-03T06:17:01.220Z] [LOG] â±ï¸  Hourly Rate: 0.01
[2025-10-03T06:17:01.221Z] [LOG] 
[2025-10-03T06:17:01.222Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:17:01.222Z] [LOG]    Expected Hours: 160
[2025-10-03T06:17:01.223Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8h = 200.00h
[2025-10-03T06:17:01.224Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:17:01.224Z] [LOG]    Worked Hours: 0
[2025-10-03T06:17:01.225Z] [LOG]    âš ï¸  Shortfall Hours: 160
[2025-10-03T06:17:01.226Z] [LOG]    ğŸ’¸ Shortfall Deduction: 160h Ã— 0.01 = 0.80
[2025-10-03T06:17:01.227Z] [LOG] ============================================================
[2025-10-03T06:17:01.930Z] [LOG] ğŸ“… Weekend absence check for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-03T06:17:01.930Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:17:01.930Z] [LOG]    Attended weekend dates: 0 days
[2025-10-03T06:17:01.931Z] [LOG]    Absent weekend dates: 5 days
[2025-10-03T06:17:01.931Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:17:01.931Z] [LOG]    Gross Salary: 1
[2025-10-03T06:17:01.931Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:17:01.931Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:17:01.932Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:01.932Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:17:01.932Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:01.932Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:17:01.932Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:01.933Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:17:01.933Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:01.933Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:17:01.933Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:01.934Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:17:01.934Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:01.934Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:17:01.934Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:01.934Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:17:01.935Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:01.935Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:17:01.935Z] [LOG] Regular deductions for Sujevan Selvaratnam null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:17:01.935Z] [LOG] Combined deductions for Sujevan Selvaratnam null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 0.8,
      "details": "160 hours Ã— 0.01"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 0.2,
      "details": "5 weekend days Ã— 0.04"
    }
  ],
  "total": 1
}
[2025-10-03T06:17:02.112Z] [LOG] Creating components for record 78039cdc-3834-4375-997b-4cbd8067a2cd: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:17:02.113Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 0.8
}
[2025-10-03T06:17:02.288Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:17:02.462Z] [LOG] Created payroll_record_component: d3020bc3-80f8-4faf-943a-37db9e509c30 for Working Hours Shortfall
[2025-10-03T06:17:02.463Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 0.2
}
[2025-10-03T06:17:02.637Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:17:02.818Z] [LOG] Created payroll_record_component: 317b8ba4-a05c-45d2-9dc8-a7a2f089254a for Weekend Absent Days
[2025-10-03T06:17:03.345Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:17:03.349Z] [ERROR] âŒ Error updating financial balances for employee 0143e6c3-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:17:03.352Z] [LOG] âœ… Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-03T06:17:03.353Z] [LOG] ğŸ“Š Progress: 17/34 (50.0%)
[2025-10-03T06:17:03.353Z] [LOG] 
ğŸ§® Processing: Saru null (EMP000022)
[2025-10-03T06:17:03.353Z] [LOG] ğŸ“‹ Record ID: 8f010e8e-75f8-4e39-b353-3c8d120fbda5
[2025-10-03T06:17:04.051Z] [LOG] ğŸ” Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-03T06:17:04.052Z] [LOG]    Total components: 8
[2025-10-03T06:17:04.052Z] [LOG]    Applicable components: 8
[2025-10-03T06:17:04.053Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-03T06:17:05.108Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:05.285Z] [LOG] ğŸ” Fetched 24 attendance records for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:05.461Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:17:06.341Z] [LOG] Employee 0143cc7e-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:17:06.341Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:17:06.342Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:17:06.343Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:17:06.350Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-03T06:17:06.352Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:17:06.352Z] [LOG] ================================================================================
[2025-10-03T06:17:06.353Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 15.11h worked â†’ 8.453611111111112h counted â†’ OVERLAP 08:32-17:00 = 8.454h (attendance table)
[2025-10-03T06:17:06.354Z] [LOG]    âœ… Added to weekday total: 8.453611111111112h
[2025-10-03T06:17:06.354Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:17:06.355Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:17:06.356Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:06.356Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:06.357Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:06.358Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:06.358Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:06.359Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:06.360Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:06.360Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:06.361Z] [LOG] ğŸ“… 2025-08-09 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:17:06.361Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:17:06.362Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:06.362Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:06.363Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:06.363Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:06.363Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:06.364Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:06.364Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:06.364Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:06.365Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:06.365Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:06.365Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:17:06.366Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:17:06.366Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 8.42h worked â†’ 8.416666666666666h counted â†’ OVERLAP 08:35-17:00 = 8.417h (attendance table)
[2025-10-03T06:17:06.366Z] [LOG]    âœ… Added to weekday total: 8.416666666666666h
[2025-10-03T06:17:06.366Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:06.367Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:06.368Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:06.368Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:06.368Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 8h worked â†’ 8h counted â†’ OVERLAP 09:00-17:00 = 8.000h (attendance table)
[2025-10-03T06:17:06.369Z] [LOG]    âœ… Added to weekday total: 8h
[2025-10-03T06:17:06.369Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:17:06.369Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:17:06.369Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:06.370Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:06.370Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:06.370Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:06.371Z] [LOG] ğŸ“… 2025-08-27 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:06.371Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:06.371Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:06.371Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:06.372Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:06.372Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:06.372Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 3.25h worked â†’ 3.2533333333333334h counted â†’ OVERLAP 09:44-13:00 = 3.253h (attendance table)
[2025-10-03T06:17:06.373Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.2533333333333334h
[2025-10-03T06:17:06.373Z] [LOG] ================================================================================
[2025-10-03T06:17:06.373Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:17:06.374Z] [LOG]    Sum of all daily counted hours (rounded): 160.8703h
[2025-10-03T06:17:06.374Z] [LOG]    Expected hours: 170h
[2025-10-03T06:17:06.374Z] [LOG]    Shortfall: 9.13h
[2025-10-03T06:17:06.374Z] [LOG] ================================================================================
[2025-10-03T06:17:06.552Z] [LOG] ğŸ”„ Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430...
[2025-10-03T06:17:06.553Z] [LOG] ğŸ”„ Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:17:06.736Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:06.915Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:07.095Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:07.096Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:17:07.097Z] [LOG] ğŸ’° GROSS CALCULATION for Saru null:
[2025-10-03T06:17:07.098Z] [LOG]    Base Salary: 50000
[2025-10-03T06:17:07.098Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:17:07.273Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:17:07.634Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:17:07.986Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:17:08.159Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:17:08.356Z] [LOG] Employee 0143cc7e-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:17:08.356Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:17:08.356Z] [LOG] ============================================================
[2025-10-03T06:17:08.357Z] [LOG] ğŸ‘¤ Employee ID: 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:08.357Z] [LOG] ğŸ’° Base Salary: 50,000
[2025-10-03T06:17:08.358Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:17:08.358Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:17:08.358Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:17:08.359Z] [LOG] ğŸ’µ Per-Day Salary: 2000.00
[2025-10-03T06:17:08.359Z] [LOG] â±ï¸  Hourly Rate: 235.29
[2025-10-03T06:17:08.359Z] [LOG] 
[2025-10-03T06:17:08.359Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:17:08.360Z] [LOG]    Expected Hours: 170
[2025-10-03T06:17:08.360Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:17:08.360Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:17:08.361Z] [LOG]    Worked Hours: 160.8703
[2025-10-03T06:17:08.361Z] [LOG]    âš ï¸  Shortfall Hours: 9.129700000000014
[2025-10-03T06:17:08.361Z] [LOG]    ğŸ’¸ Shortfall Deduction: 9.129700000000014h Ã— 235.29 = 2148.16
[2025-10-03T06:17:08.362Z] [LOG] ============================================================
[2025-10-03T06:17:08.723Z] [LOG] âœ… Weekend Day Met: 2025-08-02 (Saturday)
[2025-10-03T06:17:08.724Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:17:08.724Z] [LOG] âœ… Weekend Day Met: 2025-08-09 (Saturday)
[2025-10-03T06:17:08.725Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:17:08.726Z] [LOG] âœ… Weekend Day Met: 2025-08-16 (Saturday)
[2025-10-03T06:17:08.726Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:17:08.727Z] [LOG] âœ… Weekend Day Met: 2025-08-23 (Saturday)
[2025-10-03T06:17:08.727Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:17:08.728Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-30 (Saturday)
[2025-10-03T06:17:08.729Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:17:08.729Z] [LOG]    Actual: 09:44:48 - 13:00:00
[2025-10-03T06:17:08.730Z] [LOG]    Calculation: OVERLAP 09:44-13:00 = 3.253h
[2025-10-03T06:17:08.731Z] [LOG]    Payable Hours: 3.253h
[2025-10-03T06:17:08.732Z] [LOG]    Shortfall: 1.247h
[2025-10-03T06:17:08.732Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:17:08.733Z] [LOG]    Deduction: 554.07
[2025-10-03T06:17:09.095Z] [LOG] ğŸ“… Weekend absence check for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-03T06:17:09.095Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:17:09.095Z] [LOG]    Attended weekend dates: 5 days
[2025-10-03T06:17:09.095Z] [LOG]    Absent weekend dates: 0 days
[2025-10-03T06:17:09.096Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:17:09.096Z] [LOG]    Gross Salary: 50000
[2025-10-03T06:17:09.096Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:17:09.096Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:17:09.097Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:09.097Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:17:09.097Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:09.097Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:17:09.098Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:09.099Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:17:09.099Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:09.099Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:17:09.099Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:09.100Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:17:09.101Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:09.101Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:17:09.102Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:09.102Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:17:09.103Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:09.103Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:17:09.103Z] [LOG] Regular deductions for Saru null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:17:09.103Z] [LOG] Combined deductions for Saru null: {
  "components": [
    {
      "code": "WEEKEND_SHORTFALL",
      "name": "Weekend Shortfall Deduction",
      "type": "deduction",
      "category": "other",
      "amount": 554.074074074074,
      "details": "Total 1.25h shortfall - 2025-08-30 (Saturday): 1.25h"
    },
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 2148.164705882356,
      "details": "9.129700000000014 hours Ã— 235.29"
    }
  ],
  "total": 2702.23877995643
}
[2025-10-03T06:17:09.284Z] [LOG] Creating components for record 8f010e8e-75f8-4e39-b353-3c8d120fbda5: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:17:09.284Z] [LOG] Processing component: {
  "name": "Weekend Shortfall Deduction",
  "type": "deduction",
  "amount": 554.074074074074
}
[2025-10-03T06:17:09.474Z] [LOG] Using existing component ID: 106fdfbf-ee30-432b-8a98-9c8f6cef1ae1
[2025-10-03T06:17:09.655Z] [LOG] Created payroll_record_component: 002e3c99-86e0-4aee-9294-6d515f5c3c40 for Weekend Shortfall Deduction
[2025-10-03T06:17:09.656Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 2148.164705882356
}
[2025-10-03T06:17:09.834Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:17:10.014Z] [LOG] Created payroll_record_component: 5b71b0c7-9965-43c6-b297-6822f423eecd for Working Hours Shortfall
[2025-10-03T06:17:10.542Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:17:10.545Z] [ERROR] âŒ Error updating financial balances for employee 0143cc7e-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:17:10.547Z] [LOG] âœ… Saru null: Calculation completed successfully
[2025-10-03T06:17:10.548Z] [LOG] ğŸ“Š Progress: 18/34 (52.9%)
[2025-10-03T06:17:10.548Z] [LOG] 
ğŸ§® Processing: Kaushal Thambi (EMP465256103)
[2025-10-03T06:17:10.548Z] [LOG] ğŸ“‹ Record ID: 97a5203c-5a74-4279-ac30-19d35b9d360b
[2025-10-03T06:17:11.261Z] [LOG] ğŸ” Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-03T06:17:11.262Z] [LOG]    Total components: 8
[2025-10-03T06:17:11.262Z] [LOG]    Applicable components: 8
[2025-10-03T06:17:11.263Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-03T06:17:12.143Z] [LOG] ğŸ” Fetched 0 attendance records for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-03T06:17:12.144Z] [LOG] âš ï¸  ATTENTION: Employee 9e8125c4-ce58-411a-b617-9f75d481c613 has NO attendance records in this payroll period!
[2025-10-03T06:17:12.320Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:17:13.386Z] [LOG] Employee 9e8125c4-ce58-411a-b617-9f75d481c613 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:17:13.386Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8h = 160h
[2025-10-03T06:17:13.387Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:17:13.388Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:17:13.394Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-03T06:17:13.395Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:17:13.396Z] [LOG] ================================================================================
[2025-10-03T06:17:13.396Z] [LOG] ================================================================================
[2025-10-03T06:17:13.397Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:17:13.398Z] [LOG]    Sum of all daily counted hours (rounded): 0h
[2025-10-03T06:17:13.398Z] [LOG]    Expected hours: 160h
[2025-10-03T06:17:13.399Z] [LOG]    Shortfall: 160.00h
[2025-10-03T06:17:13.399Z] [LOG] ================================================================================
[2025-10-03T06:17:13.585Z] [LOG] ğŸ”„ Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613...
[2025-10-03T06:17:13.586Z] [LOG] ğŸ”„ Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:17:13.766Z] [LOG] ğŸ“Š Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-03T06:17:13.956Z] [LOG] ğŸ“Š Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-03T06:17:14.131Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-03T06:17:14.132Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:17:14.132Z] [LOG] ğŸ’° GROSS CALCULATION for Kaushal Thambi:
[2025-10-03T06:17:14.132Z] [LOG]    Base Salary: 50000
[2025-10-03T06:17:14.133Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:17:14.309Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:17:14.662Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:17:15.023Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:17:15.200Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:17:15.552Z] [LOG] Employee 9e8125c4-ce58-411a-b617-9f75d481c613 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:17:15.553Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:17:15.554Z] [LOG] ============================================================
[2025-10-03T06:17:15.555Z] [LOG] ğŸ‘¤ Employee ID: 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-03T06:17:15.555Z] [LOG] ğŸ’° Base Salary: 50,000
[2025-10-03T06:17:15.556Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:17:15.556Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:17:15.557Z] [LOG] â° Employee Daily Hours: 8h/day
[2025-10-03T06:17:15.557Z] [LOG] ğŸ’µ Per-Day Salary: 2000.00
[2025-10-03T06:17:15.558Z] [LOG] â±ï¸  Hourly Rate: 250.00
[2025-10-03T06:17:15.559Z] [LOG] 
[2025-10-03T06:17:15.560Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:17:15.561Z] [LOG]    Expected Hours: 160
[2025-10-03T06:17:15.561Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8h = 200.00h
[2025-10-03T06:17:15.562Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:17:15.562Z] [LOG]    Worked Hours: 0
[2025-10-03T06:17:15.563Z] [LOG]    âš ï¸  Shortfall Hours: 160
[2025-10-03T06:17:15.564Z] [LOG]    ğŸ’¸ Shortfall Deduction: 160h Ã— 250.00 = 40000.00
[2025-10-03T06:17:15.565Z] [LOG] ============================================================
[2025-10-03T06:17:16.311Z] [LOG] ğŸ“… Weekend absence check for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-03T06:17:16.311Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:17:16.311Z] [LOG]    Attended weekend dates: 0 days
[2025-10-03T06:17:16.311Z] [LOG]    Absent weekend dates: 5 days
[2025-10-03T06:17:16.312Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:17:16.312Z] [LOG]    Gross Salary: 50000
[2025-10-03T06:17:16.312Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:17:16.313Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:17:16.313Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:16.313Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:17:16.313Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:16.314Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:17:16.314Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:16.314Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:17:16.314Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:16.314Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:17:16.315Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:16.315Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:17:16.315Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:16.315Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:17:16.316Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:16.316Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:17:16.316Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:16.316Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:17:16.316Z] [LOG] Regular deductions for Kaushal Thambi: {
  "components": [],
  "total": 0
}
[2025-10-03T06:17:16.317Z] [LOG] Combined deductions for Kaushal Thambi: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 40000,
      "details": "160 hours Ã— 250.00"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 10000,
      "details": "5 weekend days Ã— 2000.00"
    }
  ],
  "total": 50000
}
[2025-10-03T06:17:16.573Z] [LOG] Creating components for record 97a5203c-5a74-4279-ac30-19d35b9d360b: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:17:16.575Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 40000
}
[2025-10-03T06:17:16.750Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:17:16.935Z] [LOG] Created payroll_record_component: dbfffcad-7d92-48c8-ac1a-2e1f18c3ecaf for Working Hours Shortfall
[2025-10-03T06:17:16.936Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 10000
}
[2025-10-03T06:17:17.131Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:17:17.312Z] [LOG] Created payroll_record_component: 32df124c-64eb-491d-ba97-2c94336040c0 for Weekend Absent Days
[2025-10-03T06:17:17.847Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:17:17.853Z] [ERROR] âŒ Error updating financial balances for employee 9e8125c4-ce58-411a-b617-9f75d481c613: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:17:17.860Z] [LOG] âœ… Kaushal Thambi: Calculation completed successfully
[2025-10-03T06:17:17.861Z] [LOG] ğŸ“Š Progress: 19/34 (55.9%)
[2025-10-03T06:17:17.861Z] [LOG] 
ğŸ§® Processing: Waruni null (EMP000024)
[2025-10-03T06:17:17.862Z] [LOG] ğŸ“‹ Record ID: 9d519194-98bb-4633-b016-d351d0107a44
[2025-10-03T06:17:18.581Z] [LOG] ğŸ” Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-03T06:17:18.584Z] [LOG]    Total components: 8
[2025-10-03T06:17:18.584Z] [LOG]    Applicable components: 8
[2025-10-03T06:17:18.584Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-03T06:17:19.641Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:20.027Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:20.378Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:20.742Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:21.092Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:21.458Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:21.816Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:22.184Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:22.633Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:23.036Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:23.425Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:23.845Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:24.223Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:24.636Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:25.017Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:25.367Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:25.747Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:25.924Z] [LOG] ğŸ” Fetched 25 attendance records for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:26.101Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:17:26.983Z] [LOG] Employee 0143e40c-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:17:26.983Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:17:26.983Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:17:26.984Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:17:26.986Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-03T06:17:26.987Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:17:26.987Z] [LOG] ================================================================================
[2025-10-03T06:17:26.987Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 9.4h worked â†’ 8.481111111111112h counted â†’ OVERLAP 08:31-17:00 = 8.481h (attendance table)
[2025-10-03T06:17:26.987Z] [LOG]    âœ… Added to weekday total: 8.481111111111112h
[2025-10-03T06:17:26.987Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 4.83h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:17:26.988Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:17:26.988Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 8.45h worked â†’ 8.38888888888889h counted â†’ OVERLAP 08:36-17:00 = 8.389h (attendance table)
[2025-10-03T06:17:26.988Z] [LOG]    âœ… Added to weekday total: 8.38888888888889h
[2025-10-03T06:17:26.989Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 8.68h worked â†’ 8.463333333333333h counted â†’ OVERLAP 08:32-17:00 = 8.463h (attendance table)
[2025-10-03T06:17:26.989Z] [LOG]    âœ… Added to weekday total: 8.463333333333333h
[2025-10-03T06:17:26.989Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 11.58h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:26.990Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:26.990Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 8.47h worked â†’ 8.473055555555556h counted â†’ OVERLAP 08:31-17:00 = 8.473h (attendance table)
[2025-10-03T06:17:26.990Z] [LOG]    âœ… Added to weekday total: 8.473055555555556h
[2025-10-03T06:17:26.990Z] [LOG] ğŸ“… 2025-08-09 (WEEKEND): 5.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:17:26.990Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:17:26.991Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 8.49h worked â†’ 8.488333333333333h counted â†’ OVERLAP 08:30-16:59 = 8.488h (attendance table)
[2025-10-03T06:17:26.991Z] [LOG]    âœ… Added to weekday total: 8.488333333333333h
[2025-10-03T06:17:26.991Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 9h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:26.991Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:26.991Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 8.57h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:26.992Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:26.992Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 8.51h worked â†’ 8.494444444444444h counted â†’ OVERLAP 08:30-17:00 = 8.494h (attendance table)
[2025-10-03T06:17:26.992Z] [LOG]    âœ… Added to weekday total: 8.494444444444444h
[2025-10-03T06:17:26.992Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 11.89h worked â†’ 8.470555555555556h counted â†’ OVERLAP 08:31-17:00 = 8.471h (attendance table)
[2025-10-03T06:17:26.992Z] [LOG]    âœ… Added to weekday total: 8.470555555555556h
[2025-10-03T06:17:26.992Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 5.4h worked â†’ 4.395555555555555h counted â†’ OVERLAP 08:36-13:00 = 4.396h (attendance table)
[2025-10-03T06:17:26.993Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.395555555555555h
[2025-10-03T06:17:26.993Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 8.59h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:26.993Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:26.993Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 9.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:26.993Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:26.994Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 8.51h worked â†’ 8.435277777777777h counted â†’ OVERLAP 08:33-17:00 = 8.435h (attendance table)
[2025-10-03T06:17:26.994Z] [LOG]    âœ… Added to weekday total: 8.435277777777777h
[2025-10-03T06:17:26.994Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 8.41h worked â†’ 8.411388888888888h counted â†’ OVERLAP 08:35-17:00 = 8.411h (attendance table)
[2025-10-03T06:17:26.994Z] [LOG]    âœ… Added to weekday total: 8.411388888888888h
[2025-10-03T06:17:26.995Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 8.5h worked â†’ 8.447222222222223h counted â†’ OVERLAP 08:33-17:00 = 8.447h (attendance table)
[2025-10-03T06:17:26.995Z] [LOG]    âœ… Added to weekday total: 8.447222222222223h
[2025-10-03T06:17:26.995Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 4.79h worked â†’ 4.4863888888888885h counted â†’ OVERLAP 08:30-13:00 = 4.486h (attendance table)
[2025-10-03T06:17:26.995Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.4863888888888885h
[2025-10-03T06:17:26.995Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 9.41h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:26.996Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:26.996Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 8.58h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:26.996Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:26.997Z] [LOG] ğŸ“… 2025-08-27 (WEEKDAY): 8.53h worked â†’ 8.470277777777778h counted â†’ OVERLAP 08:31-17:00 = 8.470h (attendance table)
[2025-10-03T06:17:26.997Z] [LOG]    âœ… Added to weekday total: 8.470277777777778h
[2025-10-03T06:17:26.997Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 8.82h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:26.998Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:26.998Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 8.8h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:17:26.998Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:17:26.999Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 4.97h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:17:26.999Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:17:26.999Z] [LOG] ================================================================================
[2025-10-03T06:17:26.999Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:17:26.999Z] [LOG]    Sum of all daily counted hours (rounded): 169.5239h
[2025-10-03T06:17:27.000Z] [LOG]    Expected hours: 170h
[2025-10-03T06:17:27.000Z] [LOG]    Shortfall: 0.48h
[2025-10-03T06:17:27.000Z] [LOG] ================================================================================
[2025-10-03T06:17:27.182Z] [LOG] ğŸ”„ Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430...
[2025-10-03T06:17:27.182Z] [LOG] ğŸ”„ Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:17:27.362Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:27.538Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:27.715Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:27.716Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:17:27.717Z] [LOG] ğŸ’° GROSS CALCULATION for Waruni null:
[2025-10-03T06:17:27.718Z] [LOG]    Base Salary: 50000
[2025-10-03T06:17:27.718Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:17:27.894Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:17:28.245Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:17:28.599Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:17:28.784Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:17:28.965Z] [LOG] Employee 0143e40c-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:17:28.965Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:17:28.966Z] [LOG] ============================================================
[2025-10-03T06:17:28.967Z] [LOG] ğŸ‘¤ Employee ID: 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:28.967Z] [LOG] ğŸ’° Base Salary: 50,000
[2025-10-03T06:17:28.968Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:17:28.969Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:17:28.969Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:17:28.970Z] [LOG] ğŸ’µ Per-Day Salary: 2000.00
[2025-10-03T06:17:28.970Z] [LOG] â±ï¸  Hourly Rate: 235.29
[2025-10-03T06:17:28.971Z] [LOG] 
[2025-10-03T06:17:28.972Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:17:28.972Z] [LOG]    Expected Hours: 170
[2025-10-03T06:17:28.973Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:17:28.974Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:17:28.974Z] [LOG]    Worked Hours: 169.5239
[2025-10-03T06:17:28.975Z] [LOG]    âš ï¸  Shortfall Hours: 0.4761000000000024
[2025-10-03T06:17:28.975Z] [LOG]    ğŸ’¸ Shortfall Deduction: 0.4761000000000024h Ã— 235.29 = 112.02
[2025-10-03T06:17:28.976Z] [LOG] ============================================================
[2025-10-03T06:17:29.345Z] [LOG] âœ… Weekend Day Met: 2025-08-02 (Saturday)
[2025-10-03T06:17:29.346Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:17:29.346Z] [LOG] âœ… Weekend Day Met: 2025-08-09 (Saturday)
[2025-10-03T06:17:29.346Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:17:29.346Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-16 (Saturday)
[2025-10-03T06:17:29.347Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:17:29.347Z] [LOG]    Actual: 08:36:16 - 14:00:00
[2025-10-03T06:17:29.347Z] [LOG]    Calculation: OVERLAP 08:36-13:00 = 4.396h
[2025-10-03T06:17:29.347Z] [LOG]    Payable Hours: 4.396h
[2025-10-03T06:17:29.347Z] [LOG]    Shortfall: 0.104h
[2025-10-03T06:17:29.347Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:17:29.348Z] [LOG]    Deduction: 46.42
[2025-10-03T06:17:29.348Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-23 (Saturday)
[2025-10-03T06:17:29.348Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:17:29.348Z] [LOG]    Actual: 08:30:49 - 13:18:03
[2025-10-03T06:17:29.348Z] [LOG]    Calculation: OVERLAP 08:30-13:00 = 4.486h
[2025-10-03T06:17:29.349Z] [LOG]    Payable Hours: 4.486h
[2025-10-03T06:17:29.349Z] [LOG]    Shortfall: 0.014h
[2025-10-03T06:17:29.350Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:17:29.350Z] [LOG]    Deduction: 6.05
[2025-10-03T06:17:29.350Z] [LOG] âœ… Weekend Day Met: 2025-08-30 (Saturday)
[2025-10-03T06:17:29.351Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:17:29.700Z] [LOG] ğŸ“… Weekend absence check for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-03T06:17:29.701Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:17:29.702Z] [LOG]    Attended weekend dates: 5 days
[2025-10-03T06:17:29.702Z] [LOG]    Absent weekend dates: 0 days
[2025-10-03T06:17:29.703Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:17:29.703Z] [LOG]    Gross Salary: 50000
[2025-10-03T06:17:29.704Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:17:29.705Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:17:29.705Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:29.706Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:17:29.707Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:29.708Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:17:29.709Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:29.710Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:17:29.711Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:29.711Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:17:29.712Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:29.713Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:17:29.713Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:29.714Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:17:29.714Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:29.715Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:17:29.716Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:29.716Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:17:29.717Z] [LOG] Regular deductions for Waruni null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:17:29.718Z] [LOG] Combined deductions for Waruni null: {
  "components": [
    {
      "code": "WEEKEND_SHORTFALL",
      "name": "Weekend Shortfall Deduction",
      "type": "deduction",
      "category": "other",
      "amount": 52.46913580246944,
      "details": "Total 0.12h shortfall - 2025-08-16 (Saturday): 0.10h, 2025-08-23 (Saturday): 0.01h"
    },
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 112.02352941176527,
      "details": "0.4761000000000024 hours Ã— 235.29"
    }
  ],
  "total": 164.4926652142347
}
[2025-10-03T06:17:29.898Z] [LOG] Creating components for record 9d519194-98bb-4633-b016-d351d0107a44: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:17:29.900Z] [LOG] Processing component: {
  "name": "Weekend Shortfall Deduction",
  "type": "deduction",
  "amount": 52.46913580246944
}
[2025-10-03T06:17:30.082Z] [LOG] Using existing component ID: 106fdfbf-ee30-432b-8a98-9c8f6cef1ae1
[2025-10-03T06:17:30.266Z] [LOG] Created payroll_record_component: 8f650bd0-b730-4411-ac5c-16be8f560b58 for Weekend Shortfall Deduction
[2025-10-03T06:17:30.268Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 112.02352941176527
}
[2025-10-03T06:17:30.445Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:17:30.625Z] [LOG] Created payroll_record_component: 9749d210-9ba3-4b4c-9367-709ee94dd89a for Working Hours Shortfall
[2025-10-03T06:17:31.149Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:17:31.156Z] [ERROR] âŒ Error updating financial balances for employee 0143e40c-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:17:31.169Z] [LOG] âœ… Waruni null: Calculation completed successfully
[2025-10-03T06:17:31.169Z] [LOG] ğŸ“Š Progress: 20/34 (58.8%)
[2025-10-03T06:17:31.169Z] [LOG] 
ğŸ§® Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-03T06:17:31.170Z] [LOG] ğŸ“‹ Record ID: 9df3bc04-7189-4ba8-81e4-8606cbfac800
[2025-10-03T06:17:31.874Z] [LOG] ğŸ” Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-03T06:17:31.874Z] [LOG]    Total components: 8
[2025-10-03T06:17:31.874Z] [LOG]    Applicable components: 8
[2025-10-03T06:17:31.874Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-03T06:17:32.779Z] [LOG] ğŸ” Fetched 0 attendance records for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:32.780Z] [LOG] âš ï¸  ATTENTION: Employee 014435dc-7105-11f0-a50f-98e743540430 has NO attendance records in this payroll period!
[2025-10-03T06:17:32.961Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:17:34.014Z] [LOG] Employee 014435dc-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:17:34.015Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8h = 160h
[2025-10-03T06:17:34.015Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:17:34.016Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:17:34.025Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-03T06:17:34.026Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:17:34.028Z] [LOG] ================================================================================
[2025-10-03T06:17:34.029Z] [LOG] ================================================================================
[2025-10-03T06:17:34.029Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:17:34.030Z] [LOG]    Sum of all daily counted hours (rounded): 0h
[2025-10-03T06:17:34.030Z] [LOG]    Expected hours: 160h
[2025-10-03T06:17:34.031Z] [LOG]    Shortfall: 160.00h
[2025-10-03T06:17:34.031Z] [LOG] ================================================================================
[2025-10-03T06:17:34.210Z] [LOG] ğŸ”„ Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430...
[2025-10-03T06:17:34.210Z] [LOG] ğŸ”„ Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:17:34.392Z] [LOG] ğŸ“Š Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:34.568Z] [LOG] ğŸ“Š Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:34.747Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:34.747Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:17:34.747Z] [LOG] ğŸ’° GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-03T06:17:34.748Z] [LOG]    Base Salary: 50000
[2025-10-03T06:17:34.748Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:17:34.922Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:17:35.281Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:17:35.637Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:17:35.815Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:17:36.170Z] [LOG] Employee 014435dc-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:17:36.171Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:17:36.171Z] [LOG] ============================================================
[2025-10-03T06:17:36.171Z] [LOG] ğŸ‘¤ Employee ID: 014435dc-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:36.171Z] [LOG] ğŸ’° Base Salary: 50,000
[2025-10-03T06:17:36.172Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:17:36.172Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:17:36.172Z] [LOG] â° Employee Daily Hours: 8h/day
[2025-10-03T06:17:36.173Z] [LOG] ğŸ’µ Per-Day Salary: 2000.00
[2025-10-03T06:17:36.173Z] [LOG] â±ï¸  Hourly Rate: 250.00
[2025-10-03T06:17:36.173Z] [LOG] 
[2025-10-03T06:17:36.173Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:17:36.173Z] [LOG]    Expected Hours: 160
[2025-10-03T06:17:36.174Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8h = 200.00h
[2025-10-03T06:17:36.174Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:17:36.174Z] [LOG]    Worked Hours: 0
[2025-10-03T06:17:36.174Z] [LOG]    âš ï¸  Shortfall Hours: 160
[2025-10-03T06:17:36.175Z] [LOG]    ğŸ’¸ Shortfall Deduction: 160h Ã— 250.00 = 40000.00
[2025-10-03T06:17:36.175Z] [LOG] ============================================================
[2025-10-03T06:17:36.877Z] [LOG] ğŸ“… Weekend absence check for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-03T06:17:36.877Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:17:36.877Z] [LOG]    Attended weekend dates: 0 days
[2025-10-03T06:17:36.877Z] [LOG]    Absent weekend dates: 5 days
[2025-10-03T06:17:36.878Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:17:36.878Z] [LOG]    Gross Salary: 50000
[2025-10-03T06:17:36.878Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:17:36.878Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:17:36.878Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:36.878Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:17:36.878Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:36.878Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:17:36.879Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:36.879Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:17:36.879Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:36.879Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:17:36.879Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:36.879Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:17:36.879Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:36.879Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:17:36.880Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:36.880Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:17:36.880Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:36.880Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:17:36.880Z] [LOG] Regular deductions for P.D.P Dilini Madushani null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:17:36.880Z] [LOG] Combined deductions for P.D.P Dilini Madushani null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 40000,
      "details": "160 hours Ã— 250.00"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 10000,
      "details": "5 weekend days Ã— 2000.00"
    }
  ],
  "total": 50000
}
[2025-10-03T06:17:37.058Z] [LOG] Creating components for record 9df3bc04-7189-4ba8-81e4-8606cbfac800: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:17:37.058Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 40000
}
[2025-10-03T06:17:37.232Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:17:37.410Z] [LOG] Created payroll_record_component: f57a61bc-b64a-4175-be8f-14a7e7429a0f for Working Hours Shortfall
[2025-10-03T06:17:37.411Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 10000
}
[2025-10-03T06:17:37.592Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:17:37.771Z] [LOG] Created payroll_record_component: efa5c526-8a47-4fdc-943a-eaaa8bc7704b for Weekend Absent Days
[2025-10-03T06:17:38.296Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:17:38.298Z] [ERROR] âŒ Error updating financial balances for employee 014435dc-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:17:38.301Z] [LOG] âœ… P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-03T06:17:38.301Z] [LOG] ğŸ“Š Progress: 21/34 (61.8%)
[2025-10-03T06:17:38.301Z] [LOG] 
ğŸ§® Processing: Faizan Faizan (EMP000003)
[2025-10-03T06:17:38.302Z] [LOG] ğŸ“‹ Record ID: a24f6668-464e-45bc-bc75-793b77242a82
[2025-10-03T06:17:39.012Z] [LOG] ğŸ” Component filtering for employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-03T06:17:39.013Z] [LOG]    Total components: 8
[2025-10-03T06:17:39.013Z] [LOG]    Applicable components: 8
[2025-10-03T06:17:39.013Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-03T06:17:39.897Z] [LOG] ğŸ” Fetched 0 attendance records for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:39.897Z] [LOG] âš ï¸  ATTENTION: Employee 0143a057-7105-11f0-a50f-98e743540430 has NO attendance records in this payroll period!
[2025-10-03T06:17:40.071Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:17:41.130Z] [LOG] Employee 0143a057-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:17:41.130Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8h = 160h
[2025-10-03T06:17:41.130Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:17:41.131Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:17:41.133Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-03T06:17:41.133Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:17:41.133Z] [LOG] ================================================================================
[2025-10-03T06:17:41.133Z] [LOG] ================================================================================
[2025-10-03T06:17:41.133Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:17:41.134Z] [LOG]    Sum of all daily counted hours (rounded): 0h
[2025-10-03T06:17:41.134Z] [LOG]    Expected hours: 160h
[2025-10-03T06:17:41.134Z] [LOG]    Shortfall: 160.00h
[2025-10-03T06:17:41.134Z] [LOG] ================================================================================
[2025-10-03T06:17:41.311Z] [LOG] ğŸ”„ Processing financial records for employee 0143a057-7105-11f0-a50f-98e743540430...
[2025-10-03T06:17:41.311Z] [LOG] ğŸ”„ Processing financial records for employee 0143a057-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:17:41.489Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:41.693Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:41.868Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:41.868Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:17:41.869Z] [LOG] ğŸ’° GROSS CALCULATION for Faizan Faizan:
[2025-10-03T06:17:41.869Z] [LOG]    Base Salary: 50000
[2025-10-03T06:17:41.869Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:17:42.044Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:17:42.396Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:17:42.748Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:17:42.923Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:17:43.272Z] [LOG] Employee 0143a057-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:17:43.273Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:17:43.273Z] [LOG] ============================================================
[2025-10-03T06:17:43.273Z] [LOG] ğŸ‘¤ Employee ID: 0143a057-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:43.273Z] [LOG] ğŸ’° Base Salary: 50,000
[2025-10-03T06:17:43.274Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:17:43.274Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:17:43.274Z] [LOG] â° Employee Daily Hours: 8h/day
[2025-10-03T06:17:43.274Z] [LOG] ğŸ’µ Per-Day Salary: 2000.00
[2025-10-03T06:17:43.274Z] [LOG] â±ï¸  Hourly Rate: 250.00
[2025-10-03T06:17:43.274Z] [LOG] 
[2025-10-03T06:17:43.274Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:17:43.275Z] [LOG]    Expected Hours: 160
[2025-10-03T06:17:43.275Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8h = 200.00h
[2025-10-03T06:17:43.275Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:17:43.275Z] [LOG]    Worked Hours: 0
[2025-10-03T06:17:43.275Z] [LOG]    âš ï¸  Shortfall Hours: 160
[2025-10-03T06:17:43.275Z] [LOG]    ğŸ’¸ Shortfall Deduction: 160h Ã— 250.00 = 40000.00
[2025-10-03T06:17:43.275Z] [LOG] ============================================================
[2025-10-03T06:17:43.998Z] [LOG] ğŸ“… Weekend absence check for employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-03T06:17:43.998Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:17:43.998Z] [LOG]    Attended weekend dates: 0 days
[2025-10-03T06:17:43.999Z] [LOG]    Absent weekend dates: 5 days
[2025-10-03T06:17:43.999Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:17:43.999Z] [LOG]    Gross Salary: 50000
[2025-10-03T06:17:43.999Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:17:44.000Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:17:44.000Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:44.000Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:17:44.000Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:44.000Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:17:44.000Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:44.001Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:17:44.001Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:44.001Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:17:44.001Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:44.002Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:17:44.002Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:44.002Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:17:44.002Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:44.002Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:17:44.002Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:44.003Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:17:44.003Z] [LOG] Regular deductions for Faizan Faizan: {
  "components": [],
  "total": 0
}
[2025-10-03T06:17:44.003Z] [LOG] Combined deductions for Faizan Faizan: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 40000,
      "details": "160 hours Ã— 250.00"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 10000,
      "details": "5 weekend days Ã— 2000.00"
    }
  ],
  "total": 50000
}
[2025-10-03T06:17:44.179Z] [LOG] Creating components for record a24f6668-464e-45bc-bc75-793b77242a82: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:17:44.181Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 40000
}
[2025-10-03T06:17:44.369Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:17:44.542Z] [LOG] Created payroll_record_component: 2f91ecc7-c038-4806-be3f-c5a6ea92e94f for Working Hours Shortfall
[2025-10-03T06:17:44.543Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 10000
}
[2025-10-03T06:17:44.716Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:17:44.893Z] [LOG] Created payroll_record_component: 9b87933d-2f80-47ee-a9ec-6d30e1ff0a27 for Weekend Absent Days
[2025-10-03T06:17:45.416Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:17:45.427Z] [ERROR] âŒ Error updating financial balances for employee 0143a057-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:17:45.435Z] [LOG] âœ… Faizan Faizan: Calculation completed successfully
[2025-10-03T06:17:45.436Z] [LOG] ğŸ“Š Progress: 22/34 (64.7%)
[2025-10-03T06:17:45.437Z] [LOG] 
ğŸ§® Processing: Office Team null (EMP000041)
[2025-10-03T06:17:45.438Z] [LOG] ğŸ“‹ Record ID: b24a601b-26aa-4130-a0e9-baac76fede38
[2025-10-03T06:17:46.144Z] [LOG] ğŸ” Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-03T06:17:46.145Z] [LOG]    Total components: 8
[2025-10-03T06:17:46.146Z] [LOG]    Applicable components: 8
[2025-10-03T06:17:46.146Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-03T06:17:47.038Z] [LOG] ğŸ” Fetched 0 attendance records for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:47.039Z] [LOG] âš ï¸  ATTENTION: Employee 01442b21-7105-11f0-a50f-98e743540430 has NO attendance records in this payroll period!
[2025-10-03T06:17:47.217Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:17:48.282Z] [LOG] Employee 01442b21-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:17:48.282Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8h = 160h
[2025-10-03T06:17:48.283Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:17:48.283Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:17:48.286Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-03T06:17:48.286Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:17:48.286Z] [LOG] ================================================================================
[2025-10-03T06:17:48.287Z] [LOG] ================================================================================
[2025-10-03T06:17:48.287Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:17:48.287Z] [LOG]    Sum of all daily counted hours (rounded): 0h
[2025-10-03T06:17:48.288Z] [LOG]    Expected hours: 160h
[2025-10-03T06:17:48.288Z] [LOG]    Shortfall: 160.00h
[2025-10-03T06:17:48.288Z] [LOG] ================================================================================
[2025-10-03T06:17:48.463Z] [LOG] ğŸ”„ Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430...
[2025-10-03T06:17:48.463Z] [LOG] ğŸ”„ Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:17:48.640Z] [LOG] ğŸ“Š Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:48.821Z] [LOG] ğŸ“Š Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:48.999Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:49.000Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:17:49.001Z] [LOG] ğŸ’° GROSS CALCULATION for Office Team null:
[2025-10-03T06:17:49.001Z] [LOG]    Base Salary: 1
[2025-10-03T06:17:49.002Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:17:49.184Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:17:49.538Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:17:49.900Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:17:50.076Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:17:50.425Z] [LOG] Employee 01442b21-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:17:50.426Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:17:50.426Z] [LOG] ============================================================
[2025-10-03T06:17:50.426Z] [LOG] ğŸ‘¤ Employee ID: 01442b21-7105-11f0-a50f-98e743540430
[2025-10-03T06:17:50.427Z] [LOG] ğŸ’° Base Salary: 1
[2025-10-03T06:17:50.427Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:17:50.427Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:17:50.427Z] [LOG] â° Employee Daily Hours: 8h/day
[2025-10-03T06:17:50.428Z] [LOG] ğŸ’µ Per-Day Salary: 0.04
[2025-10-03T06:17:50.428Z] [LOG] â±ï¸  Hourly Rate: 0.01
[2025-10-03T06:17:50.428Z] [LOG] 
[2025-10-03T06:17:50.428Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:17:50.429Z] [LOG]    Expected Hours: 160
[2025-10-03T06:17:50.429Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8h = 200.00h
[2025-10-03T06:17:50.429Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:17:50.429Z] [LOG]    Worked Hours: 0
[2025-10-03T06:17:50.430Z] [LOG]    âš ï¸  Shortfall Hours: 160
[2025-10-03T06:17:50.430Z] [LOG]    ğŸ’¸ Shortfall Deduction: 160h Ã— 0.01 = 0.80
[2025-10-03T06:17:50.430Z] [LOG] ============================================================
[2025-10-03T06:17:51.133Z] [LOG] ğŸ“… Weekend absence check for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-03T06:17:51.134Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:17:51.134Z] [LOG]    Attended weekend dates: 0 days
[2025-10-03T06:17:51.135Z] [LOG]    Absent weekend dates: 5 days
[2025-10-03T06:17:51.135Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:17:51.135Z] [LOG]    Gross Salary: 1
[2025-10-03T06:17:51.136Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:17:51.136Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:17:51.136Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:51.137Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:17:51.137Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:51.137Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:17:51.138Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:51.138Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:17:51.138Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:51.139Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:17:51.140Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:51.141Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:17:51.141Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:51.141Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:17:51.142Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:51.142Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:17:51.142Z] [LOG]    Fixed amount: 0
[2025-10-03T06:17:51.143Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:17:51.143Z] [LOG] Regular deductions for Office Team null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:17:51.144Z] [LOG] Combined deductions for Office Team null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 0.8,
      "details": "160 hours Ã— 0.01"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 0.2,
      "details": "5 weekend days Ã— 0.04"
    }
  ],
  "total": 1
}
[2025-10-03T06:17:51.325Z] [LOG] Creating components for record b24a601b-26aa-4130-a0e9-baac76fede38: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:17:51.326Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 0.8
}
[2025-10-03T06:17:51.504Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:17:51.688Z] [LOG] Created payroll_record_component: f13ee898-4a72-4369-abd8-82ed4b059645 for Working Hours Shortfall
[2025-10-03T06:17:51.688Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 0.2
}
[2025-10-03T06:17:51.868Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:17:52.048Z] [LOG] Created payroll_record_component: 5e86f253-1c6b-43fa-b895-605f63e58c21 for Weekend Absent Days
[2025-10-03T06:17:52.578Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:17:52.585Z] [ERROR] âŒ Error updating financial balances for employee 01442b21-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:17:52.596Z] [LOG] âœ… Office Team null: Calculation completed successfully
[2025-10-03T06:17:52.597Z] [LOG] ğŸ“Š Progress: 23/34 (67.6%)
[2025-10-03T06:17:52.597Z] [LOG] 
ğŸ§® Processing: Jessie null (EMP000013)
[2025-10-03T06:17:52.598Z] [LOG] ğŸ“‹ Record ID: b6026857-5c67-4ff8-9d86-80025f479d25
[2025-10-03T06:17:53.318Z] [LOG] ğŸ” Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-03T06:17:53.319Z] [LOG]    Total components: 8
[2025-10-03T06:17:53.319Z] [LOG]    Applicable components: 8
[2025-10-03T06:17:53.320Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-03T06:17:54.385Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:54.739Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:55.089Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:55.439Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:55.792Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:56.139Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:56.496Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:56.843Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:57.194Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:57.546Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:57.895Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:58.241Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:58.589Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:58.940Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:59.288Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:17:59.650Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:00.096Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:00.277Z] [LOG] ğŸ” Fetched 18 attendance records for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:00.460Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:18:01.361Z] [LOG] Employee 0143ae6e-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:18:01.361Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:18:01.362Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:18:01.362Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:18:01.365Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-03T06:18:01.365Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:18:01.365Z] [LOG] ================================================================================
[2025-10-03T06:18:01.366Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 10.21h worked â†’ 7.5925h counted â†’ OVERLAP 09:24-17:00 = 7.593h (attendance table)
[2025-10-03T06:18:01.366Z] [LOG]    âœ… Added to weekday total: 7.5925h
[2025-10-03T06:18:01.366Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 8.95h worked â†’ 7.666666666666667h counted â†’ OVERLAP 09:20-17:00 = 7.667h (attendance table)
[2025-10-03T06:18:01.367Z] [LOG]    âœ… Added to weekday total: 7.666666666666667h
[2025-10-03T06:18:01.367Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 10.37h worked â†’ 7.562222222222222h counted â†’ OVERLAP 09:26-17:00 = 7.562h (attendance table)
[2025-10-03T06:18:01.368Z] [LOG]    âœ… Added to weekday total: 7.562222222222222h
[2025-10-03T06:18:01.368Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 9.6h worked â†’ 7.601388888888889h counted â†’ OVERLAP 09:23-17:00 = 7.601h (attendance table)
[2025-10-03T06:18:01.368Z] [LOG]    âœ… Added to weekday total: 7.601388888888889h
[2025-10-03T06:18:01.369Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 9.63h worked â†’ 7.629722222222222h counted â†’ OVERLAP 09:22-17:00 = 7.630h (attendance table)
[2025-10-03T06:18:01.369Z] [LOG]    âœ… Added to weekday total: 7.629722222222222h
[2025-10-03T06:18:01.369Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 9.85h worked â†’ 7.916666666666667h counted â†’ OVERLAP 09:05-17:00 = 7.917h (attendance table)
[2025-10-03T06:18:01.370Z] [LOG]    âœ… Added to weekday total: 7.916666666666667h
[2025-10-03T06:18:01.370Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 10.89h worked â†’ 7.333333333333333h counted â†’ OVERLAP 09:40-17:00 = 7.333h (attendance table)
[2025-10-03T06:18:01.370Z] [LOG]    âœ… Added to weekday total: 7.333333333333333h
[2025-10-03T06:18:01.370Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 11.21h worked â†’ 7.714166666666666h counted â†’ OVERLAP 09:17-17:00 = 7.714h (attendance table)
[2025-10-03T06:18:01.371Z] [LOG]    âœ… Added to weekday total: 7.714166666666666h
[2025-10-03T06:18:01.371Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 8.57h worked â†’ 6.542777777777777h counted â†’ OVERLAP 10:27-17:00 = 6.543h (attendance table)
[2025-10-03T06:18:01.371Z] [LOG]    âœ… Added to weekday total: 6.542777777777777h
[2025-10-03T06:18:01.372Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 9.52h worked â†’ 7.523611111111111h counted â†’ OVERLAP 09:28-17:00 = 7.524h (attendance table)
[2025-10-03T06:18:01.372Z] [LOG]    âœ… Added to weekday total: 7.523611111111111h
[2025-10-03T06:18:01.372Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 9.66h worked â†’ 7.663055555555555h counted â†’ OVERLAP 09:20-17:00 = 7.663h (attendance table)
[2025-10-03T06:18:01.372Z] [LOG]    âœ… Added to weekday total: 7.663055555555555h
[2025-10-03T06:18:01.373Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 10.19h worked â†’ 7.708055555555555h counted â†’ OVERLAP 09:17-17:00 = 7.708h (attendance table)
[2025-10-03T06:18:01.373Z] [LOG]    âœ… Added to weekday total: 7.708055555555555h
[2025-10-03T06:18:01.373Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 8.98h worked â†’ 7.477777777777778h counted â†’ OVERLAP 09:31-17:00 = 7.478h (attendance table)
[2025-10-03T06:18:01.374Z] [LOG]    âœ… Added to weekday total: 7.477777777777778h
[2025-10-03T06:18:01.374Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 9.06h worked â†’ 7.563055555555556h counted â†’ OVERLAP 09:26-17:00 = 7.563h (attendance table)
[2025-10-03T06:18:01.374Z] [LOG]    âœ… Added to weekday total: 7.563055555555556h
[2025-10-03T06:18:01.374Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 8.07h worked â†’ 8.065833333333334h counted â†’ OVERLAP 08:56-17:00 = 8.066h (attendance table)
[2025-10-03T06:18:01.374Z] [LOG]    âœ… Added to weekday total: 8.065833333333334h
[2025-10-03T06:18:01.375Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 8.57h worked â†’ 7.5713888888888885h counted â†’ OVERLAP 09:25-17:00 = 7.571h (attendance table)
[2025-10-03T06:18:01.375Z] [LOG]    âœ… Added to weekday total: 7.5713888888888885h
[2025-10-03T06:18:01.375Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 9h worked â†’ 7.5h counted â†’ OVERLAP 09:30-17:00 = 7.500h (attendance table)
[2025-10-03T06:18:01.375Z] [LOG]    âœ… Added to weekday total: 7.5h
[2025-10-03T06:18:01.376Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 11.06h worked â†’ 7.562777777777778h counted â†’ OVERLAP 09:26-17:00 = 7.563h (attendance table)
[2025-10-03T06:18:01.376Z] [LOG]    âœ… Added to weekday total: 7.562777777777778h
[2025-10-03T06:18:01.376Z] [LOG] ================================================================================
[2025-10-03T06:18:01.376Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:18:01.376Z] [LOG]    Sum of all daily counted hours (rounded): 136.195h
[2025-10-03T06:18:01.377Z] [LOG]    Expected hours: 170h
[2025-10-03T06:18:01.377Z] [LOG]    Shortfall: 33.81h
[2025-10-03T06:18:01.377Z] [LOG] ================================================================================
[2025-10-03T06:18:01.553Z] [LOG] ğŸ”„ Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430...
[2025-10-03T06:18:01.554Z] [LOG] ğŸ”„ Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:18:01.732Z] [LOG] ğŸ“Š Found 1 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:01.908Z] [LOG] ğŸ“Š Found 1 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:02.082Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:02.083Z] [LOG] ğŸ’° Loan 2625eeef-b509-439f-9fbe-f80c1065c6fe: Deducting LKR 10000 (Remaining: LKR 10000)
[2025-10-03T06:18:02.084Z] [LOG] ğŸ’¸ Advance d1db4f71-1c1e-4611-a1c5-6cec09c476d8: Deducting LKR 17000 (Remaining: LKR 17000)
[2025-10-03T06:18:02.085Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 10000,
  "advances": 17000,
  "bonuses": 0,
  "netAdjustment": -27000
}
[2025-10-03T06:18:02.086Z] [LOG] ğŸ’° GROSS CALCULATION for Jessie null:
[2025-10-03T06:18:02.086Z] [LOG]    Base Salary: 60000
[2025-10-03T06:18:02.087Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:18:02.261Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:18:02.626Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:18:02.975Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:18:03.148Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:18:03.330Z] [LOG] Employee 0143ae6e-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:18:03.330Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:18:03.331Z] [LOG] ============================================================
[2025-10-03T06:18:03.331Z] [LOG] ğŸ‘¤ Employee ID: 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:03.331Z] [LOG] ğŸ’° Base Salary: 60,000
[2025-10-03T06:18:03.332Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:18:03.332Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:18:03.333Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:18:03.333Z] [LOG] ğŸ’µ Per-Day Salary: 2400.00
[2025-10-03T06:18:03.333Z] [LOG] â±ï¸  Hourly Rate: 282.35
[2025-10-03T06:18:03.334Z] [LOG] 
[2025-10-03T06:18:03.334Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:18:03.335Z] [LOG]    Expected Hours: 170
[2025-10-03T06:18:03.335Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:18:03.336Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:18:03.336Z] [LOG]    Worked Hours: 136.195
[2025-10-03T06:18:03.336Z] [LOG]    âš ï¸  Shortfall Hours: 33.80500000000001
[2025-10-03T06:18:03.337Z] [LOG]    ğŸ’¸ Shortfall Deduction: 33.80500000000001h Ã— 282.35 = 9544.94
[2025-10-03T06:18:03.337Z] [LOG] ============================================================
[2025-10-03T06:18:04.038Z] [LOG] ğŸ“… Weekend absence check for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-03T06:18:04.039Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:18:04.040Z] [LOG]    Attended weekend dates: 0 days
[2025-10-03T06:18:04.040Z] [LOG]    Absent weekend dates: 5 days
[2025-10-03T06:18:04.041Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:18:04.041Z] [LOG]    Gross Salary: 60000
[2025-10-03T06:18:04.042Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:18:04.042Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:18:04.043Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:04.043Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:18:04.044Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:04.045Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:18:04.045Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:04.046Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:18:04.046Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:04.047Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:18:04.048Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:04.050Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:18:04.051Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:04.052Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:18:04.052Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:04.053Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:18:04.053Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:04.054Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:18:04.054Z] [LOG] Regular deductions for Jessie null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:18:04.056Z] [LOG] Combined deductions for Jessie null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 9544.941176470591,
      "details": "33.80500000000001 hours Ã— 282.35"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 12000,
      "details": "5 weekend days Ã— 2400.00"
    },
    {
      "code": "LOAN_DED",
      "name": "Loan Deductions",
      "type": "deduction",
      "category": "loan",
      "amount": 10000,
      "details": "1 loan(s)"
    },
    {
      "code": "ADVANCE_DED",
      "name": "Advance Deductions",
      "type": "deduction",
      "category": "other",
      "amount": 17000,
      "details": "1 advance(s)"
    }
  ],
  "total": 48544.94117647059
}
[2025-10-03T06:18:04.242Z] [LOG] Creating components for record b6026857-5c67-4ff8-9d86-80025f479d25: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 4,
  "taxComponentsCount": 0
}
[2025-10-03T06:18:04.246Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 9544.941176470591
}
[2025-10-03T06:18:04.429Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:18:04.607Z] [LOG] Created payroll_record_component: ab75d355-bca3-4adb-adf4-62d5812596d6 for Working Hours Shortfall
[2025-10-03T06:18:04.607Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 12000
}
[2025-10-03T06:18:04.783Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:18:04.957Z] [LOG] Created payroll_record_component: f41470f1-8c98-4ab5-af60-d2cfbf2e2974 for Weekend Absent Days
[2025-10-03T06:18:04.957Z] [LOG] Processing component: {
  "name": "Loan Deductions",
  "type": "deduction",
  "amount": 10000
}
[2025-10-03T06:18:05.131Z] [LOG] Using existing component ID: 64a0d7d8-8fdb-4968-a7a2-057590b481c7
[2025-10-03T06:18:05.308Z] [LOG] Created payroll_record_component: 7f00ca52-36ac-48b4-83c4-355eb6c30883 for Loan Deductions
[2025-10-03T06:18:05.309Z] [LOG] Processing component: {
  "name": "Advance Deductions",
  "type": "deduction",
  "amount": 17000
}
[2025-10-03T06:18:05.485Z] [LOG] Using existing component ID: 212471aa-dc59-47a4-9969-235f68be2fa4
[2025-10-03T06:18:05.666Z] [LOG] Created payroll_record_component: 853af32d-7fff-4c63-b6c6-7dacd77831c2 for Advance Deductions
[2025-10-03T06:18:06.194Z] [LOG] âœ… Updated loan 2625eeef-b509-439f-9fbe-f80c1065c6fe: Remaining LKR 0, Status: completed
[2025-10-03T06:18:06.550Z] [LOG] âœ… Updated advance d1db4f71-1c1e-4611-a1c5-6cec09c476d8: Remaining LKR 0, Status: completed
[2025-10-03T06:18:06.910Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:18:06.913Z] [ERROR] âŒ Error updating financial balances for employee 0143ae6e-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:18:06.917Z] [LOG] âœ… Jessie null: Calculation completed successfully
[2025-10-03T06:18:06.918Z] [LOG] ğŸ“Š Progress: 24/34 (70.6%)
[2025-10-03T06:18:06.918Z] [LOG] 
ğŸ§® Processing: Chemil null (EMP000040)
[2025-10-03T06:18:06.918Z] [LOG] ğŸ“‹ Record ID: bb288095-fd74-47ae-b852-cb9afa17ee1f
[2025-10-03T06:18:07.744Z] [LOG] ğŸ” Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-03T06:18:07.745Z] [LOG]    Total components: 8
[2025-10-03T06:18:07.745Z] [LOG]    Applicable components: 8
[2025-10-03T06:18:07.746Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-03T06:18:08.790Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:09.142Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:09.515Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:09.869Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:10.301Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:10.654Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:11.088Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:11.440Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:11.785Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:11.963Z] [LOG] ğŸ” Fetched 21 attendance records for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:12.142Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:18:13.020Z] [LOG] Employee 01442599-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:18:13.020Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:18:13.020Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:18:13.021Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:18:13.024Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-03T06:18:13.024Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:18:13.025Z] [LOG] ================================================================================
[2025-10-03T06:18:13.025Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:13.025Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:13.025Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 0h worked â†’ 0h counted â†’ NO OVERLAP with scheduled time (attendance table)
[2025-10-03T06:18:13.025Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 0h
[2025-10-03T06:18:13.026Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 6.6h worked â†’ 6.603611111111111h counted â†’ OVERLAP 10:23-17:00 = 6.604h (attendance table)
[2025-10-03T06:18:13.026Z] [LOG]    âœ… Added to weekday total: 6.603611111111111h
[2025-10-03T06:18:13.026Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:13.026Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:13.027Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 9.7h worked â†’ 8.492222222222223h counted â†’ OVERLAP 08:30-17:00 = 8.492h (attendance table)
[2025-10-03T06:18:13.027Z] [LOG]    âœ… Added to weekday total: 8.492222222222223h
[2025-10-03T06:18:13.027Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:13.028Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:13.028Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 10.52h worked â†’ 7.222777777777778h counted â†’ OVERLAP 09:46-17:00 = 7.223h (attendance table)
[2025-10-03T06:18:13.028Z] [LOG]    âœ… Added to weekday total: 7.222777777777778h
[2025-10-03T06:18:13.029Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:13.029Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:13.029Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 7.12h worked â†’ 7.118888888888889h counted â†’ OVERLAP 09:52-17:00 = 7.119h (attendance table)
[2025-10-03T06:18:13.029Z] [LOG]    âœ… Added to weekday total: 7.118888888888889h
[2025-10-03T06:18:13.030Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 4.5h worked â†’ 4.496666666666667h counted â†’ OVERLAP 08:30-13:00 = 4.497h (attendance table)
[2025-10-03T06:18:13.030Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.496666666666667h
[2025-10-03T06:18:13.030Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:13.030Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:13.030Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 8.43h worked â†’ 8.432222222222222h counted â†’ OVERLAP 08:34-17:00 = 8.432h (attendance table)
[2025-10-03T06:18:13.031Z] [LOG]    âœ… Added to weekday total: 8.432222222222222h
[2025-10-03T06:18:13.031Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:13.031Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:13.032Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 10.01h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:13.032Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:13.032Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 9.88h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:13.032Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:13.033Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 10.63h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:13.033Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:13.033Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 10.31h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:13.034Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:13.034Z] [LOG] ğŸ“… 2025-08-27 (WEEKDAY): 9.74h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:13.034Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:13.034Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 10.39h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:13.035Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:13.035Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 11.83h worked â†’ 8.492777777777778h counted â†’ OVERLAP 08:30-17:00 = 8.493h (attendance table)
[2025-10-03T06:18:13.035Z] [LOG]    âœ… Added to weekday total: 8.492777777777778h
[2025-10-03T06:18:13.035Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:18:13.035Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:18:13.036Z] [LOG] ================================================================================
[2025-10-03T06:18:13.036Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:18:13.036Z] [LOG]    Sum of all daily counted hours (rounded): 148.3625h
[2025-10-03T06:18:13.036Z] [LOG]    Expected hours: 170h
[2025-10-03T06:18:13.036Z] [LOG]    Shortfall: 21.64h
[2025-10-03T06:18:13.037Z] [LOG] ================================================================================
[2025-10-03T06:18:13.213Z] [LOG] ğŸ”„ Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430...
[2025-10-03T06:18:13.214Z] [LOG] ğŸ”„ Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:18:13.390Z] [LOG] ğŸ“Š Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:13.576Z] [LOG] ğŸ“Š Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:13.755Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:13.755Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:18:13.756Z] [LOG] ğŸ’° GROSS CALCULATION for Chemil null:
[2025-10-03T06:18:13.757Z] [LOG]    Base Salary: 250000
[2025-10-03T06:18:13.758Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:18:13.933Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:18:14.292Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:18:14.645Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:18:14.846Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:18:15.023Z] [LOG] Employee 01442599-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:18:15.023Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:18:15.024Z] [LOG] ============================================================
[2025-10-03T06:18:15.024Z] [LOG] ğŸ‘¤ Employee ID: 01442599-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:15.024Z] [LOG] ğŸ’° Base Salary: 250,000
[2025-10-03T06:18:15.025Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:18:15.025Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:18:15.025Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:18:15.026Z] [LOG] ğŸ’µ Per-Day Salary: 10000.00
[2025-10-03T06:18:15.026Z] [LOG] â±ï¸  Hourly Rate: 1176.47
[2025-10-03T06:18:15.026Z] [LOG] 
[2025-10-03T06:18:15.027Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:18:15.027Z] [LOG]    Expected Hours: 170
[2025-10-03T06:18:15.027Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:18:15.028Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:18:15.028Z] [LOG]    Worked Hours: 148.3625
[2025-10-03T06:18:15.029Z] [LOG]    âš ï¸  Shortfall Hours: 21.63749999999999
[2025-10-03T06:18:15.029Z] [LOG]    ğŸ’¸ Shortfall Deduction: 21.63749999999999h Ã— 1176.47 = 25455.88
[2025-10-03T06:18:15.030Z] [LOG] ============================================================
[2025-10-03T06:18:15.383Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-02 (Saturday)
[2025-10-03T06:18:15.383Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:18:15.383Z] [LOG]    Actual: 08:30:00 - 00:00:00
[2025-10-03T06:18:15.384Z] [LOG]    Calculation: NO OVERLAP with scheduled time
[2025-10-03T06:18:15.384Z] [LOG]    Payable Hours: 0.000h
[2025-10-03T06:18:15.384Z] [LOG]    Shortfall: 4.500h
[2025-10-03T06:18:15.384Z] [LOG]    Hourly Rate: 2222.22 (Day Salary 10000 Ã· 4.5h)
[2025-10-03T06:18:15.384Z] [LOG]    Deduction: 10000.00
[2025-10-03T06:18:15.385Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-16 (Saturday)
[2025-10-03T06:18:15.385Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:18:15.385Z] [LOG]    Actual: 08:30:12 - 13:00:00
[2025-10-03T06:18:15.386Z] [LOG]    Calculation: OVERLAP 08:30-13:00 = 4.497h
[2025-10-03T06:18:15.386Z] [LOG]    Payable Hours: 4.497h
[2025-10-03T06:18:15.386Z] [LOG]    Shortfall: 0.003h
[2025-10-03T06:18:15.386Z] [LOG]    Hourly Rate: 2222.22 (Day Salary 10000 Ã· 4.5h)
[2025-10-03T06:18:15.386Z] [LOG]    Deduction: 7.41
[2025-10-03T06:18:15.387Z] [LOG] âœ… Weekend Day Met: 2025-08-30 (Saturday)
[2025-10-03T06:18:15.387Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:18:15.737Z] [LOG] ğŸ“… Weekend absence check for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-03T06:18:15.737Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:18:15.738Z] [LOG]    Attended weekend dates: 3 days
[2025-10-03T06:18:15.738Z] [LOG]    Absent weekend dates: 2 days
[2025-10-03T06:18:15.739Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:18:15.739Z] [LOG]    Gross Salary: 250000
[2025-10-03T06:18:15.740Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:18:15.740Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:18:15.741Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:15.742Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:18:15.742Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:15.743Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:18:15.744Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:15.744Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:18:15.745Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:15.746Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:18:15.746Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:15.747Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:18:15.747Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:15.748Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:18:15.749Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:15.749Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:18:15.750Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:15.751Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:18:15.751Z] [LOG] Regular deductions for Chemil null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:18:15.752Z] [LOG] Combined deductions for Chemil null: {
  "components": [
    {
      "code": "WEEKEND_SHORTFALL",
      "name": "Weekend Shortfall Deduction",
      "type": "deduction",
      "category": "other",
      "amount": 10007.407407407407,
      "details": "Total 4.50h shortfall - 2025-08-02 (Saturday): 4.50h, 2025-08-16 (Saturday): 0.00h"
    },
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 25455.882352941164,
      "details": "21.63749999999999 hours Ã— 1176.47"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 20000,
      "details": "2 weekend days Ã— 10000.00"
    }
  ],
  "total": 55463.28976034857
}
[2025-10-03T06:18:15.938Z] [LOG] Creating components for record bb288095-fd74-47ae-b852-cb9afa17ee1f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 3,
  "taxComponentsCount": 1
}
[2025-10-03T06:18:15.939Z] [LOG] Processing component: {
  "name": "Weekend Shortfall Deduction",
  "type": "deduction",
  "amount": 10007.407407407407
}
[2025-10-03T06:18:16.119Z] [LOG] Using existing component ID: 106fdfbf-ee30-432b-8a98-9c8f6cef1ae1
[2025-10-03T06:18:16.299Z] [LOG] Created payroll_record_component: 9c73aa20-1fff-456d-a334-e5281fa887b2 for Weekend Shortfall Deduction
[2025-10-03T06:18:16.300Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 25455.882352941164
}
[2025-10-03T06:18:16.479Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:18:16.655Z] [LOG] Created payroll_record_component: c2b2a3aa-5f6c-4bd9-821b-e6e8af2c822f for Working Hours Shortfall
[2025-10-03T06:18:16.656Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 20000
}
[2025-10-03T06:18:16.832Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:18:17.014Z] [LOG] Created payroll_record_component: b7ba8043-373f-4d4f-82d3-444378abdf99 for Weekend Absent Days
[2025-10-03T06:18:17.014Z] [LOG] Processing component: {
  "name": "Income Tax",
  "type": "tax",
  "amount": 12000
}
[2025-10-03T06:18:17.192Z] [LOG] Using existing component ID: 72f98b53-4bd5-4713-98d0-e3a641ad8d0f
[2025-10-03T06:18:17.368Z] [LOG] Created payroll_record_component: bf221436-cc1d-4800-b80b-7c93abc1177e for Income Tax
[2025-10-03T06:18:17.895Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:18:17.899Z] [ERROR] âŒ Error updating financial balances for employee 01442599-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:18:17.903Z] [LOG] âœ… Chemil null: Calculation completed successfully
[2025-10-03T06:18:17.903Z] [LOG] ğŸ“Š Progress: 25/34 (73.5%)
[2025-10-03T06:18:17.903Z] [LOG] 
ğŸ§® Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-03T06:18:17.903Z] [LOG] ğŸ“‹ Record ID: c6891532-1e6f-4d32-8390-846364c41db4
[2025-10-03T06:18:18.609Z] [LOG] ğŸ” Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-03T06:18:18.609Z] [LOG]    Total components: 8
[2025-10-03T06:18:18.610Z] [LOG]    Applicable components: 8
[2025-10-03T06:18:18.610Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-03T06:18:19.663Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:20.012Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:20.353Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:20.702Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:21.050Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:21.399Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:21.748Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:22.281Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:22.629Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:22.996Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:23.656Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:24.283Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:24.707Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:25.216Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:25.788Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:27.984Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:28.444Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:28.823Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:29.167Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:29.513Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:29.687Z] [LOG] ğŸ” Fetched 25 attendance records for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:29.858Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:18:30.788Z] [LOG] Employee 01441633-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:18:30.788Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:18:30.788Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:18:30.790Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:18:30.795Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-03T06:18:30.797Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:18:30.797Z] [LOG] ================================================================================
[2025-10-03T06:18:30.797Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 8.87h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:30.798Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:30.799Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 4.92h worked â†’ 4.25h counted â†’ OVERLAP 08:45-13:00 = 4.250h (attendance table)
[2025-10-03T06:18:30.799Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.25h
[2025-10-03T06:18:30.799Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 10.98h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:30.800Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:30.800Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 9.25h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:30.800Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:30.800Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 10.31h worked â†’ 8.401666666666667h counted â†’ OVERLAP 08:35-17:00 = 8.402h (attendance table)
[2025-10-03T06:18:30.801Z] [LOG]    âœ… Added to weekday total: 8.401666666666667h
[2025-10-03T06:18:30.801Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 9h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:30.801Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:30.801Z] [LOG] ğŸ“… 2025-08-09 (WEEKEND): 7.28h worked â†’ 3.9252777777777776h counted â†’ OVERLAP 09:04-13:00 = 3.925h (attendance table)
[2025-10-03T06:18:30.801Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.9252777777777776h
[2025-10-03T06:18:30.802Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 10.54h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:30.802Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:30.802Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 10.98h worked â†’ 8.364444444444445h counted â†’ OVERLAP 08:38-17:00 = 8.364h (attendance table)
[2025-10-03T06:18:30.802Z] [LOG]    âœ… Added to weekday total: 8.364444444444445h
[2025-10-03T06:18:30.803Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 9.08h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:30.803Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:30.803Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 10.56h worked â†’ 8.4925h counted â†’ OVERLAP 08:30-17:00 = 8.492h (attendance table)
[2025-10-03T06:18:30.803Z] [LOG]    âœ… Added to weekday total: 8.4925h
[2025-10-03T06:18:30.804Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 11.08h worked â†’ 8.22888888888889h counted â†’ OVERLAP 08:46-17:00 = 8.229h (attendance table)
[2025-10-03T06:18:30.804Z] [LOG]    âœ… Added to weekday total: 8.22888888888889h
[2025-10-03T06:18:30.804Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 6.92h worked â†’ 4.394166666666667h counted â†’ OVERLAP 08:36-13:00 = 4.394h (attendance table)
[2025-10-03T06:18:30.805Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.394166666666667h
[2025-10-03T06:18:30.805Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 10.85h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:30.805Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:30.806Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 11.01h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:30.807Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:30.807Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:30.807Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:30.808Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 10.01h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:30.808Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:30.808Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 9.75h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:30.809Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:30.809Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:18:30.809Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:18:30.810Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 9.27h worked â†’ 8.393333333333333h counted â†’ OVERLAP 08:36-17:00 = 8.393h (attendance table)
[2025-10-03T06:18:30.810Z] [LOG]    âœ… Added to weekday total: 8.393333333333333h
[2025-10-03T06:18:30.810Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 8.72h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:18:30.810Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:18:30.810Z] [LOG] ğŸ“… 2025-08-27 (WEEKDAY): 6.66h worked â†’ 5.5075h counted â†’ OVERLAP 11:29-17:00 = 5.508h (attendance table)
[2025-10-03T06:18:30.811Z] [LOG]    âœ… Added to weekday total: 5.5075h
[2025-10-03T06:18:30.811Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 9.56h worked â†’ 7.801944444444445h counted â†’ OVERLAP 09:11-17:00 = 7.802h (attendance table)
[2025-10-03T06:18:30.811Z] [LOG]    âœ… Added to weekday total: 7.801944444444445h
[2025-10-03T06:18:30.812Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 10.91h worked â†’ 8.240277777777777h counted â†’ OVERLAP 08:45-17:00 = 8.240h (attendance table)
[2025-10-03T06:18:30.812Z] [LOG]    âœ… Added to weekday total: 8.240277777777777h
[2025-10-03T06:18:30.812Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:18:30.812Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:18:30.813Z] [LOG] ================================================================================
[2025-10-03T06:18:30.813Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:18:30.813Z] [LOG]    Sum of all daily counted hours (rounded): 165.4306h
[2025-10-03T06:18:30.814Z] [LOG]    Expected hours: 170h
[2025-10-03T06:18:30.814Z] [LOG]    Shortfall: 4.57h
[2025-10-03T06:18:30.814Z] [LOG] ================================================================================
[2025-10-03T06:18:30.987Z] [LOG] ğŸ”„ Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430...
[2025-10-03T06:18:30.990Z] [LOG] ğŸ”„ Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:18:31.169Z] [LOG] ğŸ“Š Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:31.345Z] [LOG] ğŸ“Š Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:31.520Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:31.520Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:18:31.521Z] [LOG] ğŸ’° GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-03T06:18:31.521Z] [LOG]    Base Salary: 50000
[2025-10-03T06:18:31.521Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:18:31.698Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:18:32.152Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:18:32.502Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:18:32.684Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:18:32.990Z] [LOG] Employee 01441633-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:18:32.991Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:18:32.992Z] [LOG] ============================================================
[2025-10-03T06:18:32.993Z] [LOG] ğŸ‘¤ Employee ID: 01441633-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:32.993Z] [LOG] ğŸ’° Base Salary: 50,000
[2025-10-03T06:18:32.994Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:18:32.995Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:18:32.995Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:18:32.996Z] [LOG] ğŸ’µ Per-Day Salary: 2000.00
[2025-10-03T06:18:32.996Z] [LOG] â±ï¸  Hourly Rate: 235.29
[2025-10-03T06:18:32.997Z] [LOG] 
[2025-10-03T06:18:32.997Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:18:32.998Z] [LOG]    Expected Hours: 170
[2025-10-03T06:18:32.999Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:18:33.000Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:18:33.000Z] [LOG]    Worked Hours: 165.4306
[2025-10-03T06:18:33.001Z] [LOG]    âš ï¸  Shortfall Hours: 4.569400000000002
[2025-10-03T06:18:33.002Z] [LOG]    ğŸ’¸ Shortfall Deduction: 4.569400000000002h Ã— 235.29 = 1075.15
[2025-10-03T06:18:33.002Z] [LOG] ============================================================
[2025-10-03T06:18:33.376Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-02 (Saturday)
[2025-10-03T06:18:33.377Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:18:33.377Z] [LOG]    Actual: 08:45:00 - 13:40:00
[2025-10-03T06:18:33.377Z] [LOG]    Calculation: OVERLAP 08:45-13:00 = 4.250h
[2025-10-03T06:18:33.377Z] [LOG]    Payable Hours: 4.250h
[2025-10-03T06:18:33.378Z] [LOG]    Shortfall: 0.250h
[2025-10-03T06:18:33.378Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:18:33.378Z] [LOG]    Deduction: 111.11
[2025-10-03T06:18:33.378Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-09 (Saturday)
[2025-10-03T06:18:33.378Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:18:33.379Z] [LOG]    Actual: 09:04:29 - 16:21:17
[2025-10-03T06:18:33.379Z] [LOG]    Calculation: OVERLAP 09:04-13:00 = 3.925h
[2025-10-03T06:18:33.379Z] [LOG]    Payable Hours: 3.925h
[2025-10-03T06:18:33.379Z] [LOG]    Shortfall: 0.575h
[2025-10-03T06:18:33.379Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:18:33.380Z] [LOG]    Deduction: 255.43
[2025-10-03T06:18:33.380Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-16 (Saturday)
[2025-10-03T06:18:33.380Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:18:33.380Z] [LOG]    Actual: 08:36:21 - 15:31:21
[2025-10-03T06:18:33.380Z] [LOG]    Calculation: OVERLAP 08:36-13:00 = 4.394h
[2025-10-03T06:18:33.380Z] [LOG]    Payable Hours: 4.394h
[2025-10-03T06:18:33.381Z] [LOG]    Shortfall: 0.106h
[2025-10-03T06:18:33.381Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:18:33.381Z] [LOG]    Deduction: 47.04
[2025-10-03T06:18:33.381Z] [LOG] âœ… Weekend Day Met: 2025-08-23 (Saturday)
[2025-10-03T06:18:33.381Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:18:33.382Z] [LOG] âœ… Weekend Day Met: 2025-08-30 (Saturday)
[2025-10-03T06:18:33.382Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:18:33.745Z] [LOG] ğŸ“… Weekend absence check for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-03T06:18:33.745Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:18:33.745Z] [LOG]    Attended weekend dates: 5 days
[2025-10-03T06:18:33.746Z] [LOG]    Absent weekend dates: 0 days
[2025-10-03T06:18:33.746Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:18:33.746Z] [LOG]    Gross Salary: 50000
[2025-10-03T06:18:33.747Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:18:33.747Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:18:33.747Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:33.748Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:18:33.748Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:33.748Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:18:33.748Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:33.749Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:18:33.749Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:33.749Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:18:33.750Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:33.750Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:18:33.750Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:33.750Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:18:33.751Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:33.751Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:18:33.751Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:33.752Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:18:33.752Z] [LOG] Regular deductions for Viruna Damsiha Cooray null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:18:33.752Z] [LOG] Combined deductions for Viruna Damsiha Cooray null: {
  "components": [
    {
      "code": "WEEKEND_SHORTFALL",
      "name": "Weekend Shortfall Deduction",
      "type": "deduction",
      "category": "other",
      "amount": 413.5802469135802,
      "details": "Total 0.93h shortfall - 2025-08-02 (Saturday): 0.25h, 2025-08-09 (Saturday): 0.57h, 2025-08-16 (Saturday): 0.11h"
    },
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 1075.152941176471,
      "details": "4.569400000000002 hours Ã— 235.29"
    }
  ],
  "total": 1488.733188090051
}
[2025-10-03T06:18:33.929Z] [LOG] Creating components for record c6891532-1e6f-4d32-8390-846364c41db4: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:18:33.933Z] [LOG] Processing component: {
  "name": "Weekend Shortfall Deduction",
  "type": "deduction",
  "amount": 413.5802469135802
}
[2025-10-03T06:18:34.109Z] [LOG] Using existing component ID: 106fdfbf-ee30-432b-8a98-9c8f6cef1ae1
[2025-10-03T06:18:34.284Z] [LOG] Created payroll_record_component: c89af489-594d-4a93-b695-4e457aa6d3d8 for Weekend Shortfall Deduction
[2025-10-03T06:18:34.286Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 1075.152941176471
}
[2025-10-03T06:18:34.461Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:18:34.635Z] [LOG] Created payroll_record_component: 9e1f530b-73ce-4e74-a5b8-7261274c7bf4 for Working Hours Shortfall
[2025-10-03T06:18:35.153Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:18:35.171Z] [ERROR] âŒ Error updating financial balances for employee 01441633-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:18:35.190Z] [LOG] âœ… Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-03T06:18:35.191Z] [LOG] ğŸ“Š Progress: 26/34 (76.5%)
[2025-10-03T06:18:35.193Z] [LOG] 
ğŸ§® Processing: Prasanthan null (EMP000001)
[2025-10-03T06:18:35.193Z] [LOG] ğŸ“‹ Record ID: d7323b62-874b-43c4-a0b7-3d7c37473a9f
[2025-10-03T06:18:35.910Z] [LOG] ğŸ” Component filtering for employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-03T06:18:35.910Z] [LOG]    Total components: 8
[2025-10-03T06:18:35.911Z] [LOG]    Applicable components: 8
[2025-10-03T06:18:35.911Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-03T06:18:36.823Z] [LOG] ğŸ” Fetched 0 attendance records for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:36.824Z] [LOG] âš ï¸  ATTENTION: Employee 014397c7-7105-11f0-a50f-98e743540430 has NO attendance records in this payroll period!
[2025-10-03T06:18:36.997Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:18:38.048Z] [LOG] Employee 014397c7-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:18:38.048Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8h = 160h
[2025-10-03T06:18:38.049Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:18:38.050Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:18:38.060Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-03T06:18:38.061Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:18:38.061Z] [LOG] ================================================================================
[2025-10-03T06:18:38.061Z] [LOG] ================================================================================
[2025-10-03T06:18:38.062Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:18:38.062Z] [LOG]    Sum of all daily counted hours (rounded): 0h
[2025-10-03T06:18:38.062Z] [LOG]    Expected hours: 160h
[2025-10-03T06:18:38.063Z] [LOG]    Shortfall: 160.00h
[2025-10-03T06:18:38.063Z] [LOG] ================================================================================
[2025-10-03T06:18:38.237Z] [LOG] ğŸ”„ Processing financial records for employee 014397c7-7105-11f0-a50f-98e743540430...
[2025-10-03T06:18:38.238Z] [LOG] ğŸ”„ Processing financial records for employee 014397c7-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:18:38.413Z] [LOG] ğŸ“Š Found 0 active loans for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:38.588Z] [LOG] ğŸ“Š Found 0 active advances for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:38.762Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:38.763Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:18:38.763Z] [LOG] ğŸ’° GROSS CALCULATION for Prasanthan null:
[2025-10-03T06:18:38.763Z] [LOG]    Base Salary: 150000
[2025-10-03T06:18:38.764Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:18:38.940Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:18:39.321Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:18:39.706Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:18:39.883Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:18:40.242Z] [LOG] Employee 014397c7-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:18:40.242Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:18:40.242Z] [LOG] ============================================================
[2025-10-03T06:18:40.242Z] [LOG] ğŸ‘¤ Employee ID: 014397c7-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:40.243Z] [LOG] ğŸ’° Base Salary: 150,000
[2025-10-03T06:18:40.243Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:18:40.243Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:18:40.243Z] [LOG] â° Employee Daily Hours: 8h/day
[2025-10-03T06:18:40.243Z] [LOG] ğŸ’µ Per-Day Salary: 6000.00
[2025-10-03T06:18:40.243Z] [LOG] â±ï¸  Hourly Rate: 750.00
[2025-10-03T06:18:40.243Z] [LOG] 
[2025-10-03T06:18:40.244Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:18:40.244Z] [LOG]    Expected Hours: 160
[2025-10-03T06:18:40.244Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8h = 200.00h
[2025-10-03T06:18:40.244Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:18:40.244Z] [LOG]    Worked Hours: 0
[2025-10-03T06:18:40.244Z] [LOG]    âš ï¸  Shortfall Hours: 160
[2025-10-03T06:18:40.244Z] [LOG]    ğŸ’¸ Shortfall Deduction: 160h Ã— 750.00 = 120000.00
[2025-10-03T06:18:40.245Z] [LOG] ============================================================
[2025-10-03T06:18:41.055Z] [LOG] ğŸ“… Weekend absence check for employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-03T06:18:41.057Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:18:41.058Z] [LOG]    Attended weekend dates: 0 days
[2025-10-03T06:18:41.059Z] [LOG]    Absent weekend dates: 5 days
[2025-10-03T06:18:41.059Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:18:41.060Z] [LOG]    Gross Salary: 150000
[2025-10-03T06:18:41.060Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:18:41.060Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:18:41.060Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:41.061Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:18:41.061Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:41.061Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:18:41.061Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:41.062Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:18:41.062Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:41.062Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:18:41.063Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:41.063Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:18:41.063Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:41.063Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:18:41.064Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:41.064Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:18:41.064Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:41.065Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:18:41.065Z] [LOG] Regular deductions for Prasanthan null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:18:41.065Z] [LOG] Combined deductions for Prasanthan null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 120000,
      "details": "160 hours Ã— 750.00"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 30000,
      "details": "5 weekend days Ã— 6000.00"
    }
  ],
  "total": 150000
}
[2025-10-03T06:18:41.243Z] [LOG] Creating components for record d7323b62-874b-43c4-a0b7-3d7c37473a9f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 1
}
[2025-10-03T06:18:41.245Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 120000
}
[2025-10-03T06:18:41.418Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:18:41.591Z] [LOG] Created payroll_record_component: 9f06a6d9-d797-479f-9141-79aa713a6473 for Working Hours Shortfall
[2025-10-03T06:18:41.592Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 30000
}
[2025-10-03T06:18:41.767Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:18:41.943Z] [LOG] Created payroll_record_component: 7b45b892-15c6-4c41-a1cc-7308f3085f79 for Weekend Absent Days
[2025-10-03T06:18:41.943Z] [LOG] Processing component: {
  "name": "Income Tax",
  "type": "tax",
  "amount": 3000
}
[2025-10-03T06:18:42.118Z] [LOG] Using existing component ID: 72f98b53-4bd5-4713-98d0-e3a641ad8d0f
[2025-10-03T06:18:42.292Z] [LOG] Created payroll_record_component: 3c58d207-0c0f-43f5-83b4-edb6ff685d38 for Income Tax
[2025-10-03T06:18:42.818Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:18:42.829Z] [ERROR] âŒ Error updating financial balances for employee 014397c7-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:18:42.834Z] [LOG] âœ… Prasanthan null: Calculation completed successfully
[2025-10-03T06:18:42.834Z] [LOG] ğŸ“Š Progress: 27/34 (79.4%)
[2025-10-03T06:18:42.834Z] [LOG] 
ğŸ§® Processing: Chamodi null (EMP000032)
[2025-10-03T06:18:42.835Z] [LOG] ğŸ“‹ Record ID: dbd81c55-5ccc-4e7f-8070-41992dfd92ed
[2025-10-03T06:18:43.541Z] [LOG] ğŸ” Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-03T06:18:43.542Z] [LOG]    Total components: 8
[2025-10-03T06:18:43.542Z] [LOG]    Applicable components: 8
[2025-10-03T06:18:43.543Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-03T06:18:44.628Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:45.030Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:45.381Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:45.730Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:46.078Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:46.437Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:47.057Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:47.402Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:47.801Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:48.147Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:48.623Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:48.801Z] [LOG] ğŸ” Fetched 24 attendance records for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:49.040Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:18:49.990Z] [LOG] Employee 0143f302-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:18:49.991Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:18:49.992Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:18:49.993Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:18:49.999Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-03T06:18:50.000Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:18:50.000Z] [LOG] ================================================================================
[2025-10-03T06:18:50.001Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 8.18h worked â†’ 7.4366666666666665h counted â†’ OVERLAP 09:33-17:00 = 7.437h (attendance table)
[2025-10-03T06:18:50.002Z] [LOG]    âœ… Added to weekday total: 7.4366666666666665h
[2025-10-03T06:18:50.005Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 5.82h worked â†’ 3.8194444444444446h counted â†’ OVERLAP 09:10-13:00 = 3.819h (attendance table)
[2025-10-03T06:18:50.008Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.8194444444444446h
[2025-10-03T06:18:50.009Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 8.71h worked â†’ 8.402777777777779h counted â†’ OVERLAP 08:35-17:00 = 8.403h (attendance table)
[2025-10-03T06:18:50.009Z] [LOG]    âœ… Added to weekday total: 8.402777777777779h
[2025-10-03T06:18:50.010Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 8.64h worked â†’ 8.365277777777777h counted â†’ OVERLAP 08:38-17:00 = 8.365h (attendance table)
[2025-10-03T06:18:50.012Z] [LOG]    âœ… Added to weekday total: 8.365277777777777h
[2025-10-03T06:18:50.013Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 10.53h worked â†’ 7.636111111111111h counted â†’ OVERLAP 09:21-17:00 = 7.636h (attendance table)
[2025-10-03T06:18:50.014Z] [LOG]    âœ… Added to weekday total: 7.636111111111111h
[2025-10-03T06:18:50.015Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 8.67h worked â†’ 8.16611111111111h counted â†’ OVERLAP 08:50-17:00 = 8.166h (attendance table)
[2025-10-03T06:18:50.016Z] [LOG]    âœ… Added to weekday total: 8.16611111111111h
[2025-10-03T06:18:50.017Z] [LOG] ğŸ“… 2025-08-09 (WEEKEND): 4.83h worked â†’ 3.433611111111111h counted â†’ OVERLAP 09:33-13:00 = 3.434h (attendance table)
[2025-10-03T06:18:50.017Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.433611111111111h
[2025-10-03T06:18:50.018Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 8h worked â†’ 8h counted â†’ OVERLAP 09:00-17:00 = 8.000h (attendance table)
[2025-10-03T06:18:50.019Z] [LOG]    âœ… Added to weekday total: 8h
[2025-10-03T06:18:50.019Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 8.8h worked â†’ 7.175833333333333h counted â†’ OVERLAP 09:49-17:00 = 7.176h (attendance table)
[2025-10-03T06:18:50.020Z] [LOG]    âœ… Added to weekday total: 7.175833333333333h
[2025-10-03T06:18:50.021Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 8.37h worked â†’ 7.7908333333333335h counted â†’ OVERLAP 09:12-17:00 = 7.791h (attendance table)
[2025-10-03T06:18:50.022Z] [LOG]    âœ… Added to weekday total: 7.7908333333333335h
[2025-10-03T06:18:50.025Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 7.53h worked â†’ 7.523333333333333h counted â†’ OVERLAP 09:28-17:00 = 7.523h (attendance table)
[2025-10-03T06:18:50.026Z] [LOG]    âœ… Added to weekday total: 7.523333333333333h
[2025-10-03T06:18:50.029Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 8.19h worked â†’ 8.076666666666666h counted â†’ OVERLAP 08:55-17:00 = 8.077h (attendance table)
[2025-10-03T06:18:50.030Z] [LOG]    âœ… Added to weekday total: 8.076666666666666h
[2025-10-03T06:18:50.031Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 3.89h worked â†’ 3.3933333333333335h counted â†’ OVERLAP 09:36-13:00 = 3.393h (attendance table)
[2025-10-03T06:18:50.031Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.3933333333333335h
[2025-10-03T06:18:50.031Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 7.87h worked â†’ 7.778333333333333h counted â†’ OVERLAP 09:13-17:00 = 7.778h (attendance table)
[2025-10-03T06:18:50.032Z] [LOG]    âœ… Added to weekday total: 7.778333333333333h
[2025-10-03T06:18:50.032Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 10.33h worked â†’ 7.833333333333333h counted â†’ OVERLAP 09:10-17:00 = 7.833h (attendance table)
[2025-10-03T06:18:50.032Z] [LOG]    âœ… Added to weekday total: 7.833333333333333h
[2025-10-03T06:18:50.032Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 8.42h worked â†’ 8.345277777777778h counted â†’ OVERLAP 08:39-17:00 = 8.345h (attendance table)
[2025-10-03T06:18:50.033Z] [LOG]    âœ… Added to weekday total: 8.345277777777778h
[2025-10-03T06:18:50.033Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 7.41h worked â†’ 7.243055555555555h counted â†’ OVERLAP 09:45-17:00 = 7.243h (attendance table)
[2025-10-03T06:18:50.033Z] [LOG]    âœ… Added to weekday total: 7.243055555555555h
[2025-10-03T06:18:50.033Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 4.31h worked â†’ 3.9466666666666668h counted â†’ OVERLAP 09:03-13:00 = 3.947h (attendance table)
[2025-10-03T06:18:50.034Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.9466666666666668h
[2025-10-03T06:18:50.034Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 9.1h worked â†’ 8.103055555555555h counted â†’ OVERLAP 08:53-17:00 = 8.103h (attendance table)
[2025-10-03T06:18:50.034Z] [LOG]    âœ… Added to weekday total: 8.103055555555555h
[2025-10-03T06:18:50.035Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 8.11h worked â†’ 7.995555555555556h counted â†’ OVERLAP 09:00-17:00 = 7.996h (attendance table)
[2025-10-03T06:18:50.035Z] [LOG]    âœ… Added to weekday total: 7.995555555555556h
[2025-10-03T06:18:50.035Z] [LOG] ğŸ“… 2025-08-27 (WEEKDAY): 9.4h worked â†’ 8.18361111111111h counted â†’ OVERLAP 08:48-17:00 = 8.184h (attendance table)
[2025-10-03T06:18:50.035Z] [LOG]    âœ… Added to weekday total: 8.18361111111111h
[2025-10-03T06:18:50.036Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 8.19h worked â†’ 8.159722222222221h counted â†’ OVERLAP 08:50-17:00 = 8.160h (attendance table)
[2025-10-03T06:18:50.036Z] [LOG]    âœ… Added to weekday total: 8.159722222222221h
[2025-10-03T06:18:50.036Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 8.8h worked â†’ 7.876666666666667h counted â†’ OVERLAP 09:07-17:00 = 7.877h (attendance table)
[2025-10-03T06:18:50.036Z] [LOG]    âœ… Added to weekday total: 7.876666666666667h
[2025-10-03T06:18:50.036Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 5.04h worked â†’ 3.5008333333333335h counted â†’ OVERLAP 09:29-13:00 = 3.501h (attendance table)
[2025-10-03T06:18:50.037Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.5008333333333335h
[2025-10-03T06:18:50.037Z] [LOG] ================================================================================
[2025-10-03T06:18:50.037Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:18:50.037Z] [LOG]    Sum of all daily counted hours (rounded): 150.0922h
[2025-10-03T06:18:50.038Z] [LOG]    Expected hours: 170h
[2025-10-03T06:18:50.038Z] [LOG]    Shortfall: 19.91h
[2025-10-03T06:18:50.038Z] [LOG] ================================================================================
[2025-10-03T06:18:50.217Z] [LOG] ğŸ”„ Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430...
[2025-10-03T06:18:50.218Z] [LOG] ğŸ”„ Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:18:50.395Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:50.695Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:50.927Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:50.927Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:18:50.928Z] [LOG] ğŸ’° GROSS CALCULATION for Chamodi null:
[2025-10-03T06:18:50.928Z] [LOG]    Base Salary: 50000
[2025-10-03T06:18:50.929Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:18:51.114Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:18:51.474Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:18:51.822Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:18:51.999Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:18:52.181Z] [LOG] Employee 0143f302-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:18:52.181Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:18:52.182Z] [LOG] ============================================================
[2025-10-03T06:18:52.182Z] [LOG] ğŸ‘¤ Employee ID: 0143f302-7105-11f0-a50f-98e743540430
[2025-10-03T06:18:52.183Z] [LOG] ğŸ’° Base Salary: 50,000
[2025-10-03T06:18:52.183Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:18:52.183Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:18:52.184Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:18:52.184Z] [LOG] ğŸ’µ Per-Day Salary: 2000.00
[2025-10-03T06:18:52.184Z] [LOG] â±ï¸  Hourly Rate: 235.29
[2025-10-03T06:18:52.185Z] [LOG] 
[2025-10-03T06:18:52.185Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:18:52.185Z] [LOG]    Expected Hours: 170
[2025-10-03T06:18:52.186Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:18:52.186Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:18:52.187Z] [LOG]    Worked Hours: 150.0922
[2025-10-03T06:18:52.188Z] [LOG]    âš ï¸  Shortfall Hours: 19.90780000000001
[2025-10-03T06:18:52.188Z] [LOG]    ğŸ’¸ Shortfall Deduction: 19.90780000000001h Ã— 235.29 = 4684.19
[2025-10-03T06:18:52.188Z] [LOG] ============================================================
[2025-10-03T06:18:52.548Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-02 (Saturday)
[2025-10-03T06:18:52.549Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:18:52.550Z] [LOG]    Actual: 09:10:50 - 15:00:00
[2025-10-03T06:18:52.550Z] [LOG]    Calculation: OVERLAP 09:10-13:00 = 3.819h
[2025-10-03T06:18:52.550Z] [LOG]    Payable Hours: 3.819h
[2025-10-03T06:18:52.551Z] [LOG]    Shortfall: 0.681h
[2025-10-03T06:18:52.551Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:18:52.551Z] [LOG]    Deduction: 302.47
[2025-10-03T06:18:52.552Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-09 (Saturday)
[2025-10-03T06:18:52.553Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:18:52.553Z] [LOG]    Actual: 09:33:59 - 14:23:29
[2025-10-03T06:18:52.554Z] [LOG]    Calculation: OVERLAP 09:33-13:00 = 3.434h
[2025-10-03T06:18:52.555Z] [LOG]    Payable Hours: 3.434h
[2025-10-03T06:18:52.555Z] [LOG]    Shortfall: 1.066h
[2025-10-03T06:18:52.557Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:18:52.558Z] [LOG]    Deduction: 473.95
[2025-10-03T06:18:52.558Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-16 (Saturday)
[2025-10-03T06:18:52.559Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:18:52.561Z] [LOG]    Actual: 09:36:24 - 13:30:00
[2025-10-03T06:18:52.564Z] [LOG]    Calculation: OVERLAP 09:36-13:00 = 3.393h
[2025-10-03T06:18:52.565Z] [LOG]    Payable Hours: 3.393h
[2025-10-03T06:18:52.566Z] [LOG]    Shortfall: 1.107h
[2025-10-03T06:18:52.567Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:18:52.567Z] [LOG]    Deduction: 491.85
[2025-10-03T06:18:52.568Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-23 (Saturday)
[2025-10-03T06:18:52.568Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:18:52.568Z] [LOG]    Actual: 09:03:12 - 13:21:33
[2025-10-03T06:18:52.568Z] [LOG]    Calculation: OVERLAP 09:03-13:00 = 3.947h
[2025-10-03T06:18:52.568Z] [LOG]    Payable Hours: 3.947h
[2025-10-03T06:18:52.569Z] [LOG]    Shortfall: 0.553h
[2025-10-03T06:18:52.569Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:18:52.570Z] [LOG]    Deduction: 245.93
[2025-10-03T06:18:52.570Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-30 (Saturday)
[2025-10-03T06:18:52.571Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:18:52.571Z] [LOG]    Actual: 09:29:57 - 14:32:03
[2025-10-03T06:18:52.572Z] [LOG]    Calculation: OVERLAP 09:29-13:00 = 3.501h
[2025-10-03T06:18:52.574Z] [LOG]    Payable Hours: 3.501h
[2025-10-03T06:18:52.574Z] [LOG]    Shortfall: 0.999h
[2025-10-03T06:18:52.574Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:18:52.576Z] [LOG]    Deduction: 444.07
[2025-10-03T06:18:52.927Z] [LOG] ğŸ“… Weekend absence check for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-03T06:18:52.927Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:18:52.927Z] [LOG]    Attended weekend dates: 5 days
[2025-10-03T06:18:52.927Z] [LOG]    Absent weekend dates: 0 days
[2025-10-03T06:18:52.927Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:18:52.928Z] [LOG]    Gross Salary: 50000
[2025-10-03T06:18:52.928Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:18:52.928Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:18:52.928Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:52.928Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:18:52.928Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:52.929Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:18:52.929Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:52.929Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:18:52.929Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:52.929Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:18:52.929Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:52.930Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:18:52.930Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:52.930Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:18:52.930Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:52.930Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:18:52.930Z] [LOG]    Fixed amount: 0
[2025-10-03T06:18:52.931Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:18:52.931Z] [LOG] Regular deductions for Chamodi null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:18:52.931Z] [LOG] Combined deductions for Chamodi null: {
  "components": [
    {
      "code": "WEEKEND_SHORTFALL",
      "name": "Weekend Shortfall Deduction",
      "type": "deduction",
      "category": "other",
      "amount": 1958.2716049382716,
      "details": "Total 4.41h shortfall - 2025-08-02 (Saturday): 0.68h, 2025-08-09 (Saturday): 1.07h, 2025-08-16 (Saturday): 1.11h, 2025-08-23 (Saturday): 0.55h, 2025-08-30 (Saturday): 1.00h"
    },
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 4684.188235294119,
      "details": "19.90780000000001 hours Ã— 235.29"
    },
    {
      "code": "UNPAID_LEAVE_DED",
      "name": "Unpaid Leave Deduction",
      "type": "deduction",
      "category": "other",
      "amount": 2000,
      "details": "1 days Ã— 2000.00"
    }
  ],
  "total": 8642.45984023239
}
[2025-10-03T06:18:53.107Z] [LOG] Creating components for record dbd81c55-5ccc-4e7f-8070-41992dfd92ed: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 3,
  "taxComponentsCount": 0
}
[2025-10-03T06:18:53.109Z] [LOG] Processing component: {
  "name": "Weekend Shortfall Deduction",
  "type": "deduction",
  "amount": 1958.2716049382716
}
[2025-10-03T06:18:53.282Z] [LOG] Using existing component ID: 106fdfbf-ee30-432b-8a98-9c8f6cef1ae1
[2025-10-03T06:18:53.469Z] [LOG] Created payroll_record_component: 6de55645-7702-434e-b020-64fca02611f9 for Weekend Shortfall Deduction
[2025-10-03T06:18:53.469Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 4684.188235294119
}
[2025-10-03T06:18:53.643Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:18:53.818Z] [LOG] Created payroll_record_component: c21f56e0-6ec0-46a2-8adc-fc63d9a3a170 for Working Hours Shortfall
[2025-10-03T06:18:53.818Z] [LOG] Processing component: {
  "name": "Unpaid Leave Deduction",
  "type": "deduction",
  "amount": 2000
}
[2025-10-03T06:18:53.993Z] [LOG] Using existing component ID: 1a397582-7863-4ef5-ac40-8d540b85bd0c
[2025-10-03T06:18:54.167Z] [LOG] Created payroll_record_component: 75687ffe-1f58-4deb-a526-adcd0d6e26cd for Unpaid Leave Deduction
[2025-10-03T06:18:54.706Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:18:54.709Z] [ERROR] âŒ Error updating financial balances for employee 0143f302-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:18:54.712Z] [LOG] âœ… Chamodi null: Calculation completed successfully
[2025-10-03T06:18:54.712Z] [LOG] ğŸ“Š Progress: 28/34 (82.4%)
[2025-10-03T06:18:54.712Z] [LOG] 
ğŸ§® Processing: Safna Nawas null (EMP000021)
[2025-10-03T06:18:54.713Z] [LOG] ğŸ“‹ Record ID: dbebc4fe-51f0-49bf-bab7-4230398b7daa
[2025-10-03T06:18:55.415Z] [LOG] ğŸ” Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-03T06:18:55.416Z] [LOG]    Total components: 8
[2025-10-03T06:18:55.416Z] [LOG]    Applicable components: 8
[2025-10-03T06:18:55.416Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-03T06:18:56.467Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:56.818Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:57.165Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:57.514Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:57.871Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:58.222Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:58.574Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:58.925Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:59.271Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:59.614Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:18:59.958Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:00.368Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:00.715Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:01.071Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:01.416Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:01.591Z] [LOG] ğŸ” Fetched 23 attendance records for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:01.765Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:19:02.656Z] [LOG] Employee 0143c977-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:19:02.656Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:19:02.657Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:19:02.657Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:19:02.659Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-03T06:19:02.660Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:19:02.660Z] [LOG] ================================================================================
[2025-10-03T06:19:02.661Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 9.95h worked â†’ 7.495555555555556h counted â†’ OVERLAP 09:30-17:00 = 7.496h (attendance table)
[2025-10-03T06:19:02.662Z] [LOG]    âœ… Added to weekday total: 7.495555555555556h
[2025-10-03T06:19:02.662Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 4.12h worked â†’ 2.265833333333333h counted â†’ OVERLAP 10:44-13:00 = 2.266h (attendance table)
[2025-10-03T06:19:02.663Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 2.265833333333333h
[2025-10-03T06:19:02.663Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 9.1h worked â†’ 8.166666666666666h counted â†’ OVERLAP 08:50-17:00 = 8.167h (attendance table)
[2025-10-03T06:19:02.665Z] [LOG]    âœ… Added to weekday total: 8.166666666666666h
[2025-10-03T06:19:02.666Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 7.41h worked â†’ 6.909166666666667h counted â†’ OVERLAP 10:05-17:00 = 6.909h (attendance table)
[2025-10-03T06:19:02.666Z] [LOG]    âœ… Added to weekday total: 6.909166666666667h
[2025-10-03T06:19:02.667Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 11.23h worked â†’ 8.142777777777777h counted â†’ OVERLAP 08:51-17:00 = 8.143h (attendance table)
[2025-10-03T06:19:02.667Z] [LOG]    âœ… Added to weekday total: 8.142777777777777h
[2025-10-03T06:19:02.667Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 10.44h worked â†’ 8.013333333333334h counted â†’ OVERLAP 08:59-17:00 = 8.013h (attendance table)
[2025-10-03T06:19:02.668Z] [LOG]    âœ… Added to weekday total: 8.013333333333334h
[2025-10-03T06:19:02.668Z] [LOG] ğŸ“… 2025-08-09 (WEEKEND): 5.17h worked â†’ 3.1666666666666665h counted â†’ OVERLAP 09:50-13:00 = 3.167h (attendance table)
[2025-10-03T06:19:02.668Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.1666666666666665h
[2025-10-03T06:19:02.668Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 9.29h worked â†’ 8.293888888888889h counted â†’ OVERLAP 08:42-17:00 = 8.294h (attendance table)
[2025-10-03T06:19:02.669Z] [LOG]    âœ… Added to weekday total: 8.293888888888889h
[2025-10-03T06:19:02.669Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 9.75h worked â†’ 6.25h counted â†’ OVERLAP 10:45-17:00 = 6.250h (attendance table)
[2025-10-03T06:19:02.669Z] [LOG]    âœ… Added to weekday total: 6.25h
[2025-10-03T06:19:02.669Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 8.83h worked â†’ 8.333333333333334h counted â†’ OVERLAP 08:40-17:00 = 8.333h (attendance table)
[2025-10-03T06:19:02.670Z] [LOG]    âœ… Added to weekday total: 8.333333333333334h
[2025-10-03T06:19:02.670Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 8.21h worked â†’ 8.205555555555556h counted â†’ OVERLAP 08:47-17:00 = 8.206h (attendance table)
[2025-10-03T06:19:02.670Z] [LOG]    âœ… Added to weekday total: 8.205555555555556h
[2025-10-03T06:19:02.670Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 11.61h worked â†’ 8.061388888888889h counted â†’ OVERLAP 08:56-17:00 = 8.061h (attendance table)
[2025-10-03T06:19:02.670Z] [LOG]    âœ… Added to weekday total: 8.061388888888889h
[2025-10-03T06:19:02.671Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 8.4h worked â†’ 4.3975h counted â†’ OVERLAP 08:36-13:00 = 4.397h (attendance table)
[2025-10-03T06:19:02.671Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.3975h
[2025-10-03T06:19:02.671Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 8.69h worked â†’ 8.311944444444444h counted â†’ OVERLAP 08:41-17:00 = 8.312h (attendance table)
[2025-10-03T06:19:02.671Z] [LOG]    âœ… Added to weekday total: 8.311944444444444h
[2025-10-03T06:19:02.672Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 10.32h worked â†’ 7.75h counted â†’ OVERLAP 09:15-17:00 = 7.750h (attendance table)
[2025-10-03T06:19:02.673Z] [LOG]    âœ… Added to weekday total: 7.75h
[2025-10-03T06:19:02.673Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 10.43h worked â†’ 8.25h counted â†’ OVERLAP 08:45-17:00 = 8.250h (attendance table)
[2025-10-03T06:19:02.673Z] [LOG]    âœ… Added to weekday total: 8.25h
[2025-10-03T06:19:02.673Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 9.18h worked â†’ 8h counted â†’ OVERLAP 09:00-17:00 = 8.000h (attendance table)
[2025-10-03T06:19:02.674Z] [LOG]    âœ… Added to weekday total: 8h
[2025-10-03T06:19:02.675Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 6.24h worked â†’ 4.125555555555556h counted â†’ OVERLAP 08:52-13:00 = 4.126h (attendance table)
[2025-10-03T06:19:02.675Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.125555555555556h
[2025-10-03T06:19:02.676Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 9.5h worked â†’ 8.395h counted â†’ OVERLAP 08:36-17:00 = 8.395h (attendance table)
[2025-10-03T06:19:02.676Z] [LOG]    âœ… Added to weekday total: 8.395h
[2025-10-03T06:19:02.677Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 7.84h worked â†’ 7.3375h counted â†’ OVERLAP 09:39-17:00 = 7.338h (attendance table)
[2025-10-03T06:19:02.677Z] [LOG]    âœ… Added to weekday total: 7.3375h
[2025-10-03T06:19:02.677Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 8.35h worked â†’ 6.847222222222222h counted â†’ OVERLAP 10:09-17:00 = 6.847h (attendance table)
[2025-10-03T06:19:02.678Z] [LOG]    âœ… Added to weekday total: 6.847222222222222h
[2025-10-03T06:19:02.678Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 8.76h worked â†’ 8.26388888888889h counted â†’ OVERLAP 08:44-17:00 = 8.264h (attendance table)
[2025-10-03T06:19:02.678Z] [LOG]    âœ… Added to weekday total: 8.26388888888889h
[2025-10-03T06:19:02.678Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 3.5h worked â†’ 3.5h counted â†’ OVERLAP 09:30-13:00 = 3.500h (attendance table)
[2025-10-03T06:19:02.678Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.5h
[2025-10-03T06:19:02.679Z] [LOG] ================================================================================
[2025-10-03T06:19:02.679Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:19:02.679Z] [LOG]    Sum of all daily counted hours (rounded): 141.0272h
[2025-10-03T06:19:02.679Z] [LOG]    Expected hours: 170h
[2025-10-03T06:19:02.680Z] [LOG]    Shortfall: 28.97h
[2025-10-03T06:19:02.680Z] [LOG] ================================================================================
[2025-10-03T06:19:02.861Z] [LOG] ğŸ”„ Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430...
[2025-10-03T06:19:02.861Z] [LOG] ğŸ”„ Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:19:03.037Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:03.215Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:03.406Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:03.406Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:19:03.407Z] [LOG] ğŸ’° GROSS CALCULATION for Safna Nawas null:
[2025-10-03T06:19:03.407Z] [LOG]    Base Salary: 50000
[2025-10-03T06:19:03.407Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:19:03.581Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:19:03.930Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:19:04.282Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:19:04.459Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:19:04.639Z] [LOG] Employee 0143c977-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:19:04.641Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:19:04.641Z] [LOG] ============================================================
[2025-10-03T06:19:04.642Z] [LOG] ğŸ‘¤ Employee ID: 0143c977-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:04.642Z] [LOG] ğŸ’° Base Salary: 50,000
[2025-10-03T06:19:04.643Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:19:04.643Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:19:04.644Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:19:04.645Z] [LOG] ğŸ’µ Per-Day Salary: 2000.00
[2025-10-03T06:19:04.645Z] [LOG] â±ï¸  Hourly Rate: 235.29
[2025-10-03T06:19:04.646Z] [LOG] 
[2025-10-03T06:19:04.646Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:19:04.647Z] [LOG]    Expected Hours: 170
[2025-10-03T06:19:04.648Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:19:04.649Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:19:04.649Z] [LOG]    Worked Hours: 141.0272
[2025-10-03T06:19:04.650Z] [LOG]    âš ï¸  Shortfall Hours: 28.972800000000007
[2025-10-03T06:19:04.654Z] [LOG]    ğŸ’¸ Shortfall Deduction: 28.972800000000007h Ã— 235.29 = 6817.13
[2025-10-03T06:19:04.655Z] [LOG] ============================================================
[2025-10-03T06:19:05.008Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-02 (Saturday)
[2025-10-03T06:19:05.009Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:19:05.010Z] [LOG]    Actual: 10:44:03 - 14:51:25
[2025-10-03T06:19:05.010Z] [LOG]    Calculation: OVERLAP 10:44-13:00 = 2.266h
[2025-10-03T06:19:05.011Z] [LOG]    Payable Hours: 2.266h
[2025-10-03T06:19:05.011Z] [LOG]    Shortfall: 2.234h
[2025-10-03T06:19:05.012Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:19:05.012Z] [LOG]    Deduction: 992.96
[2025-10-03T06:19:05.013Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-09 (Saturday)
[2025-10-03T06:19:05.014Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:19:05.014Z] [LOG]    Actual: 09:50:00 - 15:00:00
[2025-10-03T06:19:05.015Z] [LOG]    Calculation: OVERLAP 09:50-13:00 = 3.167h
[2025-10-03T06:19:05.016Z] [LOG]    Payable Hours: 3.167h
[2025-10-03T06:19:05.016Z] [LOG]    Shortfall: 1.333h
[2025-10-03T06:19:05.017Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:19:05.017Z] [LOG]    Deduction: 592.59
[2025-10-03T06:19:05.018Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-16 (Saturday)
[2025-10-03T06:19:05.019Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:19:05.024Z] [LOG]    Actual: 08:36:09 - 17:00:00
[2025-10-03T06:19:05.025Z] [LOG]    Calculation: OVERLAP 08:36-13:00 = 4.397h
[2025-10-03T06:19:05.026Z] [LOG]    Payable Hours: 4.397h
[2025-10-03T06:19:05.026Z] [LOG]    Shortfall: 0.103h
[2025-10-03T06:19:05.027Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:19:05.029Z] [LOG]    Deduction: 45.56
[2025-10-03T06:19:05.029Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-23 (Saturday)
[2025-10-03T06:19:05.030Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:19:05.030Z] [LOG]    Actual: 08:52:28 - 15:07:00
[2025-10-03T06:19:05.031Z] [LOG]    Calculation: OVERLAP 08:52-13:00 = 4.126h
[2025-10-03T06:19:05.031Z] [LOG]    Payable Hours: 4.126h
[2025-10-03T06:19:05.031Z] [LOG]    Shortfall: 0.374h
[2025-10-03T06:19:05.031Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:19:05.032Z] [LOG]    Deduction: 166.42
[2025-10-03T06:19:05.032Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-30 (Saturday)
[2025-10-03T06:19:05.032Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:19:05.033Z] [LOG]    Actual: 09:30:00 - 13:00:00
[2025-10-03T06:19:05.033Z] [LOG]    Calculation: OVERLAP 09:30-13:00 = 3.500h
[2025-10-03T06:19:05.033Z] [LOG]    Payable Hours: 3.500h
[2025-10-03T06:19:05.034Z] [LOG]    Shortfall: 1.000h
[2025-10-03T06:19:05.034Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:19:05.034Z] [LOG]    Deduction: 444.44
[2025-10-03T06:19:05.381Z] [LOG] ğŸ“… Weekend absence check for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-03T06:19:05.381Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:19:05.381Z] [LOG]    Attended weekend dates: 5 days
[2025-10-03T06:19:05.382Z] [LOG]    Absent weekend dates: 0 days
[2025-10-03T06:19:05.382Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:19:05.382Z] [LOG]    Gross Salary: 50000
[2025-10-03T06:19:05.382Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:19:05.382Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:19:05.382Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:05.383Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:19:05.383Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:05.383Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:19:05.383Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:05.383Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:19:05.384Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:05.384Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:19:05.384Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:05.384Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:19:05.384Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:05.384Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:19:05.385Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:05.385Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:19:05.385Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:05.385Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:19:05.385Z] [LOG] Regular deductions for Safna Nawas null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:19:05.386Z] [LOG] Combined deductions for Safna Nawas null: {
  "components": [
    {
      "code": "WEEKEND_SHORTFALL",
      "name": "Weekend Shortfall Deduction",
      "type": "deduction",
      "category": "other",
      "amount": 2241.9753086419755,
      "details": "Total 5.04h shortfall - 2025-08-02 (Saturday): 2.23h, 2025-08-09 (Saturday): 1.33h, 2025-08-16 (Saturday): 0.10h, 2025-08-23 (Saturday): 0.37h, 2025-08-30 (Saturday): 1.00h"
    },
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 6817.129411764707,
      "details": "28.972800000000007 hours Ã— 235.29"
    }
  ],
  "total": 9059.104720406682
}
[2025-10-03T06:19:05.572Z] [LOG] Creating components for record dbebc4fe-51f0-49bf-bab7-4230398b7daa: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:19:05.575Z] [LOG] Processing component: {
  "name": "Weekend Shortfall Deduction",
  "type": "deduction",
  "amount": 2241.9753086419755
}
[2025-10-03T06:19:05.750Z] [LOG] Using existing component ID: 106fdfbf-ee30-432b-8a98-9c8f6cef1ae1
[2025-10-03T06:19:05.943Z] [LOG] Created payroll_record_component: 4c96f400-8e88-41b2-b99b-0018ade9e9d2 for Weekend Shortfall Deduction
[2025-10-03T06:19:05.943Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 6817.129411764707
}
[2025-10-03T06:19:06.117Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:19:06.303Z] [LOG] Created payroll_record_component: 50226abf-47b3-4cab-8831-b4c542d96b9f for Working Hours Shortfall
[2025-10-03T06:19:06.827Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:19:06.834Z] [ERROR] âŒ Error updating financial balances for employee 0143c977-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:19:06.847Z] [LOG] âœ… Safna Nawas null: Calculation completed successfully
[2025-10-03T06:19:06.849Z] [LOG] ğŸ“Š Progress: 29/34 (85.3%)
[2025-10-03T06:19:06.849Z] [LOG] 
ğŸ§® Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-03T06:19:06.850Z] [LOG] ğŸ“‹ Record ID: dc7c0f79-fe6e-40ee-9480-7c439fc71a2e
[2025-10-03T06:19:07.548Z] [LOG] ğŸ” Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-03T06:19:07.549Z] [LOG]    Total components: 8
[2025-10-03T06:19:07.549Z] [LOG]    Applicable components: 8
[2025-10-03T06:19:07.549Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-03T06:19:08.428Z] [LOG] ğŸ” Fetched 0 attendance records for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:08.429Z] [LOG] âš ï¸  ATTENTION: Employee 0144315c-7105-11f0-a50f-98e743540430 has NO attendance records in this payroll period!
[2025-10-03T06:19:08.602Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:19:09.648Z] [LOG] Employee 0144315c-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:19:09.648Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8h = 160h
[2025-10-03T06:19:09.649Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:19:09.649Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:19:09.651Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-03T06:19:09.651Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:19:09.651Z] [LOG] ================================================================================
[2025-10-03T06:19:09.651Z] [LOG] ================================================================================
[2025-10-03T06:19:09.651Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:19:09.652Z] [LOG]    Sum of all daily counted hours (rounded): 0h
[2025-10-03T06:19:09.652Z] [LOG]    Expected hours: 160h
[2025-10-03T06:19:09.652Z] [LOG]    Shortfall: 160.00h
[2025-10-03T06:19:09.652Z] [LOG] ================================================================================
[2025-10-03T06:19:09.827Z] [LOG] ğŸ”„ Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430...
[2025-10-03T06:19:09.828Z] [LOG] ğŸ”„ Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:19:10.000Z] [LOG] ğŸ“Š Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:10.175Z] [LOG] ğŸ“Š Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:10.349Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:10.350Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:19:10.351Z] [LOG] ğŸ’° GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-03T06:19:10.351Z] [LOG]    Base Salary: 50000
[2025-10-03T06:19:10.352Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:19:10.528Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:19:10.880Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:19:11.233Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:19:11.407Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:19:11.758Z] [LOG] Employee 0144315c-7105-11f0-a50f-98e743540430 has no attendance records with scheduled times for period 2025-08-01 to 2025-08-31, using default: 8h
[2025-10-03T06:19:11.759Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:19:11.759Z] [LOG] ============================================================
[2025-10-03T06:19:11.760Z] [LOG] ğŸ‘¤ Employee ID: 0144315c-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:11.761Z] [LOG] ğŸ’° Base Salary: 50,000
[2025-10-03T06:19:11.761Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:19:11.762Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:19:11.762Z] [LOG] â° Employee Daily Hours: 8h/day
[2025-10-03T06:19:11.763Z] [LOG] ğŸ’µ Per-Day Salary: 2000.00
[2025-10-03T06:19:11.763Z] [LOG] â±ï¸  Hourly Rate: 250.00
[2025-10-03T06:19:11.764Z] [LOG] 
[2025-10-03T06:19:11.765Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:19:11.766Z] [LOG]    Expected Hours: 160
[2025-10-03T06:19:11.767Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8h = 200.00h
[2025-10-03T06:19:11.767Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:19:11.768Z] [LOG]    Worked Hours: 0
[2025-10-03T06:19:11.769Z] [LOG]    âš ï¸  Shortfall Hours: 160
[2025-10-03T06:19:11.770Z] [LOG]    ğŸ’¸ Shortfall Deduction: 160h Ã— 250.00 = 40000.00
[2025-10-03T06:19:11.770Z] [LOG] ============================================================
[2025-10-03T06:19:12.474Z] [LOG] ğŸ“… Weekend absence check for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-03T06:19:12.475Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:19:12.475Z] [LOG]    Attended weekend dates: 0 days
[2025-10-03T06:19:12.475Z] [LOG]    Absent weekend dates: 5 days
[2025-10-03T06:19:12.475Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:19:12.476Z] [LOG]    Gross Salary: 50000
[2025-10-03T06:19:12.476Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:19:12.476Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:19:12.476Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:12.477Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:19:12.477Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:12.477Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:19:12.477Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:12.477Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:19:12.478Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:12.478Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:19:12.478Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:12.478Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:19:12.479Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:12.479Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:19:12.479Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:12.479Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:19:12.480Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:12.480Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:19:12.480Z] [LOG] Regular deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:19:12.481Z] [LOG] Combined deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 40000,
      "details": "160 hours Ã— 250.00"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 10000,
      "details": "5 weekend days Ã— 2000.00"
    }
  ],
  "total": 50000
}
[2025-10-03T06:19:12.659Z] [LOG] Creating components for record dc7c0f79-fe6e-40ee-9480-7c439fc71a2e: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 2,
  "taxComponentsCount": 0
}
[2025-10-03T06:19:12.659Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 40000
}
[2025-10-03T06:19:12.836Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:19:13.017Z] [LOG] Created payroll_record_component: 08a8b9de-1e90-479a-b42d-bd80381eb1a2 for Working Hours Shortfall
[2025-10-03T06:19:13.018Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 10000
}
[2025-10-03T06:19:13.196Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:19:13.374Z] [LOG] Created payroll_record_component: b7eb93bb-f78c-4cfc-9e0f-24e0caecee6c for Weekend Absent Days
[2025-10-03T06:19:13.898Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:19:13.901Z] [ERROR] âŒ Error updating financial balances for employee 0144315c-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:19:13.903Z] [LOG] âœ… G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-03T06:19:13.903Z] [LOG] ğŸ“Š Progress: 30/34 (88.2%)
[2025-10-03T06:19:13.904Z] [LOG] 
ğŸ§® Processing: Sithira null (EMP000039)
[2025-10-03T06:19:13.904Z] [LOG] ğŸ“‹ Record ID: df9d5af4-4409-4b22-bca4-e997ae52c6fa
[2025-10-03T06:19:14.614Z] [LOG] ğŸ” Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-03T06:19:14.615Z] [LOG]    Total components: 8
[2025-10-03T06:19:14.615Z] [LOG]    Applicable components: 8
[2025-10-03T06:19:14.616Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-03T06:19:15.669Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:16.016Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:16.381Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:16.732Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:17.081Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:17.442Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:17.890Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:18.312Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:18.667Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:19.038Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:19.217Z] [LOG] ğŸ” Fetched 21 attendance records for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:19.394Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:19:20.280Z] [LOG] Employee 01441e19-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:19:20.281Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:19:20.282Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:19:20.283Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:19:20.295Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-03T06:19:20.296Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:19:20.297Z] [LOG] ================================================================================
[2025-10-03T06:19:20.298Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 8.54h worked â†’ 8.376388888888888h counted â†’ OVERLAP 08:37-17:00 = 8.376h (attendance table)
[2025-10-03T06:19:20.299Z] [LOG]    âœ… Added to weekday total: 8.376388888888888h
[2025-10-03T06:19:20.299Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 5.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:19:20.300Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:19:20.301Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 8.54h worked â†’ 8.489166666666666h counted â†’ OVERLAP 08:30-17:00 = 8.489h (attendance table)
[2025-10-03T06:19:20.301Z] [LOG]    âœ… Added to weekday total: 8.489166666666666h
[2025-10-03T06:19:20.302Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 8.49h worked â†’ 7.819166666666667h counted â†’ OVERLAP 09:10-17:00 = 7.819h (attendance table)
[2025-10-03T06:19:20.303Z] [LOG]    âœ… Added to weekday total: 7.819166666666667h
[2025-10-03T06:19:20.303Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 7.95h worked â†’ 6.6786111111111115h counted â†’ OVERLAP 10:19-17:00 = 6.679h (attendance table)
[2025-10-03T06:19:20.304Z] [LOG]    âœ… Added to weekday total: 6.6786111111111115h
[2025-10-03T06:19:20.305Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 9.31h worked â†’ 8.30888888888889h counted â†’ OVERLAP 08:41-17:00 = 8.309h (attendance table)
[2025-10-03T06:19:20.305Z] [LOG]    âœ… Added to weekday total: 8.30888888888889h
[2025-10-03T06:19:20.308Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 8.08h worked â†’ 7.833333333333333h counted â†’ OVERLAP 09:10-17:00 = 7.833h (attendance table)
[2025-10-03T06:19:20.309Z] [LOG]    âœ… Added to weekday total: 7.833333333333333h
[2025-10-03T06:19:20.309Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 9.65h worked â†’ 8.151388888888889h counted â†’ OVERLAP 08:50-17:00 = 8.151h (attendance table)
[2025-10-03T06:19:20.311Z] [LOG]    âœ… Added to weekday total: 8.151388888888889h
[2025-10-03T06:19:20.312Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 8.22h worked â†’ 7.716666666666667h counted â†’ OVERLAP 09:17-17:00 = 7.717h (attendance table)
[2025-10-03T06:19:20.312Z] [LOG]    âœ… Added to weekday total: 7.716666666666667h
[2025-10-03T06:19:20.312Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 9.05h worked â†’ 8.489166666666666h counted â†’ OVERLAP 08:30-17:00 = 8.489h (attendance table)
[2025-10-03T06:19:20.313Z] [LOG]    âœ… Added to weekday total: 8.489166666666666h
[2025-10-03T06:19:20.313Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 8.82h worked â†’ 8.316944444444445h counted â†’ OVERLAP 08:40-17:00 = 8.317h (attendance table)
[2025-10-03T06:19:20.313Z] [LOG]    âœ… Added to weekday total: 8.316944444444445h
[2025-10-03T06:19:20.313Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 8.4h worked â†’ 8.150555555555556h counted â†’ OVERLAP 08:50-17:00 = 8.151h (attendance table)
[2025-10-03T06:19:20.314Z] [LOG]    âœ… Added to weekday total: 8.150555555555556h
[2025-10-03T06:19:20.314Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 8.54h worked â†’ 8.25h counted â†’ OVERLAP 08:45-17:00 = 8.250h (attendance table)
[2025-10-03T06:19:20.314Z] [LOG]    âœ… Added to weekday total: 8.25h
[2025-10-03T06:19:20.314Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 8.17h worked â†’ 8.104444444444445h counted â†’ OVERLAP 08:53-17:00 = 8.104h (attendance table)
[2025-10-03T06:19:20.315Z] [LOG]    âœ… Added to weekday total: 8.104444444444445h
[2025-10-03T06:19:20.315Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 8.54h worked â†’ 8.25h counted â†’ OVERLAP 08:45-17:00 = 8.250h (attendance table)
[2025-10-03T06:19:20.316Z] [LOG]    âœ… Added to weekday total: 8.25h
[2025-10-03T06:19:20.316Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 8.27h worked â†’ 8.265833333333333h counted â†’ OVERLAP 08:44-17:00 = 8.266h (attendance table)
[2025-10-03T06:19:20.316Z] [LOG]    âœ… Added to weekday total: 8.265833333333333h
[2025-10-03T06:19:20.316Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 7.86h worked â†’ 7.858055555555556h counted â†’ OVERLAP 09:08-17:00 = 7.858h (attendance table)
[2025-10-03T06:19:20.317Z] [LOG]    âœ… Added to weekday total: 7.858055555555556h
[2025-10-03T06:19:20.317Z] [LOG] ğŸ“… 2025-08-27 (WEEKDAY): 8.44h worked â†’ 8.133611111111112h counted â†’ OVERLAP 08:51-17:00 = 8.134h (attendance table)
[2025-10-03T06:19:20.317Z] [LOG]    âœ… Added to weekday total: 8.133611111111112h
[2025-10-03T06:19:20.318Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 8.2h worked â†’ 8.1475h counted â†’ OVERLAP 08:51-17:00 = 8.148h (attendance table)
[2025-10-03T06:19:20.318Z] [LOG]    âœ… Added to weekday total: 8.1475h
[2025-10-03T06:19:20.318Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 9.2h worked â†’ 8.364444444444445h counted â†’ OVERLAP 08:38-17:00 = 8.364h (attendance table)
[2025-10-03T06:19:20.319Z] [LOG]    âœ… Added to weekday total: 8.364444444444445h
[2025-10-03T06:19:20.319Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 6.03h worked â†’ 4.0311111111111115h counted â†’ OVERLAP 08:58-13:00 = 4.031h (attendance table)
[2025-10-03T06:19:20.320Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.0311111111111115h
[2025-10-03T06:19:20.320Z] [LOG] ================================================================================
[2025-10-03T06:19:20.320Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:19:20.320Z] [LOG]    Sum of all daily counted hours (rounded): 153.7042h
[2025-10-03T06:19:20.321Z] [LOG]    Expected hours: 170h
[2025-10-03T06:19:20.321Z] [LOG]    Shortfall: 16.30h
[2025-10-03T06:19:20.321Z] [LOG] ================================================================================
[2025-10-03T06:19:20.589Z] [LOG] ğŸ”„ Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430...
[2025-10-03T06:19:20.590Z] [LOG] ğŸ”„ Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:19:20.767Z] [LOG] ğŸ“Š Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:21.046Z] [LOG] ğŸ“Š Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:21.246Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:21.246Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:19:21.247Z] [LOG] ğŸ’° GROSS CALCULATION for Sithira null:
[2025-10-03T06:19:21.248Z] [LOG]    Base Salary: 40000
[2025-10-03T06:19:21.248Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:19:21.573Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:19:21.928Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:19:22.378Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:19:22.552Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:19:22.728Z] [LOG] Employee 01441e19-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:19:22.729Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:19:22.729Z] [LOG] ============================================================
[2025-10-03T06:19:22.730Z] [LOG] ğŸ‘¤ Employee ID: 01441e19-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:22.730Z] [LOG] ğŸ’° Base Salary: 40,000
[2025-10-03T06:19:22.731Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:19:22.731Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:19:22.732Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:19:22.733Z] [LOG] ğŸ’µ Per-Day Salary: 1600.00
[2025-10-03T06:19:22.733Z] [LOG] â±ï¸  Hourly Rate: 188.24
[2025-10-03T06:19:22.734Z] [LOG] 
[2025-10-03T06:19:22.735Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:19:22.735Z] [LOG]    Expected Hours: 170
[2025-10-03T06:19:22.736Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:19:22.738Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:19:22.741Z] [LOG]    Worked Hours: 153.7042
[2025-10-03T06:19:22.742Z] [LOG]    âš ï¸  Shortfall Hours: 16.295800000000014
[2025-10-03T06:19:22.742Z] [LOG]    ğŸ’¸ Shortfall Deduction: 16.295800000000014h Ã— 188.24 = 3067.44
[2025-10-03T06:19:22.743Z] [LOG] ============================================================
[2025-10-03T06:19:23.100Z] [LOG] âœ… Weekend Day Met: 2025-08-02 (Saturday)
[2025-10-03T06:19:23.101Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:19:23.101Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-30 (Saturday)
[2025-10-03T06:19:23.101Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:19:23.101Z] [LOG]    Actual: 08:58:08 - 15:00:00
[2025-10-03T06:19:23.102Z] [LOG]    Calculation: OVERLAP 08:58-13:00 = 4.031h
[2025-10-03T06:19:23.102Z] [LOG]    Payable Hours: 4.031h
[2025-10-03T06:19:23.102Z] [LOG]    Shortfall: 0.469h
[2025-10-03T06:19:23.102Z] [LOG]    Hourly Rate: 355.56 (Day Salary 1600 Ã· 4.5h)
[2025-10-03T06:19:23.103Z] [LOG]    Deduction: 166.72
[2025-10-03T06:19:23.461Z] [LOG] ğŸ“… Weekend absence check for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-03T06:19:23.461Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:19:23.461Z] [LOG]    Attended weekend dates: 2 days
[2025-10-03T06:19:23.462Z] [LOG]    Absent weekend dates: 3 days
[2025-10-03T06:19:23.462Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:19:23.462Z] [LOG]    Gross Salary: 40000
[2025-10-03T06:19:23.463Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:19:23.463Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:19:23.464Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:23.464Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:19:23.464Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:23.465Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:19:23.465Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:23.465Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:19:23.466Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:23.466Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:19:23.466Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:23.466Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:19:23.467Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:23.467Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:19:23.467Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:23.467Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:19:23.468Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:23.468Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:19:23.468Z] [LOG] Regular deductions for Sithira null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:19:23.469Z] [LOG] Combined deductions for Sithira null: {
  "components": [
    {
      "code": "WEEKEND_SHORTFALL",
      "name": "Weekend Shortfall Deduction",
      "type": "deduction",
      "category": "other",
      "amount": 166.71604938271588,
      "details": "Total 0.47h shortfall - 2025-08-30 (Saturday): 0.47h"
    },
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 3067.4447058823557,
      "details": "16.295800000000014 hours Ã— 188.24"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 4800,
      "details": "3 weekend days Ã— 1600.00"
    }
  ],
  "total": 8034.160755265071
}
[2025-10-03T06:19:23.650Z] [LOG] Creating components for record df9d5af4-4409-4b22-bca4-e997ae52c6fa: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 3,
  "taxComponentsCount": 0
}
[2025-10-03T06:19:23.652Z] [LOG] Processing component: {
  "name": "Weekend Shortfall Deduction",
  "type": "deduction",
  "amount": 166.71604938271588
}
[2025-10-03T06:19:24.010Z] [LOG] Using existing component ID: 106fdfbf-ee30-432b-8a98-9c8f6cef1ae1
[2025-10-03T06:19:24.276Z] [LOG] Created payroll_record_component: 01e98541-1f20-4b53-b747-d4ccdedd1283 for Weekend Shortfall Deduction
[2025-10-03T06:19:24.277Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 3067.4447058823557
}
[2025-10-03T06:19:24.462Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:19:24.641Z] [LOG] Created payroll_record_component: 0cde8c99-5912-467a-84ac-d8ed79d1f39d for Working Hours Shortfall
[2025-10-03T06:19:24.641Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 4800
}
[2025-10-03T06:19:24.818Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:19:25.010Z] [LOG] Created payroll_record_component: c514a8b4-5972-43e3-b07a-4578a57edb60 for Weekend Absent Days
[2025-10-03T06:19:25.538Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:19:25.541Z] [ERROR] âŒ Error updating financial balances for employee 01441e19-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:19:25.545Z] [LOG] âœ… Sithira null: Calculation completed successfully
[2025-10-03T06:19:25.546Z] [LOG] ğŸ“Š Progress: 31/34 (91.2%)
[2025-10-03T06:19:25.547Z] [LOG] 
ğŸ§® Processing: Sumaiya null (EMP000016)
[2025-10-03T06:19:25.548Z] [LOG] ğŸ“‹ Record ID: e6181326-0da7-4a22-b47e-90faf18d97f3
[2025-10-03T06:19:26.252Z] [LOG] ğŸ” Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-03T06:19:26.253Z] [LOG]    Total components: 8
[2025-10-03T06:19:26.254Z] [LOG]    Applicable components: 8
[2025-10-03T06:19:26.254Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-03T06:19:27.387Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:27.741Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:28.093Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:28.446Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:28.973Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:29.322Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:29.684Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:30.035Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:30.391Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:30.740Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:31.089Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:31.439Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:31.791Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:32.141Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:32.491Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:32.842Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:33.197Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:33.374Z] [LOG] ğŸ” Fetched 25 attendance records for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:33.550Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:19:34.432Z] [LOG] Employee 0143b22f-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:19:34.433Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:19:34.433Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:19:34.433Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:19:34.436Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-03T06:19:34.436Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:19:34.437Z] [LOG] ================================================================================
[2025-10-03T06:19:34.437Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:34.437Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:34.438Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 6h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:19:34.438Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:19:34.439Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 8.25h worked â†’ 8.25h counted â†’ OVERLAP 08:45-17:00 = 8.250h (attendance table)
[2025-10-03T06:19:34.439Z] [LOG]    âœ… Added to weekday total: 8.25h
[2025-10-03T06:19:34.439Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 10.11h worked â†’ 7.523611111111111h counted â†’ OVERLAP 09:28-17:00 = 7.524h (attendance table)
[2025-10-03T06:19:34.440Z] [LOG]    âœ… Added to weekday total: 7.523611111111111h
[2025-10-03T06:19:34.440Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 11.58h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:34.440Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:34.441Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 10.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:34.441Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:34.441Z] [LOG] ğŸ“… 2025-08-09 (WEEKEND): 8.68h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:19:34.442Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:19:34.442Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 9.83h worked â†’ 8.333333333333334h counted â†’ OVERLAP 08:40-17:00 = 8.333h (attendance table)
[2025-10-03T06:19:34.442Z] [LOG]    âœ… Added to weekday total: 8.333333333333334h
[2025-10-03T06:19:34.443Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 8h worked â†’ 4.5h counted â†’ OVERLAP 12:30-17:00 = 4.500h (attendance table)
[2025-10-03T06:19:34.443Z] [LOG]    âœ… Added to weekday total: 4.5h
[2025-10-03T06:19:34.443Z] [LOG] ğŸ“… 2025-08-13 (WEEKDAY): 12h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:34.443Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:34.444Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 10.45h worked â†’ 8.45138888888889h counted â†’ OVERLAP 08:32-17:00 = 8.451h (attendance table)
[2025-10-03T06:19:34.444Z] [LOG]    âœ… Added to weekday total: 8.45138888888889h
[2025-10-03T06:19:34.444Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 12.09h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:34.444Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:34.445Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 8.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:19:34.445Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:19:34.446Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 9.86h worked â†’ 8.356111111111112h counted â†’ OVERLAP 08:38-17:00 = 8.356h (attendance table)
[2025-10-03T06:19:34.446Z] [LOG]    âœ… Added to weekday total: 8.356111111111112h
[2025-10-03T06:19:34.446Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 10.43h worked â†’ 7.833333333333333h counted â†’ OVERLAP 09:10-17:00 = 7.833h (attendance table)
[2025-10-03T06:19:34.447Z] [LOG]    âœ… Added to weekday total: 7.833333333333333h
[2025-10-03T06:19:34.447Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 11h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:34.447Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:34.448Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 9.68h worked â†’ 8.183333333333334h counted â†’ OVERLAP 08:49-17:00 = 8.183h (attendance table)
[2025-10-03T06:19:34.448Z] [LOG]    âœ… Added to weekday total: 8.183333333333334h
[2025-10-03T06:19:34.448Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 9.73h worked â†’ 8.231666666666667h counted â†’ OVERLAP 08:46-17:00 = 8.232h (attendance table)
[2025-10-03T06:19:34.448Z] [LOG]    âœ… Added to weekday total: 8.231666666666667h
[2025-10-03T06:19:34.449Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 6h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:19:34.449Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:19:34.449Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 7.65h worked â†’ 7.649444444444445h counted â†’ OVERLAP 08:30-16:08 = 7.649h (attendance table)
[2025-10-03T06:19:34.449Z] [LOG]    âœ… Added to weekday total: 7.649444444444445h
[2025-10-03T06:19:34.450Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 9.93h worked â†’ 8.433055555555555h counted â†’ OVERLAP 08:34-17:00 = 8.433h (attendance table)
[2025-10-03T06:19:34.450Z] [LOG]    âœ… Added to weekday total: 8.433055555555555h
[2025-10-03T06:19:34.450Z] [LOG] ğŸ“… 2025-08-27 (WEEKDAY): 10h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:34.450Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:34.450Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:34.451Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:34.451Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 10.42h worked â†’ 8.416666666666666h counted â†’ OVERLAP 08:35-17:00 = 8.417h (attendance table)
[2025-10-03T06:19:34.451Z] [LOG]    âœ… Added to weekday total: 8.416666666666666h
[2025-10-03T06:19:34.451Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 5.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:19:34.451Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:19:34.452Z] [LOG] ================================================================================
[2025-10-03T06:19:34.452Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:19:34.452Z] [LOG]    Sum of all daily counted hours (rounded): 162.1619h
[2025-10-03T06:19:34.452Z] [LOG]    Expected hours: 170h
[2025-10-03T06:19:34.452Z] [LOG]    Shortfall: 7.84h
[2025-10-03T06:19:34.452Z] [LOG] ================================================================================
[2025-10-03T06:19:34.632Z] [LOG] ğŸ”„ Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430...
[2025-10-03T06:19:34.632Z] [LOG] ğŸ”„ Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:19:34.820Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:35.000Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:35.226Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:35.227Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:19:35.227Z] [LOG] ğŸ’° GROSS CALCULATION for Sumaiya null:
[2025-10-03T06:19:35.227Z] [LOG]    Base Salary: 60000
[2025-10-03T06:19:35.228Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:19:35.400Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:19:35.839Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:19:36.254Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:19:36.539Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:19:36.714Z] [LOG] Employee 0143b22f-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:19:36.714Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:19:36.714Z] [LOG] ============================================================
[2025-10-03T06:19:36.714Z] [LOG] ğŸ‘¤ Employee ID: 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:36.714Z] [LOG] ğŸ’° Base Salary: 60,000
[2025-10-03T06:19:36.715Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:19:36.715Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:19:36.715Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:19:36.715Z] [LOG] ğŸ’µ Per-Day Salary: 2400.00
[2025-10-03T06:19:36.715Z] [LOG] â±ï¸  Hourly Rate: 282.35
[2025-10-03T06:19:36.715Z] [LOG] 
[2025-10-03T06:19:36.715Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:19:36.715Z] [LOG]    Expected Hours: 170
[2025-10-03T06:19:36.716Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:19:36.716Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:19:36.716Z] [LOG]    Worked Hours: 162.1619
[2025-10-03T06:19:36.716Z] [LOG]    âš ï¸  Shortfall Hours: 7.838099999999997
[2025-10-03T06:19:36.716Z] [LOG]    ğŸ’¸ Shortfall Deduction: 7.838099999999997h Ã— 282.35 = 2213.11
[2025-10-03T06:19:36.716Z] [LOG] ============================================================
[2025-10-03T06:19:37.141Z] [LOG] âœ… Weekend Day Met: 2025-08-02 (Saturday)
[2025-10-03T06:19:37.142Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:19:37.142Z] [LOG] âœ… Weekend Day Met: 2025-08-09 (Saturday)
[2025-10-03T06:19:37.142Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:19:37.142Z] [LOG] âœ… Weekend Day Met: 2025-08-16 (Saturday)
[2025-10-03T06:19:37.142Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:19:37.142Z] [LOG] âœ… Weekend Day Met: 2025-08-23 (Saturday)
[2025-10-03T06:19:37.143Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:19:37.143Z] [LOG] âœ… Weekend Day Met: 2025-08-30 (Saturday)
[2025-10-03T06:19:37.143Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:19:37.685Z] [LOG] ğŸ“… Weekend absence check for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-03T06:19:37.685Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:19:37.686Z] [LOG]    Attended weekend dates: 5 days
[2025-10-03T06:19:37.686Z] [LOG]    Absent weekend dates: 0 days
[2025-10-03T06:19:37.686Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:19:37.686Z] [LOG]    Gross Salary: 60000
[2025-10-03T06:19:37.686Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:19:37.687Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:19:37.687Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:37.687Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:19:37.687Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:37.687Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:19:37.687Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:37.687Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:19:37.688Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:37.688Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:19:37.688Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:37.689Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:19:37.689Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:37.689Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:19:37.689Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:37.689Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:19:37.689Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:37.690Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:19:37.690Z] [LOG] Regular deductions for Sumaiya null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:19:37.690Z] [LOG] Combined deductions for Sumaiya null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 2213.1105882352936,
      "details": "7.838099999999997 hours Ã— 282.35"
    }
  ],
  "total": 2213.1105882352936
}
[2025-10-03T06:19:37.868Z] [LOG] Creating components for record e6181326-0da7-4a22-b47e-90faf18d97f3: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-03T06:19:37.868Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 2213.1105882352936
}
[2025-10-03T06:19:38.489Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:19:38.949Z] [LOG] Created payroll_record_component: 82aca0e6-1bf1-4abf-8799-0235f7eaf76b for Working Hours Shortfall
[2025-10-03T06:19:39.573Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:19:39.575Z] [ERROR] âŒ Error updating financial balances for employee 0143b22f-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:19:39.577Z] [LOG] âœ… Sumaiya null: Calculation completed successfully
[2025-10-03T06:19:39.577Z] [LOG] ğŸ“Š Progress: 32/34 (94.1%)
[2025-10-03T06:19:39.577Z] [LOG] 
ğŸ§® Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-03T06:19:39.577Z] [LOG] ğŸ“‹ Record ID: e7ca896d-c165-4e6e-b1fa-bb8fce84da9e
[2025-10-03T06:19:40.294Z] [LOG] ğŸ” Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-03T06:19:40.294Z] [LOG]    Total components: 8
[2025-10-03T06:19:40.294Z] [LOG]    Applicable components: 8
[2025-10-03T06:19:40.295Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-03T06:19:41.466Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:41.834Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:42.200Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:42.584Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:43.099Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:43.513Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:44.474Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:44.838Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:45.658Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:46.021Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:46.374Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:46.725Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:47.084Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:47.442Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:47.616Z] [LOG] ğŸ” Fetched 23 attendance records for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:47.794Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:19:48.695Z] [LOG] Employee 01444074-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:19:48.696Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:19:48.696Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:19:48.697Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:19:48.711Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-03T06:19:48.711Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:19:48.711Z] [LOG] ================================================================================
[2025-10-03T06:19:48.711Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 9.23h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:48.712Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:48.712Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:19:48.712Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:19:48.712Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 8.53h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:48.713Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:48.713Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 8.66h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:48.713Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:48.713Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 8.66h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:48.714Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:48.714Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 8.69h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:48.714Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:48.715Z] [LOG] ğŸ“… 2025-08-09 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:19:48.715Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:19:48.715Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 8.54h worked â†’ 8.413055555555555h counted â†’ OVERLAP 08:35-17:00 = 8.413h (attendance table)
[2025-10-03T06:19:48.716Z] [LOG]    âœ… Added to weekday total: 8.413055555555555h
[2025-10-03T06:19:48.716Z] [LOG] ğŸ“… 2025-08-12 (WEEKDAY): 8.56h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:48.716Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:48.716Z] [LOG] ğŸ“… 2025-08-14 (WEEKDAY): 8.69h worked â†’ 8.49611111111111h counted â†’ OVERLAP 08:30-17:00 = 8.496h (attendance table)
[2025-10-03T06:19:48.717Z] [LOG]    âœ… Added to weekday total: 8.49611111111111h
[2025-10-03T06:19:48.717Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:48.717Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:48.717Z] [LOG] ğŸ“… 2025-08-16 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:19:48.718Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:19:48.718Z] [LOG] ğŸ“… 2025-08-18 (WEEKDAY): 8.41h worked â†’ 8.414444444444445h counted â†’ OVERLAP 08:30-16:54 = 8.414h (attendance table)
[2025-10-03T06:19:48.718Z] [LOG]    âœ… Added to weekday total: 8.414444444444445h
[2025-10-03T06:19:48.718Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 8.68h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:48.719Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:48.719Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 8.85h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:48.719Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:48.719Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 3.5h worked â†’ 3.5h counted â†’ OVERLAP 08:30-12:00 = 3.500h (attendance table)
[2025-10-03T06:19:48.719Z] [LOG]    âœ… Added to weekday total: 3.5h
[2025-10-03T06:19:48.720Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 9.53h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:48.720Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:48.720Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:19:48.720Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:19:48.720Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 8.6h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:48.721Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:48.721Z] [LOG] ğŸ“… 2025-08-27 (WEEKDAY): 8.5h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:48.721Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:48.723Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 8.6h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:48.723Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:48.723Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 9.57h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:19:48.724Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:19:48.724Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 4.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:19:48.725Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:19:48.725Z] [LOG] ================================================================================
[2025-10-03T06:19:48.725Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:19:48.725Z] [LOG]    Sum of all daily counted hours (rounded): 147.8236h
[2025-10-03T06:19:48.726Z] [LOG]    Expected hours: 170h
[2025-10-03T06:19:48.726Z] [LOG]    Shortfall: 22.18h
[2025-10-03T06:19:48.726Z] [LOG] ================================================================================
[2025-10-03T06:19:48.899Z] [LOG] ğŸ”„ Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430...
[2025-10-03T06:19:48.900Z] [LOG] ğŸ”„ Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:19:49.129Z] [LOG] ğŸ“Š Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:49.309Z] [LOG] ğŸ“Š Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:49.517Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:49.517Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:19:49.517Z] [LOG] ğŸ’° GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-03T06:19:49.518Z] [LOG]    Base Salary: 35000
[2025-10-03T06:19:49.518Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:19:49.694Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:19:50.045Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:19:50.484Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:19:50.663Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:19:50.848Z] [LOG] Employee 01444074-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:19:50.849Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:19:50.849Z] [LOG] ============================================================
[2025-10-03T06:19:50.849Z] [LOG] ğŸ‘¤ Employee ID: 01444074-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:50.849Z] [LOG] ğŸ’° Base Salary: 35,000
[2025-10-03T06:19:50.849Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:19:50.850Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:19:50.850Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:19:50.850Z] [LOG] ğŸ’µ Per-Day Salary: 1400.00
[2025-10-03T06:19:50.850Z] [LOG] â±ï¸  Hourly Rate: 164.71
[2025-10-03T06:19:50.850Z] [LOG] 
[2025-10-03T06:19:50.851Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:19:50.851Z] [LOG]    Expected Hours: 170
[2025-10-03T06:19:50.851Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:19:50.851Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:19:50.851Z] [LOG]    Worked Hours: 147.8236
[2025-10-03T06:19:50.852Z] [LOG]    âš ï¸  Shortfall Hours: 22.1764
[2025-10-03T06:19:50.852Z] [LOG]    ğŸ’¸ Shortfall Deduction: 22.1764h Ã— 164.71 = 3652.58
[2025-10-03T06:19:50.852Z] [LOG] ============================================================
[2025-10-03T06:19:51.236Z] [LOG] âœ… Weekend Day Met: 2025-08-02 (Saturday)
[2025-10-03T06:19:51.237Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:19:51.237Z] [LOG] âœ… Weekend Day Met: 2025-08-09 (Saturday)
[2025-10-03T06:19:51.237Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:19:51.238Z] [LOG] âœ… Weekend Day Met: 2025-08-16 (Saturday)
[2025-10-03T06:19:51.239Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:19:51.239Z] [LOG] âœ… Weekend Day Met: 2025-08-23 (Saturday)
[2025-10-03T06:19:51.240Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:19:51.240Z] [LOG] âœ… Weekend Day Met: 2025-08-30 (Saturday)
[2025-10-03T06:19:51.240Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:19:51.598Z] [LOG] ğŸ“… Weekend absence check for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-03T06:19:51.598Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:19:51.599Z] [LOG]    Attended weekend dates: 5 days
[2025-10-03T06:19:51.599Z] [LOG]    Absent weekend dates: 0 days
[2025-10-03T06:19:51.600Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:19:51.601Z] [LOG]    Gross Salary: 35000
[2025-10-03T06:19:51.601Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:19:51.602Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:19:51.602Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:51.603Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:19:51.603Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:51.604Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:19:51.607Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:51.608Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:19:51.608Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:51.610Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:19:51.611Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:51.612Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:19:51.613Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:51.614Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:19:51.614Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:51.615Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:19:51.616Z] [LOG]    Fixed amount: 0
[2025-10-03T06:19:51.616Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:19:51.617Z] [LOG] Regular deductions for Nimdiya Ranasinghe null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:19:51.618Z] [LOG] Combined deductions for Nimdiya Ranasinghe null: {
  "components": [
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 3652.583529411765,
      "details": "22.1764 hours Ã— 164.71"
    }
  ],
  "total": 3652.583529411765
}
[2025-10-03T06:19:51.807Z] [LOG] Creating components for record e7ca896d-c165-4e6e-b1fa-bb8fce84da9e: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-03T06:19:51.809Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 3652.583529411765
}
[2025-10-03T06:19:51.986Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:19:52.177Z] [LOG] Created payroll_record_component: c81404f4-4914-4c39-806f-39a5892ec4ed for Working Hours Shortfall
[2025-10-03T06:19:52.732Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:19:52.738Z] [ERROR] âŒ Error updating financial balances for employee 01444074-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:19:52.752Z] [LOG] âœ… Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-03T06:19:52.752Z] [LOG] ğŸ“Š Progress: 33/34 (97.1%)
[2025-10-03T06:19:52.753Z] [LOG] 
ğŸ§® Processing: Hari null (EMP000017)
[2025-10-03T06:19:52.754Z] [LOG] ğŸ“‹ Record ID: ee56e9b1-b511-43f6-8b9a-85f796018f8d
[2025-10-03T06:19:53.469Z] [LOG] ğŸ” Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-03T06:19:53.470Z] [LOG]    Total components: 8
[2025-10-03T06:19:53.470Z] [LOG]    Applicable components: 8
[2025-10-03T06:19:53.471Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-03T06:19:54.987Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:55.698Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:56.908Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:57.450Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:57.816Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:58.998Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:59.359Z] [LOG]    Using overtime_rate_multiplier from settings: 1.5x
[2025-10-03T06:19:59.563Z] [LOG] ğŸ” Fetched 20 attendance records for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-03T06:19:59.832Z] [LOG] Error loading working hours from system settings, using defaults: SettingsHelper is not a constructor
[2025-10-03T06:20:00.807Z] [LOG] Employee 0143bc58-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:20:00.807Z] [LOG] âœ… Expected hours calculation (WEEKDAYS ONLY): 20 weekday days Ã— 8.5h = 170h
[2025-10-03T06:20:00.808Z] [LOG]    ğŸ“Š Working days breakdown: Total=25, Weekdays=20, Weekend=5
[2025-10-03T06:20:00.809Z] [ERROR] Error checking overtime enabled setting: {
  "message": "Bind parameters must not contain undefined. To pass SQL NULL specify JS null"
}
[2025-10-03T06:20:00.816Z] [LOG] 
ğŸ“Š DAILY WORKED HOURS BREAKDOWN for Employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-03T06:20:00.816Z] [LOG] âš™ï¸  Overtime Enabled: NO
[2025-10-03T06:20:00.817Z] [LOG] ================================================================================
[2025-10-03T06:20:00.819Z] [LOG] ğŸ“… 2025-08-01 (WEEKDAY): 9.69h worked â†’ 8.5h counted â†’ OVERLAP 08:30-17:00 = 8.500h (attendance table)
[2025-10-03T06:20:00.824Z] [LOG]    âœ… Added to weekday total: 8.5h
[2025-10-03T06:20:00.825Z] [LOG] ğŸ“… 2025-08-02 (WEEKEND): 10.26h worked â†’ 4.013055555555556h counted â†’ OVERLAP 08:59-13:00 = 4.013h (attendance table)
[2025-10-03T06:20:00.825Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.013055555555556h
[2025-10-03T06:20:00.826Z] [LOG] ğŸ“… 2025-08-04 (WEEKDAY): 8.17h worked â†’ 8.166666666666666h counted â†’ OVERLAP 08:50-17:00 = 8.167h (attendance table)
[2025-10-03T06:20:00.828Z] [LOG]    âœ… Added to weekday total: 8.166666666666666h
[2025-10-03T06:20:00.829Z] [LOG] ğŸ“… 2025-08-05 (WEEKDAY): 8.38h worked â†’ 7.384166666666666h counted â†’ OVERLAP 09:36-17:00 = 7.384h (attendance table)
[2025-10-03T06:20:00.829Z] [LOG]    âœ… Added to weekday total: 7.384166666666666h
[2025-10-03T06:20:00.830Z] [LOG] ğŸ“… 2025-08-06 (WEEKDAY): 7.22h worked â†’ 7.225h counted â†’ OVERLAP 09:46-17:00 = 7.225h (attendance table)
[2025-10-03T06:20:00.830Z] [LOG]    âœ… Added to weekday total: 7.225h
[2025-10-03T06:20:00.830Z] [LOG] ğŸ“… 2025-08-07 (WEEKDAY): 8h worked â†’ 7.5h counted â†’ OVERLAP 09:30-17:00 = 7.500h (attendance table)
[2025-10-03T06:20:00.831Z] [LOG]    âœ… Added to weekday total: 7.5h
[2025-10-03T06:20:00.831Z] [LOG] ğŸ“… 2025-08-09 (WEEKEND): 5.83h worked â†’ 3.8333333333333335h counted â†’ OVERLAP 09:10-13:00 = 3.833h (attendance table)
[2025-10-03T06:20:00.831Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 3.8333333333333335h
[2025-10-03T06:20:00.832Z] [LOG] ğŸ“… 2025-08-11 (WEEKDAY): 8.17h worked â†’ 8.166666666666666h counted â†’ OVERLAP 08:50-17:00 = 8.167h (attendance table)
[2025-10-03T06:20:00.832Z] [LOG]    âœ… Added to weekday total: 8.166666666666666h
[2025-10-03T06:20:00.832Z] [LOG] ğŸ“… 2025-08-15 (WEEKDAY): 8.66h worked â†’ 8.159166666666666h counted â†’ OVERLAP 08:50-17:00 = 8.159h (attendance table)
[2025-10-03T06:20:00.833Z] [LOG]    âœ… Added to weekday total: 8.159166666666666h
[2025-10-03T06:20:00.833Z] [LOG] ğŸ“… 2025-08-19 (WEEKDAY): 8.83h worked â†’ 7.833333333333333h counted â†’ OVERLAP 09:10-17:00 = 7.833h (attendance table)
[2025-10-03T06:20:00.833Z] [LOG]    âœ… Added to weekday total: 7.833333333333333h
[2025-10-03T06:20:00.834Z] [LOG] ğŸ“… 2025-08-20 (WEEKDAY): 6.94h worked â†’ 6.935833333333333h counted â†’ OVERLAP 10:03-17:00 = 6.936h (attendance table)
[2025-10-03T06:20:00.834Z] [LOG]    âœ… Added to weekday total: 6.935833333333333h
[2025-10-03T06:20:00.834Z] [LOG] ğŸ“… 2025-08-21 (WEEKDAY): 7h worked â†’ 7h counted â†’ OVERLAP 10:00-17:00 = 7.000h (attendance table)
[2025-10-03T06:20:00.834Z] [LOG]    âœ… Added to weekday total: 7h
[2025-10-03T06:20:00.835Z] [LOG] ğŸ“… 2025-08-22 (WEEKDAY): 4.5h worked â†’ 4h counted â†’ OVERLAP 13:00-17:00 = 4.000h (attendance table)
[2025-10-03T06:20:00.835Z] [LOG]    âœ… Added to weekday total: 4h
[2025-10-03T06:20:00.835Z] [LOG] ğŸ“… 2025-08-23 (WEEKEND): 7h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:20:00.836Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:20:00.836Z] [LOG] ğŸ“… 2025-08-25 (WEEKDAY): 8.03h worked â†’ 8.033333333333333h counted â†’ OVERLAP 08:58-17:00 = 8.033h (attendance table)
[2025-10-03T06:20:00.836Z] [LOG]    âœ… Added to weekday total: 8.033333333333333h
[2025-10-03T06:20:00.837Z] [LOG] ğŸ“… 2025-08-26 (WEEKDAY): 9.22h worked â†’ 6.64h counted â†’ OVERLAP 10:21-17:00 = 6.640h (attendance table)
[2025-10-03T06:20:00.837Z] [LOG]    âœ… Added to weekday total: 6.64h
[2025-10-03T06:20:00.837Z] [LOG] ğŸ“… 2025-08-27 (WEEKDAY): 7.05h worked â†’ 6.552777777777778h counted â†’ OVERLAP 10:26-17:00 = 6.553h (attendance table)
[2025-10-03T06:20:00.837Z] [LOG]    âœ… Added to weekday total: 6.552777777777778h
[2025-10-03T06:20:00.838Z] [LOG] ğŸ“… 2025-08-28 (WEEKDAY): 7.75h worked â†’ 7.75h counted â†’ OVERLAP 09:15-17:00 = 7.750h (attendance table)
[2025-10-03T06:20:00.839Z] [LOG]    âœ… Added to weekday total: 7.75h
[2025-10-03T06:20:00.840Z] [LOG] ğŸ“… 2025-08-29 (WEEKDAY): 5h worked â†’ 5h counted â†’ OVERLAP 12:00-17:00 = 5.000h (attendance table)
[2025-10-03T06:20:00.840Z] [LOG]    âœ… Added to weekday total: 5h
[2025-10-03T06:20:00.840Z] [LOG] ğŸ“… 2025-08-30 (WEEKEND): 14.5h worked â†’ 4.5h counted â†’ OVERLAP 08:30-13:00 = 4.500h (attendance table)
[2025-10-03T06:20:00.841Z] [LOG]    â­ï¸  Skipped weekend hours (handled separately): 4.5h
[2025-10-03T06:20:00.841Z] [LOG] ================================================================================
[2025-10-03T06:20:00.841Z] [LOG] ğŸ“Š TOTAL WORKED HOURS CALCULATION:
[2025-10-03T06:20:00.842Z] [LOG]    Sum of all daily counted hours (rounded): 114.8469h
[2025-10-03T06:20:00.842Z] [LOG]    Expected hours: 170h
[2025-10-03T06:20:00.843Z] [LOG]    Shortfall: 55.15h
[2025-10-03T06:20:00.843Z] [LOG] ================================================================================
[2025-10-03T06:20:01.033Z] [LOG] ğŸ”„ Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430...
[2025-10-03T06:20:01.034Z] [LOG] ğŸ”„ Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-08-01 to 2025-08-31
[2025-10-03T06:20:01.269Z] [LOG] ğŸ“Š Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-03T06:20:01.719Z] [LOG] ğŸ“Š Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-03T06:20:01.910Z] [LOG] ğŸ“Š Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-03T06:20:01.911Z] [LOG] âœ… Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-03T06:20:01.911Z] [LOG] ğŸ’° GROSS CALCULATION for Hari null:
[2025-10-03T06:20:01.912Z] [LOG]    Base Salary: 50000
[2025-10-03T06:20:01.912Z] [LOG]    ğŸ“‹ Processing 0 configured earning components
[2025-10-03T06:20:02.095Z] [LOG] âš ï¸  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-03T06:20:02.527Z] [LOG] ğŸ—“ï¸  PAYROLL PERIOD: 2025-08-01 to 2025-08-31
[2025-10-03T06:20:03.077Z] [LOG] ğŸ“Š CALCULATED WORKING DAYS: 25 days (excluding weekends & holidays)
[2025-10-03T06:20:03.253Z] [LOG] ğŸ—ï¸  WEEKEND WORKING BREAKDOWN: {
  "standard_working_days": 20,
  "weekend_working_days": 5,
  "weekend_full_day_weight": 5,
  "weekend_proportional_days": 0,
  "effective_working_days": 25
}
[2025-10-03T06:20:03.448Z] [LOG] Employee 0143bc58-7105-11f0-a50f-98e743540430 scheduled hours from attendance (from period 2025-08-01 to 2025-08-31): 08:30:00 - 17:00:00 = 8.5 hours
[2025-10-03T06:20:03.449Z] [LOG] 
ğŸ“Š PAYROLL CALCULATION - EMPLOYEE SHORTFALL ANALYSIS
[2025-10-03T06:20:03.450Z] [LOG] ============================================================
[2025-10-03T06:20:03.450Z] [LOG] ğŸ‘¤ Employee ID: 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-03T06:20:03.451Z] [LOG] ğŸ’° Base Salary: 50,000
[2025-10-03T06:20:03.451Z] [LOG] ğŸ“… Working Days: 25 (Raw: 25)
[2025-10-03T06:20:03.452Z] [LOG] ğŸ¯ Effective Working Days (with weekend weights): 25
[2025-10-03T06:20:03.452Z] [LOG] â° Employee Daily Hours: 8.5h/day
[2025-10-03T06:20:03.453Z] [LOG] ğŸ’µ Per-Day Salary: 2000.00
[2025-10-03T06:20:03.454Z] [LOG] â±ï¸  Hourly Rate: 235.29
[2025-10-03T06:20:03.454Z] [LOG] 
[2025-10-03T06:20:03.456Z] [LOG] ğŸ“ˆ ATTENDANCE SUMMARY:
[2025-10-03T06:20:03.457Z] [LOG]    Expected Hours: 170
[2025-10-03T06:20:03.458Z] [LOG]    ğŸ“‹ CALCULATION CHECK: 25 days Ã— 8.5h = 212.50h
[2025-10-03T06:20:03.459Z] [LOG]    â— DISCREPANCY: YES - Values don't match!
[2025-10-03T06:20:03.460Z] [LOG]    Worked Hours: 114.8469
[2025-10-03T06:20:03.460Z] [LOG]    âš ï¸  Shortfall Hours: 55.153099999999995
[2025-10-03T06:20:03.461Z] [LOG]    ğŸ’¸ Shortfall Deduction: 55.153099999999995h Ã— 235.29 = 12977.20
[2025-10-03T06:20:03.463Z] [LOG] ============================================================
[2025-10-03T06:20:03.828Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-02 (Saturday)
[2025-10-03T06:20:03.829Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:20:03.829Z] [LOG]    Actual: 08:59:13 - 19:15:00
[2025-10-03T06:20:03.830Z] [LOG]    Calculation: OVERLAP 08:59-13:00 = 4.013h
[2025-10-03T06:20:03.830Z] [LOG]    Payable Hours: 4.013h
[2025-10-03T06:20:03.831Z] [LOG]    Shortfall: 0.487h
[2025-10-03T06:20:03.832Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:20:03.832Z] [LOG]    Deduction: 216.42
[2025-10-03T06:20:03.833Z] [LOG] ğŸ—ï¸  Weekend Shortfall: 2025-08-09 (Saturday)
[2025-10-03T06:20:03.834Z] [LOG]    Scheduled: 08:30 - 13:00 = 4.5h
[2025-10-03T06:20:03.835Z] [LOG]    Actual: 09:10:00 - 15:00:00
[2025-10-03T06:20:03.837Z] [LOG]    Calculation: OVERLAP 09:10-13:00 = 3.833h
[2025-10-03T06:20:03.844Z] [LOG]    Payable Hours: 3.833h
[2025-10-03T06:20:03.845Z] [LOG]    Shortfall: 0.667h
[2025-10-03T06:20:03.847Z] [LOG]    Hourly Rate: 444.44 (Day Salary 2000 Ã· 4.5h)
[2025-10-03T06:20:03.848Z] [LOG]    Deduction: 296.30
[2025-10-03T06:20:03.849Z] [LOG] âœ… Weekend Day Met: 2025-08-23 (Saturday)
[2025-10-03T06:20:03.851Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:20:03.851Z] [LOG] âœ… Weekend Day Met: 2025-08-30 (Saturday)
[2025-10-03T06:20:03.852Z] [LOG]    Scheduled: 4.5h, Payable: 4.500h - No shortfall
[2025-10-03T06:20:04.271Z] [LOG] ğŸ“… Weekend absence check for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-03T06:20:04.272Z] [LOG]    Scheduled weekend dates: 5 days
[2025-10-03T06:20:04.272Z] [LOG]    Attended weekend dates: 4 days
[2025-10-03T06:20:04.273Z] [LOG]    Absent weekend dates: 1 days
[2025-10-03T06:20:04.273Z] [LOG] ğŸ’¸ DEDUCTION CALCULATION:
[2025-10-03T06:20:04.274Z] [LOG]    Gross Salary: 50000
[2025-10-03T06:20:04.274Z] [LOG]    ğŸ“‹ Processing 8 configured deduction components
[2025-10-03T06:20:04.274Z] [LOG] ğŸ§® Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-03T06:20:04.274Z] [LOG]    Fixed amount: 0
[2025-10-03T06:20:04.275Z] [LOG] ğŸ§® Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-03T06:20:04.275Z] [LOG]    Fixed amount: 0
[2025-10-03T06:20:04.276Z] [LOG] ğŸ§® Calculating component: Advance Deductions (fixed)
[2025-10-03T06:20:04.276Z] [LOG]    Fixed amount: 0
[2025-10-03T06:20:04.276Z] [LOG] ğŸ§® Calculating component: Loan Deductions (fixed)
[2025-10-03T06:20:04.276Z] [LOG]    Fixed amount: 0
[2025-10-03T06:20:04.277Z] [LOG] ğŸ§® Calculating component: INCOME TAX (fixed)
[2025-10-03T06:20:04.277Z] [LOG]    Fixed amount: 0
[2025-10-03T06:20:04.277Z] [LOG] ğŸ§® Calculating component: Weekend Absent Days (fixed)
[2025-10-03T06:20:04.277Z] [LOG]    Fixed amount: 0
[2025-10-03T06:20:04.278Z] [LOG] ğŸ§® Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-03T06:20:04.278Z] [LOG]    Fixed amount: 0
[2025-10-03T06:20:04.279Z] [LOG] ğŸ§® Calculating component: Working Hours Shortfall (fixed)
[2025-10-03T06:20:04.279Z] [LOG]    Fixed amount: 0
[2025-10-03T06:20:04.279Z] [LOG]    ğŸ“Š Total Deductions: 0
[2025-10-03T06:20:04.279Z] [LOG] Regular deductions for Hari null: {
  "components": [],
  "total": 0
}
[2025-10-03T06:20:04.280Z] [LOG] Combined deductions for Hari null: {
  "components": [
    {
      "code": "WEEKEND_SHORTFALL",
      "name": "Weekend Shortfall Deduction",
      "type": "deduction",
      "category": "other",
      "amount": 512.7160493827159,
      "details": "Total 1.15h shortfall - 2025-08-02 (Saturday): 0.49h, 2025-08-09 (Saturday): 0.67h"
    },
    {
      "code": "SHORTFALL_DED",
      "name": "Working Hours Shortfall",
      "type": "deduction",
      "category": "other",
      "amount": 12977.199999999999,
      "details": "55.153099999999995 hours Ã— 235.29"
    },
    {
      "code": "WEEKEND_ABSENT_DED",
      "name": "Weekend Absent Days",
      "type": "deduction",
      "category": "other",
      "amount": 2000,
      "details": "1 weekend days Ã— 2000.00"
    }
  ],
  "total": 15489.916049382715
}
[2025-10-03T06:20:04.472Z] [LOG] Creating components for record ee56e9b1-b511-43f6-8b9a-85f796018f8d: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 3,
  "taxComponentsCount": 0
}
[2025-10-03T06:20:04.474Z] [LOG] Processing component: {
  "name": "Weekend Shortfall Deduction",
  "type": "deduction",
  "amount": 512.7160493827159
}
[2025-10-03T06:20:04.653Z] [LOG] Using existing component ID: 106fdfbf-ee30-432b-8a98-9c8f6cef1ae1
[2025-10-03T06:20:04.835Z] [LOG] Created payroll_record_component: 92ad6cdc-29bd-455d-a3cc-f58339be326e for Weekend Shortfall Deduction
[2025-10-03T06:20:04.836Z] [LOG] Processing component: {
  "name": "Working Hours Shortfall",
  "type": "deduction",
  "amount": 12977.199999999999
}
[2025-10-03T06:20:05.017Z] [LOG] Using existing component ID: c83b8de7-0615-4be4-ab99-1d8732ca0acd
[2025-10-03T06:20:05.200Z] [LOG] Created payroll_record_component: f33d890c-1f8c-4705-8ab4-946e8aecbe35 for Working Hours Shortfall
[2025-10-03T06:20:05.200Z] [LOG] Processing component: {
  "name": "Weekend Absent Days",
  "type": "deduction",
  "amount": 2000
}
[2025-10-03T06:20:05.394Z] [LOG] Using existing component ID: a33d49be-0c47-41d4-bddb-fb73f66cca58
[2025-10-03T06:20:05.574Z] [LOG] Created payroll_record_component: 638688d8-6718-4725-9054-457c9d5b1635 for Weekend Absent Days
[2025-10-03T06:20:06.150Z] [ERROR] âŒ Error updating financial balances: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:20:06.152Z] [ERROR] âŒ Error updating financial balances for employee 0143bc58-7105-11f0-a50f-98e743540430: {
  "message": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "errno": 1146,
  "sql": "\n            INSERT INTO payroll_audit_logs (\n                id, run_id, employee_id, action, details, created_at\n            ) VALUES (?, ?, ?, 'financial_adjustment', ?, NOW())\n        ",
  "sqlState": "42S02",
  "sqlMessage": "Table 'u770612336_attendance_sys.payroll_audit_logs' doesn't exist"
}
[2025-10-03T06:20:06.153Z] [LOG] âœ… Hari null: Calculation completed successfully
[2025-10-03T06:20:06.153Z] [LOG] ğŸ“Š Progress: 34/34 (100.0%)
[2025-10-03T06:20:06.154Z] [LOG] 
============================================================
[2025-10-03T06:20:06.154Z] [LOG] ğŸ“ˆ Processing Summary: 34 successful, 0 failed
[2025-10-03T06:20:07.674Z] [LOG] ğŸ‰ Payroll calculation completed successfully!
[2025-10-03T06:20:07.675Z] [LOG] ğŸ“Š Final Summary: 34 processed, 0 errors
[2025-10-03T06:20:07.675Z] [INFO] ================================================================================
[2025-10-03T06:20:07.675Z] [INFO] â° Completed at: 2025-10-03T06:20:07.675Z
[2025-10-03T06:20:07.675Z] [INFO] ğŸ“Š Total log entries: 4818