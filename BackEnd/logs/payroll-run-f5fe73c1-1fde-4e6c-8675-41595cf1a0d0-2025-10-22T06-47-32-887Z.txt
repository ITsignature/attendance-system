[2025-10-22T06:47:32.887Z] [INFO] 🚀 Payroll calculation logging started for run: f5fe73c1-1fde-4e6c-8675-41595cf1a0d0
[2025-10-22T06:47:32.887Z] [INFO] 📁 Log file: D:\attendance-system\BackEnd\logs\payroll-run-f5fe73c1-1fde-4e6c-8675-41595cf1a0d0-2025-10-22T06-47-32-887Z.txt
[2025-10-22T06:47:32.887Z] [INFO] ⏰ Started at: 2025-10-22T06:47:32.887Z
[2025-10-22T06:47:32.887Z] [INFO] ================================================================================
[2025-10-22T06:47:32.887Z] [LOG] 🚀 Starting payroll calculation for run: f5fe73c1-1fde-4e6c-8675-41595cf1a0d0
[2025-10-22T06:47:32.888Z] [LOG] 👤 Client ID: it-signature, User ID: 059304ea-24a5-4d78-a290-cf09b9e53c4c
[2025-10-22T06:47:33.805Z] [LOG] ✅ Payroll run verified: October (MONTHLY_2025_10_REGULAR)
[2025-10-22T06:47:34.260Z] [LOG] 📊 Status updated to 'calculating'
[2025-10-22T06:47:34.946Z] [LOG] 👥 Processing 34 employee records:
[2025-10-22T06:47:34.948Z] [LOG] ============================================================
[2025-10-22T06:47:34.950Z] [LOG] 
🧮 Processing: Uthpala null (EMP000006)
[2025-10-22T06:47:34.951Z] [LOG] 📋 Record ID: 0030375a-490d-4b2b-abaf-a69ca4be5bee
[2025-10-22T06:47:34.952Z] [LOG] 
======================================================================
[2025-10-22T06:47:34.952Z] [LOG] 🧮 CALCULATING PAYROLL: Uthpala null (EMP000006)
[2025-10-22T06:47:34.953Z] [LOG] ======================================================================
[2025-10-22T06:47:36.792Z] [LOG] 🔍 Component filtering for employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-22T06:47:36.792Z] [LOG]    Total components: 10
[2025-10-22T06:47:36.793Z] [LOG]    Applicable components: 10
[2025-10-22T06:47:36.794Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-22T06:47:40.002Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:47:40.003Z] [LOG] 🔄 Processing financial records for employee 0143a539-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:47:40.461Z] [LOG] 📊 Found 0 active loans for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-22T06:47:41.347Z] [LOG] 📊 Found 0 active advances for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-22T06:47:42.430Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-22T06:47:42.431Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:47:42.432Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:47:42.434Z] [LOG] 💰 GROSS CALCULATION for Uthpala null:
[2025-10-22T06:47:42.434Z] [LOG]    Base Salary: 100000
[2025-10-22T06:47:42.435Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:47:42.435Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:47:42.436Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:42.971Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:47:43.470Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:47:43.471Z] [LOG]    Employee ID: 0143a539-7105-11f0-a50f-98e743540430
[2025-10-22T06:47:43.472Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:47:43.472Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:47:43.473Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-22T06:47:43.931Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:47:43.931Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-22T06:47:43.932Z] [LOG]       Weekday Hourly Rate: Rs.500.00
[2025-10-22T06:47:43.932Z] [LOG]       Saturday Hourly Rate: Rs.500.00
[2025-10-22T06:47:43.932Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:47:43.933Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:47:43.933Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:47:45.426Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:47:45.427Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:47:45.428Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:47:45.429Z] [LOG]       Weekday: 13 days × 8h = 104.00h
[2025-10-22T06:47:45.429Z] [LOG]       Saturday: 3 days × 8h = 24.00h
[2025-10-22T06:47:45.430Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:47:45.430Z] [LOG]       Total Expected: 128.00h
[2025-10-22T06:47:45.431Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:47:45.432Z] [LOG]       Weekday: 104.00h × Rs.500.00 = Rs.52000.00
[2025-10-22T06:47:45.432Z] [LOG]       Saturday: 24.00h × Rs.500.00 = Rs.12000.00
[2025-10-22T06:47:45.433Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:47:45.434Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:47:45.434Z] [LOG]       Total Expected Earned: Rs.64000.00
[2025-10-22T06:47:46.198Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:47:46.199Z] [LOG]       Weekday (Mon-Fri): 15.00h
[2025-10-22T06:47:46.200Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:47:46.201Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:47:46.201Z] [LOG]       Total Worked: 15.00h
[2025-10-22T06:47:46.202Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:47:46.203Z] [LOG]       Weekday: 15.00h × Rs.500.00 = Rs.7500.00
[2025-10-22T06:47:46.203Z] [LOG]       Saturday: 0.00h × Rs.500.00 = Rs.0.00
[2025-10-22T06:47:46.204Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:47:46.204Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:47:46.205Z] [LOG]       Total Actual Earned: Rs.7500.00
[2025-10-22T06:47:46.206Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:47:46.208Z] [LOG]       Expected Earned (until 2025-10-21): Rs.64000.00
[2025-10-22T06:47:46.208Z] [LOG]       Actual Earned: Rs.7500.00
[2025-10-22T06:47:46.209Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:47:46.210Z] [LOG]       Attendance Deduction: Rs.56500.00
[2025-10-22T06:47:46.210Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:47:46.211Z] [LOG]       📉 Shortfall: 113.00 hours (88.28% of expected)
[2025-10-22T06:47:46.213Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:47:46.214Z] [LOG]    Gross Salary: 100000
[2025-10-22T06:47:46.214Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:47:46.215Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:47:46.216Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:46.217Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:47:46.217Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:46.218Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:47:46.219Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:46.219Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:47:46.220Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:46.221Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:47:46.221Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:46.222Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:47:46.223Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:46.223Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:47:46.224Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:46.225Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:47:46.225Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:46.226Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:47:46.227Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:46.227Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:47:46.228Z] [LOG] Regular deductions for Uthpala null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:47:46.229Z] [LOG] Combined deductions for Uthpala null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 56500,
      "details": "Shortfall: 113.00h of 128.00h expected"
    }
  ],
  "total": 56500
}
[2025-10-22T06:47:46.694Z] [LOG] Creating components for record 0030375a-490d-4b2b-abaf-a69ca4be5bee: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:47:46.697Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 56500
}
[2025-10-22T06:47:47.151Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:47:47.607Z] [LOG] Created payroll_record_component: 63ebea44-303b-4797-b44e-db526ec5d316 for Attendance Deduction
[2025-10-22T06:47:48.293Z] [LOG] ✅ Financial balances updated successfully for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-22T06:47:48.294Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:47:48.294Z] [LOG] 
======================================================================
[2025-10-22T06:47:48.295Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Uthpala null
[2025-10-22T06:47:48.296Z] [LOG] ======================================================================
[2025-10-22T06:47:48.296Z] [LOG]    Gross Salary: Rs.100000.00
[2025-10-22T06:47:48.297Z] [LOG]    Total Deductions: Rs.56500.00
[2025-10-22T06:47:48.297Z] [LOG]       - Attendance Deduction: Rs.56500.00
[2025-10-22T06:47:48.298Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:47:48.299Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:47:48.299Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:47:48.300Z] [LOG]    NET SALARY: Rs.43500.00
[2025-10-22T06:47:48.301Z] [LOG] ======================================================================

[2025-10-22T06:47:48.302Z] [LOG] ✅ Uthpala null: Calculation completed successfully
[2025-10-22T06:47:48.303Z] [LOG] 📊 Progress: 1/34 (2.9%)
[2025-10-22T06:47:48.303Z] [LOG] 
🧮 Processing: Chemil null (EMP000040)
[2025-10-22T06:47:48.304Z] [LOG] 📋 Record ID: 0641272e-c5e3-4a6f-821a-57140e2b63e4
[2025-10-22T06:47:48.305Z] [LOG] 
======================================================================
[2025-10-22T06:47:48.306Z] [LOG] 🧮 CALCULATING PAYROLL: Chemil null (EMP000040)
[2025-10-22T06:47:48.307Z] [LOG] ======================================================================
[2025-10-22T06:47:49.235Z] [LOG] 🔍 Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-22T06:47:49.236Z] [LOG]    Total components: 10
[2025-10-22T06:47:49.236Z] [LOG]    Applicable components: 10
[2025-10-22T06:47:49.237Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T06:47:50.331Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:47:50.332Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:47:50.567Z] [LOG] 📊 Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-22T06:47:50.910Z] [LOG] 📊 Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-22T06:47:51.144Z] [LOG] 📊 Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-22T06:47:51.144Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:47:51.146Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:47:51.146Z] [LOG] 💰 GROSS CALCULATION for Chemil null:
[2025-10-22T06:47:51.147Z] [LOG]    Base Salary: 250000
[2025-10-22T06:47:51.148Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:47:51.148Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:47:51.149Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:51.378Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:47:51.612Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:47:51.613Z] [LOG]    Employee ID: 01442599-7105-11f0-a50f-98e743540430
[2025-10-22T06:47:51.613Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:47:51.614Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:47:51.614Z] [LOG]    Base Salary (Full Month): Rs.250000.00
[2025-10-22T06:47:51.919Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:47:51.919Z] [LOG]       Daily Salary: Rs.10000.00
[2025-10-22T06:47:51.920Z] [LOG]       Weekday Hourly Rate: Rs.1176.47
[2025-10-22T06:47:51.921Z] [LOG]       Saturday Hourly Rate: Rs.1176.47
[2025-10-22T06:47:51.921Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:47:51.922Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:47:51.923Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:47:52.607Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:47:52.608Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:47:52.609Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:47:52.610Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:47:52.610Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:47:52.611Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:47:52.612Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:47:52.612Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:47:52.613Z] [LOG]       Weekday: 110.50h × Rs.1176.47 = Rs.129999.93
[2025-10-22T06:47:52.614Z] [LOG]       Saturday: 25.50h × Rs.1176.47 = Rs.29999.99
[2025-10-22T06:47:52.614Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:47:52.615Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:47:52.616Z] [LOG]       Total Expected Earned: Rs.159999.92
[2025-10-22T06:47:52.845Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:47:52.846Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:47:52.846Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:47:52.847Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:47:52.847Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:47:52.848Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:47:52.849Z] [LOG]       Weekday: 17.00h × Rs.1176.47 = Rs.19999.99
[2025-10-22T06:47:52.850Z] [LOG]       Saturday: 0.00h × Rs.1176.47 = Rs.0.00
[2025-10-22T06:47:52.850Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:47:52.851Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:47:52.852Z] [LOG]       Total Actual Earned: Rs.19999.99
[2025-10-22T06:47:52.853Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:47:52.854Z] [LOG]       Expected Earned (until 2025-10-21): Rs.159999.92
[2025-10-22T06:47:52.855Z] [LOG]       Actual Earned: Rs.19999.99
[2025-10-22T06:47:52.855Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:47:52.856Z] [LOG]       Attendance Deduction: Rs.139999.93
[2025-10-22T06:47:52.856Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:47:52.857Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:47:52.858Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:47:52.859Z] [LOG]    Gross Salary: 250000
[2025-10-22T06:47:52.859Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:47:52.860Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:47:52.861Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:52.861Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:47:52.862Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:52.862Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:47:52.863Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:52.864Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:47:52.864Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:52.865Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:47:52.866Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:52.866Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:47:52.867Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:52.867Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:47:52.868Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:52.869Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:47:52.869Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:52.870Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:47:52.870Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:52.871Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:47:52.871Z] [LOG] Regular deductions for Chemil null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:47:52.872Z] [LOG] Combined deductions for Chemil null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 139999.93,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 139999.93
}
[2025-10-22T06:47:53.106Z] [LOG] Creating components for record 0641272e-c5e3-4a6f-821a-57140e2b63e4: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 1
}
[2025-10-22T06:47:53.107Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 139999.93
}
[2025-10-22T06:47:53.348Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:47:53.593Z] [LOG] Created payroll_record_component: 9041dd22-a527-4e85-9ab1-71410ca5ec6c for Attendance Deduction
[2025-10-22T06:47:53.593Z] [LOG] Processing component: {
  "name": "Income Tax",
  "type": "tax",
  "amount": 12000
}
[2025-10-22T06:47:53.821Z] [LOG] Using existing component ID: 72f98b53-4bd5-4713-98d0-e3a641ad8d0f
[2025-10-22T06:47:54.051Z] [LOG] Created payroll_record_component: 6c3aa5cf-89bc-40e2-afe1-66b28e8ab3cb for Income Tax
[2025-10-22T06:47:54.547Z] [LOG] ✅ Financial balances updated successfully for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-22T06:47:54.548Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:47:54.549Z] [LOG] 
======================================================================
[2025-10-22T06:47:54.550Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chemil null
[2025-10-22T06:47:54.550Z] [LOG] ======================================================================
[2025-10-22T06:47:54.551Z] [LOG]    Gross Salary: Rs.250000.00
[2025-10-22T06:47:54.551Z] [LOG]    Total Deductions: Rs.139999.93
[2025-10-22T06:47:54.552Z] [LOG]       - Attendance Deduction: Rs.139999.93
[2025-10-22T06:47:54.553Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:47:54.553Z] [LOG]    Total Taxes: Rs.12000.00
[2025-10-22T06:47:54.554Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:47:54.555Z] [LOG]    NET SALARY: Rs.98000.07
[2025-10-22T06:47:54.556Z] [LOG] ======================================================================

[2025-10-22T06:47:54.557Z] [LOG] ✅ Chemil null: Calculation completed successfully
[2025-10-22T06:47:54.558Z] [LOG] 📊 Progress: 2/34 (5.9%)
[2025-10-22T06:47:54.560Z] [LOG] 
🧮 Processing: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-22T06:47:54.561Z] [LOG] 📋 Record ID: 08020100-4d51-4416-b3c1-d162958af9aa
[2025-10-22T06:47:54.561Z] [LOG] 
======================================================================
[2025-10-22T06:47:54.562Z] [LOG] 🧮 CALCULATING PAYROLL: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-22T06:47:54.563Z] [LOG] ======================================================================
[2025-10-22T06:47:55.550Z] [LOG] 🔍 Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-22T06:47:55.551Z] [LOG]    Total components: 10
[2025-10-22T06:47:55.551Z] [LOG]    Applicable components: 10
[2025-10-22T06:47:55.552Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T06:47:56.698Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:47:56.699Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:47:56.988Z] [LOG] 📊 Found 0 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-22T06:47:57.223Z] [LOG] 📊 Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-22T06:47:57.453Z] [LOG] 📊 Found 0 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-22T06:47:57.454Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:47:57.455Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:47:57.456Z] [LOG] 💰 GROSS CALCULATION for Ashen Nirmal Wadugodapitiya null:
[2025-10-22T06:47:57.457Z] [LOG]    Base Salary: 50000
[2025-10-22T06:47:57.457Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:47:57.458Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:47:57.459Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:57.687Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:47:57.918Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:47:57.918Z] [LOG]    Employee ID: 0144461e-7105-11f0-a50f-98e743540430
[2025-10-22T06:47:57.919Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:47:57.920Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:47:57.920Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T06:47:58.153Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:47:58.154Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T06:47:58.154Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T06:47:58.155Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T06:47:58.156Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:47:58.156Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:47:58.157Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:47:58.923Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:47:58.923Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:47:58.924Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:47:58.924Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:47:58.924Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:47:58.925Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:47:58.925Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:47:58.925Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:47:58.925Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T06:47:58.926Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T06:47:58.926Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:47:58.926Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:47:58.926Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T06:47:59.425Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:47:59.426Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:47:59.427Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:47:59.427Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:47:59.428Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:47:59.429Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:47:59.429Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T06:47:59.430Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T06:47:59.431Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:47:59.431Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:47:59.432Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T06:47:59.433Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:47:59.434Z] [LOG]       Expected Earned (until 2025-10-21): Rs.31999.44
[2025-10-22T06:47:59.435Z] [LOG]       Actual Earned: Rs.3999.93
[2025-10-22T06:47:59.435Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:47:59.436Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T06:47:59.437Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:47:59.437Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:47:59.438Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:47:59.439Z] [LOG]    Gross Salary: 50000
[2025-10-22T06:47:59.439Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:47:59.440Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:47:59.441Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:59.441Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:47:59.442Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:59.443Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:47:59.443Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:59.444Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:47:59.444Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:59.445Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:47:59.446Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:59.446Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:47:59.447Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:59.447Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:47:59.448Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:59.449Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:47:59.449Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:59.450Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:47:59.451Z] [LOG]    Fixed amount: 0
[2025-10-22T06:47:59.451Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:47:59.452Z] [LOG] Regular deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:47:59.453Z] [LOG] Combined deductions for Ashen Nirmal Wadugodapitiya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 27999.51
}
[2025-10-22T06:47:59.688Z] [LOG] Creating components for record 08020100-4d51-4416-b3c1-d162958af9aa: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:47:59.691Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T06:47:59.923Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:48:00.153Z] [LOG] Created payroll_record_component: b2d37d4c-63d2-494c-be01-81b4af6fc0b1 for Attendance Deduction
[2025-10-22T06:48:00.646Z] [LOG] ✅ Financial balances updated successfully for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:00.647Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:48:00.648Z] [LOG] 
======================================================================
[2025-10-22T06:48:00.649Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ashen Nirmal Wadugodapitiya null
[2025-10-22T06:48:00.649Z] [LOG] ======================================================================
[2025-10-22T06:48:00.650Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T06:48:00.651Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T06:48:00.651Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T06:48:00.652Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:48:00.653Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:48:00.653Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:48:00.654Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T06:48:00.655Z] [LOG] ======================================================================

[2025-10-22T06:48:00.656Z] [LOG] ✅ Ashen Nirmal Wadugodapitiya null: Calculation completed successfully
[2025-10-22T06:48:00.657Z] [LOG] 📊 Progress: 3/34 (8.8%)
[2025-10-22T06:48:00.657Z] [LOG] 
🧮 Processing: Anoj null (EMP000014)
[2025-10-22T06:48:00.658Z] [LOG] 📋 Record ID: 1e47d2ee-b942-4bc6-9dab-110b4b96a63e
[2025-10-22T06:48:00.659Z] [LOG] 
======================================================================
[2025-10-22T06:48:00.660Z] [LOG] 🧮 CALCULATING PAYROLL: Anoj null (EMP000014)
[2025-10-22T06:48:00.660Z] [LOG] ======================================================================
[2025-10-22T06:48:01.674Z] [LOG] 🔍 Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-22T06:48:01.675Z] [LOG]    Total components: 10
[2025-10-22T06:48:01.675Z] [LOG]    Applicable components: 10
[2025-10-22T06:48:01.675Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T06:48:02.608Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:48:02.608Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:48:02.853Z] [LOG] 📊 Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:03.086Z] [LOG] 📊 Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:03.429Z] [LOG] 📊 Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:03.429Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:48:03.430Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:48:03.430Z] [LOG] 💰 GROSS CALCULATION for Anoj null:
[2025-10-22T06:48:03.430Z] [LOG]    Base Salary: 50000
[2025-10-22T06:48:03.431Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:48:03.431Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:48:03.431Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:03.660Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:48:04.052Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:48:04.052Z] [LOG]    Employee ID: 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:04.052Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:48:04.053Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:48:04.053Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T06:48:04.293Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:48:04.294Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T06:48:04.294Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T06:48:04.294Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T06:48:04.295Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:48:04.295Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:48:04.295Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:48:05.065Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:48:05.065Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:48:05.065Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:48:05.065Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:48:05.066Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:48:05.066Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:48:05.066Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:48:05.067Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:48:05.067Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T06:48:05.067Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T06:48:05.067Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:05.068Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:05.068Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T06:48:05.296Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:48:05.296Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:48:05.296Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:48:05.297Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:48:05.297Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:48:05.297Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:48:05.298Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T06:48:05.298Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T06:48:05.299Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:05.299Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:05.299Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T06:48:05.299Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:48:05.300Z] [LOG]       Expected Earned (until 2025-10-21): Rs.31999.44
[2025-10-22T06:48:05.300Z] [LOG]       Actual Earned: Rs.3999.93
[2025-10-22T06:48:05.300Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:05.300Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T06:48:05.301Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:48:05.301Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:48:05.301Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:48:05.302Z] [LOG]    Gross Salary: 50000
[2025-10-22T06:48:05.302Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:48:05.302Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:48:05.302Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:05.303Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:48:05.303Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:05.303Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:48:05.304Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:05.304Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:48:05.304Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:05.304Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:48:05.305Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:05.305Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:48:05.305Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:05.306Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:48:05.306Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:05.306Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:48:05.306Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:05.307Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:48:05.307Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:05.307Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:48:05.307Z] [LOG] Regular deductions for Anoj null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:48:05.308Z] [LOG] Combined deductions for Anoj null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 27999.51
}
[2025-10-22T06:48:05.537Z] [LOG] Creating components for record 1e47d2ee-b942-4bc6-9dab-110b4b96a63e: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:48:05.538Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T06:48:05.769Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:48:06.010Z] [LOG] Created payroll_record_component: 1c256f93-b0ee-4b59-8a30-cf34bb0022bb for Attendance Deduction
[2025-10-22T06:48:06.463Z] [LOG] ✅ Financial balances updated successfully for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:06.463Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:48:06.463Z] [LOG] 
======================================================================
[2025-10-22T06:48:06.464Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Anoj null
[2025-10-22T06:48:06.464Z] [LOG] ======================================================================
[2025-10-22T06:48:06.464Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T06:48:06.465Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T06:48:06.465Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T06:48:06.465Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:48:06.465Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:48:06.466Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:48:06.466Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T06:48:06.466Z] [LOG] ======================================================================

[2025-10-22T06:48:06.466Z] [LOG] ✅ Anoj null: Calculation completed successfully
[2025-10-22T06:48:06.467Z] [LOG] 📊 Progress: 4/34 (11.8%)
[2025-10-22T06:48:06.467Z] [LOG] 
🧮 Processing: Ratheeshanan null (EMP000047)
[2025-10-22T06:48:06.467Z] [LOG] 📋 Record ID: 20bbaa6f-40fc-4862-9998-a085a2e53de5
[2025-10-22T06:48:06.467Z] [LOG] 
======================================================================
[2025-10-22T06:48:06.468Z] [LOG] 🧮 CALCULATING PAYROLL: Ratheeshanan null (EMP000047)
[2025-10-22T06:48:06.468Z] [LOG] ======================================================================
[2025-10-22T06:48:07.514Z] [LOG] 🔍 Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-22T06:48:07.514Z] [LOG]    Total components: 10
[2025-10-22T06:48:07.514Z] [LOG]    Applicable components: 10
[2025-10-22T06:48:07.514Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T06:48:08.546Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:48:08.546Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:48:08.773Z] [LOG] 📊 Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:09.001Z] [LOG] 📊 Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:09.229Z] [LOG] 📊 Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:09.229Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:48:09.230Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:48:09.230Z] [LOG] 💰 GROSS CALCULATION for Ratheeshanan null:
[2025-10-22T06:48:09.230Z] [LOG]    Base Salary: 25000
[2025-10-22T06:48:09.231Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:48:09.231Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:48:09.231Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:09.457Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:48:09.683Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:48:09.684Z] [LOG]    Employee ID: 01444966-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:09.684Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:48:09.684Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:48:09.685Z] [LOG]    Base Salary (Full Month): Rs.25000.00
[2025-10-22T06:48:09.919Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:48:09.920Z] [LOG]       Daily Salary: Rs.1000.00
[2025-10-22T06:48:09.920Z] [LOG]       Weekday Hourly Rate: Rs.117.65
[2025-10-22T06:48:09.920Z] [LOG]       Saturday Hourly Rate: Rs.117.65
[2025-10-22T06:48:09.921Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:48:09.921Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:48:09.921Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:48:10.606Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:48:10.606Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:48:10.607Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:48:10.608Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:48:10.608Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:48:10.609Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:48:10.610Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:48:10.610Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:48:10.611Z] [LOG]       Weekday: 110.50h × Rs.117.65 = Rs.13000.33
[2025-10-22T06:48:10.612Z] [LOG]       Saturday: 25.50h × Rs.117.65 = Rs.3000.08
[2025-10-22T06:48:10.612Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:10.613Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:10.614Z] [LOG]       Total Expected Earned: Rs.16000.40
[2025-10-22T06:48:10.844Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:48:10.845Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:48:10.845Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:48:10.846Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:48:10.846Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:48:10.847Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:48:10.848Z] [LOG]       Weekday: 17.00h × Rs.117.65 = Rs.2000.05
[2025-10-22T06:48:10.848Z] [LOG]       Saturday: 0.00h × Rs.117.65 = Rs.0.00
[2025-10-22T06:48:10.849Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:10.850Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:10.850Z] [LOG]       Total Actual Earned: Rs.2000.05
[2025-10-22T06:48:10.851Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:48:10.852Z] [LOG]       Expected Earned (until 2025-10-21): Rs.16000.40
[2025-10-22T06:48:10.853Z] [LOG]       Actual Earned: Rs.2000.05
[2025-10-22T06:48:10.854Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:10.854Z] [LOG]       Attendance Deduction: Rs.14000.35
[2025-10-22T06:48:10.855Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:48:10.856Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:48:10.857Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:48:10.857Z] [LOG]    Gross Salary: 25000
[2025-10-22T06:48:10.858Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:48:10.859Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:48:10.859Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:10.860Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:48:10.861Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:10.861Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:48:10.862Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:10.862Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:48:10.863Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:10.864Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:48:10.864Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:10.865Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:48:10.865Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:10.867Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:48:10.867Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:10.868Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:48:10.869Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:10.869Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:48:10.870Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:10.870Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:48:10.871Z] [LOG] Regular deductions for Ratheeshanan null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:48:10.872Z] [LOG] Combined deductions for Ratheeshanan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 14000.350000000002,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 14000.350000000002
}
[2025-10-22T06:48:11.107Z] [LOG] Creating components for record 20bbaa6f-40fc-4862-9998-a085a2e53de5: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:48:11.108Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 14000.350000000002
}
[2025-10-22T06:48:11.339Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:48:11.576Z] [LOG] Created payroll_record_component: 722d6c42-95e4-4547-aa45-1cbc301c4039 for Attendance Deduction
[2025-10-22T06:48:12.034Z] [LOG] ✅ Financial balances updated successfully for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:12.034Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:48:12.035Z] [LOG] 
======================================================================
[2025-10-22T06:48:12.036Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ratheeshanan null
[2025-10-22T06:48:12.036Z] [LOG] ======================================================================
[2025-10-22T06:48:12.037Z] [LOG]    Gross Salary: Rs.25000.00
[2025-10-22T06:48:12.038Z] [LOG]    Total Deductions: Rs.14000.35
[2025-10-22T06:48:12.038Z] [LOG]       - Attendance Deduction: Rs.14000.35
[2025-10-22T06:48:12.039Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:48:12.039Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:48:12.040Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:48:12.041Z] [LOG]    NET SALARY: Rs.10999.65
[2025-10-22T06:48:12.042Z] [LOG] ======================================================================

[2025-10-22T06:48:12.043Z] [LOG] ✅ Ratheeshanan null: Calculation completed successfully
[2025-10-22T06:48:12.044Z] [LOG] 📊 Progress: 5/34 (14.7%)
[2025-10-22T06:48:12.044Z] [LOG] 
🧮 Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-22T06:48:12.046Z] [LOG] 📋 Record ID: 2d1b7de1-3fdb-473f-8160-6e5481485392
[2025-10-22T06:48:12.046Z] [LOG] 
======================================================================
[2025-10-22T06:48:12.047Z] [LOG] 🧮 CALCULATING PAYROLL: Ruvindu Hewabandu null (EMP000027)
[2025-10-22T06:48:12.048Z] [LOG] ======================================================================
[2025-10-22T06:48:12.958Z] [LOG] 🔍 Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-22T06:48:12.959Z] [LOG]    Total components: 10
[2025-10-22T06:48:12.960Z] [LOG]    Applicable components: 10
[2025-10-22T06:48:12.960Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-22T06:48:13.873Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:48:13.874Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:48:14.101Z] [LOG] 📊 Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:14.328Z] [LOG] 📊 Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:14.556Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:14.557Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:48:14.558Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:48:14.559Z] [LOG] 💰 GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-22T06:48:14.560Z] [LOG]    Base Salary: 0
[2025-10-22T06:48:14.560Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:48:14.561Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:48:14.562Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:14.793Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:48:15.021Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:48:15.022Z] [LOG]    Employee ID: 0143e915-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:15.022Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:48:15.023Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:48:15.024Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-22T06:48:15.254Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:48:15.255Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-22T06:48:15.256Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-22T06:48:15.256Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-22T06:48:15.257Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:48:15.257Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:48:15.258Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:48:16.165Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:48:16.166Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:48:16.167Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:48:16.167Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:48:16.168Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:48:16.169Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:48:16.169Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:48:16.170Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:48:16.171Z] [LOG]       Weekday: 110.50h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:16.171Z] [LOG]       Saturday: 25.50h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:16.172Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:16.173Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:16.173Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-22T06:48:16.400Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:48:16.401Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:48:16.402Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:48:16.402Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:48:16.403Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:48:16.404Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:48:16.404Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:16.405Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:16.406Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:16.406Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:16.407Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-22T06:48:16.408Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:48:16.410Z] [LOG]       Expected Earned (until 2025-10-21): Rs.0.00
[2025-10-22T06:48:16.410Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-22T06:48:16.411Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:16.411Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-22T06:48:16.412Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:48:16.413Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-22T06:48:16.414Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:48:16.414Z] [LOG]    Gross Salary: 0
[2025-10-22T06:48:16.415Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:48:16.416Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:48:16.416Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:16.417Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:48:16.418Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:16.418Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:48:16.419Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:16.419Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:48:16.420Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:16.421Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:48:16.421Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:16.422Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:48:16.423Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:16.423Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:48:16.424Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:16.425Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:48:16.425Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:16.426Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:48:16.426Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:16.427Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:48:16.428Z] [LOG] Regular deductions for Ruvindu Hewabandu null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:48:16.429Z] [LOG] Combined deductions for Ruvindu Hewabandu null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 0
}
[2025-10-22T06:48:16.659Z] [LOG] Creating components for record 2d1b7de1-3fdb-473f-8160-6e5481485392: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:48:16.662Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-22T06:48:16.897Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:48:17.123Z] [LOG] Created payroll_record_component: 93ce5867-3dbd-40ec-94b2-20db3aad5124 for Attendance Deduction
[2025-10-22T06:48:17.576Z] [LOG] ✅ Financial balances updated successfully for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:17.576Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:48:17.577Z] [LOG] 
======================================================================
[2025-10-22T06:48:17.578Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ruvindu Hewabandu null
[2025-10-22T06:48:17.578Z] [LOG] ======================================================================
[2025-10-22T06:48:17.579Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-22T06:48:17.580Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-22T06:48:17.580Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-22T06:48:17.581Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:48:17.581Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:48:17.583Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:48:17.584Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-22T06:48:17.585Z] [LOG] ======================================================================

[2025-10-22T06:48:17.585Z] [LOG] ✅ Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-22T06:48:17.586Z] [LOG] 📊 Progress: 6/34 (17.6%)
[2025-10-22T06:48:17.587Z] [LOG] 
🧮 Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-22T06:48:17.588Z] [LOG] 📋 Record ID: 3e569742-50f2-4da6-be4e-e4b0e0a13166
[2025-10-22T06:48:17.589Z] [LOG] 
======================================================================
[2025-10-22T06:48:17.589Z] [LOG] 🧮 CALCULATING PAYROLL: Sujevan Selvaratnam null (EMP000026)
[2025-10-22T06:48:17.590Z] [LOG] ======================================================================
[2025-10-22T06:48:18.530Z] [LOG] 🔍 Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-22T06:48:18.531Z] [LOG]    Total components: 10
[2025-10-22T06:48:18.532Z] [LOG]    Applicable components: 10
[2025-10-22T06:48:18.532Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-22T06:48:19.441Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:48:19.442Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:48:19.674Z] [LOG] 📊 Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:19.904Z] [LOG] 📊 Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:20.136Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:20.137Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:48:20.138Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:48:20.139Z] [LOG] 💰 GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-22T06:48:20.140Z] [LOG]    Base Salary: 1
[2025-10-22T06:48:20.140Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:48:20.141Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:48:20.142Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:20.380Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:48:20.616Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:48:20.617Z] [LOG]    Employee ID: 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:20.618Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:48:20.618Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:48:20.619Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-22T06:48:20.858Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:48:20.859Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-22T06:48:20.859Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-22T06:48:20.860Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-22T06:48:20.860Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:48:20.861Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:48:20.862Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:48:21.554Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:48:21.555Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:48:21.556Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:48:21.556Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:48:21.557Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:48:21.558Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:48:21.558Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:48:21.559Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:48:21.560Z] [LOG]       Weekday: 110.50h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:21.560Z] [LOG]       Saturday: 25.50h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:21.561Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:21.562Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:21.563Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-22T06:48:21.796Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:48:21.797Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:48:21.798Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:48:21.798Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:48:21.799Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:48:21.800Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:48:21.800Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:21.801Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:21.802Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:21.803Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:21.803Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-22T06:48:21.805Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:48:21.806Z] [LOG]       Expected Earned (until 2025-10-21): Rs.0.00
[2025-10-22T06:48:21.806Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-22T06:48:21.807Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:21.807Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-22T06:48:21.809Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:48:21.809Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-22T06:48:21.810Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:48:21.811Z] [LOG]    Gross Salary: 1
[2025-10-22T06:48:21.811Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:48:21.812Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:48:21.812Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:21.813Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:48:21.814Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:21.815Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:48:21.815Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:21.816Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:48:21.817Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:21.817Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:48:21.818Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:21.818Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:48:21.819Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:21.820Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:48:21.820Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:21.821Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:48:21.822Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:21.822Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:48:21.823Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:21.824Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:48:21.824Z] [LOG] Regular deductions for Sujevan Selvaratnam null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:48:21.825Z] [LOG] Combined deductions for Sujevan Selvaratnam null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 0
}
[2025-10-22T06:48:22.064Z] [LOG] Creating components for record 3e569742-50f2-4da6-be4e-e4b0e0a13166: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:48:22.066Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-22T06:48:22.295Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:48:22.525Z] [LOG] Created payroll_record_component: 46af4588-9f8f-41dc-90eb-7137658a4ceb for Attendance Deduction
[2025-10-22T06:48:22.986Z] [LOG] ✅ Financial balances updated successfully for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:22.987Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:48:22.987Z] [LOG] 
======================================================================
[2025-10-22T06:48:22.988Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sujevan Selvaratnam null
[2025-10-22T06:48:22.989Z] [LOG] ======================================================================
[2025-10-22T06:48:22.989Z] [LOG]    Gross Salary: Rs.1.00
[2025-10-22T06:48:22.990Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-22T06:48:22.991Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-22T06:48:22.991Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:48:22.992Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:48:22.993Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:48:22.993Z] [LOG]    NET SALARY: Rs.1.00
[2025-10-22T06:48:22.994Z] [LOG] ======================================================================

[2025-10-22T06:48:22.995Z] [LOG] ✅ Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-22T06:48:22.996Z] [LOG] 📊 Progress: 7/34 (20.6%)
[2025-10-22T06:48:22.996Z] [LOG] 
🧮 Processing: Ishara null (EMP000011)
[2025-10-22T06:48:22.997Z] [LOG] 📋 Record ID: 44ef2475-6496-4f5d-8d47-c2e208f5105f
[2025-10-22T06:48:22.998Z] [LOG] 
======================================================================
[2025-10-22T06:48:22.999Z] [LOG] 🧮 CALCULATING PAYROLL: Ishara null (EMP000011)
[2025-10-22T06:48:23.000Z] [LOG] ======================================================================
[2025-10-22T06:48:23.917Z] [LOG] 🔍 Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-22T06:48:23.917Z] [LOG]    Total components: 10
[2025-10-22T06:48:23.918Z] [LOG]    Applicable components: 10
[2025-10-22T06:48:23.919Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-22T06:48:24.837Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:48:24.838Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:48:25.068Z] [LOG] 📊 Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:25.297Z] [LOG] 📊 Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:25.525Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:25.526Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:48:25.527Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:48:25.528Z] [LOG] 💰 GROSS CALCULATION for Ishara null:
[2025-10-22T06:48:25.528Z] [LOG]    Base Salary: 50000
[2025-10-22T06:48:25.529Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:48:25.530Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:48:25.530Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:25.758Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:48:25.988Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:48:25.989Z] [LOG]    Employee ID: 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:25.990Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:48:25.990Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:48:25.991Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T06:48:26.205Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:48:26.206Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T06:48:26.207Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T06:48:26.208Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T06:48:26.208Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:48:26.209Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:48:26.210Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:48:26.930Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:48:26.931Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:48:26.931Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:48:26.932Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:48:26.933Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:48:26.934Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:48:26.934Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:48:26.935Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:48:26.936Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T06:48:26.936Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T06:48:26.937Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:26.938Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:26.939Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T06:48:27.170Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:48:27.170Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:48:27.170Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:48:27.171Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:48:27.171Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:48:27.171Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:48:27.172Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T06:48:27.172Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T06:48:27.172Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:27.172Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:27.173Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T06:48:27.173Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:48:27.173Z] [LOG]       Expected Earned (until 2025-10-21): Rs.31999.44
[2025-10-22T06:48:27.173Z] [LOG]       Actual Earned: Rs.3999.93
[2025-10-22T06:48:27.174Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:27.174Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T06:48:27.174Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:48:27.174Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:48:27.174Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:48:27.175Z] [LOG]    Gross Salary: 50000
[2025-10-22T06:48:27.175Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:48:27.175Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:48:27.176Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:27.176Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:48:27.176Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:27.176Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:48:27.177Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:27.177Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:48:27.177Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:27.177Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:48:27.177Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:27.177Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:48:27.178Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:27.178Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:48:27.178Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:27.178Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:48:27.178Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:27.178Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:48:27.179Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:27.179Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:48:27.179Z] [LOG] Regular deductions for Ishara null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:48:27.179Z] [LOG] Combined deductions for Ishara null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 27999.51
}
[2025-10-22T06:48:27.411Z] [LOG] Creating components for record 44ef2475-6496-4f5d-8d47-c2e208f5105f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:48:27.413Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T06:48:27.643Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:48:27.875Z] [LOG] Created payroll_record_component: 383c47f7-3170-44d5-aaad-c42abc7d062c for Attendance Deduction
[2025-10-22T06:48:28.332Z] [LOG] ✅ Financial balances updated successfully for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:28.332Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:48:28.333Z] [LOG] 
======================================================================
[2025-10-22T06:48:28.333Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ishara null
[2025-10-22T06:48:28.333Z] [LOG] ======================================================================
[2025-10-22T06:48:28.334Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T06:48:28.334Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T06:48:28.335Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T06:48:28.337Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:48:28.338Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:48:28.338Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:48:28.339Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T06:48:28.339Z] [LOG] ======================================================================

[2025-10-22T06:48:28.340Z] [LOG] ✅ Ishara null: Calculation completed successfully
[2025-10-22T06:48:28.340Z] [LOG] 📊 Progress: 8/34 (23.5%)
[2025-10-22T06:48:28.340Z] [LOG] 
🧮 Processing: Dharshika null (EMP000009)
[2025-10-22T06:48:28.341Z] [LOG] 📋 Record ID: 52330b4d-a658-4644-9745-fb250b0b4d1d
[2025-10-22T06:48:28.341Z] [LOG] 
======================================================================
[2025-10-22T06:48:28.342Z] [LOG] 🧮 CALCULATING PAYROLL: Dharshika null (EMP000009)
[2025-10-22T06:48:28.342Z] [LOG] ======================================================================
[2025-10-22T06:48:29.256Z] [LOG] 🔍 Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-22T06:48:29.257Z] [LOG]    Total components: 10
[2025-10-22T06:48:29.258Z] [LOG]    Applicable components: 10
[2025-10-22T06:48:29.258Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T06:48:30.170Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:48:30.171Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:48:30.405Z] [LOG] 📊 Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:30.647Z] [LOG] 📊 Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:30.876Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:30.877Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:48:30.878Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:48:30.879Z] [LOG] 💰 GROSS CALCULATION for Dharshika null:
[2025-10-22T06:48:30.880Z] [LOG]    Base Salary: 100000
[2025-10-22T06:48:30.880Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:48:30.881Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:48:30.882Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:31.109Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:48:31.339Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:48:31.340Z] [LOG]    Employee ID: 0143a994-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:31.341Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:48:31.341Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:48:31.342Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-22T06:48:31.575Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:48:31.576Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-22T06:48:31.577Z] [LOG]       Weekday Hourly Rate: Rs.470.59
[2025-10-22T06:48:31.578Z] [LOG]       Saturday Hourly Rate: Rs.470.59
[2025-10-22T06:48:31.578Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:48:31.579Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:48:31.579Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:48:32.270Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:48:32.271Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:48:32.271Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:48:32.272Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:48:32.273Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:48:32.274Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:48:32.274Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:48:32.275Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:48:32.276Z] [LOG]       Weekday: 110.50h × Rs.470.59 = Rs.52000.19
[2025-10-22T06:48:32.277Z] [LOG]       Saturday: 25.50h × Rs.470.59 = Rs.12000.05
[2025-10-22T06:48:32.277Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:32.278Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:32.279Z] [LOG]       Total Expected Earned: Rs.64000.24
[2025-10-22T06:48:32.507Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:48:32.508Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:48:32.509Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:48:32.509Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:48:32.510Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:48:32.510Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:48:32.511Z] [LOG]       Weekday: 17.00h × Rs.470.59 = Rs.8000.03
[2025-10-22T06:48:32.512Z] [LOG]       Saturday: 0.00h × Rs.470.59 = Rs.0.00
[2025-10-22T06:48:32.512Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:32.513Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:32.514Z] [LOG]       Total Actual Earned: Rs.8000.03
[2025-10-22T06:48:32.515Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:48:32.516Z] [LOG]       Expected Earned (until 2025-10-21): Rs.64000.24
[2025-10-22T06:48:32.517Z] [LOG]       Actual Earned: Rs.8000.03
[2025-10-22T06:48:32.517Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:32.518Z] [LOG]       Attendance Deduction: Rs.56000.21
[2025-10-22T06:48:32.519Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:48:32.520Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:48:32.521Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:48:32.522Z] [LOG]    Gross Salary: 100000
[2025-10-22T06:48:32.523Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:48:32.523Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:48:32.524Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:32.525Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:48:32.525Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:32.526Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:48:32.526Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:32.527Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:48:32.528Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:32.528Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:48:32.529Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:32.530Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:48:32.530Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:32.531Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:48:32.531Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:32.532Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:48:32.532Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:32.532Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:48:32.533Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:32.533Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:48:32.534Z] [LOG] Regular deductions for Dharshika null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:48:32.534Z] [LOG] Combined deductions for Dharshika null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 56000.21,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 56000.21
}
[2025-10-22T06:48:32.788Z] [LOG] Creating components for record 52330b4d-a658-4644-9745-fb250b0b4d1d: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:48:32.789Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 56000.21
}
[2025-10-22T06:48:33.017Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:48:33.252Z] [LOG] Created payroll_record_component: 3bf8ed4d-da76-4475-9e57-238241fe8ed6 for Attendance Deduction
[2025-10-22T06:48:33.702Z] [LOG] ✅ Financial balances updated successfully for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:33.703Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:48:33.704Z] [LOG] 
======================================================================
[2025-10-22T06:48:33.704Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Dharshika null
[2025-10-22T06:48:33.705Z] [LOG] ======================================================================
[2025-10-22T06:48:33.706Z] [LOG]    Gross Salary: Rs.100000.00
[2025-10-22T06:48:33.706Z] [LOG]    Total Deductions: Rs.56000.21
[2025-10-22T06:48:33.707Z] [LOG]       - Attendance Deduction: Rs.56000.21
[2025-10-22T06:48:33.708Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:48:33.709Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:48:33.710Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:48:33.710Z] [LOG]    NET SALARY: Rs.43999.79
[2025-10-22T06:48:33.711Z] [LOG] ======================================================================

[2025-10-22T06:48:33.712Z] [LOG] ✅ Dharshika null: Calculation completed successfully
[2025-10-22T06:48:33.712Z] [LOG] 📊 Progress: 9/34 (26.5%)
[2025-10-22T06:48:33.713Z] [LOG] 
🧮 Processing: Faizan Faizan (EMP000003)
[2025-10-22T06:48:33.714Z] [LOG] 📋 Record ID: 586d2166-666e-4ff0-995a-e6961b34a2f9
[2025-10-22T06:48:33.715Z] [LOG] 
======================================================================
[2025-10-22T06:48:33.716Z] [LOG] 🧮 CALCULATING PAYROLL: Faizan Faizan (EMP000003)
[2025-10-22T06:48:33.716Z] [LOG] ======================================================================
[2025-10-22T06:48:34.632Z] [LOG] 🔍 Component filtering for employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-22T06:48:34.633Z] [LOG]    Total components: 10
[2025-10-22T06:48:34.633Z] [LOG]    Applicable components: 10
[2025-10-22T06:48:34.634Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-22T06:48:35.539Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:48:35.540Z] [LOG] 🔄 Processing financial records for employee 0143a057-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:48:35.767Z] [LOG] 📊 Found 0 active loans for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:35.997Z] [LOG] 📊 Found 0 active advances for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:36.225Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:36.225Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:48:36.226Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:48:36.226Z] [LOG] 💰 GROSS CALCULATION for Faizan Faizan:
[2025-10-22T06:48:36.227Z] [LOG]    Base Salary: 50000
[2025-10-22T06:48:36.227Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:48:36.228Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:48:36.228Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:36.455Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:48:36.683Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:48:36.683Z] [LOG]    Employee ID: 0143a057-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:36.684Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:48:36.685Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:48:36.685Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T06:48:36.916Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:48:36.916Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T06:48:36.917Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T06:48:36.918Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T06:48:36.918Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:48:36.919Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:48:36.920Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:48:37.602Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:48:37.603Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:48:37.603Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:48:37.604Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:48:37.605Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:48:37.605Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:48:37.606Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:48:37.606Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:48:37.607Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T06:48:37.608Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T06:48:37.609Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:37.609Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:37.610Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T06:48:37.841Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:48:37.842Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:48:37.843Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:48:37.843Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:48:37.844Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:48:37.844Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:48:37.845Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T06:48:37.846Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T06:48:37.846Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:37.847Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:37.848Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T06:48:37.849Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:48:37.849Z] [LOG]       Expected Earned (until 2025-10-21): Rs.31999.44
[2025-10-22T06:48:37.850Z] [LOG]       Actual Earned: Rs.3999.93
[2025-10-22T06:48:37.851Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:37.851Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T06:48:37.852Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:48:37.853Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:48:37.854Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:48:37.854Z] [LOG]    Gross Salary: 50000
[2025-10-22T06:48:37.855Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:48:37.856Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:48:37.856Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:37.857Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:48:37.857Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:37.858Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:48:37.859Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:37.859Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:48:37.860Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:37.861Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:48:37.861Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:37.862Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:48:37.862Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:37.863Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:48:37.864Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:37.864Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:48:37.865Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:37.866Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:48:37.866Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:37.867Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:48:37.867Z] [LOG] Regular deductions for Faizan Faizan: {
  "components": [],
  "total": 0
}
[2025-10-22T06:48:37.868Z] [LOG] Combined deductions for Faizan Faizan: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 27999.51
}
[2025-10-22T06:48:38.100Z] [LOG] Creating components for record 586d2166-666e-4ff0-995a-e6961b34a2f9: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:48:38.102Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T06:48:38.335Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:48:38.564Z] [LOG] Created payroll_record_component: 62d00ecb-0c73-4754-b7d3-c3640f0bafc4 for Attendance Deduction
[2025-10-22T06:48:39.020Z] [LOG] ✅ Financial balances updated successfully for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:39.021Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:48:39.022Z] [LOG] 
======================================================================
[2025-10-22T06:48:39.022Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Faizan Faizan
[2025-10-22T06:48:39.023Z] [LOG] ======================================================================
[2025-10-22T06:48:39.024Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T06:48:39.024Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T06:48:39.025Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T06:48:39.025Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:48:39.026Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:48:39.027Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:48:39.027Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T06:48:39.028Z] [LOG] ======================================================================

[2025-10-22T06:48:39.029Z] [LOG] ✅ Faizan Faizan: Calculation completed successfully
[2025-10-22T06:48:39.030Z] [LOG] 📊 Progress: 10/34 (29.4%)
[2025-10-22T06:48:39.030Z] [LOG] 
🧮 Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-22T06:48:39.031Z] [LOG] 📋 Record ID: 617a00c3-1cd4-41ce-9b05-96e148cbc681
[2025-10-22T06:48:39.032Z] [LOG] 
======================================================================
[2025-10-22T06:48:39.033Z] [LOG] 🧮 CALCULATING PAYROLL: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-22T06:48:39.033Z] [LOG] ======================================================================
[2025-10-22T06:48:39.948Z] [LOG] 🔍 Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-22T06:48:39.948Z] [LOG]    Total components: 10
[2025-10-22T06:48:39.948Z] [LOG]    Applicable components: 10
[2025-10-22T06:48:39.949Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-22T06:48:40.861Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:48:40.861Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:48:41.089Z] [LOG] 📊 Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:41.326Z] [LOG] 📊 Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:41.557Z] [LOG] 📊 Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:41.558Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:48:41.559Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:48:41.560Z] [LOG] 💰 GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-22T06:48:41.560Z] [LOG]    Base Salary: 50000
[2025-10-22T06:48:41.561Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:48:41.561Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:48:41.562Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:41.788Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:48:42.018Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:48:42.019Z] [LOG]    Employee ID: 0144315c-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:42.019Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:48:42.020Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:48:42.021Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T06:48:42.249Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:48:42.250Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T06:48:42.251Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T06:48:42.251Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T06:48:42.252Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:48:42.253Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:48:42.253Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:48:42.940Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:48:42.940Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:48:42.941Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:48:42.942Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:48:42.942Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:48:42.943Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:48:42.944Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:48:42.944Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:48:42.945Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T06:48:42.946Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T06:48:42.946Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:42.947Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:42.948Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T06:48:43.175Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:48:43.176Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:48:43.176Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:48:43.177Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:48:43.178Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:48:43.178Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:48:43.179Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T06:48:43.180Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T06:48:43.180Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:43.181Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:43.182Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T06:48:43.183Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:48:43.184Z] [LOG]       Expected Earned (until 2025-10-21): Rs.31999.44
[2025-10-22T06:48:43.184Z] [LOG]       Actual Earned: Rs.3999.93
[2025-10-22T06:48:43.185Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:43.186Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T06:48:43.186Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:48:43.187Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:48:43.188Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:48:43.188Z] [LOG]    Gross Salary: 50000
[2025-10-22T06:48:43.189Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:48:43.190Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:48:43.190Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:43.191Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:48:43.192Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:43.192Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:48:43.193Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:43.193Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:48:43.194Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:43.195Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:48:43.195Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:43.196Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:48:43.196Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:43.197Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:48:43.198Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:43.198Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:48:43.199Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:43.199Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:48:43.200Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:43.201Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:48:43.201Z] [LOG] Regular deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:48:43.202Z] [LOG] Combined deductions for G.M Supathala Sadaru Madhushan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 27999.51
}
[2025-10-22T06:48:43.436Z] [LOG] Creating components for record 617a00c3-1cd4-41ce-9b05-96e148cbc681: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:48:43.438Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T06:48:43.666Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:48:43.895Z] [LOG] Created payroll_record_component: 51eaedb2-9776-4b56-9364-77b56c2946c1 for Attendance Deduction
[2025-10-22T06:48:44.347Z] [LOG] ✅ Financial balances updated successfully for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:44.347Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:48:44.348Z] [LOG] 
======================================================================
[2025-10-22T06:48:44.349Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: G.M Supathala Sadaru Madhushan null
[2025-10-22T06:48:44.349Z] [LOG] ======================================================================
[2025-10-22T06:48:44.350Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T06:48:44.351Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T06:48:44.351Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T06:48:44.352Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:48:44.352Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:48:44.353Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:48:44.354Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T06:48:44.355Z] [LOG] ======================================================================

[2025-10-22T06:48:44.356Z] [LOG] ✅ G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-22T06:48:44.357Z] [LOG] 📊 Progress: 11/34 (32.4%)
[2025-10-22T06:48:44.357Z] [LOG] 
🧮 Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-22T06:48:44.358Z] [LOG] 📋 Record ID: 66aee626-d91c-4f90-80da-102b1ae05ab3
[2025-10-22T06:48:44.359Z] [LOG] 
======================================================================
[2025-10-22T06:48:44.360Z] [LOG] 🧮 CALCULATING PAYROLL: Nimdiya Ranasinghe null (EMP000045)
[2025-10-22T06:48:44.360Z] [LOG] ======================================================================
[2025-10-22T06:48:45.267Z] [LOG] 🔍 Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-22T06:48:45.268Z] [LOG]    Total components: 10
[2025-10-22T06:48:45.269Z] [LOG]    Applicable components: 10
[2025-10-22T06:48:45.269Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T06:48:46.177Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:48:46.178Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:48:46.405Z] [LOG] 📊 Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:46.632Z] [LOG] 📊 Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:46.865Z] [LOG] 📊 Found 0 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:46.866Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:48:46.867Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:48:46.868Z] [LOG] 💰 GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-22T06:48:46.868Z] [LOG]    Base Salary: 35000
[2025-10-22T06:48:46.870Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:48:46.871Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:48:46.871Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:47.103Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:48:47.330Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:48:47.331Z] [LOG]    Employee ID: 01444074-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:47.332Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:48:47.332Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:48:47.333Z] [LOG]    Base Salary (Full Month): Rs.35000.00
[2025-10-22T06:48:47.562Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:48:47.563Z] [LOG]       Daily Salary: Rs.1400.00
[2025-10-22T06:48:47.563Z] [LOG]       Weekday Hourly Rate: Rs.164.71
[2025-10-22T06:48:47.564Z] [LOG]       Saturday Hourly Rate: Rs.164.71
[2025-10-22T06:48:47.564Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:48:47.565Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:48:47.566Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:48:48.260Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:48:48.261Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:48:48.262Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:48:48.262Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:48:48.263Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:48:48.264Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:48:48.264Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:48:48.265Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:48:48.266Z] [LOG]       Weekday: 110.50h × Rs.164.71 = Rs.18200.46
[2025-10-22T06:48:48.267Z] [LOG]       Saturday: 25.50h × Rs.164.71 = Rs.4200.11
[2025-10-22T06:48:48.267Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:48.268Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:48.269Z] [LOG]       Total Expected Earned: Rs.22400.56
[2025-10-22T06:48:48.514Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:48:48.515Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:48:48.515Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:48:48.516Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:48:48.517Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:48:48.517Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:48:48.518Z] [LOG]       Weekday: 17.00h × Rs.164.71 = Rs.2800.07
[2025-10-22T06:48:48.519Z] [LOG]       Saturday: 0.00h × Rs.164.71 = Rs.0.00
[2025-10-22T06:48:48.519Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:48.520Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:48.521Z] [LOG]       Total Actual Earned: Rs.2800.07
[2025-10-22T06:48:48.522Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:48:48.523Z] [LOG]       Expected Earned (until 2025-10-21): Rs.22400.56
[2025-10-22T06:48:48.523Z] [LOG]       Actual Earned: Rs.2800.07
[2025-10-22T06:48:48.524Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:48.525Z] [LOG]       Attendance Deduction: Rs.19600.49
[2025-10-22T06:48:48.525Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:48:48.526Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:48:48.527Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:48:48.527Z] [LOG]    Gross Salary: 35000
[2025-10-22T06:48:48.528Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:48:48.528Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:48:48.529Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:48.530Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:48:48.531Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:48.531Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:48:48.532Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:48.532Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:48:48.533Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:48.534Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:48:48.534Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:48.535Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:48:48.536Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:48.536Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:48:48.537Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:48.538Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:48:48.538Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:48.539Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:48:48.540Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:48.540Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:48:48.541Z] [LOG] Regular deductions for Nimdiya Ranasinghe null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:48:48.542Z] [LOG] Combined deductions for Nimdiya Ranasinghe null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 19600.49,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 19600.49
}
[2025-10-22T06:48:48.777Z] [LOG] Creating components for record 66aee626-d91c-4f90-80da-102b1ae05ab3: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:48:48.778Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 19600.49
}
[2025-10-22T06:48:49.005Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:48:49.263Z] [LOG] Created payroll_record_component: 9e8e5f31-d5eb-4a12-9d59-011a23b5f48c for Attendance Deduction
[2025-10-22T06:48:49.739Z] [LOG] ✅ Financial balances updated successfully for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:49.740Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:48:49.740Z] [LOG] 
======================================================================
[2025-10-22T06:48:49.741Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Nimdiya Ranasinghe null
[2025-10-22T06:48:49.742Z] [LOG] ======================================================================
[2025-10-22T06:48:49.742Z] [LOG]    Gross Salary: Rs.35000.00
[2025-10-22T06:48:49.743Z] [LOG]    Total Deductions: Rs.19600.49
[2025-10-22T06:48:49.743Z] [LOG]       - Attendance Deduction: Rs.19600.49
[2025-10-22T06:48:49.744Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:48:49.745Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:48:49.745Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:48:49.746Z] [LOG]    NET SALARY: Rs.15399.51
[2025-10-22T06:48:49.747Z] [LOG] ======================================================================

[2025-10-22T06:48:49.748Z] [LOG] ✅ Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-22T06:48:49.749Z] [LOG] 📊 Progress: 12/34 (35.3%)
[2025-10-22T06:48:49.749Z] [LOG] 
🧮 Processing: Sithira null (EMP000039)
[2025-10-22T06:48:49.750Z] [LOG] 📋 Record ID: 6ae45b99-8c41-47c4-92c6-65b62cc4bac4
[2025-10-22T06:48:49.751Z] [LOG] 
======================================================================
[2025-10-22T06:48:49.752Z] [LOG] 🧮 CALCULATING PAYROLL: Sithira null (EMP000039)
[2025-10-22T06:48:49.753Z] [LOG] ======================================================================
[2025-10-22T06:48:50.683Z] [LOG] 🔍 Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-22T06:48:50.683Z] [LOG]    Total components: 10
[2025-10-22T06:48:50.684Z] [LOG]    Applicable components: 10
[2025-10-22T06:48:50.684Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-22T06:48:51.596Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:48:51.597Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:48:51.825Z] [LOG] 📊 Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:52.095Z] [LOG] 📊 Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:52.438Z] [LOG] 📊 Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:52.439Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:48:52.440Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:48:52.441Z] [LOG] 💰 GROSS CALCULATION for Sithira null:
[2025-10-22T06:48:52.442Z] [LOG]    Base Salary: 40000
[2025-10-22T06:48:52.442Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:48:52.443Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:48:52.443Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:52.771Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:48:53.113Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:48:53.114Z] [LOG]    Employee ID: 01441e19-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:53.115Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:48:53.116Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:48:53.116Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-22T06:48:53.428Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:48:53.429Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-22T06:48:53.430Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-22T06:48:53.430Z] [LOG]       Saturday Hourly Rate: Rs.188.24
[2025-10-22T06:48:53.431Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:48:53.432Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:48:53.432Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:48:54.153Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:48:54.154Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:48:54.154Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:48:54.155Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:48:54.156Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:48:54.156Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:48:54.157Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:48:54.158Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:48:54.158Z] [LOG]       Weekday: 110.50h × Rs.188.24 = Rs.20800.52
[2025-10-22T06:48:54.159Z] [LOG]       Saturday: 25.50h × Rs.188.24 = Rs.4800.12
[2025-10-22T06:48:54.160Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:54.160Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:54.161Z] [LOG]       Total Expected Earned: Rs.25600.64
[2025-10-22T06:48:54.392Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:48:54.393Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:48:54.393Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:48:54.394Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:48:54.395Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:48:54.395Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:48:54.396Z] [LOG]       Weekday: 17.00h × Rs.188.24 = Rs.3200.08
[2025-10-22T06:48:54.397Z] [LOG]       Saturday: 0.00h × Rs.188.24 = Rs.0.00
[2025-10-22T06:48:54.397Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:54.398Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:54.399Z] [LOG]       Total Actual Earned: Rs.3200.08
[2025-10-22T06:48:54.400Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:48:54.401Z] [LOG]       Expected Earned (until 2025-10-21): Rs.25600.64
[2025-10-22T06:48:54.401Z] [LOG]       Actual Earned: Rs.3200.08
[2025-10-22T06:48:54.402Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:54.403Z] [LOG]       Attendance Deduction: Rs.22400.56
[2025-10-22T06:48:54.404Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:48:54.404Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:48:54.405Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:48:54.405Z] [LOG]    Gross Salary: 40000
[2025-10-22T06:48:54.406Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:48:54.407Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:48:54.407Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:54.408Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:48:54.409Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:54.409Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:48:54.410Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:54.410Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:48:54.411Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:54.412Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:48:54.412Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:54.413Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:48:54.414Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:54.414Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:48:54.415Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:54.416Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:48:54.416Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:54.417Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:48:54.418Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:54.419Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:48:54.419Z] [LOG] Regular deductions for Sithira null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:48:54.421Z] [LOG] Combined deductions for Sithira null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 22400.559999999998,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 22400.559999999998
}
[2025-10-22T06:48:54.700Z] [LOG] Creating components for record 6ae45b99-8c41-47c4-92c6-65b62cc4bac4: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:48:54.702Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 22400.559999999998
}
[2025-10-22T06:48:54.933Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:48:55.164Z] [LOG] Created payroll_record_component: da5f2017-6d5a-4f3f-b7cc-9b3f64da7893 for Attendance Deduction
[2025-10-22T06:48:55.617Z] [LOG] ✅ Financial balances updated successfully for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:55.618Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:48:55.618Z] [LOG] 
======================================================================
[2025-10-22T06:48:55.619Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sithira null
[2025-10-22T06:48:55.620Z] [LOG] ======================================================================
[2025-10-22T06:48:55.620Z] [LOG]    Gross Salary: Rs.40000.00
[2025-10-22T06:48:55.621Z] [LOG]    Total Deductions: Rs.22400.56
[2025-10-22T06:48:55.621Z] [LOG]       - Attendance Deduction: Rs.22400.56
[2025-10-22T06:48:55.622Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:48:55.623Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:48:55.623Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:48:55.624Z] [LOG]    NET SALARY: Rs.17599.44
[2025-10-22T06:48:55.625Z] [LOG] ======================================================================

[2025-10-22T06:48:55.626Z] [LOG] ✅ Sithira null: Calculation completed successfully
[2025-10-22T06:48:55.627Z] [LOG] 📊 Progress: 13/34 (38.2%)
[2025-10-22T06:48:55.627Z] [LOG] 
🧮 Processing: Maryam null (EMP000035)
[2025-10-22T06:48:55.628Z] [LOG] 📋 Record ID: 8c6373ce-c730-46ee-8bd5-a5d6bf3697c6
[2025-10-22T06:48:55.629Z] [LOG] 
======================================================================
[2025-10-22T06:48:55.629Z] [LOG] 🧮 CALCULATING PAYROLL: Maryam null (EMP000035)
[2025-10-22T06:48:55.630Z] [LOG] ======================================================================
[2025-10-22T06:48:56.630Z] [LOG] 🔍 Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-22T06:48:56.631Z] [LOG]    Total components: 10
[2025-10-22T06:48:56.631Z] [LOG]    Applicable components: 10
[2025-10-22T06:48:56.632Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-22T06:48:57.588Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:48:57.589Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:48:57.822Z] [LOG] 📊 Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:58.071Z] [LOG] 📊 Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:58.301Z] [LOG] 📊 Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:58.302Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:48:58.303Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:48:58.304Z] [LOG] 💰 GROSS CALCULATION for Maryam null:
[2025-10-22T06:48:58.304Z] [LOG]    Base Salary: 40000
[2025-10-22T06:48:58.305Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:48:58.305Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:48:58.306Z] [LOG]    Fixed amount: 0
[2025-10-22T06:48:58.607Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:48:58.883Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:48:58.884Z] [LOG]    Employee ID: 01440221-7105-11f0-a50f-98e743540430
[2025-10-22T06:48:58.885Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:48:58.885Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:48:58.886Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-22T06:48:59.119Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:48:59.120Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-22T06:48:59.120Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-22T06:48:59.121Z] [LOG]       Saturday Hourly Rate: Rs.188.24
[2025-10-22T06:48:59.122Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:48:59.122Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:48:59.123Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:48:59.809Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:48:59.810Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:48:59.810Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:48:59.811Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:48:59.812Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:48:59.812Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:48:59.813Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:48:59.813Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:48:59.814Z] [LOG]       Weekday: 110.50h × Rs.188.24 = Rs.20800.52
[2025-10-22T06:48:59.815Z] [LOG]       Saturday: 25.50h × Rs.188.24 = Rs.4800.12
[2025-10-22T06:48:59.816Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:48:59.816Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:48:59.817Z] [LOG]       Total Expected Earned: Rs.25600.64
[2025-10-22T06:49:00.049Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:49:00.050Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:49:00.051Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:49:00.051Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:49:00.052Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:49:00.052Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:49:00.053Z] [LOG]       Weekday: 17.00h × Rs.188.24 = Rs.3200.08
[2025-10-22T06:49:00.054Z] [LOG]       Saturday: 0.00h × Rs.188.24 = Rs.0.00
[2025-10-22T06:49:00.054Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:00.055Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:00.056Z] [LOG]       Total Actual Earned: Rs.3200.08
[2025-10-22T06:49:00.057Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:49:00.058Z] [LOG]       Expected Earned (until 2025-10-21): Rs.25600.64
[2025-10-22T06:49:00.058Z] [LOG]       Actual Earned: Rs.3200.08
[2025-10-22T06:49:00.059Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:00.060Z] [LOG]       Attendance Deduction: Rs.22400.56
[2025-10-22T06:49:00.060Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:49:00.061Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:49:00.062Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:49:00.063Z] [LOG]    Gross Salary: 40000
[2025-10-22T06:49:00.063Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:49:00.064Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:49:00.064Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:00.065Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:49:00.066Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:00.066Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:49:00.067Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:00.068Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:49:00.068Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:00.069Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:49:00.070Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:00.070Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:49:00.071Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:00.072Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:49:00.072Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:00.072Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:49:00.073Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:00.073Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:49:00.073Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:00.074Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:49:00.074Z] [LOG] Regular deductions for Maryam null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:49:00.075Z] [LOG] Combined deductions for Maryam null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 22400.559999999998,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 22400.559999999998
}
[2025-10-22T06:49:00.355Z] [LOG] Creating components for record 8c6373ce-c730-46ee-8bd5-a5d6bf3697c6: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:49:00.357Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 22400.559999999998
}
[2025-10-22T06:49:00.596Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:49:00.833Z] [LOG] Created payroll_record_component: 0df429f5-9b39-4b9a-85f6-651b9462e297 for Attendance Deduction
[2025-10-22T06:49:01.303Z] [LOG] ✅ Financial balances updated successfully for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:01.304Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:49:01.305Z] [LOG] 
======================================================================
[2025-10-22T06:49:01.305Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Maryam null
[2025-10-22T06:49:01.306Z] [LOG] ======================================================================
[2025-10-22T06:49:01.307Z] [LOG]    Gross Salary: Rs.40000.00
[2025-10-22T06:49:01.307Z] [LOG]    Total Deductions: Rs.22400.56
[2025-10-22T06:49:01.308Z] [LOG]       - Attendance Deduction: Rs.22400.56
[2025-10-22T06:49:01.308Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:49:01.309Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:49:01.310Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:49:01.311Z] [LOG]    NET SALARY: Rs.17599.44
[2025-10-22T06:49:01.311Z] [LOG] ======================================================================

[2025-10-22T06:49:01.312Z] [LOG] ✅ Maryam null: Calculation completed successfully
[2025-10-22T06:49:01.313Z] [LOG] 📊 Progress: 14/34 (41.2%)
[2025-10-22T06:49:01.313Z] [LOG] 
🧮 Processing: Rasanga null (EMP000028)
[2025-10-22T06:49:01.314Z] [LOG] 📋 Record ID: 8c6d40b7-bea0-485e-b359-0e681bd3c3ef
[2025-10-22T06:49:01.315Z] [LOG] 
======================================================================
[2025-10-22T06:49:01.316Z] [LOG] 🧮 CALCULATING PAYROLL: Rasanga null (EMP000028)
[2025-10-22T06:49:01.317Z] [LOG] ======================================================================
[2025-10-22T06:49:02.362Z] [LOG] 🔍 Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-22T06:49:02.363Z] [LOG]    Total components: 10
[2025-10-22T06:49:02.363Z] [LOG]    Applicable components: 10
[2025-10-22T06:49:02.364Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-22T06:49:03.493Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:49:03.494Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:49:03.805Z] [LOG] 📊 Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:04.034Z] [LOG] 📊 Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:04.264Z] [LOG] 📊 Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:04.265Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:49:04.266Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:49:04.267Z] [LOG] 💰 GROSS CALCULATION for Rasanga null:
[2025-10-22T06:49:04.267Z] [LOG]    Base Salary: 50000
[2025-10-22T06:49:04.268Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:49:04.269Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:49:04.270Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:04.607Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:49:04.878Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:49:04.879Z] [LOG]    Employee ID: 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:04.880Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:49:04.881Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:49:04.881Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T06:49:05.171Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:49:05.172Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T06:49:05.172Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T06:49:05.173Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T06:49:05.174Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:49:05.174Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:49:05.175Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:49:06.804Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:49:06.805Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:49:06.806Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:49:06.806Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:49:06.807Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:49:06.808Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:49:06.808Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:49:06.809Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:49:06.810Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T06:49:06.811Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T06:49:06.811Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:06.812Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:06.813Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T06:49:07.073Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:49:07.074Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:49:07.075Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:49:07.076Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:49:07.076Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:49:07.077Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:49:07.077Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T06:49:07.078Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T06:49:07.079Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:07.079Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:07.080Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T06:49:07.081Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:49:07.082Z] [LOG]       Expected Earned (until 2025-10-21): Rs.31999.44
[2025-10-22T06:49:07.083Z] [LOG]       Actual Earned: Rs.3999.93
[2025-10-22T06:49:07.083Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:07.084Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T06:49:07.084Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:49:07.085Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:49:07.086Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:49:07.087Z] [LOG]    Gross Salary: 50000
[2025-10-22T06:49:07.087Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:49:07.088Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:49:07.089Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:07.089Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:49:07.090Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:07.090Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:49:07.091Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:07.092Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:49:07.093Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:07.093Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:49:07.094Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:07.095Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:49:07.095Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:07.096Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:49:07.096Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:07.097Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:49:07.098Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:07.098Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:49:07.099Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:07.100Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:49:07.100Z] [LOG] Regular deductions for Rasanga null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:49:07.101Z] [LOG] Combined deductions for Rasanga null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 27999.51
}
[2025-10-22T06:49:07.339Z] [LOG] Creating components for record 8c6d40b7-bea0-485e-b359-0e681bd3c3ef: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:49:07.341Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T06:49:07.623Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:49:07.858Z] [LOG] Created payroll_record_component: cf88307e-c447-425c-9949-80db7f752349 for Attendance Deduction
[2025-10-22T06:49:08.322Z] [LOG] ✅ Financial balances updated successfully for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:08.323Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:49:08.323Z] [LOG] 
======================================================================
[2025-10-22T06:49:08.324Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Rasanga null
[2025-10-22T06:49:08.324Z] [LOG] ======================================================================
[2025-10-22T06:49:08.325Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T06:49:08.325Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T06:49:08.326Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T06:49:08.326Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:49:08.327Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:49:08.327Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:49:08.327Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T06:49:08.328Z] [LOG] ======================================================================

[2025-10-22T06:49:08.329Z] [LOG] ✅ Rasanga null: Calculation completed successfully
[2025-10-22T06:49:08.329Z] [LOG] 📊 Progress: 15/34 (44.1%)
[2025-10-22T06:49:08.329Z] [LOG] 
🧮 Processing: Saruban null (EMP000007)
[2025-10-22T06:49:08.330Z] [LOG] 📋 Record ID: a3b9a058-75b1-404a-a2fd-8461f0b75b73
[2025-10-22T06:49:08.330Z] [LOG] 
======================================================================
[2025-10-22T06:49:08.331Z] [LOG] 🧮 CALCULATING PAYROLL: Saruban null (EMP000007)
[2025-10-22T06:49:08.331Z] [LOG] ======================================================================
[2025-10-22T06:49:09.449Z] [LOG] 🔍 Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-22T06:49:09.450Z] [LOG]    Total components: 10
[2025-10-22T06:49:09.450Z] [LOG]    Applicable components: 10
[2025-10-22T06:49:09.451Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-22T06:49:10.427Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:49:10.428Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:49:10.668Z] [LOG] 📊 Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:10.899Z] [LOG] 📊 Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:11.151Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:11.152Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:49:11.153Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:49:11.154Z] [LOG] 💰 GROSS CALCULATION for Saruban null:
[2025-10-22T06:49:11.154Z] [LOG]    Base Salary: 0
[2025-10-22T06:49:11.155Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:49:11.156Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:49:11.156Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:11.401Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:49:11.656Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:49:11.657Z] [LOG]    Employee ID: 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:11.657Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:49:11.658Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:49:11.658Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-22T06:49:11.931Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:49:11.932Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-22T06:49:11.933Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-22T06:49:11.933Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-22T06:49:11.934Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:49:11.934Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:49:11.936Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:49:12.639Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:49:12.640Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:49:12.641Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:49:12.642Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:49:12.642Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:49:12.643Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:49:12.643Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:49:12.644Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:49:12.645Z] [LOG]       Weekday: 110.50h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:12.646Z] [LOG]       Saturday: 25.50h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:12.646Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:12.647Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:12.648Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-22T06:49:12.878Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:49:12.879Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:49:12.880Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:49:12.880Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:49:12.881Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:49:12.882Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:49:12.882Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:12.883Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:12.884Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:12.884Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:12.885Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-22T06:49:12.886Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:49:12.887Z] [LOG]       Expected Earned (until 2025-10-21): Rs.0.00
[2025-10-22T06:49:12.887Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-22T06:49:12.888Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:12.889Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-22T06:49:12.889Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:49:12.890Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-22T06:49:12.891Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:49:12.891Z] [LOG]    Gross Salary: 0
[2025-10-22T06:49:12.892Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:49:12.893Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:49:12.893Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:12.894Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:49:12.894Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:12.895Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:49:12.896Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:12.897Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:49:12.897Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:12.898Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:49:12.898Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:12.898Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:49:12.899Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:12.899Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:49:12.899Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:12.900Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:49:12.900Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:12.900Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:49:12.901Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:12.901Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:49:12.901Z] [LOG] Regular deductions for Saruban null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:49:12.902Z] [LOG] Combined deductions for Saruban null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 0
}
[2025-10-22T06:49:13.137Z] [LOG] Creating components for record a3b9a058-75b1-404a-a2fd-8461f0b75b73: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:49:13.138Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-22T06:49:13.369Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:49:13.601Z] [LOG] Created payroll_record_component: d854e64c-47ff-45b4-93b8-4ddb2c0946dc for Attendance Deduction
[2025-10-22T06:49:14.055Z] [LOG] ✅ Financial balances updated successfully for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:14.056Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:49:14.056Z] [LOG] 
======================================================================
[2025-10-22T06:49:14.057Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saruban null
[2025-10-22T06:49:14.058Z] [LOG] ======================================================================
[2025-10-22T06:49:14.058Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-22T06:49:14.059Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-22T06:49:14.060Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-22T06:49:14.060Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:49:14.061Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:49:14.062Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:49:14.063Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-22T06:49:14.063Z] [LOG] ======================================================================

[2025-10-22T06:49:14.064Z] [LOG] ✅ Saruban null: Calculation completed successfully
[2025-10-22T06:49:14.065Z] [LOG] 📊 Progress: 16/34 (47.1%)
[2025-10-22T06:49:14.066Z] [LOG] 
🧮 Processing: customer null (EMP000036)
[2025-10-22T06:49:14.068Z] [LOG] 📋 Record ID: aa6df387-fc7d-468d-82a4-2fd8ccf5e8d1
[2025-10-22T06:49:14.070Z] [LOG] 
======================================================================
[2025-10-22T06:49:14.071Z] [LOG] 🧮 CALCULATING PAYROLL: customer null (EMP000036)
[2025-10-22T06:49:14.073Z] [LOG] ======================================================================
[2025-10-22T06:49:14.991Z] [LOG] 🔍 Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-22T06:49:14.991Z] [LOG]    Total components: 10
[2025-10-22T06:49:14.992Z] [LOG]    Applicable components: 10
[2025-10-22T06:49:14.993Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-22T06:49:15.922Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:49:15.923Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:49:16.153Z] [LOG] 📊 Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:16.380Z] [LOG] 📊 Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:16.609Z] [LOG] 📊 Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:16.610Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:49:16.611Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:49:16.612Z] [LOG] 💰 GROSS CALCULATION for customer null:
[2025-10-22T06:49:16.613Z] [LOG]    Base Salary: 0
[2025-10-22T06:49:16.613Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:49:16.614Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:49:16.614Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:16.842Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:49:17.072Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:49:17.073Z] [LOG]    Employee ID: 014409a2-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:17.073Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:49:17.074Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:49:17.075Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-22T06:49:17.307Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:49:17.307Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-22T06:49:17.308Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-22T06:49:17.309Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-22T06:49:17.309Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:49:17.310Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:49:17.311Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:49:17.999Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:49:18.000Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:49:18.001Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:49:18.002Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:49:18.003Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:49:18.003Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:49:18.004Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:49:18.005Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:49:18.007Z] [LOG]       Weekday: 110.50h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:18.008Z] [LOG]       Saturday: 25.50h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:18.009Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:18.010Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:18.011Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-22T06:49:18.246Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:49:18.247Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:49:18.247Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:49:18.248Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:49:18.249Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:49:18.249Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:49:18.250Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:18.251Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:18.251Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:18.252Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:18.253Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-22T06:49:18.254Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:49:18.255Z] [LOG]       Expected Earned (until 2025-10-21): Rs.0.00
[2025-10-22T06:49:18.256Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-22T06:49:18.257Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:18.259Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-22T06:49:18.259Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:49:18.260Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-22T06:49:18.260Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:49:18.261Z] [LOG]    Gross Salary: 0
[2025-10-22T06:49:18.261Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:49:18.262Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:49:18.263Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:18.264Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:49:18.265Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:18.266Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:49:18.266Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:18.267Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:49:18.267Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:18.267Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:49:18.268Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:18.269Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:49:18.269Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:18.270Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:49:18.271Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:18.272Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:49:18.274Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:18.274Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:49:18.275Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:18.275Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:49:18.276Z] [LOG] Regular deductions for customer null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:49:18.276Z] [LOG] Combined deductions for customer null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 0
}
[2025-10-22T06:49:18.515Z] [LOG] Creating components for record aa6df387-fc7d-468d-82a4-2fd8ccf5e8d1: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:49:18.516Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-22T06:49:18.753Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:49:19.003Z] [LOG] Created payroll_record_component: ab264fd1-2ab7-4521-88be-861668534eb6 for Attendance Deduction
[2025-10-22T06:49:19.461Z] [LOG] ✅ Financial balances updated successfully for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:19.462Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:49:19.463Z] [LOG] 
======================================================================
[2025-10-22T06:49:19.463Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: customer null
[2025-10-22T06:49:19.464Z] [LOG] ======================================================================
[2025-10-22T06:49:19.464Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-22T06:49:19.465Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-22T06:49:19.466Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-22T06:49:19.466Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:49:19.467Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:49:19.468Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:49:19.468Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-22T06:49:19.469Z] [LOG] ======================================================================

[2025-10-22T06:49:19.470Z] [LOG] ✅ customer null: Calculation completed successfully
[2025-10-22T06:49:19.471Z] [LOG] 📊 Progress: 17/34 (50.0%)
[2025-10-22T06:49:19.471Z] [LOG] 
🧮 Processing: Prasanthan null (EMP000001)
[2025-10-22T06:49:19.472Z] [LOG] 📋 Record ID: b67a29b3-f2a2-47bd-b4cf-60bc822a855f
[2025-10-22T06:49:19.473Z] [LOG] 
======================================================================
[2025-10-22T06:49:19.474Z] [LOG] 🧮 CALCULATING PAYROLL: Prasanthan null (EMP000001)
[2025-10-22T06:49:19.474Z] [LOG] ======================================================================
[2025-10-22T06:49:20.425Z] [LOG] 🔍 Component filtering for employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-22T06:49:20.426Z] [LOG]    Total components: 10
[2025-10-22T06:49:20.426Z] [LOG]    Applicable components: 10
[2025-10-22T06:49:20.427Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-22T06:49:21.348Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:49:21.349Z] [LOG] 🔄 Processing financial records for employee 014397c7-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:49:21.580Z] [LOG] 📊 Found 0 active loans for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:21.811Z] [LOG] 📊 Found 0 active advances for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:22.045Z] [LOG] 📊 Found 0 approved bonuses for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:22.046Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:49:22.047Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:49:22.048Z] [LOG] 💰 GROSS CALCULATION for Prasanthan null:
[2025-10-22T06:49:22.048Z] [LOG]    Base Salary: 150000
[2025-10-22T06:49:22.049Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:49:22.050Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:49:22.050Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:22.286Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:49:22.517Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:49:22.518Z] [LOG]    Employee ID: 014397c7-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:22.519Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:49:22.520Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:49:22.522Z] [LOG]    Base Salary (Full Month): Rs.150000.00
[2025-10-22T06:49:22.749Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:49:22.750Z] [LOG]       Daily Salary: Rs.6000.00
[2025-10-22T06:49:22.751Z] [LOG]       Weekday Hourly Rate: Rs.705.88
[2025-10-22T06:49:22.751Z] [LOG]       Saturday Hourly Rate: Rs.705.88
[2025-10-22T06:49:22.754Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:49:22.756Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:49:22.757Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:49:23.445Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:49:23.446Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:49:23.447Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:49:23.448Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:49:23.448Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:49:23.449Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:49:23.450Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:49:23.450Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:49:23.451Z] [LOG]       Weekday: 110.50h × Rs.705.88 = Rs.77999.74
[2025-10-22T06:49:23.452Z] [LOG]       Saturday: 25.50h × Rs.705.88 = Rs.17999.94
[2025-10-22T06:49:23.455Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:23.455Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:23.456Z] [LOG]       Total Expected Earned: Rs.95999.68
[2025-10-22T06:49:23.685Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:49:23.686Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:49:23.686Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:49:23.686Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:49:23.686Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:49:23.687Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:49:23.687Z] [LOG]       Weekday: 17.00h × Rs.705.88 = Rs.11999.96
[2025-10-22T06:49:23.687Z] [LOG]       Saturday: 0.00h × Rs.705.88 = Rs.0.00
[2025-10-22T06:49:23.688Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:23.688Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:23.689Z] [LOG]       Total Actual Earned: Rs.11999.96
[2025-10-22T06:49:23.689Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:49:23.689Z] [LOG]       Expected Earned (until 2025-10-21): Rs.95999.68
[2025-10-22T06:49:23.689Z] [LOG]       Actual Earned: Rs.11999.96
[2025-10-22T06:49:23.690Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:23.690Z] [LOG]       Attendance Deduction: Rs.83999.72
[2025-10-22T06:49:23.690Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:49:23.691Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:49:23.691Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:49:23.691Z] [LOG]    Gross Salary: 150000
[2025-10-22T06:49:23.691Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:49:23.692Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:49:23.692Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:23.692Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:49:23.692Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:23.692Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:49:23.693Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:23.693Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:49:23.693Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:23.693Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:49:23.693Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:23.694Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:49:23.694Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:23.694Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:49:23.694Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:23.694Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:49:23.694Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:23.695Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:49:23.695Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:23.695Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:49:23.695Z] [LOG] Regular deductions for Prasanthan null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:49:23.696Z] [LOG] Combined deductions for Prasanthan null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 83999.72,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 83999.72
}
[2025-10-22T06:49:23.928Z] [LOG] Creating components for record b67a29b3-f2a2-47bd-b4cf-60bc822a855f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 1
}
[2025-10-22T06:49:23.929Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 83999.72
}
[2025-10-22T06:49:24.158Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:49:24.391Z] [LOG] Created payroll_record_component: ec410091-2250-4cfc-a520-1dd27549fc94 for Attendance Deduction
[2025-10-22T06:49:24.392Z] [LOG] Processing component: {
  "name": "Income Tax",
  "type": "tax",
  "amount": 3000
}
[2025-10-22T06:49:24.619Z] [LOG] Using existing component ID: 72f98b53-4bd5-4713-98d0-e3a641ad8d0f
[2025-10-22T06:49:24.849Z] [LOG] Created payroll_record_component: bd0d10df-5ec8-4aa0-9e10-52d447c711a5 for Income Tax
[2025-10-22T06:49:25.319Z] [LOG] ✅ Financial balances updated successfully for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:25.320Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:49:25.320Z] [LOG] 
======================================================================
[2025-10-22T06:49:25.321Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Prasanthan null
[2025-10-22T06:49:25.322Z] [LOG] ======================================================================
[2025-10-22T06:49:25.322Z] [LOG]    Gross Salary: Rs.150000.00
[2025-10-22T06:49:25.323Z] [LOG]    Total Deductions: Rs.83999.72
[2025-10-22T06:49:25.323Z] [LOG]       - Attendance Deduction: Rs.83999.72
[2025-10-22T06:49:25.324Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:49:25.324Z] [LOG]    Total Taxes: Rs.3000.00
[2025-10-22T06:49:25.325Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:49:25.326Z] [LOG]    NET SALARY: Rs.63000.28
[2025-10-22T06:49:25.327Z] [LOG] ======================================================================

[2025-10-22T06:49:25.328Z] [LOG] ✅ Prasanthan null: Calculation completed successfully
[2025-10-22T06:49:25.328Z] [LOG] 📊 Progress: 18/34 (52.9%)
[2025-10-22T06:49:25.329Z] [LOG] 
🧮 Processing: Kaushal Thambi (EMP465256103)
[2025-10-22T06:49:25.330Z] [LOG] 📋 Record ID: b691afdb-d743-4a3e-ad66-a3f672374846
[2025-10-22T06:49:25.330Z] [LOG] 
======================================================================
[2025-10-22T06:49:25.331Z] [LOG] 🧮 CALCULATING PAYROLL: Kaushal Thambi (EMP465256103)
[2025-10-22T06:49:25.332Z] [LOG] ======================================================================
[2025-10-22T06:49:26.263Z] [LOG] 🔍 Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-22T06:49:26.264Z] [LOG]    Total components: 10
[2025-10-22T06:49:26.264Z] [LOG]    Applicable components: 10
[2025-10-22T06:49:26.265Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-22T06:49:27.189Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:49:27.190Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:49:27.420Z] [LOG] 📊 Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-22T06:49:27.653Z] [LOG] 📊 Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-22T06:49:27.881Z] [LOG] 📊 Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-22T06:49:27.882Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:49:27.883Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:49:27.884Z] [LOG] 💰 GROSS CALCULATION for Kaushal Thambi:
[2025-10-22T06:49:27.884Z] [LOG]    Base Salary: 50000
[2025-10-22T06:49:27.885Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:49:27.886Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:49:27.886Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:28.114Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:49:28.592Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:49:28.593Z] [LOG]    Employee ID: 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-22T06:49:28.593Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:49:28.594Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:49:28.595Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T06:49:29.056Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:49:29.057Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T06:49:29.057Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T06:49:29.058Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T06:49:29.059Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:49:29.059Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:49:29.060Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:49:29.862Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:49:29.863Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:49:29.864Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:49:29.864Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:49:29.865Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:49:29.865Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:49:29.866Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:49:29.866Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:49:29.867Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T06:49:29.868Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T06:49:29.868Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:29.869Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:29.870Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T06:49:30.100Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:49:30.101Z] [LOG]       Weekday (Mon-Fri): 8.50h
[2025-10-22T06:49:30.101Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:49:30.102Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:49:30.103Z] [LOG]       Total Worked: 8.50h
[2025-10-22T06:49:30.103Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:49:30.104Z] [LOG]       Weekday: 8.50h × Rs.235.29 = Rs.1999.96
[2025-10-22T06:49:30.105Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T06:49:30.105Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:30.106Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:30.107Z] [LOG]       Total Actual Earned: Rs.1999.96
[2025-10-22T06:49:30.107Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:49:30.108Z] [LOG]       Expected Earned (until 2025-10-21): Rs.31999.44
[2025-10-22T06:49:30.109Z] [LOG]       Actual Earned: Rs.1999.96
[2025-10-22T06:49:30.110Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:30.110Z] [LOG]       Attendance Deduction: Rs.29999.47
[2025-10-22T06:49:30.111Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:49:30.112Z] [LOG]       📉 Shortfall: 127.50 hours (93.75% of expected)
[2025-10-22T06:49:30.112Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:49:30.113Z] [LOG]    Gross Salary: 50000
[2025-10-22T06:49:30.113Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:49:30.114Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:49:30.114Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:30.115Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:49:30.116Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:30.117Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:49:30.117Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:30.118Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:49:30.119Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:30.119Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:49:30.120Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:30.121Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:49:30.121Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:30.122Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:49:30.122Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:30.123Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:49:30.123Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:30.124Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:49:30.124Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:30.124Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:49:30.125Z] [LOG] Regular deductions for Kaushal Thambi: {
  "components": [],
  "total": 0
}
[2025-10-22T06:49:30.125Z] [LOG] Combined deductions for Kaushal Thambi: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 29999.475,
      "details": "Shortfall: 127.50h of 136.00h expected"
    }
  ],
  "total": 29999.475
}
[2025-10-22T06:49:30.508Z] [LOG] Creating components for record b691afdb-d743-4a3e-ad66-a3f672374846: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:49:30.510Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 29999.475
}
[2025-10-22T06:49:30.746Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:49:30.978Z] [LOG] Created payroll_record_component: 3217d81a-a360-4f12-af77-be715a571396 for Attendance Deduction
[2025-10-22T06:49:31.432Z] [LOG] ✅ Financial balances updated successfully for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-22T06:49:31.433Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:49:31.433Z] [LOG] 
======================================================================
[2025-10-22T06:49:31.434Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Kaushal Thambi
[2025-10-22T06:49:31.435Z] [LOG] ======================================================================
[2025-10-22T06:49:31.435Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T06:49:31.436Z] [LOG]    Total Deductions: Rs.29999.47
[2025-10-22T06:49:31.437Z] [LOG]       - Attendance Deduction: Rs.29999.47
[2025-10-22T06:49:31.437Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:49:31.438Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:49:31.438Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:49:31.439Z] [LOG]    NET SALARY: Rs.20000.53
[2025-10-22T06:49:31.440Z] [LOG] ======================================================================

[2025-10-22T06:49:31.441Z] [LOG] ✅ Kaushal Thambi: Calculation completed successfully
[2025-10-22T06:49:31.442Z] [LOG] 📊 Progress: 19/34 (55.9%)
[2025-10-22T06:49:31.442Z] [LOG] 
🧮 Processing: Franklin null (EMP000018)
[2025-10-22T06:49:31.443Z] [LOG] 📋 Record ID: ba3642a4-1c03-46b4-8890-bd91896a218e
[2025-10-22T06:49:31.444Z] [LOG] 
======================================================================
[2025-10-22T06:49:31.445Z] [LOG] 🧮 CALCULATING PAYROLL: Franklin null (EMP000018)
[2025-10-22T06:49:31.446Z] [LOG] ======================================================================
[2025-10-22T06:49:32.377Z] [LOG] 🔍 Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-22T06:49:32.377Z] [LOG]    Total components: 10
[2025-10-22T06:49:32.378Z] [LOG]    Applicable components: 10
[2025-10-22T06:49:32.378Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-22T06:49:33.384Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:49:33.385Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:49:33.616Z] [LOG] 📊 Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:33.845Z] [LOG] 📊 Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:34.080Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:34.080Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:49:34.081Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:49:34.081Z] [LOG] 💰 GROSS CALCULATION for Franklin null:
[2025-10-22T06:49:34.081Z] [LOG]    Base Salary: 50000
[2025-10-22T06:49:34.081Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:49:34.081Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:49:34.081Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:34.488Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:49:34.732Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:49:34.732Z] [LOG]    Employee ID: 0143c037-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:34.732Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:49:34.733Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:49:34.733Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T06:49:35.025Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:49:35.026Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T06:49:35.026Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T06:49:35.026Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T06:49:35.026Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:49:35.027Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:49:35.027Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:49:35.803Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:49:35.804Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:49:35.804Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:49:35.804Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:49:35.804Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:49:35.805Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:49:35.805Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:49:35.805Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:49:35.805Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T06:49:35.806Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T06:49:35.806Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:35.806Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:35.806Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T06:49:36.088Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:49:36.089Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:49:36.089Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:49:36.089Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:49:36.089Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:49:36.090Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:49:36.090Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T06:49:36.090Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T06:49:36.090Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:36.091Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:36.091Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T06:49:36.091Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:49:36.091Z] [LOG]       Expected Earned (until 2025-10-21): Rs.31999.44
[2025-10-22T06:49:36.092Z] [LOG]       Actual Earned: Rs.3999.93
[2025-10-22T06:49:36.092Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:36.092Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T06:49:36.092Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:49:36.093Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:49:36.093Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:49:36.093Z] [LOG]    Gross Salary: 50000
[2025-10-22T06:49:36.093Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:49:36.094Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:49:36.094Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:36.094Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:49:36.094Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:36.095Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:49:36.095Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:36.095Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:49:36.095Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:36.095Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:49:36.095Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:36.096Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:49:36.096Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:36.096Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:49:36.096Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:36.097Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:49:36.097Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:36.097Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:49:36.097Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:36.098Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:49:36.098Z] [LOG] Regular deductions for Franklin null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:49:36.098Z] [LOG] Combined deductions for Franklin null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 27999.51
}
[2025-10-22T06:49:36.361Z] [LOG] Creating components for record ba3642a4-1c03-46b4-8890-bd91896a218e: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:49:36.362Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T06:49:36.620Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:49:36.980Z] [LOG] Created payroll_record_component: e5b418db-f4fe-4a15-b90a-0481aae93bb1 for Attendance Deduction
[2025-10-22T06:49:37.526Z] [LOG] ✅ Financial balances updated successfully for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:37.527Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:49:37.527Z] [LOG] 
======================================================================
[2025-10-22T06:49:37.527Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Franklin null
[2025-10-22T06:49:37.527Z] [LOG] ======================================================================
[2025-10-22T06:49:37.527Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T06:49:37.528Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T06:49:37.528Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T06:49:37.528Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:49:37.528Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:49:37.529Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:49:37.529Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T06:49:37.529Z] [LOG] ======================================================================

[2025-10-22T06:49:37.529Z] [LOG] ✅ Franklin null: Calculation completed successfully
[2025-10-22T06:49:37.529Z] [LOG] 📊 Progress: 20/34 (58.8%)
[2025-10-22T06:49:37.530Z] [LOG] 
🧮 Processing: Hari null (EMP000017)
[2025-10-22T06:49:37.530Z] [LOG] 📋 Record ID: bc3158b0-34ad-4a20-a696-9ce37afb0707
[2025-10-22T06:49:37.530Z] [LOG] 
======================================================================
[2025-10-22T06:49:37.531Z] [LOG] 🧮 CALCULATING PAYROLL: Hari null (EMP000017)
[2025-10-22T06:49:37.531Z] [LOG] ======================================================================
[2025-10-22T06:49:38.678Z] [LOG] 🔍 Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-22T06:49:38.678Z] [LOG]    Total components: 10
[2025-10-22T06:49:38.678Z] [LOG]    Applicable components: 10
[2025-10-22T06:49:38.679Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T06:49:39.691Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:49:39.691Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:49:39.964Z] [LOG] 📊 Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:40.202Z] [LOG] 📊 Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:40.607Z] [LOG] 📊 Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:40.608Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:49:40.608Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:49:40.608Z] [LOG] 💰 GROSS CALCULATION for Hari null:
[2025-10-22T06:49:40.609Z] [LOG]    Base Salary: 50000
[2025-10-22T06:49:40.609Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:49:40.609Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:49:40.609Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:40.869Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:49:41.120Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:49:41.120Z] [LOG]    Employee ID: 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:41.120Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:49:41.121Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:49:41.121Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T06:49:41.376Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:49:41.377Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T06:49:41.377Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T06:49:41.377Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T06:49:41.377Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:49:41.378Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:49:41.378Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:49:42.217Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:49:42.218Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:49:42.218Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:49:42.219Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:49:42.219Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:49:42.220Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:49:42.220Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:49:42.220Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:49:42.221Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T06:49:42.221Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T06:49:42.222Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:42.222Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:42.223Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T06:49:42.453Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:49:42.454Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:49:42.454Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:49:42.455Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:49:42.455Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:49:42.456Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:49:42.457Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T06:49:42.457Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T06:49:42.458Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:42.458Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:42.459Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T06:49:42.460Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:49:42.461Z] [LOG]       Expected Earned (until 2025-10-21): Rs.31999.44
[2025-10-22T06:49:42.462Z] [LOG]       Actual Earned: Rs.3999.93
[2025-10-22T06:49:42.462Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:42.463Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T06:49:42.463Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:49:42.464Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:49:42.466Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:49:42.467Z] [LOG]    Gross Salary: 50000
[2025-10-22T06:49:42.468Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:49:42.468Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:49:42.469Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:42.470Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:49:42.470Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:42.471Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:49:42.471Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:42.472Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:49:42.473Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:42.473Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:49:42.474Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:42.475Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:49:42.475Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:42.476Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:49:42.476Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:42.477Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:49:42.478Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:42.478Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:49:42.479Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:42.479Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:49:42.480Z] [LOG] Regular deductions for Hari null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:49:42.481Z] [LOG] Combined deductions for Hari null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 27999.51
}
[2025-10-22T06:49:42.719Z] [LOG] Creating components for record bc3158b0-34ad-4a20-a696-9ce37afb0707: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:49:42.721Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T06:49:42.948Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:49:43.437Z] [LOG] Created payroll_record_component: 98c249dd-c744-4c4c-a66d-8ac0b43f5b56 for Attendance Deduction
[2025-10-22T06:49:43.942Z] [LOG] ✅ Financial balances updated successfully for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:43.942Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:49:43.943Z] [LOG] 
======================================================================
[2025-10-22T06:49:43.943Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Hari null
[2025-10-22T06:49:43.944Z] [LOG] ======================================================================
[2025-10-22T06:49:43.944Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T06:49:43.944Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T06:49:43.945Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T06:49:43.945Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:49:43.946Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:49:43.946Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:49:43.946Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T06:49:43.947Z] [LOG] ======================================================================

[2025-10-22T06:49:43.947Z] [LOG] ✅ Hari null: Calculation completed successfully
[2025-10-22T06:49:43.948Z] [LOG] 📊 Progress: 21/34 (61.8%)
[2025-10-22T06:49:43.948Z] [LOG] 
🧮 Processing: Chamodi null (EMP000032)
[2025-10-22T06:49:43.949Z] [LOG] 📋 Record ID: bf0840ff-8d04-4330-bd6b-00f91c8655d3
[2025-10-22T06:49:43.949Z] [LOG] 
======================================================================
[2025-10-22T06:49:43.950Z] [LOG] 🧮 CALCULATING PAYROLL: Chamodi null (EMP000032)
[2025-10-22T06:49:43.950Z] [LOG] ======================================================================
[2025-10-22T06:49:44.889Z] [LOG] 🔍 Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-22T06:49:44.889Z] [LOG]    Total components: 10
[2025-10-22T06:49:44.890Z] [LOG]    Applicable components: 10
[2025-10-22T06:49:44.890Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T06:49:45.878Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:49:45.879Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:49:46.111Z] [LOG] 📊 Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:46.619Z] [LOG] 📊 Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:46.850Z] [LOG] 📊 Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:46.851Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:49:46.852Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:49:46.853Z] [LOG] 💰 GROSS CALCULATION for Chamodi null:
[2025-10-22T06:49:46.854Z] [LOG]    Base Salary: 50000
[2025-10-22T06:49:46.854Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:49:46.855Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:49:46.855Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:47.092Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:49:47.327Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:49:47.327Z] [LOG]    Employee ID: 0143f302-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:47.328Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:49:47.328Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:49:47.328Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T06:49:47.561Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:49:47.561Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T06:49:47.562Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T06:49:47.563Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T06:49:47.563Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:49:47.564Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:49:47.564Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:49:48.287Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:49:48.288Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:49:48.288Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:49:48.289Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:49:48.290Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:49:48.290Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:49:48.291Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:49:48.291Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:49:48.292Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T06:49:48.293Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T06:49:48.294Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:48.295Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:48.296Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T06:49:48.610Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:49:48.611Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:49:48.612Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:49:48.612Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:49:48.613Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:49:48.613Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:49:48.614Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T06:49:48.615Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T06:49:48.615Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:48.616Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:48.617Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T06:49:48.617Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:49:48.618Z] [LOG]       Expected Earned (until 2025-10-21): Rs.31999.44
[2025-10-22T06:49:48.619Z] [LOG]       Actual Earned: Rs.3999.93
[2025-10-22T06:49:48.620Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:48.620Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T06:49:48.621Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:49:48.622Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:49:48.622Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:49:48.623Z] [LOG]    Gross Salary: 50000
[2025-10-22T06:49:48.623Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:49:48.624Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:49:48.625Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:48.625Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:49:48.626Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:48.627Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:49:48.627Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:48.628Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:49:48.628Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:48.629Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:49:48.630Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:48.630Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:49:48.631Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:48.631Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:49:48.632Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:48.633Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:49:48.633Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:48.634Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:49:48.634Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:48.635Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:49:48.636Z] [LOG] Regular deductions for Chamodi null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:49:48.637Z] [LOG] Combined deductions for Chamodi null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 27999.51
}
[2025-10-22T06:49:49.107Z] [LOG] Creating components for record bf0840ff-8d04-4330-bd6b-00f91c8655d3: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:49:49.109Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T06:49:49.473Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:49:49.891Z] [LOG] Created payroll_record_component: e5ddc709-169c-4710-ac6a-7167346bd919 for Attendance Deduction
[2025-10-22T06:49:50.446Z] [LOG] ✅ Financial balances updated successfully for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:50.447Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:49:50.447Z] [LOG] 
======================================================================
[2025-10-22T06:49:50.448Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chamodi null
[2025-10-22T06:49:50.449Z] [LOG] ======================================================================
[2025-10-22T06:49:50.449Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T06:49:50.450Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T06:49:50.450Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T06:49:50.451Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:49:50.451Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:49:50.452Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:49:50.453Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T06:49:50.454Z] [LOG] ======================================================================

[2025-10-22T06:49:50.455Z] [LOG] ✅ Chamodi null: Calculation completed successfully
[2025-10-22T06:49:50.455Z] [LOG] 📊 Progress: 22/34 (64.7%)
[2025-10-22T06:49:50.456Z] [LOG] 
🧮 Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-22T06:49:50.457Z] [LOG] 📋 Record ID: c11a7534-4cf3-46ca-bd1a-f4e0f3057976
[2025-10-22T06:49:50.458Z] [LOG] 
======================================================================
[2025-10-22T06:49:50.458Z] [LOG] 🧮 CALCULATING PAYROLL: R. D.A Kaushalya null (EMP000044)
[2025-10-22T06:49:50.459Z] [LOG] ======================================================================
[2025-10-22T06:49:51.833Z] [LOG] 🔍 Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-22T06:49:51.834Z] [LOG]    Total components: 10
[2025-10-22T06:49:51.835Z] [LOG]    Applicable components: 10
[2025-10-22T06:49:51.835Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T06:49:52.861Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:49:52.862Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:49:53.091Z] [LOG] 📊 Found 0 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:53.322Z] [LOG] 📊 Found 0 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:53.550Z] [LOG] 📊 Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:53.551Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:49:53.552Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:49:53.553Z] [LOG] 💰 GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-22T06:49:53.553Z] [LOG]    Base Salary: 50000
[2025-10-22T06:49:53.554Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:49:53.554Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:49:53.555Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:53.783Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:49:54.013Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:49:54.014Z] [LOG]    Employee ID: 01443963-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:54.015Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:49:54.015Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:49:54.016Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T06:49:54.248Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:49:54.249Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T06:49:54.249Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T06:49:54.250Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T06:49:54.250Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:49:54.251Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:49:54.252Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:49:54.952Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:49:54.953Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:49:54.953Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:49:54.954Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:49:54.954Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:49:54.955Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:49:54.956Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:49:54.956Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:49:54.957Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T06:49:54.957Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T06:49:54.959Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:54.959Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:54.960Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T06:49:55.200Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:49:55.201Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:49:55.202Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:49:55.202Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:49:55.203Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:49:55.203Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:49:55.204Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T06:49:55.205Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T06:49:55.205Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:49:55.206Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:55.207Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T06:49:55.208Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:49:55.209Z] [LOG]       Expected Earned (until 2025-10-21): Rs.31999.44
[2025-10-22T06:49:55.209Z] [LOG]       Actual Earned: Rs.3999.93
[2025-10-22T06:49:55.210Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:49:55.210Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T06:49:55.211Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:49:55.212Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:49:55.212Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:49:55.213Z] [LOG]    Gross Salary: 50000
[2025-10-22T06:49:55.214Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:49:55.214Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:49:55.215Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:55.215Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:49:55.216Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:55.217Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:49:55.217Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:55.218Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:49:55.219Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:55.219Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:49:55.220Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:55.221Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:49:55.221Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:55.222Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:49:55.223Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:55.223Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:49:55.224Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:55.224Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:49:55.225Z] [LOG]    Fixed amount: 0
[2025-10-22T06:49:55.226Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:49:55.226Z] [LOG] Regular deductions for R. D.A Kaushalya null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:49:55.227Z] [LOG] Combined deductions for R. D.A Kaushalya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 27999.51
}
[2025-10-22T06:49:55.461Z] [LOG] Creating components for record c11a7534-4cf3-46ca-bd1a-f4e0f3057976: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:49:55.463Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T06:49:55.693Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:49:55.932Z] [LOG] Created payroll_record_component: dbd7ca53-be56-4d3a-b855-516f6c75d286 for Attendance Deduction
[2025-10-22T06:49:56.740Z] [LOG] ✅ Financial balances updated successfully for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:56.741Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:49:56.742Z] [LOG] 
======================================================================
[2025-10-22T06:49:56.742Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: R. D.A Kaushalya null
[2025-10-22T06:49:56.743Z] [LOG] ======================================================================
[2025-10-22T06:49:56.744Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T06:49:56.744Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T06:49:56.745Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T06:49:56.745Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:49:56.746Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:49:56.747Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:49:56.747Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T06:49:56.748Z] [LOG] ======================================================================

[2025-10-22T06:49:56.749Z] [LOG] ✅ R. D.A Kaushalya null: Calculation completed successfully
[2025-10-22T06:49:56.750Z] [LOG] 📊 Progress: 23/34 (67.6%)
[2025-10-22T06:49:56.750Z] [LOG] 
🧮 Processing: Jessie null (EMP000013)
[2025-10-22T06:49:56.751Z] [LOG] 📋 Record ID: c8b1cc3a-63af-40f9-b1fa-ed525389960d
[2025-10-22T06:49:56.752Z] [LOG] 
======================================================================
[2025-10-22T06:49:56.753Z] [LOG] 🧮 CALCULATING PAYROLL: Jessie null (EMP000013)
[2025-10-22T06:49:56.754Z] [LOG] ======================================================================
[2025-10-22T06:49:57.867Z] [LOG] 🔍 Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-22T06:49:57.868Z] [LOG]    Total components: 10
[2025-10-22T06:49:57.868Z] [LOG]    Applicable components: 10
[2025-10-22T06:49:57.869Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T06:49:58.992Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:49:58.993Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:49:59.262Z] [LOG] 📊 Found 0 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:59.498Z] [LOG] 📊 Found 0 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:59.749Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-22T06:49:59.750Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:49:59.751Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:49:59.752Z] [LOG] 💰 GROSS CALCULATION for Jessie null:
[2025-10-22T06:49:59.752Z] [LOG]    Base Salary: 60000
[2025-10-22T06:49:59.753Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:49:59.753Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:49:59.754Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:00.063Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:50:00.301Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:50:00.302Z] [LOG]    Employee ID: 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:00.303Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:50:00.303Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:50:00.304Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-22T06:50:00.552Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:50:00.553Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-22T06:50:00.554Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-22T06:50:00.554Z] [LOG]       Saturday Hourly Rate: Rs.282.35
[2025-10-22T06:50:00.555Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:50:00.555Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:50:00.556Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:50:01.512Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:50:01.512Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:50:01.513Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:50:01.514Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:50:01.514Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:50:01.515Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:50:01.515Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:50:01.516Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:50:01.517Z] [LOG]       Weekday: 110.50h × Rs.282.35 = Rs.31199.68
[2025-10-22T06:50:01.517Z] [LOG]       Saturday: 25.50h × Rs.282.35 = Rs.7199.93
[2025-10-22T06:50:01.518Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:01.519Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:01.520Z] [LOG]       Total Expected Earned: Rs.38399.60
[2025-10-22T06:50:01.894Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:50:01.895Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:50:01.895Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:50:01.896Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:50:01.897Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:50:01.897Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:50:01.898Z] [LOG]       Weekday: 17.00h × Rs.282.35 = Rs.4799.95
[2025-10-22T06:50:01.898Z] [LOG]       Saturday: 0.00h × Rs.282.35 = Rs.0.00
[2025-10-22T06:50:01.899Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:01.900Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:01.900Z] [LOG]       Total Actual Earned: Rs.4799.95
[2025-10-22T06:50:01.901Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:50:01.902Z] [LOG]       Expected Earned (until 2025-10-21): Rs.38399.60
[2025-10-22T06:50:01.903Z] [LOG]       Actual Earned: Rs.4799.95
[2025-10-22T06:50:01.904Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:01.904Z] [LOG]       Attendance Deduction: Rs.33599.65
[2025-10-22T06:50:01.905Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:50:01.906Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:50:01.906Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:50:01.907Z] [LOG]    Gross Salary: 60000
[2025-10-22T06:50:01.908Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:50:01.908Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:50:01.909Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:01.909Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:50:01.910Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:01.911Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:50:01.911Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:01.912Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:50:01.913Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:01.913Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:50:01.914Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:01.914Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:50:01.916Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:01.916Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:50:01.917Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:01.918Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:50:01.918Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:01.918Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:50:01.919Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:01.920Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:50:01.920Z] [LOG] Regular deductions for Jessie null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:50:01.921Z] [LOG] Combined deductions for Jessie null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 33599.65000000001,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 33599.65000000001
}
[2025-10-22T06:50:02.300Z] [LOG] Creating components for record c8b1cc3a-63af-40f9-b1fa-ed525389960d: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:50:02.302Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 33599.65000000001
}
[2025-10-22T06:50:02.545Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:50:02.868Z] [LOG] Created payroll_record_component: acdc4dc9-f558-416b-a3ff-394ae0299507 for Attendance Deduction
[2025-10-22T06:50:03.726Z] [LOG] ✅ Financial balances updated successfully for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:03.727Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:50:03.728Z] [LOG] 
======================================================================
[2025-10-22T06:50:03.728Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Jessie null
[2025-10-22T06:50:03.729Z] [LOG] ======================================================================
[2025-10-22T06:50:03.730Z] [LOG]    Gross Salary: Rs.60000.00
[2025-10-22T06:50:03.730Z] [LOG]    Total Deductions: Rs.33599.65
[2025-10-22T06:50:03.731Z] [LOG]       - Attendance Deduction: Rs.33599.65
[2025-10-22T06:50:03.731Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:50:03.732Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:50:03.733Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:50:03.734Z] [LOG]    NET SALARY: Rs.26400.35
[2025-10-22T06:50:03.735Z] [LOG] ======================================================================

[2025-10-22T06:50:03.735Z] [LOG] ✅ Jessie null: Calculation completed successfully
[2025-10-22T06:50:03.736Z] [LOG] 📊 Progress: 24/34 (70.6%)
[2025-10-22T06:50:03.737Z] [LOG] 
🧮 Processing: Safna Nawas null (EMP000021)
[2025-10-22T06:50:03.738Z] [LOG] 📋 Record ID: d02144ac-be65-4165-a890-71afc52bd7d3
[2025-10-22T06:50:03.738Z] [LOG] 
======================================================================
[2025-10-22T06:50:03.739Z] [LOG] 🧮 CALCULATING PAYROLL: Safna Nawas null (EMP000021)
[2025-10-22T06:50:03.740Z] [LOG] ======================================================================
[2025-10-22T06:50:05.498Z] [LOG] 🔍 Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-22T06:50:05.499Z] [LOG]    Total components: 10
[2025-10-22T06:50:05.499Z] [LOG]    Applicable components: 10
[2025-10-22T06:50:05.500Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T06:50:06.773Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:50:06.774Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:50:07.032Z] [LOG] 📊 Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:07.359Z] [LOG] 📊 Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:07.611Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:07.611Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:50:07.612Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:50:07.614Z] [LOG] 💰 GROSS CALCULATION for Safna Nawas null:
[2025-10-22T06:50:07.615Z] [LOG]    Base Salary: 50000
[2025-10-22T06:50:07.615Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:50:07.616Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:50:07.617Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:07.861Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:50:08.229Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:50:08.229Z] [LOG]    Employee ID: 0143c977-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:08.230Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:50:08.231Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:50:08.231Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T06:50:09.320Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:50:09.321Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T06:50:09.322Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T06:50:09.322Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T06:50:09.323Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:50:09.324Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:50:09.324Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:50:10.357Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:50:10.357Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:50:10.358Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:50:10.359Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:50:10.359Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:50:10.360Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:50:10.360Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:50:10.361Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:50:10.362Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T06:50:10.362Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T06:50:10.364Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:10.364Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:10.365Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T06:50:10.752Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:50:10.753Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:50:10.753Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:50:10.754Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:50:10.754Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:50:10.755Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:50:10.756Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T06:50:10.756Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T06:50:10.757Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:10.757Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:10.758Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T06:50:10.759Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:50:10.760Z] [LOG]       Expected Earned (until 2025-10-21): Rs.31999.44
[2025-10-22T06:50:10.761Z] [LOG]       Actual Earned: Rs.3999.93
[2025-10-22T06:50:10.761Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:10.762Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T06:50:10.763Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:50:10.763Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:50:10.764Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:50:10.765Z] [LOG]    Gross Salary: 50000
[2025-10-22T06:50:10.766Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:50:10.766Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:50:10.767Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:10.767Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:50:10.768Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:10.769Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:50:10.770Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:10.773Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:50:10.775Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:10.776Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:50:10.777Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:10.777Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:50:10.778Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:10.778Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:50:10.779Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:10.779Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:50:10.780Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:10.780Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:50:10.781Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:10.782Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:50:10.783Z] [LOG] Regular deductions for Safna Nawas null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:50:10.783Z] [LOG] Combined deductions for Safna Nawas null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 27999.51
}
[2025-10-22T06:50:11.058Z] [LOG] Creating components for record d02144ac-be65-4165-a890-71afc52bd7d3: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:50:11.060Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T06:50:11.313Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:50:11.546Z] [LOG] Created payroll_record_component: c0f5adb6-3821-410c-be59-e02d330d863b for Attendance Deduction
[2025-10-22T06:50:12.269Z] [LOG] ✅ Financial balances updated successfully for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:12.269Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:50:12.269Z] [LOG] 
======================================================================
[2025-10-22T06:50:12.269Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Safna Nawas null
[2025-10-22T06:50:12.270Z] [LOG] ======================================================================
[2025-10-22T06:50:12.270Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T06:50:12.270Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T06:50:12.270Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T06:50:12.270Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:50:12.270Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:50:12.271Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:50:12.271Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T06:50:12.271Z] [LOG] ======================================================================

[2025-10-22T06:50:12.271Z] [LOG] ✅ Safna Nawas null: Calculation completed successfully
[2025-10-22T06:50:12.271Z] [LOG] 📊 Progress: 25/34 (73.5%)
[2025-10-22T06:50:12.271Z] [LOG] 
🧮 Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-22T06:50:12.272Z] [LOG] 📋 Record ID: d19e84ce-65ba-4cc2-9767-313da2a457ff
[2025-10-22T06:50:12.272Z] [LOG] 
======================================================================
[2025-10-22T06:50:12.272Z] [LOG] 🧮 CALCULATING PAYROLL: P.D.P Dilini Madushani null (EMP000043)
[2025-10-22T06:50:12.272Z] [LOG] ======================================================================
[2025-10-22T06:50:13.294Z] [LOG] 🔍 Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-22T06:50:13.295Z] [LOG]    Total components: 10
[2025-10-22T06:50:13.295Z] [LOG]    Applicable components: 10
[2025-10-22T06:50:13.295Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-22T06:50:14.463Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:50:14.464Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:50:14.852Z] [LOG] 📊 Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:15.140Z] [LOG] 📊 Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:15.382Z] [LOG] 📊 Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:15.382Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:50:15.382Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:50:15.383Z] [LOG] 💰 GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-22T06:50:15.383Z] [LOG]    Base Salary: 50000
[2025-10-22T06:50:15.383Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:50:15.384Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:50:15.384Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:15.617Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:50:15.896Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:50:15.897Z] [LOG]    Employee ID: 014435dc-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:15.897Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:50:15.897Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:50:15.897Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T06:50:16.319Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:50:16.319Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T06:50:16.319Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T06:50:16.319Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T06:50:16.319Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:50:16.319Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:50:16.320Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:50:17.076Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:50:17.076Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:50:17.076Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:50:17.077Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:50:17.077Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:50:17.077Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:50:17.077Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:50:17.078Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:50:17.078Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T06:50:17.078Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T06:50:17.079Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:17.079Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:17.079Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T06:50:17.344Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:50:17.344Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:50:17.345Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:50:17.345Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:50:17.345Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:50:17.345Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:50:17.345Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T06:50:17.346Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T06:50:17.346Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:17.346Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:17.346Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T06:50:17.347Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:50:17.347Z] [LOG]       Expected Earned (until 2025-10-21): Rs.31999.44
[2025-10-22T06:50:17.347Z] [LOG]       Actual Earned: Rs.3999.93
[2025-10-22T06:50:17.347Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:17.348Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T06:50:17.348Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:50:17.348Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:50:17.349Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:50:17.349Z] [LOG]    Gross Salary: 50000
[2025-10-22T06:50:17.349Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:50:17.349Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:50:17.350Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:17.350Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:50:17.350Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:17.350Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:50:17.350Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:17.351Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:50:17.351Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:17.351Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:50:17.351Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:17.352Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:50:17.352Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:17.352Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:50:17.352Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:17.353Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:50:17.353Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:17.353Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:50:17.353Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:17.353Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:50:17.354Z] [LOG] Regular deductions for P.D.P Dilini Madushani null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:50:17.354Z] [LOG] Combined deductions for P.D.P Dilini Madushani null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 27999.51
}
[2025-10-22T06:50:17.716Z] [LOG] Creating components for record d19e84ce-65ba-4cc2-9767-313da2a457ff: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:50:17.717Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T06:50:17.967Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:50:18.245Z] [LOG] Created payroll_record_component: a7d12dc0-e520-403f-9e67-9e0619ca7209 for Attendance Deduction
[2025-10-22T06:50:18.776Z] [LOG] ✅ Financial balances updated successfully for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:18.776Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:50:18.776Z] [LOG] 
======================================================================
[2025-10-22T06:50:18.776Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: P.D.P Dilini Madushani null
[2025-10-22T06:50:18.777Z] [LOG] ======================================================================
[2025-10-22T06:50:18.777Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T06:50:18.777Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T06:50:18.777Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T06:50:18.778Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:50:18.778Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:50:18.778Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:50:18.778Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T06:50:18.779Z] [LOG] ======================================================================

[2025-10-22T06:50:18.779Z] [LOG] ✅ P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-22T06:50:18.779Z] [LOG] 📊 Progress: 26/34 (76.5%)
[2025-10-22T06:50:18.779Z] [LOG] 
🧮 Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-22T06:50:18.780Z] [LOG] 📋 Record ID: d4911961-18f6-4a30-b037-8884c859b4a5
[2025-10-22T06:50:18.780Z] [LOG] 
======================================================================
[2025-10-22T06:50:18.780Z] [LOG] 🧮 CALCULATING PAYROLL: Viruna Damsiha Cooray null (EMP000038)
[2025-10-22T06:50:18.780Z] [LOG] ======================================================================
[2025-10-22T06:50:19.852Z] [LOG] 🔍 Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-22T06:50:19.852Z] [LOG]    Total components: 10
[2025-10-22T06:50:19.852Z] [LOG]    Applicable components: 10
[2025-10-22T06:50:19.852Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T06:50:22.294Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:50:22.295Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:50:22.560Z] [LOG] 📊 Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:22.808Z] [LOG] 📊 Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:23.059Z] [LOG] 📊 Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:23.060Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:50:23.061Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:50:23.062Z] [LOG] 💰 GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-22T06:50:23.062Z] [LOG]    Base Salary: 50000
[2025-10-22T06:50:23.063Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:50:23.064Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:50:23.064Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:23.564Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:50:23.874Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:50:23.875Z] [LOG]    Employee ID: 01441633-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:23.875Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:50:23.876Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:50:23.877Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T06:50:24.134Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:50:24.135Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T06:50:24.135Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T06:50:24.136Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T06:50:24.136Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:50:24.137Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:50:24.137Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:50:25.093Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:50:25.094Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:50:25.094Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:50:25.095Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:50:25.095Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:50:25.096Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:50:25.097Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:50:25.097Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:50:25.098Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T06:50:25.098Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T06:50:25.099Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:25.100Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:25.101Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T06:50:25.381Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:50:25.381Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:50:25.382Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:50:25.383Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:50:25.383Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:50:25.384Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:50:25.384Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T06:50:25.385Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T06:50:25.385Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:25.386Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:25.387Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T06:50:25.388Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:50:25.389Z] [LOG]       Expected Earned (until 2025-10-21): Rs.31999.44
[2025-10-22T06:50:25.390Z] [LOG]       Actual Earned: Rs.3999.93
[2025-10-22T06:50:25.391Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:25.391Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T06:50:25.392Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:50:25.393Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:50:25.393Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:50:25.394Z] [LOG]    Gross Salary: 50000
[2025-10-22T06:50:25.394Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:50:25.395Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:50:25.395Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:25.396Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:50:25.397Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:25.397Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:50:25.398Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:25.398Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:50:25.399Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:25.400Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:50:25.400Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:25.401Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:50:25.401Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:25.402Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:50:25.402Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:25.403Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:50:25.404Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:25.404Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:50:25.405Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:25.405Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:50:25.406Z] [LOG] Regular deductions for Viruna Damsiha Cooray null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:50:25.407Z] [LOG] Combined deductions for Viruna Damsiha Cooray null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 27999.51
}
[2025-10-22T06:50:25.755Z] [LOG] Creating components for record d4911961-18f6-4a30-b037-8884c859b4a5: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:50:25.757Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T06:50:26.002Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:50:26.241Z] [LOG] Created payroll_record_component: 3078e94a-635f-4af4-9963-20a53b3f0aaa for Attendance Deduction
[2025-10-22T06:50:26.878Z] [LOG] ✅ Financial balances updated successfully for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:26.878Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:50:26.879Z] [LOG] 
======================================================================
[2025-10-22T06:50:26.879Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Viruna Damsiha Cooray null
[2025-10-22T06:50:26.880Z] [LOG] ======================================================================
[2025-10-22T06:50:26.881Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T06:50:26.881Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T06:50:26.882Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T06:50:26.883Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:50:26.883Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:50:26.884Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:50:26.885Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T06:50:26.886Z] [LOG] ======================================================================

[2025-10-22T06:50:26.887Z] [LOG] ✅ Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-22T06:50:26.887Z] [LOG] 📊 Progress: 27/34 (79.4%)
[2025-10-22T06:50:26.888Z] [LOG] 
🧮 Processing: Sumaiya null (EMP000016)
[2025-10-22T06:50:26.891Z] [LOG] 📋 Record ID: da815002-c82f-4bc4-964c-12aa812a5d81
[2025-10-22T06:50:26.892Z] [LOG] 
======================================================================
[2025-10-22T06:50:26.893Z] [LOG] 🧮 CALCULATING PAYROLL: Sumaiya null (EMP000016)
[2025-10-22T06:50:26.894Z] [LOG] ======================================================================
[2025-10-22T06:50:28.445Z] [LOG] 🔍 Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-22T06:50:28.446Z] [LOG]    Total components: 10
[2025-10-22T06:50:28.446Z] [LOG]    Applicable components: 10
[2025-10-22T06:50:28.447Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T06:50:29.770Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:50:29.771Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:50:30.029Z] [LOG] 📊 Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:30.273Z] [LOG] 📊 Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:30.505Z] [LOG] 📊 Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:30.505Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:50:30.506Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:50:30.507Z] [LOG] 💰 GROSS CALCULATION for Sumaiya null:
[2025-10-22T06:50:30.508Z] [LOG]    Base Salary: 60000
[2025-10-22T06:50:30.508Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:50:30.509Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:50:30.509Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:30.764Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:50:30.998Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:50:30.999Z] [LOG]    Employee ID: 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:30.999Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:50:31.000Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:50:31.000Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-22T06:50:31.231Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:50:31.232Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-22T06:50:31.232Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-22T06:50:31.233Z] [LOG]       Saturday Hourly Rate: Rs.282.35
[2025-10-22T06:50:31.233Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:50:31.234Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:50:31.235Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:50:32.596Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:50:32.597Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:50:32.598Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:50:32.598Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:50:32.599Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:50:32.600Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:50:32.600Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:50:32.601Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:50:32.601Z] [LOG]       Weekday: 110.50h × Rs.282.35 = Rs.31199.68
[2025-10-22T06:50:32.602Z] [LOG]       Saturday: 25.50h × Rs.282.35 = Rs.7199.93
[2025-10-22T06:50:32.603Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:32.603Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:32.604Z] [LOG]       Total Expected Earned: Rs.38399.60
[2025-10-22T06:50:32.845Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:50:32.846Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:50:32.847Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:50:32.847Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:50:32.848Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:50:32.848Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:50:32.849Z] [LOG]       Weekday: 17.00h × Rs.282.35 = Rs.4799.95
[2025-10-22T06:50:32.849Z] [LOG]       Saturday: 0.00h × Rs.282.35 = Rs.0.00
[2025-10-22T06:50:32.850Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:32.851Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:32.851Z] [LOG]       Total Actual Earned: Rs.4799.95
[2025-10-22T06:50:32.852Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:50:32.853Z] [LOG]       Expected Earned (until 2025-10-21): Rs.38399.60
[2025-10-22T06:50:32.854Z] [LOG]       Actual Earned: Rs.4799.95
[2025-10-22T06:50:32.854Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:32.855Z] [LOG]       Attendance Deduction: Rs.33599.65
[2025-10-22T06:50:32.855Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:50:32.856Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:50:32.857Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:50:32.858Z] [LOG]    Gross Salary: 60000
[2025-10-22T06:50:32.858Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:50:32.859Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:50:32.859Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:32.860Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:50:32.860Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:32.861Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:50:32.862Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:32.862Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:50:32.863Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:32.863Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:50:32.864Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:32.865Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:50:32.865Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:32.866Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:50:32.867Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:32.868Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:50:32.868Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:32.870Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:50:32.870Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:32.871Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:50:32.872Z] [LOG] Regular deductions for Sumaiya null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:50:32.873Z] [LOG] Combined deductions for Sumaiya null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 33599.65000000001,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 33599.65000000001
}
[2025-10-22T06:50:33.127Z] [LOG] Creating components for record da815002-c82f-4bc4-964c-12aa812a5d81: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:50:33.128Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 33599.65000000001
}
[2025-10-22T06:50:33.361Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:50:33.657Z] [LOG] Created payroll_record_component: 658007cf-44f0-4e3d-b93b-bb8ef7465013 for Attendance Deduction
[2025-10-22T06:50:34.219Z] [LOG] ✅ Financial balances updated successfully for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:34.220Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:50:34.220Z] [LOG] 
======================================================================
[2025-10-22T06:50:34.221Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sumaiya null
[2025-10-22T06:50:34.222Z] [LOG] ======================================================================
[2025-10-22T06:50:34.222Z] [LOG]    Gross Salary: Rs.60000.00
[2025-10-22T06:50:34.223Z] [LOG]    Total Deductions: Rs.33599.65
[2025-10-22T06:50:34.223Z] [LOG]       - Attendance Deduction: Rs.33599.65
[2025-10-22T06:50:34.224Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:50:34.224Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:50:34.225Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:50:34.226Z] [LOG]    NET SALARY: Rs.26400.35
[2025-10-22T06:50:34.226Z] [LOG] ======================================================================

[2025-10-22T06:50:34.227Z] [LOG] ✅ Sumaiya null: Calculation completed successfully
[2025-10-22T06:50:34.228Z] [LOG] 📊 Progress: 28/34 (82.4%)
[2025-10-22T06:50:34.229Z] [LOG] 
🧮 Processing: Piyumi null (EMP000025)
[2025-10-22T06:50:34.229Z] [LOG] 📋 Record ID: e56f8c59-f697-42dc-bbbf-518d2201aba4
[2025-10-22T06:50:34.230Z] [LOG] 
======================================================================
[2025-10-22T06:50:34.231Z] [LOG] 🧮 CALCULATING PAYROLL: Piyumi null (EMP000025)
[2025-10-22T06:50:34.231Z] [LOG] ======================================================================
[2025-10-22T06:50:35.359Z] [LOG] 🔍 Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-22T06:50:35.360Z] [LOG]    Total components: 10
[2025-10-22T06:50:35.361Z] [LOG]    Applicable components: 10
[2025-10-22T06:50:35.361Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T06:50:36.642Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:50:36.643Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:50:36.913Z] [LOG] 📊 Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:37.143Z] [LOG] 📊 Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:37.400Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:37.400Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:50:37.401Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:50:37.402Z] [LOG] 💰 GROSS CALCULATION for Piyumi null:
[2025-10-22T06:50:37.403Z] [LOG]    Base Salary: 50000
[2025-10-22T06:50:37.403Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:50:37.404Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:50:37.404Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:37.653Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:50:37.895Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:50:37.896Z] [LOG]    Employee ID: 0143e565-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:37.896Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:50:37.897Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:50:37.897Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T06:50:38.184Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:50:38.185Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T06:50:38.186Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T06:50:38.186Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T06:50:38.187Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:50:38.187Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:50:38.188Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:50:39.035Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:50:39.035Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:50:39.036Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:50:39.037Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:50:39.037Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:50:39.038Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:50:39.038Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:50:39.039Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:50:39.040Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T06:50:39.040Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T06:50:39.041Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:39.042Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:39.043Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T06:50:39.296Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:50:39.297Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:50:39.297Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:50:39.298Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:50:39.299Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:50:39.299Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:50:39.300Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T06:50:39.300Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T06:50:39.301Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:39.302Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:39.302Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T06:50:39.303Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:50:39.304Z] [LOG]       Expected Earned (until 2025-10-21): Rs.31999.44
[2025-10-22T06:50:39.305Z] [LOG]       Actual Earned: Rs.3999.93
[2025-10-22T06:50:39.305Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:39.306Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T06:50:39.307Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:50:39.308Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:50:39.308Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:50:39.309Z] [LOG]    Gross Salary: 50000
[2025-10-22T06:50:39.310Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:50:39.310Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:50:39.311Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:39.311Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:50:39.312Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:39.312Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:50:39.313Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:39.314Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:50:39.314Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:39.315Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:50:39.315Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:39.316Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:50:39.317Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:39.317Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:50:39.318Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:39.318Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:50:39.319Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:39.319Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:50:39.320Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:39.321Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:50:39.321Z] [LOG] Regular deductions for Piyumi null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:50:39.322Z] [LOG] Combined deductions for Piyumi null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 27999.51
}
[2025-10-22T06:50:39.680Z] [LOG] Creating components for record e56f8c59-f697-42dc-bbbf-518d2201aba4: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:50:39.682Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T06:50:40.003Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:50:40.249Z] [LOG] Created payroll_record_component: 3b80cadf-4c98-470b-b7b5-f15564fc59cf for Attendance Deduction
[2025-10-22T06:50:40.713Z] [LOG] ✅ Financial balances updated successfully for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:40.714Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:50:40.715Z] [LOG] 
======================================================================
[2025-10-22T06:50:40.715Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Piyumi null
[2025-10-22T06:50:40.716Z] [LOG] ======================================================================
[2025-10-22T06:50:40.716Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T06:50:40.717Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T06:50:40.717Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T06:50:40.718Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:50:40.719Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:50:40.719Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:50:40.720Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T06:50:40.721Z] [LOG] ======================================================================

[2025-10-22T06:50:40.722Z] [LOG] ✅ Piyumi null: Calculation completed successfully
[2025-10-22T06:50:40.723Z] [LOG] 📊 Progress: 29/34 (85.3%)
[2025-10-22T06:50:40.724Z] [LOG] 
🧮 Processing: Office Team null (EMP000041)
[2025-10-22T06:50:40.725Z] [LOG] 📋 Record ID: e8ab2662-b4d3-41a7-9ada-3e48a4c6ca2b
[2025-10-22T06:50:40.725Z] [LOG] 
======================================================================
[2025-10-22T06:50:40.726Z] [LOG] 🧮 CALCULATING PAYROLL: Office Team null (EMP000041)
[2025-10-22T06:50:40.726Z] [LOG] ======================================================================
[2025-10-22T06:50:41.769Z] [LOG] 🔍 Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-22T06:50:41.769Z] [LOG]    Total components: 10
[2025-10-22T06:50:41.770Z] [LOG]    Applicable components: 10
[2025-10-22T06:50:41.771Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-22T06:50:42.757Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:50:42.757Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:50:42.986Z] [LOG] 📊 Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:43.238Z] [LOG] 📊 Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:43.578Z] [LOG] 📊 Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:43.579Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:50:43.580Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:50:43.580Z] [LOG] 💰 GROSS CALCULATION for Office Team null:
[2025-10-22T06:50:43.581Z] [LOG]    Base Salary: 1
[2025-10-22T06:50:43.582Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:50:43.582Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:50:43.583Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:43.824Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:50:44.057Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:50:44.057Z] [LOG]    Employee ID: 01442b21-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:44.058Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:50:44.058Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:50:44.059Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-22T06:50:44.303Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:50:44.304Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-22T06:50:44.305Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-22T06:50:44.305Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-22T06:50:44.306Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:50:44.306Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:50:44.307Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:50:45.103Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:50:45.103Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:50:45.104Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:50:45.105Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:50:45.105Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:50:45.106Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:50:45.106Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:50:45.107Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:50:45.108Z] [LOG]       Weekday: 110.50h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:45.108Z] [LOG]       Saturday: 25.50h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:45.109Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:45.110Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:45.111Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-22T06:50:45.342Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:50:45.343Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:50:45.343Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:50:45.344Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:50:45.344Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:50:45.345Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:50:45.346Z] [LOG]       Weekday: 17.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:45.346Z] [LOG]       Saturday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:45.347Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:45.347Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:45.348Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-22T06:50:45.349Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:50:45.350Z] [LOG]       Expected Earned (until 2025-10-21): Rs.0.00
[2025-10-22T06:50:45.351Z] [LOG]       Actual Earned: Rs.0.00
[2025-10-22T06:50:45.351Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:45.352Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-22T06:50:45.353Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:50:45.353Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-22T06:50:45.354Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:50:45.355Z] [LOG]    Gross Salary: 1
[2025-10-22T06:50:45.355Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:50:45.356Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:50:45.356Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:45.357Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:50:45.357Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:45.358Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:50:45.359Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:45.359Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:50:45.360Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:45.360Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:50:45.361Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:45.361Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:50:45.362Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:45.362Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:50:45.363Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:45.364Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:50:45.364Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:45.365Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:50:45.365Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:45.366Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:50:45.366Z] [LOG] Regular deductions for Office Team null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:50:45.367Z] [LOG] Combined deductions for Office Team null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 0,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 0
}
[2025-10-22T06:50:45.619Z] [LOG] Creating components for record e8ab2662-b4d3-41a7-9ada-3e48a4c6ca2b: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:50:45.620Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 0
}
[2025-10-22T06:50:45.853Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:50:46.087Z] [LOG] Created payroll_record_component: 0ea9bc1a-9329-4041-b03b-dd34a5526c49 for Attendance Deduction
[2025-10-22T06:50:46.712Z] [LOG] ✅ Financial balances updated successfully for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:46.713Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:50:46.714Z] [LOG] 
======================================================================
[2025-10-22T06:50:46.714Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Office Team null
[2025-10-22T06:50:46.715Z] [LOG] ======================================================================
[2025-10-22T06:50:46.715Z] [LOG]    Gross Salary: Rs.1.00
[2025-10-22T06:50:46.716Z] [LOG]    Total Deductions: Rs.0.00
[2025-10-22T06:50:46.717Z] [LOG]       - Attendance Deduction: Rs.0.00
[2025-10-22T06:50:46.717Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:50:46.718Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:50:46.719Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:50:46.719Z] [LOG]    NET SALARY: Rs.1.00
[2025-10-22T06:50:46.720Z] [LOG] ======================================================================

[2025-10-22T06:50:46.721Z] [LOG] ✅ Office Team null: Calculation completed successfully
[2025-10-22T06:50:46.722Z] [LOG] 📊 Progress: 30/34 (88.2%)
[2025-10-22T06:50:46.722Z] [LOG] 
🧮 Processing: Ammaar Ilham (EMP000023)
[2025-10-22T06:50:46.723Z] [LOG] 📋 Record ID: f0b306dc-58ae-4ca3-95e1-880cb1393d03
[2025-10-22T06:50:46.724Z] [LOG] 
======================================================================
[2025-10-22T06:50:46.724Z] [LOG] 🧮 CALCULATING PAYROLL: Ammaar Ilham (EMP000023)
[2025-10-22T06:50:46.725Z] [LOG] ======================================================================
[2025-10-22T06:50:47.664Z] [LOG] 🔍 Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-22T06:50:47.665Z] [LOG]    Total components: 10
[2025-10-22T06:50:47.665Z] [LOG]    Applicable components: 10
[2025-10-22T06:50:47.666Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T06:50:48.687Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:50:48.688Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:50:48.920Z] [LOG] 📊 Found 0 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:49.153Z] [LOG] 📊 Found 0 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:49.389Z] [LOG] 📊 Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:49.390Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:50:49.391Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:50:49.392Z] [LOG] 💰 GROSS CALCULATION for Ammaar Ilham:
[2025-10-22T06:50:49.392Z] [LOG]    Base Salary: 70000
[2025-10-22T06:50:49.393Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:50:49.393Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:50:49.394Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:49.627Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:50:49.857Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:50:49.857Z] [LOG]    Employee ID: 0143de00-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:49.858Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:50:49.859Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:50:49.859Z] [LOG]    Base Salary (Full Month): Rs.70000.00
[2025-10-22T06:50:50.198Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:50:50.199Z] [LOG]       Daily Salary: Rs.2800.00
[2025-10-22T06:50:50.199Z] [LOG]       Weekday Hourly Rate: Rs.329.41
[2025-10-22T06:50:50.200Z] [LOG]       Saturday Hourly Rate: Rs.329.41
[2025-10-22T06:50:50.201Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:50:50.201Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:50:50.202Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:50:50.906Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:50:50.906Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:50:50.906Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:50:50.907Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:50:50.907Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:50:50.907Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:50:50.907Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:50:50.907Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:50:50.907Z] [LOG]       Weekday: 110.50h × Rs.329.41 = Rs.36399.81
[2025-10-22T06:50:50.908Z] [LOG]       Saturday: 25.50h × Rs.329.41 = Rs.8399.95
[2025-10-22T06:50:50.908Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:50.908Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:50.908Z] [LOG]       Total Expected Earned: Rs.44799.76
[2025-10-22T06:50:51.140Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:50:51.140Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:50:51.141Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:50:51.141Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:50:51.141Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:50:51.141Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:50:51.142Z] [LOG]       Weekday: 17.00h × Rs.329.41 = Rs.5599.97
[2025-10-22T06:50:51.142Z] [LOG]       Saturday: 0.00h × Rs.329.41 = Rs.0.00
[2025-10-22T06:50:51.142Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:51.142Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:51.143Z] [LOG]       Total Actual Earned: Rs.5599.97
[2025-10-22T06:50:51.143Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:50:51.143Z] [LOG]       Expected Earned (until 2025-10-21): Rs.44799.76
[2025-10-22T06:50:51.143Z] [LOG]       Actual Earned: Rs.5599.97
[2025-10-22T06:50:51.144Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:51.144Z] [LOG]       Attendance Deduction: Rs.39199.79
[2025-10-22T06:50:51.144Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:50:51.144Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:50:51.145Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:50:51.145Z] [LOG]    Gross Salary: 70000
[2025-10-22T06:50:51.145Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:50:51.145Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:50:51.146Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:51.146Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:50:51.146Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:51.146Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:50:51.146Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:51.146Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:50:51.147Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:51.147Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:50:51.147Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:51.147Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:50:51.148Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:51.148Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:50:51.148Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:51.148Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:50:51.149Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:51.149Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:50:51.149Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:51.149Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:50:51.150Z] [LOG] Regular deductions for Ammaar Ilham: {
  "components": [],
  "total": 0
}
[2025-10-22T06:50:51.150Z] [LOG] Combined deductions for Ammaar Ilham: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 39199.79,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 39199.79
}
[2025-10-22T06:50:51.382Z] [LOG] Creating components for record f0b306dc-58ae-4ca3-95e1-880cb1393d03: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:50:51.383Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 39199.79
}
[2025-10-22T06:50:51.613Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:50:51.846Z] [LOG] Created payroll_record_component: 8a14ffc1-57af-46e8-b41e-b2681792dbfd for Attendance Deduction
[2025-10-22T06:50:52.853Z] [LOG] ✅ Financial balances updated successfully for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:52.853Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:50:52.854Z] [LOG] 
======================================================================
[2025-10-22T06:50:52.854Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ammaar Ilham
[2025-10-22T06:50:52.854Z] [LOG] ======================================================================
[2025-10-22T06:50:52.854Z] [LOG]    Gross Salary: Rs.70000.00
[2025-10-22T06:50:52.855Z] [LOG]    Total Deductions: Rs.39199.79
[2025-10-22T06:50:52.855Z] [LOG]       - Attendance Deduction: Rs.39199.79
[2025-10-22T06:50:52.855Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:50:52.855Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:50:52.856Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:50:52.856Z] [LOG]    NET SALARY: Rs.30800.21
[2025-10-22T06:50:52.856Z] [LOG] ======================================================================

[2025-10-22T06:50:52.856Z] [LOG] ✅ Ammaar Ilham: Calculation completed successfully
[2025-10-22T06:50:52.857Z] [LOG] 📊 Progress: 31/34 (91.2%)
[2025-10-22T06:50:52.857Z] [LOG] 
🧮 Processing: Saru null (EMP000022)
[2025-10-22T06:50:52.857Z] [LOG] 📋 Record ID: f37929a4-0fc2-4a72-b914-2871a6844f0f
[2025-10-22T06:50:52.857Z] [LOG] 
======================================================================
[2025-10-22T06:50:52.858Z] [LOG] 🧮 CALCULATING PAYROLL: Saru null (EMP000022)
[2025-10-22T06:50:52.858Z] [LOG] ======================================================================
[2025-10-22T06:50:53.936Z] [LOG] 🔍 Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-22T06:50:53.937Z] [LOG]    Total components: 10
[2025-10-22T06:50:53.937Z] [LOG]    Applicable components: 10
[2025-10-22T06:50:53.937Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T06:50:54.942Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:50:54.942Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:50:55.180Z] [LOG] 📊 Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:55.451Z] [LOG] 📊 Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:55.692Z] [LOG] 📊 Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:55.692Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:50:55.693Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:50:55.693Z] [LOG] 💰 GROSS CALCULATION for Saru null:
[2025-10-22T06:50:55.693Z] [LOG]    Base Salary: 50000
[2025-10-22T06:50:55.694Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:50:55.694Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:50:55.694Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:55.983Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:50:56.210Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:50:56.211Z] [LOG]    Employee ID: 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:56.211Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:50:56.211Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:50:56.211Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T06:50:56.450Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:50:56.450Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T06:50:56.451Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T06:50:56.451Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T06:50:56.451Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:50:56.451Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:50:56.452Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:50:57.178Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:50:57.178Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:50:57.178Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:50:57.178Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:50:57.178Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:50:57.178Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:50:57.179Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:50:57.179Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:50:57.179Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T06:50:57.179Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T06:50:57.179Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:57.179Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:57.179Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T06:50:57.419Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:50:57.419Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:50:57.419Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:50:57.420Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:50:57.420Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:50:57.420Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:50:57.420Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T06:50:57.420Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T06:50:57.421Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:50:57.421Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:57.421Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T06:50:57.421Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:50:57.421Z] [LOG]       Expected Earned (until 2025-10-21): Rs.31999.44
[2025-10-22T06:50:57.422Z] [LOG]       Actual Earned: Rs.3999.93
[2025-10-22T06:50:57.422Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:50:57.422Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T06:50:57.422Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:50:57.422Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:50:57.423Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:50:57.423Z] [LOG]    Gross Salary: 50000
[2025-10-22T06:50:57.423Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:50:57.423Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:50:57.423Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:57.424Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:50:57.424Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:57.424Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:50:57.424Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:57.424Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:50:57.425Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:57.425Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:50:57.425Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:57.425Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:50:57.425Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:57.426Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:50:57.426Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:57.426Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:50:57.427Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:57.427Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:50:57.427Z] [LOG]    Fixed amount: 0
[2025-10-22T06:50:57.427Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:50:57.427Z] [LOG] Regular deductions for Saru null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:50:57.428Z] [LOG] Combined deductions for Saru null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 27999.51
}
[2025-10-22T06:50:57.686Z] [LOG] Creating components for record f37929a4-0fc2-4a72-b914-2871a6844f0f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:50:57.687Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T06:50:57.931Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:50:58.181Z] [LOG] Created payroll_record_component: 0a3a1602-5c57-4f4f-868f-1edfb1167a21 for Attendance Deduction
[2025-10-22T06:50:58.653Z] [LOG] ✅ Financial balances updated successfully for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-22T06:50:58.653Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:50:58.653Z] [LOG] 
======================================================================
[2025-10-22T06:50:58.653Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saru null
[2025-10-22T06:50:58.654Z] [LOG] ======================================================================
[2025-10-22T06:50:58.654Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T06:50:58.654Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T06:50:58.654Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T06:50:58.655Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:50:58.655Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:50:58.655Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:50:58.655Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T06:50:58.655Z] [LOG] ======================================================================

[2025-10-22T06:50:58.656Z] [LOG] ✅ Saru null: Calculation completed successfully
[2025-10-22T06:50:58.656Z] [LOG] 📊 Progress: 32/34 (94.1%)
[2025-10-22T06:50:58.656Z] [LOG] 
🧮 Processing: Waruni null (EMP000024)
[2025-10-22T06:50:58.656Z] [LOG] 📋 Record ID: fc519ddd-c784-447f-943f-e305bf1a7c1f
[2025-10-22T06:50:58.657Z] [LOG] 
======================================================================
[2025-10-22T06:50:58.657Z] [LOG] 🧮 CALCULATING PAYROLL: Waruni null (EMP000024)
[2025-10-22T06:50:58.657Z] [LOG] ======================================================================
[2025-10-22T06:50:59.737Z] [LOG] 🔍 Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-22T06:50:59.738Z] [LOG]    Total components: 10
[2025-10-22T06:50:59.738Z] [LOG]    Applicable components: 10
[2025-10-22T06:50:59.739Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-22T06:51:00.807Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:51:00.808Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:51:01.074Z] [LOG] 📊 Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-22T06:51:01.317Z] [LOG] 📊 Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-22T06:51:01.549Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-22T06:51:01.549Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:51:01.550Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:51:01.551Z] [LOG] 💰 GROSS CALCULATION for Waruni null:
[2025-10-22T06:51:01.552Z] [LOG]    Base Salary: 50000
[2025-10-22T06:51:01.552Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:51:01.553Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:51:01.554Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:01.783Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:51:02.013Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:51:02.014Z] [LOG]    Employee ID: 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-22T06:51:02.014Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:51:02.015Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:51:02.015Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-22T06:51:02.246Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:51:02.247Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-22T06:51:02.247Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-22T06:51:02.248Z] [LOG]       Saturday Hourly Rate: Rs.235.29
[2025-10-22T06:51:02.249Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:51:02.249Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:51:02.250Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:51:02.955Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:51:02.956Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:51:02.956Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:51:02.957Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:51:02.958Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:51:02.958Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:51:02.959Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:51:02.959Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:51:02.960Z] [LOG]       Weekday: 110.50h × Rs.235.29 = Rs.25999.54
[2025-10-22T06:51:02.961Z] [LOG]       Saturday: 25.50h × Rs.235.29 = Rs.5999.89
[2025-10-22T06:51:02.961Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:51:02.962Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:51:02.963Z] [LOG]       Total Expected Earned: Rs.31999.44
[2025-10-22T06:51:03.194Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:51:03.194Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:51:03.195Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:51:03.196Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:51:03.196Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:51:03.197Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:51:03.198Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-22T06:51:03.198Z] [LOG]       Saturday: 0.00h × Rs.235.29 = Rs.0.00
[2025-10-22T06:51:03.199Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:51:03.199Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:51:03.200Z] [LOG]       Total Actual Earned: Rs.3999.93
[2025-10-22T06:51:03.201Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:51:03.202Z] [LOG]       Expected Earned (until 2025-10-21): Rs.31999.44
[2025-10-22T06:51:03.203Z] [LOG]       Actual Earned: Rs.3999.93
[2025-10-22T06:51:03.203Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:51:03.204Z] [LOG]       Attendance Deduction: Rs.27999.51
[2025-10-22T06:51:03.204Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:51:03.205Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:51:03.206Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:51:03.206Z] [LOG]    Gross Salary: 50000
[2025-10-22T06:51:03.207Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:51:03.207Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:51:03.208Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:03.209Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:51:03.209Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:03.210Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:51:03.210Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:03.211Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:51:03.212Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:03.212Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:51:03.213Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:03.213Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:51:03.214Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:03.214Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:51:03.215Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:03.216Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:51:03.216Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:03.217Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:51:03.217Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:03.218Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:51:03.218Z] [LOG] Regular deductions for Waruni null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:51:03.219Z] [LOG] Combined deductions for Waruni null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 27999.51,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 27999.51
}
[2025-10-22T06:51:03.490Z] [LOG] Creating components for record fc519ddd-c784-447f-943f-e305bf1a7c1f: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:51:03.491Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 27999.51
}
[2025-10-22T06:51:03.720Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:51:03.983Z] [LOG] Created payroll_record_component: 636a2f13-58ec-411f-8b7f-344496474d55 for Attendance Deduction
[2025-10-22T06:51:04.476Z] [LOG] ✅ Financial balances updated successfully for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-22T06:51:04.476Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:51:04.477Z] [LOG] 
======================================================================
[2025-10-22T06:51:04.478Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Waruni null
[2025-10-22T06:51:04.478Z] [LOG] ======================================================================
[2025-10-22T06:51:04.479Z] [LOG]    Gross Salary: Rs.50000.00
[2025-10-22T06:51:04.479Z] [LOG]    Total Deductions: Rs.27999.51
[2025-10-22T06:51:04.480Z] [LOG]       - Attendance Deduction: Rs.27999.51
[2025-10-22T06:51:04.480Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:51:04.481Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:51:04.481Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:51:04.482Z] [LOG]    NET SALARY: Rs.22000.49
[2025-10-22T06:51:04.483Z] [LOG] ======================================================================

[2025-10-22T06:51:04.484Z] [LOG] ✅ Waruni null: Calculation completed successfully
[2025-10-22T06:51:04.485Z] [LOG] 📊 Progress: 33/34 (97.1%)
[2025-10-22T06:51:04.485Z] [LOG] 
🧮 Processing: Shandeep null (EMP000034)
[2025-10-22T06:51:04.486Z] [LOG] 📋 Record ID: fca59775-d3c0-405b-b7f7-05627df4f3c1
[2025-10-22T06:51:04.487Z] [LOG] 
======================================================================
[2025-10-22T06:51:04.488Z] [LOG] 🧮 CALCULATING PAYROLL: Shandeep null (EMP000034)
[2025-10-22T06:51:04.488Z] [LOG] ======================================================================
[2025-10-22T06:51:06.045Z] [LOG] 🔍 Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-22T06:51:06.045Z] [LOG]    Total components: 10
[2025-10-22T06:51:06.046Z] [LOG]    Applicable components: 10
[2025-10-22T06:51:06.046Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-22T06:51:07.104Z] [LOG] 
🔄 Processing financial records...
[2025-10-22T06:51:07.105Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-22T06:51:07.344Z] [LOG] 📊 Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-22T06:51:07.592Z] [LOG] 📊 Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-22T06:51:07.829Z] [LOG] 📊 Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-22T06:51:07.829Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-22T06:51:07.830Z] [LOG] 
💰 Calculating gross salary components...
[2025-10-22T06:51:07.831Z] [LOG] 💰 GROSS CALCULATION for Shandeep null:
[2025-10-22T06:51:07.832Z] [LOG]    Base Salary: 80000
[2025-10-22T06:51:07.832Z] [LOG]    📋 Processing 1 configured earning components
[2025-10-22T06:51:07.833Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-22T06:51:07.833Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:08.173Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-22T06:51:08.463Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-22T06:51:08.463Z] [LOG]    Employee ID: 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-22T06:51:08.464Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-22T06:51:08.465Z] [LOG]    📅 Calculation Until: 2025-10-21 (PARTIAL - Until Today)
[2025-10-22T06:51:08.465Z] [LOG]    Base Salary (Full Month): Rs.80000.00
[2025-10-22T06:51:08.697Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-22T06:51:08.698Z] [LOG]       Daily Salary: Rs.3200.00
[2025-10-22T06:51:08.698Z] [LOG]       Weekday Hourly Rate: Rs.376.47
[2025-10-22T06:51:08.699Z] [LOG]       Saturday Hourly Rate: Rs.376.47
[2025-10-22T06:51:08.699Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-22T06:51:08.700Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-22T06:51:08.701Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-22T06:51:09.415Z] [LOG] 
   📊 Working Days Until 2025-10-21:
[2025-10-22T06:51:09.416Z] [LOG]       Weekdays: 13, Saturdays: 3, Sundays: 0
[2025-10-22T06:51:09.416Z] [LOG] 
   ⏰ EXPECTED Hours Until Today (if perfect attendance):
[2025-10-22T06:51:09.417Z] [LOG]       Weekday: 13 days × 8.5h = 110.50h
[2025-10-22T06:51:09.418Z] [LOG]       Saturday: 3 days × 8.5h = 25.50h
[2025-10-22T06:51:09.418Z] [LOG]       Sunday: 0 days × 0h = 0.00h
[2025-10-22T06:51:09.419Z] [LOG]       Total Expected: 136.00h
[2025-10-22T06:51:09.419Z] [LOG] 
   💵 EXPECTED Salary Until Today (if perfect attendance):
[2025-10-22T06:51:09.420Z] [LOG]       Weekday: 110.50h × Rs.376.47 = Rs.41599.94
[2025-10-22T06:51:09.421Z] [LOG]       Saturday: 25.50h × Rs.376.47 = Rs.9599.99
[2025-10-22T06:51:09.422Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:51:09.423Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:51:09.423Z] [LOG]       Total Expected Earned: Rs.51199.92
[2025-10-22T06:51:09.684Z] [LOG] 
   ⏰ ACTUAL Worked Hours (from attendance):
[2025-10-22T06:51:09.684Z] [LOG]       Weekday (Mon-Fri): 17.00h
[2025-10-22T06:51:09.685Z] [LOG]       Saturday: 0.00h
[2025-10-22T06:51:09.686Z] [LOG]       Sunday: 0.00h
[2025-10-22T06:51:09.686Z] [LOG]       Total Worked: 17.00h
[2025-10-22T06:51:09.687Z] [LOG] 
   💵 ACTUAL Earned Salary (worked_hours × hourly_rate):
[2025-10-22T06:51:09.687Z] [LOG]       Weekday: 17.00h × Rs.376.47 = Rs.6399.99
[2025-10-22T06:51:09.688Z] [LOG]       Saturday: 0.00h × Rs.376.47 = Rs.0.00
[2025-10-22T06:51:09.689Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-22T06:51:09.689Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:51:09.690Z] [LOG]       Total Actual Earned: Rs.6399.99
[2025-10-22T06:51:09.690Z] [LOG] 
   📊 FINAL CALCULATION (CORRECTED):
[2025-10-22T06:51:09.692Z] [LOG]       Expected Earned (until 2025-10-21): Rs.51199.92
[2025-10-22T06:51:09.692Z] [LOG]       Actual Earned: Rs.6399.99
[2025-10-22T06:51:09.693Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-22T06:51:09.693Z] [LOG]       Attendance Deduction: Rs.44799.93
[2025-10-22T06:51:09.694Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-22T06:51:09.695Z] [LOG]       📉 Shortfall: 119.00 hours (87.50% of expected)
[2025-10-22T06:51:09.695Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-22T06:51:09.696Z] [LOG]    Gross Salary: 80000
[2025-10-22T06:51:09.697Z] [LOG]    📋 Processing 9 configured deduction components
[2025-10-22T06:51:09.697Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-22T06:51:09.698Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:09.698Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-22T06:51:09.699Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:09.700Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-22T06:51:09.701Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:09.701Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-22T06:51:09.702Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:09.702Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-22T06:51:09.703Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:09.704Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-22T06:51:09.704Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:09.705Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-22T06:51:09.706Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:09.706Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-22T06:51:09.707Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:09.707Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-22T06:51:09.708Z] [LOG]    Fixed amount: 0
[2025-10-22T06:51:09.708Z] [LOG]    📊 Total Deductions: 0
[2025-10-22T06:51:09.709Z] [LOG] Regular deductions for Shandeep null: {
  "components": [],
  "total": 0
}
[2025-10-22T06:51:09.710Z] [LOG] Combined deductions for Shandeep null: {
  "components": [
    {
      "code": "ATTENDANCE_DED",
      "name": "Attendance Deduction",
      "type": "deduction",
      "category": "attendance",
      "amount": 44799.93000000001,
      "details": "Shortfall: 119.00h of 136.00h expected"
    }
  ],
  "total": 44799.93000000001
}
[2025-10-22T06:51:10.013Z] [LOG] Creating components for record fca59775-d3c0-405b-b7f7-05627df4f3c1: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-22T06:51:10.015Z] [LOG] Processing component: {
  "name": "Attendance Deduction",
  "type": "deduction",
  "amount": 44799.93000000001
}
[2025-10-22T06:51:10.250Z] [LOG] Using existing component ID: 1a4950fc-0ef8-4b7c-bf9f-25ccfe2ae02f
[2025-10-22T06:51:10.652Z] [LOG] Created payroll_record_component: ec2aba21-80d9-41a2-8896-a705faab476f for Attendance Deduction
[2025-10-22T06:51:11.224Z] [LOG] ✅ Financial balances updated successfully for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-22T06:51:11.225Z] [LOG] ✅ Financial balances updated successfully
[2025-10-22T06:51:11.225Z] [LOG] 
======================================================================
[2025-10-22T06:51:11.226Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Shandeep null
[2025-10-22T06:51:11.227Z] [LOG] ======================================================================
[2025-10-22T06:51:11.227Z] [LOG]    Gross Salary: Rs.80000.00
[2025-10-22T06:51:11.228Z] [LOG]    Total Deductions: Rs.44799.93
[2025-10-22T06:51:11.228Z] [LOG]       - Attendance Deduction: Rs.44799.93
[2025-10-22T06:51:11.229Z] [LOG]       - Other Deductions: Rs.0.00
[2025-10-22T06:51:11.230Z] [LOG]    Total Taxes: Rs.0.00
[2025-10-22T06:51:11.230Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-22T06:51:11.231Z] [LOG]    NET SALARY: Rs.35200.07
[2025-10-22T06:51:11.232Z] [LOG] ======================================================================

[2025-10-22T06:51:11.232Z] [LOG] ✅ Shandeep null: Calculation completed successfully
[2025-10-22T06:51:11.233Z] [LOG] 📊 Progress: 34/34 (100.0%)
[2025-10-22T06:51:11.234Z] [LOG] 
============================================================
[2025-10-22T06:51:11.235Z] [LOG] 📈 Processing Summary: 34 successful, 0 failed
[2025-10-22T06:51:13.913Z] [LOG] 🎉 Payroll calculation completed successfully!
[2025-10-22T06:51:13.913Z] [LOG] 📊 Final Summary: 34 processed, 0 errors
[2025-10-22T06:51:13.914Z] [INFO] ================================================================================
[2025-10-22T06:51:13.914Z] [INFO] ⏰ Completed at: 2025-10-22T06:51:13.914Z
[2025-10-22T06:51:13.914Z] [INFO] 📊 Total log entries: 3694