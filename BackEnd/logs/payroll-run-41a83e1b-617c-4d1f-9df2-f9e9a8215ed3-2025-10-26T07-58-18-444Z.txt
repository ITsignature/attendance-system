[2025-10-26T07:58:18.445Z] [INFO] 🚀 Payroll calculation logging started for run: 41a83e1b-617c-4d1f-9df2-f9e9a8215ed3
[2025-10-26T07:58:18.445Z] [INFO] 📁 Log file: E:\smart_attendance_system\BackEnd\logs\payroll-run-41a83e1b-617c-4d1f-9df2-f9e9a8215ed3-2025-10-26T07-58-18-444Z.txt
[2025-10-26T07:58:18.445Z] [INFO] ⏰ Started at: 2025-10-26T07:58:18.445Z
[2025-10-26T07:58:18.445Z] [INFO] ================================================================================
[2025-10-26T07:58:18.445Z] [LOG] 🚀 Starting payroll calculation for run: 41a83e1b-617c-4d1f-9df2-f9e9a8215ed3
[2025-10-26T07:58:18.445Z] [LOG] 👤 Client ID: it-signature, User ID: 059304ea-24a5-4d78-a290-cf09b9e53c4c
[2025-10-26T07:58:19.356Z] [LOG] ✅ Payroll run verified: October (MONTHLY_2025_10_REGULAR)
[2025-10-26T07:58:19.736Z] [LOG] 📊 Status updated to 'calculating'
[2025-10-26T07:58:20.417Z] [LOG] 👥 Processing 34 employee records:
[2025-10-26T07:58:20.417Z] [LOG] ============================================================
[2025-10-26T07:58:20.418Z] [LOG] 
🧮 Processing: Waruni null (EMP000024)
[2025-10-26T07:58:20.418Z] [LOG] 📋 Record ID: 06794fd9-df29-4359-a85d-cff390d0e88e
[2025-10-26T07:58:20.420Z] [LOG] 
======================================================================
[2025-10-26T07:58:20.420Z] [LOG] 🧮 CALCULATING PAYROLL: Waruni null (EMP000024)
[2025-10-26T07:58:20.421Z] [LOG] ======================================================================
[2025-10-26T07:58:22.275Z] [LOG] 🔍 Component filtering for employee 0143e40c-7105-11f0-a50f-98e743540430:
[2025-10-26T07:58:22.275Z] [LOG]    Total components: 13
[2025-10-26T07:58:22.275Z] [LOG]    Applicable components: 13
[2025-10-26T07:58:22.276Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-26T07:58:25.154Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T07:58:25.155Z] [LOG] 🔄 Processing financial records for employee 0143e40c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T07:58:25.641Z] [LOG] 📊 Found 0 active loans for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:26.046Z] [LOG] 📊 Found 0 active advances for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:26.524Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:26.525Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T07:58:26.525Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T07:58:26.940Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T07:58:26.940Z] [LOG]    Employee ID: 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:26.940Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T07:58:26.940Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T07:58:26.941Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-26T07:58:27.405Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T07:58:27.406Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-26T07:58:27.406Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-26T07:58:27.406Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-26T07:58:27.407Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T07:58:27.407Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T07:58:27.407Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T07:58:28.851Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T07:58:28.851Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T07:58:29.314Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T07:58:29.314Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T07:58:29.315Z] [LOG]       Total completed sessions found: 6
[2025-10-26T07:58:29.315Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T07:58:29.315Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T07:58:29.316Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T07:58:29.316Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T07:58:29.316Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T07:58:29.317Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T07:58:29.317Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T07:58:29.715Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T07:58:29.716Z] [LOG]          Weekday: 42.50h
[2025-10-26T07:58:29.716Z] [LOG]          Saturday: 4.50h
[2025-10-26T07:58:29.716Z] [LOG]          Sunday: 0.00h
[2025-10-26T07:58:30.122Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T07:58:30.122Z] [LOG]       Weekday: 136.00h
[2025-10-26T07:58:30.123Z] [LOG]       Saturday: 18.00h
[2025-10-26T07:58:30.123Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:58:30.124Z] [LOG]       Total Expected: 154.00h
[2025-10-26T07:58:30.124Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T07:58:30.124Z] [LOG]       Weekday: 42.50h
[2025-10-26T07:58:30.124Z] [LOG]       Saturday: 4.50h
[2025-10-26T07:58:30.125Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:58:30.125Z] [LOG]       Total Actual: 47.00h
[2025-10-26T07:58:30.126Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T07:58:30.126Z] [LOG]       Weekday: 136.00h × Rs.235.29 = Rs.31999.44
[2025-10-26T07:58:30.126Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-26T07:58:30.127Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:58:30.127Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:58:30.127Z] [LOG]       Total Expected Earned: Rs.39999.36
[2025-10-26T07:58:30.127Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T07:58:30.128Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-26T07:58:30.128Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-26T07:58:30.128Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:58:30.129Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:58:30.129Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-26T07:58:30.130Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T07:58:30.130Z] [LOG]       Calculated At: Oct 26, 2025, 13:28:30
[2025-10-26T07:58:30.131Z] [LOG]       Expected Earned (until NOW): Rs.39999.36
[2025-10-26T07:58:30.131Z] [LOG]       Actual Earned (until NOW): Rs.11999.80
[2025-10-26T07:58:30.131Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:58:30.131Z] [LOG]       Attendance Deduction: Rs.27999.56
[2025-10-26T07:58:30.132Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T07:58:30.132Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T07:58:30.132Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T07:58:30.133Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T07:58:30.133Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T07:58:30.133Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T07:58:30.134Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T07:58:30.135Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-26T07:58:30.135Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T07:58:30.136Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T07:58:30.136Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:30.137Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T07:58:30.137Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:30.137Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T07:58:30.137Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:30.137Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T07:58:30.138Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:30.138Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T07:58:30.138Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:30.139Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T07:58:30.139Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:30.139Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T07:58:30.140Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:30.140Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T07:58:30.140Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:30.140Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T07:58:30.141Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:30.141Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T07:58:30.141Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:30.141Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T07:58:30.141Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-26T07:58:30.141Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T07:58:30.141Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T07:58:30.142Z] [LOG] 💰 GROSS CALCULATION for Waruni null:
[2025-10-26T07:58:30.142Z] [LOG]    Base Salary: 50000
[2025-10-26T07:58:30.142Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T07:58:30.142Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T07:58:30.142Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:30.142Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T07:58:30.143Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:30.143Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T07:58:30.143Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:30.564Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T07:58:30.565Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:58:30.565Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T07:58:30.565Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T07:58:30.566Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T07:58:30.566Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T07:58:30.566Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T07:58:30.566Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-26T07:58:30.567Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T07:58:30.567Z] [LOG]    Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T07:58:30.567Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T07:58:30.567Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T07:58:30.568Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T07:58:30.568Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T07:58:30.568Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-26T07:58:30.569Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T07:58:30.569Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-26T07:58:30.569Z] [LOG] 
💾 Database Update:
[2025-10-26T07:58:30.569Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T07:58:30.570Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T07:58:31.154Z] [LOG] 
📝 Components to save:
[2025-10-26T07:58:31.155Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T07:58:31.155Z] [LOG]    Deduction components: 1
[2025-10-26T07:58:31.156Z] [LOG] Creating components for record 06794fd9-df29-4359-a85d-cff390d0e88e: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T07:58:31.157Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-26T07:58:31.572Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T07:58:31.984Z] [LOG] Created payroll_record_component: e5cf8c58-6795-46a8-a480-7c2a1a262f82 for Base Salary
[2025-10-26T07:58:31.985Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 27999.555
}
[2025-10-26T07:58:32.205Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T07:58:32.434Z] [LOG] Created payroll_record_component: eabe7ec6-b9c1-47f2-bf24-7fd5b459a402 for Attendance Shortfall (Info)
[2025-10-26T07:58:33.127Z] [LOG] ✅ Financial balances updated successfully for employee 0143e40c-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:33.127Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T07:58:33.128Z] [LOG] 
======================================================================
[2025-10-26T07:58:33.128Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Waruni null
[2025-10-26T07:58:33.128Z] [LOG] ======================================================================
[2025-10-26T07:58:33.128Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T07:58:33.129Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-26T07:58:33.129Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T07:58:33.129Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:58:33.129Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:58:33.130Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T07:58:33.130Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:58:33.130Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-26T07:58:33.130Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:58:33.130Z] [LOG]    Deductions Breakdown:
[2025-10-26T07:58:33.130Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T07:58:33.131Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T07:58:33.131Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T07:58:33.131Z] [LOG]       - Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T07:58:33.132Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T07:58:33.132Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:58:33.132Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-26T07:58:33.133Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T07:58:33.133Z] [LOG] ======================================================================

[2025-10-26T07:58:33.133Z] [LOG] ✅ Waruni null: Calculation completed successfully
[2025-10-26T07:58:33.133Z] [LOG] 📊 Progress: 1/34 (2.9%)
[2025-10-26T07:58:33.134Z] [LOG] 
🧮 Processing: Sumaiya null (EMP000016)
[2025-10-26T07:58:33.134Z] [LOG] 📋 Record ID: 08b3b9eb-2e88-4edd-8bb7-18aa4fd38809
[2025-10-26T07:58:33.134Z] [LOG] 
======================================================================
[2025-10-26T07:58:33.134Z] [LOG] 🧮 CALCULATING PAYROLL: Sumaiya null (EMP000016)
[2025-10-26T07:58:33.134Z] [LOG] ======================================================================
[2025-10-26T07:58:34.126Z] [LOG] 🔍 Component filtering for employee 0143b22f-7105-11f0-a50f-98e743540430:
[2025-10-26T07:58:34.126Z] [LOG]    Total components: 13
[2025-10-26T07:58:34.127Z] [LOG]    Applicable components: 13
[2025-10-26T07:58:34.127Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-26T07:58:35.642Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T07:58:35.643Z] [LOG] 🔄 Processing financial records for employee 0143b22f-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T07:58:35.833Z] [LOG] 📊 Found 0 active loans for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:36.037Z] [LOG] 📊 Found 0 active advances for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:36.291Z] [LOG] 📊 Found 0 approved bonuses for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:36.292Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T07:58:36.292Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T07:58:36.531Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T07:58:36.531Z] [LOG]    Employee ID: 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:36.531Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T07:58:36.532Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T07:58:36.532Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-26T07:58:36.765Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T07:58:36.765Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-26T07:58:36.765Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-26T07:58:36.766Z] [LOG]       Saturday Hourly Rate: Rs.533.33
[2025-10-26T07:58:36.766Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T07:58:36.766Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T07:58:36.767Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T07:58:37.475Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T07:58:37.475Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T07:58:37.715Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T07:58:37.716Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T07:58:37.716Z] [LOG]       Total completed sessions found: 6
[2025-10-26T07:58:37.716Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T07:58:37.717Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T07:58:37.717Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T07:58:37.717Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T07:58:37.718Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T07:58:37.718Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T07:58:37.718Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T07:58:37.954Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T07:58:37.955Z] [LOG]          Weekday: 42.50h
[2025-10-26T07:58:37.955Z] [LOG]          Saturday: 4.50h
[2025-10-26T07:58:37.955Z] [LOG]          Sunday: 0.00h
[2025-10-26T07:58:38.206Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T07:58:38.206Z] [LOG]       Weekday: 136.00h
[2025-10-26T07:58:38.207Z] [LOG]       Saturday: 18.00h
[2025-10-26T07:58:38.207Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:58:38.207Z] [LOG]       Total Expected: 154.00h
[2025-10-26T07:58:38.208Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T07:58:38.208Z] [LOG]       Weekday: 42.50h
[2025-10-26T07:58:38.208Z] [LOG]       Saturday: 4.50h
[2025-10-26T07:58:38.208Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:58:38.208Z] [LOG]       Total Actual: 47.00h
[2025-10-26T07:58:38.209Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T07:58:38.209Z] [LOG]       Weekday: 136.00h × Rs.282.35 = Rs.38399.60
[2025-10-26T07:58:38.209Z] [LOG]       Saturday: 18.00h × Rs.533.33 = Rs.9599.94
[2025-10-26T07:58:38.210Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:58:38.210Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:58:38.210Z] [LOG]       Total Expected Earned: Rs.47999.54
[2025-10-26T07:58:38.210Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T07:58:38.210Z] [LOG]       Weekday: 42.50h × Rs.282.35 = Rs.11999.88
[2025-10-26T07:58:38.210Z] [LOG]       Saturday: 4.50h × Rs.533.33 = Rs.2399.99
[2025-10-26T07:58:38.211Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:58:38.211Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:58:38.211Z] [LOG]       Total Actual Earned: Rs.14399.86
[2025-10-26T07:58:38.211Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T07:58:38.211Z] [LOG]       Calculated At: Oct 26, 2025, 13:28:38
[2025-10-26T07:58:38.212Z] [LOG]       Expected Earned (until NOW): Rs.47999.54
[2025-10-26T07:58:38.212Z] [LOG]       Actual Earned (until NOW): Rs.14399.86
[2025-10-26T07:58:38.212Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:58:38.212Z] [LOG]       Attendance Deduction: Rs.33599.68
[2025-10-26T07:58:38.212Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T07:58:38.212Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T07:58:38.212Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-26T07:58:38.212Z] [LOG]    Actual Earned Base: Rs.14399.86
[2025-10-26T07:58:38.213Z] [LOG]    Attendance Shortfall: Rs.33599.68
[2025-10-26T07:58:38.213Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T07:58:38.213Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T07:58:38.213Z] [LOG]    Gross Salary: 14399.860000000002
[2025-10-26T07:58:38.213Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T07:58:38.213Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T07:58:38.213Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:38.213Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T07:58:38.213Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:38.214Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T07:58:38.214Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:38.214Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T07:58:38.214Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:38.214Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T07:58:38.214Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:38.214Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T07:58:38.214Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:38.214Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T07:58:38.215Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:38.215Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T07:58:38.215Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:38.215Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T07:58:38.215Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:38.215Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T07:58:38.215Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:38.215Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T07:58:38.216Z] [LOG]    EPF/ETF calculated on: Rs.14399.86
[2025-10-26T07:58:38.216Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T07:58:38.216Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T07:58:38.216Z] [LOG] 💰 GROSS CALCULATION for Sumaiya null:
[2025-10-26T07:58:38.217Z] [LOG]    Base Salary: 60000
[2025-10-26T07:58:38.217Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T07:58:38.217Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T07:58:38.217Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:38.217Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T07:58:38.217Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:38.218Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T07:58:38.218Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:38.429Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T07:58:38.429Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:58:38.430Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T07:58:38.430Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T07:58:38.430Z] [LOG]    Actual Earned Base: Rs.14399.86
[2025-10-26T07:58:38.430Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T07:58:38.431Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T07:58:38.431Z] [LOG]    = Gross Salary: Rs.14399.86
[2025-10-26T07:58:38.431Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T07:58:38.431Z] [LOG]    Attendance Shortfall (Info): Rs.33599.68
[2025-10-26T07:58:38.432Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T07:58:38.432Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T07:58:38.432Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T07:58:38.432Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T07:58:38.433Z] [LOG]    Gross Salary: Rs.14399.86
[2025-10-26T07:58:38.433Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T07:58:38.433Z] [LOG]    = NET SALARY: Rs.14399.86
[2025-10-26T07:58:38.434Z] [LOG] 
💾 Database Update:
[2025-10-26T07:58:38.434Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T07:58:38.434Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T07:58:38.626Z] [LOG] 
📝 Components to save:
[2025-10-26T07:58:38.626Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T07:58:38.627Z] [LOG]    Deduction components: 1
[2025-10-26T07:58:38.627Z] [LOG] Creating components for record 08b3b9eb-2e88-4edd-8bb7-18aa4fd38809: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T07:58:38.628Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 14399.860000000002
}
[2025-10-26T07:58:38.835Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T07:58:39.082Z] [LOG] Created payroll_record_component: 03058b8a-e198-4bea-9f2c-49870b373314 for Base Salary
[2025-10-26T07:58:39.082Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 33599.68000000001
}
[2025-10-26T07:58:39.315Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T07:58:39.555Z] [LOG] Created payroll_record_component: d4416e21-482d-430c-accb-ed1281135e5e for Attendance Shortfall (Info)
[2025-10-26T07:58:39.981Z] [LOG] ✅ Financial balances updated successfully for employee 0143b22f-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:39.981Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T07:58:39.982Z] [LOG] 
======================================================================
[2025-10-26T07:58:39.982Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sumaiya null
[2025-10-26T07:58:39.982Z] [LOG] ======================================================================
[2025-10-26T07:58:39.983Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-26T07:58:39.983Z] [LOG]    Actual Earned Base (Attendance-based): Rs.14399.86
[2025-10-26T07:58:39.983Z] [LOG]    Attendance Shortfall: Rs.33599.68
[2025-10-26T07:58:39.984Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:58:39.984Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:58:39.985Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T07:58:39.985Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:58:39.985Z] [LOG]    GROSS SALARY: Rs.14399.86
[2025-10-26T07:58:39.986Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:58:39.986Z] [LOG]    Deductions Breakdown:
[2025-10-26T07:58:39.986Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T07:58:39.987Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T07:58:39.987Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T07:58:39.988Z] [LOG]       - Attendance Shortfall (Info): Rs.33599.68
[2025-10-26T07:58:39.988Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T07:58:39.988Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:58:39.988Z] [LOG]    NET SALARY: Rs.14399.86
[2025-10-26T07:58:39.989Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T07:58:39.989Z] [LOG] ======================================================================

[2025-10-26T07:58:39.989Z] [LOG] ✅ Sumaiya null: Calculation completed successfully
[2025-10-26T07:58:39.990Z] [LOG] 📊 Progress: 2/34 (5.9%)
[2025-10-26T07:58:39.990Z] [LOG] 
🧮 Processing: Chamodi null (EMP000032)
[2025-10-26T07:58:39.990Z] [LOG] 📋 Record ID: 1607bc19-67d4-4223-bfac-5ddc55a6bac3
[2025-10-26T07:58:39.991Z] [LOG] 
======================================================================
[2025-10-26T07:58:39.991Z] [LOG] 🧮 CALCULATING PAYROLL: Chamodi null (EMP000032)
[2025-10-26T07:58:39.991Z] [LOG] ======================================================================
[2025-10-26T07:58:40.806Z] [LOG] 🔍 Component filtering for employee 0143f302-7105-11f0-a50f-98e743540430:
[2025-10-26T07:58:40.806Z] [LOG]    Total components: 13
[2025-10-26T07:58:40.806Z] [LOG]    Applicable components: 13
[2025-10-26T07:58:40.807Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-26T07:58:42.194Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T07:58:42.195Z] [LOG] 🔄 Processing financial records for employee 0143f302-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T07:58:42.435Z] [LOG] 📊 Found 0 active loans for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:42.675Z] [LOG] 📊 Found 0 active advances for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:42.915Z] [LOG] 📊 Found 0 approved bonuses for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:42.915Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T07:58:42.916Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T07:58:43.107Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T07:58:43.108Z] [LOG]    Employee ID: 0143f302-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:43.108Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T07:58:43.109Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T07:58:43.109Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-26T07:58:43.322Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T07:58:43.323Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-26T07:58:43.323Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-26T07:58:43.324Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-26T07:58:43.324Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T07:58:43.324Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T07:58:43.324Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T07:58:44.035Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T07:58:44.035Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T07:58:44.283Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T07:58:44.283Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T07:58:44.284Z] [LOG]       Total completed sessions found: 6
[2025-10-26T07:58:44.284Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T07:58:44.284Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T07:58:44.285Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T07:58:44.285Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T07:58:44.285Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T07:58:44.286Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T07:58:44.286Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T07:58:44.515Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T07:58:44.516Z] [LOG]          Weekday: 42.50h
[2025-10-26T07:58:44.516Z] [LOG]          Saturday: 4.50h
[2025-10-26T07:58:44.516Z] [LOG]          Sunday: 0.00h
[2025-10-26T07:58:44.787Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T07:58:44.787Z] [LOG]       Weekday: 136.00h
[2025-10-26T07:58:44.788Z] [LOG]       Saturday: 18.00h
[2025-10-26T07:58:44.788Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:58:44.788Z] [LOG]       Total Expected: 154.00h
[2025-10-26T07:58:44.789Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T07:58:44.789Z] [LOG]       Weekday: 42.50h
[2025-10-26T07:58:44.789Z] [LOG]       Saturday: 4.50h
[2025-10-26T07:58:44.790Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:58:44.790Z] [LOG]       Total Actual: 47.00h
[2025-10-26T07:58:44.790Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T07:58:44.791Z] [LOG]       Weekday: 136.00h × Rs.235.29 = Rs.31999.44
[2025-10-26T07:58:44.791Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-26T07:58:44.791Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:58:44.791Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:58:44.792Z] [LOG]       Total Expected Earned: Rs.39999.36
[2025-10-26T07:58:44.792Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T07:58:44.793Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-26T07:58:44.793Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-26T07:58:44.793Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:58:44.793Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:58:44.794Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-26T07:58:44.795Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T07:58:44.795Z] [LOG]       Calculated At: Oct 26, 2025, 13:28:44
[2025-10-26T07:58:44.795Z] [LOG]       Expected Earned (until NOW): Rs.39999.36
[2025-10-26T07:58:44.796Z] [LOG]       Actual Earned (until NOW): Rs.11999.80
[2025-10-26T07:58:44.796Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:58:44.796Z] [LOG]       Attendance Deduction: Rs.27999.56
[2025-10-26T07:58:44.796Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T07:58:44.797Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T07:58:44.797Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T07:58:44.797Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T07:58:44.797Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T07:58:44.797Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T07:58:44.797Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T07:58:44.797Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-26T07:58:44.798Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T07:58:44.798Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T07:58:44.798Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:44.798Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T07:58:44.798Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:44.799Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T07:58:44.799Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:44.800Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T07:58:44.800Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:44.800Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T07:58:44.800Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:44.800Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T07:58:44.801Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:44.801Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T07:58:44.801Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:44.801Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T07:58:44.801Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:44.801Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T07:58:44.801Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:44.801Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T07:58:44.801Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:44.801Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T07:58:44.801Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-26T07:58:44.802Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T07:58:44.802Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T07:58:44.802Z] [LOG] 💰 GROSS CALCULATION for Chamodi null:
[2025-10-26T07:58:44.802Z] [LOG]    Base Salary: 50000
[2025-10-26T07:58:44.802Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T07:58:44.802Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T07:58:44.802Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:44.802Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T07:58:44.803Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:44.803Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T07:58:44.803Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:45.344Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T07:58:45.344Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:58:45.344Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T07:58:45.345Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T07:58:45.345Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T07:58:45.346Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T07:58:45.346Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T07:58:45.346Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-26T07:58:45.347Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T07:58:45.347Z] [LOG]    Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T07:58:45.347Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T07:58:45.348Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T07:58:45.348Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T07:58:45.348Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T07:58:45.348Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-26T07:58:45.349Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T07:58:45.349Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-26T07:58:45.349Z] [LOG] 
💾 Database Update:
[2025-10-26T07:58:45.350Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T07:58:45.350Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T07:58:45.544Z] [LOG] 
📝 Components to save:
[2025-10-26T07:58:45.545Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T07:58:45.545Z] [LOG]    Deduction components: 1
[2025-10-26T07:58:45.545Z] [LOG] Creating components for record 1607bc19-67d4-4223-bfac-5ddc55a6bac3: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T07:58:45.546Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-26T07:58:45.796Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T07:58:46.035Z] [LOG] Created payroll_record_component: 25c6bb70-c08e-493d-bca5-5ef199a3b97a for Base Salary
[2025-10-26T07:58:46.036Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 27999.555
}
[2025-10-26T07:58:46.274Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T07:58:46.515Z] [LOG] Created payroll_record_component: cf7f4c63-be01-4174-8d09-112b462c1c51 for Attendance Shortfall (Info)
[2025-10-26T07:58:46.941Z] [LOG] ✅ Financial balances updated successfully for employee 0143f302-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:46.942Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T07:58:46.942Z] [LOG] 
======================================================================
[2025-10-26T07:58:46.942Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chamodi null
[2025-10-26T07:58:46.943Z] [LOG] ======================================================================
[2025-10-26T07:58:46.943Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T07:58:46.944Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-26T07:58:46.944Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T07:58:46.944Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:58:46.945Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:58:46.945Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T07:58:46.945Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:58:46.945Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-26T07:58:46.946Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:58:46.946Z] [LOG]    Deductions Breakdown:
[2025-10-26T07:58:46.947Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T07:58:46.947Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T07:58:46.947Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T07:58:46.947Z] [LOG]       - Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T07:58:46.948Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T07:58:46.948Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:58:46.948Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-26T07:58:46.949Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T07:58:46.949Z] [LOG] ======================================================================

[2025-10-26T07:58:46.949Z] [LOG] ✅ Chamodi null: Calculation completed successfully
[2025-10-26T07:58:46.949Z] [LOG] 📊 Progress: 3/34 (8.8%)
[2025-10-26T07:58:46.950Z] [LOG] 
🧮 Processing: Uthpala null (EMP000006)
[2025-10-26T07:58:46.950Z] [LOG] 📋 Record ID: 1a6d6755-8376-4694-a667-166ba4cddbb4
[2025-10-26T07:58:46.950Z] [LOG] 
======================================================================
[2025-10-26T07:58:46.950Z] [LOG] 🧮 CALCULATING PAYROLL: Uthpala null (EMP000006)
[2025-10-26T07:58:46.951Z] [LOG] ======================================================================
[2025-10-26T07:58:47.923Z] [LOG] 🔍 Component filtering for employee 0143a539-7105-11f0-a50f-98e743540430:
[2025-10-26T07:58:47.924Z] [LOG]    Total components: 13
[2025-10-26T07:58:47.924Z] [LOG]    Applicable components: 13
[2025-10-26T07:58:47.924Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-26T07:58:50.407Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T07:58:50.407Z] [LOG] 🔄 Processing financial records for employee 0143a539-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T07:58:50.609Z] [LOG] 📊 Found 0 active loans for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:50.843Z] [LOG] 📊 Found 0 active advances for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:51.047Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:51.048Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T07:58:51.048Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T07:58:51.257Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T07:58:51.257Z] [LOG]    Employee ID: 0143a539-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:51.257Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T07:58:51.257Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T07:58:51.257Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-26T07:58:51.445Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T07:58:51.446Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-26T07:58:51.446Z] [LOG]       Weekday Hourly Rate: Rs.500.00
[2025-10-26T07:58:51.446Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-26T07:58:51.446Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T07:58:51.447Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T07:58:51.447Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T07:58:52.027Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T07:58:52.027Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T07:58:52.284Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T07:58:52.284Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T07:58:52.285Z] [LOG]       Total completed sessions found: 6
[2025-10-26T07:58:52.285Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T07:58:52.285Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T07:58:52.286Z] [LOG]          2. 2025-10-15 (Weekday): 7.50h
[2025-10-26T07:58:52.286Z] [LOG]          3. 2025-10-16 (Weekday): 7.50h
[2025-10-26T07:58:52.286Z] [LOG]          4. 2025-10-22 (Weekday): 7.50h
[2025-10-26T07:58:52.287Z] [LOG]          5. 2025-10-23 (Weekday): 7.50h
[2025-10-26T07:58:52.287Z] [LOG]          6. 2025-10-24 (Weekday): 0.00h
[2025-10-26T07:58:52.515Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T07:58:52.515Z] [LOG]          Weekday: 30.00h
[2025-10-26T07:58:52.516Z] [LOG]          Saturday: 4.50h
[2025-10-26T07:58:52.516Z] [LOG]          Sunday: 0.00h
[2025-10-26T07:58:52.755Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T07:58:52.755Z] [LOG]       Weekday: 128.00h
[2025-10-26T07:58:52.756Z] [LOG]       Saturday: 18.00h
[2025-10-26T07:58:52.756Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:58:52.756Z] [LOG]       Total Expected: 146.00h
[2025-10-26T07:58:52.757Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T07:58:52.757Z] [LOG]       Weekday: 30.00h
[2025-10-26T07:58:52.757Z] [LOG]       Saturday: 4.50h
[2025-10-26T07:58:52.758Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:58:52.758Z] [LOG]       Total Actual: 34.50h
[2025-10-26T07:58:52.758Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T07:58:52.759Z] [LOG]       Weekday: 128.00h × Rs.500.00 = Rs.64000.00
[2025-10-26T07:58:52.759Z] [LOG]       Saturday: 18.00h × Rs.888.89 = Rs.16000.02
[2025-10-26T07:58:52.759Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:58:52.760Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:58:52.760Z] [LOG]       Total Expected Earned: Rs.80000.02
[2025-10-26T07:58:52.760Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T07:58:52.761Z] [LOG]       Weekday: 30.00h × Rs.500.00 = Rs.15000.00
[2025-10-26T07:58:52.761Z] [LOG]       Saturday: 4.50h × Rs.888.89 = Rs.4000.01
[2025-10-26T07:58:52.761Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:58:52.762Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:58:52.762Z] [LOG]       Total Actual Earned: Rs.19000.01
[2025-10-26T07:58:52.763Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T07:58:52.763Z] [LOG]       Calculated At: Oct 26, 2025, 13:28:52
[2025-10-26T07:58:52.763Z] [LOG]       Expected Earned (until NOW): Rs.80000.02
[2025-10-26T07:58:52.764Z] [LOG]       Actual Earned (until NOW): Rs.19000.01
[2025-10-26T07:58:52.764Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:58:52.765Z] [LOG]       Attendance Deduction: Rs.61000.01
[2025-10-26T07:58:52.765Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T07:58:52.765Z] [LOG]       📉 Shortfall: 111.50 hours (76.25% of expected)
[2025-10-26T07:58:52.766Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-26T07:58:52.766Z] [LOG]    Actual Earned Base: Rs.19000.01
[2025-10-26T07:58:52.766Z] [LOG]    Attendance Shortfall: Rs.61000.01
[2025-10-26T07:58:52.767Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T07:58:52.767Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T07:58:52.768Z] [LOG]    Gross Salary: 19000.005
[2025-10-26T07:58:52.768Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T07:58:52.768Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T07:58:52.768Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:52.769Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T07:58:52.769Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:52.769Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T07:58:52.770Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:52.770Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T07:58:52.770Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:52.770Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T07:58:52.771Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:52.771Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T07:58:52.771Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:52.771Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T07:58:52.771Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:52.771Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T07:58:52.771Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:52.771Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T07:58:52.771Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:52.772Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T07:58:52.772Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:52.772Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T07:58:52.772Z] [LOG]    EPF/ETF calculated on: Rs.19000.01
[2025-10-26T07:58:52.772Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T07:58:52.772Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T07:58:52.772Z] [LOG] 💰 GROSS CALCULATION for Uthpala null:
[2025-10-26T07:58:52.772Z] [LOG]    Base Salary: 100000
[2025-10-26T07:58:52.772Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T07:58:52.772Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T07:58:52.772Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:52.773Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T07:58:52.773Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:52.773Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T07:58:52.773Z] [LOG]    Fixed amount: 0
[2025-10-26T07:58:52.968Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T07:58:52.968Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:58:52.969Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T07:58:52.969Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T07:58:52.969Z] [LOG]    Actual Earned Base: Rs.19000.01
[2025-10-26T07:58:52.970Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T07:58:52.970Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T07:58:52.970Z] [LOG]    = Gross Salary: Rs.19000.01
[2025-10-26T07:58:52.971Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T07:58:52.971Z] [LOG]    Attendance Shortfall (Info): Rs.61000.01
[2025-10-26T07:58:52.971Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T07:58:52.972Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T07:58:52.972Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T07:58:52.972Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T07:58:52.973Z] [LOG]    Gross Salary: Rs.19000.01
[2025-10-26T07:58:52.973Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T07:58:52.974Z] [LOG]    = NET SALARY: Rs.19000.01
[2025-10-26T07:58:52.974Z] [LOG] 
💾 Database Update:
[2025-10-26T07:58:52.974Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T07:58:52.975Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T07:58:53.171Z] [LOG] 
📝 Components to save:
[2025-10-26T07:58:53.171Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T07:58:53.172Z] [LOG]    Deduction components: 1
[2025-10-26T07:58:53.172Z] [LOG] Creating components for record 1a6d6755-8376-4694-a667-166ba4cddbb4: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T07:58:53.173Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 19000.005
}
[2025-10-26T07:58:53.395Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T07:58:53.634Z] [LOG] Created payroll_record_component: 3e9f092d-55b0-4715-89f2-44e1feb0cf98 for Base Salary
[2025-10-26T07:58:53.635Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 61000.015
}
[2025-10-26T07:58:53.915Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T07:58:54.270Z] [LOG] Created payroll_record_component: f3a393ac-4bc2-4e5a-a821-82cb2fdf0285 for Attendance Shortfall (Info)
[2025-10-26T07:58:54.665Z] [LOG] ✅ Financial balances updated successfully for employee 0143a539-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:54.666Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T07:58:54.666Z] [LOG] 
======================================================================
[2025-10-26T07:58:54.667Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Uthpala null
[2025-10-26T07:58:54.667Z] [LOG] ======================================================================
[2025-10-26T07:58:54.667Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-26T07:58:54.668Z] [LOG]    Actual Earned Base (Attendance-based): Rs.19000.01
[2025-10-26T07:58:54.668Z] [LOG]    Attendance Shortfall: Rs.61000.01
[2025-10-26T07:58:54.668Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:58:54.669Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:58:54.669Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T07:58:54.669Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:58:54.670Z] [LOG]    GROSS SALARY: Rs.19000.01
[2025-10-26T07:58:54.670Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:58:54.670Z] [LOG]    Deductions Breakdown:
[2025-10-26T07:58:54.671Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T07:58:54.671Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T07:58:54.671Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T07:58:54.672Z] [LOG]       - Attendance Shortfall (Info): Rs.61000.01
[2025-10-26T07:58:54.672Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T07:58:54.672Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:58:54.673Z] [LOG]    NET SALARY: Rs.19000.01
[2025-10-26T07:58:54.673Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T07:58:54.673Z] [LOG] ======================================================================

[2025-10-26T07:58:54.674Z] [LOG] ✅ Uthpala null: Calculation completed successfully
[2025-10-26T07:58:54.674Z] [LOG] 📊 Progress: 4/34 (11.8%)
[2025-10-26T07:58:54.674Z] [LOG] 
🧮 Processing: P.D.P Dilini Madushani null (EMP000043)
[2025-10-26T07:58:54.674Z] [LOG] 📋 Record ID: 1c999c14-312c-44dd-bd7e-ce996f010413
[2025-10-26T07:58:54.675Z] [LOG] 
======================================================================
[2025-10-26T07:58:54.675Z] [LOG] 🧮 CALCULATING PAYROLL: P.D.P Dilini Madushani null (EMP000043)
[2025-10-26T07:58:54.675Z] [LOG] ======================================================================
[2025-10-26T07:58:55.635Z] [LOG] 🔍 Component filtering for employee 014435dc-7105-11f0-a50f-98e743540430:
[2025-10-26T07:58:55.636Z] [LOG]    Total components: 13
[2025-10-26T07:58:55.636Z] [LOG]    Applicable components: 13
[2025-10-26T07:58:55.636Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-26T07:58:57.165Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T07:58:57.165Z] [LOG] 🔄 Processing financial records for employee 014435dc-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T07:58:57.407Z] [LOG] 📊 Found 0 active loans for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:57.635Z] [LOG] 📊 Found 0 active advances for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:57.876Z] [LOG] 📊 Found 0 approved bonuses for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:57.876Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T07:58:57.877Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T07:58:58.115Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T07:58:58.115Z] [LOG]    Employee ID: 014435dc-7105-11f0-a50f-98e743540430
[2025-10-26T07:58:58.116Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T07:58:58.116Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T07:58:58.116Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-26T07:58:58.355Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T07:58:58.355Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-26T07:58:58.355Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-26T07:58:58.356Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-26T07:58:58.356Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T07:58:58.356Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T07:58:58.357Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T07:58:59.404Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T07:58:59.404Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T07:58:59.630Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T07:58:59.630Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T07:58:59.631Z] [LOG]       Total completed sessions found: 6
[2025-10-26T07:58:59.631Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T07:58:59.631Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T07:58:59.632Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T07:58:59.632Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T07:58:59.632Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T07:58:59.633Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T07:58:59.633Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T07:58:59.883Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T07:58:59.883Z] [LOG]          Weekday: 42.50h
[2025-10-26T07:58:59.883Z] [LOG]          Saturday: 4.50h
[2025-10-26T07:58:59.884Z] [LOG]          Sunday: 0.00h
[2025-10-26T07:59:00.115Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T07:59:00.115Z] [LOG]       Weekday: 136.00h
[2025-10-26T07:59:00.115Z] [LOG]       Saturday: 18.00h
[2025-10-26T07:59:00.116Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:00.116Z] [LOG]       Total Expected: 154.00h
[2025-10-26T07:59:00.116Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T07:59:00.117Z] [LOG]       Weekday: 42.50h
[2025-10-26T07:59:00.117Z] [LOG]       Saturday: 4.50h
[2025-10-26T07:59:00.117Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:00.118Z] [LOG]       Total Actual: 47.00h
[2025-10-26T07:59:00.118Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T07:59:00.118Z] [LOG]       Weekday: 136.00h × Rs.235.29 = Rs.31999.44
[2025-10-26T07:59:00.119Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-26T07:59:00.119Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:00.119Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:00.120Z] [LOG]       Total Expected Earned: Rs.39999.36
[2025-10-26T07:59:00.120Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T07:59:00.120Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-26T07:59:00.121Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-26T07:59:00.121Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:00.121Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:00.121Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-26T07:59:00.122Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T07:59:00.122Z] [LOG]       Calculated At: Oct 26, 2025, 13:29:00
[2025-10-26T07:59:00.123Z] [LOG]       Expected Earned (until NOW): Rs.39999.36
[2025-10-26T07:59:00.123Z] [LOG]       Actual Earned (until NOW): Rs.11999.80
[2025-10-26T07:59:00.123Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:00.123Z] [LOG]       Attendance Deduction: Rs.27999.56
[2025-10-26T07:59:00.123Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T07:59:00.124Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T07:59:00.124Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T07:59:00.124Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T07:59:00.124Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T07:59:00.124Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T07:59:00.124Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T07:59:00.124Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-26T07:59:00.124Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T07:59:00.125Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T07:59:00.125Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:00.125Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T07:59:00.125Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:00.125Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T07:59:00.125Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:00.125Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T07:59:00.125Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:00.126Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T07:59:00.126Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:00.126Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T07:59:00.126Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:00.126Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T07:59:00.127Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:00.127Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T07:59:00.127Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:00.127Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T07:59:00.127Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:00.127Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T07:59:00.127Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:00.127Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T07:59:00.127Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-26T07:59:00.127Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T07:59:00.127Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T07:59:00.127Z] [LOG] 💰 GROSS CALCULATION for P.D.P Dilini Madushani null:
[2025-10-26T07:59:00.128Z] [LOG]    Base Salary: 50000
[2025-10-26T07:59:00.128Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T07:59:00.128Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T07:59:00.128Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:00.128Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T07:59:00.128Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:00.128Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T07:59:00.128Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:00.355Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T07:59:00.356Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:00.356Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T07:59:00.357Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T07:59:00.357Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T07:59:00.357Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T07:59:00.358Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T07:59:00.358Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-26T07:59:00.358Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T07:59:00.359Z] [LOG]    Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T07:59:00.359Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T07:59:00.359Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:00.360Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T07:59:00.360Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T07:59:00.360Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-26T07:59:00.361Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T07:59:00.361Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-26T07:59:00.362Z] [LOG] 
💾 Database Update:
[2025-10-26T07:59:00.362Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T07:59:00.362Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T07:59:00.571Z] [LOG] 
📝 Components to save:
[2025-10-26T07:59:00.571Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T07:59:00.572Z] [LOG]    Deduction components: 1
[2025-10-26T07:59:00.572Z] [LOG] Creating components for record 1c999c14-312c-44dd-bd7e-ce996f010413: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T07:59:00.572Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-26T07:59:01.006Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T07:59:01.198Z] [LOG] Created payroll_record_component: b7e32d01-9b06-445f-929d-33c3042355a5 for Base Salary
[2025-10-26T07:59:01.198Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 27999.555
}
[2025-10-26T07:59:01.404Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T07:59:01.639Z] [LOG] Created payroll_record_component: bd1b13e6-bc50-4005-aece-38b7c6c71370 for Attendance Shortfall (Info)
[2025-10-26T07:59:02.207Z] [LOG] ✅ Financial balances updated successfully for employee 014435dc-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:02.208Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T07:59:02.208Z] [LOG] 
======================================================================
[2025-10-26T07:59:02.208Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: P.D.P Dilini Madushani null
[2025-10-26T07:59:02.208Z] [LOG] ======================================================================
[2025-10-26T07:59:02.209Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T07:59:02.209Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-26T07:59:02.209Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T07:59:02.209Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:02.210Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:02.210Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T07:59:02.210Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:02.210Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-26T07:59:02.211Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:02.211Z] [LOG]    Deductions Breakdown:
[2025-10-26T07:59:02.211Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T07:59:02.211Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T07:59:02.211Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T07:59:02.211Z] [LOG]       - Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T07:59:02.212Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:02.212Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:02.212Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-26T07:59:02.212Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T07:59:02.212Z] [LOG] ======================================================================

[2025-10-26T07:59:02.213Z] [LOG] ✅ P.D.P Dilini Madushani null: Calculation completed successfully
[2025-10-26T07:59:02.213Z] [LOG] 📊 Progress: 5/34 (14.7%)
[2025-10-26T07:59:02.213Z] [LOG] 
🧮 Processing: Hari null (EMP000017)
[2025-10-26T07:59:02.213Z] [LOG] 📋 Record ID: 1cc64639-c78f-4e1a-b0e4-2522346b063a
[2025-10-26T07:59:02.214Z] [LOG] 
======================================================================
[2025-10-26T07:59:02.214Z] [LOG] 🧮 CALCULATING PAYROLL: Hari null (EMP000017)
[2025-10-26T07:59:02.214Z] [LOG] ======================================================================
[2025-10-26T07:59:03.155Z] [LOG] 🔍 Component filtering for employee 0143bc58-7105-11f0-a50f-98e743540430:
[2025-10-26T07:59:03.155Z] [LOG]    Total components: 13
[2025-10-26T07:59:03.155Z] [LOG]    Applicable components: 13
[2025-10-26T07:59:03.155Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-26T07:59:04.548Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T07:59:04.548Z] [LOG] 🔄 Processing financial records for employee 0143bc58-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T07:59:04.757Z] [LOG] 📊 Found 0 active loans for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:05.003Z] [LOG] 📊 Found 0 active advances for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:05.236Z] [LOG] 📊 Found 0 approved bonuses for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:05.236Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T07:59:05.237Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T07:59:05.475Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T07:59:05.475Z] [LOG]    Employee ID: 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:05.475Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T07:59:05.476Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T07:59:05.476Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-26T07:59:05.723Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T07:59:05.723Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-26T07:59:05.724Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-26T07:59:05.724Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-26T07:59:05.724Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T07:59:05.725Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T07:59:05.725Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T07:59:06.355Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T07:59:06.355Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T07:59:06.547Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T07:59:06.548Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T07:59:06.548Z] [LOG]       Total completed sessions found: 6
[2025-10-26T07:59:06.548Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T07:59:06.549Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T07:59:06.549Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T07:59:06.549Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T07:59:06.550Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T07:59:06.550Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T07:59:06.550Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T07:59:06.738Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T07:59:06.738Z] [LOG]          Weekday: 42.50h
[2025-10-26T07:59:06.739Z] [LOG]          Saturday: 4.50h
[2025-10-26T07:59:06.739Z] [LOG]          Sunday: 0.00h
[2025-10-26T07:59:07.075Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T07:59:07.075Z] [LOG]       Weekday: 136.00h
[2025-10-26T07:59:07.076Z] [LOG]       Saturday: 18.00h
[2025-10-26T07:59:07.076Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:07.076Z] [LOG]       Total Expected: 154.00h
[2025-10-26T07:59:07.077Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T07:59:07.077Z] [LOG]       Weekday: 42.50h
[2025-10-26T07:59:07.077Z] [LOG]       Saturday: 4.50h
[2025-10-26T07:59:07.078Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:07.078Z] [LOG]       Total Actual: 47.00h
[2025-10-26T07:59:07.078Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T07:59:07.079Z] [LOG]       Weekday: 136.00h × Rs.235.29 = Rs.31999.44
[2025-10-26T07:59:07.079Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-26T07:59:07.079Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:07.080Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:07.080Z] [LOG]       Total Expected Earned: Rs.39999.36
[2025-10-26T07:59:07.080Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T07:59:07.081Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-26T07:59:07.081Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-26T07:59:07.081Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:07.082Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:07.082Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-26T07:59:07.083Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T07:59:07.083Z] [LOG]       Calculated At: Oct 26, 2025, 13:29:07
[2025-10-26T07:59:07.083Z] [LOG]       Expected Earned (until NOW): Rs.39999.36
[2025-10-26T07:59:07.083Z] [LOG]       Actual Earned (until NOW): Rs.11999.80
[2025-10-26T07:59:07.084Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:07.084Z] [LOG]       Attendance Deduction: Rs.27999.56
[2025-10-26T07:59:07.084Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T07:59:07.084Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T07:59:07.085Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T07:59:07.085Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T07:59:07.085Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T07:59:07.085Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T07:59:07.085Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T07:59:07.085Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-26T07:59:07.086Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T07:59:07.086Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T07:59:07.087Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:07.087Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T07:59:07.088Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:07.088Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T07:59:07.088Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:07.088Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T07:59:07.089Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:07.089Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T07:59:07.089Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:07.089Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T07:59:07.089Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:07.089Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T07:59:07.089Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:07.089Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T07:59:07.089Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:07.090Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T07:59:07.090Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:07.090Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T07:59:07.090Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:07.090Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T07:59:07.090Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-26T07:59:07.090Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T07:59:07.090Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T07:59:07.090Z] [LOG] 💰 GROSS CALCULATION for Hari null:
[2025-10-26T07:59:07.090Z] [LOG]    Base Salary: 50000
[2025-10-26T07:59:07.090Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T07:59:07.090Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T07:59:07.090Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:07.090Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T07:59:07.091Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:07.091Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T07:59:07.091Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:07.315Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T07:59:07.316Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:07.316Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T07:59:07.316Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T07:59:07.317Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T07:59:07.317Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T07:59:07.317Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T07:59:07.318Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-26T07:59:07.318Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T07:59:07.318Z] [LOG]    Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T07:59:07.319Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T07:59:07.319Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:07.319Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T07:59:07.320Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T07:59:07.320Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-26T07:59:07.320Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T07:59:07.321Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-26T07:59:07.321Z] [LOG] 
💾 Database Update:
[2025-10-26T07:59:07.321Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T07:59:07.322Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T07:59:07.571Z] [LOG] 
📝 Components to save:
[2025-10-26T07:59:07.572Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T07:59:07.572Z] [LOG]    Deduction components: 1
[2025-10-26T07:59:07.573Z] [LOG] Creating components for record 1cc64639-c78f-4e1a-b0e4-2522346b063a: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T07:59:07.573Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-26T07:59:07.795Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T07:59:08.035Z] [LOG] Created payroll_record_component: ceb63f9c-577b-49de-a5cf-ee85e4d231b1 for Base Salary
[2025-10-26T07:59:08.035Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 27999.555
}
[2025-10-26T07:59:08.275Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T07:59:08.515Z] [LOG] Created payroll_record_component: cfc34e9e-621c-4fb5-8671-b7b1cdd4db35 for Attendance Shortfall (Info)
[2025-10-26T07:59:08.995Z] [LOG] ✅ Financial balances updated successfully for employee 0143bc58-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:08.995Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T07:59:08.996Z] [LOG] 
======================================================================
[2025-10-26T07:59:08.996Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Hari null
[2025-10-26T07:59:08.996Z] [LOG] ======================================================================
[2025-10-26T07:59:08.997Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T07:59:08.997Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-26T07:59:08.997Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T07:59:08.998Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:08.998Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:08.998Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T07:59:08.999Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:08.999Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-26T07:59:08.999Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:09.000Z] [LOG]    Deductions Breakdown:
[2025-10-26T07:59:09.000Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T07:59:09.000Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T07:59:09.001Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T07:59:09.001Z] [LOG]       - Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T07:59:09.001Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:09.002Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:09.002Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-26T07:59:09.002Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T07:59:09.003Z] [LOG] ======================================================================

[2025-10-26T07:59:09.003Z] [LOG] ✅ Hari null: Calculation completed successfully
[2025-10-26T07:59:09.003Z] [LOG] 📊 Progress: 6/34 (17.6%)
[2025-10-26T07:59:09.004Z] [LOG] 
🧮 Processing: Rasanga null (EMP000028)
[2025-10-26T07:59:09.004Z] [LOG] 📋 Record ID: 271ddd59-6bc4-458d-bc5a-56f3d0871d77
[2025-10-26T07:59:09.004Z] [LOG] 
======================================================================
[2025-10-26T07:59:09.005Z] [LOG] 🧮 CALCULATING PAYROLL: Rasanga null (EMP000028)
[2025-10-26T07:59:09.005Z] [LOG] ======================================================================
[2025-10-26T07:59:09.962Z] [LOG] 🔍 Component filtering for employee 0143eaec-7105-11f0-a50f-98e743540430:
[2025-10-26T07:59:09.963Z] [LOG]    Total components: 13
[2025-10-26T07:59:09.963Z] [LOG]    Applicable components: 13
[2025-10-26T07:59:09.963Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-26T07:59:11.899Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T07:59:11.900Z] [LOG] 🔄 Processing financial records for employee 0143eaec-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T07:59:12.115Z] [LOG] 📊 Found 0 active loans for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:12.356Z] [LOG] 📊 Found 0 active advances for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:12.612Z] [LOG] 📊 Found 0 approved bonuses for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:12.612Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T07:59:12.613Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T07:59:12.836Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T07:59:12.836Z] [LOG]    Employee ID: 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:12.837Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T07:59:12.837Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T07:59:12.837Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-26T07:59:13.076Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T07:59:13.076Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-26T07:59:13.076Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-26T07:59:13.077Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-26T07:59:13.077Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T07:59:13.077Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T07:59:13.078Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T07:59:13.795Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T07:59:13.796Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T07:59:14.044Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T07:59:14.045Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T07:59:14.045Z] [LOG]       Total completed sessions found: 6
[2025-10-26T07:59:14.045Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T07:59:14.046Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T07:59:14.046Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T07:59:14.046Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T07:59:14.047Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T07:59:14.047Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T07:59:14.047Z] [LOG]          6. 2025-10-24 (Weekday): 7.50h
[2025-10-26T07:59:14.284Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T07:59:14.284Z] [LOG]          Weekday: 41.50h
[2025-10-26T07:59:14.285Z] [LOG]          Saturday: 4.50h
[2025-10-26T07:59:14.285Z] [LOG]          Sunday: 0.00h
[2025-10-26T07:59:14.515Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T07:59:14.515Z] [LOG]       Weekday: 136.00h
[2025-10-26T07:59:14.515Z] [LOG]       Saturday: 18.00h
[2025-10-26T07:59:14.516Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:14.516Z] [LOG]       Total Expected: 154.00h
[2025-10-26T07:59:14.516Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T07:59:14.517Z] [LOG]       Weekday: 41.50h
[2025-10-26T07:59:14.517Z] [LOG]       Saturday: 4.50h
[2025-10-26T07:59:14.517Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:14.517Z] [LOG]       Total Actual: 46.00h
[2025-10-26T07:59:14.518Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T07:59:14.518Z] [LOG]       Weekday: 136.00h × Rs.235.29 = Rs.31999.44
[2025-10-26T07:59:14.518Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-26T07:59:14.518Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:14.519Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:14.519Z] [LOG]       Total Expected Earned: Rs.39999.36
[2025-10-26T07:59:14.519Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T07:59:14.519Z] [LOG]       Weekday: 41.50h × Rs.235.29 = Rs.9764.53
[2025-10-26T07:59:14.520Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-26T07:59:14.520Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:14.520Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:14.521Z] [LOG]       Total Actual Earned: Rs.11764.51
[2025-10-26T07:59:14.521Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T07:59:14.522Z] [LOG]       Calculated At: Oct 26, 2025, 13:29:14
[2025-10-26T07:59:14.522Z] [LOG]       Expected Earned (until NOW): Rs.39999.36
[2025-10-26T07:59:14.522Z] [LOG]       Actual Earned (until NOW): Rs.11764.51
[2025-10-26T07:59:14.522Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:14.523Z] [LOG]       Attendance Deduction: Rs.28234.85
[2025-10-26T07:59:14.523Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T07:59:14.523Z] [LOG]       📉 Shortfall: 108.00 hours (70.59% of expected)
[2025-10-26T07:59:14.524Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T07:59:14.525Z] [LOG]    Actual Earned Base: Rs.11764.51
[2025-10-26T07:59:14.526Z] [LOG]    Attendance Shortfall: Rs.28234.85
[2025-10-26T07:59:14.526Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T07:59:14.526Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T07:59:14.526Z] [LOG]    Gross Salary: 11764.515
[2025-10-26T07:59:14.526Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T07:59:14.526Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T07:59:14.526Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:14.526Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T07:59:14.527Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:14.527Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T07:59:14.527Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:14.527Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T07:59:14.528Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:14.528Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T07:59:14.528Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:14.528Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T07:59:14.528Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:14.529Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T07:59:14.529Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:14.529Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T07:59:14.529Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:14.529Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T07:59:14.529Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:14.530Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T07:59:14.530Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:14.530Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T07:59:14.530Z] [LOG]    EPF/ETF calculated on: Rs.11764.51
[2025-10-26T07:59:14.530Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T07:59:14.530Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T07:59:14.530Z] [LOG] 💰 GROSS CALCULATION for Rasanga null:
[2025-10-26T07:59:14.530Z] [LOG]    Base Salary: 50000
[2025-10-26T07:59:14.530Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T07:59:14.530Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T07:59:14.530Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:14.531Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T07:59:14.531Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:14.531Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T07:59:14.531Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:14.764Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T07:59:14.764Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:14.765Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T07:59:14.765Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T07:59:14.765Z] [LOG]    Actual Earned Base: Rs.11764.51
[2025-10-26T07:59:14.766Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T07:59:14.766Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T07:59:14.766Z] [LOG]    = Gross Salary: Rs.11764.51
[2025-10-26T07:59:14.767Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T07:59:14.767Z] [LOG]    Attendance Shortfall (Info): Rs.28234.85
[2025-10-26T07:59:14.767Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T07:59:14.768Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:14.768Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T07:59:14.769Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T07:59:14.769Z] [LOG]    Gross Salary: Rs.11764.51
[2025-10-26T07:59:14.769Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T07:59:14.770Z] [LOG]    = NET SALARY: Rs.11764.51
[2025-10-26T07:59:14.770Z] [LOG] 
💾 Database Update:
[2025-10-26T07:59:14.770Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T07:59:14.771Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T07:59:15.000Z] [LOG] 
📝 Components to save:
[2025-10-26T07:59:15.001Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T07:59:15.001Z] [LOG]    Deduction components: 1
[2025-10-26T07:59:15.001Z] [LOG] Creating components for record 271ddd59-6bc4-458d-bc5a-56f3d0871d77: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T07:59:15.002Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11764.515
}
[2025-10-26T07:59:15.259Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T07:59:15.483Z] [LOG] Created payroll_record_component: 0f81d859-2653-4798-8014-e4e7cad78b51 for Base Salary
[2025-10-26T07:59:15.483Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 28234.845
}
[2025-10-26T07:59:15.715Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T07:59:15.901Z] [LOG] Created payroll_record_component: ff4efbde-ee87-41bb-98af-15d18f431e46 for Attendance Shortfall (Info)
[2025-10-26T07:59:16.308Z] [LOG] ✅ Financial balances updated successfully for employee 0143eaec-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:16.309Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T07:59:16.309Z] [LOG] 
======================================================================
[2025-10-26T07:59:16.309Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Rasanga null
[2025-10-26T07:59:16.310Z] [LOG] ======================================================================
[2025-10-26T07:59:16.310Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T07:59:16.311Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11764.51
[2025-10-26T07:59:16.311Z] [LOG]    Attendance Shortfall: Rs.28234.85
[2025-10-26T07:59:16.311Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:16.312Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:16.312Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T07:59:16.312Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:16.313Z] [LOG]    GROSS SALARY: Rs.11764.51
[2025-10-26T07:59:16.313Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:16.313Z] [LOG]    Deductions Breakdown:
[2025-10-26T07:59:16.314Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T07:59:16.314Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T07:59:16.314Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T07:59:16.315Z] [LOG]       - Attendance Shortfall (Info): Rs.28234.85
[2025-10-26T07:59:16.315Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:16.315Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:16.316Z] [LOG]    NET SALARY: Rs.11764.51
[2025-10-26T07:59:16.316Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T07:59:16.316Z] [LOG] ======================================================================

[2025-10-26T07:59:16.316Z] [LOG] ✅ Rasanga null: Calculation completed successfully
[2025-10-26T07:59:16.317Z] [LOG] 📊 Progress: 7/34 (20.6%)
[2025-10-26T07:59:16.317Z] [LOG] 
🧮 Processing: Jessie null (EMP000013)
[2025-10-26T07:59:16.317Z] [LOG] 📋 Record ID: 3040f4b5-fdf1-42ea-9bbf-379dcd5a8e48
[2025-10-26T07:59:16.318Z] [LOG] 
======================================================================
[2025-10-26T07:59:16.318Z] [LOG] 🧮 CALCULATING PAYROLL: Jessie null (EMP000013)
[2025-10-26T07:59:16.318Z] [LOG] ======================================================================
[2025-10-26T07:59:17.207Z] [LOG] 🔍 Component filtering for employee 0143ae6e-7105-11f0-a50f-98e743540430:
[2025-10-26T07:59:17.208Z] [LOG]    Total components: 13
[2025-10-26T07:59:17.208Z] [LOG]    Applicable components: 13
[2025-10-26T07:59:17.209Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-26T07:59:18.515Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T07:59:18.516Z] [LOG] 🔄 Processing financial records for employee 0143ae6e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T07:59:18.763Z] [LOG] 📊 Found 0 active loans for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:19.007Z] [LOG] 📊 Found 0 active advances for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:19.244Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:19.245Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T07:59:19.245Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T07:59:19.471Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T07:59:19.471Z] [LOG]    Employee ID: 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:19.472Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T07:59:19.472Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T07:59:19.472Z] [LOG]    Base Salary (Full Month): Rs.60000.00
[2025-10-26T07:59:19.671Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T07:59:19.671Z] [LOG]       Daily Salary: Rs.2400.00
[2025-10-26T07:59:19.672Z] [LOG]       Weekday Hourly Rate: Rs.282.35
[2025-10-26T07:59:19.672Z] [LOG]       Saturday Hourly Rate: Rs.533.33
[2025-10-26T07:59:19.673Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T07:59:19.673Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T07:59:19.673Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T07:59:20.356Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T07:59:20.357Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T07:59:20.611Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T07:59:20.611Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T07:59:20.612Z] [LOG]       Total completed sessions found: 6
[2025-10-26T07:59:20.612Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T07:59:20.612Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T07:59:20.612Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T07:59:20.612Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T07:59:20.612Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T07:59:20.612Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T07:59:20.612Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T07:59:20.843Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T07:59:20.843Z] [LOG]          Weekday: 42.50h
[2025-10-26T07:59:20.844Z] [LOG]          Saturday: 4.50h
[2025-10-26T07:59:20.844Z] [LOG]          Sunday: 0.00h
[2025-10-26T07:59:21.031Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T07:59:21.032Z] [LOG]       Weekday: 136.00h
[2025-10-26T07:59:21.032Z] [LOG]       Saturday: 18.00h
[2025-10-26T07:59:21.032Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:21.033Z] [LOG]       Total Expected: 154.00h
[2025-10-26T07:59:21.033Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T07:59:21.033Z] [LOG]       Weekday: 42.50h
[2025-10-26T07:59:21.034Z] [LOG]       Saturday: 4.50h
[2025-10-26T07:59:21.034Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:21.034Z] [LOG]       Total Actual: 47.00h
[2025-10-26T07:59:21.034Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T07:59:21.035Z] [LOG]       Weekday: 136.00h × Rs.282.35 = Rs.38399.60
[2025-10-26T07:59:21.035Z] [LOG]       Saturday: 18.00h × Rs.533.33 = Rs.9599.94
[2025-10-26T07:59:21.035Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:21.036Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:21.036Z] [LOG]       Total Expected Earned: Rs.47999.54
[2025-10-26T07:59:21.036Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T07:59:21.037Z] [LOG]       Weekday: 42.50h × Rs.282.35 = Rs.11999.88
[2025-10-26T07:59:21.037Z] [LOG]       Saturday: 4.50h × Rs.533.33 = Rs.2399.99
[2025-10-26T07:59:21.037Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:21.038Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:21.038Z] [LOG]       Total Actual Earned: Rs.14399.86
[2025-10-26T07:59:21.039Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T07:59:21.039Z] [LOG]       Calculated At: Oct 26, 2025, 13:29:21
[2025-10-26T07:59:21.039Z] [LOG]       Expected Earned (until NOW): Rs.47999.54
[2025-10-26T07:59:21.039Z] [LOG]       Actual Earned (until NOW): Rs.14399.86
[2025-10-26T07:59:21.039Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:21.039Z] [LOG]       Attendance Deduction: Rs.33599.68
[2025-10-26T07:59:21.039Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T07:59:21.040Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T07:59:21.040Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-26T07:59:21.040Z] [LOG]    Actual Earned Base: Rs.14399.86
[2025-10-26T07:59:21.040Z] [LOG]    Attendance Shortfall: Rs.33599.68
[2025-10-26T07:59:21.040Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T07:59:21.040Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T07:59:21.040Z] [LOG]    Gross Salary: 14399.860000000002
[2025-10-26T07:59:21.041Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T07:59:21.041Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T07:59:21.041Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:21.041Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T07:59:21.041Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:21.042Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T07:59:21.042Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:21.042Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T07:59:21.042Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:21.043Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T07:59:21.043Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:21.043Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T07:59:21.043Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:21.044Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T07:59:21.044Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:21.044Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T07:59:21.044Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:21.045Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T07:59:21.045Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:21.045Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T07:59:21.045Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:21.045Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T07:59:21.046Z] [LOG]    EPF/ETF calculated on: Rs.14399.86
[2025-10-26T07:59:21.046Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T07:59:21.046Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T07:59:21.046Z] [LOG] 💰 GROSS CALCULATION for Jessie null:
[2025-10-26T07:59:21.046Z] [LOG]    Base Salary: 60000
[2025-10-26T07:59:21.046Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T07:59:21.047Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T07:59:21.047Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:21.047Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T07:59:21.047Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:21.047Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T07:59:21.047Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:21.236Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T07:59:21.237Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:21.237Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T07:59:21.237Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T07:59:21.238Z] [LOG]    Actual Earned Base: Rs.14399.86
[2025-10-26T07:59:21.238Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T07:59:21.238Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T07:59:21.239Z] [LOG]    = Gross Salary: Rs.14399.86
[2025-10-26T07:59:21.239Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T07:59:21.239Z] [LOG]    Attendance Shortfall (Info): Rs.33599.68
[2025-10-26T07:59:21.240Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T07:59:21.240Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:21.240Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T07:59:21.241Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T07:59:21.241Z] [LOG]    Gross Salary: Rs.14399.86
[2025-10-26T07:59:21.241Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T07:59:21.242Z] [LOG]    = NET SALARY: Rs.14399.86
[2025-10-26T07:59:21.242Z] [LOG] 
💾 Database Update:
[2025-10-26T07:59:21.242Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T07:59:21.243Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T07:59:21.475Z] [LOG] 
📝 Components to save:
[2025-10-26T07:59:21.475Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T07:59:21.476Z] [LOG]    Deduction components: 1
[2025-10-26T07:59:21.476Z] [LOG] Creating components for record 3040f4b5-fdf1-42ea-9bbf-379dcd5a8e48: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T07:59:21.477Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 14399.860000000002
}
[2025-10-26T07:59:21.715Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T07:59:21.908Z] [LOG] Created payroll_record_component: 1528457c-0ff4-48a6-88c1-90d04fe0b521 for Base Salary
[2025-10-26T07:59:21.908Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 33599.68000000001
}
[2025-10-26T07:59:22.097Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T07:59:22.435Z] [LOG] Created payroll_record_component: 48a0af05-cc27-406e-89d5-1f1a554af784 for Attendance Shortfall (Info)
[2025-10-26T07:59:22.815Z] [LOG] ✅ Financial balances updated successfully for employee 0143ae6e-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:22.815Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T07:59:22.816Z] [LOG] 
======================================================================
[2025-10-26T07:59:22.816Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Jessie null
[2025-10-26T07:59:22.816Z] [LOG] ======================================================================
[2025-10-26T07:59:22.817Z] [LOG]    Base Salary (Full): Rs.60000.00
[2025-10-26T07:59:22.817Z] [LOG]    Actual Earned Base (Attendance-based): Rs.14399.86
[2025-10-26T07:59:22.817Z] [LOG]    Attendance Shortfall: Rs.33599.68
[2025-10-26T07:59:22.817Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:22.818Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:22.818Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T07:59:22.818Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:22.818Z] [LOG]    GROSS SALARY: Rs.14399.86
[2025-10-26T07:59:22.819Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:22.819Z] [LOG]    Deductions Breakdown:
[2025-10-26T07:59:22.819Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T07:59:22.819Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T07:59:22.820Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T07:59:22.820Z] [LOG]       - Attendance Shortfall (Info): Rs.33599.68
[2025-10-26T07:59:22.820Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:22.820Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:22.820Z] [LOG]    NET SALARY: Rs.14399.86
[2025-10-26T07:59:22.820Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T07:59:22.821Z] [LOG] ======================================================================

[2025-10-26T07:59:22.821Z] [LOG] ✅ Jessie null: Calculation completed successfully
[2025-10-26T07:59:22.821Z] [LOG] 📊 Progress: 8/34 (23.5%)
[2025-10-26T07:59:22.821Z] [LOG] 
🧮 Processing: Shandeep null (EMP000034)
[2025-10-26T07:59:22.821Z] [LOG] 📋 Record ID: 336865b3-1a7a-4024-8170-5097f3214321
[2025-10-26T07:59:22.821Z] [LOG] 
======================================================================
[2025-10-26T07:59:22.822Z] [LOG] 🧮 CALCULATING PAYROLL: Shandeep null (EMP000034)
[2025-10-26T07:59:22.822Z] [LOG] ======================================================================
[2025-10-26T07:59:23.715Z] [LOG] 🔍 Component filtering for employee 0143fc5a-7105-11f0-a50f-98e743540430:
[2025-10-26T07:59:23.716Z] [LOG]    Total components: 13
[2025-10-26T07:59:23.716Z] [LOG]    Applicable components: 13
[2025-10-26T07:59:23.717Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-26T07:59:25.075Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T07:59:25.075Z] [LOG] 🔄 Processing financial records for employee 0143fc5a-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T07:59:25.286Z] [LOG] 📊 Found 0 active loans for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:25.475Z] [LOG] 📊 Found 0 active advances for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:25.723Z] [LOG] 📊 Found 0 approved bonuses for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:25.723Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T07:59:25.723Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T07:59:25.955Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T07:59:25.956Z] [LOG]    Employee ID: 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:25.956Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T07:59:25.957Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T07:59:25.957Z] [LOG]    Base Salary (Full Month): Rs.80000.00
[2025-10-26T07:59:26.208Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T07:59:26.208Z] [LOG]       Daily Salary: Rs.3200.00
[2025-10-26T07:59:26.208Z] [LOG]       Weekday Hourly Rate: Rs.376.47
[2025-10-26T07:59:26.209Z] [LOG]       Saturday Hourly Rate: Rs.711.11
[2025-10-26T07:59:26.209Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T07:59:26.209Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T07:59:26.209Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T07:59:26.931Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T07:59:26.932Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T07:59:27.158Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T07:59:27.159Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T07:59:27.159Z] [LOG]       Total completed sessions found: 6
[2025-10-26T07:59:27.160Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T07:59:27.160Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T07:59:27.160Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T07:59:27.161Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T07:59:27.161Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T07:59:27.161Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T07:59:27.162Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T07:59:27.408Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T07:59:27.409Z] [LOG]          Weekday: 42.50h
[2025-10-26T07:59:27.409Z] [LOG]          Saturday: 4.50h
[2025-10-26T07:59:27.410Z] [LOG]          Sunday: 0.00h
[2025-10-26T07:59:27.636Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T07:59:27.636Z] [LOG]       Weekday: 136.00h
[2025-10-26T07:59:27.637Z] [LOG]       Saturday: 18.00h
[2025-10-26T07:59:27.637Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:27.637Z] [LOG]       Total Expected: 154.00h
[2025-10-26T07:59:27.638Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T07:59:27.638Z] [LOG]       Weekday: 42.50h
[2025-10-26T07:59:27.638Z] [LOG]       Saturday: 4.50h
[2025-10-26T07:59:27.639Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:27.639Z] [LOG]       Total Actual: 47.00h
[2025-10-26T07:59:27.639Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T07:59:27.640Z] [LOG]       Weekday: 136.00h × Rs.376.47 = Rs.51199.92
[2025-10-26T07:59:27.640Z] [LOG]       Saturday: 18.00h × Rs.711.11 = Rs.12799.98
[2025-10-26T07:59:27.640Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:27.641Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:27.641Z] [LOG]       Total Expected Earned: Rs.63999.90
[2025-10-26T07:59:27.641Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T07:59:27.642Z] [LOG]       Weekday: 42.50h × Rs.376.47 = Rs.15999.98
[2025-10-26T07:59:27.642Z] [LOG]       Saturday: 4.50h × Rs.711.11 = Rs.3199.99
[2025-10-26T07:59:27.642Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:27.643Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:27.643Z] [LOG]       Total Actual Earned: Rs.19199.97
[2025-10-26T07:59:27.644Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T07:59:27.644Z] [LOG]       Calculated At: Oct 26, 2025, 13:29:27
[2025-10-26T07:59:27.645Z] [LOG]       Expected Earned (until NOW): Rs.63999.90
[2025-10-26T07:59:27.645Z] [LOG]       Actual Earned (until NOW): Rs.19199.97
[2025-10-26T07:59:27.645Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:27.645Z] [LOG]       Attendance Deduction: Rs.44799.93
[2025-10-26T07:59:27.645Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T07:59:27.646Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T07:59:27.646Z] [LOG]    Base Salary (Full): Rs.80000.00
[2025-10-26T07:59:27.646Z] [LOG]    Actual Earned Base: Rs.19199.97
[2025-10-26T07:59:27.646Z] [LOG]    Attendance Shortfall: Rs.44799.93
[2025-10-26T07:59:27.647Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T07:59:27.647Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T07:59:27.647Z] [LOG]    Gross Salary: 19199.97
[2025-10-26T07:59:27.648Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T07:59:27.649Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T07:59:27.649Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:27.649Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T07:59:27.649Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:27.649Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T07:59:27.650Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:27.650Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T07:59:27.650Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:27.650Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T07:59:27.650Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:27.651Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T07:59:27.651Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:27.651Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T07:59:27.651Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:27.651Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T07:59:27.651Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:27.651Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T07:59:27.652Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:27.652Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T07:59:27.652Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:27.652Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T07:59:27.652Z] [LOG]    EPF/ETF calculated on: Rs.19199.97
[2025-10-26T07:59:27.652Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T07:59:27.652Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T07:59:27.653Z] [LOG] 💰 GROSS CALCULATION for Shandeep null:
[2025-10-26T07:59:27.653Z] [LOG]    Base Salary: 80000
[2025-10-26T07:59:27.653Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T07:59:27.653Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T07:59:27.653Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:27.654Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T07:59:27.654Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:27.654Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T07:59:27.654Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:27.875Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T07:59:27.876Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:27.876Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T07:59:27.877Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T07:59:27.877Z] [LOG]    Actual Earned Base: Rs.19199.97
[2025-10-26T07:59:27.877Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T07:59:27.878Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T07:59:27.878Z] [LOG]    = Gross Salary: Rs.19199.97
[2025-10-26T07:59:27.878Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T07:59:27.879Z] [LOG]    Attendance Shortfall (Info): Rs.44799.93
[2025-10-26T07:59:27.879Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T07:59:27.879Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:27.880Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T07:59:27.880Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T07:59:27.880Z] [LOG]    Gross Salary: Rs.19199.97
[2025-10-26T07:59:27.881Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T07:59:27.881Z] [LOG]    = NET SALARY: Rs.19199.97
[2025-10-26T07:59:27.881Z] [LOG] 
💾 Database Update:
[2025-10-26T07:59:27.881Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T07:59:27.882Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T07:59:28.140Z] [LOG] 
📝 Components to save:
[2025-10-26T07:59:28.141Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T07:59:28.141Z] [LOG]    Deduction components: 1
[2025-10-26T07:59:28.141Z] [LOG] Creating components for record 336865b3-1a7a-4024-8170-5097f3214321: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T07:59:28.142Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 19199.97
}
[2025-10-26T07:59:28.365Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T07:59:28.608Z] [LOG] Created payroll_record_component: 51e9820a-42a8-4f7b-af7a-630e99b4dcb9 for Base Salary
[2025-10-26T07:59:28.609Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 44799.93000000001
}
[2025-10-26T07:59:28.835Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T07:59:29.075Z] [LOG] Created payroll_record_component: ff915b9c-f6fd-4c40-a576-ae3de50a539c for Attendance Shortfall (Info)
[2025-10-26T07:59:29.572Z] [LOG] ✅ Financial balances updated successfully for employee 0143fc5a-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:29.573Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T07:59:29.573Z] [LOG] 
======================================================================
[2025-10-26T07:59:29.573Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Shandeep null
[2025-10-26T07:59:29.574Z] [LOG] ======================================================================
[2025-10-26T07:59:29.574Z] [LOG]    Base Salary (Full): Rs.80000.00
[2025-10-26T07:59:29.574Z] [LOG]    Actual Earned Base (Attendance-based): Rs.19199.97
[2025-10-26T07:59:29.575Z] [LOG]    Attendance Shortfall: Rs.44799.93
[2025-10-26T07:59:29.575Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:29.576Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:29.576Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T07:59:29.576Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:29.576Z] [LOG]    GROSS SALARY: Rs.19199.97
[2025-10-26T07:59:29.577Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:29.577Z] [LOG]    Deductions Breakdown:
[2025-10-26T07:59:29.578Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T07:59:29.578Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T07:59:29.578Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T07:59:29.578Z] [LOG]       - Attendance Shortfall (Info): Rs.44799.93
[2025-10-26T07:59:29.579Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:29.579Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:29.579Z] [LOG]    NET SALARY: Rs.19199.97
[2025-10-26T07:59:29.580Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T07:59:29.580Z] [LOG] ======================================================================

[2025-10-26T07:59:29.580Z] [LOG] ✅ Shandeep null: Calculation completed successfully
[2025-10-26T07:59:29.581Z] [LOG] 📊 Progress: 9/34 (26.5%)
[2025-10-26T07:59:29.581Z] [LOG] 
🧮 Processing: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-26T07:59:29.581Z] [LOG] 📋 Record ID: 3a23dfbe-f5f2-4297-a3b7-95bb76120dd9
[2025-10-26T07:59:29.582Z] [LOG] 
======================================================================
[2025-10-26T07:59:29.582Z] [LOG] 🧮 CALCULATING PAYROLL: G.M Supathala Sadaru Madhushan null (EMP000042)
[2025-10-26T07:59:29.582Z] [LOG] ======================================================================
[2025-10-26T07:59:30.436Z] [LOG] 🔍 Component filtering for employee 0144315c-7105-11f0-a50f-98e743540430:
[2025-10-26T07:59:30.437Z] [LOG]    Total components: 13
[2025-10-26T07:59:30.437Z] [LOG]    Applicable components: 13
[2025-10-26T07:59:30.438Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-26T07:59:32.355Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T07:59:32.355Z] [LOG] 🔄 Processing financial records for employee 0144315c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T07:59:32.602Z] [LOG] 📊 Found 0 active loans for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:32.835Z] [LOG] 📊 Found 0 active advances for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:33.076Z] [LOG] 📊 Found 0 approved bonuses for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:33.076Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T07:59:33.077Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T07:59:33.323Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T07:59:33.323Z] [LOG]    Employee ID: 0144315c-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:33.324Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T07:59:33.324Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T07:59:33.324Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-26T07:59:33.570Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T07:59:33.571Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-26T07:59:33.571Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-26T07:59:33.572Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-26T07:59:33.572Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T07:59:33.572Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T07:59:33.572Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T07:59:34.196Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T07:59:34.196Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T07:59:34.398Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T07:59:34.398Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T07:59:34.398Z] [LOG]       Total completed sessions found: 6
[2025-10-26T07:59:34.399Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T07:59:34.399Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T07:59:34.399Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T07:59:34.399Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T07:59:34.400Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T07:59:34.400Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T07:59:34.400Z] [LOG]          6. 2025-10-24 (Weekday): 7.50h
[2025-10-26T07:59:34.607Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T07:59:34.608Z] [LOG]          Weekday: 41.50h
[2025-10-26T07:59:34.608Z] [LOG]          Saturday: 4.50h
[2025-10-26T07:59:34.608Z] [LOG]          Sunday: 0.00h
[2025-10-26T07:59:34.834Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T07:59:34.835Z] [LOG]       Weekday: 136.00h
[2025-10-26T07:59:34.835Z] [LOG]       Saturday: 18.00h
[2025-10-26T07:59:34.835Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:34.835Z] [LOG]       Total Expected: 154.00h
[2025-10-26T07:59:34.835Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T07:59:34.835Z] [LOG]       Weekday: 41.50h
[2025-10-26T07:59:34.836Z] [LOG]       Saturday: 4.50h
[2025-10-26T07:59:34.836Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:34.836Z] [LOG]       Total Actual: 46.00h
[2025-10-26T07:59:34.836Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T07:59:34.836Z] [LOG]       Weekday: 136.00h × Rs.235.29 = Rs.31999.44
[2025-10-26T07:59:34.836Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-26T07:59:34.837Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:34.837Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:34.837Z] [LOG]       Total Expected Earned: Rs.39999.36
[2025-10-26T07:59:34.838Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T07:59:34.838Z] [LOG]       Weekday: 41.50h × Rs.235.29 = Rs.9764.53
[2025-10-26T07:59:34.838Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-26T07:59:34.839Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:34.839Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:34.839Z] [LOG]       Total Actual Earned: Rs.11764.51
[2025-10-26T07:59:34.840Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T07:59:34.840Z] [LOG]       Calculated At: Oct 26, 2025, 13:29:34
[2025-10-26T07:59:34.840Z] [LOG]       Expected Earned (until NOW): Rs.39999.36
[2025-10-26T07:59:34.841Z] [LOG]       Actual Earned (until NOW): Rs.11764.51
[2025-10-26T07:59:34.841Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:34.841Z] [LOG]       Attendance Deduction: Rs.28234.85
[2025-10-26T07:59:34.841Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T07:59:34.841Z] [LOG]       📉 Shortfall: 108.00 hours (70.59% of expected)
[2025-10-26T07:59:34.841Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T07:59:34.841Z] [LOG]    Actual Earned Base: Rs.11764.51
[2025-10-26T07:59:34.842Z] [LOG]    Attendance Shortfall: Rs.28234.85
[2025-10-26T07:59:34.842Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T07:59:34.842Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T07:59:34.842Z] [LOG]    Gross Salary: 11764.515
[2025-10-26T07:59:34.842Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T07:59:34.842Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T07:59:34.842Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:34.843Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T07:59:34.843Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:34.843Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T07:59:34.843Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:34.844Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T07:59:34.844Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:34.844Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T07:59:34.844Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:34.844Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T07:59:34.844Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:34.844Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T07:59:34.844Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:34.844Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T07:59:34.845Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:34.845Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T07:59:34.845Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:34.845Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T07:59:34.845Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:34.846Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T07:59:34.846Z] [LOG]    EPF/ETF calculated on: Rs.11764.51
[2025-10-26T07:59:34.846Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T07:59:34.846Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T07:59:34.846Z] [LOG] 💰 GROSS CALCULATION for G.M Supathala Sadaru Madhushan null:
[2025-10-26T07:59:34.846Z] [LOG]    Base Salary: 50000
[2025-10-26T07:59:34.846Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T07:59:34.846Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T07:59:34.846Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:34.846Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T07:59:34.846Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:34.846Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T07:59:34.847Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:35.075Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T07:59:35.076Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:35.076Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T07:59:35.076Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T07:59:35.077Z] [LOG]    Actual Earned Base: Rs.11764.51
[2025-10-26T07:59:35.077Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T07:59:35.077Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T07:59:35.078Z] [LOG]    = Gross Salary: Rs.11764.51
[2025-10-26T07:59:35.078Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T07:59:35.079Z] [LOG]    Attendance Shortfall (Info): Rs.28234.85
[2025-10-26T07:59:35.079Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T07:59:35.079Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:35.079Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T07:59:35.080Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T07:59:35.080Z] [LOG]    Gross Salary: Rs.11764.51
[2025-10-26T07:59:35.080Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T07:59:35.081Z] [LOG]    = NET SALARY: Rs.11764.51
[2025-10-26T07:59:35.081Z] [LOG] 
💾 Database Update:
[2025-10-26T07:59:35.081Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T07:59:35.082Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T07:59:35.315Z] [LOG] 
📝 Components to save:
[2025-10-26T07:59:35.316Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T07:59:35.316Z] [LOG]    Deduction components: 1
[2025-10-26T07:59:35.317Z] [LOG] Creating components for record 3a23dfbe-f5f2-4297-a3b7-95bb76120dd9: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T07:59:35.317Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11764.515
}
[2025-10-26T07:59:35.563Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T07:59:35.807Z] [LOG] Created payroll_record_component: 218c27ec-ee3b-4605-9339-1f55d4c431c2 for Base Salary
[2025-10-26T07:59:35.807Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 28234.845
}
[2025-10-26T07:59:36.035Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T07:59:36.283Z] [LOG] Created payroll_record_component: ec9e5809-8a33-4e3b-9297-4ead30897fa8 for Attendance Shortfall (Info)
[2025-10-26T07:59:36.756Z] [LOG] ✅ Financial balances updated successfully for employee 0144315c-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:36.756Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T07:59:36.757Z] [LOG] 
======================================================================
[2025-10-26T07:59:36.757Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: G.M Supathala Sadaru Madhushan null
[2025-10-26T07:59:36.757Z] [LOG] ======================================================================
[2025-10-26T07:59:36.758Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T07:59:36.758Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11764.51
[2025-10-26T07:59:36.758Z] [LOG]    Attendance Shortfall: Rs.28234.85
[2025-10-26T07:59:36.759Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:36.759Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:36.760Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T07:59:36.760Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:36.760Z] [LOG]    GROSS SALARY: Rs.11764.51
[2025-10-26T07:59:36.761Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:36.761Z] [LOG]    Deductions Breakdown:
[2025-10-26T07:59:36.761Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T07:59:36.761Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T07:59:36.762Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T07:59:36.762Z] [LOG]       - Attendance Shortfall (Info): Rs.28234.85
[2025-10-26T07:59:36.763Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:36.763Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:36.763Z] [LOG]    NET SALARY: Rs.11764.51
[2025-10-26T07:59:36.763Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T07:59:36.764Z] [LOG] ======================================================================

[2025-10-26T07:59:36.764Z] [LOG] ✅ G.M Supathala Sadaru Madhushan null: Calculation completed successfully
[2025-10-26T07:59:36.765Z] [LOG] 📊 Progress: 10/34 (29.4%)
[2025-10-26T07:59:36.765Z] [LOG] 
🧮 Processing: Ruvindu Hewabandu null (EMP000027)
[2025-10-26T07:59:36.765Z] [LOG] 📋 Record ID: 579613ea-b237-45a9-9fcb-7ebdbf5b3f5c
[2025-10-26T07:59:36.765Z] [LOG] 
======================================================================
[2025-10-26T07:59:36.765Z] [LOG] 🧮 CALCULATING PAYROLL: Ruvindu Hewabandu null (EMP000027)
[2025-10-26T07:59:36.765Z] [LOG] ======================================================================
[2025-10-26T07:59:37.731Z] [LOG] 🔍 Component filtering for employee 0143e915-7105-11f0-a50f-98e743540430:
[2025-10-26T07:59:37.732Z] [LOG]    Total components: 13
[2025-10-26T07:59:37.732Z] [LOG]    Applicable components: 13
[2025-10-26T07:59:37.732Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-26T07:59:39.163Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T07:59:39.164Z] [LOG] 🔄 Processing financial records for employee 0143e915-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T07:59:39.407Z] [LOG] 📊 Found 0 active loans for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:39.636Z] [LOG] 📊 Found 0 active advances for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:39.875Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:39.876Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T07:59:39.876Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T07:59:40.115Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T07:59:40.115Z] [LOG]    Employee ID: 0143e915-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:40.115Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T07:59:40.116Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T07:59:40.116Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-26T07:59:40.363Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T07:59:40.364Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-26T07:59:40.364Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-26T07:59:40.365Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-26T07:59:40.365Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T07:59:40.365Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T07:59:40.366Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T07:59:41.076Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T07:59:41.076Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T07:59:41.315Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T07:59:41.315Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T07:59:41.316Z] [LOG]       Total completed sessions found: 6
[2025-10-26T07:59:41.316Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T07:59:41.317Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T07:59:41.317Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T07:59:41.317Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T07:59:41.318Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T07:59:41.318Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T07:59:41.318Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T07:59:41.514Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T07:59:41.515Z] [LOG]          Weekday: 42.50h
[2025-10-26T07:59:41.515Z] [LOG]          Saturday: 4.50h
[2025-10-26T07:59:41.516Z] [LOG]          Sunday: 0.00h
[2025-10-26T07:59:41.716Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T07:59:41.716Z] [LOG]       Weekday: 136.00h
[2025-10-26T07:59:41.716Z] [LOG]       Saturday: 18.00h
[2025-10-26T07:59:41.717Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:41.717Z] [LOG]       Total Expected: 154.00h
[2025-10-26T07:59:41.717Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T07:59:41.718Z] [LOG]       Weekday: 42.50h
[2025-10-26T07:59:41.718Z] [LOG]       Saturday: 4.50h
[2025-10-26T07:59:41.718Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:41.719Z] [LOG]       Total Actual: 47.00h
[2025-10-26T07:59:41.719Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T07:59:41.719Z] [LOG]       Weekday: 136.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:41.720Z] [LOG]       Saturday: 18.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:41.720Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:41.720Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:41.720Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-26T07:59:41.721Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T07:59:41.721Z] [LOG]       Weekday: 42.50h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:41.721Z] [LOG]       Saturday: 4.50h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:41.721Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:41.721Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:41.721Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-26T07:59:41.722Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T07:59:41.722Z] [LOG]       Calculated At: Oct 26, 2025, 13:29:41
[2025-10-26T07:59:41.722Z] [LOG]       Expected Earned (until NOW): Rs.0.00
[2025-10-26T07:59:41.722Z] [LOG]       Actual Earned (until NOW): Rs.0.00
[2025-10-26T07:59:41.722Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:41.722Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-26T07:59:41.723Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T07:59:41.723Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-26T07:59:41.723Z] [LOG]    Base Salary (Full): Rs.NaN
[2025-10-26T07:59:41.723Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-26T07:59:41.723Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-26T07:59:41.723Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T07:59:41.724Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T07:59:41.724Z] [LOG]    Gross Salary: 0
[2025-10-26T07:59:41.724Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T07:59:41.724Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T07:59:41.724Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:41.725Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T07:59:41.725Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:41.725Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T07:59:41.725Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:41.725Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T07:59:41.726Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:41.726Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T07:59:41.726Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:41.727Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T07:59:41.727Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:41.727Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T07:59:41.727Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:41.727Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T07:59:41.727Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:41.727Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T07:59:41.728Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:41.728Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T07:59:41.728Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:41.728Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T07:59:41.729Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-26T07:59:41.729Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T07:59:41.729Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T07:59:41.729Z] [LOG] 💰 GROSS CALCULATION for Ruvindu Hewabandu null:
[2025-10-26T07:59:41.729Z] [LOG]    Base Salary: 0
[2025-10-26T07:59:41.729Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T07:59:41.729Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T07:59:41.730Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:41.730Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T07:59:41.730Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:41.730Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T07:59:41.730Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:41.955Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T07:59:41.955Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:41.956Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T07:59:41.956Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T07:59:41.956Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-26T07:59:41.956Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T07:59:41.957Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T07:59:41.957Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-26T07:59:41.958Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T07:59:41.958Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T07:59:41.959Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:41.959Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T07:59:41.959Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T07:59:41.960Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-26T07:59:41.960Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T07:59:41.960Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-26T07:59:41.961Z] [LOG] 
💾 Database Update:
[2025-10-26T07:59:41.961Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T07:59:41.961Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T07:59:42.203Z] [LOG] 
📝 Components to save:
[2025-10-26T07:59:42.204Z] [LOG]    Gross/Earnings components: 0
[2025-10-26T07:59:42.204Z] [LOG]    Deduction components: 0
[2025-10-26T07:59:42.205Z] [LOG] Creating components for record 579613ea-b237-45a9-9fcb-7ebdbf5b3f5c: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-26T07:59:42.683Z] [LOG] ✅ Financial balances updated successfully for employee 0143e915-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:42.684Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T07:59:42.684Z] [LOG] 
======================================================================
[2025-10-26T07:59:42.684Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ruvindu Hewabandu null
[2025-10-26T07:59:42.685Z] [LOG] ======================================================================
[2025-10-26T07:59:42.685Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-26T07:59:42.685Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-26T07:59:42.686Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-26T07:59:42.686Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:42.686Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:42.687Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T07:59:42.687Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:42.687Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-26T07:59:42.688Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:42.688Z] [LOG]    Deductions Breakdown:
[2025-10-26T07:59:42.688Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T07:59:42.688Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T07:59:42.689Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T07:59:42.689Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-26T07:59:42.689Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:42.690Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:42.690Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-26T07:59:42.690Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T07:59:42.691Z] [LOG] ======================================================================

[2025-10-26T07:59:42.691Z] [LOG] ✅ Ruvindu Hewabandu null: Calculation completed successfully
[2025-10-26T07:59:42.691Z] [LOG] 📊 Progress: 11/34 (32.4%)
[2025-10-26T07:59:42.692Z] [LOG] 
🧮 Processing: Kaushal Thambi (EMP465256103)
[2025-10-26T07:59:42.692Z] [LOG] 📋 Record ID: 595f2082-23c4-4573-becb-e9079e7287a2
[2025-10-26T07:59:42.692Z] [LOG] 
======================================================================
[2025-10-26T07:59:42.692Z] [LOG] 🧮 CALCULATING PAYROLL: Kaushal Thambi (EMP465256103)
[2025-10-26T07:59:42.692Z] [LOG] ======================================================================
[2025-10-26T07:59:43.644Z] [LOG] 🔍 Component filtering for employee 9e8125c4-ce58-411a-b617-9f75d481c613:
[2025-10-26T07:59:43.645Z] [LOG]    Total components: 13
[2025-10-26T07:59:43.645Z] [LOG]    Applicable components: 13
[2025-10-26T07:59:43.645Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-26T07:59:45.156Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T07:59:45.156Z] [LOG] 🔄 Processing financial records for employee 9e8125c4-ce58-411a-b617-9f75d481c613 in period 2025-10-01 to 2025-10-31
[2025-10-26T07:59:45.356Z] [LOG] 📊 Found 0 active loans for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-26T07:59:45.563Z] [LOG] 📊 Found 0 active advances for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-26T07:59:45.803Z] [LOG] 📊 Found 0 approved bonuses for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-26T07:59:45.803Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T07:59:45.804Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T07:59:45.993Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T07:59:45.994Z] [LOG]    Employee ID: 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-26T07:59:45.994Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T07:59:45.994Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T07:59:45.995Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-26T07:59:46.204Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T07:59:46.204Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-26T07:59:46.205Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-26T07:59:46.205Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-26T07:59:46.205Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T07:59:46.206Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T07:59:46.206Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T07:59:46.851Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T07:59:46.852Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T07:59:47.083Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T07:59:47.084Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T07:59:47.084Z] [LOG]       Total completed sessions found: 3
[2025-10-26T07:59:47.085Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T07:59:47.085Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T07:59:47.085Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T07:59:47.086Z] [LOG]          3. 2025-10-24 (Weekday): 8.50h
[2025-10-26T07:59:47.331Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T07:59:47.331Z] [LOG]          Weekday: 17.00h
[2025-10-26T07:59:47.331Z] [LOG]          Saturday: 4.50h
[2025-10-26T07:59:47.332Z] [LOG]          Sunday: 0.00h
[2025-10-26T07:59:47.557Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T07:59:47.557Z] [LOG]       Weekday: 136.00h
[2025-10-26T07:59:47.557Z] [LOG]       Saturday: 18.00h
[2025-10-26T07:59:47.558Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:47.558Z] [LOG]       Total Expected: 154.00h
[2025-10-26T07:59:47.558Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T07:59:47.559Z] [LOG]       Weekday: 17.00h
[2025-10-26T07:59:47.559Z] [LOG]       Saturday: 4.50h
[2025-10-26T07:59:47.559Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:47.560Z] [LOG]       Total Actual: 21.50h
[2025-10-26T07:59:47.560Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T07:59:47.561Z] [LOG]       Weekday: 136.00h × Rs.235.29 = Rs.31999.44
[2025-10-26T07:59:47.561Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-26T07:59:47.561Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:47.562Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:47.562Z] [LOG]       Total Expected Earned: Rs.39999.36
[2025-10-26T07:59:47.562Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T07:59:47.562Z] [LOG]       Weekday: 17.00h × Rs.235.29 = Rs.3999.93
[2025-10-26T07:59:47.563Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-26T07:59:47.563Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:47.563Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:47.564Z] [LOG]       Total Actual Earned: Rs.5999.91
[2025-10-26T07:59:47.564Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T07:59:47.565Z] [LOG]       Calculated At: Oct 26, 2025, 13:29:47
[2025-10-26T07:59:47.565Z] [LOG]       Expected Earned (until NOW): Rs.39999.36
[2025-10-26T07:59:47.565Z] [LOG]       Actual Earned (until NOW): Rs.5999.91
[2025-10-26T07:59:47.565Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:47.566Z] [LOG]       Attendance Deduction: Rs.33999.45
[2025-10-26T07:59:47.566Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T07:59:47.566Z] [LOG]       📉 Shortfall: 132.50 hours (85.00% of expected)
[2025-10-26T07:59:47.566Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T07:59:47.566Z] [LOG]    Actual Earned Base: Rs.5999.91
[2025-10-26T07:59:47.566Z] [LOG]    Attendance Shortfall: Rs.33999.45
[2025-10-26T07:59:47.567Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T07:59:47.567Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T07:59:47.567Z] [LOG]    Gross Salary: 5999.91
[2025-10-26T07:59:47.567Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T07:59:47.567Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T07:59:47.567Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:47.567Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T07:59:47.567Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:47.568Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T07:59:47.568Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:47.568Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T07:59:47.568Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:47.568Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T07:59:47.568Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:47.568Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T07:59:47.568Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:47.569Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T07:59:47.569Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:47.569Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T07:59:47.569Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:47.569Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T07:59:47.569Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:47.569Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T07:59:47.569Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:47.569Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T07:59:47.569Z] [LOG]    EPF/ETF calculated on: Rs.5999.91
[2025-10-26T07:59:47.569Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T07:59:47.569Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T07:59:47.569Z] [LOG] 💰 GROSS CALCULATION for Kaushal Thambi:
[2025-10-26T07:59:47.569Z] [LOG]    Base Salary: 50000
[2025-10-26T07:59:47.569Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T07:59:47.570Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T07:59:47.570Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:47.570Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T07:59:47.570Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:47.570Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T07:59:47.570Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:47.808Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T07:59:47.808Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:47.809Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T07:59:47.809Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T07:59:47.809Z] [LOG]    Actual Earned Base: Rs.5999.91
[2025-10-26T07:59:47.810Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T07:59:47.810Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T07:59:47.810Z] [LOG]    = Gross Salary: Rs.5999.91
[2025-10-26T07:59:47.811Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T07:59:47.811Z] [LOG]    Attendance Shortfall (Info): Rs.33999.45
[2025-10-26T07:59:47.811Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T07:59:47.812Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:47.812Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T07:59:47.812Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T07:59:47.813Z] [LOG]    Gross Salary: Rs.5999.91
[2025-10-26T07:59:47.813Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T07:59:47.813Z] [LOG]    = NET SALARY: Rs.5999.91
[2025-10-26T07:59:47.814Z] [LOG] 
💾 Database Update:
[2025-10-26T07:59:47.814Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T07:59:47.814Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T07:59:48.039Z] [LOG] 
📝 Components to save:
[2025-10-26T07:59:48.039Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T07:59:48.040Z] [LOG]    Deduction components: 1
[2025-10-26T07:59:48.040Z] [LOG] Creating components for record 595f2082-23c4-4573-becb-e9079e7287a2: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T07:59:48.041Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 5999.91
}
[2025-10-26T07:59:48.277Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T07:59:48.516Z] [LOG] Created payroll_record_component: dd3b2095-6905-4b71-ba86-905f9b3aaa08 for Base Salary
[2025-10-26T07:59:48.516Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 33999.45
}
[2025-10-26T07:59:48.708Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T07:59:48.904Z] [LOG] Created payroll_record_component: 249c9f12-7453-4ffd-b875-d2deea804d4d for Attendance Shortfall (Info)
[2025-10-26T07:59:49.315Z] [LOG] ✅ Financial balances updated successfully for employee 9e8125c4-ce58-411a-b617-9f75d481c613
[2025-10-26T07:59:49.315Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T07:59:49.316Z] [LOG] 
======================================================================
[2025-10-26T07:59:49.316Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Kaushal Thambi
[2025-10-26T07:59:49.316Z] [LOG] ======================================================================
[2025-10-26T07:59:49.317Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T07:59:49.317Z] [LOG]    Actual Earned Base (Attendance-based): Rs.5999.91
[2025-10-26T07:59:49.317Z] [LOG]    Attendance Shortfall: Rs.33999.45
[2025-10-26T07:59:49.318Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:49.318Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:49.318Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T07:59:49.319Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:49.319Z] [LOG]    GROSS SALARY: Rs.5999.91
[2025-10-26T07:59:49.320Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:49.320Z] [LOG]    Deductions Breakdown:
[2025-10-26T07:59:49.320Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T07:59:49.320Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T07:59:49.321Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T07:59:49.321Z] [LOG]       - Attendance Shortfall (Info): Rs.33999.45
[2025-10-26T07:59:49.321Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:49.322Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:49.322Z] [LOG]    NET SALARY: Rs.5999.91
[2025-10-26T07:59:49.322Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T07:59:49.323Z] [LOG] ======================================================================

[2025-10-26T07:59:49.323Z] [LOG] ✅ Kaushal Thambi: Calculation completed successfully
[2025-10-26T07:59:49.323Z] [LOG] 📊 Progress: 12/34 (35.3%)
[2025-10-26T07:59:49.323Z] [LOG] 
🧮 Processing: Saru null (EMP000022)
[2025-10-26T07:59:49.324Z] [LOG] 📋 Record ID: 66cfe537-dc81-4f97-9bfa-867ae575e2cf
[2025-10-26T07:59:49.324Z] [LOG] 
======================================================================
[2025-10-26T07:59:49.324Z] [LOG] 🧮 CALCULATING PAYROLL: Saru null (EMP000022)
[2025-10-26T07:59:49.325Z] [LOG] ======================================================================
[2025-10-26T07:59:50.115Z] [LOG] 🔍 Component filtering for employee 0143cc7e-7105-11f0-a50f-98e743540430:
[2025-10-26T07:59:50.116Z] [LOG]    Total components: 13
[2025-10-26T07:59:50.116Z] [LOG]    Applicable components: 13
[2025-10-26T07:59:50.116Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-26T07:59:51.475Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T07:59:51.475Z] [LOG] 🔄 Processing financial records for employee 0143cc7e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T07:59:51.668Z] [LOG] 📊 Found 0 active loans for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:51.855Z] [LOG] 📊 Found 0 active advances for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:52.060Z] [LOG] 📊 Found 0 approved bonuses for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:52.061Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T07:59:52.062Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T07:59:52.283Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T07:59:52.283Z] [LOG]    Employee ID: 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:52.284Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T07:59:52.284Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T07:59:52.284Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-26T07:59:52.487Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T07:59:52.488Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-26T07:59:52.488Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-26T07:59:52.488Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-26T07:59:52.489Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T07:59:52.489Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T07:59:52.489Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T07:59:53.077Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T07:59:53.078Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T07:59:53.316Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T07:59:53.316Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T07:59:53.317Z] [LOG]       Total completed sessions found: 6
[2025-10-26T07:59:53.317Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T07:59:53.317Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T07:59:53.318Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T07:59:53.318Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T07:59:53.318Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T07:59:53.318Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T07:59:53.319Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T07:59:53.508Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T07:59:53.508Z] [LOG]          Weekday: 42.50h
[2025-10-26T07:59:53.509Z] [LOG]          Saturday: 4.50h
[2025-10-26T07:59:53.509Z] [LOG]          Sunday: 0.00h
[2025-10-26T07:59:53.715Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T07:59:53.716Z] [LOG]       Weekday: 136.00h
[2025-10-26T07:59:53.716Z] [LOG]       Saturday: 18.00h
[2025-10-26T07:59:53.716Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:53.717Z] [LOG]       Total Expected: 154.00h
[2025-10-26T07:59:53.717Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T07:59:53.717Z] [LOG]       Weekday: 42.50h
[2025-10-26T07:59:53.718Z] [LOG]       Saturday: 4.50h
[2025-10-26T07:59:53.718Z] [LOG]       Sunday: 0.00h
[2025-10-26T07:59:53.718Z] [LOG]       Total Actual: 47.00h
[2025-10-26T07:59:53.719Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T07:59:53.719Z] [LOG]       Weekday: 136.00h × Rs.235.29 = Rs.31999.44
[2025-10-26T07:59:53.719Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-26T07:59:53.720Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:53.720Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:53.720Z] [LOG]       Total Expected Earned: Rs.39999.36
[2025-10-26T07:59:53.721Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T07:59:53.721Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-26T07:59:53.721Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-26T07:59:53.722Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T07:59:53.722Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:53.722Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-26T07:59:53.723Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T07:59:53.724Z] [LOG]       Calculated At: Oct 26, 2025, 13:29:53
[2025-10-26T07:59:53.724Z] [LOG]       Expected Earned (until NOW): Rs.39999.36
[2025-10-26T07:59:53.724Z] [LOG]       Actual Earned (until NOW): Rs.11999.80
[2025-10-26T07:59:53.725Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T07:59:53.725Z] [LOG]       Attendance Deduction: Rs.27999.56
[2025-10-26T07:59:53.725Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T07:59:53.725Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T07:59:53.726Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T07:59:53.726Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T07:59:53.726Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T07:59:53.727Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T07:59:53.727Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T07:59:53.727Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-26T07:59:53.727Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T07:59:53.727Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T07:59:53.728Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:53.728Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T07:59:53.729Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:53.729Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T07:59:53.729Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:53.730Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T07:59:53.730Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:53.730Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T07:59:53.730Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:53.730Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T07:59:53.730Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:53.730Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T07:59:53.731Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:53.731Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T07:59:53.731Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:53.731Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T07:59:53.731Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:53.731Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T07:59:53.732Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:53.732Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T07:59:53.732Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-26T07:59:53.732Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T07:59:53.732Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T07:59:53.732Z] [LOG] 💰 GROSS CALCULATION for Saru null:
[2025-10-26T07:59:53.732Z] [LOG]    Base Salary: 50000
[2025-10-26T07:59:53.732Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T07:59:53.732Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T07:59:53.733Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:53.733Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T07:59:53.733Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:53.733Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T07:59:53.733Z] [LOG]    Fixed amount: 0
[2025-10-26T07:59:53.963Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T07:59:53.963Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:53.964Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T07:59:53.964Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T07:59:53.964Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T07:59:53.964Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T07:59:53.965Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T07:59:53.965Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-26T07:59:53.965Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T07:59:53.966Z] [LOG]    Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T07:59:53.966Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T07:59:53.966Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:53.967Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T07:59:53.967Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T07:59:53.967Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-26T07:59:53.968Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T07:59:53.968Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-26T07:59:53.968Z] [LOG] 
💾 Database Update:
[2025-10-26T07:59:53.968Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T07:59:53.968Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T07:59:54.195Z] [LOG] 
📝 Components to save:
[2025-10-26T07:59:54.195Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T07:59:54.196Z] [LOG]    Deduction components: 1
[2025-10-26T07:59:54.196Z] [LOG] Creating components for record 66cfe537-dc81-4f97-9bfa-867ae575e2cf: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T07:59:54.197Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-26T07:59:54.443Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T07:59:54.756Z] [LOG] Created payroll_record_component: a17f510e-afc5-45a0-81e9-0a09871b78f4 for Base Salary
[2025-10-26T07:59:54.756Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 27999.555
}
[2025-10-26T07:59:55.008Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T07:59:55.235Z] [LOG] Created payroll_record_component: e5444575-a5ff-45f2-abe9-3ab8448ae2d7 for Attendance Shortfall (Info)
[2025-10-26T07:59:55.715Z] [LOG] ✅ Financial balances updated successfully for employee 0143cc7e-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:55.715Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T07:59:55.716Z] [LOG] 
======================================================================
[2025-10-26T07:59:55.716Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saru null
[2025-10-26T07:59:55.716Z] [LOG] ======================================================================
[2025-10-26T07:59:55.717Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T07:59:55.717Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-26T07:59:55.717Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T07:59:55.718Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:55.718Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T07:59:55.718Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T07:59:55.718Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:55.719Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-26T07:59:55.719Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:55.719Z] [LOG]    Deductions Breakdown:
[2025-10-26T07:59:55.719Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T07:59:55.720Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T07:59:55.720Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T07:59:55.720Z] [LOG]       - Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T07:59:55.721Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T07:59:55.721Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T07:59:55.721Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-26T07:59:55.721Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T07:59:55.722Z] [LOG] ======================================================================

[2025-10-26T07:59:55.722Z] [LOG] ✅ Saru null: Calculation completed successfully
[2025-10-26T07:59:55.722Z] [LOG] 📊 Progress: 13/34 (38.2%)
[2025-10-26T07:59:55.723Z] [LOG] 
🧮 Processing: customer null (EMP000036)
[2025-10-26T07:59:55.723Z] [LOG] 📋 Record ID: 69107fa3-6828-4a12-8aa6-2efacf800800
[2025-10-26T07:59:55.723Z] [LOG] 
======================================================================
[2025-10-26T07:59:55.723Z] [LOG] 🧮 CALCULATING PAYROLL: customer null (EMP000036)
[2025-10-26T07:59:55.723Z] [LOG] ======================================================================
[2025-10-26T07:59:56.595Z] [LOG] 🔍 Component filtering for employee 014409a2-7105-11f0-a50f-98e743540430:
[2025-10-26T07:59:56.596Z] [LOG]    Total components: 13
[2025-10-26T07:59:56.596Z] [LOG]    Applicable components: 13
[2025-10-26T07:59:56.597Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-26T07:59:57.875Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T07:59:57.876Z] [LOG] 🔄 Processing financial records for employee 014409a2-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T07:59:58.115Z] [LOG] 📊 Found 0 active loans for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:58.357Z] [LOG] 📊 Found 0 active advances for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:58.609Z] [LOG] 📊 Found 0 approved bonuses for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:58.610Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T07:59:58.610Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T07:59:58.851Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T07:59:58.852Z] [LOG]    Employee ID: 014409a2-7105-11f0-a50f-98e743540430
[2025-10-26T07:59:58.852Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T07:59:58.853Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T07:59:58.853Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-26T07:59:59.084Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T07:59:59.084Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-26T07:59:59.085Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-26T07:59:59.085Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-26T07:59:59.085Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T07:59:59.086Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T07:59:59.086Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T07:59:59.809Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T07:59:59.809Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:00:00.036Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:00:00.036Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:00:00.036Z] [LOG]       Total completed sessions found: 6
[2025-10-26T08:00:00.037Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:00:00.037Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:00:00.037Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:00:00.037Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:00:00.038Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:00:00.038Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T08:00:00.038Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:00:00.275Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:00:00.276Z] [LOG]          Weekday: 42.50h
[2025-10-26T08:00:00.276Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:00:00.276Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:00:00.516Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:00:00.517Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:00:00.517Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:00:00.517Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:00.518Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:00:00.518Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:00:00.518Z] [LOG]       Weekday: 42.50h
[2025-10-26T08:00:00.519Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:00:00.519Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:00.519Z] [LOG]       Total Actual: 47.00h
[2025-10-26T08:00:00.520Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:00:00.520Z] [LOG]       Weekday: 136.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:00.521Z] [LOG]       Saturday: 18.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:00.521Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:00.521Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:00.521Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-26T08:00:00.522Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:00:00.522Z] [LOG]       Weekday: 42.50h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:00.523Z] [LOG]       Saturday: 4.50h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:00.523Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:00.523Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:00.523Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-26T08:00:00.523Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:00:00.524Z] [LOG]       Calculated At: Oct 26, 2025, 13:30:00
[2025-10-26T08:00:00.524Z] [LOG]       Expected Earned (until NOW): Rs.0.00
[2025-10-26T08:00:00.524Z] [LOG]       Actual Earned (until NOW): Rs.0.00
[2025-10-26T08:00:00.524Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:00.525Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-26T08:00:00.525Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:00:00.525Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-26T08:00:00.525Z] [LOG]    Base Salary (Full): Rs.NaN
[2025-10-26T08:00:00.525Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-26T08:00:00.525Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-26T08:00:00.526Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:00:00.526Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:00:00.526Z] [LOG]    Gross Salary: 0
[2025-10-26T08:00:00.526Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:00:00.526Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:00:00.526Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:00.526Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:00:00.526Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:00.527Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:00:00.527Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:00.527Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:00:00.527Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:00.527Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:00:00.527Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:00.527Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:00:00.528Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:00.528Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:00:00.528Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:00.528Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:00:00.528Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:00.528Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:00:00.528Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:00.528Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:00:00.528Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:00.528Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:00:00.528Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-26T08:00:00.529Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:00:00.529Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:00:00.529Z] [LOG] 💰 GROSS CALCULATION for customer null:
[2025-10-26T08:00:00.529Z] [LOG]    Base Salary: 0
[2025-10-26T08:00:00.529Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:00:00.529Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:00:00.529Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:00.529Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:00:00.529Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:00.529Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:00:00.529Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:00.755Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:00:00.756Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:00.756Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:00:00.756Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:00:00.757Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-26T08:00:00.757Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:00:00.757Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:00:00.758Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-26T08:00:00.758Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:00:00.758Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:00:00.759Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:00.759Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:00:00.759Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:00:00.760Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-26T08:00:00.760Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:00:00.760Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-26T08:00:00.761Z] [LOG] 
💾 Database Update:
[2025-10-26T08:00:00.761Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:00:00.761Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:00:01.009Z] [LOG] 
📝 Components to save:
[2025-10-26T08:00:01.009Z] [LOG]    Gross/Earnings components: 0
[2025-10-26T08:00:01.010Z] [LOG]    Deduction components: 0
[2025-10-26T08:00:01.010Z] [LOG] Creating components for record 69107fa3-6828-4a12-8aa6-2efacf800800: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-26T08:00:01.476Z] [LOG] ✅ Financial balances updated successfully for employee 014409a2-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:01.476Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:00:01.477Z] [LOG] 
======================================================================
[2025-10-26T08:00:01.477Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: customer null
[2025-10-26T08:00:01.477Z] [LOG] ======================================================================
[2025-10-26T08:00:01.478Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-26T08:00:01.478Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-26T08:00:01.478Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-26T08:00:01.478Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:01.479Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:01.479Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:00:01.479Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:01.480Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-26T08:00:01.480Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:01.480Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:00:01.481Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:00:01.481Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:00:01.481Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:00:01.482Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-26T08:00:01.482Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:01.482Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:01.482Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-26T08:00:01.482Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:00:01.482Z] [LOG] ======================================================================

[2025-10-26T08:00:01.483Z] [LOG] ✅ customer null: Calculation completed successfully
[2025-10-26T08:00:01.483Z] [LOG] 📊 Progress: 14/34 (41.2%)
[2025-10-26T08:00:01.483Z] [LOG] 
🧮 Processing: R. D.A Kaushalya null (EMP000044)
[2025-10-26T08:00:01.483Z] [LOG] 📋 Record ID: 88ce5392-4932-4821-b759-61c07ff93586
[2025-10-26T08:00:01.483Z] [LOG] 
======================================================================
[2025-10-26T08:00:01.483Z] [LOG] 🧮 CALCULATING PAYROLL: R. D.A Kaushalya null (EMP000044)
[2025-10-26T08:00:01.483Z] [LOG] ======================================================================
[2025-10-26T08:00:02.355Z] [LOG] 🔍 Component filtering for employee 01443963-7105-11f0-a50f-98e743540430:
[2025-10-26T08:00:02.356Z] [LOG]    Total components: 13
[2025-10-26T08:00:02.356Z] [LOG]    Applicable components: 13
[2025-10-26T08:00:02.356Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-26T08:00:03.715Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:00:03.716Z] [LOG] 🔄 Processing financial records for employee 01443963-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:00:03.956Z] [LOG] 📊 Found 0 active loans for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:04.156Z] [LOG] 📊 Found 0 active advances for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:04.348Z] [LOG] 📊 Found 0 approved bonuses for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:04.349Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:00:04.349Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:00:04.676Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:00:04.676Z] [LOG]    Employee ID: 01443963-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:04.676Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:00:04.677Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:00:04.677Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-26T08:00:04.931Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:00:04.932Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-26T08:00:04.932Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-26T08:00:04.933Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-26T08:00:04.933Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:00:04.933Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:00:04.934Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:00:05.564Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:00:05.565Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:00:05.811Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:00:05.812Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:00:05.812Z] [LOG]       Total completed sessions found: 5
[2025-10-26T08:00:05.812Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:00:05.813Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:00:05.813Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:00:05.813Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:00:05.814Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:00:05.814Z] [LOG]          5. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:00:06.043Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:00:06.044Z] [LOG]          Weekday: 34.00h
[2025-10-26T08:00:06.044Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:00:06.044Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:00:06.291Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:00:06.291Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:00:06.292Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:00:06.292Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:06.292Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:00:06.293Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:00:06.293Z] [LOG]       Weekday: 34.00h
[2025-10-26T08:00:06.293Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:00:06.294Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:06.294Z] [LOG]       Total Actual: 38.50h
[2025-10-26T08:00:06.294Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:00:06.295Z] [LOG]       Weekday: 136.00h × Rs.235.29 = Rs.31999.44
[2025-10-26T08:00:06.295Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-26T08:00:06.295Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:06.296Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:06.296Z] [LOG]       Total Expected Earned: Rs.39999.36
[2025-10-26T08:00:06.296Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:00:06.296Z] [LOG]       Weekday: 34.00h × Rs.235.29 = Rs.7999.86
[2025-10-26T08:00:06.296Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-26T08:00:06.296Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:06.297Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:06.297Z] [LOG]       Total Actual Earned: Rs.9999.84
[2025-10-26T08:00:06.297Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:00:06.297Z] [LOG]       Calculated At: Oct 26, 2025, 13:30:06
[2025-10-26T08:00:06.297Z] [LOG]       Expected Earned (until NOW): Rs.39999.36
[2025-10-26T08:00:06.297Z] [LOG]       Actual Earned (until NOW): Rs.9999.84
[2025-10-26T08:00:06.297Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:06.298Z] [LOG]       Attendance Deduction: Rs.29999.52
[2025-10-26T08:00:06.298Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:00:06.298Z] [LOG]       📉 Shortfall: 115.50 hours (75.00% of expected)
[2025-10-26T08:00:06.298Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:00:06.298Z] [LOG]    Actual Earned Base: Rs.9999.84
[2025-10-26T08:00:06.298Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-26T08:00:06.299Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:00:06.299Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:00:06.299Z] [LOG]    Gross Salary: 9999.84
[2025-10-26T08:00:06.299Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:00:06.299Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:00:06.299Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:06.299Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:00:06.300Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:06.300Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:00:06.300Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:06.300Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:00:06.300Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:06.300Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:00:06.300Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:06.301Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:00:06.301Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:06.301Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:00:06.301Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:06.301Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:00:06.301Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:06.301Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:00:06.301Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:06.301Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:00:06.301Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:06.301Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:00:06.302Z] [LOG]    EPF/ETF calculated on: Rs.9999.84
[2025-10-26T08:00:06.302Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:00:06.302Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:00:06.302Z] [LOG] 💰 GROSS CALCULATION for R. D.A Kaushalya null:
[2025-10-26T08:00:06.302Z] [LOG]    Base Salary: 50000
[2025-10-26T08:00:06.302Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:00:06.302Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:00:06.302Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:06.302Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:00:06.303Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:06.303Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:00:06.303Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:06.517Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:00:06.517Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:06.518Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:00:06.518Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:00:06.518Z] [LOG]    Actual Earned Base: Rs.9999.84
[2025-10-26T08:00:06.519Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:00:06.519Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:00:06.519Z] [LOG]    = Gross Salary: Rs.9999.84
[2025-10-26T08:00:06.520Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:00:06.520Z] [LOG]    Attendance Shortfall (Info): Rs.29999.52
[2025-10-26T08:00:06.520Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:00:06.521Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:06.521Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:00:06.521Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:00:06.522Z] [LOG]    Gross Salary: Rs.9999.84
[2025-10-26T08:00:06.522Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:00:06.522Z] [LOG]    = NET SALARY: Rs.9999.84
[2025-10-26T08:00:06.523Z] [LOG] 
💾 Database Update:
[2025-10-26T08:00:06.523Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:00:06.523Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:00:06.756Z] [LOG] 
📝 Components to save:
[2025-10-26T08:00:06.756Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:00:06.757Z] [LOG]    Deduction components: 1
[2025-10-26T08:00:06.757Z] [LOG] Creating components for record 88ce5392-4932-4821-b759-61c07ff93586: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:00:06.758Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 9999.84
}
[2025-10-26T08:00:06.960Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:00:07.156Z] [LOG] Created payroll_record_component: 77c02b72-3852-4373-a064-2bd7692dd8c7 for Base Salary
[2025-10-26T08:00:07.156Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 29999.52
}
[2025-10-26T08:00:07.419Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:00:07.636Z] [LOG] Created payroll_record_component: ff7c1c65-ede9-42ee-8b58-3f2751e2e2f7 for Attendance Shortfall (Info)
[2025-10-26T08:00:08.116Z] [LOG] ✅ Financial balances updated successfully for employee 01443963-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:08.116Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:00:08.117Z] [LOG] 
======================================================================
[2025-10-26T08:00:08.117Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: R. D.A Kaushalya null
[2025-10-26T08:00:08.117Z] [LOG] ======================================================================
[2025-10-26T08:00:08.118Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:00:08.118Z] [LOG]    Actual Earned Base (Attendance-based): Rs.9999.84
[2025-10-26T08:00:08.118Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-26T08:00:08.119Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:08.119Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:08.119Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:00:08.119Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:08.120Z] [LOG]    GROSS SALARY: Rs.9999.84
[2025-10-26T08:00:08.120Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:08.121Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:00:08.121Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:00:08.121Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:00:08.122Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:00:08.122Z] [LOG]       - Attendance Shortfall (Info): Rs.29999.52
[2025-10-26T08:00:08.122Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:08.122Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:08.123Z] [LOG]    NET SALARY: Rs.9999.84
[2025-10-26T08:00:08.123Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:00:08.124Z] [LOG] ======================================================================

[2025-10-26T08:00:08.124Z] [LOG] ✅ R. D.A Kaushalya null: Calculation completed successfully
[2025-10-26T08:00:08.124Z] [LOG] 📊 Progress: 15/34 (44.1%)
[2025-10-26T08:00:08.124Z] [LOG] 
🧮 Processing: Viruna Damsiha Cooray null (EMP000038)
[2025-10-26T08:00:08.125Z] [LOG] 📋 Record ID: 8945944d-c4b7-48ce-aa0c-a318e49e68d9
[2025-10-26T08:00:08.125Z] [LOG] 
======================================================================
[2025-10-26T08:00:08.125Z] [LOG] 🧮 CALCULATING PAYROLL: Viruna Damsiha Cooray null (EMP000038)
[2025-10-26T08:00:08.126Z] [LOG] ======================================================================
[2025-10-26T08:00:09.084Z] [LOG] 🔍 Component filtering for employee 01441633-7105-11f0-a50f-98e743540430:
[2025-10-26T08:00:09.085Z] [LOG]    Total components: 13
[2025-10-26T08:00:09.085Z] [LOG]    Applicable components: 13
[2025-10-26T08:00:09.085Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-26T08:00:10.464Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:00:10.464Z] [LOG] 🔄 Processing financial records for employee 01441633-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:00:10.676Z] [LOG] 📊 Found 0 active loans for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:10.924Z] [LOG] 📊 Found 0 active advances for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:11.124Z] [LOG] 📊 Found 0 approved bonuses for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:11.124Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:00:11.125Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:00:11.316Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:00:11.316Z] [LOG]    Employee ID: 01441633-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:11.317Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:00:11.317Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:00:11.317Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-26T08:00:11.564Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:00:11.564Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-26T08:00:11.565Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-26T08:00:11.565Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-26T08:00:11.565Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:00:11.566Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:00:11.566Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:00:12.230Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:00:12.230Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:00:12.435Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:00:12.435Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:00:12.435Z] [LOG]       Total completed sessions found: 6
[2025-10-26T08:00:12.436Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:00:12.436Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:00:12.436Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:00:12.437Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:00:12.437Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:00:12.437Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T08:00:12.438Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:00:12.676Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:00:12.676Z] [LOG]          Weekday: 42.50h
[2025-10-26T08:00:12.677Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:00:12.677Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:00:12.931Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:00:12.932Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:00:12.932Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:00:12.932Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:12.933Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:00:12.933Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:00:12.934Z] [LOG]       Weekday: 42.50h
[2025-10-26T08:00:12.934Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:00:12.934Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:12.934Z] [LOG]       Total Actual: 47.00h
[2025-10-26T08:00:12.935Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:00:12.935Z] [LOG]       Weekday: 136.00h × Rs.235.29 = Rs.31999.44
[2025-10-26T08:00:12.935Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-26T08:00:12.936Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:12.936Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:12.936Z] [LOG]       Total Expected Earned: Rs.39999.36
[2025-10-26T08:00:12.937Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:00:12.937Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-26T08:00:12.937Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-26T08:00:12.937Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:12.938Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:12.938Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-26T08:00:12.939Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:00:12.939Z] [LOG]       Calculated At: Oct 26, 2025, 13:30:12
[2025-10-26T08:00:12.940Z] [LOG]       Expected Earned (until NOW): Rs.39999.36
[2025-10-26T08:00:12.940Z] [LOG]       Actual Earned (until NOW): Rs.11999.80
[2025-10-26T08:00:12.940Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:12.940Z] [LOG]       Attendance Deduction: Rs.27999.56
[2025-10-26T08:00:12.941Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:00:12.941Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T08:00:12.941Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:00:12.941Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T08:00:12.941Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T08:00:12.941Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:00:12.942Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:00:12.942Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-26T08:00:12.942Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:00:12.942Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:00:12.942Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:12.943Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:00:12.943Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:12.943Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:00:12.943Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:12.944Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:00:12.944Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:12.945Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:00:12.945Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:12.945Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:00:12.945Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:12.945Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:00:12.946Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:12.946Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:00:12.946Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:12.946Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:00:12.947Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:12.947Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:00:12.947Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:12.947Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:00:12.947Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-26T08:00:12.947Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:00:12.947Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:00:12.947Z] [LOG] 💰 GROSS CALCULATION for Viruna Damsiha Cooray null:
[2025-10-26T08:00:12.948Z] [LOG]    Base Salary: 50000
[2025-10-26T08:00:12.948Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:00:12.948Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:00:12.948Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:12.948Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:00:12.948Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:12.948Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:00:12.948Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:13.172Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:00:13.173Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:13.173Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:00:13.173Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:00:13.174Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T08:00:13.174Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:00:13.174Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:00:13.175Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-26T08:00:13.175Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:00:13.175Z] [LOG]    Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T08:00:13.176Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:00:13.176Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:13.176Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:00:13.177Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:00:13.177Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-26T08:00:13.177Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:00:13.178Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-26T08:00:13.178Z] [LOG] 
💾 Database Update:
[2025-10-26T08:00:13.179Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:00:13.179Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:00:13.577Z] [LOG] 
📝 Components to save:
[2025-10-26T08:00:13.578Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:00:13.578Z] [LOG]    Deduction components: 1
[2025-10-26T08:00:13.579Z] [LOG] Creating components for record 8945944d-c4b7-48ce-aa0c-a318e49e68d9: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:00:13.579Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-26T08:00:13.777Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:00:14.176Z] [LOG] Created payroll_record_component: 4616f63d-67ce-4844-90f3-3c5f31be2092 for Base Salary
[2025-10-26T08:00:14.177Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 27999.555
}
[2025-10-26T08:00:14.380Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:00:14.611Z] [LOG] Created payroll_record_component: 1a77f052-c65c-402b-bba3-c3441ac8c37e for Attendance Shortfall (Info)
[2025-10-26T08:00:15.076Z] [LOG] ✅ Financial balances updated successfully for employee 01441633-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:15.076Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:00:15.077Z] [LOG] 
======================================================================
[2025-10-26T08:00:15.077Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Viruna Damsiha Cooray null
[2025-10-26T08:00:15.078Z] [LOG] ======================================================================
[2025-10-26T08:00:15.078Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:00:15.078Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-26T08:00:15.079Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T08:00:15.079Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:15.079Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:15.080Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:00:15.080Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:15.080Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-26T08:00:15.081Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:15.081Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:00:15.081Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:00:15.082Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:00:15.082Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:00:15.082Z] [LOG]       - Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T08:00:15.083Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:15.083Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:15.083Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-26T08:00:15.084Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:00:15.084Z] [LOG] ======================================================================

[2025-10-26T08:00:15.084Z] [LOG] ✅ Viruna Damsiha Cooray null: Calculation completed successfully
[2025-10-26T08:00:15.085Z] [LOG] 📊 Progress: 16/34 (47.1%)
[2025-10-26T08:00:15.085Z] [LOG] 
🧮 Processing: Prasanthan null (EMP000001)
[2025-10-26T08:00:15.085Z] [LOG] 📋 Record ID: a2bbe5a1-4255-4517-9203-9aa1f7e05897
[2025-10-26T08:00:15.085Z] [LOG] 
======================================================================
[2025-10-26T08:00:15.086Z] [LOG] 🧮 CALCULATING PAYROLL: Prasanthan null (EMP000001)
[2025-10-26T08:00:15.086Z] [LOG] ======================================================================
[2025-10-26T08:00:16.036Z] [LOG] 🔍 Component filtering for employee 014397c7-7105-11f0-a50f-98e743540430:
[2025-10-26T08:00:16.037Z] [LOG]    Total components: 13
[2025-10-26T08:00:16.037Z] [LOG]    Applicable components: 13
[2025-10-26T08:00:16.038Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-26T08:00:17.316Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:00:17.316Z] [LOG] 🔄 Processing financial records for employee 014397c7-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:00:17.556Z] [LOG] 📊 Found 0 active loans for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:17.742Z] [LOG] 📊 Found 0 active advances for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:17.956Z] [LOG] 📊 Found 0 approved bonuses for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:17.957Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:00:17.957Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:00:18.195Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:00:18.196Z] [LOG]    Employee ID: 014397c7-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:18.197Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:00:18.197Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:00:18.197Z] [LOG]    Base Salary (Full Month): Rs.150000.00
[2025-10-26T08:00:18.436Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:00:18.437Z] [LOG]       Daily Salary: Rs.6000.00
[2025-10-26T08:00:18.437Z] [LOG]       Weekday Hourly Rate: Rs.705.88
[2025-10-26T08:00:18.437Z] [LOG]       Saturday Hourly Rate: Rs.1333.33
[2025-10-26T08:00:18.438Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:00:18.438Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:00:18.438Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:00:19.076Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:00:19.077Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:00:19.309Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:00:19.309Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:00:19.310Z] [LOG]       Total completed sessions found: 6
[2025-10-26T08:00:19.310Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:00:19.310Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:00:19.311Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:00:19.311Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:00:19.311Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:00:19.311Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T08:00:19.312Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:00:19.557Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:00:19.558Z] [LOG]          Weekday: 42.50h
[2025-10-26T08:00:19.558Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:00:19.558Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:00:19.795Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:00:19.796Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:00:19.796Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:00:19.797Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:19.797Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:00:19.797Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:00:19.797Z] [LOG]       Weekday: 42.50h
[2025-10-26T08:00:19.798Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:00:19.798Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:19.798Z] [LOG]       Total Actual: 47.00h
[2025-10-26T08:00:19.799Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:00:19.799Z] [LOG]       Weekday: 136.00h × Rs.705.88 = Rs.95999.68
[2025-10-26T08:00:19.799Z] [LOG]       Saturday: 18.00h × Rs.1333.33 = Rs.23999.94
[2025-10-26T08:00:19.800Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:19.800Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:19.800Z] [LOG]       Total Expected Earned: Rs.119999.62
[2025-10-26T08:00:19.800Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:00:19.801Z] [LOG]       Weekday: 42.50h × Rs.705.88 = Rs.29999.90
[2025-10-26T08:00:19.801Z] [LOG]       Saturday: 4.50h × Rs.1333.33 = Rs.5999.98
[2025-10-26T08:00:19.801Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:19.801Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:19.801Z] [LOG]       Total Actual Earned: Rs.35999.89
[2025-10-26T08:00:19.802Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:00:19.802Z] [LOG]       Calculated At: Oct 26, 2025, 13:30:19
[2025-10-26T08:00:19.802Z] [LOG]       Expected Earned (until NOW): Rs.119999.62
[2025-10-26T08:00:19.802Z] [LOG]       Actual Earned (until NOW): Rs.35999.89
[2025-10-26T08:00:19.802Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:19.803Z] [LOG]       Attendance Deduction: Rs.83999.73
[2025-10-26T08:00:19.803Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:00:19.803Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T08:00:19.803Z] [LOG]    Base Salary (Full): Rs.150000.00
[2025-10-26T08:00:19.803Z] [LOG]    Actual Earned Base: Rs.35999.89
[2025-10-26T08:00:19.803Z] [LOG]    Attendance Shortfall: Rs.83999.73
[2025-10-26T08:00:19.803Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:00:19.803Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:00:19.804Z] [LOG]    Gross Salary: 35999.885
[2025-10-26T08:00:19.804Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:00:19.804Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:00:19.804Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:19.804Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:00:19.804Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:19.804Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:00:19.804Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:19.805Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:00:19.805Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:19.805Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:00:19.805Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:19.805Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:00:19.805Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:19.805Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:00:19.805Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:19.805Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:00:19.805Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:19.805Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:00:19.806Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:19.806Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:00:19.806Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:19.806Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:00:19.806Z] [LOG]    EPF/ETF calculated on: Rs.35999.89
[2025-10-26T08:00:19.806Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:00:19.806Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:00:19.807Z] [LOG] 💰 GROSS CALCULATION for Prasanthan null:
[2025-10-26T08:00:19.807Z] [LOG]    Base Salary: 150000
[2025-10-26T08:00:19.807Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:00:19.807Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:00:19.807Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:19.807Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:00:19.807Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:19.807Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:00:19.807Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:20.036Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:00:20.036Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:20.036Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:00:20.037Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:00:20.037Z] [LOG]    Actual Earned Base: Rs.35999.89
[2025-10-26T08:00:20.037Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:00:20.038Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:00:20.038Z] [LOG]    = Gross Salary: Rs.35999.89
[2025-10-26T08:00:20.038Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:00:20.039Z] [LOG]    Attendance Shortfall (Info): Rs.83999.73
[2025-10-26T08:00:20.039Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:00:20.039Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:20.040Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:00:20.040Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:00:20.040Z] [LOG]    Gross Salary: Rs.35999.89
[2025-10-26T08:00:20.041Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:00:20.041Z] [LOG]    = NET SALARY: Rs.35999.89
[2025-10-26T08:00:20.041Z] [LOG] 
💾 Database Update:
[2025-10-26T08:00:20.042Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:00:20.042Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:00:20.276Z] [LOG] 
📝 Components to save:
[2025-10-26T08:00:20.277Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:00:20.277Z] [LOG]    Deduction components: 1
[2025-10-26T08:00:20.277Z] [LOG] Creating components for record a2bbe5a1-4255-4517-9203-9aa1f7e05897: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:00:20.278Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 35999.885
}
[2025-10-26T08:00:20.475Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:00:20.675Z] [LOG] Created payroll_record_component: 9ced9f43-6056-4515-af48-9da16ad0937c for Base Salary
[2025-10-26T08:00:20.676Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 83999.73499999999
}
[2025-10-26T08:00:20.931Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:00:21.463Z] [LOG] Created payroll_record_component: 85d23ebe-842b-4b01-86c8-2db3740416d1 for Attendance Shortfall (Info)
[2025-10-26T08:00:21.876Z] [LOG] ✅ Financial balances updated successfully for employee 014397c7-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:21.877Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:00:21.877Z] [LOG] 
======================================================================
[2025-10-26T08:00:21.877Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Prasanthan null
[2025-10-26T08:00:21.878Z] [LOG] ======================================================================
[2025-10-26T08:00:21.878Z] [LOG]    Base Salary (Full): Rs.150000.00
[2025-10-26T08:00:21.878Z] [LOG]    Actual Earned Base (Attendance-based): Rs.35999.89
[2025-10-26T08:00:21.879Z] [LOG]    Attendance Shortfall: Rs.83999.73
[2025-10-26T08:00:21.879Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:21.879Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:21.880Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:00:21.880Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:21.880Z] [LOG]    GROSS SALARY: Rs.35999.89
[2025-10-26T08:00:21.881Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:21.881Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:00:21.881Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:00:21.882Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:00:21.882Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:00:21.882Z] [LOG]       - Attendance Shortfall (Info): Rs.83999.73
[2025-10-26T08:00:21.883Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:21.883Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:21.883Z] [LOG]    NET SALARY: Rs.35999.89
[2025-10-26T08:00:21.884Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:00:21.884Z] [LOG] ======================================================================

[2025-10-26T08:00:21.884Z] [LOG] ✅ Prasanthan null: Calculation completed successfully
[2025-10-26T08:00:21.885Z] [LOG] 📊 Progress: 17/34 (50.0%)
[2025-10-26T08:00:21.885Z] [LOG] 
🧮 Processing: Dharshika null (EMP000009)
[2025-10-26T08:00:21.885Z] [LOG] 📋 Record ID: a4df7476-9e76-4ee9-b33c-6c3974d2358c
[2025-10-26T08:00:21.885Z] [LOG] 
======================================================================
[2025-10-26T08:00:21.885Z] [LOG] 🧮 CALCULATING PAYROLL: Dharshika null (EMP000009)
[2025-10-26T08:00:21.886Z] [LOG] ======================================================================
[2025-10-26T08:00:22.661Z] [LOG] 🔍 Component filtering for employee 0143a994-7105-11f0-a50f-98e743540430:
[2025-10-26T08:00:22.661Z] [LOG]    Total components: 13
[2025-10-26T08:00:22.662Z] [LOG]    Applicable components: 13
[2025-10-26T08:00:22.662Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-26T08:00:23.964Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:00:23.964Z] [LOG] 🔄 Processing financial records for employee 0143a994-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:00:24.197Z] [LOG] 📊 Found 0 active loans for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:24.435Z] [LOG] 📊 Found 0 active advances for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:24.684Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:24.684Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:00:24.685Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:00:24.916Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:00:24.916Z] [LOG]    Employee ID: 0143a994-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:24.917Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:00:24.917Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:00:24.917Z] [LOG]    Base Salary (Full Month): Rs.100000.00
[2025-10-26T08:00:25.156Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:00:25.157Z] [LOG]       Daily Salary: Rs.4000.00
[2025-10-26T08:00:25.157Z] [LOG]       Weekday Hourly Rate: Rs.470.59
[2025-10-26T08:00:25.157Z] [LOG]       Saturday Hourly Rate: Rs.888.89
[2025-10-26T08:00:25.158Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:00:25.158Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:00:25.158Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:00:25.838Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:00:25.839Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:00:26.037Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:00:26.038Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:00:26.038Z] [LOG]       Total completed sessions found: 6
[2025-10-26T08:00:26.039Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:00:26.039Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:00:26.039Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:00:26.040Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:00:26.040Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:00:26.040Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T08:00:26.041Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:00:26.276Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:00:26.277Z] [LOG]          Weekday: 42.50h
[2025-10-26T08:00:26.277Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:00:26.278Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:00:26.516Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:00:26.517Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:00:26.517Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:00:26.517Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:26.518Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:00:26.518Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:00:26.518Z] [LOG]       Weekday: 42.50h
[2025-10-26T08:00:26.519Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:00:26.519Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:26.519Z] [LOG]       Total Actual: 47.00h
[2025-10-26T08:00:26.520Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:00:26.520Z] [LOG]       Weekday: 136.00h × Rs.470.59 = Rs.64000.24
[2025-10-26T08:00:26.520Z] [LOG]       Saturday: 18.00h × Rs.888.89 = Rs.16000.02
[2025-10-26T08:00:26.521Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:26.521Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:26.521Z] [LOG]       Total Expected Earned: Rs.80000.26
[2025-10-26T08:00:26.522Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:00:26.522Z] [LOG]       Weekday: 42.50h × Rs.470.59 = Rs.20000.08
[2025-10-26T08:00:26.522Z] [LOG]       Saturday: 4.50h × Rs.888.89 = Rs.4000.01
[2025-10-26T08:00:26.523Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:26.523Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:26.523Z] [LOG]       Total Actual Earned: Rs.24000.08
[2025-10-26T08:00:26.524Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:00:26.524Z] [LOG]       Calculated At: Oct 26, 2025, 13:30:26
[2025-10-26T08:00:26.525Z] [LOG]       Expected Earned (until NOW): Rs.80000.26
[2025-10-26T08:00:26.525Z] [LOG]       Actual Earned (until NOW): Rs.24000.08
[2025-10-26T08:00:26.525Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:26.526Z] [LOG]       Attendance Deduction: Rs.56000.18
[2025-10-26T08:00:26.526Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:00:26.526Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T08:00:26.527Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-26T08:00:26.527Z] [LOG]    Actual Earned Base: Rs.24000.08
[2025-10-26T08:00:26.527Z] [LOG]    Attendance Shortfall: Rs.56000.18
[2025-10-26T08:00:26.527Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:00:26.527Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:00:26.527Z] [LOG]    Gross Salary: 24000.08
[2025-10-26T08:00:26.528Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:00:26.528Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:00:26.528Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:26.528Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:00:26.529Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:26.529Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:00:26.530Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:26.530Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:00:26.530Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:26.530Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:00:26.531Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:26.531Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:00:26.531Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:26.531Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:00:26.531Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:26.531Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:00:26.531Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:26.532Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:00:26.532Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:26.532Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:00:26.532Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:26.533Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:00:26.533Z] [LOG]    EPF/ETF calculated on: Rs.24000.08
[2025-10-26T08:00:26.533Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:00:26.533Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:00:26.533Z] [LOG] 💰 GROSS CALCULATION for Dharshika null:
[2025-10-26T08:00:26.533Z] [LOG]    Base Salary: 100000
[2025-10-26T08:00:26.533Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:00:26.533Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:00:26.534Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:26.534Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:00:26.534Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:26.534Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:00:26.534Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:26.757Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:00:26.757Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:26.758Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:00:26.758Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:00:26.758Z] [LOG]    Actual Earned Base: Rs.24000.08
[2025-10-26T08:00:26.759Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:00:26.759Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:00:26.759Z] [LOG]    = Gross Salary: Rs.24000.08
[2025-10-26T08:00:26.760Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:00:26.760Z] [LOG]    Attendance Shortfall (Info): Rs.56000.18
[2025-10-26T08:00:26.760Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:00:26.761Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:26.761Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:00:26.761Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:00:26.762Z] [LOG]    Gross Salary: Rs.24000.08
[2025-10-26T08:00:26.762Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:00:26.762Z] [LOG]    = NET SALARY: Rs.24000.08
[2025-10-26T08:00:26.763Z] [LOG] 
💾 Database Update:
[2025-10-26T08:00:26.763Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:00:26.763Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:00:27.020Z] [LOG] 
📝 Components to save:
[2025-10-26T08:00:27.021Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:00:27.021Z] [LOG]    Deduction components: 1
[2025-10-26T08:00:27.022Z] [LOG] Creating components for record a4df7476-9e76-4ee9-b33c-6c3974d2358c: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:00:27.022Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 24000.08
}
[2025-10-26T08:00:27.236Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:00:27.476Z] [LOG] Created payroll_record_component: e205c768-3c61-4915-a73a-e35e992cb67a for Base Salary
[2025-10-26T08:00:27.477Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 56000.17999999999
}
[2025-10-26T08:00:27.668Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:00:27.876Z] [LOG] Created payroll_record_component: edea0c7f-783b-4cd9-9b43-186530d7cba5 for Attendance Shortfall (Info)
[2025-10-26T08:00:28.357Z] [LOG] ✅ Financial balances updated successfully for employee 0143a994-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:28.357Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:00:28.357Z] [LOG] 
======================================================================
[2025-10-26T08:00:28.358Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Dharshika null
[2025-10-26T08:00:28.358Z] [LOG] ======================================================================
[2025-10-26T08:00:28.359Z] [LOG]    Base Salary (Full): Rs.100000.00
[2025-10-26T08:00:28.359Z] [LOG]    Actual Earned Base (Attendance-based): Rs.24000.08
[2025-10-26T08:00:28.359Z] [LOG]    Attendance Shortfall: Rs.56000.18
[2025-10-26T08:00:28.360Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:28.360Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:28.360Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:00:28.361Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:28.361Z] [LOG]    GROSS SALARY: Rs.24000.08
[2025-10-26T08:00:28.361Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:28.362Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:00:28.362Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:00:28.362Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:00:28.363Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:00:28.363Z] [LOG]       - Attendance Shortfall (Info): Rs.56000.18
[2025-10-26T08:00:28.363Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:28.363Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:28.364Z] [LOG]    NET SALARY: Rs.24000.08
[2025-10-26T08:00:28.364Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:00:28.365Z] [LOG] ======================================================================

[2025-10-26T08:00:28.365Z] [LOG] ✅ Dharshika null: Calculation completed successfully
[2025-10-26T08:00:28.365Z] [LOG] 📊 Progress: 18/34 (52.9%)
[2025-10-26T08:00:28.366Z] [LOG] 
🧮 Processing: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-26T08:00:28.366Z] [LOG] 📋 Record ID: a53bbf7f-b56d-4865-b61d-720e0149e7b6
[2025-10-26T08:00:28.366Z] [LOG] 
======================================================================
[2025-10-26T08:00:28.366Z] [LOG] 🧮 CALCULATING PAYROLL: Ashen Nirmal Wadugodapitiya null (EMP000046)
[2025-10-26T08:00:28.367Z] [LOG] ======================================================================
[2025-10-26T08:00:29.236Z] [LOG] 🔍 Component filtering for employee 0144461e-7105-11f0-a50f-98e743540430:
[2025-10-26T08:00:29.237Z] [LOG]    Total components: 13
[2025-10-26T08:00:29.237Z] [LOG]    Applicable components: 13
[2025-10-26T08:00:29.237Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-26T08:00:30.644Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:00:30.645Z] [LOG] 🔄 Processing financial records for employee 0144461e-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:00:30.839Z] [LOG] 📊 Found 0 active loans for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:31.033Z] [LOG] 📊 Found 0 active advances for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:31.243Z] [LOG] 📊 Found 0 approved bonuses for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:31.243Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:00:31.244Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:00:31.467Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:00:31.468Z] [LOG]    Employee ID: 0144461e-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:31.468Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:00:31.468Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:00:31.469Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-26T08:00:31.716Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:00:31.716Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-26T08:00:31.717Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-26T08:00:31.717Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-26T08:00:31.717Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:00:31.717Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:00:31.718Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:00:32.465Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:00:32.466Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:00:32.663Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:00:32.663Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:00:32.664Z] [LOG]       Total completed sessions found: 5
[2025-10-26T08:00:32.664Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:00:32.664Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:00:32.664Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:00:32.665Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:00:32.665Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:00:32.665Z] [LOG]          5. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:00:33.134Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:00:33.135Z] [LOG]          Weekday: 34.00h
[2025-10-26T08:00:33.135Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:00:33.135Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:00:33.334Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:00:33.335Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:00:33.335Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:00:33.335Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:33.336Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:00:33.336Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:00:33.336Z] [LOG]       Weekday: 34.00h
[2025-10-26T08:00:33.336Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:00:33.337Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:33.337Z] [LOG]       Total Actual: 38.50h
[2025-10-26T08:00:33.337Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:00:33.337Z] [LOG]       Weekday: 136.00h × Rs.235.29 = Rs.31999.44
[2025-10-26T08:00:33.338Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-26T08:00:33.338Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:33.338Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:33.338Z] [LOG]       Total Expected Earned: Rs.39999.36
[2025-10-26T08:00:33.339Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:00:33.339Z] [LOG]       Weekday: 34.00h × Rs.235.29 = Rs.7999.86
[2025-10-26T08:00:33.339Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-26T08:00:33.340Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:33.340Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:33.340Z] [LOG]       Total Actual Earned: Rs.9999.84
[2025-10-26T08:00:33.341Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:00:33.341Z] [LOG]       Calculated At: Oct 26, 2025, 13:30:33
[2025-10-26T08:00:33.341Z] [LOG]       Expected Earned (until NOW): Rs.39999.36
[2025-10-26T08:00:33.341Z] [LOG]       Actual Earned (until NOW): Rs.9999.84
[2025-10-26T08:00:33.341Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:33.341Z] [LOG]       Attendance Deduction: Rs.29999.52
[2025-10-26T08:00:33.342Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:00:33.342Z] [LOG]       📉 Shortfall: 115.50 hours (75.00% of expected)
[2025-10-26T08:00:33.342Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:00:33.342Z] [LOG]    Actual Earned Base: Rs.9999.84
[2025-10-26T08:00:33.342Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-26T08:00:33.342Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:00:33.342Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:00:33.342Z] [LOG]    Gross Salary: 9999.84
[2025-10-26T08:00:33.343Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:00:33.343Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:00:33.343Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:33.343Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:00:33.343Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:33.343Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:00:33.343Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:33.343Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:00:33.343Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:33.344Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:00:33.344Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:33.344Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:00:33.344Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:33.344Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:00:33.344Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:33.344Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:00:33.344Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:33.344Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:00:33.344Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:33.344Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:00:33.345Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:33.345Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:00:33.345Z] [LOG]    EPF/ETF calculated on: Rs.9999.84
[2025-10-26T08:00:33.345Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:00:33.345Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:00:33.345Z] [LOG] 💰 GROSS CALCULATION for Ashen Nirmal Wadugodapitiya null:
[2025-10-26T08:00:33.345Z] [LOG]    Base Salary: 50000
[2025-10-26T08:00:33.345Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:00:33.345Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:00:33.345Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:33.345Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:00:33.345Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:33.345Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:00:33.346Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:33.533Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:00:33.533Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:33.533Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:00:33.534Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:00:33.534Z] [LOG]    Actual Earned Base: Rs.9999.84
[2025-10-26T08:00:33.534Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:00:33.534Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:00:33.535Z] [LOG]    = Gross Salary: Rs.9999.84
[2025-10-26T08:00:33.535Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:00:33.535Z] [LOG]    Attendance Shortfall (Info): Rs.29999.52
[2025-10-26T08:00:33.536Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:00:33.536Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:33.536Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:00:33.536Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:00:33.537Z] [LOG]    Gross Salary: Rs.9999.84
[2025-10-26T08:00:33.537Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:00:33.537Z] [LOG]    = NET SALARY: Rs.9999.84
[2025-10-26T08:00:33.537Z] [LOG] 
💾 Database Update:
[2025-10-26T08:00:33.538Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:00:33.538Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:00:33.804Z] [LOG] 
📝 Components to save:
[2025-10-26T08:00:33.804Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:00:33.805Z] [LOG]    Deduction components: 1
[2025-10-26T08:00:33.805Z] [LOG] Creating components for record a53bbf7f-b56d-4865-b61d-720e0149e7b6: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:00:33.806Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 9999.84
}
[2025-10-26T08:00:34.035Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:00:34.309Z] [LOG] Created payroll_record_component: 5e4d3fc9-d4b9-4504-859c-be8354af63a1 for Base Salary
[2025-10-26T08:00:34.309Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 29999.52
}
[2025-10-26T08:00:34.515Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:00:34.730Z] [LOG] Created payroll_record_component: 2bb5daa1-a010-4268-b942-f8ea5b9bbb15 for Attendance Shortfall (Info)
[2025-10-26T08:00:35.157Z] [LOG] ✅ Financial balances updated successfully for employee 0144461e-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:35.157Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:00:35.158Z] [LOG] 
======================================================================
[2025-10-26T08:00:35.158Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ashen Nirmal Wadugodapitiya null
[2025-10-26T08:00:35.158Z] [LOG] ======================================================================
[2025-10-26T08:00:35.159Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:00:35.159Z] [LOG]    Actual Earned Base (Attendance-based): Rs.9999.84
[2025-10-26T08:00:35.159Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-26T08:00:35.160Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:35.160Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:35.160Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:00:35.161Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:35.161Z] [LOG]    GROSS SALARY: Rs.9999.84
[2025-10-26T08:00:35.161Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:35.162Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:00:35.162Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:00:35.162Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:00:35.162Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:00:35.163Z] [LOG]       - Attendance Shortfall (Info): Rs.29999.52
[2025-10-26T08:00:35.163Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:35.163Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:35.163Z] [LOG]    NET SALARY: Rs.9999.84
[2025-10-26T08:00:35.164Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:00:35.164Z] [LOG] ======================================================================

[2025-10-26T08:00:35.164Z] [LOG] ✅ Ashen Nirmal Wadugodapitiya null: Calculation completed successfully
[2025-10-26T08:00:35.165Z] [LOG] 📊 Progress: 19/34 (55.9%)
[2025-10-26T08:00:35.165Z] [LOG] 
🧮 Processing: Franklin null (EMP000018)
[2025-10-26T08:00:35.165Z] [LOG] 📋 Record ID: bf4bedea-1017-495b-bb65-8f5372c75085
[2025-10-26T08:00:35.165Z] [LOG] 
======================================================================
[2025-10-26T08:00:35.165Z] [LOG] 🧮 CALCULATING PAYROLL: Franklin null (EMP000018)
[2025-10-26T08:00:35.166Z] [LOG] ======================================================================
[2025-10-26T08:00:36.030Z] [LOG] 🔍 Component filtering for employee 0143c037-7105-11f0-a50f-98e743540430:
[2025-10-26T08:00:36.030Z] [LOG]    Total components: 13
[2025-10-26T08:00:36.031Z] [LOG]    Applicable components: 13
[2025-10-26T08:00:36.031Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-26T08:00:37.557Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:00:37.557Z] [LOG] 🔄 Processing financial records for employee 0143c037-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:00:37.803Z] [LOG] 📊 Found 0 active loans for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:38.037Z] [LOG] 📊 Found 0 active advances for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:38.276Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:38.277Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:00:38.277Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:00:38.525Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:00:38.525Z] [LOG]    Employee ID: 0143c037-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:38.526Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:00:38.526Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:00:38.526Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-26T08:00:38.756Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:00:38.757Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-26T08:00:38.757Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-26T08:00:38.757Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-26T08:00:38.758Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:00:38.758Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:00:38.758Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:00:39.556Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:00:39.556Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:00:39.797Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:00:39.797Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:00:39.798Z] [LOG]       Total completed sessions found: 6
[2025-10-26T08:00:39.798Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:00:39.798Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:00:39.799Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:00:39.799Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:00:39.799Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:00:39.800Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T08:00:39.800Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:00:40.052Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:00:40.052Z] [LOG]          Weekday: 42.50h
[2025-10-26T08:00:40.053Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:00:40.053Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:00:40.293Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:00:40.293Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:00:40.294Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:00:40.294Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:40.294Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:00:40.295Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:00:40.295Z] [LOG]       Weekday: 42.50h
[2025-10-26T08:00:40.295Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:00:40.295Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:40.296Z] [LOG]       Total Actual: 47.00h
[2025-10-26T08:00:40.296Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:00:40.296Z] [LOG]       Weekday: 136.00h × Rs.235.29 = Rs.31999.44
[2025-10-26T08:00:40.297Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-26T08:00:40.297Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:40.297Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:40.298Z] [LOG]       Total Expected Earned: Rs.39999.36
[2025-10-26T08:00:40.298Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:00:40.298Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-26T08:00:40.299Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-26T08:00:40.299Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:40.299Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:40.299Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-26T08:00:40.300Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:00:40.301Z] [LOG]       Calculated At: Oct 26, 2025, 13:30:40
[2025-10-26T08:00:40.301Z] [LOG]       Expected Earned (until NOW): Rs.39999.36
[2025-10-26T08:00:40.301Z] [LOG]       Actual Earned (until NOW): Rs.11999.80
[2025-10-26T08:00:40.301Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:40.302Z] [LOG]       Attendance Deduction: Rs.27999.56
[2025-10-26T08:00:40.302Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:00:40.302Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T08:00:40.302Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:00:40.302Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T08:00:40.303Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T08:00:40.303Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:00:40.303Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:00:40.303Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-26T08:00:40.303Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:00:40.303Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:00:40.303Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:40.304Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:00:40.304Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:40.304Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:00:40.304Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:40.305Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:00:40.305Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:40.306Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:00:40.306Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:40.306Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:00:40.306Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:40.306Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:00:40.306Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:40.306Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:00:40.307Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:40.307Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:00:40.307Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:40.307Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:00:40.307Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:40.307Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:00:40.307Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-26T08:00:40.307Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:00:40.308Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:00:40.308Z] [LOG] 💰 GROSS CALCULATION for Franklin null:
[2025-10-26T08:00:40.308Z] [LOG]    Base Salary: 50000
[2025-10-26T08:00:40.308Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:00:40.308Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:00:40.308Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:40.308Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:00:40.309Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:40.309Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:00:40.309Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:40.516Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:00:40.517Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:40.517Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:00:40.517Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:00:40.518Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T08:00:40.518Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:00:40.518Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:00:40.519Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-26T08:00:40.519Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:00:40.519Z] [LOG]    Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T08:00:40.520Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:00:40.520Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:40.520Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:00:40.521Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:00:40.521Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-26T08:00:40.521Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:00:40.522Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-26T08:00:40.522Z] [LOG] 
💾 Database Update:
[2025-10-26T08:00:40.522Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:00:40.523Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:00:40.755Z] [LOG] 
📝 Components to save:
[2025-10-26T08:00:40.756Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:00:40.756Z] [LOG]    Deduction components: 1
[2025-10-26T08:00:40.757Z] [LOG] Creating components for record bf4bedea-1017-495b-bb65-8f5372c75085: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:00:40.757Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-26T08:00:40.996Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:00:41.236Z] [LOG] Created payroll_record_component: 275d6a5c-6ba3-4f67-813c-a86d2e077a87 for Base Salary
[2025-10-26T08:00:41.237Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 27999.555
}
[2025-10-26T08:00:41.476Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:00:41.715Z] [LOG] Created payroll_record_component: db4bd7e5-17c8-481e-a160-ff083882bf2f for Attendance Shortfall (Info)
[2025-10-26T08:00:42.206Z] [LOG] ✅ Financial balances updated successfully for employee 0143c037-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:42.207Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:00:42.208Z] [LOG] 
======================================================================
[2025-10-26T08:00:42.211Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Franklin null
[2025-10-26T08:00:42.211Z] [LOG] ======================================================================
[2025-10-26T08:00:42.211Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:00:42.212Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-26T08:00:42.212Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T08:00:42.212Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:42.213Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:42.213Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:00:42.213Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:42.213Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-26T08:00:42.214Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:42.214Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:00:42.214Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:00:42.214Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:00:42.215Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:00:42.215Z] [LOG]       - Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T08:00:42.215Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:42.216Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:42.216Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-26T08:00:42.216Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:00:42.216Z] [LOG] ======================================================================

[2025-10-26T08:00:42.216Z] [LOG] ✅ Franklin null: Calculation completed successfully
[2025-10-26T08:00:42.216Z] [LOG] 📊 Progress: 20/34 (58.8%)
[2025-10-26T08:00:42.217Z] [LOG] 
🧮 Processing: Anoj null (EMP000014)
[2025-10-26T08:00:42.217Z] [LOG] 📋 Record ID: c75b46f2-db1e-4189-83e0-05b37bcdab64
[2025-10-26T08:00:42.217Z] [LOG] 
======================================================================
[2025-10-26T08:00:42.217Z] [LOG] 🧮 CALCULATING PAYROLL: Anoj null (EMP000014)
[2025-10-26T08:00:42.218Z] [LOG] ======================================================================
[2025-10-26T08:00:43.084Z] [LOG] 🔍 Component filtering for employee 0143afc6-7105-11f0-a50f-98e743540430:
[2025-10-26T08:00:43.084Z] [LOG]    Total components: 13
[2025-10-26T08:00:43.085Z] [LOG]    Applicable components: 13
[2025-10-26T08:00:43.085Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-26T08:00:44.436Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:00:44.436Z] [LOG] 🔄 Processing financial records for employee 0143afc6-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:00:44.676Z] [LOG] 📊 Found 0 active loans for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:44.916Z] [LOG] 📊 Found 0 active advances for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:45.157Z] [LOG] 📊 Found 0 approved bonuses for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:45.157Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:00:45.158Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:00:45.410Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:00:45.410Z] [LOG]    Employee ID: 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:45.410Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:00:45.411Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:00:45.411Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-26T08:00:45.636Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:00:45.636Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-26T08:00:45.636Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-26T08:00:45.637Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-26T08:00:45.637Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:00:45.637Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:00:45.638Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:00:46.263Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:00:46.264Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:00:46.597Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:00:46.597Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:00:46.598Z] [LOG]       Total completed sessions found: 6
[2025-10-26T08:00:46.598Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:00:46.598Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:00:46.599Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:00:46.599Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:00:46.599Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:00:46.600Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T08:00:46.600Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:00:46.844Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:00:46.845Z] [LOG]          Weekday: 42.50h
[2025-10-26T08:00:46.845Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:00:46.845Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:00:47.084Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:00:47.085Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:00:47.085Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:00:47.085Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:47.086Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:00:47.086Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:00:47.086Z] [LOG]       Weekday: 42.50h
[2025-10-26T08:00:47.087Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:00:47.087Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:47.088Z] [LOG]       Total Actual: 47.00h
[2025-10-26T08:00:47.088Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:00:47.088Z] [LOG]       Weekday: 136.00h × Rs.235.29 = Rs.31999.44
[2025-10-26T08:00:47.088Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-26T08:00:47.089Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:47.089Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:47.089Z] [LOG]       Total Expected Earned: Rs.39999.36
[2025-10-26T08:00:47.090Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:00:47.090Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-26T08:00:47.090Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-26T08:00:47.091Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:47.091Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:47.091Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-26T08:00:47.092Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:00:47.092Z] [LOG]       Calculated At: Oct 26, 2025, 13:30:47
[2025-10-26T08:00:47.092Z] [LOG]       Expected Earned (until NOW): Rs.39999.36
[2025-10-26T08:00:47.093Z] [LOG]       Actual Earned (until NOW): Rs.11999.80
[2025-10-26T08:00:47.093Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:47.093Z] [LOG]       Attendance Deduction: Rs.27999.56
[2025-10-26T08:00:47.093Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:00:47.093Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T08:00:47.093Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:00:47.093Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T08:00:47.093Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T08:00:47.093Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:00:47.093Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:00:47.093Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-26T08:00:47.094Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:00:47.094Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:00:47.094Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:47.094Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:00:47.094Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:47.094Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:00:47.094Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:47.094Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:00:47.095Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:47.095Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:00:47.095Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:47.095Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:00:47.096Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:47.096Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:00:47.096Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:47.096Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:00:47.096Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:47.096Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:00:47.096Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:47.097Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:00:47.097Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:47.097Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:00:47.097Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-26T08:00:47.097Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:00:47.097Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:00:47.097Z] [LOG] 💰 GROSS CALCULATION for Anoj null:
[2025-10-26T08:00:47.097Z] [LOG]    Base Salary: 50000
[2025-10-26T08:00:47.097Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:00:47.097Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:00:47.097Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:47.098Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:00:47.098Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:47.098Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:00:47.098Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:47.556Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:00:47.556Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:47.557Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:00:47.557Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:00:47.557Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T08:00:47.558Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:00:47.558Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:00:47.558Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-26T08:00:47.559Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:00:47.559Z] [LOG]    Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T08:00:47.559Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:00:47.560Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:47.560Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:00:47.560Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:00:47.561Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-26T08:00:47.561Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:00:47.561Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-26T08:00:47.562Z] [LOG] 
💾 Database Update:
[2025-10-26T08:00:47.562Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:00:47.562Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:00:47.771Z] [LOG] 
📝 Components to save:
[2025-10-26T08:00:47.771Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:00:47.771Z] [LOG]    Deduction components: 1
[2025-10-26T08:00:47.772Z] [LOG] Creating components for record c75b46f2-db1e-4189-83e0-05b37bcdab64: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:00:47.772Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-26T08:00:48.203Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:00:48.414Z] [LOG] Created payroll_record_component: 9555ef59-f3bb-4cf8-89e3-e55479bfd929 for Base Salary
[2025-10-26T08:00:48.414Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 27999.555
}
[2025-10-26T08:00:48.716Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:00:49.152Z] [LOG] Created payroll_record_component: 7bc44d5c-a3d8-4c3a-bcaa-4eca59f14f3c for Attendance Shortfall (Info)
[2025-10-26T08:00:49.574Z] [LOG] ✅ Financial balances updated successfully for employee 0143afc6-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:49.574Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:00:49.575Z] [LOG] 
======================================================================
[2025-10-26T08:00:49.575Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Anoj null
[2025-10-26T08:00:49.575Z] [LOG] ======================================================================
[2025-10-26T08:00:49.575Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:00:49.575Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-26T08:00:49.576Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T08:00:49.576Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:49.576Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:49.576Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:00:49.577Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:49.577Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-26T08:00:49.577Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:49.577Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:00:49.577Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:00:49.578Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:00:49.578Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:00:49.578Z] [LOG]       - Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T08:00:49.578Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:49.579Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:49.579Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-26T08:00:49.579Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:00:49.579Z] [LOG] ======================================================================

[2025-10-26T08:00:49.579Z] [LOG] ✅ Anoj null: Calculation completed successfully
[2025-10-26T08:00:49.579Z] [LOG] 📊 Progress: 21/34 (61.8%)
[2025-10-26T08:00:49.580Z] [LOG] 
🧮 Processing: Nimdiya Ranasinghe null (EMP000045)
[2025-10-26T08:00:49.580Z] [LOG] 📋 Record ID: c9038fa3-a2a1-4567-a5b5-7bf578f4eb99
[2025-10-26T08:00:49.580Z] [LOG] 
======================================================================
[2025-10-26T08:00:49.580Z] [LOG] 🧮 CALCULATING PAYROLL: Nimdiya Ranasinghe null (EMP000045)
[2025-10-26T08:00:49.580Z] [LOG] ======================================================================
[2025-10-26T08:00:50.405Z] [LOG] 🔍 Component filtering for employee 01444074-7105-11f0-a50f-98e743540430:
[2025-10-26T08:00:50.406Z] [LOG]    Total components: 13
[2025-10-26T08:00:50.406Z] [LOG]    Applicable components: 13
[2025-10-26T08:00:50.406Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-26T08:00:51.637Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:00:51.637Z] [LOG] 🔄 Processing financial records for employee 01444074-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:00:51.884Z] [LOG] 📊 Found 0 active loans for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:52.124Z] [LOG] 📊 Found 0 active advances for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:52.357Z] [LOG] 📊 Found 0 approved bonuses for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:52.357Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:00:52.358Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:00:52.613Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:00:52.614Z] [LOG]    Employee ID: 01444074-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:52.614Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:00:52.614Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:00:52.615Z] [LOG]    Base Salary (Full Month): Rs.35000.00
[2025-10-26T08:00:52.836Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:00:52.837Z] [LOG]       Daily Salary: Rs.1400.00
[2025-10-26T08:00:52.837Z] [LOG]       Weekday Hourly Rate: Rs.164.71
[2025-10-26T08:00:52.838Z] [LOG]       Saturday Hourly Rate: Rs.311.11
[2025-10-26T08:00:52.838Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:00:52.838Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:00:52.839Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:00:53.485Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:00:53.485Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:00:53.716Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:00:53.717Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:00:53.717Z] [LOG]       Total completed sessions found: 5
[2025-10-26T08:00:53.718Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:00:53.718Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:00:53.718Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:00:53.718Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:00:53.719Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:00:53.719Z] [LOG]          5. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:00:53.929Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:00:53.930Z] [LOG]          Weekday: 34.00h
[2025-10-26T08:00:53.930Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:00:53.930Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:00:54.132Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:00:54.133Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:00:54.133Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:00:54.133Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:54.134Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:00:54.134Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:00:54.134Z] [LOG]       Weekday: 34.00h
[2025-10-26T08:00:54.135Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:00:54.135Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:00:54.135Z] [LOG]       Total Actual: 38.50h
[2025-10-26T08:00:54.136Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:00:54.136Z] [LOG]       Weekday: 136.00h × Rs.164.71 = Rs.22400.56
[2025-10-26T08:00:54.136Z] [LOG]       Saturday: 18.00h × Rs.311.11 = Rs.5599.98
[2025-10-26T08:00:54.137Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:54.137Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:54.137Z] [LOG]       Total Expected Earned: Rs.28000.54
[2025-10-26T08:00:54.138Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:00:54.138Z] [LOG]       Weekday: 34.00h × Rs.164.71 = Rs.5600.14
[2025-10-26T08:00:54.138Z] [LOG]       Saturday: 4.50h × Rs.311.11 = Rs.1400.00
[2025-10-26T08:00:54.138Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:00:54.139Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:54.139Z] [LOG]       Total Actual Earned: Rs.7000.14
[2025-10-26T08:00:54.140Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:00:54.140Z] [LOG]       Calculated At: Oct 26, 2025, 13:30:54
[2025-10-26T08:00:54.140Z] [LOG]       Expected Earned (until NOW): Rs.28000.54
[2025-10-26T08:00:54.141Z] [LOG]       Actual Earned (until NOW): Rs.7000.14
[2025-10-26T08:00:54.141Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:00:54.141Z] [LOG]       Attendance Deduction: Rs.21000.40
[2025-10-26T08:00:54.142Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:00:54.142Z] [LOG]       📉 Shortfall: 115.50 hours (75.00% of expected)
[2025-10-26T08:00:54.142Z] [LOG]    Base Salary (Full): Rs.35000.00
[2025-10-26T08:00:54.143Z] [LOG]    Actual Earned Base: Rs.7000.14
[2025-10-26T08:00:54.143Z] [LOG]    Attendance Shortfall: Rs.21000.40
[2025-10-26T08:00:54.143Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:00:54.143Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:00:54.143Z] [LOG]    Gross Salary: 7000.135
[2025-10-26T08:00:54.143Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:00:54.143Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:00:54.144Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:54.144Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:00:54.144Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:54.144Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:00:54.145Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:54.145Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:00:54.145Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:54.145Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:00:54.145Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:54.146Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:00:54.146Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:54.146Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:00:54.146Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:54.146Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:00:54.146Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:54.146Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:00:54.146Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:54.147Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:00:54.147Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:54.147Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:00:54.147Z] [LOG]    EPF/ETF calculated on: Rs.7000.14
[2025-10-26T08:00:54.147Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:00:54.147Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:00:54.147Z] [LOG] 💰 GROSS CALCULATION for Nimdiya Ranasinghe null:
[2025-10-26T08:00:54.147Z] [LOG]    Base Salary: 35000
[2025-10-26T08:00:54.147Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:00:54.147Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:00:54.147Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:54.147Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:00:54.147Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:54.147Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:00:54.147Z] [LOG]    Fixed amount: 0
[2025-10-26T08:00:54.359Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:00:54.360Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:54.360Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:00:54.360Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:00:54.361Z] [LOG]    Actual Earned Base: Rs.7000.14
[2025-10-26T08:00:54.361Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:00:54.361Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:00:54.362Z] [LOG]    = Gross Salary: Rs.7000.14
[2025-10-26T08:00:54.362Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:00:54.362Z] [LOG]    Attendance Shortfall (Info): Rs.21000.40
[2025-10-26T08:00:54.363Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:00:54.363Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:54.363Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:00:54.364Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:00:54.364Z] [LOG]    Gross Salary: Rs.7000.14
[2025-10-26T08:00:54.364Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:00:54.365Z] [LOG]    = NET SALARY: Rs.7000.14
[2025-10-26T08:00:54.365Z] [LOG] 
💾 Database Update:
[2025-10-26T08:00:54.365Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:00:54.366Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:00:54.596Z] [LOG] 
📝 Components to save:
[2025-10-26T08:00:54.597Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:00:54.597Z] [LOG]    Deduction components: 1
[2025-10-26T08:00:54.597Z] [LOG] Creating components for record c9038fa3-a2a1-4567-a5b5-7bf578f4eb99: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:00:54.598Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 7000.135
}
[2025-10-26T08:00:54.836Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:00:55.076Z] [LOG] Created payroll_record_component: 901724b8-96c5-4335-b2e6-8704ca4961c6 for Base Salary
[2025-10-26T08:00:55.076Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 21000.405
}
[2025-10-26T08:00:55.316Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:00:55.510Z] [LOG] Created payroll_record_component: bf67744a-4d8e-44df-b559-a43d36579570 for Attendance Shortfall (Info)
[2025-10-26T08:00:55.973Z] [LOG] ✅ Financial balances updated successfully for employee 01444074-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:55.973Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:00:55.974Z] [LOG] 
======================================================================
[2025-10-26T08:00:55.974Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Nimdiya Ranasinghe null
[2025-10-26T08:00:55.975Z] [LOG] ======================================================================
[2025-10-26T08:00:55.975Z] [LOG]    Base Salary (Full): Rs.35000.00
[2025-10-26T08:00:55.975Z] [LOG]    Actual Earned Base (Attendance-based): Rs.7000.14
[2025-10-26T08:00:55.975Z] [LOG]    Attendance Shortfall: Rs.21000.40
[2025-10-26T08:00:55.976Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:55.976Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:00:55.976Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:00:55.977Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:55.977Z] [LOG]    GROSS SALARY: Rs.7000.14
[2025-10-26T08:00:55.977Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:55.978Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:00:55.978Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:00:55.979Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:00:55.979Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:00:55.979Z] [LOG]       - Attendance Shortfall (Info): Rs.21000.40
[2025-10-26T08:00:55.979Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:00:55.980Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:00:55.980Z] [LOG]    NET SALARY: Rs.7000.14
[2025-10-26T08:00:55.980Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:00:55.981Z] [LOG] ======================================================================

[2025-10-26T08:00:55.981Z] [LOG] ✅ Nimdiya Ranasinghe null: Calculation completed successfully
[2025-10-26T08:00:55.981Z] [LOG] 📊 Progress: 22/34 (64.7%)
[2025-10-26T08:00:55.982Z] [LOG] 
🧮 Processing: Faizan Faizan (EMP000003)
[2025-10-26T08:00:55.982Z] [LOG] 📋 Record ID: cecc43f0-eebc-4812-a241-fd050ff31d13
[2025-10-26T08:00:55.982Z] [LOG] 
======================================================================
[2025-10-26T08:00:55.983Z] [LOG] 🧮 CALCULATING PAYROLL: Faizan Faizan (EMP000003)
[2025-10-26T08:00:55.983Z] [LOG] ======================================================================
[2025-10-26T08:00:56.918Z] [LOG] 🔍 Component filtering for employee 0143a057-7105-11f0-a50f-98e743540430:
[2025-10-26T08:00:56.918Z] [LOG]    Total components: 13
[2025-10-26T08:00:56.918Z] [LOG]    Applicable components: 13
[2025-10-26T08:00:56.919Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-26T08:00:58.846Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:00:58.847Z] [LOG] 🔄 Processing financial records for employee 0143a057-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:00:59.078Z] [LOG] 📊 Found 0 active loans for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:59.324Z] [LOG] 📊 Found 0 active advances for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:59.556Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:59.556Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:00:59.557Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:00:59.796Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:00:59.797Z] [LOG]    Employee ID: 0143a057-7105-11f0-a50f-98e743540430
[2025-10-26T08:00:59.797Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:00:59.797Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:00:59.798Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-26T08:01:00.044Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:01:00.045Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-26T08:01:00.045Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-26T08:01:00.046Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-26T08:01:00.046Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:01:00.046Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:01:00.047Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:00.756Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:01:00.757Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:00.996Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:01:00.997Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:01:00.997Z] [LOG]       Total completed sessions found: 5
[2025-10-26T08:01:00.997Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:01:00.998Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:01:00.998Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:01:00.998Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:01:00.999Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:01:00.999Z] [LOG]          5. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:01:01.236Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:01:01.236Z] [LOG]          Weekday: 34.00h
[2025-10-26T08:01:01.237Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:01:01.237Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:01:01.476Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:01:01.476Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:01:01.477Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:01:01.477Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:01.477Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:01:01.477Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:01:01.477Z] [LOG]       Weekday: 34.00h
[2025-10-26T08:01:01.477Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:01:01.478Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:01.478Z] [LOG]       Total Actual: 38.50h
[2025-10-26T08:01:01.478Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:01:01.478Z] [LOG]       Weekday: 136.00h × Rs.235.29 = Rs.31999.44
[2025-10-26T08:01:01.478Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-26T08:01:01.478Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:01.478Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:01.479Z] [LOG]       Total Expected Earned: Rs.39999.36
[2025-10-26T08:01:01.479Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:01:01.479Z] [LOG]       Weekday: 34.00h × Rs.235.29 = Rs.7999.86
[2025-10-26T08:01:01.479Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-26T08:01:01.479Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:01.480Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:01.480Z] [LOG]       Total Actual Earned: Rs.9999.84
[2025-10-26T08:01:01.481Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:01:01.481Z] [LOG]       Calculated At: Oct 26, 2025, 13:31:01
[2025-10-26T08:01:01.481Z] [LOG]       Expected Earned (until NOW): Rs.39999.36
[2025-10-26T08:01:01.481Z] [LOG]       Actual Earned (until NOW): Rs.9999.84
[2025-10-26T08:01:01.481Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:01.481Z] [LOG]       Attendance Deduction: Rs.29999.52
[2025-10-26T08:01:01.481Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:01:01.481Z] [LOG]       📉 Shortfall: 115.50 hours (75.00% of expected)
[2025-10-26T08:01:01.482Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:01:01.482Z] [LOG]    Actual Earned Base: Rs.9999.84
[2025-10-26T08:01:01.482Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-26T08:01:01.482Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:01:01.482Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:01:01.482Z] [LOG]    Gross Salary: 9999.84
[2025-10-26T08:01:01.482Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:01:01.483Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:01:01.483Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:01.483Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:01:01.483Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:01.483Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:01:01.483Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:01.484Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:01:01.484Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:01.484Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:01:01.484Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:01.484Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:01:01.484Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:01.484Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:01:01.485Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:01.485Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:01:01.485Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:01.485Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:01:01.485Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:01.485Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:01:01.486Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:01.486Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:01:01.486Z] [LOG]    EPF/ETF calculated on: Rs.9999.84
[2025-10-26T08:01:01.486Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:01:01.486Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:01:01.487Z] [LOG] 💰 GROSS CALCULATION for Faizan Faizan:
[2025-10-26T08:01:01.487Z] [LOG]    Base Salary: 50000
[2025-10-26T08:01:01.487Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:01:01.487Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:01:01.487Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:01.487Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:01:01.487Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:01.487Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:01:01.487Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:01.716Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:01:01.716Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:01.716Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:01:01.717Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:01:01.717Z] [LOG]    Actual Earned Base: Rs.9999.84
[2025-10-26T08:01:01.717Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:01:01.718Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:01:01.718Z] [LOG]    = Gross Salary: Rs.9999.84
[2025-10-26T08:01:01.718Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:01:01.718Z] [LOG]    Attendance Shortfall (Info): Rs.29999.52
[2025-10-26T08:01:01.718Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:01:01.718Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:01.718Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:01:01.718Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:01:01.718Z] [LOG]    Gross Salary: Rs.9999.84
[2025-10-26T08:01:01.718Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:01:01.719Z] [LOG]    = NET SALARY: Rs.9999.84
[2025-10-26T08:01:01.719Z] [LOG] 
💾 Database Update:
[2025-10-26T08:01:01.719Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:01:01.719Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:01:01.979Z] [LOG] 
📝 Components to save:
[2025-10-26T08:01:01.980Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:01:01.980Z] [LOG]    Deduction components: 1
[2025-10-26T08:01:01.980Z] [LOG] Creating components for record cecc43f0-eebc-4812-a241-fd050ff31d13: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:01:01.980Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 9999.84
}
[2025-10-26T08:01:02.174Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:01:02.371Z] [LOG] Created payroll_record_component: dc764b5a-0392-4da7-9b16-b57f25726769 for Base Salary
[2025-10-26T08:01:02.372Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 29999.52
}
[2025-10-26T08:01:02.596Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:01:02.836Z] [LOG] Created payroll_record_component: 5acfa21b-1458-44d3-9b85-9a8afba49257 for Attendance Shortfall (Info)
[2025-10-26T08:01:03.284Z] [LOG] ✅ Financial balances updated successfully for employee 0143a057-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:03.285Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:01:03.285Z] [LOG] 
======================================================================
[2025-10-26T08:01:03.286Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Faizan Faizan
[2025-10-26T08:01:03.286Z] [LOG] ======================================================================
[2025-10-26T08:01:03.286Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:01:03.287Z] [LOG]    Actual Earned Base (Attendance-based): Rs.9999.84
[2025-10-26T08:01:03.287Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-26T08:01:03.287Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:03.287Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:03.288Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:01:03.288Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:03.288Z] [LOG]    GROSS SALARY: Rs.9999.84
[2025-10-26T08:01:03.289Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:03.289Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:01:03.289Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:01:03.289Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:01:03.290Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:01:03.290Z] [LOG]       - Attendance Shortfall (Info): Rs.29999.52
[2025-10-26T08:01:03.290Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:03.290Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:03.291Z] [LOG]    NET SALARY: Rs.9999.84
[2025-10-26T08:01:03.291Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:01:03.291Z] [LOG] ======================================================================

[2025-10-26T08:01:03.291Z] [LOG] ✅ Faizan Faizan: Calculation completed successfully
[2025-10-26T08:01:03.291Z] [LOG] 📊 Progress: 23/34 (67.6%)
[2025-10-26T08:01:03.291Z] [LOG] 
🧮 Processing: Safna Nawas null (EMP000021)
[2025-10-26T08:01:03.291Z] [LOG] 📋 Record ID: d2289c5c-2712-46e6-92b2-732a18d50a12
[2025-10-26T08:01:03.292Z] [LOG] 
======================================================================
[2025-10-26T08:01:03.292Z] [LOG] 🧮 CALCULATING PAYROLL: Safna Nawas null (EMP000021)
[2025-10-26T08:01:03.292Z] [LOG] ======================================================================
[2025-10-26T08:01:04.171Z] [LOG] 🔍 Component filtering for employee 0143c977-7105-11f0-a50f-98e743540430:
[2025-10-26T08:01:04.172Z] [LOG]    Total components: 13
[2025-10-26T08:01:04.172Z] [LOG]    Applicable components: 13
[2025-10-26T08:01:04.172Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-26T08:01:05.526Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:01:05.526Z] [LOG] 🔄 Processing financial records for employee 0143c977-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:01:05.716Z] [LOG] 📊 Found 0 active loans for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:05.907Z] [LOG] 📊 Found 0 active advances for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:06.124Z] [LOG] 📊 Found 0 approved bonuses for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:06.125Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:01:06.125Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:01:06.364Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:01:06.365Z] [LOG]    Employee ID: 0143c977-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:06.365Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:01:06.366Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:01:06.366Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-26T08:01:06.556Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:01:06.556Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-26T08:01:06.556Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-26T08:01:06.557Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-26T08:01:06.557Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:01:06.557Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:01:06.558Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:07.156Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:01:07.157Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:07.355Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:01:07.356Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:01:07.356Z] [LOG]       Total completed sessions found: 6
[2025-10-26T08:01:07.356Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:01:07.357Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:01:07.357Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:01:07.357Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:01:07.358Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:01:07.358Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T08:01:07.358Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:01:07.556Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:01:07.557Z] [LOG]          Weekday: 42.50h
[2025-10-26T08:01:07.557Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:01:07.558Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:01:07.756Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:01:07.757Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:01:07.757Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:01:07.758Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:07.758Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:01:07.758Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:01:07.759Z] [LOG]       Weekday: 42.50h
[2025-10-26T08:01:07.759Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:01:07.759Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:07.760Z] [LOG]       Total Actual: 47.00h
[2025-10-26T08:01:07.760Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:01:07.760Z] [LOG]       Weekday: 136.00h × Rs.235.29 = Rs.31999.44
[2025-10-26T08:01:07.761Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-26T08:01:07.761Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:07.761Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:07.762Z] [LOG]       Total Expected Earned: Rs.39999.36
[2025-10-26T08:01:07.762Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:01:07.762Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-26T08:01:07.762Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-26T08:01:07.763Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:07.763Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:07.763Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-26T08:01:07.764Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:01:07.764Z] [LOG]       Calculated At: Oct 26, 2025, 13:31:07
[2025-10-26T08:01:07.765Z] [LOG]       Expected Earned (until NOW): Rs.39999.36
[2025-10-26T08:01:07.765Z] [LOG]       Actual Earned (until NOW): Rs.11999.80
[2025-10-26T08:01:07.765Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:07.765Z] [LOG]       Attendance Deduction: Rs.27999.56
[2025-10-26T08:01:07.765Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:01:07.765Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T08:01:07.766Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:01:07.766Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T08:01:07.766Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T08:01:07.766Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:01:07.766Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:01:07.766Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-26T08:01:07.766Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:01:07.766Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:01:07.766Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:07.767Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:01:07.767Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:07.767Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:01:07.767Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:07.767Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:01:07.767Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:07.767Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:01:07.768Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:07.768Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:01:07.768Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:07.768Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:01:07.768Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:07.769Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:01:07.769Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:07.769Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:01:07.769Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:07.769Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:01:07.769Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:07.770Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:01:07.770Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-26T08:01:07.770Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:01:07.770Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:01:07.770Z] [LOG] 💰 GROSS CALCULATION for Safna Nawas null:
[2025-10-26T08:01:07.770Z] [LOG]    Base Salary: 50000
[2025-10-26T08:01:07.770Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:01:07.770Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:01:07.770Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:07.770Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:01:07.770Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:07.771Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:01:07.771Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:07.970Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:01:07.971Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:07.971Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:01:07.972Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:01:07.972Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T08:01:07.973Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:01:07.973Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:01:07.973Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-26T08:01:07.974Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:01:07.974Z] [LOG]    Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T08:01:07.974Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:01:07.975Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:07.975Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:01:07.975Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:01:07.976Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-26T08:01:07.976Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:01:07.976Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-26T08:01:07.977Z] [LOG] 
💾 Database Update:
[2025-10-26T08:01:07.977Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:01:07.977Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:01:08.211Z] [LOG] 
📝 Components to save:
[2025-10-26T08:01:08.211Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:01:08.212Z] [LOG]    Deduction components: 1
[2025-10-26T08:01:08.212Z] [LOG] Creating components for record d2289c5c-2712-46e6-92b2-732a18d50a12: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:01:08.213Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-26T08:01:08.436Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:01:08.628Z] [LOG] Created payroll_record_component: e4740d21-b143-43d0-b758-0b8663ad7f9d for Base Salary
[2025-10-26T08:01:08.629Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 27999.555
}
[2025-10-26T08:01:08.820Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:01:09.076Z] [LOG] Created payroll_record_component: 2eb92d2b-81c5-424c-8592-f1a747d61973 for Attendance Shortfall (Info)
[2025-10-26T08:01:09.556Z] [LOG] ✅ Financial balances updated successfully for employee 0143c977-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:09.557Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:01:09.557Z] [LOG] 
======================================================================
[2025-10-26T08:01:09.558Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Safna Nawas null
[2025-10-26T08:01:09.558Z] [LOG] ======================================================================
[2025-10-26T08:01:09.558Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:01:09.559Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-26T08:01:09.559Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T08:01:09.559Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:09.560Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:09.560Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:01:09.560Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:09.561Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-26T08:01:09.561Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:09.561Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:01:09.562Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:01:09.562Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:01:09.562Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:01:09.562Z] [LOG]       - Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T08:01:09.563Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:09.563Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:09.563Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-26T08:01:09.564Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:01:09.564Z] [LOG] ======================================================================

[2025-10-26T08:01:09.564Z] [LOG] ✅ Safna Nawas null: Calculation completed successfully
[2025-10-26T08:01:09.565Z] [LOG] 📊 Progress: 24/34 (70.6%)
[2025-10-26T08:01:09.565Z] [LOG] 
🧮 Processing: Ratheeshanan null (EMP000047)
[2025-10-26T08:01:09.565Z] [LOG] 📋 Record ID: d5184b40-bdb7-4d95-8b11-a732bd0d7621
[2025-10-26T08:01:09.565Z] [LOG] 
======================================================================
[2025-10-26T08:01:09.566Z] [LOG] 🧮 CALCULATING PAYROLL: Ratheeshanan null (EMP000047)
[2025-10-26T08:01:09.566Z] [LOG] ======================================================================
[2025-10-26T08:01:10.516Z] [LOG] 🔍 Component filtering for employee 01444966-7105-11f0-a50f-98e743540430:
[2025-10-26T08:01:10.517Z] [LOG]    Total components: 13
[2025-10-26T08:01:10.517Z] [LOG]    Applicable components: 13
[2025-10-26T08:01:10.517Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-26T08:01:11.956Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:01:11.957Z] [LOG] 🔄 Processing financial records for employee 01444966-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:01:12.197Z] [LOG] 📊 Found 0 active loans for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:12.437Z] [LOG] 📊 Found 0 active advances for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:12.676Z] [LOG] 📊 Found 0 approved bonuses for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:12.677Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:01:12.677Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:01:12.927Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:01:12.928Z] [LOG]    Employee ID: 01444966-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:12.928Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:01:12.928Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:01:12.929Z] [LOG]    Base Salary (Full Month): Rs.25000.00
[2025-10-26T08:01:13.157Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:01:13.157Z] [LOG]       Daily Salary: Rs.1000.00
[2025-10-26T08:01:13.158Z] [LOG]       Weekday Hourly Rate: Rs.117.65
[2025-10-26T08:01:13.158Z] [LOG]       Saturday Hourly Rate: Rs.222.22
[2025-10-26T08:01:13.158Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:01:13.159Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:01:13.159Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:13.796Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:01:13.797Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:14.044Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:01:14.045Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:01:14.045Z] [LOG]       Total completed sessions found: 6
[2025-10-26T08:01:14.046Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:01:14.046Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:01:14.046Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:01:14.047Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:01:14.047Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:01:14.047Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T08:01:14.047Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:01:14.258Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:01:14.258Z] [LOG]          Weekday: 42.50h
[2025-10-26T08:01:14.258Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:01:14.259Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:01:14.678Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:01:14.678Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:01:14.678Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:01:14.679Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:14.679Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:01:14.679Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:01:14.680Z] [LOG]       Weekday: 42.50h
[2025-10-26T08:01:14.680Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:01:14.680Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:14.680Z] [LOG]       Total Actual: 47.00h
[2025-10-26T08:01:14.681Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:01:14.681Z] [LOG]       Weekday: 136.00h × Rs.117.65 = Rs.16000.40
[2025-10-26T08:01:14.681Z] [LOG]       Saturday: 18.00h × Rs.222.22 = Rs.3999.96
[2025-10-26T08:01:14.682Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:14.682Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:14.682Z] [LOG]       Total Expected Earned: Rs.20000.36
[2025-10-26T08:01:14.682Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:01:14.683Z] [LOG]       Weekday: 42.50h × Rs.117.65 = Rs.5000.13
[2025-10-26T08:01:14.683Z] [LOG]       Saturday: 4.50h × Rs.222.22 = Rs.999.99
[2025-10-26T08:01:14.683Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:14.683Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:14.684Z] [LOG]       Total Actual Earned: Rs.6000.11
[2025-10-26T08:01:14.684Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:01:14.684Z] [LOG]       Calculated At: Oct 26, 2025, 13:31:14
[2025-10-26T08:01:14.684Z] [LOG]       Expected Earned (until NOW): Rs.20000.36
[2025-10-26T08:01:14.685Z] [LOG]       Actual Earned (until NOW): Rs.6000.11
[2025-10-26T08:01:14.685Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:14.685Z] [LOG]       Attendance Deduction: Rs.14000.25
[2025-10-26T08:01:14.685Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:01:14.685Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T08:01:14.685Z] [LOG]    Base Salary (Full): Rs.25000.00
[2025-10-26T08:01:14.685Z] [LOG]    Actual Earned Base: Rs.6000.11
[2025-10-26T08:01:14.686Z] [LOG]    Attendance Shortfall: Rs.14000.25
[2025-10-26T08:01:14.686Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:01:14.686Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:01:14.686Z] [LOG]    Gross Salary: 6000.115
[2025-10-26T08:01:14.686Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:01:14.686Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:01:14.686Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:14.687Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:01:14.687Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:14.687Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:01:14.687Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:14.687Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:01:14.688Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:14.688Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:01:14.688Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:14.688Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:01:14.689Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:14.689Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:01:14.689Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:14.689Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:01:14.689Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:14.689Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:01:14.689Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:14.689Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:01:14.690Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:14.690Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:01:14.690Z] [LOG]    EPF/ETF calculated on: Rs.6000.11
[2025-10-26T08:01:14.690Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:01:14.690Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:01:14.690Z] [LOG] 💰 GROSS CALCULATION for Ratheeshanan null:
[2025-10-26T08:01:14.690Z] [LOG]    Base Salary: 25000
[2025-10-26T08:01:14.690Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:01:14.691Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:01:14.691Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:14.691Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:01:14.691Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:14.691Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:01:14.691Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:14.880Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:01:14.881Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:14.881Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:01:14.882Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:01:14.882Z] [LOG]    Actual Earned Base: Rs.6000.11
[2025-10-26T08:01:14.882Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:01:14.883Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:01:14.883Z] [LOG]    = Gross Salary: Rs.6000.11
[2025-10-26T08:01:14.883Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:01:14.884Z] [LOG]    Attendance Shortfall (Info): Rs.14000.25
[2025-10-26T08:01:14.884Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:01:14.884Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:14.885Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:01:14.885Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:01:14.885Z] [LOG]    Gross Salary: Rs.6000.11
[2025-10-26T08:01:14.885Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:01:14.886Z] [LOG]    = NET SALARY: Rs.6000.11
[2025-10-26T08:01:14.886Z] [LOG] 
💾 Database Update:
[2025-10-26T08:01:14.886Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:01:14.887Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:01:15.090Z] [LOG] 
📝 Components to save:
[2025-10-26T08:01:15.090Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:01:15.091Z] [LOG]    Deduction components: 1
[2025-10-26T08:01:15.091Z] [LOG] Creating components for record d5184b40-bdb7-4d95-8b11-a732bd0d7621: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:01:15.092Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 6000.115
}
[2025-10-26T08:01:15.324Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:01:15.556Z] [LOG] Created payroll_record_component: 04e4a5c8-cf65-4152-ace0-244897e0160f for Base Salary
[2025-10-26T08:01:15.556Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 14000.245
}
[2025-10-26T08:01:15.796Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:01:16.036Z] [LOG] Created payroll_record_component: 96bfc252-92e5-4c7c-9418-6c43fdb9438d for Attendance Shortfall (Info)
[2025-10-26T08:01:16.436Z] [LOG] ✅ Financial balances updated successfully for employee 01444966-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:16.437Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:01:16.437Z] [LOG] 
======================================================================
[2025-10-26T08:01:16.438Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ratheeshanan null
[2025-10-26T08:01:16.438Z] [LOG] ======================================================================
[2025-10-26T08:01:16.438Z] [LOG]    Base Salary (Full): Rs.25000.00
[2025-10-26T08:01:16.439Z] [LOG]    Actual Earned Base (Attendance-based): Rs.6000.11
[2025-10-26T08:01:16.439Z] [LOG]    Attendance Shortfall: Rs.14000.25
[2025-10-26T08:01:16.439Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:16.440Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:16.440Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:01:16.440Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:16.441Z] [LOG]    GROSS SALARY: Rs.6000.11
[2025-10-26T08:01:16.441Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:16.441Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:01:16.442Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:01:16.442Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:01:16.442Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:01:16.443Z] [LOG]       - Attendance Shortfall (Info): Rs.14000.25
[2025-10-26T08:01:16.443Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:16.443Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:16.444Z] [LOG]    NET SALARY: Rs.6000.11
[2025-10-26T08:01:16.444Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:01:16.444Z] [LOG] ======================================================================

[2025-10-26T08:01:16.445Z] [LOG] ✅ Ratheeshanan null: Calculation completed successfully
[2025-10-26T08:01:16.445Z] [LOG] 📊 Progress: 25/34 (73.5%)
[2025-10-26T08:01:16.445Z] [LOG] 
🧮 Processing: Ammaar Ilham (EMP000023)
[2025-10-26T08:01:16.446Z] [LOG] 📋 Record ID: d522d62d-5e72-458d-b67e-7783c42b27a2
[2025-10-26T08:01:16.446Z] [LOG] 
======================================================================
[2025-10-26T08:01:16.446Z] [LOG] 🧮 CALCULATING PAYROLL: Ammaar Ilham (EMP000023)
[2025-10-26T08:01:16.447Z] [LOG] ======================================================================
[2025-10-26T08:01:17.405Z] [LOG] 🔍 Component filtering for employee 0143de00-7105-11f0-a50f-98e743540430:
[2025-10-26T08:01:17.406Z] [LOG]    Total components: 13
[2025-10-26T08:01:17.406Z] [LOG]    Applicable components: 13
[2025-10-26T08:01:17.406Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-26T08:01:19.218Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:01:19.219Z] [LOG] 🔄 Processing financial records for employee 0143de00-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:01:19.409Z] [LOG] 📊 Found 0 active loans for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:19.615Z] [LOG] 📊 Found 0 active advances for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:19.829Z] [LOG] 📊 Found 0 approved bonuses for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:19.830Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:01:19.830Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:01:20.019Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:01:20.019Z] [LOG]    Employee ID: 0143de00-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:20.019Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:01:20.020Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:01:20.020Z] [LOG]    Base Salary (Full Month): Rs.70000.00
[2025-10-26T08:01:20.425Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:01:20.426Z] [LOG]       Daily Salary: Rs.2800.00
[2025-10-26T08:01:20.426Z] [LOG]       Weekday Hourly Rate: Rs.329.41
[2025-10-26T08:01:20.426Z] [LOG]       Saturday Hourly Rate: Rs.622.22
[2025-10-26T08:01:20.427Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:01:20.427Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:01:20.427Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:21.077Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:01:21.078Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:21.316Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:01:21.317Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:01:21.317Z] [LOG]       Total completed sessions found: 6
[2025-10-26T08:01:21.317Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:01:21.318Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:01:21.318Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:01:21.319Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:01:21.319Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:01:21.319Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T08:01:21.320Z] [LOG]          6. 2025-10-24 (Weekday): 7.50h
[2025-10-26T08:01:21.565Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:01:21.566Z] [LOG]          Weekday: 41.50h
[2025-10-26T08:01:21.566Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:01:21.566Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:01:21.796Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:01:21.796Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:01:21.797Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:01:21.797Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:21.797Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:01:21.797Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:01:21.798Z] [LOG]       Weekday: 41.50h
[2025-10-26T08:01:21.798Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:01:21.798Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:21.799Z] [LOG]       Total Actual: 46.00h
[2025-10-26T08:01:21.799Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:01:21.799Z] [LOG]       Weekday: 136.00h × Rs.329.41 = Rs.44799.76
[2025-10-26T08:01:21.800Z] [LOG]       Saturday: 18.00h × Rs.622.22 = Rs.11199.96
[2025-10-26T08:01:21.800Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:21.800Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:21.800Z] [LOG]       Total Expected Earned: Rs.55999.72
[2025-10-26T08:01:21.801Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:01:21.801Z] [LOG]       Weekday: 41.50h × Rs.329.41 = Rs.13670.52
[2025-10-26T08:01:21.801Z] [LOG]       Saturday: 4.50h × Rs.622.22 = Rs.2799.99
[2025-10-26T08:01:21.802Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:21.802Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:21.802Z] [LOG]       Total Actual Earned: Rs.16470.51
[2025-10-26T08:01:21.803Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:01:21.803Z] [LOG]       Calculated At: Oct 26, 2025, 13:31:21
[2025-10-26T08:01:21.803Z] [LOG]       Expected Earned (until NOW): Rs.55999.72
[2025-10-26T08:01:21.804Z] [LOG]       Actual Earned (until NOW): Rs.16470.51
[2025-10-26T08:01:21.804Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:21.804Z] [LOG]       Attendance Deduction: Rs.39529.21
[2025-10-26T08:01:21.804Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:01:21.804Z] [LOG]       📉 Shortfall: 108.00 hours (70.59% of expected)
[2025-10-26T08:01:21.805Z] [LOG]    Base Salary (Full): Rs.70000.00
[2025-10-26T08:01:21.805Z] [LOG]    Actual Earned Base: Rs.16470.51
[2025-10-26T08:01:21.805Z] [LOG]    Attendance Shortfall: Rs.39529.21
[2025-10-26T08:01:21.805Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:01:21.806Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:01:21.806Z] [LOG]    Gross Salary: 16470.505
[2025-10-26T08:01:21.806Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:01:21.806Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:01:21.807Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:21.807Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:01:21.808Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:21.808Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:01:21.808Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:21.808Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:01:21.808Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:21.808Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:01:21.808Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:21.809Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:01:21.809Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:21.809Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:01:21.809Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:21.809Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:01:21.809Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:21.809Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:01:21.809Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:21.810Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:01:21.810Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:21.810Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:01:21.810Z] [LOG]    EPF/ETF calculated on: Rs.16470.51
[2025-10-26T08:01:21.810Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:01:21.810Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:01:21.810Z] [LOG] 💰 GROSS CALCULATION for Ammaar Ilham:
[2025-10-26T08:01:21.810Z] [LOG]    Base Salary: 70000
[2025-10-26T08:01:21.810Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:01:21.810Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:01:21.810Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:21.810Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:01:21.810Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:21.811Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:01:21.811Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:22.036Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:01:22.037Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:22.037Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:01:22.037Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:01:22.038Z] [LOG]    Actual Earned Base: Rs.16470.51
[2025-10-26T08:01:22.038Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:01:22.039Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:01:22.039Z] [LOG]    = Gross Salary: Rs.16470.51
[2025-10-26T08:01:22.039Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:01:22.039Z] [LOG]    Attendance Shortfall (Info): Rs.39529.21
[2025-10-26T08:01:22.040Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:01:22.040Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:22.040Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:01:22.041Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:01:22.041Z] [LOG]    Gross Salary: Rs.16470.51
[2025-10-26T08:01:22.041Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:01:22.042Z] [LOG]    = NET SALARY: Rs.16470.51
[2025-10-26T08:01:22.042Z] [LOG] 
💾 Database Update:
[2025-10-26T08:01:22.042Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:01:22.043Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:01:22.276Z] [LOG] 
📝 Components to save:
[2025-10-26T08:01:22.277Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:01:22.277Z] [LOG]    Deduction components: 1
[2025-10-26T08:01:22.278Z] [LOG] Creating components for record d522d62d-5e72-458d-b67e-7783c42b27a2: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:01:22.278Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 16470.505
}
[2025-10-26T08:01:22.533Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:01:22.728Z] [LOG] Created payroll_record_component: a62f3f80-57d3-45fb-afba-d6f112c5a81a for Base Salary
[2025-10-26T08:01:22.728Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 39529.215
}
[2025-10-26T08:01:22.914Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:01:23.337Z] [LOG] Created payroll_record_component: 62811e28-0002-432b-91f2-381cc6c1ab0e for Attendance Shortfall (Info)
[2025-10-26T08:01:23.714Z] [LOG] ✅ Financial balances updated successfully for employee 0143de00-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:23.715Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:01:23.715Z] [LOG] 
======================================================================
[2025-10-26T08:01:23.716Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ammaar Ilham
[2025-10-26T08:01:23.716Z] [LOG] ======================================================================
[2025-10-26T08:01:23.716Z] [LOG]    Base Salary (Full): Rs.70000.00
[2025-10-26T08:01:23.717Z] [LOG]    Actual Earned Base (Attendance-based): Rs.16470.51
[2025-10-26T08:01:23.717Z] [LOG]    Attendance Shortfall: Rs.39529.21
[2025-10-26T08:01:23.717Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:23.718Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:23.718Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:01:23.718Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:23.719Z] [LOG]    GROSS SALARY: Rs.16470.51
[2025-10-26T08:01:23.719Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:23.719Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:01:23.719Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:01:23.720Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:01:23.720Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:01:23.720Z] [LOG]       - Attendance Shortfall (Info): Rs.39529.21
[2025-10-26T08:01:23.721Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:23.721Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:23.721Z] [LOG]    NET SALARY: Rs.16470.51
[2025-10-26T08:01:23.722Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:01:23.722Z] [LOG] ======================================================================

[2025-10-26T08:01:23.722Z] [LOG] ✅ Ammaar Ilham: Calculation completed successfully
[2025-10-26T08:01:23.723Z] [LOG] 📊 Progress: 26/34 (76.5%)
[2025-10-26T08:01:23.723Z] [LOG] 
🧮 Processing: Piyumi null (EMP000025)
[2025-10-26T08:01:23.723Z] [LOG] 📋 Record ID: dd8a428d-a4af-4ea5-9e41-2b944b15ff40
[2025-10-26T08:01:23.724Z] [LOG] 
======================================================================
[2025-10-26T08:01:23.724Z] [LOG] 🧮 CALCULATING PAYROLL: Piyumi null (EMP000025)
[2025-10-26T08:01:23.724Z] [LOG] ======================================================================
[2025-10-26T08:01:24.758Z] [LOG] 🔍 Component filtering for employee 0143e565-7105-11f0-a50f-98e743540430:
[2025-10-26T08:01:24.758Z] [LOG]    Total components: 13
[2025-10-26T08:01:24.758Z] [LOG]    Applicable components: 13
[2025-10-26T08:01:24.759Z] [LOG]    Employee dept: undefined, designation: Customer Executive
[2025-10-26T08:01:26.478Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:01:26.479Z] [LOG] 🔄 Processing financial records for employee 0143e565-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:01:26.677Z] [LOG] 📊 Found 0 active loans for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:26.932Z] [LOG] 📊 Found 0 active advances for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:27.173Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:27.173Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:01:27.174Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:01:27.411Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:01:27.412Z] [LOG]    Employee ID: 0143e565-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:27.412Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:01:27.413Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:01:27.413Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-26T08:01:27.645Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:01:27.646Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-26T08:01:27.646Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-26T08:01:27.646Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-26T08:01:27.647Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:01:27.647Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:01:27.647Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:28.373Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:01:28.374Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:28.622Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:01:28.622Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:01:28.622Z] [LOG]       Total completed sessions found: 5
[2025-10-26T08:01:28.623Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:01:28.623Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:01:28.623Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:01:28.624Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:01:28.624Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:01:28.625Z] [LOG]          5. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:01:28.852Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:01:28.852Z] [LOG]          Weekday: 34.00h
[2025-10-26T08:01:28.853Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:01:28.853Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:01:29.078Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:01:29.079Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:01:29.079Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:01:29.079Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:29.080Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:01:29.080Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:01:29.080Z] [LOG]       Weekday: 34.00h
[2025-10-26T08:01:29.081Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:01:29.081Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:29.081Z] [LOG]       Total Actual: 38.50h
[2025-10-26T08:01:29.082Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:01:29.082Z] [LOG]       Weekday: 136.00h × Rs.235.29 = Rs.31999.44
[2025-10-26T08:01:29.082Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-26T08:01:29.083Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:29.083Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:29.083Z] [LOG]       Total Expected Earned: Rs.39999.36
[2025-10-26T08:01:29.084Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:01:29.084Z] [LOG]       Weekday: 34.00h × Rs.235.29 = Rs.7999.86
[2025-10-26T08:01:29.084Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-26T08:01:29.085Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:29.085Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:29.085Z] [LOG]       Total Actual Earned: Rs.9999.84
[2025-10-26T08:01:29.086Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:01:29.086Z] [LOG]       Calculated At: Oct 26, 2025, 13:31:29
[2025-10-26T08:01:29.087Z] [LOG]       Expected Earned (until NOW): Rs.39999.36
[2025-10-26T08:01:29.087Z] [LOG]       Actual Earned (until NOW): Rs.9999.84
[2025-10-26T08:01:29.087Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:29.088Z] [LOG]       Attendance Deduction: Rs.29999.52
[2025-10-26T08:01:29.088Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:01:29.088Z] [LOG]       📉 Shortfall: 115.50 hours (75.00% of expected)
[2025-10-26T08:01:29.089Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:01:29.089Z] [LOG]    Actual Earned Base: Rs.9999.84
[2025-10-26T08:01:29.089Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-26T08:01:29.089Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:01:29.090Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:01:29.090Z] [LOG]    Gross Salary: 9999.84
[2025-10-26T08:01:29.090Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:01:29.090Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:01:29.090Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:29.090Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:01:29.090Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:29.091Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:01:29.091Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:29.091Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:01:29.091Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:29.091Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:01:29.091Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:29.091Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:01:29.091Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:29.091Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:01:29.091Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:29.091Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:01:29.091Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:29.091Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:01:29.091Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:29.091Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:01:29.092Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:29.092Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:01:29.092Z] [LOG]    EPF/ETF calculated on: Rs.9999.84
[2025-10-26T08:01:29.092Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:01:29.092Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:01:29.092Z] [LOG] 💰 GROSS CALCULATION for Piyumi null:
[2025-10-26T08:01:29.092Z] [LOG]    Base Salary: 50000
[2025-10-26T08:01:29.092Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:01:29.092Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:01:29.092Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:29.092Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:01:29.092Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:29.092Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:01:29.092Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:29.324Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:01:29.325Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:29.325Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:01:29.326Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:01:29.326Z] [LOG]    Actual Earned Base: Rs.9999.84
[2025-10-26T08:01:29.326Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:01:29.327Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:01:29.327Z] [LOG]    = Gross Salary: Rs.9999.84
[2025-10-26T08:01:29.327Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:01:29.328Z] [LOG]    Attendance Shortfall (Info): Rs.29999.52
[2025-10-26T08:01:29.328Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:01:29.328Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:29.328Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:01:29.329Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:01:29.329Z] [LOG]    Gross Salary: Rs.9999.84
[2025-10-26T08:01:29.329Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:01:29.329Z] [LOG]    = NET SALARY: Rs.9999.84
[2025-10-26T08:01:29.330Z] [LOG] 
💾 Database Update:
[2025-10-26T08:01:29.330Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:01:29.330Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:01:29.589Z] [LOG] 
📝 Components to save:
[2025-10-26T08:01:29.590Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:01:29.590Z] [LOG]    Deduction components: 1
[2025-10-26T08:01:29.591Z] [LOG] Creating components for record dd8a428d-a4af-4ea5-9e41-2b944b15ff40: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:01:29.591Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 9999.84
}
[2025-10-26T08:01:29.797Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:01:30.038Z] [LOG] Created payroll_record_component: 8e5349cb-9dda-4f7f-b002-526ac42ad531 for Base Salary
[2025-10-26T08:01:30.039Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 29999.52
}
[2025-10-26T08:01:30.285Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:01:30.517Z] [LOG] Created payroll_record_component: b6222507-1073-468f-87cd-2e389238af57 for Attendance Shortfall (Info)
[2025-10-26T08:01:30.997Z] [LOG] ✅ Financial balances updated successfully for employee 0143e565-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:30.998Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:01:30.998Z] [LOG] 
======================================================================
[2025-10-26T08:01:30.998Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Piyumi null
[2025-10-26T08:01:30.999Z] [LOG] ======================================================================
[2025-10-26T08:01:30.999Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:01:30.999Z] [LOG]    Actual Earned Base (Attendance-based): Rs.9999.84
[2025-10-26T08:01:31.000Z] [LOG]    Attendance Shortfall: Rs.29999.52
[2025-10-26T08:01:31.000Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:31.000Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:31.000Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:01:31.001Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:31.001Z] [LOG]    GROSS SALARY: Rs.9999.84
[2025-10-26T08:01:31.001Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:31.002Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:01:31.002Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:01:31.002Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:01:31.003Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:01:31.003Z] [LOG]       - Attendance Shortfall (Info): Rs.29999.52
[2025-10-26T08:01:31.003Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:31.004Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:31.004Z] [LOG]    NET SALARY: Rs.9999.84
[2025-10-26T08:01:31.004Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:01:31.005Z] [LOG] ======================================================================

[2025-10-26T08:01:31.005Z] [LOG] ✅ Piyumi null: Calculation completed successfully
[2025-10-26T08:01:31.005Z] [LOG] 📊 Progress: 27/34 (79.4%)
[2025-10-26T08:01:31.006Z] [LOG] 
🧮 Processing: Saruban null (EMP000007)
[2025-10-26T08:01:31.006Z] [LOG] 📋 Record ID: e205bfbd-547c-411f-970a-93a1759389cd
[2025-10-26T08:01:31.006Z] [LOG] 
======================================================================
[2025-10-26T08:01:31.007Z] [LOG] 🧮 CALCULATING PAYROLL: Saruban null (EMP000007)
[2025-10-26T08:01:31.007Z] [LOG] ======================================================================
[2025-10-26T08:01:31.966Z] [LOG] 🔍 Component filtering for employee 0143a6e3-7105-11f0-a50f-98e743540430:
[2025-10-26T08:01:31.966Z] [LOG]    Total components: 13
[2025-10-26T08:01:31.966Z] [LOG]    Applicable components: 13
[2025-10-26T08:01:31.967Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-26T08:01:33.396Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:01:33.397Z] [LOG] 🔄 Processing financial records for employee 0143a6e3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:01:33.644Z] [LOG] 📊 Found 0 active loans for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:33.865Z] [LOG] 📊 Found 0 active advances for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:34.080Z] [LOG] 📊 Found 0 approved bonuses for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:34.081Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:01:34.081Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:01:34.284Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:01:34.285Z] [LOG]    Employee ID: 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:34.285Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:01:34.285Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:01:34.286Z] [LOG]    Base Salary (Full Month): Rs.0.00
[2025-10-26T08:01:34.518Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:01:34.518Z] [LOG]       Daily Salary: Rs.0.00
[2025-10-26T08:01:34.518Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-26T08:01:34.519Z] [LOG]       Saturday Hourly Rate: Rs.0.00
[2025-10-26T08:01:34.519Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:01:34.519Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:01:34.520Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:35.238Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:01:35.238Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:35.493Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:01:35.493Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:01:35.493Z] [LOG]       Total completed sessions found: 6
[2025-10-26T08:01:35.494Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:01:35.494Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:01:35.494Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:01:35.495Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:01:35.495Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:01:35.495Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T08:01:35.495Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:01:35.716Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:01:35.717Z] [LOG]          Weekday: 42.50h
[2025-10-26T08:01:35.717Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:01:35.717Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:01:35.907Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:01:35.908Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:01:35.908Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:01:35.909Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:35.909Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:01:35.909Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:01:35.909Z] [LOG]       Weekday: 42.50h
[2025-10-26T08:01:35.910Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:01:35.910Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:35.910Z] [LOG]       Total Actual: 47.00h
[2025-10-26T08:01:35.911Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:01:35.911Z] [LOG]       Weekday: 136.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:35.911Z] [LOG]       Saturday: 18.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:35.911Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:35.911Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:35.912Z] [LOG]       Total Expected Earned: Rs.0.00
[2025-10-26T08:01:35.912Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:01:35.912Z] [LOG]       Weekday: 42.50h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:35.913Z] [LOG]       Saturday: 4.50h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:35.913Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:35.913Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:35.913Z] [LOG]       Total Actual Earned: Rs.0.00
[2025-10-26T08:01:35.914Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:01:35.914Z] [LOG]       Calculated At: Oct 26, 2025, 13:31:35
[2025-10-26T08:01:35.914Z] [LOG]       Expected Earned (until NOW): Rs.0.00
[2025-10-26T08:01:35.915Z] [LOG]       Actual Earned (until NOW): Rs.0.00
[2025-10-26T08:01:35.915Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:35.915Z] [LOG]       Attendance Deduction: Rs.0.00
[2025-10-26T08:01:35.915Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:01:35.915Z] [LOG]       ✅ No deduction - Employee worked all expected hours!
[2025-10-26T08:01:35.916Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-26T08:01:35.916Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-26T08:01:35.916Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-26T08:01:35.916Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:01:35.916Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:01:35.916Z] [LOG]    Gross Salary: 0
[2025-10-26T08:01:35.916Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:01:35.916Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:01:35.917Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:35.917Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:01:35.917Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:35.917Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:01:35.917Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:35.917Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:01:35.917Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:35.917Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:01:35.917Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:35.917Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:01:35.918Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:35.918Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:01:35.918Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:35.918Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:01:35.918Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:35.918Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:01:35.918Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:35.918Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:01:35.918Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:35.918Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:01:35.918Z] [LOG]    EPF/ETF calculated on: Rs.0.00
[2025-10-26T08:01:35.918Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:01:35.919Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:01:35.919Z] [LOG] 💰 GROSS CALCULATION for Saruban null:
[2025-10-26T08:01:35.919Z] [LOG]    Base Salary: 0
[2025-10-26T08:01:35.919Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:01:35.919Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:01:35.919Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:35.919Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:01:35.919Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:35.919Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:01:35.919Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:36.213Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:01:36.213Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:36.214Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:01:36.214Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:01:36.214Z] [LOG]    Actual Earned Base: Rs.0.00
[2025-10-26T08:01:36.215Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:01:36.215Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:01:36.215Z] [LOG]    = Gross Salary: Rs.0.00
[2025-10-26T08:01:36.216Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:01:36.216Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:01:36.216Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:36.217Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:01:36.217Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:01:36.217Z] [LOG]    Gross Salary: Rs.0.00
[2025-10-26T08:01:36.217Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:01:36.218Z] [LOG]    = NET SALARY: Rs.0.00
[2025-10-26T08:01:36.218Z] [LOG] 
💾 Database Update:
[2025-10-26T08:01:36.219Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:01:36.219Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:01:36.441Z] [LOG] 
📝 Components to save:
[2025-10-26T08:01:36.441Z] [LOG]    Gross/Earnings components: 0
[2025-10-26T08:01:36.442Z] [LOG]    Deduction components: 0
[2025-10-26T08:01:36.442Z] [LOG] Creating components for record e205bfbd-547c-411f-970a-93a1759389cd: {
  "grossComponentsCount": 0,
  "deductionComponentsCount": 0,
  "taxComponentsCount": 0
}
[2025-10-26T08:01:37.094Z] [LOG] ✅ Financial balances updated successfully for employee 0143a6e3-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:37.095Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:01:37.095Z] [LOG] 
======================================================================
[2025-10-26T08:01:37.096Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Saruban null
[2025-10-26T08:01:37.096Z] [LOG] ======================================================================
[2025-10-26T08:01:37.096Z] [LOG]    Base Salary (Full): Rs.0.00
[2025-10-26T08:01:37.097Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.00
[2025-10-26T08:01:37.097Z] [LOG]    Attendance Shortfall: Rs.0.00
[2025-10-26T08:01:37.097Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:37.097Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:37.098Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:01:37.098Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:37.098Z] [LOG]    GROSS SALARY: Rs.0.00
[2025-10-26T08:01:37.099Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:37.099Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:01:37.099Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:01:37.100Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:01:37.100Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:01:37.100Z] [LOG]       - Attendance Shortfall (Info): Rs.0.00
[2025-10-26T08:01:37.101Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:37.101Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:37.102Z] [LOG]    NET SALARY: Rs.0.00
[2025-10-26T08:01:37.102Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:01:37.102Z] [LOG] ======================================================================

[2025-10-26T08:01:37.103Z] [LOG] ✅ Saruban null: Calculation completed successfully
[2025-10-26T08:01:37.103Z] [LOG] 📊 Progress: 28/34 (82.4%)
[2025-10-26T08:01:37.103Z] [LOG] 
🧮 Processing: Maryam null (EMP000035)
[2025-10-26T08:01:37.103Z] [LOG] 📋 Record ID: e36cd801-9991-48be-bc23-ec3e05903c7c
[2025-10-26T08:01:37.104Z] [LOG] 
======================================================================
[2025-10-26T08:01:37.104Z] [LOG] 🧮 CALCULATING PAYROLL: Maryam null (EMP000035)
[2025-10-26T08:01:37.104Z] [LOG] ======================================================================
[2025-10-26T08:01:38.117Z] [LOG] 🔍 Component filtering for employee 01440221-7105-11f0-a50f-98e743540430:
[2025-10-26T08:01:38.117Z] [LOG]    Total components: 13
[2025-10-26T08:01:38.118Z] [LOG]    Applicable components: 13
[2025-10-26T08:01:38.118Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-26T08:01:39.556Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:01:39.557Z] [LOG] 🔄 Processing financial records for employee 01440221-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:01:39.979Z] [LOG] 📊 Found 0 active loans for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:40.169Z] [LOG] 📊 Found 0 active advances for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:40.569Z] [LOG] 📊 Found 0 approved bonuses for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:40.570Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:01:40.571Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:01:40.770Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:01:40.771Z] [LOG]    Employee ID: 01440221-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:40.771Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:01:40.772Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:01:40.772Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-26T08:01:41.004Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:01:41.005Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-26T08:01:41.005Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-26T08:01:41.005Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-26T08:01:41.006Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:01:41.006Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:01:41.007Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:41.732Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:01:41.733Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:41.973Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:01:41.974Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:01:41.974Z] [LOG]       Total completed sessions found: 6
[2025-10-26T08:01:41.974Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:01:41.975Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:01:41.975Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:01:41.975Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:01:41.976Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:01:41.976Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T08:01:41.976Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:01:42.205Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:01:42.205Z] [LOG]          Weekday: 42.50h
[2025-10-26T08:01:42.205Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:01:42.206Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:01:42.445Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:01:42.445Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:01:42.446Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:01:42.446Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:42.447Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:01:42.447Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:01:42.447Z] [LOG]       Weekday: 42.50h
[2025-10-26T08:01:42.448Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:01:42.448Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:42.448Z] [LOG]       Total Actual: 47.00h
[2025-10-26T08:01:42.449Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:01:42.449Z] [LOG]       Weekday: 136.00h × Rs.188.24 = Rs.25600.64
[2025-10-26T08:01:42.449Z] [LOG]       Saturday: 18.00h × Rs.355.56 = Rs.6400.08
[2025-10-26T08:01:42.450Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:42.450Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:42.450Z] [LOG]       Total Expected Earned: Rs.32000.72
[2025-10-26T08:01:42.451Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:01:42.451Z] [LOG]       Weekday: 42.50h × Rs.188.24 = Rs.8000.20
[2025-10-26T08:01:42.451Z] [LOG]       Saturday: 4.50h × Rs.355.56 = Rs.1600.02
[2025-10-26T08:01:42.452Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:42.452Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:42.452Z] [LOG]       Total Actual Earned: Rs.9600.22
[2025-10-26T08:01:42.453Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:01:42.453Z] [LOG]       Calculated At: Oct 26, 2025, 13:31:42
[2025-10-26T08:01:42.454Z] [LOG]       Expected Earned (until NOW): Rs.32000.72
[2025-10-26T08:01:42.454Z] [LOG]       Actual Earned (until NOW): Rs.9600.22
[2025-10-26T08:01:42.454Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:42.454Z] [LOG]       Attendance Deduction: Rs.22400.50
[2025-10-26T08:01:42.455Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:01:42.455Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T08:01:42.455Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-26T08:01:42.455Z] [LOG]    Actual Earned Base: Rs.9600.22
[2025-10-26T08:01:42.455Z] [LOG]    Attendance Shortfall: Rs.22400.50
[2025-10-26T08:01:42.456Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:01:42.456Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:01:42.456Z] [LOG]    Gross Salary: 9600.220000000001
[2025-10-26T08:01:42.456Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:01:42.457Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:01:42.457Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:42.457Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:01:42.457Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:42.458Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:01:42.458Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:42.459Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:01:42.459Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:42.459Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:01:42.459Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:42.459Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:01:42.459Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:42.459Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:01:42.459Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:42.460Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:01:42.460Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:42.460Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:01:42.460Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:42.460Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:01:42.460Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:42.460Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:01:42.460Z] [LOG]    EPF/ETF calculated on: Rs.9600.22
[2025-10-26T08:01:42.461Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:01:42.461Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:01:42.461Z] [LOG] 💰 GROSS CALCULATION for Maryam null:
[2025-10-26T08:01:42.461Z] [LOG]    Base Salary: 40000
[2025-10-26T08:01:42.461Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:01:42.461Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:01:42.461Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:42.461Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:01:42.461Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:42.461Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:01:42.461Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:42.677Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:01:42.677Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:42.677Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:01:42.678Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:01:42.678Z] [LOG]    Actual Earned Base: Rs.9600.22
[2025-10-26T08:01:42.678Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:01:42.679Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:01:42.679Z] [LOG]    = Gross Salary: Rs.9600.22
[2025-10-26T08:01:42.679Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:01:42.680Z] [LOG]    Attendance Shortfall (Info): Rs.22400.50
[2025-10-26T08:01:42.680Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:01:42.680Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:42.681Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:01:42.681Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:01:42.681Z] [LOG]    Gross Salary: Rs.9600.22
[2025-10-26T08:01:42.681Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:01:42.682Z] [LOG]    = NET SALARY: Rs.9600.22
[2025-10-26T08:01:42.682Z] [LOG] 
💾 Database Update:
[2025-10-26T08:01:42.682Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:01:42.683Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:01:42.917Z] [LOG] 
📝 Components to save:
[2025-10-26T08:01:42.917Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:01:42.918Z] [LOG]    Deduction components: 1
[2025-10-26T08:01:42.918Z] [LOG] Creating components for record e36cd801-9991-48be-bc23-ec3e05903c7c: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:01:42.919Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 9600.220000000001
}
[2025-10-26T08:01:43.109Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:01:43.316Z] [LOG] Created payroll_record_component: c84fc133-f19b-41a2-9ffa-1596d2e46684 for Base Salary
[2025-10-26T08:01:43.317Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 22400.5
}
[2025-10-26T08:01:43.557Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:01:43.796Z] [LOG] Created payroll_record_component: f53b7a48-ca3e-4a2d-bc66-3e7a82cbf6fa for Attendance Shortfall (Info)
[2025-10-26T08:01:44.186Z] [LOG] ✅ Financial balances updated successfully for employee 01440221-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:44.187Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:01:44.187Z] [LOG] 
======================================================================
[2025-10-26T08:01:44.188Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Maryam null
[2025-10-26T08:01:44.188Z] [LOG] ======================================================================
[2025-10-26T08:01:44.188Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-26T08:01:44.189Z] [LOG]    Actual Earned Base (Attendance-based): Rs.9600.22
[2025-10-26T08:01:44.189Z] [LOG]    Attendance Shortfall: Rs.22400.50
[2025-10-26T08:01:44.189Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:44.189Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:44.190Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:01:44.190Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:44.190Z] [LOG]    GROSS SALARY: Rs.9600.22
[2025-10-26T08:01:44.191Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:44.191Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:01:44.191Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:01:44.192Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:01:44.192Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:01:44.192Z] [LOG]       - Attendance Shortfall (Info): Rs.22400.50
[2025-10-26T08:01:44.193Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:44.193Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:44.193Z] [LOG]    NET SALARY: Rs.9600.22
[2025-10-26T08:01:44.193Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:01:44.194Z] [LOG] ======================================================================

[2025-10-26T08:01:44.194Z] [LOG] ✅ Maryam null: Calculation completed successfully
[2025-10-26T08:01:44.195Z] [LOG] 📊 Progress: 29/34 (85.3%)
[2025-10-26T08:01:44.195Z] [LOG] 
🧮 Processing: Office Team null (EMP000041)
[2025-10-26T08:01:44.195Z] [LOG] 📋 Record ID: eda1e759-8b64-450f-b223-7355f50979a1
[2025-10-26T08:01:44.195Z] [LOG] 
======================================================================
[2025-10-26T08:01:44.196Z] [LOG] 🧮 CALCULATING PAYROLL: Office Team null (EMP000041)
[2025-10-26T08:01:44.196Z] [LOG] ======================================================================
[2025-10-26T08:01:45.246Z] [LOG] 🔍 Component filtering for employee 01442b21-7105-11f0-a50f-98e743540430:
[2025-10-26T08:01:45.246Z] [LOG]    Total components: 13
[2025-10-26T08:01:45.247Z] [LOG]    Applicable components: 13
[2025-10-26T08:01:45.247Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-26T08:01:46.677Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:01:46.677Z] [LOG] 🔄 Processing financial records for employee 01442b21-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:01:46.933Z] [LOG] 📊 Found 0 active loans for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:47.165Z] [LOG] 📊 Found 0 active advances for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:47.396Z] [LOG] 📊 Found 0 approved bonuses for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:47.397Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:01:47.397Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:01:47.645Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:01:47.645Z] [LOG]    Employee ID: 01442b21-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:47.646Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:01:47.646Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:01:47.646Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-26T08:01:47.892Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:01:47.893Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-26T08:01:47.893Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-26T08:01:47.894Z] [LOG]       Saturday Hourly Rate: Rs.0.01
[2025-10-26T08:01:47.894Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:01:47.894Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:01:47.895Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:48.605Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:01:48.605Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:48.804Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:01:48.804Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:01:48.805Z] [LOG]       Total completed sessions found: 6
[2025-10-26T08:01:48.805Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:01:48.805Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:01:48.806Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:01:48.806Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:01:48.806Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:01:48.806Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T08:01:48.807Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:01:49.013Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:01:49.014Z] [LOG]          Weekday: 42.50h
[2025-10-26T08:01:49.014Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:01:49.014Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:01:49.204Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:01:49.205Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:01:49.205Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:01:49.205Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:49.206Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:01:49.206Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:01:49.206Z] [LOG]       Weekday: 42.50h
[2025-10-26T08:01:49.207Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:01:49.207Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:49.207Z] [LOG]       Total Actual: 47.00h
[2025-10-26T08:01:49.207Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:01:49.208Z] [LOG]       Weekday: 136.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:49.208Z] [LOG]       Saturday: 18.00h × Rs.0.01 = Rs.0.18
[2025-10-26T08:01:49.208Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:49.209Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:49.209Z] [LOG]       Total Expected Earned: Rs.0.18
[2025-10-26T08:01:49.209Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:01:49.210Z] [LOG]       Weekday: 42.50h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:49.210Z] [LOG]       Saturday: 4.50h × Rs.0.01 = Rs.0.04
[2025-10-26T08:01:49.210Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:49.211Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:49.211Z] [LOG]       Total Actual Earned: Rs.0.04
[2025-10-26T08:01:49.212Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:01:49.212Z] [LOG]       Calculated At: Oct 26, 2025, 13:31:49
[2025-10-26T08:01:49.212Z] [LOG]       Expected Earned (until NOW): Rs.0.18
[2025-10-26T08:01:49.213Z] [LOG]       Actual Earned (until NOW): Rs.0.04
[2025-10-26T08:01:49.213Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:49.213Z] [LOG]       Attendance Deduction: Rs.0.14
[2025-10-26T08:01:49.213Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:01:49.214Z] [LOG]       📉 Shortfall: 107.00 hours (75.00% of expected)
[2025-10-26T08:01:49.214Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-26T08:01:49.214Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-26T08:01:49.214Z] [LOG]    Attendance Shortfall: Rs.0.14
[2025-10-26T08:01:49.214Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:01:49.215Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:01:49.215Z] [LOG]    Gross Salary: 0.045
[2025-10-26T08:01:49.215Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:01:49.215Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:01:49.215Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:49.215Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:01:49.215Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:49.216Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:01:49.216Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:49.217Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:01:49.217Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:49.217Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:01:49.217Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:49.218Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:01:49.218Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:49.218Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:01:49.218Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:49.218Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:01:49.219Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:49.219Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:01:49.219Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:49.219Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:01:49.219Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:49.220Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:01:49.220Z] [LOG]    EPF/ETF calculated on: Rs.0.04
[2025-10-26T08:01:49.220Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:01:49.220Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:01:49.220Z] [LOG] 💰 GROSS CALCULATION for Office Team null:
[2025-10-26T08:01:49.220Z] [LOG]    Base Salary: 1
[2025-10-26T08:01:49.220Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:01:49.220Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:01:49.221Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:49.221Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:01:49.221Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:49.221Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:01:49.221Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:49.431Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:01:49.431Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:49.432Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:01:49.432Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:01:49.433Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-26T08:01:49.433Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:01:49.433Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:01:49.433Z] [LOG]    = Gross Salary: Rs.0.04
[2025-10-26T08:01:49.434Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:01:49.434Z] [LOG]    Attendance Shortfall (Info): Rs.0.14
[2025-10-26T08:01:49.434Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:01:49.435Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:49.435Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:01:49.435Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:01:49.436Z] [LOG]    Gross Salary: Rs.0.04
[2025-10-26T08:01:49.436Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:01:49.436Z] [LOG]    = NET SALARY: Rs.0.04
[2025-10-26T08:01:49.437Z] [LOG] 
💾 Database Update:
[2025-10-26T08:01:49.437Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:01:49.437Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:01:49.637Z] [LOG] 
📝 Components to save:
[2025-10-26T08:01:49.637Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:01:49.637Z] [LOG]    Deduction components: 1
[2025-10-26T08:01:49.637Z] [LOG] Creating components for record eda1e759-8b64-450f-b223-7355f50979a1: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:01:49.638Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 0.045
}
[2025-10-26T08:01:49.838Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:01:50.032Z] [LOG] Created payroll_record_component: 2bc9f9d8-5c48-449b-b9b9-b849badf48d4 for Base Salary
[2025-10-26T08:01:50.033Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 0.135
}
[2025-10-26T08:01:50.219Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:01:50.439Z] [LOG] Created payroll_record_component: 3101b58c-1c93-48b6-b1c6-07f636ec360a for Attendance Shortfall (Info)
[2025-10-26T08:01:50.819Z] [LOG] ✅ Financial balances updated successfully for employee 01442b21-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:50.819Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:01:50.820Z] [LOG] 
======================================================================
[2025-10-26T08:01:50.820Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Office Team null
[2025-10-26T08:01:50.820Z] [LOG] ======================================================================
[2025-10-26T08:01:50.820Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-26T08:01:50.821Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.04
[2025-10-26T08:01:50.821Z] [LOG]    Attendance Shortfall: Rs.0.14
[2025-10-26T08:01:50.821Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:50.822Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:50.822Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:01:50.822Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:50.823Z] [LOG]    GROSS SALARY: Rs.0.04
[2025-10-26T08:01:50.823Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:50.823Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:01:50.824Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:01:50.824Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:01:50.824Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:01:50.825Z] [LOG]       - Attendance Shortfall (Info): Rs.0.14
[2025-10-26T08:01:50.825Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:50.825Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:50.826Z] [LOG]    NET SALARY: Rs.0.04
[2025-10-26T08:01:50.826Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:01:50.826Z] [LOG] ======================================================================

[2025-10-26T08:01:50.827Z] [LOG] ✅ Office Team null: Calculation completed successfully
[2025-10-26T08:01:50.827Z] [LOG] 📊 Progress: 30/34 (88.2%)
[2025-10-26T08:01:50.827Z] [LOG] 
🧮 Processing: Chemil null (EMP000040)
[2025-10-26T08:01:50.828Z] [LOG] 📋 Record ID: f034a7d6-e52d-49f4-bff2-53ef6de7cddc
[2025-10-26T08:01:50.828Z] [LOG] 
======================================================================
[2025-10-26T08:01:50.828Z] [LOG] 🧮 CALCULATING PAYROLL: Chemil null (EMP000040)
[2025-10-26T08:01:50.828Z] [LOG] ======================================================================
[2025-10-26T08:01:51.612Z] [LOG] 🔍 Component filtering for employee 01442599-7105-11f0-a50f-98e743540430:
[2025-10-26T08:01:51.612Z] [LOG]    Total components: 13
[2025-10-26T08:01:51.612Z] [LOG]    Applicable components: 13
[2025-10-26T08:01:51.613Z] [LOG]    Employee dept: undefined, designation: Web Developer
[2025-10-26T08:01:52.997Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:01:52.998Z] [LOG] 🔄 Processing financial records for employee 01442599-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:01:53.245Z] [LOG] 📊 Found 0 active loans for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:53.485Z] [LOG] 📊 Found 0 active advances for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:53.725Z] [LOG] 📊 Found 0 approved bonuses for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:53.725Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:01:53.726Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:01:53.916Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:01:53.916Z] [LOG]    Employee ID: 01442599-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:53.917Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:01:53.917Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:01:53.917Z] [LOG]    Base Salary (Full Month): Rs.250000.00
[2025-10-26T08:01:54.117Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:01:54.118Z] [LOG]       Daily Salary: Rs.10000.00
[2025-10-26T08:01:54.118Z] [LOG]       Weekday Hourly Rate: Rs.1176.47
[2025-10-26T08:01:54.118Z] [LOG]       Saturday Hourly Rate: Rs.2222.22
[2025-10-26T08:01:54.119Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:01:54.119Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:01:54.119Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:54.695Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:01:54.695Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:01:54.926Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:01:54.926Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:01:54.927Z] [LOG]       Total completed sessions found: 6
[2025-10-26T08:01:54.927Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:01:54.927Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:01:54.928Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:01:54.928Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:01:54.928Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:01:54.929Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T08:01:54.929Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:01:55.158Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:01:55.158Z] [LOG]          Weekday: 42.50h
[2025-10-26T08:01:55.159Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:01:55.159Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:01:55.397Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:01:55.397Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:01:55.397Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:01:55.398Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:55.398Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:01:55.399Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:01:55.399Z] [LOG]       Weekday: 42.50h
[2025-10-26T08:01:55.399Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:01:55.400Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:01:55.400Z] [LOG]       Total Actual: 47.00h
[2025-10-26T08:01:55.400Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:01:55.400Z] [LOG]       Weekday: 136.00h × Rs.1176.47 = Rs.159999.92
[2025-10-26T08:01:55.401Z] [LOG]       Saturday: 18.00h × Rs.2222.22 = Rs.39999.96
[2025-10-26T08:01:55.401Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:55.401Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:55.402Z] [LOG]       Total Expected Earned: Rs.199999.88
[2025-10-26T08:01:55.402Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:01:55.402Z] [LOG]       Weekday: 42.50h × Rs.1176.47 = Rs.49999.97
[2025-10-26T08:01:55.403Z] [LOG]       Saturday: 4.50h × Rs.2222.22 = Rs.9999.99
[2025-10-26T08:01:55.403Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:01:55.403Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:55.404Z] [LOG]       Total Actual Earned: Rs.59999.96
[2025-10-26T08:01:55.405Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:01:55.405Z] [LOG]       Calculated At: Oct 26, 2025, 13:31:55
[2025-10-26T08:01:55.405Z] [LOG]       Expected Earned (until NOW): Rs.199999.88
[2025-10-26T08:01:55.406Z] [LOG]       Actual Earned (until NOW): Rs.59999.96
[2025-10-26T08:01:55.406Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:01:55.406Z] [LOG]       Attendance Deduction: Rs.139999.92
[2025-10-26T08:01:55.407Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:01:55.407Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T08:01:55.407Z] [LOG]    Base Salary (Full): Rs.250000.00
[2025-10-26T08:01:55.407Z] [LOG]    Actual Earned Base: Rs.59999.96
[2025-10-26T08:01:55.408Z] [LOG]    Attendance Shortfall: Rs.139999.92
[2025-10-26T08:01:55.408Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:01:55.408Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:01:55.408Z] [LOG]    Gross Salary: 59999.965
[2025-10-26T08:01:55.408Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:01:55.408Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:01:55.409Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:55.409Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:01:55.409Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:55.409Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:01:55.409Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:55.410Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:01:55.410Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:55.410Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:01:55.410Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:55.410Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:01:55.410Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:55.410Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:01:55.410Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:55.410Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:01:55.411Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:55.411Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:01:55.411Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:55.411Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:01:55.411Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:55.411Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:01:55.411Z] [LOG]    EPF/ETF calculated on: Rs.59999.96
[2025-10-26T08:01:55.411Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:01:55.411Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:01:55.411Z] [LOG] 💰 GROSS CALCULATION for Chemil null:
[2025-10-26T08:01:55.411Z] [LOG]    Base Salary: 250000
[2025-10-26T08:01:55.411Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:01:55.411Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:01:55.411Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:55.411Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:01:55.411Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:55.412Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:01:55.412Z] [LOG]    Fixed amount: 0
[2025-10-26T08:01:55.646Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:01:55.646Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:55.647Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:01:55.647Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:01:55.647Z] [LOG]    Actual Earned Base: Rs.59999.96
[2025-10-26T08:01:55.648Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:01:55.648Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:01:55.648Z] [LOG]    = Gross Salary: Rs.59999.96
[2025-10-26T08:01:55.649Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:01:55.649Z] [LOG]    Attendance Shortfall (Info): Rs.139999.92
[2025-10-26T08:01:55.649Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:01:55.649Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:55.650Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:01:55.650Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:01:55.650Z] [LOG]    Gross Salary: Rs.59999.96
[2025-10-26T08:01:55.651Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:01:55.651Z] [LOG]    = NET SALARY: Rs.59999.96
[2025-10-26T08:01:55.651Z] [LOG] 
💾 Database Update:
[2025-10-26T08:01:55.652Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:01:55.652Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:01:55.876Z] [LOG] 
📝 Components to save:
[2025-10-26T08:01:55.877Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:01:55.877Z] [LOG]    Deduction components: 1
[2025-10-26T08:01:55.877Z] [LOG] Creating components for record f034a7d6-e52d-49f4-bff2-53ef6de7cddc: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:01:55.878Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 59999.965
}
[2025-10-26T08:01:56.069Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:01:56.259Z] [LOG] Created payroll_record_component: 2573db58-fce3-4ea8-a7d1-46a7fa4bc79e for Base Salary
[2025-10-26T08:01:56.260Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 139999.915
}
[2025-10-26T08:01:56.821Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:01:57.010Z] [LOG] Created payroll_record_component: 4b323e78-5003-44cd-8f89-1add34d29d54 for Attendance Shortfall (Info)
[2025-10-26T08:01:57.477Z] [LOG] ✅ Financial balances updated successfully for employee 01442599-7105-11f0-a50f-98e743540430
[2025-10-26T08:01:57.477Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:01:57.478Z] [LOG] 
======================================================================
[2025-10-26T08:01:57.478Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Chemil null
[2025-10-26T08:01:57.478Z] [LOG] ======================================================================
[2025-10-26T08:01:57.479Z] [LOG]    Base Salary (Full): Rs.250000.00
[2025-10-26T08:01:57.479Z] [LOG]    Actual Earned Base (Attendance-based): Rs.59999.96
[2025-10-26T08:01:57.479Z] [LOG]    Attendance Shortfall: Rs.139999.92
[2025-10-26T08:01:57.479Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:57.480Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:01:57.480Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:01:57.480Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:57.481Z] [LOG]    GROSS SALARY: Rs.59999.96
[2025-10-26T08:01:57.481Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:57.481Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:01:57.482Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:01:57.482Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:01:57.482Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:01:57.482Z] [LOG]       - Attendance Shortfall (Info): Rs.139999.92
[2025-10-26T08:01:57.483Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:01:57.483Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:01:57.484Z] [LOG]    NET SALARY: Rs.59999.96
[2025-10-26T08:01:57.484Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:01:57.484Z] [LOG] ======================================================================

[2025-10-26T08:01:57.484Z] [LOG] ✅ Chemil null: Calculation completed successfully
[2025-10-26T08:01:57.485Z] [LOG] 📊 Progress: 31/34 (91.2%)
[2025-10-26T08:01:57.485Z] [LOG] 
🧮 Processing: Sithira null (EMP000039)
[2025-10-26T08:01:57.485Z] [LOG] 📋 Record ID: fc38c07a-3ade-4d46-ba99-205a93c925f8
[2025-10-26T08:01:57.485Z] [LOG] 
======================================================================
[2025-10-26T08:01:57.486Z] [LOG] 🧮 CALCULATING PAYROLL: Sithira null (EMP000039)
[2025-10-26T08:01:57.486Z] [LOG] ======================================================================
[2025-10-26T08:01:58.365Z] [LOG] 🔍 Component filtering for employee 01441e19-7105-11f0-a50f-98e743540430:
[2025-10-26T08:01:58.366Z] [LOG]    Total components: 13
[2025-10-26T08:01:58.366Z] [LOG]    Applicable components: 13
[2025-10-26T08:01:58.366Z] [LOG]    Employee dept: undefined, designation: Designer
[2025-10-26T08:02:00.093Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:02:00.094Z] [LOG] 🔄 Processing financial records for employee 01441e19-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:02:00.293Z] [LOG] 📊 Found 0 active loans for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-26T08:02:00.526Z] [LOG] 📊 Found 0 active advances for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-26T08:02:00.757Z] [LOG] 📊 Found 0 approved bonuses for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-26T08:02:00.758Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:02:00.758Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:02:01.013Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:02:01.013Z] [LOG]    Employee ID: 01441e19-7105-11f0-a50f-98e743540430
[2025-10-26T08:02:01.013Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:02:01.014Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:02:01.014Z] [LOG]    Base Salary (Full Month): Rs.40000.00
[2025-10-26T08:02:01.238Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:02:01.238Z] [LOG]       Daily Salary: Rs.1600.00
[2025-10-26T08:02:01.238Z] [LOG]       Weekday Hourly Rate: Rs.188.24
[2025-10-26T08:02:01.239Z] [LOG]       Saturday Hourly Rate: Rs.355.56
[2025-10-26T08:02:01.239Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:02:01.239Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:02:01.240Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:02:01.836Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:02:01.836Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:02:02.037Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:02:02.038Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:02:02.038Z] [LOG]       Total completed sessions found: 6
[2025-10-26T08:02:02.038Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:02:02.039Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:02:02.039Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:02:02.039Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:02:02.040Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:02:02.040Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T08:02:02.040Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:02:02.267Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:02:02.267Z] [LOG]          Weekday: 42.50h
[2025-10-26T08:02:02.268Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:02:02.268Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:02:02.458Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:02:02.458Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:02:02.459Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:02:02.459Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:02:02.459Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:02:02.460Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:02:02.460Z] [LOG]       Weekday: 42.50h
[2025-10-26T08:02:02.460Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:02:02.460Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:02:02.461Z] [LOG]       Total Actual: 47.00h
[2025-10-26T08:02:02.461Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:02:02.461Z] [LOG]       Weekday: 136.00h × Rs.188.24 = Rs.25600.64
[2025-10-26T08:02:02.461Z] [LOG]       Saturday: 18.00h × Rs.355.56 = Rs.6400.08
[2025-10-26T08:02:02.461Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:02:02.461Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:02:02.462Z] [LOG]       Total Expected Earned: Rs.32000.72
[2025-10-26T08:02:02.462Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:02:02.462Z] [LOG]       Weekday: 42.50h × Rs.188.24 = Rs.8000.20
[2025-10-26T08:02:02.462Z] [LOG]       Saturday: 4.50h × Rs.355.56 = Rs.1600.02
[2025-10-26T08:02:02.462Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:02:02.463Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:02:02.463Z] [LOG]       Total Actual Earned: Rs.9600.22
[2025-10-26T08:02:02.463Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:02:02.463Z] [LOG]       Calculated At: Oct 26, 2025, 13:32:02
[2025-10-26T08:02:02.464Z] [LOG]       Expected Earned (until NOW): Rs.32000.72
[2025-10-26T08:02:02.464Z] [LOG]       Actual Earned (until NOW): Rs.9600.22
[2025-10-26T08:02:02.464Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:02:02.464Z] [LOG]       Attendance Deduction: Rs.22400.50
[2025-10-26T08:02:02.464Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:02:02.464Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T08:02:02.464Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-26T08:02:02.464Z] [LOG]    Actual Earned Base: Rs.9600.22
[2025-10-26T08:02:02.464Z] [LOG]    Attendance Shortfall: Rs.22400.50
[2025-10-26T08:02:02.464Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:02:02.464Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:02:02.465Z] [LOG]    Gross Salary: 9600.220000000001
[2025-10-26T08:02:02.465Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:02:02.465Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:02:02.465Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:02.465Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:02:02.465Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:02.465Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:02:02.465Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:02.465Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:02:02.465Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:02.466Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:02:02.466Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:02.466Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:02:02.466Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:02.466Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:02:02.466Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:02.466Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:02:02.466Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:02.466Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:02:02.466Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:02.466Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:02:02.466Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:02.467Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:02:02.467Z] [LOG]    EPF/ETF calculated on: Rs.9600.22
[2025-10-26T08:02:02.467Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:02:02.467Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:02:02.467Z] [LOG] 💰 GROSS CALCULATION for Sithira null:
[2025-10-26T08:02:02.467Z] [LOG]    Base Salary: 40000
[2025-10-26T08:02:02.467Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:02:02.467Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:02:02.467Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:02.468Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:02:02.468Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:02.468Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:02:02.468Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:02.672Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:02:02.672Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:02:02.673Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:02:02.673Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:02:02.674Z] [LOG]    Actual Earned Base: Rs.9600.22
[2025-10-26T08:02:02.674Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:02:02.674Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:02:02.674Z] [LOG]    = Gross Salary: Rs.9600.22
[2025-10-26T08:02:02.675Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:02:02.675Z] [LOG]    Attendance Shortfall (Info): Rs.22400.50
[2025-10-26T08:02:02.675Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:02:02.676Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:02:02.676Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:02:02.676Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:02:02.677Z] [LOG]    Gross Salary: Rs.9600.22
[2025-10-26T08:02:02.677Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:02:02.677Z] [LOG]    = NET SALARY: Rs.9600.22
[2025-10-26T08:02:02.678Z] [LOG] 
💾 Database Update:
[2025-10-26T08:02:02.678Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:02:02.678Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:02:03.059Z] [LOG] 
📝 Components to save:
[2025-10-26T08:02:03.059Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:02:03.060Z] [LOG]    Deduction components: 1
[2025-10-26T08:02:03.060Z] [LOG] Creating components for record fc38c07a-3ade-4d46-ba99-205a93c925f8: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:02:03.061Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 9600.220000000001
}
[2025-10-26T08:02:03.249Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:02:03.478Z] [LOG] Created payroll_record_component: ad007ff9-789e-402e-9b63-2cd17126e1fd for Base Salary
[2025-10-26T08:02:03.478Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 22400.5
}
[2025-10-26T08:02:03.717Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:02:03.957Z] [LOG] Created payroll_record_component: 6b09718b-796e-438d-814a-8e2d51ecb2ae for Attendance Shortfall (Info)
[2025-10-26T08:02:04.333Z] [LOG] ✅ Financial balances updated successfully for employee 01441e19-7105-11f0-a50f-98e743540430
[2025-10-26T08:02:04.333Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:02:04.334Z] [LOG] 
======================================================================
[2025-10-26T08:02:04.334Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sithira null
[2025-10-26T08:02:04.335Z] [LOG] ======================================================================
[2025-10-26T08:02:04.335Z] [LOG]    Base Salary (Full): Rs.40000.00
[2025-10-26T08:02:04.335Z] [LOG]    Actual Earned Base (Attendance-based): Rs.9600.22
[2025-10-26T08:02:04.336Z] [LOG]    Attendance Shortfall: Rs.22400.50
[2025-10-26T08:02:04.336Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:02:04.336Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:02:04.337Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:02:04.337Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:02:04.337Z] [LOG]    GROSS SALARY: Rs.9600.22
[2025-10-26T08:02:04.337Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:02:04.338Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:02:04.338Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:02:04.339Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:02:04.339Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:02:04.339Z] [LOG]       - Attendance Shortfall (Info): Rs.22400.50
[2025-10-26T08:02:04.339Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:02:04.340Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:02:04.340Z] [LOG]    NET SALARY: Rs.9600.22
[2025-10-26T08:02:04.340Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:02:04.340Z] [LOG] ======================================================================

[2025-10-26T08:02:04.341Z] [LOG] ✅ Sithira null: Calculation completed successfully
[2025-10-26T08:02:04.341Z] [LOG] 📊 Progress: 32/34 (94.1%)
[2025-10-26T08:02:04.341Z] [LOG] 
🧮 Processing: Sujevan Selvaratnam null (EMP000026)
[2025-10-26T08:02:04.342Z] [LOG] 📋 Record ID: fc987c78-b1ae-477e-95e0-4b624ffaca09
[2025-10-26T08:02:04.342Z] [LOG] 
======================================================================
[2025-10-26T08:02:04.342Z] [LOG] 🧮 CALCULATING PAYROLL: Sujevan Selvaratnam null (EMP000026)
[2025-10-26T08:02:04.342Z] [LOG] ======================================================================
[2025-10-26T08:02:05.157Z] [LOG] 🔍 Component filtering for employee 0143e6c3-7105-11f0-a50f-98e743540430:
[2025-10-26T08:02:05.157Z] [LOG]    Total components: 13
[2025-10-26T08:02:05.158Z] [LOG]    Applicable components: 13
[2025-10-26T08:02:05.158Z] [LOG]    Employee dept: undefined, designation: null
[2025-10-26T08:02:06.446Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:02:06.446Z] [LOG] 🔄 Processing financial records for employee 0143e6c3-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:02:06.678Z] [LOG] 📊 Found 0 active loans for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-26T08:02:06.923Z] [LOG] 📊 Found 0 active advances for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-26T08:02:07.165Z] [LOG] 📊 Found 0 approved bonuses for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-26T08:02:07.165Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:02:07.166Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:02:07.397Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:02:07.397Z] [LOG]    Employee ID: 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-26T08:02:07.398Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:02:07.398Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:02:07.399Z] [LOG]    Base Salary (Full Month): Rs.1.00
[2025-10-26T08:02:07.654Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:02:07.655Z] [LOG]       Daily Salary: Rs.0.04
[2025-10-26T08:02:07.655Z] [LOG]       Weekday Hourly Rate: Rs.0.00
[2025-10-26T08:02:07.655Z] [LOG]       Saturday Hourly Rate: Rs.0.01
[2025-10-26T08:02:07.656Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:02:07.656Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:02:07.656Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:02:08.357Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:02:08.358Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:02:08.598Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:02:08.598Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:02:08.599Z] [LOG]       Total completed sessions found: 6
[2025-10-26T08:02:08.599Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:02:08.599Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:02:08.600Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:02:08.600Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:02:08.600Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:02:08.601Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T08:02:08.601Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:02:08.790Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:02:08.791Z] [LOG]          Weekday: 42.50h
[2025-10-26T08:02:08.791Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:02:08.791Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:02:09.001Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:02:09.002Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:02:09.002Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:02:09.002Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:02:09.003Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:02:09.003Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:02:09.003Z] [LOG]       Weekday: 42.50h
[2025-10-26T08:02:09.003Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:02:09.004Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:02:09.004Z] [LOG]       Total Actual: 47.00h
[2025-10-26T08:02:09.004Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:02:09.005Z] [LOG]       Weekday: 136.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:02:09.005Z] [LOG]       Saturday: 18.00h × Rs.0.01 = Rs.0.18
[2025-10-26T08:02:09.005Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:02:09.006Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:02:09.006Z] [LOG]       Total Expected Earned: Rs.0.18
[2025-10-26T08:02:09.006Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:02:09.007Z] [LOG]       Weekday: 42.50h × Rs.0.00 = Rs.0.00
[2025-10-26T08:02:09.007Z] [LOG]       Saturday: 4.50h × Rs.0.01 = Rs.0.04
[2025-10-26T08:02:09.007Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:02:09.008Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:02:09.008Z] [LOG]       Total Actual Earned: Rs.0.04
[2025-10-26T08:02:09.009Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:02:09.009Z] [LOG]       Calculated At: Oct 26, 2025, 13:32:09
[2025-10-26T08:02:09.009Z] [LOG]       Expected Earned (until NOW): Rs.0.18
[2025-10-26T08:02:09.010Z] [LOG]       Actual Earned (until NOW): Rs.0.04
[2025-10-26T08:02:09.010Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:02:09.010Z] [LOG]       Attendance Deduction: Rs.0.14
[2025-10-26T08:02:09.011Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:02:09.011Z] [LOG]       📉 Shortfall: 107.00 hours (75.00% of expected)
[2025-10-26T08:02:09.011Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-26T08:02:09.011Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-26T08:02:09.012Z] [LOG]    Attendance Shortfall: Rs.0.14
[2025-10-26T08:02:09.012Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:02:09.012Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:02:09.012Z] [LOG]    Gross Salary: 0.045
[2025-10-26T08:02:09.012Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:02:09.012Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:02:09.013Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:09.013Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:02:09.014Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:09.014Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:02:09.015Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:09.015Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:02:09.015Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:09.015Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:02:09.016Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:09.016Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:02:09.016Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:09.016Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:02:09.016Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:09.016Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:02:09.016Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:09.017Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:02:09.017Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:09.017Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:02:09.017Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:09.017Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:02:09.018Z] [LOG]    EPF/ETF calculated on: Rs.0.04
[2025-10-26T08:02:09.018Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:02:09.018Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:02:09.018Z] [LOG] 💰 GROSS CALCULATION for Sujevan Selvaratnam null:
[2025-10-26T08:02:09.018Z] [LOG]    Base Salary: 1
[2025-10-26T08:02:09.019Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:02:09.019Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:02:09.019Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:09.019Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:02:09.019Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:09.020Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:02:09.020Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:09.247Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:02:09.247Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:02:09.247Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:02:09.248Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:02:09.248Z] [LOG]    Actual Earned Base: Rs.0.04
[2025-10-26T08:02:09.248Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:02:09.249Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:02:09.249Z] [LOG]    = Gross Salary: Rs.0.04
[2025-10-26T08:02:09.249Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:02:09.250Z] [LOG]    Attendance Shortfall (Info): Rs.0.14
[2025-10-26T08:02:09.250Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:02:09.250Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:02:09.251Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:02:09.251Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:02:09.251Z] [LOG]    Gross Salary: Rs.0.04
[2025-10-26T08:02:09.251Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:02:09.252Z] [LOG]    = NET SALARY: Rs.0.04
[2025-10-26T08:02:09.252Z] [LOG] 
💾 Database Update:
[2025-10-26T08:02:09.252Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:02:09.253Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:02:09.478Z] [LOG] 
📝 Components to save:
[2025-10-26T08:02:09.478Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:02:09.479Z] [LOG]    Deduction components: 1
[2025-10-26T08:02:09.479Z] [LOG] Creating components for record fc987c78-b1ae-477e-95e0-4b624ffaca09: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:02:09.480Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 0.045
}
[2025-10-26T08:02:09.717Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:02:09.957Z] [LOG] Created payroll_record_component: 45a76836-c236-4d27-bab2-dcb62ee730e2 for Base Salary
[2025-10-26T08:02:09.957Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 0.135
}
[2025-10-26T08:02:10.205Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:02:10.437Z] [LOG] Created payroll_record_component: f3095bdf-80af-4cf2-8a60-10646deffa4d for Attendance Shortfall (Info)
[2025-10-26T08:02:10.918Z] [LOG] ✅ Financial balances updated successfully for employee 0143e6c3-7105-11f0-a50f-98e743540430
[2025-10-26T08:02:10.918Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:02:10.919Z] [LOG] 
======================================================================
[2025-10-26T08:02:10.919Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Sujevan Selvaratnam null
[2025-10-26T08:02:10.919Z] [LOG] ======================================================================
[2025-10-26T08:02:10.920Z] [LOG]    Base Salary (Full): Rs.1.00
[2025-10-26T08:02:10.920Z] [LOG]    Actual Earned Base (Attendance-based): Rs.0.04
[2025-10-26T08:02:10.920Z] [LOG]    Attendance Shortfall: Rs.0.14
[2025-10-26T08:02:10.921Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:02:10.921Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:02:10.921Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:02:10.922Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:02:10.922Z] [LOG]    GROSS SALARY: Rs.0.04
[2025-10-26T08:02:10.923Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:02:10.923Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:02:10.923Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:02:10.924Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:02:10.924Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:02:10.924Z] [LOG]       - Attendance Shortfall (Info): Rs.0.14
[2025-10-26T08:02:10.924Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:02:10.925Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:02:10.925Z] [LOG]    NET SALARY: Rs.0.04
[2025-10-26T08:02:10.925Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:02:10.926Z] [LOG] ======================================================================

[2025-10-26T08:02:10.926Z] [LOG] ✅ Sujevan Selvaratnam null: Calculation completed successfully
[2025-10-26T08:02:10.926Z] [LOG] 📊 Progress: 33/34 (97.1%)
[2025-10-26T08:02:10.927Z] [LOG] 
🧮 Processing: Ishara null (EMP000011)
[2025-10-26T08:02:10.927Z] [LOG] 📋 Record ID: fd3546ff-b9f3-420c-82a4-3760af322c7e
[2025-10-26T08:02:10.927Z] [LOG] 
======================================================================
[2025-10-26T08:02:10.927Z] [LOG] 🧮 CALCULATING PAYROLL: Ishara null (EMP000011)
[2025-10-26T08:02:10.928Z] [LOG] ======================================================================
[2025-10-26T08:02:11.878Z] [LOG] 🔍 Component filtering for employee 0143ac0c-7105-11f0-a50f-98e743540430:
[2025-10-26T08:02:11.878Z] [LOG]    Total components: 13
[2025-10-26T08:02:11.879Z] [LOG]    Applicable components: 13
[2025-10-26T08:02:11.879Z] [LOG]    Employee dept: undefined, designation: Sales Executive
[2025-10-26T08:02:13.756Z] [LOG] 
🔄 Processing financial records...
[2025-10-26T08:02:13.757Z] [LOG] 🔄 Processing financial records for employee 0143ac0c-7105-11f0-a50f-98e743540430 in period 2025-10-01 to 2025-10-31
[2025-10-26T08:02:13.958Z] [LOG] 📊 Found 0 active loans for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-26T08:02:14.198Z] [LOG] 📊 Found 0 active advances for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-26T08:02:14.447Z] [LOG] 📊 Found 0 approved bonuses for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-26T08:02:14.447Z] [LOG] ✅ Financial adjustments calculated: {
  "loans": 0,
  "advances": 0,
  "bonuses": 0,
  "netAdjustment": 0
}
[2025-10-26T08:02:14.448Z] [LOG] 
💰 Step 1: Calculating actual earned base salary (attendance-based)...
[2025-10-26T08:02:14.685Z] [LOG] 
💰 CALCULATING ATTENDANCE DEDUCTION (CORRECTED APPROACH)
[2025-10-26T08:02:14.686Z] [LOG]    Employee ID: 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-26T08:02:14.686Z] [LOG]    📅 Full Period: 2025-10-01 to 2025-10-31
[2025-10-26T08:02:14.687Z] [LOG]    📅 Calculation Until: 2025-10-25 (PARTIAL - Until Today)
[2025-10-26T08:02:14.687Z] [LOG]    Base Salary (Full Month): Rs.50000.00
[2025-10-26T08:02:14.873Z] [LOG] 
   💵 Pre-calculated Rates (from payroll_records):
[2025-10-26T08:02:14.874Z] [LOG]       Daily Salary: Rs.2000.00
[2025-10-26T08:02:14.874Z] [LOG]       Weekday Hourly Rate: Rs.235.29
[2025-10-26T08:02:14.874Z] [LOG]       Saturday Hourly Rate: Rs.444.44
[2025-10-26T08:02:14.875Z] [LOG]       Sunday Hourly Rate: Rs.0.00
[2025-10-26T08:02:14.875Z] [LOG] 
   📊 Full Period Working Days:
[2025-10-26T08:02:14.875Z] [LOG]       Weekdays: 21, Saturdays: 4, Sundays: 0
[2025-10-26T08:02:15.704Z] [LOG] 
   📊 Working Days Until Yesterday:
[2025-10-26T08:02:15.704Z] [LOG]       Weekdays: 16, Saturdays: 4, Sundays: 0
[2025-10-26T08:02:16.127Z] [LOG] 
   ⏰ Calculating Completed Hours (Until Yesterday):
[2025-10-26T08:02:16.128Z] [LOG]       Period: 2025-10-01 to 2025-10-25
[2025-10-26T08:02:16.128Z] [LOG]       Total completed sessions found: 6
[2025-10-26T08:02:16.129Z] [LOG] 
      📋 Breakdown by attendance record:
[2025-10-26T08:02:16.129Z] [LOG]          1. 2025-10-11 (Saturday): 4.50h
[2025-10-26T08:02:16.129Z] [LOG]          2. 2025-10-15 (Weekday): 8.50h
[2025-10-26T08:02:16.130Z] [LOG]          3. 2025-10-16 (Weekday): 8.50h
[2025-10-26T08:02:16.130Z] [LOG]          4. 2025-10-22 (Weekday): 8.50h
[2025-10-26T08:02:16.130Z] [LOG]          5. 2025-10-23 (Weekday): 8.50h
[2025-10-26T08:02:16.130Z] [LOG]          6. 2025-10-24 (Weekday): 8.50h
[2025-10-26T08:02:16.318Z] [LOG] 
      📊 Aggregated Totals:
[2025-10-26T08:02:16.319Z] [LOG]          Weekday: 42.50h
[2025-10-26T08:02:16.319Z] [LOG]          Saturday: 4.50h
[2025-10-26T08:02:16.320Z] [LOG]          Sunday: 0.00h
[2025-10-26T08:02:16.532Z] [LOG] 
   ⏰ TOTAL EXPECTED Hours (until NOW):
[2025-10-26T08:02:16.533Z] [LOG]       Weekday: 136.00h
[2025-10-26T08:02:16.533Z] [LOG]       Saturday: 18.00h
[2025-10-26T08:02:16.533Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:02:16.534Z] [LOG]       Total Expected: 154.00h
[2025-10-26T08:02:16.534Z] [LOG] 
   ⏰ TOTAL ACTUAL Hours (including live session):
[2025-10-26T08:02:16.535Z] [LOG]       Weekday: 42.50h
[2025-10-26T08:02:16.535Z] [LOG]       Saturday: 4.50h
[2025-10-26T08:02:16.535Z] [LOG]       Sunday: 0.00h
[2025-10-26T08:02:16.535Z] [LOG]       Total Actual: 47.00h
[2025-10-26T08:02:16.536Z] [LOG] 
   💵 EXPECTED Earned Salary (until NOW):
[2025-10-26T08:02:16.536Z] [LOG]       Weekday: 136.00h × Rs.235.29 = Rs.31999.44
[2025-10-26T08:02:16.536Z] [LOG]       Saturday: 18.00h × Rs.444.44 = Rs.7999.92
[2025-10-26T08:02:16.537Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:02:16.537Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:02:16.537Z] [LOG]       Total Expected Earned: Rs.39999.36
[2025-10-26T08:02:16.537Z] [LOG] 
   💵 ACTUAL Earned Salary (including live session):
[2025-10-26T08:02:16.538Z] [LOG]       Weekday: 42.50h × Rs.235.29 = Rs.9999.82
[2025-10-26T08:02:16.538Z] [LOG]       Saturday: 4.50h × Rs.444.44 = Rs.1999.98
[2025-10-26T08:02:16.538Z] [LOG]       Sunday: 0.00h × Rs.0.00 = Rs.0.00
[2025-10-26T08:02:16.538Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:02:16.538Z] [LOG]       Total Actual Earned: Rs.11999.80
[2025-10-26T08:02:16.539Z] [LOG] 
   📊 FINAL CALCULATION (REAL-TIME):
[2025-10-26T08:02:16.539Z] [LOG]       Calculated At: Oct 26, 2025, 13:32:16
[2025-10-26T08:02:16.540Z] [LOG]       Expected Earned (until NOW): Rs.39999.36
[2025-10-26T08:02:16.540Z] [LOG]       Actual Earned (until NOW): Rs.11999.80
[2025-10-26T08:02:16.540Z] [LOG]       ─────────────────────────────────────────────────────
[2025-10-26T08:02:16.540Z] [LOG]       Attendance Deduction: Rs.27999.56
[2025-10-26T08:02:16.540Z] [LOG]       (Formula: Expected - Actual, NOT Base Salary - Actual)
[2025-10-26T08:02:16.540Z] [LOG]       📉 Shortfall: 107.00 hours (70.00% of expected)
[2025-10-26T08:02:16.540Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:02:16.540Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T08:02:16.541Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T08:02:16.541Z] [LOG] 
💸 Step 2: Calculating statutory deductions (EPF/ETF) on actual earned base...
[2025-10-26T08:02:16.541Z] [LOG] 💸 DEDUCTION CALCULATION:
[2025-10-26T08:02:16.541Z] [LOG]    Gross Salary: 11999.804999999998
[2025-10-26T08:02:16.541Z] [LOG]    📋 Processing 10 configured deduction components
[2025-10-26T08:02:16.541Z] [LOG] 🧮 Calculating component: Weekend Shortfall Deduction (fixed)
[2025-10-26T08:02:16.541Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:16.541Z] [LOG] 🧮 Calculating component: Unpaid Leave Deduction (fixed)
[2025-10-26T08:02:16.542Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:16.542Z] [LOG] 🧮 Calculating component: Attendance Deduction (fixed)
[2025-10-26T08:02:16.542Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:16.542Z] [LOG] 🧮 Calculating component: Advance Deductions (fixed)
[2025-10-26T08:02:16.542Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:16.542Z] [LOG] 🧮 Calculating component: Loan Deductions (fixed)
[2025-10-26T08:02:16.542Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:16.543Z] [LOG] 🧮 Calculating component: INCOME TAX (fixed)
[2025-10-26T08:02:16.543Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:16.543Z] [LOG] 🧮 Calculating component: Weekend Absent Days (fixed)
[2025-10-26T08:02:16.543Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:16.543Z] [LOG] 🧮 Calculating component: Employee Provident Fund (8%) (fixed)
[2025-10-26T08:02:16.543Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:16.543Z] [LOG] 🧮 Calculating component: Working Hours Shortfall (fixed)
[2025-10-26T08:02:16.544Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:16.544Z] [LOG] 🧮 Calculating component: Attendance Shortfall (Info) (fixed)
[2025-10-26T08:02:16.544Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:16.544Z] [LOG]    📊 Total Deductions: 0
[2025-10-26T08:02:16.544Z] [LOG]    EPF/ETF calculated on: Rs.11999.80
[2025-10-26T08:02:16.544Z] [LOG]    Total EPF/ETF: Rs.0.00
[2025-10-26T08:02:16.544Z] [LOG] 
🎁 Step 3: Adding full allowances and bonuses (not prorated)...
[2025-10-26T08:02:16.544Z] [LOG] 💰 GROSS CALCULATION for Ishara null:
[2025-10-26T08:02:16.544Z] [LOG]    Base Salary: 50000
[2025-10-26T08:02:16.544Z] [LOG]    📋 Processing 3 configured earning components
[2025-10-26T08:02:16.544Z] [LOG] 🧮 Calculating component: Financial Bonuses (fixed)
[2025-10-26T08:02:16.544Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:16.544Z] [LOG] 🧮 Calculating component: Base Salary (Attendance-based) (fixed)
[2025-10-26T08:02:16.544Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:16.545Z] [LOG] 🧮 Calculating component: Base Salary (fixed)
[2025-10-26T08:02:16.545Z] [LOG]    Fixed amount: 0
[2025-10-26T08:02:16.773Z] [LOG] ⚠️  No overtime enable setting found for client it-signature, defaulting to disabled
[2025-10-26T08:02:16.774Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:02:16.774Z] [LOG]    Financial Bonuses: Rs.0.00
[2025-10-26T08:02:16.774Z] [LOG] 
📊 Step 4: Gross Salary Calculation:
[2025-10-26T08:02:16.775Z] [LOG]    Actual Earned Base: Rs.11999.80
[2025-10-26T08:02:16.775Z] [LOG]    + Full Allowances: Rs.0.00
[2025-10-26T08:02:16.775Z] [LOG]    + Bonuses: Rs.0.00
[2025-10-26T08:02:16.776Z] [LOG]    = Gross Salary: Rs.11999.80
[2025-10-26T08:02:16.776Z] [LOG] 
💳 Step 5: Combining all deductions...
[2025-10-26T08:02:16.776Z] [LOG]    Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T08:02:16.777Z] [LOG]    ─────────────────────────────────────────────────────
[2025-10-26T08:02:16.777Z] [LOG]    Total Deductions (EPF/ETF/Loans/Advances): Rs.0.00
[2025-10-26T08:02:16.777Z] [LOG]    Note: Attendance shortfall shown for info only, not deducted from net salary
[2025-10-26T08:02:16.778Z] [LOG] 
✅ Step 6: Net Salary Calculation:
[2025-10-26T08:02:16.778Z] [LOG]    Gross Salary: Rs.11999.80
[2025-10-26T08:02:16.778Z] [LOG]    - Total Deductions: Rs.0.00
[2025-10-26T08:02:16.779Z] [LOG]    = NET SALARY: Rs.11999.80
[2025-10-26T08:02:16.779Z] [LOG] 
💾 Database Update:
[2025-10-26T08:02:16.779Z] [LOG]    Total Earnings (Allowances + Bonuses): Rs.0.00 (Allowances: 0.00 + Bonuses: 0.00)
[2025-10-26T08:02:16.780Z] [LOG]    Total Deductions: Rs.0.00 (EPF/ETF: 0.00 + Loans: 0.00 + Advances: 0.00)
[2025-10-26T08:02:17.007Z] [LOG] 
📝 Components to save:
[2025-10-26T08:02:17.007Z] [LOG]    Gross/Earnings components: 1
[2025-10-26T08:02:17.007Z] [LOG]    Deduction components: 1
[2025-10-26T08:02:17.008Z] [LOG] Creating components for record fd3546ff-b9f3-420c-82a4-3760af322c7e: {
  "grossComponentsCount": 1,
  "deductionComponentsCount": 1,
  "taxComponentsCount": 0
}
[2025-10-26T08:02:17.008Z] [LOG] Processing component: {
  "name": "Base Salary",
  "type": "earning",
  "amount": 11999.804999999998
}
[2025-10-26T08:02:17.237Z] [LOG] Using existing component ID: f967c9ea-0dd2-4bae-a66b-df480e646abc
[2025-10-26T08:02:17.484Z] [LOG] Created payroll_record_component: 2a4aa301-77c1-48c3-a353-96ab27854bed for Base Salary
[2025-10-26T08:02:17.485Z] [LOG] Processing component: {
  "name": "Attendance Shortfall (Info)",
  "type": "deduction",
  "amount": 27999.555
}
[2025-10-26T08:02:17.724Z] [LOG] Using existing component ID: da98d015-c1d3-4dc8-a548-b83cbab17df4
[2025-10-26T08:02:17.957Z] [LOG] Created payroll_record_component: 2ae7412a-2ec4-40f1-894d-2f034c641e72 for Attendance Shortfall (Info)
[2025-10-26T08:02:18.358Z] [LOG] ✅ Financial balances updated successfully for employee 0143ac0c-7105-11f0-a50f-98e743540430
[2025-10-26T08:02:18.358Z] [LOG] ✅ Financial balances updated successfully
[2025-10-26T08:02:18.359Z] [LOG] 
======================================================================
[2025-10-26T08:02:18.359Z] [LOG] 📊 PAYROLL CALCULATION SUMMARY: Ishara null
[2025-10-26T08:02:18.359Z] [LOG] ======================================================================
[2025-10-26T08:02:18.360Z] [LOG]    Base Salary (Full): Rs.50000.00
[2025-10-26T08:02:18.360Z] [LOG]    Actual Earned Base (Attendance-based): Rs.11999.80
[2025-10-26T08:02:18.360Z] [LOG]    Attendance Shortfall: Rs.27999.56
[2025-10-26T08:02:18.361Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:02:18.361Z] [LOG]    Full Allowances: Rs.0.00
[2025-10-26T08:02:18.361Z] [LOG]    Bonuses: Rs.0.00
[2025-10-26T08:02:18.362Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:02:18.362Z] [LOG]    GROSS SALARY: Rs.11999.80
[2025-10-26T08:02:18.362Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:02:18.363Z] [LOG]    Deductions Breakdown:
[2025-10-26T08:02:18.363Z] [LOG]       - EPF/ETF (on Actual Earned Base): Rs.0.00
[2025-10-26T08:02:18.363Z] [LOG]       - Loan Deductions: Rs.0.00
[2025-10-26T08:02:18.364Z] [LOG]       - Advance Deductions: Rs.0.00
[2025-10-26T08:02:18.364Z] [LOG]       - Attendance Shortfall (Info): Rs.27999.56
[2025-10-26T08:02:18.364Z] [LOG]    Total Actual Deductions (EPF/Loans/Advances): Rs.0.00
[2025-10-26T08:02:18.365Z] [LOG]    ─────────────────────────────────────────────────────────────────────
[2025-10-26T08:02:18.365Z] [LOG]    NET SALARY: Rs.11999.80
[2025-10-26T08:02:18.365Z] [LOG]    Note: Attendance shortfall is shown for information only
[2025-10-26T08:02:18.365Z] [LOG] ======================================================================

[2025-10-26T08:02:18.365Z] [LOG] ✅ Ishara null: Calculation completed successfully
[2025-10-26T08:02:18.366Z] [LOG] 📊 Progress: 34/34 (100.0%)
[2025-10-26T08:02:18.366Z] [LOG] 
============================================================
[2025-10-26T08:02:18.366Z] [LOG] 📈 Processing Summary: 34 successful, 0 failed
[2025-10-26T08:02:20.357Z] [LOG] 🎉 Payroll calculation completed successfully!
[2025-10-26T08:02:20.357Z] [LOG] 📊 Final Summary: 34 processed, 0 errors
[2025-10-26T08:02:20.358Z] [INFO] ================================================================================
[2025-10-26T08:02:20.358Z] [INFO] ⏰ Completed at: 2025-10-26T08:02:20.358Z
[2025-10-26T08:02:20.358Z] [INFO] 📊 Total log entries: 5767